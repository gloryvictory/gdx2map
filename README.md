# gdx2map
Map (Maplibre GL) for gdx2 project

## Описание проекта

`gdx2map` — это веб-приложение для отображения и взаимодействия с геоданными в рамках проекта `gdx2`. Приложение использует библиотеку Maplibre GL для отображения интерактивных карт с различными слоями данных, включая точки, линии и полигоны.

## Функциональность

- Отображение интерактивных карт с использованием Maplibre GL
- Поддержка различных стилей базовых карт
- Работа с геоданными (точки, линии, полигоны)
- Таблицы атрибутов с возможностью фильтрации и экспорта данных
- Интерактивное выделение объектов на карте
- Управление видимостью слоев
- Экспорт данных в формат Excel

## Технологии

- **Frontend**: TypeScript, React, Vite
- **Стилизация**: Tailwind CSS
- **Картография**: Maplibre GL, react-map-gl
- **UI компоненты**: Radix UI, Lucide React Icons
- **Работа с данными**: Axios, AG-Grid, XLSX
- **Геообработка**: Turf.js, Proj4
- **Сборка**: Vite, TypeScript compiler

## Структура проекта

```
src/
├── components/
│   ├── map/          # Компоненты карты
│   └── ui/           # Базовые UI компоненты
├── constants/        # Константы приложения
├── data/             # Данные и моки
├── layers/           # Конфигурации слоев карты
├── lib/              # Вспомогательные библиотеки
├── App.tsx           # Главный компонент приложения
├── config.ts         # Конфигурационные параметры
└── types.ts          # Типы TypeScript
```
## Недавние изменения

### Версия с улучшенной функциональностью атрибутов

#### Изменения в логике зума при выборе объектов:
- Изменена логика зума при выборе строки в таблице атрибутов: теперь сначала происходит зум на значение -3 уровня, а затем зумирование на объект
- Улучшена логика зума для всех типов геометрии (точки, линии, полигоны) - теперь рассчитывается bounding box и применяется fitBounds

#### Индикатор загрузки карты:
- Добавлен спиннер в нижнюю панель (BottomPanel), который отображается во время перерисовки карты
- Индикатор показывает состояние загрузки при обновлении слоев и фильтров

#### Контекстное меню таблицы атрибутов:
- Добавлен пункт "Показать только этот" в контекстное меню таблицы атрибутов
- При выборе этого пункта на карте отфильтровывается соответствующий слой и остается только выбранный объект с зумом на него
- Добавлен пункт "Показать все" для отмены фильтрации

#### Экспорт данных в Excel:
- Добавлена кнопка "Экспорт в Excel" рядом с кнопкой "Показать на карте" для каждой вкладки (Точки, Линии, Полигоны)
- Экспорт происходит в формате .xlsx с русскими названиями столбцов
- Используется библиотека xlsx для генерации Excel файлов

#### Улучшения интерфейса:
- Изменен цвет выделения выбранных объектов на карте с желтого на красный
- Улучшена логика очистки предыдущего выделения при выборе новой строки в таблице атрибутов
- Оптимизирована фильтрация карты с использованием setFilter вместо изменения видимости слоев

## Установка и запуск

1. Клонируйте репозиторий:
   ```bash
   git clone <repository-url>
   cd gdx2map
   ```

2. Установите зависимости:
   ```bash
   npm install
   ```

3. Запустите приложение в режиме разработки:
   ```bash
   npm run dev
   ```

4. Сборка для production:
   ```bash
   npm run build
   ```

## Основные скрипты

- `npm run dev` - запуск сервера разработки
- `npm run build` - сборка проекта для production
- `npm run lint` - проверка кода с помощью Biome
- `npm run typecheck` - проверка типов TypeScript

## Вклад и правила участия

Мы приветствуем вклад от сообщества! Чтобы внести свой вклад в проект, следуйте этим шагам:

1. Создайте форк репозитория.
2. Создайте ветку для своих изменений:
   ```bash
   git checkout -b feature/your-feature
   ```

3. Сделайте изменения и закоммитьте их:
   ```bash
   git commit -m "Добавлена новая функциональность"
   ```

4. Запушьте изменения в ваш форк:
   ```bash
   git push origin feature/your-feature
   ```

5. Создайте pull request в основной репозиторий.

## Лицензия

Проект лицензирован под лицензией MIT. Подробности см. в файле [LICENSE](LICENSE).
