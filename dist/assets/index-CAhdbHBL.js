function xL(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in e)){const s=Object.getOwnPropertyDescriptor(i,n);s&&Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();var b7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Y2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CL={exports:{}},JC={},_L={exports:{}},Br={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv=Symbol.for("react.element"),S7=Symbol.for("react.portal"),E7=Symbol.for("react.fragment"),R7=Symbol.for("react.strict_mode"),T7=Symbol.for("react.profiler"),P7=Symbol.for("react.provider"),M7=Symbol.for("react.context"),F7=Symbol.for("react.forward_ref"),A7=Symbol.for("react.suspense"),I7=Symbol.for("react.memo"),D7=Symbol.for("react.lazy"),OF=Symbol.iterator;function k7(e){return e===null||typeof e!="object"?null:(e=OF&&e[OF]||e["@@iterator"],typeof e=="function"?e:null)}var bL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SL=Object.assign,EL={};function Up(e,t,r){this.props=e,this.context=t,this.refs=EL,this.updater=r||bL}Up.prototype.isReactComponent={};Up.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Up.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function RL(){}RL.prototype=Up.prototype;function Q2(e,t,r){this.props=e,this.context=t,this.refs=EL,this.updater=r||bL}var J2=Q2.prototype=new RL;J2.constructor=Q2;SL(J2,Up.prototype);J2.isPureReactComponent=!0;var NF=Array.isArray,TL=Object.prototype.hasOwnProperty,eR={current:null},PL={key:!0,ref:!0,__self:!0,__source:!0};function ML(e,t,r){var i,n={},s=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)TL.call(t,i)&&!PL.hasOwnProperty(i)&&(n[i]=t[i]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var u=Array(o),d=0;d<o;d++)u[d]=arguments[d+2];n.children=u}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:uv,type:e,key:s,ref:a,props:n,_owner:eR.current}}function L7(e,t){return{$$typeof:uv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tR(e){return typeof e=="object"&&e!==null&&e.$$typeof===uv}function O7(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var BF=/\/+/g;function ub(e,t){return typeof e=="object"&&e!==null&&e.key!=null?O7(""+e.key):t.toString(36)}function zw(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case uv:case S7:a=!0}}if(a)return a=e,n=n(a),e=i===""?"."+ub(a,0):i,NF(n)?(r="",e!=null&&(r=e.replace(BF,"$&/")+"/"),zw(n,t,r,"",function(d){return d})):n!=null&&(tR(n)&&(n=L7(n,r+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(BF,"$&/")+"/")+e)),t.push(n)),1;if(a=0,i=i===""?".":i+":",NF(e))for(var o=0;o<e.length;o++){s=e[o];var u=i+ub(s,o);a+=zw(s,t,r,u,n)}else if(u=k7(e),typeof u=="function")for(e=u.call(e),o=0;!(s=e.next()).done;)s=s.value,u=i+ub(s,o++),a+=zw(s,t,r,u,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function qy(e,t,r){if(e==null)return e;var i=[],n=0;return zw(e,i,"","",function(s){return t.call(r,s,n++)}),i}function N7(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var to={current:null},Gw={transition:null},B7={ReactCurrentDispatcher:to,ReactCurrentBatchConfig:Gw,ReactCurrentOwner:eR};function FL(){throw Error("act(...) is not supported in production builds of React.")}Br.Children={map:qy,forEach:function(e,t,r){qy(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return qy(e,function(){t++}),t},toArray:function(e){return qy(e,function(t){return t})||[]},only:function(e){if(!tR(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Br.Component=Up;Br.Fragment=E7;Br.Profiler=T7;Br.PureComponent=Q2;Br.StrictMode=R7;Br.Suspense=A7;Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B7;Br.act=FL;Br.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=SL({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=eR.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)TL.call(t,u)&&!PL.hasOwnProperty(u)&&(i[u]=t[u]===void 0&&o!==void 0?o[u]:t[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){o=Array(u);for(var d=0;d<u;d++)o[d]=arguments[d+2];i.children=o}return{$$typeof:uv,type:e.type,key:n,ref:s,props:i,_owner:a}};Br.createContext=function(e){return e={$$typeof:M7,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:P7,_context:e},e.Consumer=e};Br.createElement=ML;Br.createFactory=function(e){var t=ML.bind(null,e);return t.type=e,t};Br.createRef=function(){return{current:null}};Br.forwardRef=function(e){return{$$typeof:F7,render:e}};Br.isValidElement=tR;Br.lazy=function(e){return{$$typeof:D7,_payload:{_status:-1,_result:e},_init:N7}};Br.memo=function(e,t){return{$$typeof:I7,type:e,compare:t===void 0?null:t}};Br.startTransition=function(e){var t=Gw.transition;Gw.transition={};try{e()}finally{Gw.transition=t}};Br.unstable_act=FL;Br.useCallback=function(e,t){return to.current.useCallback(e,t)};Br.useContext=function(e){return to.current.useContext(e)};Br.useDebugValue=function(){};Br.useDeferredValue=function(e){return to.current.useDeferredValue(e)};Br.useEffect=function(e,t){return to.current.useEffect(e,t)};Br.useId=function(){return to.current.useId()};Br.useImperativeHandle=function(e,t,r){return to.current.useImperativeHandle(e,t,r)};Br.useInsertionEffect=function(e,t){return to.current.useInsertionEffect(e,t)};Br.useLayoutEffect=function(e,t){return to.current.useLayoutEffect(e,t)};Br.useMemo=function(e,t){return to.current.useMemo(e,t)};Br.useReducer=function(e,t,r){return to.current.useReducer(e,t,r)};Br.useRef=function(e){return to.current.useRef(e)};Br.useState=function(e){return to.current.useState(e)};Br.useSyncExternalStore=function(e,t,r){return to.current.useSyncExternalStore(e,t,r)};Br.useTransition=function(){return to.current.useTransition()};Br.version="18.3.1";_L.exports=Br;var D=_L.exports;const Rt=Y2(D),rR=xL({__proto__:null,default:Rt},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z7=D,G7=Symbol.for("react.element"),V7=Symbol.for("react.fragment"),H7=Object.prototype.hasOwnProperty,U7=z7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W7={key:!0,ref:!0,__self:!0,__source:!0};function AL(e,t,r){var i,n={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)H7.call(t,i)&&!W7.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:G7,type:e,key:s,ref:a,props:n,_owner:U7.current}}JC.Fragment=V7;JC.jsx=AL;JC.jsxs=AL;CL.exports=JC;var V=CL.exports,QS={},IL={exports:{}},jo={},DL={exports:{}},kL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ge,Ye){var ht=Ge.length;Ge.push(Ye);e:for(;0<ht;){var Be=ht-1>>>1,ce=Ge[Be];if(0<n(ce,Ye))Ge[Be]=Ye,Ge[ht]=ce,ht=Be;else break e}}function r(Ge){return Ge.length===0?null:Ge[0]}function i(Ge){if(Ge.length===0)return null;var Ye=Ge[0],ht=Ge.pop();if(ht!==Ye){Ge[0]=ht;e:for(var Be=0,ce=Ge.length,he=ce>>>1;Be<he;){var ve=2*(Be+1)-1,_e=Ge[ve],Fe=ve+1,qe=Ge[Fe];if(0>n(_e,ht))Fe<ce&&0>n(qe,_e)?(Ge[Be]=qe,Ge[Fe]=ht,Be=Fe):(Ge[Be]=_e,Ge[ve]=ht,Be=ve);else if(Fe<ce&&0>n(qe,ht))Ge[Be]=qe,Ge[Fe]=ht,Be=Fe;else break e}}return Ye}function n(Ge,Ye){var ht=Ge.sortIndex-Ye.sortIndex;return ht!==0?ht:Ge.id-Ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var u=[],d=[],p=1,v=null,y=3,_=!1,P=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Ge){for(var Ye=r(d);Ye!==null;){if(Ye.callback===null)i(d);else if(Ye.startTime<=Ge)i(d),Ye.sortIndex=Ye.expirationTime,t(u,Ye);else break;Ye=r(d)}}function G(Ge){if(R=!1,N(Ge),!P)if(r(u)!==null)P=!0,ct(j);else{var Ye=r(d);Ye!==null&&pt(G,Ye.startTime-Ge)}}function j(Ge,Ye){P=!1,R&&(R=!1,F(oe),oe=-1),_=!0;var ht=y;try{for(N(Ye),v=r(u);v!==null&&(!(v.expirationTime>Ye)||Ge&&!ie());){var Be=v.callback;if(typeof Be=="function"){v.callback=null,y=v.priorityLevel;var ce=Be(v.expirationTime<=Ye);Ye=e.unstable_now(),typeof ce=="function"?v.callback=ce:v===r(u)&&i(u),N(Ye)}else i(u);v=r(u)}if(v!==null)var he=!0;else{var ve=r(d);ve!==null&&pt(G,ve.startTime-Ye),he=!1}return he}finally{v=null,y=ht,_=!1}}var ee=!1,q=null,oe=-1,ue=5,me=-1;function ie(){return!(e.unstable_now()-me<ue)}function fe(){if(q!==null){var Ge=e.unstable_now();me=Ge;var Ye=!0;try{Ye=q(!0,Ge)}finally{Ye?ke():(ee=!1,q=null)}}else ee=!1}var ke;if(typeof k=="function")ke=function(){k(fe)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,Xe=et.port2;et.port1.onmessage=fe,ke=function(){Xe.postMessage(null)}}else ke=function(){M(fe,0)};function ct(Ge){q=Ge,ee||(ee=!0,ke())}function pt(Ge,Ye){oe=M(function(){Ge(e.unstable_now())},Ye)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ge){Ge.callback=null},e.unstable_continueExecution=function(){P||_||(P=!0,ct(j))},e.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<Ge?Math.floor(1e3/Ge):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(Ge){switch(y){case 1:case 2:case 3:var Ye=3;break;default:Ye=y}var ht=y;y=Ye;try{return Ge()}finally{y=ht}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ge,Ye){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var ht=y;y=Ge;try{return Ye()}finally{y=ht}},e.unstable_scheduleCallback=function(Ge,Ye,ht){var Be=e.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?Be+ht:Be):ht=Be,Ge){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ht+ce,Ge={id:p++,callback:Ye,priorityLevel:Ge,startTime:ht,expirationTime:ce,sortIndex:-1},ht>Be?(Ge.sortIndex=ht,t(d,Ge),r(u)===null&&Ge===r(d)&&(R?(F(oe),oe=-1):R=!0,pt(G,ht-Be))):(Ge.sortIndex=ce,t(u,Ge),P||_||(P=!0,ct(j))),Ge},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(Ge){var Ye=y;return function(){var ht=y;y=Ye;try{return Ge.apply(this,arguments)}finally{y=ht}}}})(kL);DL.exports=kL;var j7=DL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $7=D,Uo=j7;function Dt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LL=new Set,g0={};function fd(e,t){Sp(e,t),Sp(e+"Capture",t)}function Sp(e,t){for(g0[e]=t,e=0;e<t.length;e++)LL.add(t[e])}var vc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),JS=Object.prototype.hasOwnProperty,q7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zF={},GF={};function K7(e){return JS.call(GF,e)?!0:JS.call(zF,e)?!1:q7.test(e)?GF[e]=!0:(zF[e]=!0,!1)}function Z7(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function X7(e,t,r,i){if(t===null||typeof t>"u"||Z7(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ro(e,t,r,i,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var us={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){us[e]=new ro(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];us[t]=new ro(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){us[e]=new ro(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){us[e]=new ro(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){us[e]=new ro(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){us[e]=new ro(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){us[e]=new ro(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){us[e]=new ro(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){us[e]=new ro(e,5,!1,e.toLowerCase(),null,!1,!1)});var iR=/[\-:]([a-z])/g;function nR(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(iR,nR);us[t]=new ro(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(iR,nR);us[t]=new ro(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(iR,nR);us[t]=new ro(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){us[e]=new ro(e,1,!1,e.toLowerCase(),null,!1,!1)});us.xlinkHref=new ro("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){us[e]=new ro(e,1,!1,e.toLowerCase(),null,!0,!0)});function sR(e,t,r,i){var n=us.hasOwnProperty(t)?us[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(X7(t,r,n,i)&&(r=null),i||n===null?K7(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Rc=$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ky=Symbol.for("react.element"),Mf=Symbol.for("react.portal"),Ff=Symbol.for("react.fragment"),oR=Symbol.for("react.strict_mode"),eE=Symbol.for("react.profiler"),OL=Symbol.for("react.provider"),NL=Symbol.for("react.context"),aR=Symbol.for("react.forward_ref"),tE=Symbol.for("react.suspense"),rE=Symbol.for("react.suspense_list"),lR=Symbol.for("react.memo"),su=Symbol.for("react.lazy"),BL=Symbol.for("react.offscreen"),VF=Symbol.iterator;function hm(e){return e===null||typeof e!="object"?null:(e=VF&&e[VF]||e["@@iterator"],typeof e=="function"?e:null)}var Zi=Object.assign,hb;function Pm(e){if(hb===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);hb=t&&t[1]||""}return`
`+hb+e}var db=!1;function fb(e,t){if(!e||db)return"";db=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),s=i.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o]){var u=`
`+n[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=o);break}}}finally{db=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Pm(e):""}function Y7(e){switch(e.tag){case 5:return Pm(e.type);case 16:return Pm("Lazy");case 13:return Pm("Suspense");case 19:return Pm("SuspenseList");case 0:case 2:case 15:return e=fb(e.type,!1),e;case 11:return e=fb(e.type.render,!1),e;case 1:return e=fb(e.type,!0),e;default:return""}}function iE(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ff:return"Fragment";case Mf:return"Portal";case eE:return"Profiler";case oR:return"StrictMode";case tE:return"Suspense";case rE:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case NL:return(e.displayName||"Context")+".Consumer";case OL:return(e._context.displayName||"Context")+".Provider";case aR:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lR:return t=e.displayName||null,t!==null?t:iE(e.type)||"Memo";case su:t=e._payload,e=e._init;try{return iE(e(t))}catch{}}return null}function Q7(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return iE(t);case 8:return t===oR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function J7(e){var t=zL(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zy(e){e._valueTracker||(e._valueTracker=J7(e))}function GL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=zL(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Px(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nE(e,t){var r=t.checked;return Zi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function HF(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Pu(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function VL(e,t){t=t.checked,t!=null&&sR(e,"checked",t,!1)}function sE(e,t){VL(e,t);var r=Pu(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?oE(e,t.type,r):t.hasOwnProperty("defaultValue")&&oE(e,t.type,Pu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function UF(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function oE(e,t,r){(t!=="number"||Px(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Mm=Array.isArray;function Xf(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Pu(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function aE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Dt(91));return Zi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function WF(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Dt(92));if(Mm(r)){if(1<r.length)throw Error(Dt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Pu(r)}}function HL(e,t){var r=Pu(t.value),i=Pu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function jF(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function UL(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?UL(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xy,WL=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xy=Xy||document.createElement("div"),Xy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function m0(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Vm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e9=["Webkit","ms","Moz","O"];Object.keys(Vm).forEach(function(e){e9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vm[t]=Vm[e]})});function jL(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Vm.hasOwnProperty(e)&&Vm[e]?(""+t).trim():t+"px"}function $L(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=jL(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var t9=Zi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cE(e,t){if(t){if(t9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Dt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Dt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Dt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Dt(62))}}function uE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hE=null;function cR(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dE=null,Yf=null,Qf=null;function $F(e){if(e=fv(e)){if(typeof dE!="function")throw Error(Dt(280));var t=e.stateNode;t&&(t=n1(t),dE(e.stateNode,e.type,t))}}function qL(e){Yf?Qf?Qf.push(e):Qf=[e]:Yf=e}function KL(){if(Yf){var e=Yf,t=Qf;if(Qf=Yf=null,$F(e),t)for(e=0;e<t.length;e++)$F(t[e])}}function ZL(e,t){return e(t)}function XL(){}var pb=!1;function YL(e,t,r){if(pb)return e(t,r);pb=!0;try{return ZL(e,t,r)}finally{pb=!1,(Yf!==null||Qf!==null)&&(XL(),KL())}}function v0(e,t){var r=e.stateNode;if(r===null)return null;var i=n1(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Dt(231,t,typeof r));return r}var fE=!1;if(vc)try{var dm={};Object.defineProperty(dm,"passive",{get:function(){fE=!0}}),window.addEventListener("test",dm,dm),window.removeEventListener("test",dm,dm)}catch{fE=!1}function r9(e,t,r,i,n,s,a,o,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(p){this.onError(p)}}var Hm=!1,Mx=null,Fx=!1,pE=null,i9={onError:function(e){Hm=!0,Mx=e}};function n9(e,t,r,i,n,s,a,o,u){Hm=!1,Mx=null,r9.apply(i9,arguments)}function s9(e,t,r,i,n,s,a,o,u){if(n9.apply(this,arguments),Hm){if(Hm){var d=Mx;Hm=!1,Mx=null}else throw Error(Dt(198));Fx||(Fx=!0,pE=d)}}function pd(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function QL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qF(e){if(pd(e)!==e)throw Error(Dt(188))}function o9(e){var t=e.alternate;if(!t){if(t=pd(e),t===null)throw Error(Dt(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return qF(n),e;if(s===i)return qF(n),t;s=s.sibling}throw Error(Dt(188))}if(r.return!==i.return)r=n,i=s;else{for(var a=!1,o=n.child;o;){if(o===r){a=!0,r=n,i=s;break}if(o===i){a=!0,i=n,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,i=n;break}if(o===i){a=!0,i=s,r=n;break}o=o.sibling}if(!a)throw Error(Dt(189))}}if(r.alternate!==i)throw Error(Dt(190))}if(r.tag!==3)throw Error(Dt(188));return r.stateNode.current===r?e:t}function JL(e){return e=o9(e),e!==null?e4(e):null}function e4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=e4(e);if(t!==null)return t;e=e.sibling}return null}var t4=Uo.unstable_scheduleCallback,KF=Uo.unstable_cancelCallback,a9=Uo.unstable_shouldYield,l9=Uo.unstable_requestPaint,wn=Uo.unstable_now,c9=Uo.unstable_getCurrentPriorityLevel,uR=Uo.unstable_ImmediatePriority,r4=Uo.unstable_UserBlockingPriority,Ax=Uo.unstable_NormalPriority,u9=Uo.unstable_LowPriority,i4=Uo.unstable_IdlePriority,e1=null,El=null;function h9(e){if(El&&typeof El.onCommitFiberRoot=="function")try{El.onCommitFiberRoot(e1,e,void 0,(e.current.flags&128)===128)}catch{}}var Va=Math.clz32?Math.clz32:p9,d9=Math.log,f9=Math.LN2;function p9(e){return e>>>=0,e===0?32:31-(d9(e)/f9|0)|0}var Yy=64,Qy=4194304;function Fm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ix(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var o=a&~n;o!==0?i=Fm(o):(s&=a,s!==0&&(i=Fm(s)))}else a=r&~n,a!==0?i=Fm(a):s!==0&&(i=Fm(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Va(t),n=1<<r,i|=e[r],t&=~n;return i}function g9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m9(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Va(s),o=1<<a,u=n[a];u===-1?(!(o&r)||o&i)&&(n[a]=g9(o,t)):u<=t&&(e.expiredLanes|=o),s&=~o}}function gE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function n4(){var e=Yy;return Yy<<=1,!(Yy&4194240)&&(Yy=64),e}function gb(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Va(t),e[t]=r}function v9(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Va(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function hR(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Va(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var li=0;function s4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var o4,dR,a4,l4,c4,mE=!1,Jy=[],vu=null,yu=null,wu=null,y0=new Map,w0=new Map,lu=[],y9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZF(e,t){switch(e){case"focusin":case"focusout":vu=null;break;case"dragenter":case"dragleave":yu=null;break;case"mouseover":case"mouseout":wu=null;break;case"pointerover":case"pointerout":y0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":w0.delete(t.pointerId)}}function fm(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=fv(t),t!==null&&dR(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function w9(e,t,r,i,n){switch(t){case"focusin":return vu=fm(vu,e,t,r,i,n),!0;case"dragenter":return yu=fm(yu,e,t,r,i,n),!0;case"mouseover":return wu=fm(wu,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return y0.set(s,fm(y0.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,w0.set(s,fm(w0.get(s)||null,e,t,r,i,n)),!0}return!1}function u4(e){var t=Ph(e.target);if(t!==null){var r=pd(t);if(r!==null){if(t=r.tag,t===13){if(t=QL(r),t!==null){e.blockedOn=t,c4(e.priority,function(){a4(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);hE=i,r.target.dispatchEvent(i),hE=null}else return t=fv(r),t!==null&&dR(t),e.blockedOn=r,!1;t.shift()}return!0}function XF(e,t,r){Vw(e)&&r.delete(t)}function x9(){mE=!1,vu!==null&&Vw(vu)&&(vu=null),yu!==null&&Vw(yu)&&(yu=null),wu!==null&&Vw(wu)&&(wu=null),y0.forEach(XF),w0.forEach(XF)}function pm(e,t){e.blockedOn===t&&(e.blockedOn=null,mE||(mE=!0,Uo.unstable_scheduleCallback(Uo.unstable_NormalPriority,x9)))}function x0(e){function t(n){return pm(n,e)}if(0<Jy.length){pm(Jy[0],e);for(var r=1;r<Jy.length;r++){var i=Jy[r];i.blockedOn===e&&(i.blockedOn=null)}}for(vu!==null&&pm(vu,e),yu!==null&&pm(yu,e),wu!==null&&pm(wu,e),y0.forEach(t),w0.forEach(t),r=0;r<lu.length;r++)i=lu[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<lu.length&&(r=lu[0],r.blockedOn===null);)u4(r),r.blockedOn===null&&lu.shift()}var Jf=Rc.ReactCurrentBatchConfig,Dx=!0;function C9(e,t,r,i){var n=li,s=Jf.transition;Jf.transition=null;try{li=1,fR(e,t,r,i)}finally{li=n,Jf.transition=s}}function _9(e,t,r,i){var n=li,s=Jf.transition;Jf.transition=null;try{li=4,fR(e,t,r,i)}finally{li=n,Jf.transition=s}}function fR(e,t,r,i){if(Dx){var n=vE(e,t,r,i);if(n===null)Eb(e,t,i,kx,r),ZF(e,i);else if(w9(n,e,t,r,i))i.stopPropagation();else if(ZF(e,i),t&4&&-1<y9.indexOf(e)){for(;n!==null;){var s=fv(n);if(s!==null&&o4(s),s=vE(e,t,r,i),s===null&&Eb(e,t,i,kx,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else Eb(e,t,i,null,r)}}var kx=null;function vE(e,t,r,i){if(kx=null,e=cR(i),e=Ph(e),e!==null)if(t=pd(e),t===null)e=null;else if(r=t.tag,r===13){if(e=QL(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return kx=e,null}function h4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c9()){case uR:return 1;case r4:return 4;case Ax:case u9:return 16;case i4:return 536870912;default:return 16}default:return 16}}var du=null,pR=null,Hw=null;function d4(){if(Hw)return Hw;var e,t=pR,r=t.length,i,n="value"in du?du.value:du.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var a=r-e;for(i=1;i<=a&&t[r-i]===n[s-i];i++);return Hw=n.slice(e,1<i?1-i:void 0)}function Uw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ew(){return!0}function YF(){return!1}function $o(e){function t(r,i,n,s,a){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ew:YF,this.isPropagationStopped=YF,this}return Zi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ew)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ew)},persist:function(){},isPersistent:ew}),t}var Wp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gR=$o(Wp),dv=Zi({},Wp,{view:0,detail:0}),b9=$o(dv),mb,vb,gm,t1=Zi({},dv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mR,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gm&&(gm&&e.type==="mousemove"?(mb=e.screenX-gm.screenX,vb=e.screenY-gm.screenY):vb=mb=0,gm=e),mb)},movementY:function(e){return"movementY"in e?e.movementY:vb}}),QF=$o(t1),S9=Zi({},t1,{dataTransfer:0}),E9=$o(S9),R9=Zi({},dv,{relatedTarget:0}),yb=$o(R9),T9=Zi({},Wp,{animationName:0,elapsedTime:0,pseudoElement:0}),P9=$o(T9),M9=Zi({},Wp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),F9=$o(M9),A9=Zi({},Wp,{data:0}),JF=$o(A9),I9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=k9[e])?!!t[e]:!1}function mR(){return L9}var O9=Zi({},dv,{key:function(e){if(e.key){var t=I9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?D9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mR,charCode:function(e){return e.type==="keypress"?Uw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),N9=$o(O9),B9=Zi({},t1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eA=$o(B9),z9=Zi({},dv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mR}),G9=$o(z9),V9=Zi({},Wp,{propertyName:0,elapsedTime:0,pseudoElement:0}),H9=$o(V9),U9=Zi({},t1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),W9=$o(U9),j9=[9,13,27,32],vR=vc&&"CompositionEvent"in window,Um=null;vc&&"documentMode"in document&&(Um=document.documentMode);var $9=vc&&"TextEvent"in window&&!Um,f4=vc&&(!vR||Um&&8<Um&&11>=Um),tA=" ",rA=!1;function p4(e,t){switch(e){case"keyup":return j9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function g4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Af=!1;function q9(e,t){switch(e){case"compositionend":return g4(t);case"keypress":return t.which!==32?null:(rA=!0,tA);case"textInput":return e=t.data,e===tA&&rA?null:e;default:return null}}function K9(e,t){if(Af)return e==="compositionend"||!vR&&p4(e,t)?(e=d4(),Hw=pR=du=null,Af=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return f4&&t.locale!=="ko"?null:t.data;default:return null}}var Z9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Z9[e.type]:t==="textarea"}function m4(e,t,r,i){qL(i),t=Lx(t,"onChange"),0<t.length&&(r=new gR("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Wm=null,C0=null;function X9(e){T4(e,0)}function r1(e){var t=kf(e);if(GL(t))return e}function Y9(e,t){if(e==="change")return t}var v4=!1;if(vc){var wb;if(vc){var xb="oninput"in document;if(!xb){var nA=document.createElement("div");nA.setAttribute("oninput","return;"),xb=typeof nA.oninput=="function"}wb=xb}else wb=!1;v4=wb&&(!document.documentMode||9<document.documentMode)}function sA(){Wm&&(Wm.detachEvent("onpropertychange",y4),C0=Wm=null)}function y4(e){if(e.propertyName==="value"&&r1(C0)){var t=[];m4(t,C0,e,cR(e)),YL(X9,t)}}function Q9(e,t,r){e==="focusin"?(sA(),Wm=t,C0=r,Wm.attachEvent("onpropertychange",y4)):e==="focusout"&&sA()}function J9(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return r1(C0)}function eU(e,t){if(e==="click")return r1(t)}function tU(e,t){if(e==="input"||e==="change")return r1(t)}function rU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ka=typeof Object.is=="function"?Object.is:rU;function _0(e,t){if(Ka(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!JS.call(t,n)||!Ka(e[n],t[n]))return!1}return!0}function oA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function aA(e,t){var r=oA(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=oA(r)}}function w4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?w4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function x4(){for(var e=window,t=Px();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Px(e.document)}return t}function yR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function iU(e){var t=x4(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&w4(r.ownerDocument.documentElement,r)){if(i!==null&&yR(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=aA(r,s);var a=aA(r,i);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nU=vc&&"documentMode"in document&&11>=document.documentMode,If=null,yE=null,jm=null,wE=!1;function lA(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wE||If==null||If!==Px(i)||(i=If,"selectionStart"in i&&yR(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),jm&&_0(jm,i)||(jm=i,i=Lx(yE,"onSelect"),0<i.length&&(t=new gR("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=If)))}function tw(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Df={animationend:tw("Animation","AnimationEnd"),animationiteration:tw("Animation","AnimationIteration"),animationstart:tw("Animation","AnimationStart"),transitionend:tw("Transition","TransitionEnd")},Cb={},C4={};vc&&(C4=document.createElement("div").style,"AnimationEvent"in window||(delete Df.animationend.animation,delete Df.animationiteration.animation,delete Df.animationstart.animation),"TransitionEvent"in window||delete Df.transitionend.transition);function i1(e){if(Cb[e])return Cb[e];if(!Df[e])return e;var t=Df[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in C4)return Cb[e]=t[r];return e}var _4=i1("animationend"),b4=i1("animationiteration"),S4=i1("animationstart"),E4=i1("transitionend"),R4=new Map,cA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hu(e,t){R4.set(e,t),fd(t,[e])}for(var _b=0;_b<cA.length;_b++){var bb=cA[_b],sU=bb.toLowerCase(),oU=bb[0].toUpperCase()+bb.slice(1);Hu(sU,"on"+oU)}Hu(_4,"onAnimationEnd");Hu(b4,"onAnimationIteration");Hu(S4,"onAnimationStart");Hu("dblclick","onDoubleClick");Hu("focusin","onFocus");Hu("focusout","onBlur");Hu(E4,"onTransitionEnd");Sp("onMouseEnter",["mouseout","mouseover"]);Sp("onMouseLeave",["mouseout","mouseover"]);Sp("onPointerEnter",["pointerout","pointerover"]);Sp("onPointerLeave",["pointerout","pointerover"]);fd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fd("onBeforeInput",["compositionend","keypress","textInput","paste"]);fd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Am="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Am));function uA(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,s9(i,t,void 0,e),e.currentTarget=null}function T4(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],u=o.instance,d=o.currentTarget;if(o=o.listener,u!==s&&n.isPropagationStopped())break e;uA(n,o,d),s=u}else for(a=0;a<i.length;a++){if(o=i[a],u=o.instance,d=o.currentTarget,o=o.listener,u!==s&&n.isPropagationStopped())break e;uA(n,o,d),s=u}}}if(Fx)throw e=pE,Fx=!1,pE=null,e}function Ai(e,t){var r=t[SE];r===void 0&&(r=t[SE]=new Set);var i=e+"__bubble";r.has(i)||(P4(t,e,2,!1),r.add(i))}function Sb(e,t,r){var i=0;t&&(i|=4),P4(r,e,i,t)}var rw="_reactListening"+Math.random().toString(36).slice(2);function b0(e){if(!e[rw]){e[rw]=!0,LL.forEach(function(r){r!=="selectionchange"&&(aU.has(r)||Sb(r,!1,e),Sb(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rw]||(t[rw]=!0,Sb("selectionchange",!1,t))}}function P4(e,t,r,i){switch(h4(t)){case 1:var n=C9;break;case 4:n=_9;break;default:n=fR}r=n.bind(null,t,r,e),n=void 0,!fE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Eb(e,t,r,i,n){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===n||u.nodeType===8&&u.parentNode===n))return;a=a.return}for(;o!==null;){if(a=Ph(o),a===null)return;if(u=a.tag,u===5||u===6){i=s=a;continue e}o=o.parentNode}}i=i.return}YL(function(){var d=s,p=cR(r),v=[];e:{var y=R4.get(e);if(y!==void 0){var _=gR,P=e;switch(e){case"keypress":if(Uw(r)===0)break e;case"keydown":case"keyup":_=N9;break;case"focusin":P="focus",_=yb;break;case"focusout":P="blur",_=yb;break;case"beforeblur":case"afterblur":_=yb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=QF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=E9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=G9;break;case _4:case b4:case S4:_=P9;break;case E4:_=H9;break;case"scroll":_=b9;break;case"wheel":_=W9;break;case"copy":case"cut":case"paste":_=F9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=eA}var R=(t&4)!==0,M=!R&&e==="scroll",F=R?y!==null?y+"Capture":null:y;R=[];for(var k=d,N;k!==null;){N=k;var G=N.stateNode;if(N.tag===5&&G!==null&&(N=G,F!==null&&(G=v0(k,F),G!=null&&R.push(S0(k,G,N)))),M)break;k=k.return}0<R.length&&(y=new _(y,P,null,r,p),v.push({event:y,listeners:R}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",y&&r!==hE&&(P=r.relatedTarget||r.fromElement)&&(Ph(P)||P[yc]))break e;if((_||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,_?(P=r.relatedTarget||r.toElement,_=d,P=P?Ph(P):null,P!==null&&(M=pd(P),P!==M||P.tag!==5&&P.tag!==6)&&(P=null)):(_=null,P=d),_!==P)){if(R=QF,G="onMouseLeave",F="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(R=eA,G="onPointerLeave",F="onPointerEnter",k="pointer"),M=_==null?y:kf(_),N=P==null?y:kf(P),y=new R(G,k+"leave",_,r,p),y.target=M,y.relatedTarget=N,G=null,Ph(p)===d&&(R=new R(F,k+"enter",P,r,p),R.target=N,R.relatedTarget=M,G=R),M=G,_&&P)t:{for(R=_,F=P,k=0,N=R;N;N=ff(N))k++;for(N=0,G=F;G;G=ff(G))N++;for(;0<k-N;)R=ff(R),k--;for(;0<N-k;)F=ff(F),N--;for(;k--;){if(R===F||F!==null&&R===F.alternate)break t;R=ff(R),F=ff(F)}R=null}else R=null;_!==null&&hA(v,y,_,R,!1),P!==null&&M!==null&&hA(v,M,P,R,!0)}}e:{if(y=d?kf(d):window,_=y.nodeName&&y.nodeName.toLowerCase(),_==="select"||_==="input"&&y.type==="file")var j=Y9;else if(iA(y))if(v4)j=tU;else{j=J9;var ee=Q9}else(_=y.nodeName)&&_.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(j=eU);if(j&&(j=j(e,d))){m4(v,j,r,p);break e}ee&&ee(e,y,d),e==="focusout"&&(ee=y._wrapperState)&&ee.controlled&&y.type==="number"&&oE(y,"number",y.value)}switch(ee=d?kf(d):window,e){case"focusin":(iA(ee)||ee.contentEditable==="true")&&(If=ee,yE=d,jm=null);break;case"focusout":jm=yE=If=null;break;case"mousedown":wE=!0;break;case"contextmenu":case"mouseup":case"dragend":wE=!1,lA(v,r,p);break;case"selectionchange":if(nU)break;case"keydown":case"keyup":lA(v,r,p)}var q;if(vR)e:{switch(e){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else Af?p4(e,r)&&(oe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(oe="onCompositionStart");oe&&(f4&&r.locale!=="ko"&&(Af||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&Af&&(q=d4()):(du=p,pR="value"in du?du.value:du.textContent,Af=!0)),ee=Lx(d,oe),0<ee.length&&(oe=new JF(oe,e,null,r,p),v.push({event:oe,listeners:ee}),q?oe.data=q:(q=g4(r),q!==null&&(oe.data=q)))),(q=$9?q9(e,r):K9(e,r))&&(d=Lx(d,"onBeforeInput"),0<d.length&&(p=new JF("onBeforeInput","beforeinput",null,r,p),v.push({event:p,listeners:d}),p.data=q))}T4(v,t)})}function S0(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Lx(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=v0(e,r),s!=null&&i.unshift(S0(e,s,n)),s=v0(e,t),s!=null&&i.push(S0(e,s,n))),e=e.return}return i}function ff(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hA(e,t,r,i,n){for(var s=t._reactName,a=[];r!==null&&r!==i;){var o=r,u=o.alternate,d=o.stateNode;if(u!==null&&u===i)break;o.tag===5&&d!==null&&(o=d,n?(u=v0(r,s),u!=null&&a.unshift(S0(r,u,o))):n||(u=v0(r,s),u!=null&&a.push(S0(r,u,o)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var lU=/\r\n?/g,cU=/\u0000|\uFFFD/g;function dA(e){return(typeof e=="string"?e:""+e).replace(lU,`
`).replace(cU,"")}function iw(e,t,r){if(t=dA(t),dA(e)!==t&&r)throw Error(Dt(425))}function Ox(){}var xE=null,CE=null;function _E(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bE=typeof setTimeout=="function"?setTimeout:void 0,uU=typeof clearTimeout=="function"?clearTimeout:void 0,fA=typeof Promise=="function"?Promise:void 0,hU=typeof queueMicrotask=="function"?queueMicrotask:typeof fA<"u"?function(e){return fA.resolve(null).then(e).catch(dU)}:bE;function dU(e){setTimeout(function(){throw e})}function Rb(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),x0(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);x0(t)}function xu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function pA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var jp=Math.random().toString(36).slice(2),yl="__reactFiber$"+jp,E0="__reactProps$"+jp,yc="__reactContainer$"+jp,SE="__reactEvents$"+jp,fU="__reactListeners$"+jp,pU="__reactHandles$"+jp;function Ph(e){var t=e[yl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[yc]||r[yl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=pA(e);e!==null;){if(r=e[yl])return r;e=pA(e)}return t}e=r,r=e.parentNode}return null}function fv(e){return e=e[yl]||e[yc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Dt(33))}function n1(e){return e[E0]||null}var EE=[],Lf=-1;function Uu(e){return{current:e}}function Ii(e){0>Lf||(e.current=EE[Lf],EE[Lf]=null,Lf--)}function Ri(e,t){Lf++,EE[Lf]=e.current,e.current=t}var Mu={},Is=Uu(Mu),vo=Uu(!1),jh=Mu;function Ep(e,t){var r=e.type.contextTypes;if(!r)return Mu;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function yo(e){return e=e.childContextTypes,e!=null}function Nx(){Ii(vo),Ii(Is)}function gA(e,t,r){if(Is.current!==Mu)throw Error(Dt(168));Ri(Is,t),Ri(vo,r)}function M4(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(Dt(108,Q7(e)||"Unknown",n));return Zi({},r,i)}function Bx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mu,jh=Is.current,Ri(Is,e),Ri(vo,vo.current),!0}function mA(e,t,r){var i=e.stateNode;if(!i)throw Error(Dt(169));r?(e=M4(e,t,jh),i.__reactInternalMemoizedMergedChildContext=e,Ii(vo),Ii(Is),Ri(Is,e)):Ii(vo),Ri(vo,r)}var rc=null,s1=!1,Tb=!1;function F4(e){rc===null?rc=[e]:rc.push(e)}function gU(e){s1=!0,F4(e)}function Wu(){if(!Tb&&rc!==null){Tb=!0;var e=0,t=li;try{var r=rc;for(li=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}rc=null,s1=!1}catch(n){throw rc!==null&&(rc=rc.slice(e+1)),t4(uR,Wu),n}finally{li=t,Tb=!1}}return null}var Of=[],Nf=0,zx=null,Gx=0,ua=[],ha=0,$h=null,ac=1,lc="";function xh(e,t){Of[Nf++]=Gx,Of[Nf++]=zx,zx=e,Gx=t}function A4(e,t,r){ua[ha++]=ac,ua[ha++]=lc,ua[ha++]=$h,$h=e;var i=ac;e=lc;var n=32-Va(i)-1;i&=~(1<<n),r+=1;var s=32-Va(t)+n;if(30<s){var a=n-n%5;s=(i&(1<<a)-1).toString(32),i>>=a,n-=a,ac=1<<32-Va(t)+n|r<<n|i,lc=s+e}else ac=1<<s|r<<n|i,lc=e}function wR(e){e.return!==null&&(xh(e,1),A4(e,1,0))}function xR(e){for(;e===zx;)zx=Of[--Nf],Of[Nf]=null,Gx=Of[--Nf],Of[Nf]=null;for(;e===$h;)$h=ua[--ha],ua[ha]=null,lc=ua[--ha],ua[ha]=null,ac=ua[--ha],ua[ha]=null}var Go=null,No=null,zi=!1,Ba=null;function I4(e,t){var r=fa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function vA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Go=e,No=xu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Go=e,No=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$h!==null?{id:ac,overflow:lc}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=fa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Go=e,No=null,!0):!1;default:return!1}}function RE(e){return(e.mode&1)!==0&&(e.flags&128)===0}function TE(e){if(zi){var t=No;if(t){var r=t;if(!vA(e,t)){if(RE(e))throw Error(Dt(418));t=xu(r.nextSibling);var i=Go;t&&vA(e,t)?I4(i,r):(e.flags=e.flags&-4097|2,zi=!1,Go=e)}}else{if(RE(e))throw Error(Dt(418));e.flags=e.flags&-4097|2,zi=!1,Go=e}}}function yA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Go=e}function nw(e){if(e!==Go)return!1;if(!zi)return yA(e),zi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_E(e.type,e.memoizedProps)),t&&(t=No)){if(RE(e))throw D4(),Error(Dt(418));for(;t;)I4(e,t),t=xu(t.nextSibling)}if(yA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Dt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){No=xu(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}No=null}}else No=Go?xu(e.stateNode.nextSibling):null;return!0}function D4(){for(var e=No;e;)e=xu(e.nextSibling)}function Rp(){No=Go=null,zi=!1}function CR(e){Ba===null?Ba=[e]:Ba.push(e)}var mU=Rc.ReactCurrentBatchConfig;function mm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Dt(309));var i=r.stateNode}if(!i)throw Error(Dt(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=n.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Dt(284));if(!r._owner)throw Error(Dt(290,e))}return e}function sw(e,t){throw e=Object.prototype.toString.call(t),Error(Dt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wA(e){var t=e._init;return t(e._payload)}function k4(e){function t(F,k){if(e){var N=F.deletions;N===null?(F.deletions=[k],F.flags|=16):N.push(k)}}function r(F,k){if(!e)return null;for(;k!==null;)t(F,k),k=k.sibling;return null}function i(F,k){for(F=new Map;k!==null;)k.key!==null?F.set(k.key,k):F.set(k.index,k),k=k.sibling;return F}function n(F,k){return F=Su(F,k),F.index=0,F.sibling=null,F}function s(F,k,N){return F.index=N,e?(N=F.alternate,N!==null?(N=N.index,N<k?(F.flags|=2,k):N):(F.flags|=2,k)):(F.flags|=1048576,k)}function a(F){return e&&F.alternate===null&&(F.flags|=2),F}function o(F,k,N,G){return k===null||k.tag!==6?(k=kb(N,F.mode,G),k.return=F,k):(k=n(k,N),k.return=F,k)}function u(F,k,N,G){var j=N.type;return j===Ff?p(F,k,N.props.children,G,N.key):k!==null&&(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===su&&wA(j)===k.type)?(G=n(k,N.props),G.ref=mm(F,k,N),G.return=F,G):(G=Xw(N.type,N.key,N.props,null,F.mode,G),G.ref=mm(F,k,N),G.return=F,G)}function d(F,k,N,G){return k===null||k.tag!==4||k.stateNode.containerInfo!==N.containerInfo||k.stateNode.implementation!==N.implementation?(k=Lb(N,F.mode,G),k.return=F,k):(k=n(k,N.children||[]),k.return=F,k)}function p(F,k,N,G,j){return k===null||k.tag!==7?(k=kh(N,F.mode,G,j),k.return=F,k):(k=n(k,N),k.return=F,k)}function v(F,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return k=kb(""+k,F.mode,N),k.return=F,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ky:return N=Xw(k.type,k.key,k.props,null,F.mode,N),N.ref=mm(F,null,k),N.return=F,N;case Mf:return k=Lb(k,F.mode,N),k.return=F,k;case su:var G=k._init;return v(F,G(k._payload),N)}if(Mm(k)||hm(k))return k=kh(k,F.mode,N,null),k.return=F,k;sw(F,k)}return null}function y(F,k,N,G){var j=k!==null?k.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return j!==null?null:o(F,k,""+N,G);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ky:return N.key===j?u(F,k,N,G):null;case Mf:return N.key===j?d(F,k,N,G):null;case su:return j=N._init,y(F,k,j(N._payload),G)}if(Mm(N)||hm(N))return j!==null?null:p(F,k,N,G,null);sw(F,N)}return null}function _(F,k,N,G,j){if(typeof G=="string"&&G!==""||typeof G=="number")return F=F.get(N)||null,o(k,F,""+G,j);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Ky:return F=F.get(G.key===null?N:G.key)||null,u(k,F,G,j);case Mf:return F=F.get(G.key===null?N:G.key)||null,d(k,F,G,j);case su:var ee=G._init;return _(F,k,N,ee(G._payload),j)}if(Mm(G)||hm(G))return F=F.get(N)||null,p(k,F,G,j,null);sw(k,G)}return null}function P(F,k,N,G){for(var j=null,ee=null,q=k,oe=k=0,ue=null;q!==null&&oe<N.length;oe++){q.index>oe?(ue=q,q=null):ue=q.sibling;var me=y(F,q,N[oe],G);if(me===null){q===null&&(q=ue);break}e&&q&&me.alternate===null&&t(F,q),k=s(me,k,oe),ee===null?j=me:ee.sibling=me,ee=me,q=ue}if(oe===N.length)return r(F,q),zi&&xh(F,oe),j;if(q===null){for(;oe<N.length;oe++)q=v(F,N[oe],G),q!==null&&(k=s(q,k,oe),ee===null?j=q:ee.sibling=q,ee=q);return zi&&xh(F,oe),j}for(q=i(F,q);oe<N.length;oe++)ue=_(q,F,oe,N[oe],G),ue!==null&&(e&&ue.alternate!==null&&q.delete(ue.key===null?oe:ue.key),k=s(ue,k,oe),ee===null?j=ue:ee.sibling=ue,ee=ue);return e&&q.forEach(function(ie){return t(F,ie)}),zi&&xh(F,oe),j}function R(F,k,N,G){var j=hm(N);if(typeof j!="function")throw Error(Dt(150));if(N=j.call(N),N==null)throw Error(Dt(151));for(var ee=j=null,q=k,oe=k=0,ue=null,me=N.next();q!==null&&!me.done;oe++,me=N.next()){q.index>oe?(ue=q,q=null):ue=q.sibling;var ie=y(F,q,me.value,G);if(ie===null){q===null&&(q=ue);break}e&&q&&ie.alternate===null&&t(F,q),k=s(ie,k,oe),ee===null?j=ie:ee.sibling=ie,ee=ie,q=ue}if(me.done)return r(F,q),zi&&xh(F,oe),j;if(q===null){for(;!me.done;oe++,me=N.next())me=v(F,me.value,G),me!==null&&(k=s(me,k,oe),ee===null?j=me:ee.sibling=me,ee=me);return zi&&xh(F,oe),j}for(q=i(F,q);!me.done;oe++,me=N.next())me=_(q,F,oe,me.value,G),me!==null&&(e&&me.alternate!==null&&q.delete(me.key===null?oe:me.key),k=s(me,k,oe),ee===null?j=me:ee.sibling=me,ee=me);return e&&q.forEach(function(fe){return t(F,fe)}),zi&&xh(F,oe),j}function M(F,k,N,G){if(typeof N=="object"&&N!==null&&N.type===Ff&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ky:e:{for(var j=N.key,ee=k;ee!==null;){if(ee.key===j){if(j=N.type,j===Ff){if(ee.tag===7){r(F,ee.sibling),k=n(ee,N.props.children),k.return=F,F=k;break e}}else if(ee.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===su&&wA(j)===ee.type){r(F,ee.sibling),k=n(ee,N.props),k.ref=mm(F,ee,N),k.return=F,F=k;break e}r(F,ee);break}else t(F,ee);ee=ee.sibling}N.type===Ff?(k=kh(N.props.children,F.mode,G,N.key),k.return=F,F=k):(G=Xw(N.type,N.key,N.props,null,F.mode,G),G.ref=mm(F,k,N),G.return=F,F=G)}return a(F);case Mf:e:{for(ee=N.key;k!==null;){if(k.key===ee)if(k.tag===4&&k.stateNode.containerInfo===N.containerInfo&&k.stateNode.implementation===N.implementation){r(F,k.sibling),k=n(k,N.children||[]),k.return=F,F=k;break e}else{r(F,k);break}else t(F,k);k=k.sibling}k=Lb(N,F.mode,G),k.return=F,F=k}return a(F);case su:return ee=N._init,M(F,k,ee(N._payload),G)}if(Mm(N))return P(F,k,N,G);if(hm(N))return R(F,k,N,G);sw(F,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,k!==null&&k.tag===6?(r(F,k.sibling),k=n(k,N),k.return=F,F=k):(r(F,k),k=kb(N,F.mode,G),k.return=F,F=k),a(F)):r(F,k)}return M}var Tp=k4(!0),L4=k4(!1),Vx=Uu(null),Hx=null,Bf=null,_R=null;function bR(){_R=Bf=Hx=null}function SR(e){var t=Vx.current;Ii(Vx),e._currentValue=t}function PE(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function ep(e,t){Hx=e,_R=Bf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(go=!0),e.firstContext=null)}function ya(e){var t=e._currentValue;if(_R!==e)if(e={context:e,memoizedValue:t,next:null},Bf===null){if(Hx===null)throw Error(Dt(308));Bf=e,Hx.dependencies={lanes:0,firstContext:e}}else Bf=Bf.next=e;return t}var Mh=null;function ER(e){Mh===null?Mh=[e]:Mh.push(e)}function O4(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,ER(t)):(r.next=n.next,n.next=r),t.interleaved=r,wc(e,i)}function wc(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ou=!1;function RR(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function uc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cu(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,jr&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,wc(e,r)}return n=i.interleaved,n===null?(t.next=t,ER(i)):(t.next=n.next,n.next=t),i.interleaved=t,wc(e,r)}function Ww(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,hR(e,r)}}function xA(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ux(e,t,r,i){var n=e.updateQueue;ou=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var u=o,d=u.next;u.next=null,a===null?s=d:a.next=d,a=u;var p=e.alternate;p!==null&&(p=p.updateQueue,o=p.lastBaseUpdate,o!==a&&(o===null?p.firstBaseUpdate=d:o.next=d,p.lastBaseUpdate=u))}if(s!==null){var v=n.baseState;a=0,p=d=u=null,o=s;do{var y=o.lane,_=o.eventTime;if((i&y)===y){p!==null&&(p=p.next={eventTime:_,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var P=e,R=o;switch(y=t,_=r,R.tag){case 1:if(P=R.payload,typeof P=="function"){v=P.call(_,v,y);break e}v=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=R.payload,y=typeof P=="function"?P.call(_,v,y):P,y==null)break e;v=Zi({},v,y);break e;case 2:ou=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,y=n.effects,y===null?n.effects=[o]:y.push(o))}else _={eventTime:_,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},p===null?(d=p=_,u=v):p=p.next=_,a|=y;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;y=o,o=y.next,y.next=null,n.lastBaseUpdate=y,n.shared.pending=null}}while(!0);if(p===null&&(u=v),n.baseState=u,n.firstBaseUpdate=d,n.lastBaseUpdate=p,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);Kh|=a,e.lanes=a,e.memoizedState=v}}function CA(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(Dt(191,n));n.call(i)}}}var pv={},Rl=Uu(pv),R0=Uu(pv),T0=Uu(pv);function Fh(e){if(e===pv)throw Error(Dt(174));return e}function TR(e,t){switch(Ri(T0,t),Ri(R0,e),Ri(Rl,pv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lE(t,e)}Ii(Rl),Ri(Rl,t)}function Pp(){Ii(Rl),Ii(R0),Ii(T0)}function B4(e){Fh(T0.current);var t=Fh(Rl.current),r=lE(t,e.type);t!==r&&(Ri(R0,e),Ri(Rl,r))}function PR(e){R0.current===e&&(Ii(Rl),Ii(R0))}var $i=Uu(0);function Wx(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pb=[];function MR(){for(var e=0;e<Pb.length;e++)Pb[e]._workInProgressVersionPrimary=null;Pb.length=0}var jw=Rc.ReactCurrentDispatcher,Mb=Rc.ReactCurrentBatchConfig,qh=0,Ki=null,An=null,Vn=null,jx=!1,$m=!1,P0=0,vU=0;function bs(){throw Error(Dt(321))}function FR(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ka(e[r],t[r]))return!1;return!0}function AR(e,t,r,i,n,s){if(qh=s,Ki=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jw.current=e===null||e.memoizedState===null?CU:_U,e=r(i,n),$m){s=0;do{if($m=!1,P0=0,25<=s)throw Error(Dt(301));s+=1,Vn=An=null,t.updateQueue=null,jw.current=bU,e=r(i,n)}while($m)}if(jw.current=$x,t=An!==null&&An.next!==null,qh=0,Vn=An=Ki=null,jx=!1,t)throw Error(Dt(300));return e}function IR(){var e=P0!==0;return P0=0,e}function ml(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?Ki.memoizedState=Vn=e:Vn=Vn.next=e,Vn}function wa(){if(An===null){var e=Ki.alternate;e=e!==null?e.memoizedState:null}else e=An.next;var t=Vn===null?Ki.memoizedState:Vn.next;if(t!==null)Vn=t,An=e;else{if(e===null)throw Error(Dt(310));An=e,e={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Vn===null?Ki.memoizedState=Vn=e:Vn=Vn.next=e}return Vn}function M0(e,t){return typeof t=="function"?t(e):t}function Fb(e){var t=wa(),r=t.queue;if(r===null)throw Error(Dt(311));r.lastRenderedReducer=e;var i=An,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var o=a=null,u=null,d=s;do{var p=d.lane;if((qh&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var v={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(o=u=v,a=i):u=u.next=v,Ki.lanes|=p,Kh|=p}d=d.next}while(d!==null&&d!==s);u===null?a=i:u.next=o,Ka(i,t.memoizedState)||(go=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=u,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,Ki.lanes|=s,Kh|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ab(e){var t=wa(),r=t.queue;if(r===null)throw Error(Dt(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);Ka(s,t.memoizedState)||(go=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function z4(){}function G4(e,t){var r=Ki,i=wa(),n=t(),s=!Ka(i.memoizedState,n);if(s&&(i.memoizedState=n,go=!0),i=i.queue,DR(U4.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||Vn!==null&&Vn.memoizedState.tag&1){if(r.flags|=2048,F0(9,H4.bind(null,r,i,n,t),void 0,null),jn===null)throw Error(Dt(349));qh&30||V4(r,t,n)}return n}function V4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ki.updateQueue,t===null?(t={lastEffect:null,stores:null},Ki.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function H4(e,t,r,i){t.value=r,t.getSnapshot=i,W4(t)&&j4(e)}function U4(e,t,r){return r(function(){W4(t)&&j4(e)})}function W4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ka(e,r)}catch{return!0}}function j4(e){var t=wc(e,1);t!==null&&Ha(t,e,1,-1)}function _A(e){var t=ml();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:M0,lastRenderedState:e},t.queue=e,e=e.dispatch=xU.bind(null,Ki,e),[t.memoizedState,e]}function F0(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Ki.updateQueue,t===null?(t={lastEffect:null,stores:null},Ki.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function $4(){return wa().memoizedState}function $w(e,t,r,i){var n=ml();Ki.flags|=e,n.memoizedState=F0(1|t,r,void 0,i===void 0?null:i)}function o1(e,t,r,i){var n=wa();i=i===void 0?null:i;var s=void 0;if(An!==null){var a=An.memoizedState;if(s=a.destroy,i!==null&&FR(i,a.deps)){n.memoizedState=F0(t,r,s,i);return}}Ki.flags|=e,n.memoizedState=F0(1|t,r,s,i)}function bA(e,t){return $w(8390656,8,e,t)}function DR(e,t){return o1(2048,8,e,t)}function q4(e,t){return o1(4,2,e,t)}function K4(e,t){return o1(4,4,e,t)}function Z4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function X4(e,t,r){return r=r!=null?r.concat([e]):null,o1(4,4,Z4.bind(null,t,e),r)}function kR(){}function Y4(e,t){var r=wa();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&FR(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Q4(e,t){var r=wa();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&FR(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function J4(e,t,r){return qh&21?(Ka(r,t)||(r=n4(),Ki.lanes|=r,Kh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,go=!0),e.memoizedState=r)}function yU(e,t){var r=li;li=r!==0&&4>r?r:4,e(!0);var i=Mb.transition;Mb.transition={};try{e(!1),t()}finally{li=r,Mb.transition=i}}function e3(){return wa().memoizedState}function wU(e,t,r){var i=bu(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},t3(e))r3(t,r);else if(r=O4(e,t,r,i),r!==null){var n=Xs();Ha(r,e,i,n),i3(r,t,i)}}function xU(e,t,r){var i=bu(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(t3(e))r3(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,r);if(n.hasEagerState=!0,n.eagerState=o,Ka(o,a)){var u=t.interleaved;u===null?(n.next=n,ER(t)):(n.next=u.next,u.next=n),t.interleaved=n;return}}catch{}finally{}r=O4(e,t,n,i),r!==null&&(n=Xs(),Ha(r,e,i,n),i3(r,t,i))}}function t3(e){var t=e.alternate;return e===Ki||t!==null&&t===Ki}function r3(e,t){$m=jx=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function i3(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,hR(e,r)}}var $x={readContext:ya,useCallback:bs,useContext:bs,useEffect:bs,useImperativeHandle:bs,useInsertionEffect:bs,useLayoutEffect:bs,useMemo:bs,useReducer:bs,useRef:bs,useState:bs,useDebugValue:bs,useDeferredValue:bs,useTransition:bs,useMutableSource:bs,useSyncExternalStore:bs,useId:bs,unstable_isNewReconciler:!1},CU={readContext:ya,useCallback:function(e,t){return ml().memoizedState=[e,t===void 0?null:t],e},useContext:ya,useEffect:bA,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$w(4194308,4,Z4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $w(4194308,4,e,t)},useInsertionEffect:function(e,t){return $w(4,2,e,t)},useMemo:function(e,t){var r=ml();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ml();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=wU.bind(null,Ki,e),[i.memoizedState,e]},useRef:function(e){var t=ml();return e={current:e},t.memoizedState=e},useState:_A,useDebugValue:kR,useDeferredValue:function(e){return ml().memoizedState=e},useTransition:function(){var e=_A(!1),t=e[0];return e=yU.bind(null,e[1]),ml().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Ki,n=ml();if(zi){if(r===void 0)throw Error(Dt(407));r=r()}else{if(r=t(),jn===null)throw Error(Dt(349));qh&30||V4(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,bA(U4.bind(null,i,s,e),[e]),i.flags|=2048,F0(9,H4.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=ml(),t=jn.identifierPrefix;if(zi){var r=lc,i=ac;r=(i&~(1<<32-Va(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=P0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=vU++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_U={readContext:ya,useCallback:Y4,useContext:ya,useEffect:DR,useImperativeHandle:X4,useInsertionEffect:q4,useLayoutEffect:K4,useMemo:Q4,useReducer:Fb,useRef:$4,useState:function(){return Fb(M0)},useDebugValue:kR,useDeferredValue:function(e){var t=wa();return J4(t,An.memoizedState,e)},useTransition:function(){var e=Fb(M0)[0],t=wa().memoizedState;return[e,t]},useMutableSource:z4,useSyncExternalStore:G4,useId:e3,unstable_isNewReconciler:!1},bU={readContext:ya,useCallback:Y4,useContext:ya,useEffect:DR,useImperativeHandle:X4,useInsertionEffect:q4,useLayoutEffect:K4,useMemo:Q4,useReducer:Ab,useRef:$4,useState:function(){return Ab(M0)},useDebugValue:kR,useDeferredValue:function(e){var t=wa();return An===null?t.memoizedState=e:J4(t,An.memoizedState,e)},useTransition:function(){var e=Ab(M0)[0],t=wa().memoizedState;return[e,t]},useMutableSource:z4,useSyncExternalStore:G4,useId:e3,unstable_isNewReconciler:!1};function Oa(e,t){if(e&&e.defaultProps){t=Zi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ME(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Zi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var a1={isMounted:function(e){return(e=e._reactInternals)?pd(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Xs(),n=bu(e),s=uc(i,n);s.payload=t,r!=null&&(s.callback=r),t=Cu(e,s,n),t!==null&&(Ha(t,e,n,i),Ww(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Xs(),n=bu(e),s=uc(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Cu(e,s,n),t!==null&&(Ha(t,e,n,i),Ww(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xs(),i=bu(e),n=uc(r,i);n.tag=2,t!=null&&(n.callback=t),t=Cu(e,n,i),t!==null&&(Ha(t,e,i,r),Ww(t,e,i))}};function SA(e,t,r,i,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!_0(r,i)||!_0(n,s):!0}function n3(e,t,r){var i=!1,n=Mu,s=t.contextType;return typeof s=="object"&&s!==null?s=ya(s):(n=yo(t)?jh:Is.current,i=t.contextTypes,s=(i=i!=null)?Ep(e,n):Mu),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=a1,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function EA(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&a1.enqueueReplaceState(t,t.state,null)}function FE(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},RR(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=ya(s):(s=yo(t)?jh:Is.current,n.context=Ep(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ME(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&a1.enqueueReplaceState(n,n.state,null),Ux(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Mp(e,t){try{var r="",i=t;do r+=Y7(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function Ib(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function AE(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var SU=typeof WeakMap=="function"?WeakMap:Map;function s3(e,t,r){r=uc(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Kx||(Kx=!0,VE=i),AE(e,t)},r}function o3(e,t,r){r=uc(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){AE(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){AE(e,t),typeof i!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function RA(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new SU;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=BU.bind(null,e,t,r),t.then(e,e))}function TA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function PA(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=uc(-1,1),t.tag=2,Cu(r,t,1))),r.lanes|=1),e)}var EU=Rc.ReactCurrentOwner,go=!1;function $s(e,t,r,i){t.child=e===null?L4(t,null,r,i):Tp(t,e.child,r,i)}function MA(e,t,r,i,n){r=r.render;var s=t.ref;return ep(t,n),i=AR(e,t,r,i,s,n),r=IR(),e!==null&&!go?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,xc(e,t,n)):(zi&&r&&wR(t),t.flags|=1,$s(e,t,i,n),t.child)}function FA(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!HR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,a3(e,t,s,i,n)):(e=Xw(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&n)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:_0,r(a,i)&&e.ref===t.ref)return xc(e,t,n)}return t.flags|=1,e=Su(s,i),e.ref=t.ref,e.return=t,t.child=e}function a3(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(_0(s,i)&&e.ref===t.ref)if(go=!1,t.pendingProps=i=s,(e.lanes&n)!==0)e.flags&131072&&(go=!0);else return t.lanes=e.lanes,xc(e,t,n)}return IE(e,t,r,i,n)}function l3(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ri(Gf,Ao),Ao|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ri(Gf,Ao),Ao|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,Ri(Gf,Ao),Ao|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,Ri(Gf,Ao),Ao|=i;return $s(e,t,n,r),t.child}function c3(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function IE(e,t,r,i,n){var s=yo(r)?jh:Is.current;return s=Ep(t,s),ep(t,n),r=AR(e,t,r,i,s,n),i=IR(),e!==null&&!go?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,xc(e,t,n)):(zi&&i&&wR(t),t.flags|=1,$s(e,t,r,n),t.child)}function AA(e,t,r,i,n){if(yo(r)){var s=!0;Bx(t)}else s=!1;if(ep(t,n),t.stateNode===null)qw(e,t),n3(t,r,i),FE(t,r,i,n),i=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var u=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=ya(d):(d=yo(r)?jh:Is.current,d=Ep(t,d));var p=r.getDerivedStateFromProps,v=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||u!==d)&&EA(t,a,i,d),ou=!1;var y=t.memoizedState;a.state=y,Ux(t,i,a,n),u=t.memoizedState,o!==i||y!==u||vo.current||ou?(typeof p=="function"&&(ME(t,r,p,i),u=t.memoizedState),(o=ou||SA(t,r,o,i,y,u,d))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),a.props=i,a.state=u,a.context=d,i=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,N4(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Oa(t.type,o),a.props=d,v=t.pendingProps,y=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=ya(u):(u=yo(r)?jh:Is.current,u=Ep(t,u));var _=r.getDerivedStateFromProps;(p=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==v||y!==u)&&EA(t,a,i,u),ou=!1,y=t.memoizedState,a.state=y,Ux(t,i,a,n);var P=t.memoizedState;o!==v||y!==P||vo.current||ou?(typeof _=="function"&&(ME(t,r,_,i),P=t.memoizedState),(d=ou||SA(t,r,d,i,y,P,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,P,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,P,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=P),a.props=i,a.state=P,a.context=u,i=d):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),i=!1)}return DE(e,t,r,i,s,n)}function DE(e,t,r,i,n,s){c3(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return n&&mA(t,r,!1),xc(e,t,s);i=t.stateNode,EU.current=t;var o=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=Tp(t,e.child,null,s),t.child=Tp(t,null,o,s)):$s(e,t,o,s),t.memoizedState=i.state,n&&mA(t,r,!0),t.child}function u3(e){var t=e.stateNode;t.pendingContext?gA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gA(e,t.context,!1),TR(e,t.containerInfo)}function IA(e,t,r,i,n){return Rp(),CR(n),t.flags|=256,$s(e,t,r,i),t.child}var kE={dehydrated:null,treeContext:null,retryLane:0};function LE(e){return{baseLanes:e,cachePool:null,transitions:null}}function h3(e,t,r){var i=t.pendingProps,n=$i.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Ri($i,n&1),e===null)return TE(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=u1(a,i,0,null),e=kh(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=LE(r),t.memoizedState=kE,e):LR(t,a));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return RU(e,t,a,i,o,n,r);if(s){s=i.fallback,a=t.mode,n=e.child,o=n.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=u,t.deletions=null):(i=Su(n,u),i.subtreeFlags=n.subtreeFlags&14680064),o!==null?s=Su(o,s):(s=kh(s,a,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,a=e.child.memoizedState,a=a===null?LE(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~r,t.memoizedState=kE,i}return s=e.child,e=s.sibling,i=Su(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function LR(e,t){return t=u1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ow(e,t,r,i){return i!==null&&CR(i),Tp(t,e.child,null,r),e=LR(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function RU(e,t,r,i,n,s,a){if(r)return t.flags&256?(t.flags&=-257,i=Ib(Error(Dt(422))),ow(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=u1({mode:"visible",children:i.children},n,0,null),s=kh(s,n,a,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Tp(t,e.child,null,a),t.child.memoizedState=LE(a),t.memoizedState=kE,s);if(!(t.mode&1))return ow(e,t,a,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(Dt(419)),i=Ib(s,i,void 0),ow(e,t,a,i)}if(o=(a&e.childLanes)!==0,go||o){if(i=jn,i!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|a)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,wc(e,n),Ha(i,e,n,-1))}return VR(),i=Ib(Error(Dt(421))),ow(e,t,a,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=zU.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,No=xu(n.nextSibling),Go=t,zi=!0,Ba=null,e!==null&&(ua[ha++]=ac,ua[ha++]=lc,ua[ha++]=$h,ac=e.id,lc=e.overflow,$h=t),t=LR(t,i.children),t.flags|=4096,t)}function DA(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),PE(e.return,t,r)}function Db(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function d3(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if($s(e,t,i.children,r),i=$i.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&DA(e,r,t);else if(e.tag===19)DA(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ri($i,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Wx(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Db(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Wx(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Db(t,!0,r,null,s);break;case"together":Db(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qw(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xc(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Kh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Dt(153));if(t.child!==null){for(e=t.child,r=Su(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Su(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function TU(e,t,r){switch(t.tag){case 3:u3(t),Rp();break;case 5:B4(t);break;case 1:yo(t.type)&&Bx(t);break;case 4:TR(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;Ri(Vx,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ri($i,$i.current&1),t.flags|=128,null):r&t.child.childLanes?h3(e,t,r):(Ri($i,$i.current&1),e=xc(e,t,r),e!==null?e.sibling:null);Ri($i,$i.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return d3(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ri($i,$i.current),i)break;return null;case 22:case 23:return t.lanes=0,l3(e,t,r)}return xc(e,t,r)}var f3,OE,p3,g3;f3=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};OE=function(){};p3=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,Fh(Rl.current);var s=null;switch(r){case"input":n=nE(e,n),i=nE(e,i),s=[];break;case"select":n=Zi({},n,{value:void 0}),i=Zi({},i,{value:void 0}),s=[];break;case"textarea":n=aE(e,n),i=aE(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Ox)}cE(r,i);var a;r=null;for(d in n)if(!i.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(g0.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var u=i[d];if(o=n!=null?n[d]:void 0,i.hasOwnProperty(d)&&u!==o&&(u!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(s||(s=[]),s.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(g0.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ai("scroll",e),s||o===u||(s=[])):(s=s||[]).push(d,u))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};g3=function(e,t,r,i){r!==i&&(t.flags|=4)};function vm(e,t){if(!zi)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ss(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function PU(e,t,r){var i=t.pendingProps;switch(xR(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ss(t),null;case 1:return yo(t.type)&&Nx(),Ss(t),null;case 3:return i=t.stateNode,Pp(),Ii(vo),Ii(Is),MR(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(nw(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ba!==null&&(WE(Ba),Ba=null))),OE(e,t),Ss(t),null;case 5:PR(t);var n=Fh(T0.current);if(r=t.type,e!==null&&t.stateNode!=null)p3(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Dt(166));return Ss(t),null}if(e=Fh(Rl.current),nw(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[yl]=t,i[E0]=s,e=(t.mode&1)!==0,r){case"dialog":Ai("cancel",i),Ai("close",i);break;case"iframe":case"object":case"embed":Ai("load",i);break;case"video":case"audio":for(n=0;n<Am.length;n++)Ai(Am[n],i);break;case"source":Ai("error",i);break;case"img":case"image":case"link":Ai("error",i),Ai("load",i);break;case"details":Ai("toggle",i);break;case"input":HF(i,s),Ai("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ai("invalid",i);break;case"textarea":WF(i,s),Ai("invalid",i)}cE(r,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&iw(i.textContent,o,e),n=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&iw(i.textContent,o,e),n=["children",""+o]):g0.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ai("scroll",i)}switch(r){case"input":Zy(i),UF(i,s,!0);break;case"textarea":Zy(i),jF(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Ox)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=UL(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(r,{is:i.is}):(e=a.createElement(r),r==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,r),e[yl]=t,e[E0]=i,f3(e,t,!1,!1),t.stateNode=e;e:{switch(a=uE(r,i),r){case"dialog":Ai("cancel",e),Ai("close",e),n=i;break;case"iframe":case"object":case"embed":Ai("load",e),n=i;break;case"video":case"audio":for(n=0;n<Am.length;n++)Ai(Am[n],e);n=i;break;case"source":Ai("error",e),n=i;break;case"img":case"image":case"link":Ai("error",e),Ai("load",e),n=i;break;case"details":Ai("toggle",e),n=i;break;case"input":HF(e,i),n=nE(e,i),Ai("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Zi({},i,{value:void 0}),Ai("invalid",e);break;case"textarea":WF(e,i),n=aE(e,i),Ai("invalid",e);break;default:n=i}cE(r,n),o=n;for(s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="style"?$L(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&WL(e,u)):s==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&m0(e,u):typeof u=="number"&&m0(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(g0.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ai("scroll",e):u!=null&&sR(e,s,u,a))}switch(r){case"input":Zy(e),UF(e,i,!1);break;case"textarea":Zy(e),jF(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Pu(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?Xf(e,!!i.multiple,s,!1):i.defaultValue!=null&&Xf(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Ox)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ss(t),null;case 6:if(e&&t.stateNode!=null)g3(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Dt(166));if(r=Fh(T0.current),Fh(Rl.current),nw(t)){if(i=t.stateNode,r=t.memoizedProps,i[yl]=t,(s=i.nodeValue!==r)&&(e=Go,e!==null))switch(e.tag){case 3:iw(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&iw(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[yl]=t,t.stateNode=i}return Ss(t),null;case 13:if(Ii($i),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(zi&&No!==null&&t.mode&1&&!(t.flags&128))D4(),Rp(),t.flags|=98560,s=!1;else if(s=nw(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(Dt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Dt(317));s[yl]=t}else Rp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ss(t),s=!1}else Ba!==null&&(WE(Ba),Ba=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||$i.current&1?Dn===0&&(Dn=3):VR())),t.updateQueue!==null&&(t.flags|=4),Ss(t),null);case 4:return Pp(),OE(e,t),e===null&&b0(t.stateNode.containerInfo),Ss(t),null;case 10:return SR(t.type._context),Ss(t),null;case 17:return yo(t.type)&&Nx(),Ss(t),null;case 19:if(Ii($i),s=t.memoizedState,s===null)return Ss(t),null;if(i=(t.flags&128)!==0,a=s.rendering,a===null)if(i)vm(s,!1);else{if(Dn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Wx(e),a!==null){for(t.flags|=128,vm(s,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ri($i,$i.current&1|2),t.child}e=e.sibling}s.tail!==null&&wn()>Fp&&(t.flags|=128,i=!0,vm(s,!1),t.lanes=4194304)}else{if(!i)if(e=Wx(a),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),vm(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!zi)return Ss(t),null}else 2*wn()-s.renderingStartTime>Fp&&r!==1073741824&&(t.flags|=128,i=!0,vm(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=wn(),t.sibling=null,r=$i.current,Ri($i,i?r&1|2:r&1),t):(Ss(t),null);case 22:case 23:return GR(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ao&1073741824&&(Ss(t),t.subtreeFlags&6&&(t.flags|=8192)):Ss(t),null;case 24:return null;case 25:return null}throw Error(Dt(156,t.tag))}function MU(e,t){switch(xR(t),t.tag){case 1:return yo(t.type)&&Nx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pp(),Ii(vo),Ii(Is),MR(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return PR(t),null;case 13:if(Ii($i),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Dt(340));Rp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ii($i),null;case 4:return Pp(),null;case 10:return SR(t.type._context),null;case 22:case 23:return GR(),null;case 24:return null;default:return null}}var aw=!1,Ms=!1,FU=typeof WeakSet=="function"?WeakSet:Set,ur=null;function zf(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){rn(e,t,i)}else r.current=null}function NE(e,t,r){try{r()}catch(i){rn(e,t,i)}}var kA=!1;function AU(e,t){if(xE=Dx,e=x4(),yR(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,u=-1,d=0,p=0,v=e,y=null;t:for(;;){for(var _;v!==r||n!==0&&v.nodeType!==3||(o=a+n),v!==s||i!==0&&v.nodeType!==3||(u=a+i),v.nodeType===3&&(a+=v.nodeValue.length),(_=v.firstChild)!==null;)y=v,v=_;for(;;){if(v===e)break t;if(y===r&&++d===n&&(o=a),y===s&&++p===i&&(u=a),(_=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=_}r=o===-1||u===-1?null:{start:o,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(CE={focusedElem:e,selectionRange:r},Dx=!1,ur=t;ur!==null;)if(t=ur,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ur=e;else for(;ur!==null;){t=ur;try{var P=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var R=P.memoizedProps,M=P.memoizedState,F=t.stateNode,k=F.getSnapshotBeforeUpdate(t.elementType===t.type?R:Oa(t.type,R),M);F.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Dt(163))}}catch(G){rn(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,ur=e;break}ur=t.return}return P=kA,kA=!1,P}function qm(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&NE(t,r,s)}n=n.next}while(n!==i)}}function l1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function BE(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function m3(e){var t=e.alternate;t!==null&&(e.alternate=null,m3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yl],delete t[E0],delete t[SE],delete t[fU],delete t[pU])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function v3(e){return e.tag===5||e.tag===3||e.tag===4}function LA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||v3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zE(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ox));else if(i!==4&&(e=e.child,e!==null))for(zE(e,t,r),e=e.sibling;e!==null;)zE(e,t,r),e=e.sibling}function GE(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(GE(e,t,r),e=e.sibling;e!==null;)GE(e,t,r),e=e.sibling}var es=null,Na=!1;function Yc(e,t,r){for(r=r.child;r!==null;)y3(e,t,r),r=r.sibling}function y3(e,t,r){if(El&&typeof El.onCommitFiberUnmount=="function")try{El.onCommitFiberUnmount(e1,r)}catch{}switch(r.tag){case 5:Ms||zf(r,t);case 6:var i=es,n=Na;es=null,Yc(e,t,r),es=i,Na=n,es!==null&&(Na?(e=es,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):es.removeChild(r.stateNode));break;case 18:es!==null&&(Na?(e=es,r=r.stateNode,e.nodeType===8?Rb(e.parentNode,r):e.nodeType===1&&Rb(e,r),x0(e)):Rb(es,r.stateNode));break;case 4:i=es,n=Na,es=r.stateNode.containerInfo,Na=!0,Yc(e,t,r),es=i,Na=n;break;case 0:case 11:case 14:case 15:if(!Ms&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&NE(r,t,a),n=n.next}while(n!==i)}Yc(e,t,r);break;case 1:if(!Ms&&(zf(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(o){rn(r,t,o)}Yc(e,t,r);break;case 21:Yc(e,t,r);break;case 22:r.mode&1?(Ms=(i=Ms)||r.memoizedState!==null,Yc(e,t,r),Ms=i):Yc(e,t,r);break;default:Yc(e,t,r)}}function OA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new FU),t.forEach(function(i){var n=GU.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function Ia(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:es=o.stateNode,Na=!1;break e;case 3:es=o.stateNode.containerInfo,Na=!0;break e;case 4:es=o.stateNode.containerInfo,Na=!0;break e}o=o.return}if(es===null)throw Error(Dt(160));y3(s,a,n),es=null,Na=!1;var u=n.alternate;u!==null&&(u.return=null),n.return=null}catch(d){rn(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)w3(t,e),t=t.sibling}function w3(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ia(t,e),hl(e),i&4){try{qm(3,e,e.return),l1(3,e)}catch(R){rn(e,e.return,R)}try{qm(5,e,e.return)}catch(R){rn(e,e.return,R)}}break;case 1:Ia(t,e),hl(e),i&512&&r!==null&&zf(r,r.return);break;case 5:if(Ia(t,e),hl(e),i&512&&r!==null&&zf(r,r.return),e.flags&32){var n=e.stateNode;try{m0(n,"")}catch(R){rn(e,e.return,R)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,a=r!==null?r.memoizedProps:s,o=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&VL(n,s),uE(o,a);var d=uE(o,s);for(a=0;a<u.length;a+=2){var p=u[a],v=u[a+1];p==="style"?$L(n,v):p==="dangerouslySetInnerHTML"?WL(n,v):p==="children"?m0(n,v):sR(n,p,v,d)}switch(o){case"input":sE(n,s);break;case"textarea":HL(n,s);break;case"select":var y=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Xf(n,!!s.multiple,_,!1):y!==!!s.multiple&&(s.defaultValue!=null?Xf(n,!!s.multiple,s.defaultValue,!0):Xf(n,!!s.multiple,s.multiple?[]:"",!1))}n[E0]=s}catch(R){rn(e,e.return,R)}}break;case 6:if(Ia(t,e),hl(e),i&4){if(e.stateNode===null)throw Error(Dt(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(R){rn(e,e.return,R)}}break;case 3:if(Ia(t,e),hl(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{x0(t.containerInfo)}catch(R){rn(e,e.return,R)}break;case 4:Ia(t,e),hl(e);break;case 13:Ia(t,e),hl(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(BR=wn())),i&4&&OA(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(Ms=(d=Ms)||p,Ia(t,e),Ms=d):Ia(t,e),hl(e),i&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(ur=e,p=e.child;p!==null;){for(v=ur=p;ur!==null;){switch(y=ur,_=y.child,y.tag){case 0:case 11:case 14:case 15:qm(4,y,y.return);break;case 1:zf(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){i=y,r=y.return;try{t=i,P.props=t.memoizedProps,P.state=t.memoizedState,P.componentWillUnmount()}catch(R){rn(i,r,R)}}break;case 5:zf(y,y.return);break;case 22:if(y.memoizedState!==null){BA(v);continue}}_!==null?(_.return=y,ur=_):BA(v)}p=p.sibling}e:for(p=null,v=e;;){if(v.tag===5){if(p===null){p=v;try{n=v.stateNode,d?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=v.stateNode,u=v.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=jL("display",a))}catch(R){rn(e,e.return,R)}}}else if(v.tag===6){if(p===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(R){rn(e,e.return,R)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Ia(t,e),hl(e),i&4&&OA(e);break;case 21:break;default:Ia(t,e),hl(e)}}function hl(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(v3(r)){var i=r;break e}r=r.return}throw Error(Dt(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(m0(n,""),i.flags&=-33);var s=LA(e);GE(e,s,n);break;case 3:case 4:var a=i.stateNode.containerInfo,o=LA(e);zE(e,o,a);break;default:throw Error(Dt(161))}}catch(u){rn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function IU(e,t,r){ur=e,x3(e)}function x3(e,t,r){for(var i=(e.mode&1)!==0;ur!==null;){var n=ur,s=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||aw;if(!a){var o=n.alternate,u=o!==null&&o.memoizedState!==null||Ms;o=aw;var d=Ms;if(aw=a,(Ms=u)&&!d)for(ur=n;ur!==null;)a=ur,u=a.child,a.tag===22&&a.memoizedState!==null?zA(n):u!==null?(u.return=a,ur=u):zA(n);for(;s!==null;)ur=s,x3(s),s=s.sibling;ur=n,aw=o,Ms=d}NA(e)}else n.subtreeFlags&8772&&s!==null?(s.return=n,ur=s):NA(e)}}function NA(e){for(;ur!==null;){var t=ur;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ms||l1(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ms)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Oa(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&CA(t,s,i);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}CA(t,a,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var v=p.dehydrated;v!==null&&x0(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Dt(163))}Ms||t.flags&512&&BE(t)}catch(y){rn(t,t.return,y)}}if(t===e){ur=null;break}if(r=t.sibling,r!==null){r.return=t.return,ur=r;break}ur=t.return}}function BA(e){for(;ur!==null;){var t=ur;if(t===e){ur=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ur=r;break}ur=t.return}}function zA(e){for(;ur!==null;){var t=ur;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{l1(4,t)}catch(u){rn(t,r,u)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(u){rn(t,n,u)}}var s=t.return;try{BE(t)}catch(u){rn(t,s,u)}break;case 5:var a=t.return;try{BE(t)}catch(u){rn(t,a,u)}}}catch(u){rn(t,t.return,u)}if(t===e){ur=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ur=o;break}ur=t.return}}var DU=Math.ceil,qx=Rc.ReactCurrentDispatcher,OR=Rc.ReactCurrentOwner,ma=Rc.ReactCurrentBatchConfig,jr=0,jn=null,Cn=null,as=0,Ao=0,Gf=Uu(0),Dn=0,A0=null,Kh=0,c1=0,NR=0,Km=null,fo=null,BR=0,Fp=1/0,tc=null,Kx=!1,VE=null,_u=null,lw=!1,fu=null,Zx=0,Zm=0,HE=null,Kw=-1,Zw=0;function Xs(){return jr&6?wn():Kw!==-1?Kw:Kw=wn()}function bu(e){return e.mode&1?jr&2&&as!==0?as&-as:mU.transition!==null?(Zw===0&&(Zw=n4()),Zw):(e=li,e!==0||(e=window.event,e=e===void 0?16:h4(e.type)),e):1}function Ha(e,t,r,i){if(50<Zm)throw Zm=0,HE=null,Error(Dt(185));hv(e,r,i),(!(jr&2)||e!==jn)&&(e===jn&&(!(jr&2)&&(c1|=r),Dn===4&&cu(e,as)),wo(e,i),r===1&&jr===0&&!(t.mode&1)&&(Fp=wn()+500,s1&&Wu()))}function wo(e,t){var r=e.callbackNode;m9(e,t);var i=Ix(e,e===jn?as:0);if(i===0)r!==null&&KF(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&KF(r),t===1)e.tag===0?gU(GA.bind(null,e)):F4(GA.bind(null,e)),hU(function(){!(jr&6)&&Wu()}),r=null;else{switch(s4(i)){case 1:r=uR;break;case 4:r=r4;break;case 16:r=Ax;break;case 536870912:r=i4;break;default:r=Ax}r=P3(r,C3.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function C3(e,t){if(Kw=-1,Zw=0,jr&6)throw Error(Dt(327));var r=e.callbackNode;if(tp()&&e.callbackNode!==r)return null;var i=Ix(e,e===jn?as:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Xx(e,i);else{t=i;var n=jr;jr|=2;var s=b3();(jn!==e||as!==t)&&(tc=null,Fp=wn()+500,Dh(e,t));do try{OU();break}catch(o){_3(e,o)}while(!0);bR(),qx.current=s,jr=n,Cn!==null?t=0:(jn=null,as=0,t=Dn)}if(t!==0){if(t===2&&(n=gE(e),n!==0&&(i=n,t=UE(e,n))),t===1)throw r=A0,Dh(e,0),cu(e,i),wo(e,wn()),r;if(t===6)cu(e,i);else{if(n=e.current.alternate,!(i&30)&&!kU(n)&&(t=Xx(e,i),t===2&&(s=gE(e),s!==0&&(i=s,t=UE(e,s))),t===1))throw r=A0,Dh(e,0),cu(e,i),wo(e,wn()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(Dt(345));case 2:Ch(e,fo,tc);break;case 3:if(cu(e,i),(i&130023424)===i&&(t=BR+500-wn(),10<t)){if(Ix(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){Xs(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=bE(Ch.bind(null,e,fo,tc),t);break}Ch(e,fo,tc);break;case 4:if(cu(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var a=31-Va(i);s=1<<a,a=t[a],a>n&&(n=a),i&=~s}if(i=n,i=wn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*DU(i/1960))-i,10<i){e.timeoutHandle=bE(Ch.bind(null,e,fo,tc),i);break}Ch(e,fo,tc);break;case 5:Ch(e,fo,tc);break;default:throw Error(Dt(329))}}}return wo(e,wn()),e.callbackNode===r?C3.bind(null,e):null}function UE(e,t){var r=Km;return e.current.memoizedState.isDehydrated&&(Dh(e,t).flags|=256),e=Xx(e,t),e!==2&&(t=fo,fo=r,t!==null&&WE(t)),e}function WE(e){fo===null?fo=e:fo.push.apply(fo,e)}function kU(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!Ka(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cu(e,t){for(t&=~NR,t&=~c1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Va(t),i=1<<r;e[r]=-1,t&=~i}}function GA(e){if(jr&6)throw Error(Dt(327));tp();var t=Ix(e,0);if(!(t&1))return wo(e,wn()),null;var r=Xx(e,t);if(e.tag!==0&&r===2){var i=gE(e);i!==0&&(t=i,r=UE(e,i))}if(r===1)throw r=A0,Dh(e,0),cu(e,t),wo(e,wn()),r;if(r===6)throw Error(Dt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ch(e,fo,tc),wo(e,wn()),null}function zR(e,t){var r=jr;jr|=1;try{return e(t)}finally{jr=r,jr===0&&(Fp=wn()+500,s1&&Wu())}}function Zh(e){fu!==null&&fu.tag===0&&!(jr&6)&&tp();var t=jr;jr|=1;var r=ma.transition,i=li;try{if(ma.transition=null,li=1,e)return e()}finally{li=i,ma.transition=r,jr=t,!(jr&6)&&Wu()}}function GR(){Ao=Gf.current,Ii(Gf)}function Dh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,uU(r)),Cn!==null)for(r=Cn.return;r!==null;){var i=r;switch(xR(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Nx();break;case 3:Pp(),Ii(vo),Ii(Is),MR();break;case 5:PR(i);break;case 4:Pp();break;case 13:Ii($i);break;case 19:Ii($i);break;case 10:SR(i.type._context);break;case 22:case 23:GR()}r=r.return}if(jn=e,Cn=e=Su(e.current,null),as=Ao=t,Dn=0,A0=null,NR=c1=Kh=0,fo=Km=null,Mh!==null){for(t=0;t<Mh.length;t++)if(r=Mh[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var a=s.next;s.next=n,i.next=a}r.pending=i}Mh=null}return e}function _3(e,t){do{var r=Cn;try{if(bR(),jw.current=$x,jx){for(var i=Ki.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}jx=!1}if(qh=0,Vn=An=Ki=null,$m=!1,P0=0,OR.current=null,r===null||r.return===null){Dn=1,A0=t,Cn=null;break}e:{var s=e,a=r.return,o=r,u=t;if(t=as,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=o,v=p.tag;if(!(p.mode&1)&&(v===0||v===11||v===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var _=TA(a);if(_!==null){_.flags&=-257,PA(_,a,o,s,t),_.mode&1&&RA(s,d,t),t=_,u=d;var P=t.updateQueue;if(P===null){var R=new Set;R.add(u),t.updateQueue=R}else P.add(u);break e}else{if(!(t&1)){RA(s,d,t),VR();break e}u=Error(Dt(426))}}else if(zi&&o.mode&1){var M=TA(a);if(M!==null){!(M.flags&65536)&&(M.flags|=256),PA(M,a,o,s,t),CR(Mp(u,o));break e}}s=u=Mp(u,o),Dn!==4&&(Dn=2),Km===null?Km=[s]:Km.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var F=s3(s,u,t);xA(s,F);break e;case 1:o=u;var k=s.type,N=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(_u===null||!_u.has(N)))){s.flags|=65536,t&=-t,s.lanes|=t;var G=o3(s,o,t);xA(s,G);break e}}s=s.return}while(s!==null)}E3(r)}catch(j){t=j,Cn===r&&r!==null&&(Cn=r=r.return);continue}break}while(!0)}function b3(){var e=qx.current;return qx.current=$x,e===null?$x:e}function VR(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),jn===null||!(Kh&268435455)&&!(c1&268435455)||cu(jn,as)}function Xx(e,t){var r=jr;jr|=2;var i=b3();(jn!==e||as!==t)&&(tc=null,Dh(e,t));do try{LU();break}catch(n){_3(e,n)}while(!0);if(bR(),jr=r,qx.current=i,Cn!==null)throw Error(Dt(261));return jn=null,as=0,Dn}function LU(){for(;Cn!==null;)S3(Cn)}function OU(){for(;Cn!==null&&!a9();)S3(Cn)}function S3(e){var t=T3(e.alternate,e,Ao);e.memoizedProps=e.pendingProps,t===null?E3(e):Cn=t,OR.current=null}function E3(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=MU(r,t),r!==null){r.flags&=32767,Cn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dn=6,Cn=null;return}}else if(r=PU(r,t,Ao),r!==null){Cn=r;return}if(t=t.sibling,t!==null){Cn=t;return}Cn=t=e}while(t!==null);Dn===0&&(Dn=5)}function Ch(e,t,r){var i=li,n=ma.transition;try{ma.transition=null,li=1,NU(e,t,r,i)}finally{ma.transition=n,li=i}return null}function NU(e,t,r,i){do tp();while(fu!==null);if(jr&6)throw Error(Dt(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Dt(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(v9(e,s),e===jn&&(Cn=jn=null,as=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||lw||(lw=!0,P3(Ax,function(){return tp(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=ma.transition,ma.transition=null;var a=li;li=1;var o=jr;jr|=4,OR.current=null,AU(e,r),w3(r,e),iU(CE),Dx=!!xE,CE=xE=null,e.current=r,IU(r),l9(),jr=o,li=a,ma.transition=s}else e.current=r;if(lw&&(lw=!1,fu=e,Zx=n),s=e.pendingLanes,s===0&&(_u=null),h9(r.stateNode),wo(e,wn()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(Kx)throw Kx=!1,e=VE,VE=null,e;return Zx&1&&e.tag!==0&&tp(),s=e.pendingLanes,s&1?e===HE?Zm++:(Zm=0,HE=e):Zm=0,Wu(),null}function tp(){if(fu!==null){var e=s4(Zx),t=ma.transition,r=li;try{if(ma.transition=null,li=16>e?16:e,fu===null)var i=!1;else{if(e=fu,fu=null,Zx=0,jr&6)throw Error(Dt(331));var n=jr;for(jr|=4,ur=e.current;ur!==null;){var s=ur,a=s.child;if(ur.flags&16){var o=s.deletions;if(o!==null){for(var u=0;u<o.length;u++){var d=o[u];for(ur=d;ur!==null;){var p=ur;switch(p.tag){case 0:case 11:case 15:qm(8,p,s)}var v=p.child;if(v!==null)v.return=p,ur=v;else for(;ur!==null;){p=ur;var y=p.sibling,_=p.return;if(m3(p),p===d){ur=null;break}if(y!==null){y.return=_,ur=y;break}ur=_}}}var P=s.alternate;if(P!==null){var R=P.child;if(R!==null){P.child=null;do{var M=R.sibling;R.sibling=null,R=M}while(R!==null)}}ur=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,ur=a;else e:for(;ur!==null;){if(s=ur,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qm(9,s,s.return)}var F=s.sibling;if(F!==null){F.return=s.return,ur=F;break e}ur=s.return}}var k=e.current;for(ur=k;ur!==null;){a=ur;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,ur=N;else e:for(a=k;ur!==null;){if(o=ur,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:l1(9,o)}}catch(j){rn(o,o.return,j)}if(o===a){ur=null;break e}var G=o.sibling;if(G!==null){G.return=o.return,ur=G;break e}ur=o.return}}if(jr=n,Wu(),El&&typeof El.onPostCommitFiberRoot=="function")try{El.onPostCommitFiberRoot(e1,e)}catch{}i=!0}return i}finally{li=r,ma.transition=t}}return!1}function VA(e,t,r){t=Mp(r,t),t=s3(e,t,1),e=Cu(e,t,1),t=Xs(),e!==null&&(hv(e,1,t),wo(e,t))}function rn(e,t,r){if(e.tag===3)VA(e,e,r);else for(;t!==null;){if(t.tag===3){VA(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(_u===null||!_u.has(i))){e=Mp(r,e),e=o3(t,e,1),t=Cu(t,e,1),e=Xs(),t!==null&&(hv(t,1,e),wo(t,e));break}}t=t.return}}function BU(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Xs(),e.pingedLanes|=e.suspendedLanes&r,jn===e&&(as&r)===r&&(Dn===4||Dn===3&&(as&130023424)===as&&500>wn()-BR?Dh(e,0):NR|=r),wo(e,t)}function R3(e,t){t===0&&(e.mode&1?(t=Qy,Qy<<=1,!(Qy&130023424)&&(Qy=4194304)):t=1);var r=Xs();e=wc(e,t),e!==null&&(hv(e,t,r),wo(e,r))}function zU(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),R3(e,r)}function GU(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Dt(314))}i!==null&&i.delete(t),R3(e,r)}var T3;T3=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||vo.current)go=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return go=!1,TU(e,t,r);go=!!(e.flags&131072)}else go=!1,zi&&t.flags&1048576&&A4(t,Gx,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;qw(e,t),e=t.pendingProps;var n=Ep(t,Is.current);ep(t,r),n=AR(null,t,i,e,n,r);var s=IR();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yo(i)?(s=!0,Bx(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,RR(t),n.updater=a1,t.stateNode=n,n._reactInternals=t,FE(t,i,e,r),t=DE(null,t,i,!0,s,r)):(t.tag=0,zi&&s&&wR(t),$s(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(qw(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=HU(i),e=Oa(i,e),n){case 0:t=IE(null,t,i,e,r);break e;case 1:t=AA(null,t,i,e,r);break e;case 11:t=MA(null,t,i,e,r);break e;case 14:t=FA(null,t,i,Oa(i.type,e),r);break e}throw Error(Dt(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Oa(i,n),IE(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Oa(i,n),AA(e,t,i,n,r);case 3:e:{if(u3(t),e===null)throw Error(Dt(387));i=t.pendingProps,s=t.memoizedState,n=s.element,N4(e,t),Ux(t,i,null,r);var a=t.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Mp(Error(Dt(423)),t),t=IA(e,t,i,r,n);break e}else if(i!==n){n=Mp(Error(Dt(424)),t),t=IA(e,t,i,r,n);break e}else for(No=xu(t.stateNode.containerInfo.firstChild),Go=t,zi=!0,Ba=null,r=L4(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Rp(),i===n){t=xc(e,t,r);break e}$s(e,t,i,r)}t=t.child}return t;case 5:return B4(t),e===null&&TE(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,a=n.children,_E(i,n)?a=null:s!==null&&_E(i,s)&&(t.flags|=32),c3(e,t),$s(e,t,a,r),t.child;case 6:return e===null&&TE(t),null;case 13:return h3(e,t,r);case 4:return TR(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Tp(t,null,i,r):$s(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Oa(i,n),MA(e,t,i,n,r);case 7:return $s(e,t,t.pendingProps,r),t.child;case 8:return $s(e,t,t.pendingProps.children,r),t.child;case 12:return $s(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,Ri(Vx,i._currentValue),i._currentValue=a,s!==null)if(Ka(s.value,a)){if(s.children===n.children&&!vo.current){t=xc(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var u=o.firstContext;u!==null;){if(u.context===i){if(s.tag===1){u=uc(-1,r&-r),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),PE(s.return,r,t),o.lanes|=r;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Dt(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),PE(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}$s(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,ep(t,r),n=ya(n),i=i(n),t.flags|=1,$s(e,t,i,r),t.child;case 14:return i=t.type,n=Oa(i,t.pendingProps),n=Oa(i.type,n),FA(e,t,i,n,r);case 15:return a3(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Oa(i,n),qw(e,t),t.tag=1,yo(i)?(e=!0,Bx(t)):e=!1,ep(t,r),n3(t,i,n),FE(t,i,n,r),DE(null,t,i,!0,e,r);case 19:return d3(e,t,r);case 22:return l3(e,t,r)}throw Error(Dt(156,t.tag))};function P3(e,t){return t4(e,t)}function VU(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(e,t,r,i){return new VU(e,t,r,i)}function HR(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HU(e){if(typeof e=="function")return HR(e)?1:0;if(e!=null){if(e=e.$$typeof,e===aR)return 11;if(e===lR)return 14}return 2}function Su(e,t){var r=e.alternate;return r===null?(r=fa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Xw(e,t,r,i,n,s){var a=2;if(i=e,typeof e=="function")HR(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ff:return kh(r.children,n,s,t);case oR:a=8,n|=8;break;case eE:return e=fa(12,r,t,n|2),e.elementType=eE,e.lanes=s,e;case tE:return e=fa(13,r,t,n),e.elementType=tE,e.lanes=s,e;case rE:return e=fa(19,r,t,n),e.elementType=rE,e.lanes=s,e;case BL:return u1(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case OL:a=10;break e;case NL:a=9;break e;case aR:a=11;break e;case lR:a=14;break e;case su:a=16,i=null;break e}throw Error(Dt(130,e==null?e:typeof e,""))}return t=fa(a,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function kh(e,t,r,i){return e=fa(7,e,i,t),e.lanes=r,e}function u1(e,t,r,i){return e=fa(22,e,i,t),e.elementType=BL,e.lanes=r,e.stateNode={isHidden:!1},e}function kb(e,t,r){return e=fa(6,e,null,t),e.lanes=r,e}function Lb(e,t,r){return t=fa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function UU(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gb(0),this.expirationTimes=gb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gb(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function UR(e,t,r,i,n,s,a,o,u){return e=new UU(e,t,r,o,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=fa(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},RR(s),e}function WU(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mf,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function M3(e){if(!e)return Mu;e=e._reactInternals;e:{if(pd(e)!==e||e.tag!==1)throw Error(Dt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Dt(171))}if(e.tag===1){var r=e.type;if(yo(r))return M4(e,r,t)}return t}function F3(e,t,r,i,n,s,a,o,u){return e=UR(r,i,!0,e,n,s,a,o,u),e.context=M3(null),r=e.current,i=Xs(),n=bu(r),s=uc(i,n),s.callback=t??null,Cu(r,s,n),e.current.lanes=n,hv(e,n,i),wo(e,i),e}function h1(e,t,r,i){var n=t.current,s=Xs(),a=bu(n);return r=M3(r),t.context===null?t.context=r:t.pendingContext=r,t=uc(s,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Cu(n,t,a),e!==null&&(Ha(e,n,a,s),Ww(e,n,a)),a}function Yx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function HA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function WR(e,t){HA(e,t),(e=e.alternate)&&HA(e,t)}function jU(){return null}var A3=typeof reportError=="function"?reportError:function(e){console.error(e)};function jR(e){this._internalRoot=e}d1.prototype.render=jR.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Dt(409));h1(e,t,null,null)};d1.prototype.unmount=jR.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zh(function(){h1(null,e,null,null)}),t[yc]=null}};function d1(e){this._internalRoot=e}d1.prototype.unstable_scheduleHydration=function(e){if(e){var t=l4();e={blockedOn:null,target:e,priority:t};for(var r=0;r<lu.length&&t!==0&&t<lu[r].priority;r++);lu.splice(r,0,e),r===0&&u4(e)}};function $R(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function UA(){}function $U(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var d=Yx(a);s.call(d)}}var a=F3(t,i,e,0,null,!1,!1,"",UA);return e._reactRootContainer=a,e[yc]=a.current,b0(e.nodeType===8?e.parentNode:e),Zh(),a}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var o=i;i=function(){var d=Yx(u);o.call(d)}}var u=UR(e,0,!1,null,null,!1,!1,"",UA);return e._reactRootContainer=u,e[yc]=u.current,b0(e.nodeType===8?e.parentNode:e),Zh(function(){h1(t,u,r,i)}),u}function p1(e,t,r,i,n){var s=r._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var o=n;n=function(){var u=Yx(a);o.call(u)}}h1(t,a,e,n)}else a=$U(r,t,e,n,i);return Yx(a)}o4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Fm(t.pendingLanes);r!==0&&(hR(t,r|1),wo(t,wn()),!(jr&6)&&(Fp=wn()+500,Wu()))}break;case 13:Zh(function(){var i=wc(e,1);if(i!==null){var n=Xs();Ha(i,e,1,n)}}),WR(e,1)}};dR=function(e){if(e.tag===13){var t=wc(e,134217728);if(t!==null){var r=Xs();Ha(t,e,134217728,r)}WR(e,134217728)}};a4=function(e){if(e.tag===13){var t=bu(e),r=wc(e,t);if(r!==null){var i=Xs();Ha(r,e,t,i)}WR(e,t)}};l4=function(){return li};c4=function(e,t){var r=li;try{return li=e,t()}finally{li=r}};dE=function(e,t,r){switch(t){case"input":if(sE(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=n1(i);if(!n)throw Error(Dt(90));GL(i),sE(i,n)}}}break;case"textarea":HL(e,r);break;case"select":t=r.value,t!=null&&Xf(e,!!r.multiple,t,!1)}};ZL=zR;XL=Zh;var qU={usingClientEntryPoint:!1,Events:[fv,kf,n1,qL,KL,zR]},ym={findFiberByHostInstance:Ph,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KU={bundleType:ym.bundleType,version:ym.version,rendererPackageName:ym.rendererPackageName,rendererConfig:ym.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=JL(e),e===null?null:e.stateNode},findFiberByHostInstance:ym.findFiberByHostInstance||jU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cw.isDisabled&&cw.supportsFiber)try{e1=cw.inject(KU),El=cw}catch{}}jo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qU;jo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$R(t))throw Error(Dt(200));return WU(e,t,null,r)};jo.createRoot=function(e,t){if(!$R(e))throw Error(Dt(299));var r=!1,i="",n=A3;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=UR(e,1,!1,null,null,r,!1,i,n),e[yc]=t.current,b0(e.nodeType===8?e.parentNode:e),new jR(t)};jo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Dt(188)):(e=Object.keys(e).join(","),Error(Dt(268,e)));return e=JL(t),e=e===null?null:e.stateNode,e};jo.flushSync=function(e){return Zh(e)};jo.hydrate=function(e,t,r){if(!f1(t))throw Error(Dt(200));return p1(null,e,t,!0,r)};jo.hydrateRoot=function(e,t,r){if(!$R(e))throw Error(Dt(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",a=A3;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=F3(t,null,e,1,r??null,n,!1,s,a),e[yc]=t.current,b0(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new d1(t)};jo.render=function(e,t,r){if(!f1(t))throw Error(Dt(200));return p1(null,e,t,!1,r)};jo.unmountComponentAtNode=function(e){if(!f1(e))throw Error(Dt(40));return e._reactRootContainer?(Zh(function(){p1(null,null,e,!1,function(){e._reactRootContainer=null,e[yc]=null})}),!0):!1};jo.unstable_batchedUpdates=zR;jo.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!f1(r))throw Error(Dt(200));if(e==null||e._reactInternals===void 0)throw Error(Dt(38));return p1(e,t,r,!1,i)};jo.version="18.3.1-next-f1338f8080-20240426";function I3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I3)}catch(e){console.error(e)}}I3(),IL.exports=jo;var ju=IL.exports;const D3=Y2(ju);var WA=ju;QS.createRoot=WA.createRoot,QS.hydrateRoot=WA.hydrateRoot;const g1=D.createContext(null);g1.displayName="PanelGroupContext";const sn={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},qR=10,Lh=D.useLayoutEffect,jA=rR.useId,ZU=typeof jA=="function"?jA:()=>null;let XU=0;function KR(e=null){const t=ZU(),r=D.useRef(e||t||null);return r.current===null&&(r.current=""+XU++),e??r.current}function k3({children:e,className:t="",collapsedSize:r,collapsible:i,defaultSize:n,forwardedRef:s,id:a,maxSize:o,minSize:u,onCollapse:d,onExpand:p,onResize:v,order:y,style:_,tagName:P="div",...R}){const M=D.useContext(g1);if(M===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:F,expandPanel:k,getPanelSize:N,getPanelStyle:G,groupId:j,isPanelCollapsed:ee,reevaluatePanelConstraints:q,registerPanel:oe,resizePanel:ue,unregisterPanel:me}=M,ie=KR(a),fe=D.useRef({callbacks:{onCollapse:d,onExpand:p,onResize:v},constraints:{collapsedSize:r,collapsible:i,defaultSize:n,maxSize:o,minSize:u},id:ie,idIsFromProps:a!==void 0,order:y});D.useRef({didLogMissingDefaultSizeWarning:!1}),Lh(()=>{const{callbacks:et,constraints:Xe}=fe.current,ct={...Xe};fe.current.id=ie,fe.current.idIsFromProps=a!==void 0,fe.current.order=y,et.onCollapse=d,et.onExpand=p,et.onResize=v,Xe.collapsedSize=r,Xe.collapsible=i,Xe.defaultSize=n,Xe.maxSize=o,Xe.minSize=u,(ct.collapsedSize!==Xe.collapsedSize||ct.collapsible!==Xe.collapsible||ct.maxSize!==Xe.maxSize||ct.minSize!==Xe.minSize)&&q(fe.current,ct)}),Lh(()=>{const et=fe.current;return oe(et),()=>{me(et)}},[y,ie,oe,me]),D.useImperativeHandle(s,()=>({collapse:()=>{F(fe.current)},expand:et=>{k(fe.current,et)},getId(){return ie},getSize(){return N(fe.current)},isCollapsed(){return ee(fe.current)},isExpanded(){return!ee(fe.current)},resize:et=>{ue(fe.current,et)}}),[F,k,N,ee,ie,ue]);const ke=G(fe.current,n);return D.createElement(P,{...R,children:e,className:t,id:ie,style:{...ke,..._},[sn.groupId]:j,[sn.panel]:"",[sn.panelCollapsible]:i||void 0,[sn.panelId]:ie,[sn.panelSize]:parseFloat(""+ke.flexGrow).toFixed(1)})}const Oh=D.forwardRef((e,t)=>D.createElement(k3,{...e,forwardedRef:t}));k3.displayName="Panel";Oh.displayName="forwardRef(Panel)";let jE=null,Yw=-1,uu=null;function YU(e,t){if(t){const r=(t&z3)!==0,i=(t&G3)!==0,n=(t&V3)!==0,s=(t&H3)!==0;if(r)return n?"se-resize":s?"ne-resize":"e-resize";if(i)return n?"sw-resize":s?"nw-resize":"w-resize";if(n)return"s-resize";if(s)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function QU(){uu!==null&&(document.head.removeChild(uu),jE=null,uu=null,Yw=-1)}function Ob(e,t){var r,i;const n=YU(e,t);if(jE!==n){if(jE=n,uu===null&&(uu=document.createElement("style"),document.head.appendChild(uu)),Yw>=0){var s;(s=uu.sheet)===null||s===void 0||s.removeRule(Yw)}Yw=(r=(i=uu.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${n} !important;}`))!==null&&r!==void 0?r:-1}}function L3(e){return e.type==="keydown"}function O3(e){return e.type.startsWith("pointer")}function N3(e){return e.type.startsWith("mouse")}function m1(e){if(O3(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(N3(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function JU(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function eW(e,t,r){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function tW(e,t){if(e===t)throw new Error("Cannot compare node with itself");const r={a:KA(e),b:KA(t)};let i;for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),t=r.b.pop(),i=e;Or(i,"Stacking order can only be calculated for elements with a common ancestor");const n={a:qA($A(r.a)),b:qA($A(r.b))};if(n.a===n.b){const s=i.childNodes,a={a:r.a.at(-1),b:r.b.at(-1)};let o=s.length;for(;o--;){const u=s[o];if(u===a.a)return 1;if(u===a.b)return-1}}return Math.sign(n.a-n.b)}const rW=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function iW(e){var t;const r=getComputedStyle((t=B3(e))!==null&&t!==void 0?t:e).display;return r==="flex"||r==="inline-flex"}function nW(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||iW(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||rW.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function $A(e){let t=e.length;for(;t--;){const r=e[t];if(Or(r,"Missing node"),nW(r))return r}return null}function qA(e){return e&&Number(getComputedStyle(e).zIndex)||0}function KA(e){const t=[];for(;e;)t.push(e),e=B3(e);return t}function B3(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const z3=1,G3=2,V3=4,H3=8,sW=JU()==="coarse";let Ua=[],rp=!1,Eh=new Map,v1=new Map;const I0=new Set;function oW(e,t,r,i,n){var s;const{ownerDocument:a}=t,o={direction:r,element:t,hitAreaMargins:i,setResizeHandlerState:n},u=(s=Eh.get(a))!==null&&s!==void 0?s:0;return Eh.set(a,u+1),I0.add(o),Qx(),function(){var p;v1.delete(e),I0.delete(o);const v=(p=Eh.get(a))!==null&&p!==void 0?p:1;if(Eh.set(a,v-1),Qx(),v===1&&Eh.delete(a),Ua.includes(o)){const y=Ua.indexOf(o);y>=0&&Ua.splice(y,1),XR(),n("up",!0,null)}}}function aW(e){const{target:t}=e,{x:r,y:i}=m1(e);rp=!0,ZR({target:t,x:r,y:i}),Qx(),Ua.length>0&&(Jx("down",e),e.preventDefault(),U3(t)||e.stopImmediatePropagation())}function Nb(e){const{x:t,y:r}=m1(e);if(rp&&e.buttons===0&&(rp=!1,Jx("up",e)),!rp){const{target:i}=e;ZR({target:i,x:t,y:r})}Jx("move",e),XR(),Ua.length>0&&e.preventDefault()}function Bb(e){const{target:t}=e,{x:r,y:i}=m1(e);v1.clear(),rp=!1,Ua.length>0&&(e.preventDefault(),U3(t)||e.stopImmediatePropagation()),Jx("up",e),ZR({target:t,x:r,y:i}),XR(),Qx()}function U3(e){let t=e;for(;t;){if(t.hasAttribute(sn.resizeHandle))return!0;t=t.parentElement}return!1}function ZR({target:e,x:t,y:r}){Ua.splice(0);let i=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(i=e),I0.forEach(n=>{const{element:s,hitAreaMargins:a}=n,o=s.getBoundingClientRect(),{bottom:u,left:d,right:p,top:v}=o,y=sW?a.coarse:a.fine;if(t>=d-y&&t<=p+y&&r>=v-y&&r<=u+y){if(i!==null&&document.contains(i)&&s!==i&&!s.contains(i)&&!i.contains(s)&&tW(i,s)>0){let P=i,R=!1;for(;P&&!P.contains(s);){if(eW(P.getBoundingClientRect(),o)){R=!0;break}P=P.parentElement}if(R)return}Ua.push(n)}})}function zb(e,t){v1.set(e,t)}function XR(){let e=!1,t=!1;Ua.forEach(i=>{const{direction:n}=i;n==="horizontal"?e=!0:t=!0});let r=0;v1.forEach(i=>{r|=i}),e&&t?Ob("intersection",r):e?Ob("horizontal",r):t?Ob("vertical",r):QU()}let Gb=new AbortController;function Qx(){Gb.abort(),Gb=new AbortController;const e={capture:!0,signal:Gb.signal};I0.size&&(rp?(Ua.length>0&&Eh.forEach((t,r)=>{const{body:i}=r;t>0&&(i.addEventListener("contextmenu",Bb,e),i.addEventListener("pointerleave",Nb,e),i.addEventListener("pointermove",Nb,e))}),window.addEventListener("pointerup",Bb,e),window.addEventListener("pointercancel",Bb,e)):Eh.forEach((t,r)=>{const{body:i}=r;t>0&&(i.addEventListener("pointerdown",aW,e),i.addEventListener("pointermove",Nb,e))}))}function Jx(e,t){I0.forEach(r=>{const{setResizeHandlerState:i}=r,n=Ua.includes(r);i(e,n,t)})}function lW(){const[e,t]=D.useState(0);return D.useCallback(()=>t(r=>r+1),[])}function Or(e,t){if(!e)throw console.error(t),Error(t)}function Xh(e,t,r=qR){return e.toFixed(r)===t.toFixed(r)?0:e>t?1:-1}function nc(e,t,r=qR){return Xh(e,t,r)===0}function Io(e,t,r){return Xh(e,t,r)===0}function cW(e,t,r){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){const n=e[i],s=t[i];if(!Io(n,s,r))return!1}return!0}function Vf({panelConstraints:e,panelIndex:t,size:r}){const i=e[t];Or(i!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:n=0,collapsible:s,maxSize:a=100,minSize:o=0}=i;if(Xh(r,o)<0)if(s){const u=(n+o)/2;Xh(r,u)<0?r=n:r=o}else r=o;return r=Math.min(a,r),r=parseFloat(r.toFixed(qR)),r}function Im({delta:e,initialLayout:t,panelConstraints:r,pivotIndices:i,prevLayout:n,trigger:s}){if(Io(e,0))return t;const a=[...t],[o,u]=i;Or(o!=null,"Invalid first pivot index"),Or(u!=null,"Invalid second pivot index");let d=0;if(s==="keyboard"){{const v=e<0?u:o,y=r[v];Or(y,`Panel constraints not found for index ${v}`);const{collapsedSize:_=0,collapsible:P,minSize:R=0}=y;if(P){const M=t[v];if(Or(M!=null,`Previous layout not found for panel index ${v}`),Io(M,_)){const F=R-M;Xh(F,Math.abs(e))>0&&(e=e<0?0-F:F)}}}{const v=e<0?o:u,y=r[v];Or(y,`No panel constraints found for index ${v}`);const{collapsedSize:_=0,collapsible:P,minSize:R=0}=y;if(P){const M=t[v];if(Or(M!=null,`Previous layout not found for panel index ${v}`),Io(M,R)){const F=M-_;Xh(F,Math.abs(e))>0&&(e=e<0?0-F:F)}}}}{const v=e<0?1:-1;let y=e<0?u:o,_=0;for(;;){const R=t[y];Or(R!=null,`Previous layout not found for panel index ${y}`);const F=Vf({panelConstraints:r,panelIndex:y,size:100})-R;if(_+=F,y+=v,y<0||y>=r.length)break}const P=Math.min(Math.abs(e),Math.abs(_));e=e<0?0-P:P}{let y=e<0?o:u;for(;y>=0&&y<r.length;){const _=Math.abs(e)-Math.abs(d),P=t[y];Or(P!=null,`Previous layout not found for panel index ${y}`);const R=P-_,M=Vf({panelConstraints:r,panelIndex:y,size:R});if(!Io(P,M)&&(d+=P-M,a[y]=M,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?y--:y++}}if(cW(n,a))return n;{const v=e<0?u:o,y=t[v];Or(y!=null,`Previous layout not found for panel index ${v}`);const _=y+d,P=Vf({panelConstraints:r,panelIndex:v,size:_});if(a[v]=P,!Io(P,_)){let R=_-P,F=e<0?u:o;for(;F>=0&&F<r.length;){const k=a[F];Or(k!=null,`Previous layout not found for panel index ${F}`);const N=k+R,G=Vf({panelConstraints:r,panelIndex:F,size:N});if(Io(k,G)||(R-=G-k,a[F]=G),Io(R,0))break;e>0?F--:F++}}}const p=a.reduce((v,y)=>y+v,0);return Io(p,100)?a:n}function uW({layout:e,panelsArray:t,pivotIndices:r}){let i=0,n=100,s=0,a=0;const o=r[0];Or(o!=null,"No pivot index found"),t.forEach((v,y)=>{const{constraints:_}=v,{maxSize:P=100,minSize:R=0}=_;y===o?(i=R,n=P):(s+=R,a+=P)});const u=Math.min(n,100-s),d=Math.max(i,100-a),p=e[o];return{valueMax:u,valueMin:d,valueNow:p}}function D0(e,t=document){return Array.from(t.querySelectorAll(`[${sn.resizeHandleId}][data-panel-group-id="${e}"]`))}function W3(e,t,r=document){const n=D0(e,r).findIndex(s=>s.getAttribute(sn.resizeHandleId)===t);return n??null}function j3(e,t,r){const i=W3(e,t,r);return i!=null?[i,i+1]:[-1,-1]}function $3(e,t=document){var r;if(t instanceof HTMLElement&&(t==null||(r=t.dataset)===null||r===void 0?void 0:r.panelGroupId)==e)return t;const i=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return i||null}function y1(e,t=document){const r=t.querySelector(`[${sn.resizeHandleId}="${e}"]`);return r||null}function hW(e,t,r,i=document){var n,s,a,o;const u=y1(t,i),d=D0(e,i),p=u?d.indexOf(u):-1,v=(n=(s=r[p])===null||s===void 0?void 0:s.id)!==null&&n!==void 0?n:null,y=(a=(o=r[p+1])===null||o===void 0?void 0:o.id)!==null&&a!==void 0?a:null;return[v,y]}function dW({committedValuesRef:e,eagerValuesRef:t,groupId:r,layout:i,panelDataArray:n,panelGroupElement:s,setLayout:a}){D.useRef({didWarnAboutMissingResizeHandle:!1}),Lh(()=>{if(!s)return;const o=D0(r,s);for(let u=0;u<n.length-1;u++){const{valueMax:d,valueMin:p,valueNow:v}=uW({layout:i,panelsArray:n,pivotIndices:[u,u+1]}),y=o[u];if(y!=null){const _=n[u];Or(_,`No panel data found for index "${u}"`),y.setAttribute("aria-controls",_.id),y.setAttribute("aria-valuemax",""+Math.round(d)),y.setAttribute("aria-valuemin",""+Math.round(p)),y.setAttribute("aria-valuenow",v!=null?""+Math.round(v):"")}}return()=>{o.forEach((u,d)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[r,i,n,s]),D.useEffect(()=>{if(!s)return;const o=t.current;Or(o,"Eager values not found");const{panelDataArray:u}=o,d=$3(r,s);Or(d!=null,`No group found for id "${r}"`);const p=D0(r,s);Or(p,`No resize handles found for group id "${r}"`);const v=p.map(y=>{const _=y.getAttribute(sn.resizeHandleId);Or(_,"Resize handle element has no handle id attribute");const[P,R]=hW(r,_,u,s);if(P==null||R==null)return()=>{};const M=F=>{if(!F.defaultPrevented)switch(F.key){case"Enter":{F.preventDefault();const k=u.findIndex(N=>N.id===P);if(k>=0){const N=u[k];Or(N,`No panel data found for index ${k}`);const G=i[k],{collapsedSize:j=0,collapsible:ee,minSize:q=0}=N.constraints;if(G!=null&&ee){const oe=Im({delta:Io(G,j)?q-j:j-G,initialLayout:i,panelConstraints:u.map(ue=>ue.constraints),pivotIndices:j3(r,_,s),prevLayout:i,trigger:"keyboard"});i!==oe&&a(oe)}}break}}};return y.addEventListener("keydown",M),()=>{y.removeEventListener("keydown",M)}});return()=>{v.forEach(y=>y())}},[s,e,t,r,i,n,a])}function ZA(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function q3(e,t){const r=e==="horizontal",{x:i,y:n}=m1(t);return r?i:n}function fW(e,t,r,i,n){const s=r==="horizontal",a=y1(t,n);Or(a,`No resize handle element found for id "${t}"`);const o=a.getAttribute(sn.groupId);Or(o,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=i;const d=q3(r,e),p=$3(o,n);Or(p,`No group element found for id "${o}"`);const v=p.getBoundingClientRect(),y=s?v.width:v.height;return(d-u)/y*100}function pW(e,t,r,i,n,s){if(L3(e)){const a=r==="horizontal";let o=0;e.shiftKey?o=100:n!=null?o=n:o=10;let u=0;switch(e.key){case"ArrowDown":u=a?0:o;break;case"ArrowLeft":u=a?-o:0;break;case"ArrowRight":u=a?o:0;break;case"ArrowUp":u=a?0:-o;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return i==null?0:fW(e,t,r,i,s)}function gW({panelDataArray:e}){const t=Array(e.length),r=e.map(s=>s.constraints);let i=0,n=100;for(let s=0;s<e.length;s++){const a=r[s];Or(a,`Panel constraints not found for index ${s}`);const{defaultSize:o}=a;o!=null&&(i++,t[s]=o,n-=o)}for(let s=0;s<e.length;s++){const a=r[s];Or(a,`Panel constraints not found for index ${s}`);const{defaultSize:o}=a;if(o!=null)continue;const u=e.length-i,d=n/u;i++,t[s]=d,n-=d}return t}function pf(e,t,r){t.forEach((i,n)=>{const s=e[n];Or(s,`Panel data not found for index ${n}`);const{callbacks:a,constraints:o,id:u}=s,{collapsedSize:d=0,collapsible:p}=o,v=r[u];if(v==null||i!==v){r[u]=i;const{onCollapse:y,onExpand:_,onResize:P}=a;P&&P(i,v),p&&(y||_)&&(_&&(v==null||nc(v,d))&&!nc(i,d)&&_(),y&&(v==null||!nc(v,d))&&nc(i,d)&&y())}})}function uw(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function mW({defaultSize:e,dragState:t,layout:r,panelData:i,panelIndex:n,precision:s=3}){const a=r[n];let o;return a==null?o=e!=null?e.toPrecision(s):"1":i.length===1?o="1":o=a.toPrecision(s),{flexBasis:0,flexGrow:o,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function vW(e,t=10){let r=null;return(...n)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{e(...n)},t)}}function XA(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,r)=>{localStorage.setItem(t,r)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function K3(e){return`react-resizable-panels:${e}`}function Z3(e){return e.map(t=>{const{constraints:r,id:i,idIsFromProps:n,order:s}=t;return n?i:s?`${s}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((t,r)=>t.localeCompare(r)).join(",")}function X3(e,t){try{const r=K3(e),i=t.getItem(r);if(i){const n=JSON.parse(i);if(typeof n=="object"&&n!=null)return n}}catch{}return null}function yW(e,t,r){var i,n;const s=(i=X3(e,r))!==null&&i!==void 0?i:{},a=Z3(t);return(n=s[a])!==null&&n!==void 0?n:null}function wW(e,t,r,i,n){var s;const a=K3(e),o=Z3(t),u=(s=X3(e,n))!==null&&s!==void 0?s:{};u[o]={expandToSizes:Object.fromEntries(r.entries()),layout:i};try{n.setItem(a,JSON.stringify(u))}catch(d){console.error(d)}}function YA({layout:e,panelConstraints:t}){const r=[...e],i=r.reduce((s,a)=>s+a,0);if(r.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${r.map(s=>`${s}%`).join(", ")}`);if(!Io(i,100)&&r.length>0)for(let s=0;s<t.length;s++){const a=r[s];Or(a!=null,`No layout data found for index ${s}`);const o=100/i*a;r[s]=o}let n=0;for(let s=0;s<t.length;s++){const a=r[s];Or(a!=null,`No layout data found for index ${s}`);const o=Vf({panelConstraints:t,panelIndex:s,size:a});a!=o&&(n+=a-o,r[s]=o)}if(!Io(n,0))for(let s=0;s<t.length;s++){const a=r[s];Or(a!=null,`No layout data found for index ${s}`);const o=a+n,u=Vf({panelConstraints:t,panelIndex:s,size:o});if(a!==u&&(n-=u-a,r[s]=u,Io(n,0)))break}return r}const xW=100,Dm={getItem:e=>(XA(Dm),Dm.getItem(e)),setItem:(e,t)=>{XA(Dm),Dm.setItem(e,t)}},QA={};function Y3({autoSaveId:e=null,children:t,className:r="",direction:i,forwardedRef:n,id:s=null,onLayout:a=null,keyboardResizeBy:o=null,storage:u=Dm,style:d,tagName:p="div",...v}){const y=KR(s),_=D.useRef(null),[P,R]=D.useState(null),[M,F]=D.useState([]),k=lW(),N=D.useRef({}),G=D.useRef(new Map),j=D.useRef(0),ee=D.useRef({autoSaveId:e,direction:i,dragState:P,id:y,keyboardResizeBy:o,onLayout:a,storage:u}),q=D.useRef({layout:M,panelDataArray:[],panelDataArrayChanged:!1});D.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),D.useImperativeHandle(n,()=>({getId:()=>ee.current.id,getLayout:()=>{const{layout:he}=q.current;return he},setLayout:he=>{const{onLayout:ve}=ee.current,{layout:_e,panelDataArray:Fe}=q.current,qe=YA({layout:he,panelConstraints:Fe.map(at=>at.constraints)});ZA(_e,qe)||(F(qe),q.current.layout=qe,ve&&ve(qe),pf(Fe,qe,N.current))}}),[]),Lh(()=>{ee.current.autoSaveId=e,ee.current.direction=i,ee.current.dragState=P,ee.current.id=y,ee.current.onLayout=a,ee.current.storage=u}),dW({committedValuesRef:ee,eagerValuesRef:q,groupId:y,layout:M,panelDataArray:q.current.panelDataArray,setLayout:F,panelGroupElement:_.current}),D.useEffect(()=>{const{panelDataArray:he}=q.current;if(e){if(M.length===0||M.length!==he.length)return;let ve=QA[e];ve==null&&(ve=vW(wW,xW),QA[e]=ve);const _e=[...he],Fe=new Map(G.current);ve(e,_e,Fe,M,u)}},[e,M,u]),D.useEffect(()=>{});const oe=D.useCallback(he=>{const{onLayout:ve}=ee.current,{layout:_e,panelDataArray:Fe}=q.current;if(he.constraints.collapsible){const qe=Fe.map(Lt=>Lt.constraints),{collapsedSize:at=0,panelSize:ot,pivotIndices:Qe}=wh(Fe,he,_e);if(Or(ot!=null,`Panel size not found for panel "${he.id}"`),!nc(ot,at)){G.current.set(he.id,ot);const Ot=Sf(Fe,he)===Fe.length-1?ot-at:at-ot,er=Im({delta:Ot,initialLayout:_e,panelConstraints:qe,pivotIndices:Qe,prevLayout:_e,trigger:"imperative-api"});uw(_e,er)||(F(er),q.current.layout=er,ve&&ve(er),pf(Fe,er,N.current))}}},[]),ue=D.useCallback((he,ve)=>{const{onLayout:_e}=ee.current,{layout:Fe,panelDataArray:qe}=q.current;if(he.constraints.collapsible){const at=qe.map(Yt=>Yt.constraints),{collapsedSize:ot=0,panelSize:Qe=0,minSize:Lt=0,pivotIndices:Ot}=wh(qe,he,Fe),er=ve??Lt;if(nc(Qe,ot)){const Yt=G.current.get(he.id),Qt=Yt!=null&&Yt>=er?Yt:er,Et=Sf(qe,he)===qe.length-1?Qe-Qt:Qt-Qe,hr=Im({delta:Et,initialLayout:Fe,panelConstraints:at,pivotIndices:Ot,prevLayout:Fe,trigger:"imperative-api"});uw(Fe,hr)||(F(hr),q.current.layout=hr,_e&&_e(hr),pf(qe,hr,N.current))}}},[]),me=D.useCallback(he=>{const{layout:ve,panelDataArray:_e}=q.current,{panelSize:Fe}=wh(_e,he,ve);return Or(Fe!=null,`Panel size not found for panel "${he.id}"`),Fe},[]),ie=D.useCallback((he,ve)=>{const{panelDataArray:_e}=q.current,Fe=Sf(_e,he);return mW({defaultSize:ve,dragState:P,layout:M,panelData:_e,panelIndex:Fe})},[P,M]),fe=D.useCallback(he=>{const{layout:ve,panelDataArray:_e}=q.current,{collapsedSize:Fe=0,collapsible:qe,panelSize:at}=wh(_e,he,ve);return Or(at!=null,`Panel size not found for panel "${he.id}"`),qe===!0&&nc(at,Fe)},[]),ke=D.useCallback(he=>{const{layout:ve,panelDataArray:_e}=q.current,{collapsedSize:Fe=0,collapsible:qe,panelSize:at}=wh(_e,he,ve);return Or(at!=null,`Panel size not found for panel "${he.id}"`),!qe||Xh(at,Fe)>0},[]),et=D.useCallback(he=>{const{panelDataArray:ve}=q.current;ve.push(he),ve.sort((_e,Fe)=>{const qe=_e.order,at=Fe.order;return qe==null&&at==null?0:qe==null?-1:at==null?1:qe-at}),q.current.panelDataArrayChanged=!0,k()},[k]);Lh(()=>{if(q.current.panelDataArrayChanged){q.current.panelDataArrayChanged=!1;const{autoSaveId:he,onLayout:ve,storage:_e}=ee.current,{layout:Fe,panelDataArray:qe}=q.current;let at=null;if(he){const Qe=yW(he,qe,_e);Qe&&(G.current=new Map(Object.entries(Qe.expandToSizes)),at=Qe.layout)}at==null&&(at=gW({panelDataArray:qe}));const ot=YA({layout:at,panelConstraints:qe.map(Qe=>Qe.constraints)});ZA(Fe,ot)||(F(ot),q.current.layout=ot,ve&&ve(ot),pf(qe,ot,N.current))}}),Lh(()=>{const he=q.current;return()=>{he.layout=[]}},[]);const Xe=D.useCallback(he=>{let ve=!1;const _e=_.current;return _e&&window.getComputedStyle(_e,null).getPropertyValue("direction")==="rtl"&&(ve=!0),function(qe){qe.preventDefault();const at=_.current;if(!at)return()=>null;const{direction:ot,dragState:Qe,id:Lt,keyboardResizeBy:Ot,onLayout:er}=ee.current,{layout:Yt,panelDataArray:Qt}=q.current,{initialLayout:qt}=Qe??{},Et=j3(Lt,he,at);let hr=pW(qe,he,ot,Qe,Ot,at);const rr=ot==="horizontal";rr&&ve&&(hr=-hr);const Ke=Qt.map(vr=>vr.constraints),Jt=Im({delta:hr,initialLayout:qt??Yt,panelConstraints:Ke,pivotIndices:Et,prevLayout:Yt,trigger:L3(qe)?"keyboard":"mouse-or-touch"}),Nr=!uw(Yt,Jt);(O3(qe)||N3(qe))&&j.current!=hr&&(j.current=hr,!Nr&&hr!==0?rr?zb(he,hr<0?z3:G3):zb(he,hr<0?V3:H3):zb(he,0)),Nr&&(F(Jt),q.current.layout=Jt,er&&er(Jt),pf(Qt,Jt,N.current))}},[]),ct=D.useCallback((he,ve)=>{const{onLayout:_e}=ee.current,{layout:Fe,panelDataArray:qe}=q.current,at=qe.map(Yt=>Yt.constraints),{panelSize:ot,pivotIndices:Qe}=wh(qe,he,Fe);Or(ot!=null,`Panel size not found for panel "${he.id}"`);const Ot=Sf(qe,he)===qe.length-1?ot-ve:ve-ot,er=Im({delta:Ot,initialLayout:Fe,panelConstraints:at,pivotIndices:Qe,prevLayout:Fe,trigger:"imperative-api"});uw(Fe,er)||(F(er),q.current.layout=er,_e&&_e(er),pf(qe,er,N.current))},[]),pt=D.useCallback((he,ve)=>{const{layout:_e,panelDataArray:Fe}=q.current,{collapsedSize:qe=0,collapsible:at}=ve,{collapsedSize:ot=0,collapsible:Qe,maxSize:Lt=100,minSize:Ot=0}=he.constraints,{panelSize:er}=wh(Fe,he,_e);er!=null&&(at&&Qe&&nc(er,qe)?nc(qe,ot)||ct(he,ot):er<Ot?ct(he,Ot):er>Lt&&ct(he,Lt))},[ct]),Ge=D.useCallback((he,ve)=>{const{direction:_e}=ee.current,{layout:Fe}=q.current;if(!_.current)return;const qe=y1(he,_.current);Or(qe,`Drag handle element not found for id "${he}"`);const at=q3(_e,ve);R({dragHandleId:he,dragHandleRect:qe.getBoundingClientRect(),initialCursorPosition:at,initialLayout:Fe})},[]),Ye=D.useCallback(()=>{R(null)},[]),ht=D.useCallback(he=>{const{panelDataArray:ve}=q.current,_e=Sf(ve,he);_e>=0&&(ve.splice(_e,1),delete N.current[he.id],q.current.panelDataArrayChanged=!0,k())},[k]),Be=D.useMemo(()=>({collapsePanel:oe,direction:i,dragState:P,expandPanel:ue,getPanelSize:me,getPanelStyle:ie,groupId:y,isPanelCollapsed:fe,isPanelExpanded:ke,reevaluatePanelConstraints:pt,registerPanel:et,registerResizeHandle:Xe,resizePanel:ct,startDragging:Ge,stopDragging:Ye,unregisterPanel:ht,panelGroupElement:_.current}),[oe,P,i,ue,me,ie,y,fe,ke,pt,et,Xe,ct,Ge,Ye,ht]),ce={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return D.createElement(g1.Provider,{value:Be},D.createElement(p,{...v,children:t,className:r,id:s,ref:_,style:{...ce,...d},[sn.group]:"",[sn.groupDirection]:i,[sn.groupId]:y}))}const YR=D.forwardRef((e,t)=>D.createElement(Y3,{...e,forwardedRef:t}));Y3.displayName="PanelGroup";YR.displayName="forwardRef(PanelGroup)";function Sf(e,t){return e.findIndex(r=>r===t||r.id===t.id)}function wh(e,t,r){const i=Sf(e,t),s=i===e.length-1?[i-1,i]:[i,i+1],a=r[i];return{...t.constraints,panelSize:a,pivotIndices:s}}function CW({disabled:e,handleId:t,resizeHandler:r,panelGroupElement:i}){D.useEffect(()=>{if(e||r==null||i==null)return;const n=y1(t,i);if(n==null)return;const s=a=>{if(!a.defaultPrevented)switch(a.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{a.preventDefault(),r(a);break}case"F6":{a.preventDefault();const o=n.getAttribute(sn.groupId);Or(o,`No group element found for id "${o}"`);const u=D0(o,i),d=W3(o,t,i);Or(d!==null,`No resize element found for id "${t}"`);const p=a.shiftKey?d>0?d-1:u.length-1:d+1<u.length?d+1:0;u[p].focus();break}}};return n.addEventListener("keydown",s),()=>{n.removeEventListener("keydown",s)}},[i,e,t,r])}function eC({children:e=null,className:t="",disabled:r=!1,hitAreaMargins:i,id:n,onBlur:s,onClick:a,onDragging:o,onFocus:u,onPointerDown:d,onPointerUp:p,style:v={},tabIndex:y=0,tagName:_="div",...P}){var R,M;const F=D.useRef(null),k=D.useRef({onClick:a,onDragging:o,onPointerDown:d,onPointerUp:p});D.useEffect(()=>{k.current.onClick=a,k.current.onDragging=o,k.current.onPointerDown=d,k.current.onPointerUp=p});const N=D.useContext(g1);if(N===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:G,groupId:j,registerResizeHandle:ee,startDragging:q,stopDragging:oe,panelGroupElement:ue}=N,me=KR(n),[ie,fe]=D.useState("inactive"),[ke,et]=D.useState(!1),[Xe,ct]=D.useState(null),pt=D.useRef({state:ie});Lh(()=>{pt.current.state=ie}),D.useEffect(()=>{if(r)ct(null);else{const Be=ee(me);ct(()=>Be)}},[r,me,ee]);const Ge=(R=i==null?void 0:i.coarse)!==null&&R!==void 0?R:15,Ye=(M=i==null?void 0:i.fine)!==null&&M!==void 0?M:5;D.useEffect(()=>{if(r||Xe==null)return;const Be=F.current;Or(Be,"Element ref not attached");let ce=!1;return oW(me,Be,G,{coarse:Ge,fine:Ye},(ve,_e,Fe)=>{if(!_e){fe("inactive");return}switch(ve){case"down":{fe("drag"),ce=!1,Or(Fe,'Expected event to be defined for "down" action'),q(me,Fe);const{onDragging:qe,onPointerDown:at}=k.current;qe==null||qe(!0),at==null||at();break}case"move":{const{state:qe}=pt.current;ce=!0,qe!=="drag"&&fe("hover"),Or(Fe,'Expected event to be defined for "move" action'),Xe(Fe);break}case"up":{fe("hover"),oe();const{onClick:qe,onDragging:at,onPointerUp:ot}=k.current;at==null||at(!1),ot==null||ot(),ce||qe==null||qe();break}}})},[Ge,G,r,Ye,ee,me,Xe,q,oe]),CW({disabled:r,handleId:me,resizeHandler:Xe,panelGroupElement:ue});const ht={touchAction:"none",userSelect:"none"};return D.createElement(_,{...P,children:e,className:t,id:n,onBlur:()=>{et(!1),s==null||s()},onFocus:()=>{et(!0),u==null||u()},ref:F,role:"separator",style:{...ht,...v},tabIndex:y,[sn.groupDirection]:G,[sn.groupId]:j,[sn.resizeHandle]:"",[sn.resizeHandleActive]:ie==="drag"?"pointer":ke?"keyboard":void 0,[sn.resizeHandleEnabled]:!r,[sn.resizeHandleId]:me,[sn.resizeHandleState]:ie})}eC.displayName="PanelResizeHandle";function JA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function QR(...e){return t=>{let r=!1;const i=e.map(n=>{const s=JA(n,t);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let n=0;n<i.length;n++){const s=i[n];typeof s=="function"?s():JA(e[n],null)}}}}function Vi(...e){return D.useCallback(QR(...e),e)}function Ap(e){const t=bW(e),r=D.forwardRef((i,n)=>{const{children:s,...a}=i,o=D.Children.toArray(s),u=o.find(EW);if(u){const d=u.props.children,p=o.map(v=>v===u?D.Children.count(d)>1?D.Children.only(null):D.isValidElement(d)?d.props.children:null:v);return V.jsx(t,{...a,ref:n,children:D.isValidElement(d)?D.cloneElement(d,void 0,p):null})}return V.jsx(t,{...a,ref:n,children:s})});return r.displayName=`${e}.Slot`,r}var _W=Ap("Slot");function bW(e){const t=D.forwardRef((r,i)=>{const{children:n,...s}=r;if(D.isValidElement(n)){const a=TW(n),o=RW(s,n.props);return n.type!==D.Fragment&&(o.ref=i?QR(i,a):a),D.cloneElement(n,o)}return D.Children.count(n)>1?D.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Q3=Symbol("radix.slottable");function SW(e){const t=({children:r})=>V.jsx(V.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=Q3,t}function EW(e){return D.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Q3}function RW(e,t){const r={...t};for(const i in t){const n=e[i],s=t[i];/^on[A-Z]/.test(i)?n&&s?r[i]=(...o)=>{const u=s(...o);return n(...o),u}:n&&(r[i]=n):i==="style"?r[i]={...n,...s}:i==="className"&&(r[i]=[n,s].filter(Boolean).join(" "))}return{...e,...r}}function TW(e){var i,n;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function J3(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=J3(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function eO(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=J3(e))&&(i&&(i+=" "),i+=t);return i}const eI=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,tI=eO,PW=(e,t)=>r=>{var i;if((t==null?void 0:t.variants)==null)return tI(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:s}=t,a=Object.keys(n).map(d=>{const p=r==null?void 0:r[d],v=s==null?void 0:s[d];if(p===null)return null;const y=eI(p)||eI(v);return n[d][y]}),o=r&&Object.entries(r).reduce((d,p)=>{let[v,y]=p;return y===void 0||(d[v]=y),d},{}),u=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((d,p)=>{let{class:v,className:y,..._}=p;return Object.entries(_).every(P=>{let[R,M]=P;return Array.isArray(M)?M.includes({...s,...o}[R]):{...s,...o}[R]===M})?[...d,v,y]:d},[]);return tI(e,a,u,r==null?void 0:r.class,r==null?void 0:r.className)},JR="-",MW=e=>{const t=AW(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:a=>{const o=a.split(JR);return o[0]===""&&o.length!==1&&o.shift(),tO(o,t)||FW(a)},getConflictingClassGroupIds:(a,o)=>{const u=r[a]||[];return o&&i[a]?[...u,...i[a]]:u}}},tO=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),n=i?tO(e.slice(1),i):void 0;if(n)return n;if(t.validators.length===0)return;const s=e.join(JR);return(a=t.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},rI=/^\[(.+)\]$/,FW=e=>{if(rI.test(e)){const t=rI.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},AW=e=>{const{theme:t,prefix:r}=e,i={nextPart:new Map,validators:[]};return DW(Object.entries(e.classGroups),r).forEach(([s,a])=>{$E(a,i,s,t)}),i},$E=(e,t,r,i)=>{e.forEach(n=>{if(typeof n=="string"){const s=n===""?t:iI(t,n);s.classGroupId=r;return}if(typeof n=="function"){if(IW(n)){$E(n(i),t,r,i);return}t.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([s,a])=>{$E(a,iI(t,s),r,i)})})},iI=(e,t)=>{let r=e;return t.split(JR).forEach(i=>{r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r},IW=e=>e.isThemeGetter,DW=(e,t)=>t?e.map(([r,i])=>{const n=i.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,o])=>[t+a,o])):s);return[r,n]}):e,kW=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,i=new Map;const n=(s,a)=>{r.set(s,a),t++,t>e&&(t=0,i=r,r=new Map)};return{get(s){let a=r.get(s);if(a!==void 0)return a;if((a=i.get(s))!==void 0)return n(s,a),a},set(s,a){r.has(s)?r.set(s,a):n(s,a)}}},rO="!",LW=e=>{const{separator:t,experimentalParseClassName:r}=e,i=t.length===1,n=t[0],s=t.length,a=o=>{const u=[];let d=0,p=0,v;for(let M=0;M<o.length;M++){let F=o[M];if(d===0){if(F===n&&(i||o.slice(M,M+s)===t)){u.push(o.slice(p,M)),p=M+s;continue}if(F==="/"){v=M;continue}}F==="["?d++:F==="]"&&d--}const y=u.length===0?o:o.substring(p),_=y.startsWith(rO),P=_?y.substring(1):y,R=v&&v>p?v-p:void 0;return{modifiers:u,hasImportantModifier:_,baseClassName:P,maybePostfixModifierPosition:R}};return r?o=>r({className:o,parseClassName:a}):a},OW=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(i=>{i[0]==="["?(t.push(...r.sort(),i),r=[]):r.push(i)}),t.push(...r.sort()),t},NW=e=>({cache:kW(e.cacheSize),parseClassName:LW(e),...MW(e)}),BW=/\s+/,zW=(e,t)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:n}=t,s=[],a=e.trim().split(BW);let o="";for(let u=a.length-1;u>=0;u-=1){const d=a[u],{modifiers:p,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:_}=r(d);let P=!!_,R=i(P?y.substring(0,_):y);if(!R){if(!P){o=d+(o.length>0?" "+o:o);continue}if(R=i(y),!R){o=d+(o.length>0?" "+o:o);continue}P=!1}const M=OW(p).join(":"),F=v?M+rO:M,k=F+R;if(s.includes(k))continue;s.push(k);const N=n(R,P);for(let G=0;G<N.length;++G){const j=N[G];s.push(F+j)}o=d+(o.length>0?" "+o:o)}return o};function GW(){let e=0,t,r,i="";for(;e<arguments.length;)(t=arguments[e++])&&(r=iO(t))&&(i&&(i+=" "),i+=r);return i}const iO=e=>{if(typeof e=="string")return e;let t,r="";for(let i=0;i<e.length;i++)e[i]&&(t=iO(e[i]))&&(r&&(r+=" "),r+=t);return r};function VW(e,...t){let r,i,n,s=a;function a(u){const d=t.reduce((p,v)=>v(p),e());return r=NW(d),i=r.cache.get,n=r.cache.set,s=o,o(u)}function o(u){const d=i(u);if(d)return d;const p=zW(u,r);return n(u,p),p}return function(){return s(GW.apply(null,arguments))}}const Fi=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},nO=/^\[(?:([a-z-]+):)?(.+)\]$/i,HW=/^\d+\/\d+$/,UW=new Set(["px","full","screen"]),WW=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jW=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$W=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,qW=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,KW=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ec=e=>ip(e)||UW.has(e)||HW.test(e),Qc=e=>$p(e,"length",rj),ip=e=>!!e&&!Number.isNaN(Number(e)),Vb=e=>$p(e,"number",ip),wm=e=>!!e&&Number.isInteger(Number(e)),ZW=e=>e.endsWith("%")&&ip(e.slice(0,-1)),Ar=e=>nO.test(e),Jc=e=>WW.test(e),XW=new Set(["length","size","percentage"]),YW=e=>$p(e,XW,sO),QW=e=>$p(e,"position",sO),JW=new Set(["image","url"]),ej=e=>$p(e,JW,nj),tj=e=>$p(e,"",ij),xm=()=>!0,$p=(e,t,r)=>{const i=nO.exec(e);return i?i[1]?typeof t=="string"?i[1]===t:t.has(i[1]):r(i[2]):!1},rj=e=>jW.test(e)&&!$W.test(e),sO=()=>!1,ij=e=>qW.test(e),nj=e=>KW.test(e),sj=()=>{const e=Fi("colors"),t=Fi("spacing"),r=Fi("blur"),i=Fi("brightness"),n=Fi("borderColor"),s=Fi("borderRadius"),a=Fi("borderSpacing"),o=Fi("borderWidth"),u=Fi("contrast"),d=Fi("grayscale"),p=Fi("hueRotate"),v=Fi("invert"),y=Fi("gap"),_=Fi("gradientColorStops"),P=Fi("gradientColorStopPositions"),R=Fi("inset"),M=Fi("margin"),F=Fi("opacity"),k=Fi("padding"),N=Fi("saturate"),G=Fi("scale"),j=Fi("sepia"),ee=Fi("skew"),q=Fi("space"),oe=Fi("translate"),ue=()=>["auto","contain","none"],me=()=>["auto","hidden","clip","visible","scroll"],ie=()=>["auto",Ar,t],fe=()=>[Ar,t],ke=()=>["",ec,Qc],et=()=>["auto",ip,Ar],Xe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ct=()=>["solid","dashed","dotted","double","none"],pt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ge=()=>["start","end","center","between","around","evenly","stretch"],Ye=()=>["","0",Ar],ht=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Be=()=>[ip,Ar];return{cacheSize:500,separator:":",theme:{colors:[xm],spacing:[ec,Qc],blur:["none","",Jc,Ar],brightness:Be(),borderColor:[e],borderRadius:["none","","full",Jc,Ar],borderSpacing:fe(),borderWidth:ke(),contrast:Be(),grayscale:Ye(),hueRotate:Be(),invert:Ye(),gap:fe(),gradientColorStops:[e],gradientColorStopPositions:[ZW,Qc],inset:ie(),margin:ie(),opacity:Be(),padding:fe(),saturate:Be(),scale:Be(),sepia:Ye(),skew:Be(),space:fe(),translate:fe()},classGroups:{aspect:[{aspect:["auto","square","video",Ar]}],container:["container"],columns:[{columns:[Jc]}],"break-after":[{"break-after":ht()}],"break-before":[{"break-before":ht()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Xe(),Ar]}],overflow:[{overflow:me()}],"overflow-x":[{"overflow-x":me()}],"overflow-y":[{"overflow-y":me()}],overscroll:[{overscroll:ue()}],"overscroll-x":[{"overscroll-x":ue()}],"overscroll-y":[{"overscroll-y":ue()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[R]}],"inset-x":[{"inset-x":[R]}],"inset-y":[{"inset-y":[R]}],start:[{start:[R]}],end:[{end:[R]}],top:[{top:[R]}],right:[{right:[R]}],bottom:[{bottom:[R]}],left:[{left:[R]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wm,Ar]}],basis:[{basis:ie()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ar]}],grow:[{grow:Ye()}],shrink:[{shrink:Ye()}],order:[{order:["first","last","none",wm,Ar]}],"grid-cols":[{"grid-cols":[xm]}],"col-start-end":[{col:["auto",{span:["full",wm,Ar]},Ar]}],"col-start":[{"col-start":et()}],"col-end":[{"col-end":et()}],"grid-rows":[{"grid-rows":[xm]}],"row-start-end":[{row:["auto",{span:[wm,Ar]},Ar]}],"row-start":[{"row-start":et()}],"row-end":[{"row-end":et()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ar]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ar]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...Ge()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ge(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ge(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[M]}],mx:[{mx:[M]}],my:[{my:[M]}],ms:[{ms:[M]}],me:[{me:[M]}],mt:[{mt:[M]}],mr:[{mr:[M]}],mb:[{mb:[M]}],ml:[{ml:[M]}],"space-x":[{"space-x":[q]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[q]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ar,t]}],"min-w":[{"min-w":[Ar,t,"min","max","fit"]}],"max-w":[{"max-w":[Ar,t,"none","full","min","max","fit","prose",{screen:[Jc]},Jc]}],h:[{h:[Ar,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ar,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ar,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ar,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Jc,Qc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vb]}],"font-family":[{font:[xm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ar]}],"line-clamp":[{"line-clamp":["none",ip,Vb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ec,Ar]}],"list-image":[{"list-image":["none",Ar]}],"list-style-type":[{list:["none","disc","decimal",Ar]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[F]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[F]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ct(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ec,Qc]}],"underline-offset":[{"underline-offset":["auto",ec,Ar]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:fe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ar]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ar]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[F]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Xe(),QW]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",YW]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ej]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[P]}],"gradient-via-pos":[{via:[P]}],"gradient-to-pos":[{to:[P]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[F]}],"border-style":[{border:[...ct(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[F]}],"divide-style":[{divide:ct()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...ct()]}],"outline-offset":[{"outline-offset":[ec,Ar]}],"outline-w":[{outline:[ec,Qc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ke()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[F]}],"ring-offset-w":[{"ring-offset":[ec,Qc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Jc,tj]}],"shadow-color":[{shadow:[xm]}],opacity:[{opacity:[F]}],"mix-blend":[{"mix-blend":[...pt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":pt()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Jc,Ar]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[v]}],saturate:[{saturate:[N]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[F]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ar]}],duration:[{duration:Be()}],ease:[{ease:["linear","in","out","in-out",Ar]}],delay:[{delay:Be()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ar]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[G]}],"scale-x":[{"scale-x":[G]}],"scale-y":[{"scale-y":[G]}],rotate:[{rotate:[wm,Ar]}],"translate-x":[{"translate-x":[oe]}],"translate-y":[{"translate-y":[oe]}],"skew-x":[{"skew-x":[ee]}],"skew-y":[{"skew-y":[ee]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ar]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ar]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":fe()}],"scroll-mx":[{"scroll-mx":fe()}],"scroll-my":[{"scroll-my":fe()}],"scroll-ms":[{"scroll-ms":fe()}],"scroll-me":[{"scroll-me":fe()}],"scroll-mt":[{"scroll-mt":fe()}],"scroll-mr":[{"scroll-mr":fe()}],"scroll-mb":[{"scroll-mb":fe()}],"scroll-ml":[{"scroll-ml":fe()}],"scroll-p":[{"scroll-p":fe()}],"scroll-px":[{"scroll-px":fe()}],"scroll-py":[{"scroll-py":fe()}],"scroll-ps":[{"scroll-ps":fe()}],"scroll-pe":[{"scroll-pe":fe()}],"scroll-pt":[{"scroll-pt":fe()}],"scroll-pr":[{"scroll-pr":fe()}],"scroll-pb":[{"scroll-pb":fe()}],"scroll-pl":[{"scroll-pl":fe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ar]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ec,Qc,Vb]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oj=VW(sj);function Xi(...e){return oj(eO(e))}const aj=PW("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),gi=D.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...n},s)=>{const a=i?_W:"button";return V.jsx(a,{className:Xi(aj({variant:t,size:r,className:e})),ref:s,...n})});gi.displayName="Button";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oO=(...e)=>e.filter((t,r,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=D.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:n="",children:s,iconNode:a,...o},u)=>D.createElement("svg",{ref:u,...cj,width:t,height:t,stroke:e,strokeWidth:i?Number(r)*24/Number(t):r,className:oO("lucide",n),...o},[...a.map(([d,p])=>D.createElement(d,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=(e,t)=>{const r=D.forwardRef(({className:i,...n},s)=>D.createElement(uj,{ref:s,iconNode:t,className:oO(`lucide-${lj(e)}`,i),...n}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=ki("BookDashed",[["path",{d:"M12 17h2",key:"13u4lk"}],["path",{d:"M12 22h2",key:"kn7ki6"}],["path",{d:"M12 2h2",key:"cvn524"}],["path",{d:"M18 22h1a1 1 0 0 0 1-1",key:"w6gbqz"}],["path",{d:"M18 2h1a1 1 0 0 1 1 1v1",key:"1vpra5"}],["path",{d:"M20 15v2h-2",key:"fph276"}],["path",{d:"M20 8v3",key:"deu0bs"}],["path",{d:"M4 11V9",key:"v3xsx8"}],["path",{d:"M4 19.5V15",key:"6gr39e"}],["path",{d:"M4 5v-.5A2.5 2.5 0 0 1 6.5 2H8",key:"wywhs9"}],["path",{d:"M8 22H6.5a1 1 0 0 1 0-5H8",key:"1cu73q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=ki("BookKey",[["path",{d:"m19 3 1 1",key:"ze14oc"}],["path",{d:"m20 2-4.5 4.5",key:"1sppr8"}],["path",{d:"M20 8v13a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"1ocbpn"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H14",key:"1gfsgw"}],["circle",{cx:"14",cy:"8",r:"2",key:"u49eql"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=ki("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=ki("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=ki("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=ki("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=ki("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=ki("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=ki("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=ki("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=ki("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=ki("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=ki("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=ki("Layers2",[["path",{d:"m16.02 12 5.48 3.13a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74L7.98 12",key:"1cuww1"}],["path",{d:"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74Z",key:"pdlvxu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=ki("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=ki("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=ki("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=ki("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=ki("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=ki("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=ki("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=ki("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=ki("TableProperties",[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=ki("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=ki("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function Rj({theme:e,onThemeChange:t}){return V.jsx("header",{className:"sticky top-0 z-10 border-b bg-background/90 backdrop-blur h-14",children:V.jsxs("div",{className:"mx-auto max-w-7xl px-4 h-full flex items-center justify-between",children:[V.jsx("h1",{className:"text-lg font-semibold",children:"gdx2map"}),V.jsx("div",{className:"flex items-center gap-2",children:V.jsx(gi,{variant:"outline",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),children:e==="light"?V.jsx(wj,{className:"w-4 h-4"}):V.jsx(_j,{className:"w-4 h-4"})})})]})})}var lO={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(b7,function(){var r,i,n;function s(o,u){if(!r)r=u;else if(!i)i=u;else{var d="var sharedChunk = {}; ("+r+")(sharedChunk); ("+i+")(sharedChunk);",p={};r(p),n=u(p),typeof window<"u"&&(n.workerUrl=window.URL.createObjectURL(new Blob([d],{type:"text/javascript"})))}}s(["exports"],function(o){function u(h,l,f,m){return new(f||(f=Promise))(function(x,E){function T(z){try{O(m.next(z))}catch(U){E(U)}}function A(z){try{O(m.throw(z))}catch(U){E(U)}}function O(z){var U;z.done?x(z.value):(U=z.value,U instanceof f?U:new f(function(Z){Z(U)})).then(T,A)}O((m=m.apply(h,l||[])).next())})}function d(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}typeof SuppressedError=="function"&&SuppressedError;var p=v;function v(h,l){this.x=h,this.y=l}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(h){return this.clone()._add(h)},sub:function(h){return this.clone()._sub(h)},multByPoint:function(h){return this.clone()._multByPoint(h)},divByPoint:function(h){return this.clone()._divByPoint(h)},mult:function(h){return this.clone()._mult(h)},div:function(h){return this.clone()._div(h)},rotate:function(h){return this.clone()._rotate(h)},rotateAround:function(h,l){return this.clone()._rotateAround(h,l)},matMult:function(h){return this.clone()._matMult(h)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(h){return this.x===h.x&&this.y===h.y},dist:function(h){return Math.sqrt(this.distSqr(h))},distSqr:function(h){var l=h.x-this.x,f=h.y-this.y;return l*l+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith:function(h){return this.angleWithSep(h.x,h.y)},angleWithSep:function(h,l){return Math.atan2(this.x*l-this.y*h,this.x*h+this.y*l)},_matMult:function(h){var l=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=l,this},_add:function(h){return this.x+=h.x,this.y+=h.y,this},_sub:function(h){return this.x-=h.x,this.y-=h.y,this},_mult:function(h){return this.x*=h,this.y*=h,this},_div:function(h){return this.x/=h,this.y/=h,this},_multByPoint:function(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint:function(h){return this.x/=h.x,this.y/=h.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var h=this.y;return this.y=this.x,this.x=-h,this},_rotate:function(h){var l=Math.cos(h),f=Math.sin(h),m=f*this.x+l*this.y;return this.x=l*this.x-f*this.y,this.y=m,this},_rotateAround:function(h,l){var f=Math.cos(h),m=Math.sin(h),x=l.y+m*(this.x-l.x)+f*(this.y-l.y);return this.x=l.x+f*(this.x-l.x)-m*(this.y-l.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(h){return h instanceof v?h:Array.isArray(h)?new v(h[0],h[1]):h};var y=d(p),_=P;function P(h,l,f,m){this.cx=3*h,this.bx=3*(f-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=l,this.p2x=f,this.p2y=m}P.prototype={sampleCurveX:function(h){return((this.ax*h+this.bx)*h+this.cx)*h},sampleCurveY:function(h){return((this.ay*h+this.by)*h+this.cy)*h},sampleCurveDerivativeX:function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},solveCurveX:function(h,l){if(l===void 0&&(l=1e-6),h<0)return 0;if(h>1)return 1;for(var f=h,m=0;m<8;m++){var x=this.sampleCurveX(f)-h;if(Math.abs(x)<l)return f;var E=this.sampleCurveDerivativeX(f);if(Math.abs(E)<1e-6)break;f-=x/E}var T=0,A=1;for(f=h,m=0;m<20&&(x=this.sampleCurveX(f),!(Math.abs(x-h)<l));m++)h>x?T=f:A=f,f=.5*(A-T)+T;return f},solve:function(h,l){return this.sampleCurveY(this.solveCurveX(h,l))}};var R=d(_);let M,F;function k(){return M==null&&(M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),M}function N(){if(F==null&&(F=!1,k())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let m=0;m<5*5;m++){const x=4*m;l.fillStyle=`rgb(${x},${x+1},${x+2})`,l.fillRect(m%5,Math.floor(m/5),1,1)}const f=l.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&f[m]!==m){F=!0;break}}}return F||!1}function G(h,l,f,m){const x=new R(h,l,f,m);return function(E){return x.solve(E)}}const j=G(.25,.1,.25,1);function ee(h,l,f){return Math.min(f,Math.max(l,h))}function q(h,l,f){const m=f-l,x=((h-l)%m+m)%m+l;return x===l?f:x}function oe(h,...l){for(const f of l)for(const m in f)h[m]=f[m];return h}let ue=1;function me(h,l,f){const m={};for(const x in h)m[x]=l.call(f||this,h[x],x,h);return m}function ie(h,l,f){const m={};for(const x in h)l.call(f||this,h[x],x,h)&&(m[x]=h[x]);return m}function fe(h){return Array.isArray(h)?h.map(fe):typeof h=="object"&&h?me(h,fe):h}const ke={};function et(h){ke[h]||(typeof console<"u"&&console.warn(h),ke[h]=!0)}function Xe(h,l,f){return(f.y-h.y)*(l.x-h.x)>(l.y-h.y)*(f.x-h.x)}function ct(h){let l=0;for(let f,m,x=0,E=h.length,T=E-1;x<E;T=x++)f=h[x],m=h[T],l+=(m.x-f.x)*(f.y+m.y);return l}function pt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ge=null;function Ye(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Be(h,l,f,m,x){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const E=new VideoFrame(h,{timestamp:0});try{const T=E==null?void 0:E.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const A=T.startsWith("BGR"),O=new Uint8ClampedArray(m*x*4);if(yield E.copyTo(O,function(z,U,Z,Q,ne){const se=4*Math.max(-U,0),we=(Math.max(0,Z)-Z)*Q*4+se,Pe=4*Q,De=Math.max(0,U),$e=Math.max(0,Z);return{rect:{x:De,y:$e,width:Math.min(z.width,U+Q)-De,height:Math.min(z.height,Z+ne)-$e},layout:[{offset:we,stride:Pe}]}}(h,l,f,m,x)),A)for(let z=0;z<O.length;z+=4){const U=O[z];O[z]=O[z+2],O[z+2]=U}return O}finally{E.close()}})}let ce,he,ve,_e;const Fe={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(h){const l=requestAnimationFrame(h);return{cancel:()=>cancelAnimationFrame(l)}},getImageData(h,l=0){return this.getImageCanvasContext(h).getImageData(-l,-l,h.width+2*l,h.height+2*l)},getImageCanvasContext(h){const l=window.document.createElement("canvas"),f=l.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return l.width=h.width,l.height=h.height,f.drawImage(h,0,0,h.width,h.height),f},resolveURL:h=>(ve||(ve=document.createElement("a")),ve.href=h,ve.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(_e==null&&(_e=matchMedia("(prefers-reduced-motion: reduce)")),_e.matches)}},qe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class at extends Error{constructor(l,f,m,x){super(`AJAXError: ${f} (${l}): ${m}`),this.status=l,this.statusText=f,this.url=m,this.body=x}}const ot=pt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Qe=h=>qe.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))];function Lt(h,l){const f=new AbortController,m=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ot(),signal:f.signal});let x=!1,E=!1;return h.type==="json"&&m.headers.set("Accept","application/json"),E||fetch(m).then(T=>T.ok?(A=>{(h.type==="arrayBuffer"||h.type==="image"?A.arrayBuffer():h.type==="json"?A.json():A.text()).then(O=>{E||(x=!0,l(null,O,A.headers.get("Cache-Control"),A.headers.get("Expires")))}).catch(O=>{E||l(new Error(O.message))})})(T):T.blob().then(A=>l(new at(T.status,T.statusText,h.url,A)))).catch(T=>{T.code!==20&&l(new Error(T.message))}),{cancel:()=>{E=!0,x||f.abort()}}}const Ot=function(h,l){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){if(pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,l);if(!pt())return(Qe(h.url)||Lt)(h,l)}if(!(/^file:/.test(f=h.url)||/^file:/.test(ot())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Lt(h,l);if(pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,l,void 0,!0)}var f;return function(m,x){const E=new XMLHttpRequest;E.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(E.responseType="arraybuffer");for(const T in m.headers)E.setRequestHeader(T,m.headers[T]);return m.type==="json"&&(E.responseType="text",E.setRequestHeader("Accept","application/json")),E.withCredentials=m.credentials==="include",E.onerror=()=>{x(new Error(E.statusText))},E.onload=()=>{if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let T=E.response;if(m.type==="json")try{T=JSON.parse(E.response)}catch(A){return x(A)}x(null,T,E.getResponseHeader("Cache-Control"),E.getResponseHeader("Expires"))}else{const T=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});x(new at(E.status,E.statusText,m.url,T))}},E.send(m.body),{cancel:()=>E.abort()}}(h,l)},er=function(h,l){return Ot(oe(h,{type:"arrayBuffer"}),l)};function Yt(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const l=new URL(h),f=window.location;return l.protocol===f.protocol&&l.host===f.host}function Qt(h,l,f){f[h]&&f[h].indexOf(l)!==-1||(f[h]=f[h]||[],f[h].push(l))}function qt(h,l,f){if(f&&f[h]){const m=f[h].indexOf(l);m!==-1&&f[h].splice(m,1)}}class Et{constructor(l,f={}){oe(this,f),this.type=l}}class hr extends Et{constructor(l,f={}){super("error",oe({error:l},f))}}class rr{on(l,f){return this._listeners=this._listeners||{},Qt(l,f,this._listeners),this}off(l,f){return qt(l,f,this._listeners),qt(l,f,this._oneTimeListeners),this}once(l,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},Qt(l,f,this._oneTimeListeners),this):new Promise(m=>this.once(l,m))}fire(l,f){typeof l=="string"&&(l=new Et(l,f||{}));const m=l.type;if(this.listens(m)){l.target=this;const x=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const A of x)A.call(this,l);const E=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const A of E)qt(m,A,this._oneTimeListeners),A.call(this,l);const T=this._eventedParent;T&&(oe(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(l))}else l instanceof hr&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,f){return this._eventedParent=l,this._eventedParentData=f,this}}var Ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Jt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Nr(h,l){const f={};for(const m in h)m!=="ref"&&(f[m]=h[m]);return Jt.forEach(m=>{m in l&&(f[m]=l[m])}),f}function vr(h,l){if(Array.isArray(h)){if(!Array.isArray(l)||h.length!==l.length)return!1;for(let f=0;f<h.length;f++)if(!vr(h[f],l[f]))return!1;return!0}if(typeof h=="object"&&h!==null&&l!==null){if(typeof l!="object"||Object.keys(h).length!==Object.keys(l).length)return!1;for(const f in h)if(!vr(h[f],l[f]))return!1;return!0}return h===l}const $t={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ui(h,l,f){f.push({command:$t.addSource,args:[h,l[h]]})}function ds(h,l,f){l.push({command:$t.removeSource,args:[h]}),f[h]=!0}function an(h,l,f,m){ds(h,f,m),ui(h,l,f)}function Ir(h,l,f){let m;for(m in h[f])if(Object.prototype.hasOwnProperty.call(h[f],m)&&m!=="data"&&!vr(h[f][m],l[f][m]))return!1;for(m in l[f])if(Object.prototype.hasOwnProperty.call(l[f],m)&&m!=="data"&&!vr(h[f][m],l[f][m]))return!1;return!0}function Kr(h,l,f,m,x,E){let T;for(T in l=l||{},h=h||{})Object.prototype.hasOwnProperty.call(h,T)&&(vr(h[T],l[T])||f.push({command:E,args:[m,T,l[T],x]}));for(T in l)Object.prototype.hasOwnProperty.call(l,T)&&!Object.prototype.hasOwnProperty.call(h,T)&&(vr(h[T],l[T])||f.push({command:E,args:[m,T,l[T],x]}))}function kn(h){return h.id}function fs(h,l){return h[l.id]=l,h}class Tt{constructor(l,f,m,x){this.message=(l?`${l}: `:"")+m,x&&(this.identifier=x),f!=null&&f.__line__&&(this.line=f.__line__)}}function Ji(h,...l){for(const f of l)for(const m in f)h[m]=f[m];return h}class Yr extends Error{constructor(l,f){super(f),this.message=f,this.key=l}}class ks{constructor(l,f=[]){this.parent=l,this.bindings={};for(const[m,x]of f)this.bindings[m]=x}concat(l){return new ks(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const Ls={kind:"null"},Ft={kind:"number"},wr={kind:"string"},yr={kind:"boolean"},wi={kind:"color"},ps={kind:"object"},sr={kind:"value"},Ln={kind:"collator"},be={kind:"formatted"},Y={kind:"padding"},te={kind:"resolvedImage"},ge={kind:"variableAnchorOffsetCollection"};function Se(h,l){return{kind:"array",itemType:h,N:l}}function Te(h){if(h.kind==="array"){const l=Te(h.itemType);return typeof h.N=="number"?`array<${l}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${l}>`}return h.kind}const We=[Ls,Ft,wr,yr,wi,be,ps,Se(sr),Y,te,ge];function Ne(h,l){if(l.kind==="error")return null;if(h.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Ne(h.itemType,l.itemType))&&(typeof h.N!="number"||h.N===l.N))return null}else{if(h.kind===l.kind)return null;if(h.kind==="value"){for(const f of We)if(!Ne(f,l))return null}}return`Expected ${Te(h)} but found ${Te(l)} instead.`}function Ae(h,l){return l.some(f=>f.kind===h.kind)}function Ve(h,l){return l.some(f=>f==="null"?h===null:f==="array"?Array.isArray(h):f==="object"?h&&!Array.isArray(h)&&typeof h=="object":f===typeof h)}function ut(h,l){return h.kind==="array"&&l.kind==="array"?h.itemType.kind===l.itemType.kind&&typeof h.N=="number":h.kind===l.kind}const dt=.96422,X=.82521,de=4/29,le=6/29,ae=3*le*le,pe=le*le*le,J=Math.PI/180,Re=180/Math.PI;function je(h){return(h%=360)<0&&(h+=360),h}function Ie([h,l,f,m]){let x,E;const T=He((.2225045*(h=Le(h))+.7168786*(l=Le(l))+.0606169*(f=Le(f)))/1);h===l&&l===f?x=E=T:(x=He((.4360747*h+.3850649*l+.1430804*f)/dt),E=He((.0139322*h+.0971045*l+.7141733*f)/X));const A=116*T-16;return[A<0?0:A,500*(x-T),200*(T-E),m]}function Le(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function He(h){return h>pe?Math.pow(h,1/3):h/ae+de}function rt([h,l,f,m]){let x=(h+16)/116,E=isNaN(l)?x:x+l/500,T=isNaN(f)?x:x-f/200;return x=1*wt(x),E=dt*wt(E),T=X*wt(T),[lt(3.1338561*E-1.6168667*x-.4906146*T),lt(-.9787684*E+1.9161415*x+.033454*T),lt(.0719453*E-.2289914*x+1.4052427*T),m]}function lt(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function wt(h){return h>le?h*h*h:ae*(h-de)}function gt(h){return parseInt(h.padEnd(2,h),16)/255}function At(h,l){return lr(l?h/100:h,0,1)}function lr(h,l,f){return Math.min(Math.max(l,h),f)}function br(h){return!h.some(Number.isNaN)}const Rr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class mr{constructor(l,f,m,x=1,E=!0){this.r=l,this.g=f,this.b=m,this.a=x,E||(this.r*=x,this.g*=x,this.b*=x,x||this.overwriteGetter("rgb",[l,f,m,x]))}static parse(l){if(l instanceof mr)return l;if(typeof l!="string")return;const f=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const x=Rr[m];if(x){const[T,A,O]=x;return[T/255,A/255,O/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const T=m.length<6?1:2;let A=1;return[gt(m.slice(A,A+=T)),gt(m.slice(A,A+=T)),gt(m.slice(A,A+=T)),gt(m.slice(A,A+T)||"ff")]}if(m.startsWith("rgb")){const T=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[A,O,z,U,Z,Q,ne,se,we,Pe,De,$e]=T,Oe=[U||" ",ne||" ",Pe].join("");if(Oe==="  "||Oe==="  /"||Oe===",,"||Oe===",,,"){const Ze=[z,Q,we].join(""),tt=Ze==="%%%"?100:Ze===""?255:0;if(tt){const yt=[lr(+O/tt,0,1),lr(+Z/tt,0,1),lr(+se/tt,0,1),De?At(+De,$e):1];if(br(yt))return yt}}return}}const E=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[T,A,O,z,U,Z,Q,ne,se]=E,we=[O||" ",U||" ",Q].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){const Pe=[+A,lr(+z,0,100),lr(+Z,0,100),ne?At(+ne,se):1];if(br(Pe))return function([De,$e,Oe,Ze]){function tt(yt){const Ht=(yt+De/30)%12,nr=$e*Math.min(Oe,1-Oe);return Oe-nr*Math.max(-1,Math.min(Ht-3,9-Ht,1))}return De=je(De),$e/=100,Oe/=100,[tt(0),tt(8),tt(4),Ze]}(Pe)}}}(l);return f?new mr(...f,!1):void 0}get rgb(){const{r:l,g:f,b:m,a:x}=this,E=x||1/0;return this.overwriteGetter("rgb",[l/E,f/E,m/E,x])}get hcl(){return this.overwriteGetter("hcl",function(l){const[f,m,x,E]=Ie(l),T=Math.sqrt(m*m+x*x);return[Math.round(1e4*T)?je(Math.atan2(x,m)*Re):NaN,T,f,E]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ie(this.rgb))}overwriteGetter(l,f){return Object.defineProperty(this,l,{value:f}),f}toString(){const[l,f,m,x]=this.rgb;return`rgba(${[l,f,m].map(E=>Math.round(255*E)).join(",")},${x})`}}mr.black=new mr(0,0,0,1),mr.white=new mr(1,1,1,1),mr.transparent=new mr(0,0,0,0),mr.red=new mr(1,0,0,1);class ln{constructor(l,f,m){this.sensitivity=l?f?"variant":"case":f?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,f){return this.collator.compare(l,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class $n{constructor(l,f,m,x,E){this.text=l,this.image=f,this.scale=m,this.fontStack=x,this.textColor=E}}class ei{constructor(l){this.sections=l}static fromString(l){return new ei([new $n(l,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof ei?l:ei.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class Ur{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Ur)return l;if(typeof l=="number")return new Ur([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const f of l)if(typeof f!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new Ur(l)}}toString(){return JSON.stringify(this.values)}}const Zo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ti{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ti)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let f=0;f<l.length;f+=2){const m=l[f],x=l[f+1];if(typeof m!="string"||!Zo.has(m)||!Array.isArray(x)||x.length!==2||typeof x[0]!="number"||typeof x[1]!="number")return}return new ti(l)}}toString(){return JSON.stringify(this.values)}}class Sn{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Sn({name:l,available:!1}):null}}function Pd(h,l,f,m){return typeof h=="number"&&h>=0&&h<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof f=="number"&&f>=0&&f<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[h,l,f,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[h,l,f,m]:[h,l,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Dc(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof mr||h instanceof ln||h instanceof ei||h instanceof Ur||h instanceof ti||h instanceof Sn)return!0;if(Array.isArray(h)){for(const l of h)if(!Dc(l))return!1;return!0}if(typeof h=="object"){for(const l in h)if(!Dc(h[l]))return!1;return!0}return!1}function xi(h){if(h===null)return Ls;if(typeof h=="string")return wr;if(typeof h=="boolean")return yr;if(typeof h=="number")return Ft;if(h instanceof mr)return wi;if(h instanceof ln)return Ln;if(h instanceof ei)return be;if(h instanceof Ur)return Y;if(h instanceof ti)return ge;if(h instanceof Sn)return te;if(Array.isArray(h)){const l=h.length;let f;for(const m of h){const x=xi(m);if(f){if(f===x)continue;f=sr;break}f=x}return Se(f||sr,l)}return ps}function zr(h){const l=typeof h;return h===null?"":l==="string"||l==="number"||l==="boolean"?String(h):h instanceof mr||h instanceof ei||h instanceof Ur||h instanceof ti||h instanceof Sn?h.toString():JSON.stringify(h)}class Bl{constructor(l,f){this.type=l,this.value=f}static parse(l,f){if(l.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Dc(l[1]))return f.error("invalid value");const m=l[1];let x=xi(m);const E=f.expectedType;return x.kind!=="array"||x.N!==0||!E||E.kind!=="array"||typeof E.N=="number"&&E.N!==0||(x=E),new Bl(x,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ti{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}const Md={string:wr,number:Ft,boolean:yr,object:ps};class no{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m,x=1;const E=l[0];if(E==="array"){let A,O;if(l.length>2){const z=l[1];if(typeof z!="string"||!(z in Md)||z==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);A=Md[z],x++}else A=sr;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return f.error('The length argument to "array" must be a positive integer literal',2);O=l[2],x++}m=Se(A,O)}else{if(!Md[E])throw new Error(`Types doesn't contain name = ${E}`);m=Md[E]}const T=[];for(;x<l.length;x++){const A=f.parse(l[x],x,sr);if(!A)return null;T.push(A)}return new no(m,T)}evaluate(l){for(let f=0;f<this.args.length;f++){const m=this.args[f].evaluate(l);if(!Ne(this.type,xi(m)))return m;if(f===this.args.length-1)throw new Ti(`Expected value to be of type ${Te(this.type)}, but found ${Te(xi(m))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const og={"to-boolean":yr,"to-color":wi,"to-number":Ft,"to-string":wr};class tl{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");const m=l[0];if(!og[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&l.length!==2)return f.error("Expected one argument.");const x=og[m],E=[];for(let T=1;T<l.length;T++){const A=f.parse(l[T],T,sr);if(!A)return null;E.push(A)}return new tl(x,E)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let f,m;for(const x of this.args){if(f=x.evaluate(l),m=null,f instanceof mr)return f;if(typeof f=="string"){const E=l.parseColor(f);if(E)return E}else if(Array.isArray(f)&&(m=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Pd(f[0],f[1],f[2],f[3]),!m))return new mr(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new Ti(m||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(const m of this.args){f=m.evaluate(l);const x=Ur.parse(f);if(x)return x}throw new Ti(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(const m of this.args){f=m.evaluate(l);const x=ti.parse(f);if(x)return x}throw new Ti(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(const m of this.args){if(f=m.evaluate(l),f===null)return 0;const x=Number(f);if(!isNaN(x))return x}throw new Ti(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return ei.fromString(zr(this.args[0].evaluate(l)));case"resolvedImage":return Sn.fromString(zr(this.args[0].evaluate(l)));default:return zr(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Vv=["Unknown","Point","LineString","Polygon"];class ag{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vv[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let f=this._parseColorCache[l];return f||(f=this._parseColorCache[l]=mr.parse(l)),f}}class Fd{constructor(l,f,m=[],x,E=new ks,T=[]){this.registry=l,this.path=m,this.key=m.map(A=>`[${A}]`).join(""),this.scope=E,this.errors=T,this.expectedType=x,this._isConstant=f}parse(l,f,m,x,E={}){return f?this.concat(f,m,x)._parse(l,E):this._parse(l,E)}_parse(l,f){function m(x,E,T){return T==="assert"?new no(E,[x]):T==="coerce"?new tl(E,[x]):x}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const x=l[0];if(typeof x!="string")return this.error(`Expression name must be a string, but found ${typeof x} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[x];if(E){let T=E.parse(l,this);if(!T)return null;if(this.expectedType){const A=this.expectedType,O=T.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||O.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||O.kind!=="value"&&O.kind!=="string")if(A.kind!=="padding"||O.kind!=="value"&&O.kind!=="number"&&O.kind!=="array")if(A.kind!=="variableAnchorOffsetCollection"||O.kind!=="value"&&O.kind!=="array"){if(this.checkSubtype(A,O))return null}else T=m(T,A,f.typeAnnotation||"coerce");else T=m(T,A,f.typeAnnotation||"coerce");else T=m(T,A,f.typeAnnotation||"coerce");else T=m(T,A,f.typeAnnotation||"assert")}if(!(T instanceof Bl)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const A=new ag;try{T=new Bl(T.type,T.evaluate(A))}catch(O){return this.error(O.message),null}}return T}return this.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,f,m){const x=typeof l=="number"?this.path.concat(l):this.path,E=m?this.scope.concat(m):this.scope;return new Fd(this.registry,this._isConstant,x,f||null,E,this.errors)}error(l,...f){const m=`${this.key}${f.map(x=>`[${x}]`).join("")}`;this.errors.push(new Yr(m,l))}checkSubtype(l,f){const m=Ne(l,f);return m&&this.error(m),m}}class Ad{constructor(l,f,m){this.type=Ln,this.locale=m,this.caseSensitive=l,this.diacriticSensitive=f}static parse(l,f){if(l.length!==2)return f.error("Expected one argument.");const m=l[1];if(typeof m!="object"||Array.isArray(m))return f.error("Collator options argument must be an object.");const x=f.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,yr);if(!x)return null;const E=f.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,yr);if(!E)return null;let T=null;return m.locale&&(T=f.parse(m.locale,1,wr),!T)?null:new Ad(x,E,T)}evaluate(l){return new ln(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}const rl=8192;function lg(h,l){h[0]=Math.min(h[0],l[0]),h[1]=Math.min(h[1],l[1]),h[2]=Math.max(h[2],l[0]),h[3]=Math.max(h[3],l[1])}function Qu(h,l){return!(h[0]<=l[0]||h[2]>=l[2]||h[1]<=l[1]||h[3]>=l[3])}function Hv(h,l){const f=(180+h[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,x=Math.pow(2,l.z);return[Math.round(f*x*rl),Math.round(m*x*rl)]}function s_(h,l,f){const m=h[0]-l[0],x=h[1]-l[1],E=h[0]-f[0],T=h[1]-f[1];return m*T-E*x==0&&m*E<=0&&x*T<=0}function cg(h,l){let f=!1;for(let T=0,A=l.length;T<A;T++){const O=l[T];for(let z=0,U=O.length;z<U-1;z++){if(s_(h,O[z],O[z+1]))return!1;(x=O[z])[1]>(m=h)[1]!=(E=O[z+1])[1]>m[1]&&m[0]<(E[0]-x[0])*(m[1]-x[1])/(E[1]-x[1])+x[0]&&(f=!f)}}var m,x,E;return f}function ug(h,l){for(let f=0;f<l.length;f++)if(cg(h,l[f]))return!0;return!1}function Uv(h,l,f,m){const x=m[0]-f[0],E=m[1]-f[1],T=(h[0]-f[0])*E-x*(h[1]-f[1]),A=(l[0]-f[0])*E-x*(l[1]-f[1]);return T>0&&A<0||T<0&&A>0}function o_(h,l,f){for(const z of f)for(let U=0;U<z.length-1;++U)if((A=[(T=z[U+1])[0]-(E=z[U])[0],T[1]-E[1]])[0]*(O=[(x=l)[0]-(m=h)[0],x[1]-m[1]])[1]-A[1]*O[0]!=0&&Uv(m,x,E,T)&&Uv(E,T,m,x))return!0;var m,x,E,T,A,O;return!1}function Wv(h,l){for(let f=0;f<h.length;++f)if(!cg(h[f],l))return!1;for(let f=0;f<h.length-1;++f)if(o_(h[f],h[f+1],l))return!1;return!0}function jv(h,l){for(let f=0;f<l.length;f++)if(Wv(h,l[f]))return!0;return!1}function Id(h,l,f){const m=[];for(let x=0;x<h.length;x++){const E=[];for(let T=0;T<h[x].length;T++){const A=Hv(h[x][T],f);lg(l,A),E.push(A)}m.push(E)}return m}function $v(h,l,f){const m=[];for(let x=0;x<h.length;x++){const E=Id(h[x],l,f);m.push(E)}return m}function qv(h,l,f,m){if(h[0]<f[0]||h[0]>f[2]){const x=.5*m;let E=h[0]-f[0]>x?-m:f[0]-h[0]>x?m:0;E===0&&(E=h[0]-f[2]>x?-m:f[2]-h[0]>x?m:0),h[0]+=E}lg(l,h)}function hg(h,l,f,m){const x=Math.pow(2,m.z)*rl,E=[m.x*rl,m.y*rl],T=[];for(const A of h)for(const O of A){const z=[O.x+E[0],O.y+E[1]];qv(z,l,f,x),T.push(z)}return T}function dg(h,l,f,m){const x=Math.pow(2,m.z)*rl,E=[m.x*rl,m.y*rl],T=[];for(const O of h){const z=[];for(const U of O){const Z=[U.x+E[0],U.y+E[1]];lg(l,Z),z.push(Z)}T.push(z)}if(l[2]-l[0]<=x/2){(A=l)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const O of T)for(const z of O)qv(z,l,f,x)}var A;return T}class zl{constructor(l,f){this.type=yr,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Dc(l[1])){const m=l[1];if(m.type==="FeatureCollection")for(let x=0;x<m.features.length;++x){const E=m.features[x].geometry.type;if(E==="Polygon"||E==="MultiPolygon")return new zl(m,m.features[x].geometry)}else if(m.type==="Feature"){const x=m.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new zl(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new zl(m,m)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,m){const x=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],T=f.canonicalID();if(m.type==="Polygon"){const A=Id(m.coordinates,E,T),O=hg(f.geometry(),x,E,T);if(!Qu(x,E))return!1;for(const z of O)if(!cg(z,A))return!1}if(m.type==="MultiPolygon"){const A=$v(m.coordinates,E,T),O=hg(f.geometry(),x,E,T);if(!Qu(x,E))return!1;for(const z of O)if(!ug(z,A))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,m){const x=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],T=f.canonicalID();if(m.type==="Polygon"){const A=Id(m.coordinates,E,T),O=dg(f.geometry(),x,E,T);if(!Qu(x,E))return!1;for(const z of O)if(!Wv(z,A))return!1}if(m.type==="MultiPolygon"){const A=$v(m.coordinates,E,T),O=dg(f.geometry(),x,E,T);if(!Qu(x,E))return!1;for(const z of O)if(!jv(z,A))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Dd{constructor(l,f){this.type=f.type,this.name=l,this.boundExpression=f}static parse(l,f){if(l.length!==2||typeof l[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");const m=l[1];return f.scope.has(m)?new Dd(m,f.scope.get(m)):f.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class so{constructor(l,f,m,x){this.name=l,this.type=f,this._evaluate=m,this.args=x}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,f){const m=l[0],x=so.definitions[m];if(!x)return f.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(x)?x[0]:x.type,T=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,A=T.filter(([z])=>!Array.isArray(z)||z.length===l.length-1);let O=null;for(const[z,U]of A){O=new Fd(f.registry,kd,f.path,null,f.scope);const Z=[];let Q=!1;for(let ne=1;ne<l.length;ne++){const se=l[ne],we=Array.isArray(z)?z[ne-1]:z.type,Pe=O.parse(se,1+Z.length,we);if(!Pe){Q=!0;break}Z.push(Pe)}if(!Q)if(Array.isArray(z)&&z.length!==Z.length)O.error(`Expected ${z.length} arguments, but found ${Z.length} instead.`);else{for(let ne=0;ne<Z.length;ne++){const se=Array.isArray(z)?z[ne]:z.type,we=Z[ne];O.concat(ne+1).checkSubtype(se,we.type)}if(O.errors.length===0)return new so(m,E,U,Z)}}if(A.length===1)f.errors.push(...O.errors);else{const z=(A.length?A:T).map(([Z])=>{return Q=Z,Array.isArray(Q)?`(${Q.map(Te).join(", ")})`:`(${Te(Q.type)}...)`;var Q}).join(" | "),U=[];for(let Z=1;Z<l.length;Z++){const Q=f.parse(l[Z],1+U.length);if(!Q)return null;U.push(Te(Q.type))}f.error(`Expected arguments of type ${z}, but found (${U.join(", ")}) instead.`)}return null}static register(l,f){so.definitions=f;for(const m in f)l[m]=so}}function kd(h){if(h instanceof Dd)return kd(h.boundExpression);if(h instanceof so&&h.name==="error"||h instanceof Ad||h instanceof zl)return!1;const l=h instanceof tl||h instanceof no;let f=!0;return h.eachChild(m=>{f=l?f&&kd(m):f&&m instanceof Bl}),!!f&&Ld(h)&&Od(h,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ld(h){if(h instanceof so&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof zl)return!1;let l=!0;return h.eachChild(f=>{l&&!Ld(f)&&(l=!1)}),l}function Ju(h){if(h instanceof so&&h.name==="feature-state")return!1;let l=!0;return h.eachChild(f=>{l&&!Ju(f)&&(l=!1)}),l}function Od(h,l){if(h instanceof so&&l.indexOf(h.name)>=0)return!1;let f=!0;return h.eachChild(m=>{f&&!Od(m,l)&&(f=!1)}),f}function kc(h,l){const f=h.length-1;let m,x,E=0,T=f,A=0;for(;E<=T;)if(A=Math.floor((E+T)/2),m=h[A],x=h[A+1],m<=l){if(A===f||l<x)return A;E=A+1}else{if(!(m>l))throw new Ti("Input is not a number.");T=A-1}return 0}class il{constructor(l,f,m){this.type=l,this.input=f,this.labels=[],this.outputs=[];for(const[x,E]of m)this.labels.push(x),this.outputs.push(E)}static parse(l,f){if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");const m=f.parse(l[1],1,Ft);if(!m)return null;const x=[];let E=null;f.expectedType&&f.expectedType.kind!=="value"&&(E=f.expectedType);for(let T=1;T<l.length;T+=2){const A=T===1?-1/0:l[T],O=l[T+1],z=T,U=T+1;if(typeof A!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(x.length&&x[x.length-1][0]>=A)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const Z=f.parse(O,U,E);if(!Z)return null;E=E||Z.type,x.push([A,Z])}return new il(E,m,x)}evaluate(l){const f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(l);const x=this.input.evaluate(l);if(x<=f[0])return m[0].evaluate(l);const E=f.length;return x>=f[E-1]?m[E-1].evaluate(l):m[kc(f,x)].evaluate(l)}eachChild(l){l(this.input);for(const f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function Dr(h,l,f){return h+f*(l-h)}function Nd(h,l,f){return h.map((m,x)=>Dr(m,l[x],f))}const Os={number:Dr,color:function(h,l,f,m="rgb"){switch(m){case"rgb":{const[x,E,T,A]=Nd(h.rgb,l.rgb,f);return new mr(x,E,T,A,!1)}case"hcl":{const[x,E,T,A]=h.hcl,[O,z,U,Z]=l.hcl;let Q,ne;if(isNaN(x)||isNaN(O))isNaN(x)?isNaN(O)?Q=NaN:(Q=O,T!==1&&T!==0||(ne=z)):(Q=x,U!==1&&U!==0||(ne=E));else{let $e=O-x;O>x&&$e>180?$e-=360:O<x&&x-O>180&&($e+=360),Q=x+f*$e}const[se,we,Pe,De]=function([$e,Oe,Ze,tt]){return $e=isNaN($e)?0:$e*J,rt([Ze,Math.cos($e)*Oe,Math.sin($e)*Oe,tt])}([Q,ne??Dr(E,z,f),Dr(T,U,f),Dr(A,Z,f)]);return new mr(se,we,Pe,De,!1)}case"lab":{const[x,E,T,A]=rt(Nd(h.lab,l.lab,f));return new mr(x,E,T,A,!1)}}},array:Nd,padding:function(h,l,f){return new Ur(Nd(h.values,l.values,f))},variableAnchorOffsetCollection:function(h,l,f){const m=h.values,x=l.values;if(m.length!==x.length)throw new Ti(`Cannot interpolate values of different length. from: ${h.toString()}, to: ${l.toString()}`);const E=[];for(let T=0;T<m.length;T+=2){if(m[T]!==x[T])throw new Ti(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${m[T]}, to[${T}]: ${x[T]}`);E.push(m[T]);const[A,O]=m[T+1],[z,U]=x[T+1];E.push([Dr(A,z,f),Dr(O,U,f)])}return new ti(E)}};class Ns{constructor(l,f,m,x,E){this.type=l,this.operator=f,this.interpolation=m,this.input=x,this.labels=[],this.outputs=[];for(const[T,A]of E)this.labels.push(T),this.outputs.push(A)}static interpolationFactor(l,f,m,x){let E=0;if(l.name==="exponential")E=fg(f,l.base,m,x);else if(l.name==="linear")E=fg(f,1,m,x);else if(l.name==="cubic-bezier"){const T=l.controlPoints;E=new R(T[0],T[1],T[2],T[3]).solve(fg(f,1,m,x))}return E}static parse(l,f){let[m,x,E,...T]=l;if(!Array.isArray(x)||x.length===0)return f.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){const z=x[1];if(typeof z!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:z}}else{if(x[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(x[0])}`,1,0);{const z=x.slice(1);if(z.length!==4||z.some(U=>typeof U!="number"||U<0||U>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:z}}}if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(E=f.parse(E,2,Ft),!E)return null;const A=[];let O=null;m==="interpolate-hcl"||m==="interpolate-lab"?O=wi:f.expectedType&&f.expectedType.kind!=="value"&&(O=f.expectedType);for(let z=0;z<T.length;z+=2){const U=T[z],Z=T[z+1],Q=z+3,ne=z+4;if(typeof U!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(A.length&&A[A.length-1][0]>=U)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Q);const se=f.parse(Z,ne,O);if(!se)return null;O=O||se.type,A.push([U,se])}return ut(O,Ft)||ut(O,wi)||ut(O,Y)||ut(O,ge)||ut(O,Se(Ft))?new Ns(O,m,x,E,A):f.error(`Type ${Te(O)} is not interpolatable.`)}evaluate(l){const f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(l);const x=this.input.evaluate(l);if(x<=f[0])return m[0].evaluate(l);const E=f.length;if(x>=f[E-1])return m[E-1].evaluate(l);const T=kc(f,x),A=Ns.interpolationFactor(this.interpolation,x,f[T],f[T+1]),O=m[T].evaluate(l),z=m[T+1].evaluate(l);switch(this.operator){case"interpolate":return Os[this.type.kind](O,z,A);case"interpolate-hcl":return Os.color(O,z,A,"hcl");case"interpolate-lab":return Os.color(O,z,A,"lab")}}eachChild(l){l(this.input);for(const f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function fg(h,l,f,m){const x=m-f,E=h-f;return x===0?0:l===1?E/x:(Math.pow(l,E)-1)/(Math.pow(l,x)-1)}class Bd{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expectected at least one argument.");let m=null;const x=f.expectedType;x&&x.kind!=="value"&&(m=x);const E=[];for(const A of l.slice(1)){const O=f.parse(A,1+E.length,m,void 0,{typeAnnotation:"omit"});if(!O)return null;m=m||O.type,E.push(O)}if(!m)throw new Error("No output type");const T=x&&E.some(A=>Ne(x,A.type));return new Bd(T?sr:m,E)}evaluate(l){let f,m=null,x=0;for(const E of this.args)if(x++,m=E.evaluate(l),m&&m instanceof Sn&&!m.available&&(f||(f=m.name),m=null,x===this.args.length&&(m=f)),m!==null)break;return m}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}class zd{constructor(l,f){this.type=f.type,this.bindings=[].concat(l),this.result=f}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const f of this.bindings)l(f[1]);l(this.result)}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const m=[];for(let E=1;E<l.length-1;E+=2){const T=l[E];if(typeof T!="string")return f.error(`Expected string, but found ${typeof T} instead.`,E);if(/[^a-zA-Z0-9_]/.test(T))return f.error("Variable names must contain only alphanumeric characters or '_'.",E);const A=f.parse(l[E+1],E+1);if(!A)return null;m.push([T,A])}const x=f.parse(l[l.length-1],l.length-1,f.expectedType,m);return x?new zd(m,x):null}outputDefined(){return this.result.outputDefined()}}class pg{constructor(l,f,m){this.type=l,this.index=f,this.input=m}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const m=f.parse(l[1],1,Ft),x=f.parse(l[2],2,Se(f.expectedType||sr));return m&&x?new pg(x.type.itemType,m,x):null}evaluate(l){const f=this.index.evaluate(l),m=this.input.evaluate(l);if(f<0)throw new Ti(`Array index out of bounds: ${f} < 0.`);if(f>=m.length)throw new Ti(`Array index out of bounds: ${f} > ${m.length-1}.`);if(f!==Math.floor(f))throw new Ti(`Array index must be an integer, but found ${f} instead.`);return m[f]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class gg{constructor(l,f){this.type=yr,this.needle=l,this.haystack=f}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const m=f.parse(l[1],1,sr),x=f.parse(l[2],2,sr);return m&&x?Ae(m.type,[yr,wr,Ft,Ls,sr])?new gg(m,x):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${Te(m.type)} instead`):null}evaluate(l){const f=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!m)return!1;if(!Ve(f,["boolean","string","number","null"]))throw new Ti(`Expected first argument to be of type boolean, string, number or null, but found ${Te(xi(f))} instead.`);if(!Ve(m,["string","array"]))throw new Ti(`Expected second argument to be of type array or string, but found ${Te(xi(m))} instead.`);return m.indexOf(f)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Gd{constructor(l,f,m){this.type=Ft,this.needle=l,this.haystack=f,this.fromIndex=m}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const m=f.parse(l[1],1,sr),x=f.parse(l[2],2,sr);if(!m||!x)return null;if(!Ae(m.type,[yr,wr,Ft,Ls,sr]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${Te(m.type)} instead`);if(l.length===4){const E=f.parse(l[3],3,Ft);return E?new Gd(m,x,E):null}return new Gd(m,x)}evaluate(l){const f=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!Ve(f,["boolean","string","number","null"]))throw new Ti(`Expected first argument to be of type boolean, string, number or null, but found ${Te(xi(f))} instead.`);if(!Ve(m,["string","array"]))throw new Ti(`Expected second argument to be of type array or string, but found ${Te(xi(m))} instead.`);if(this.fromIndex){const x=this.fromIndex.evaluate(l);return m.indexOf(f,x)}return m.indexOf(f)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class mg{constructor(l,f,m,x,E,T){this.inputType=l,this.type=f,this.input=m,this.cases=x,this.outputs=E,this.otherwise=T}static parse(l,f){if(l.length<5)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return f.error("Expected an even number of arguments.");let m,x;f.expectedType&&f.expectedType.kind!=="value"&&(x=f.expectedType);const E={},T=[];for(let z=2;z<l.length-1;z+=2){let U=l[z];const Z=l[z+1];Array.isArray(U)||(U=[U]);const Q=f.concat(z);if(U.length===0)return Q.error("Expected at least one branch label.");for(const se of U){if(typeof se!="number"&&typeof se!="string")return Q.error("Branch labels must be numbers or strings.");if(typeof se=="number"&&Math.abs(se)>Number.MAX_SAFE_INTEGER)return Q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof se=="number"&&Math.floor(se)!==se)return Q.error("Numeric branch labels must be integer values.");if(m){if(Q.checkSubtype(m,xi(se)))return null}else m=xi(se);if(E[String(se)]!==void 0)return Q.error("Branch labels must be unique.");E[String(se)]=T.length}const ne=f.parse(Z,z,x);if(!ne)return null;x=x||ne.type,T.push(ne)}const A=f.parse(l[1],1,sr);if(!A)return null;const O=f.parse(l[l.length-1],l.length-1,x);return O?A.type.kind!=="value"&&f.concat(1).checkSubtype(m,A.type)?null:new mg(m,x,A,E,T,O):null}evaluate(l){const f=this.input.evaluate(l);return(xi(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class vg{constructor(l,f,m){this.type=l,this.branches=f,this.otherwise=m}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return f.error("Expected an odd number of arguments.");let m;f.expectedType&&f.expectedType.kind!=="value"&&(m=f.expectedType);const x=[];for(let T=1;T<l.length-1;T+=2){const A=f.parse(l[T],T,yr);if(!A)return null;const O=f.parse(l[T+1],T+1,m);if(!O)return null;x.push([A,O]),m=m||O.type}const E=f.parse(l[l.length-1],l.length-1,m);if(!E)return null;if(!m)throw new Error("Can't infer output type");return new vg(m,x,E)}evaluate(l){for(const[f,m]of this.branches)if(f.evaluate(l))return m.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[f,m]of this.branches)l(f),l(m);l(this.otherwise)}outputDefined(){return this.branches.every(([l,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class Vd{constructor(l,f,m,x){this.type=l,this.input=f,this.beginIndex=m,this.endIndex=x}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const m=f.parse(l[1],1,sr),x=f.parse(l[2],2,Ft);if(!m||!x)return null;if(!Ae(m.type,[Se(sr),wr,sr]))return f.error(`Expected first argument to be of type array or string, but found ${Te(m.type)} instead`);if(l.length===4){const E=f.parse(l[3],3,Ft);return E?new Vd(m.type,m,x,E):null}return new Vd(m.type,m,x)}evaluate(l){const f=this.input.evaluate(l),m=this.beginIndex.evaluate(l);if(!Ve(f,["string","array"]))throw new Ti(`Expected first argument to be of type array or string, but found ${Te(xi(f))} instead.`);if(this.endIndex){const x=this.endIndex.evaluate(l);return f.slice(m,x)}return f.slice(m)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Kv(h,l){return h==="=="||h==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function Zv(h,l,f,m){return m.compare(l,f)===0}function Lc(h,l,f){const m=h!=="=="&&h!=="!=";return class cO{constructor(E,T,A){this.type=yr,this.lhs=E,this.rhs=T,this.collator=A,this.hasUntypedArgument=E.type.kind==="value"||T.type.kind==="value"}static parse(E,T){if(E.length!==3&&E.length!==4)return T.error("Expected two or three arguments.");const A=E[0];let O=T.parse(E[1],1,sr);if(!O)return null;if(!Kv(A,O.type))return T.concat(1).error(`"${A}" comparisons are not supported for type '${Te(O.type)}'.`);let z=T.parse(E[2],2,sr);if(!z)return null;if(!Kv(A,z.type))return T.concat(2).error(`"${A}" comparisons are not supported for type '${Te(z.type)}'.`);if(O.type.kind!==z.type.kind&&O.type.kind!=="value"&&z.type.kind!=="value")return T.error(`Cannot compare types '${Te(O.type)}' and '${Te(z.type)}'.`);m&&(O.type.kind==="value"&&z.type.kind!=="value"?O=new no(z.type,[O]):O.type.kind!=="value"&&z.type.kind==="value"&&(z=new no(O.type,[z])));let U=null;if(E.length===4){if(O.type.kind!=="string"&&z.type.kind!=="string"&&O.type.kind!=="value"&&z.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(U=T.parse(E[3],3,Ln),!U)return null}return new cO(O,z,U)}evaluate(E){const T=this.lhs.evaluate(E),A=this.rhs.evaluate(E);if(m&&this.hasUntypedArgument){const O=xi(T),z=xi(A);if(O.kind!==z.kind||O.kind!=="string"&&O.kind!=="number")throw new Ti(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${O.kind}, ${z.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const O=xi(T),z=xi(A);if(O.kind!=="string"||z.kind!=="string")return l(E,T,A)}return this.collator?f(E,T,A,this.collator.evaluate(E)):l(E,T,A)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}}}const a_=Lc("==",function(h,l,f){return l===f},Zv),l_=Lc("!=",function(h,l,f){return l!==f},function(h,l,f,m){return!Zv(0,l,f,m)}),c_=Lc("<",function(h,l,f){return l<f},function(h,l,f,m){return m.compare(l,f)<0}),u_=Lc(">",function(h,l,f){return l>f},function(h,l,f,m){return m.compare(l,f)>0}),h_=Lc("<=",function(h,l,f){return l<=f},function(h,l,f,m){return m.compare(l,f)<=0}),d_=Lc(">=",function(h,l,f){return l>=f},function(h,l,f,m){return m.compare(l,f)>=0});class yg{constructor(l,f,m,x,E){this.type=wr,this.number=l,this.locale=f,this.currency=m,this.minFractionDigits=x,this.maxFractionDigits=E}static parse(l,f){if(l.length!==3)return f.error("Expected two arguments.");const m=f.parse(l[1],1,Ft);if(!m)return null;const x=l[2];if(typeof x!="object"||Array.isArray(x))return f.error("NumberFormat options argument must be an object.");let E=null;if(x.locale&&(E=f.parse(x.locale,1,wr),!E))return null;let T=null;if(x.currency&&(T=f.parse(x.currency,1,wr),!T))return null;let A=null;if(x["min-fraction-digits"]&&(A=f.parse(x["min-fraction-digits"],1,Ft),!A))return null;let O=null;return x["max-fraction-digits"]&&(O=f.parse(x["max-fraction-digits"],1,Ft),!O)?null:new yg(m,E,T,A,O)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Hd{constructor(l){this.type=be,this.sections=l}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");const m=l[1];if(!Array.isArray(m)&&typeof m=="object")return f.error("First argument must be an image or text section.");const x=[];let E=!1;for(let T=1;T<=l.length-1;++T){const A=l[T];if(E&&typeof A=="object"&&!Array.isArray(A)){E=!1;let O=null;if(A["font-scale"]&&(O=f.parse(A["font-scale"],1,Ft),!O))return null;let z=null;if(A["text-font"]&&(z=f.parse(A["text-font"],1,Se(wr)),!z))return null;let U=null;if(A["text-color"]&&(U=f.parse(A["text-color"],1,wi),!U))return null;const Z=x[x.length-1];Z.scale=O,Z.font=z,Z.textColor=U}else{const O=f.parse(l[T],1,sr);if(!O)return null;const z=O.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,x.push({content:O,scale:null,font:null,textColor:null})}}return new Hd(x)}evaluate(l){return new ei(this.sections.map(f=>{const m=f.content.evaluate(l);return xi(m)===te?new $n("",m,null,null,null):new $n(zr(m),null,f.scale?f.scale.evaluate(l):null,f.font?f.font.evaluate(l).join(","):null,f.textColor?f.textColor.evaluate(l):null)}))}eachChild(l){for(const f of this.sections)l(f.content),f.scale&&l(f.scale),f.font&&l(f.font),f.textColor&&l(f.textColor)}outputDefined(){return!1}}class wg{constructor(l){this.type=te,this.input=l}static parse(l,f){if(l.length!==2)return f.error("Expected two arguments.");const m=f.parse(l[1],1,wr);return m?new wg(m):f.error("No image name provided.")}evaluate(l){const f=this.input.evaluate(l),m=Sn.fromString(f);return m&&l.availableImages&&(m.available=l.availableImages.indexOf(f)>-1),m}eachChild(l){l(this.input)}outputDefined(){return!1}}class xg{constructor(l){this.type=Ft,this.input=l}static parse(l,f){if(l.length!==2)return f.error(`Expected 1 argument, but found ${l.length-1} instead.`);const m=f.parse(l[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${Te(m.type)} instead.`):new xg(m):null}evaluate(l){const f=this.input.evaluate(l);if(typeof f=="string"||Array.isArray(f))return f.length;throw new Ti(`Expected value to be of type string or array, but found ${Te(xi(f))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const Oc={"==":a_,"!=":l_,">":u_,"<":c_,">=":d_,"<=":h_,array:no,at:pg,boolean:no,case:vg,coalesce:Bd,collator:Ad,format:Hd,image:wg,in:gg,"index-of":Gd,interpolate:Ns,"interpolate-hcl":Ns,"interpolate-lab":Ns,length:xg,let:zd,literal:Bl,match:mg,number:no,"number-format":yg,object:no,slice:Vd,step:il,string:no,"to-boolean":tl,"to-color":tl,"to-number":tl,"to-string":tl,var:Dd,within:zl};function Xv(h,[l,f,m,x]){l=l.evaluate(h),f=f.evaluate(h),m=m.evaluate(h);const E=x?x.evaluate(h):1,T=Pd(l,f,m,E);if(T)throw new Ti(T);return new mr(l/255,f/255,m/255,E,!1)}function Yv(h,l){return h in l}function Cg(h,l){const f=l[h];return f===void 0?null:f}function Gl(h){return{type:h}}function Qv(h){return{result:"success",value:h}}function nl(h){return{result:"error",value:h}}function Nc(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function Jv(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function _g(h){return!!h.expression&&h.expression.interpolated}function Gr(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function Ci(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function f_(h){return h}function kr(h,l){const f=l.type==="color",m=h.stops&&typeof h.stops[0][0]=="object",x=m||!(m||h.property!==void 0),E=h.type||(_g(l)?"exponential":"interval");if(f||l.type==="padding"){const U=f?mr.parse:Ur.parse;(h=Ji({},h)).stops&&(h.stops=h.stops.map(Z=>[Z[0],U(Z[1])])),h.default=U(h.default?h.default:l.default)}if(h.colorSpace&&(T=h.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var T;let A,O,z;if(E==="exponential")A=eh;else if(E==="interval")A=mi;else if(E==="categorical"){A=_i,O=Object.create(null);for(const U of h.stops)O[U[0]]=U[1];z=typeof h.stops[0][0]}else{if(E!=="identity")throw new Error(`Unknown function type "${E}"`);A=ey}if(m){const U={},Z=[];for(let se=0;se<h.stops.length;se++){const we=h.stops[se],Pe=we[0].zoom;U[Pe]===void 0&&(U[Pe]={zoom:Pe,type:h.type,property:h.property,default:h.default,stops:[]},Z.push(Pe)),U[Pe].stops.push([we[0].value,we[1]])}const Q=[];for(const se of Z)Q.push([U[se].zoom,kr(U[se],l)]);const ne={name:"linear"};return{kind:"composite",interpolationType:ne,interpolationFactor:Ns.interpolationFactor.bind(void 0,ne),zoomStops:Q.map(se=>se[0]),evaluate:({zoom:se},we)=>eh({stops:Q,base:h.base},l,se).evaluate(se,we)}}if(x){const U=E==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:U,interpolationFactor:Ns.interpolationFactor.bind(void 0,U),zoomStops:h.stops.map(Z=>Z[0]),evaluate:({zoom:Z})=>A(h,l,Z,O,z)}}return{kind:"source",evaluate(U,Z){const Q=Z&&Z.properties?Z.properties[h.property]:void 0;return Q===void 0?Vl(h.default,l.default):A(h,l,Q,O,z)}}}function Vl(h,l,f){return h!==void 0?h:l!==void 0?l:f!==void 0?f:void 0}function _i(h,l,f,m,x){return Vl(typeof f===x?m[f]:void 0,h.default,l.default)}function mi(h,l,f){if(Gr(f)!=="number")return Vl(h.default,l.default);const m=h.stops.length;if(m===1||f<=h.stops[0][0])return h.stops[0][1];if(f>=h.stops[m-1][0])return h.stops[m-1][1];const x=kc(h.stops.map(E=>E[0]),f);return h.stops[x][1]}function eh(h,l,f){const m=h.base!==void 0?h.base:1;if(Gr(f)!=="number")return Vl(h.default,l.default);const x=h.stops.length;if(x===1||f<=h.stops[0][0])return h.stops[0][1];if(f>=h.stops[x-1][0])return h.stops[x-1][1];const E=kc(h.stops.map(U=>U[0]),f),T=function(U,Z,Q,ne){const se=ne-Q,we=U-Q;return se===0?0:Z===1?we/se:(Math.pow(Z,we)-1)/(Math.pow(Z,se)-1)}(f,m,h.stops[E][0],h.stops[E+1][0]),A=h.stops[E][1],O=h.stops[E+1][1],z=Os[l.type]||f_;return typeof A.evaluate=="function"?{evaluate(...U){const Z=A.evaluate.apply(void 0,U),Q=O.evaluate.apply(void 0,U);if(Z!==void 0&&Q!==void 0)return z(Z,Q,T,h.colorSpace)}}:z(A,O,T,h.colorSpace)}function ey(h,l,f){switch(l.type){case"color":f=mr.parse(f);break;case"formatted":f=ei.fromString(f.toString());break;case"resolvedImage":f=Sn.fromString(f.toString());break;case"padding":f=Ur.parse(f);break;default:Gr(f)===l.type||l.type==="enum"&&l.values[f]||(f=void 0)}return Vl(f,h.default,l.default)}so.register(Oc,{error:[{kind:"error"},[wr],(h,[l])=>{throw new Ti(l.evaluate(h))}],typeof:[wr,[sr],(h,[l])=>Te(xi(l.evaluate(h)))],"to-rgba":[Se(Ft,4),[wi],(h,[l])=>{const[f,m,x,E]=l.evaluate(h).rgb;return[255*f,255*m,255*x,E]}],rgb:[wi,[Ft,Ft,Ft],Xv],rgba:[wi,[Ft,Ft,Ft,Ft],Xv],has:{type:yr,overloads:[[[wr],(h,[l])=>Yv(l.evaluate(h),h.properties())],[[wr,ps],(h,[l,f])=>Yv(l.evaluate(h),f.evaluate(h))]]},get:{type:sr,overloads:[[[wr],(h,[l])=>Cg(l.evaluate(h),h.properties())],[[wr,ps],(h,[l,f])=>Cg(l.evaluate(h),f.evaluate(h))]]},"feature-state":[sr,[wr],(h,[l])=>Cg(l.evaluate(h),h.featureState||{})],properties:[ps,[],h=>h.properties()],"geometry-type":[wr,[],h=>h.geometryType()],id:[sr,[],h=>h.id()],zoom:[Ft,[],h=>h.globals.zoom],"heatmap-density":[Ft,[],h=>h.globals.heatmapDensity||0],"line-progress":[Ft,[],h=>h.globals.lineProgress||0],accumulated:[sr,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[Ft,Gl(Ft),(h,l)=>{let f=0;for(const m of l)f+=m.evaluate(h);return f}],"*":[Ft,Gl(Ft),(h,l)=>{let f=1;for(const m of l)f*=m.evaluate(h);return f}],"-":{type:Ft,overloads:[[[Ft,Ft],(h,[l,f])=>l.evaluate(h)-f.evaluate(h)],[[Ft],(h,[l])=>-l.evaluate(h)]]},"/":[Ft,[Ft,Ft],(h,[l,f])=>l.evaluate(h)/f.evaluate(h)],"%":[Ft,[Ft,Ft],(h,[l,f])=>l.evaluate(h)%f.evaluate(h)],ln2:[Ft,[],()=>Math.LN2],pi:[Ft,[],()=>Math.PI],e:[Ft,[],()=>Math.E],"^":[Ft,[Ft,Ft],(h,[l,f])=>Math.pow(l.evaluate(h),f.evaluate(h))],sqrt:[Ft,[Ft],(h,[l])=>Math.sqrt(l.evaluate(h))],log10:[Ft,[Ft],(h,[l])=>Math.log(l.evaluate(h))/Math.LN10],ln:[Ft,[Ft],(h,[l])=>Math.log(l.evaluate(h))],log2:[Ft,[Ft],(h,[l])=>Math.log(l.evaluate(h))/Math.LN2],sin:[Ft,[Ft],(h,[l])=>Math.sin(l.evaluate(h))],cos:[Ft,[Ft],(h,[l])=>Math.cos(l.evaluate(h))],tan:[Ft,[Ft],(h,[l])=>Math.tan(l.evaluate(h))],asin:[Ft,[Ft],(h,[l])=>Math.asin(l.evaluate(h))],acos:[Ft,[Ft],(h,[l])=>Math.acos(l.evaluate(h))],atan:[Ft,[Ft],(h,[l])=>Math.atan(l.evaluate(h))],min:[Ft,Gl(Ft),(h,l)=>Math.min(...l.map(f=>f.evaluate(h)))],max:[Ft,Gl(Ft),(h,l)=>Math.max(...l.map(f=>f.evaluate(h)))],abs:[Ft,[Ft],(h,[l])=>Math.abs(l.evaluate(h))],round:[Ft,[Ft],(h,[l])=>{const f=l.evaluate(h);return f<0?-Math.round(-f):Math.round(f)}],floor:[Ft,[Ft],(h,[l])=>Math.floor(l.evaluate(h))],ceil:[Ft,[Ft],(h,[l])=>Math.ceil(l.evaluate(h))],"filter-==":[yr,[wr,sr],(h,[l,f])=>h.properties()[l.value]===f.value],"filter-id-==":[yr,[sr],(h,[l])=>h.id()===l.value],"filter-type-==":[yr,[wr],(h,[l])=>h.geometryType()===l.value],"filter-<":[yr,[wr,sr],(h,[l,f])=>{const m=h.properties()[l.value],x=f.value;return typeof m==typeof x&&m<x}],"filter-id-<":[yr,[sr],(h,[l])=>{const f=h.id(),m=l.value;return typeof f==typeof m&&f<m}],"filter->":[yr,[wr,sr],(h,[l,f])=>{const m=h.properties()[l.value],x=f.value;return typeof m==typeof x&&m>x}],"filter-id->":[yr,[sr],(h,[l])=>{const f=h.id(),m=l.value;return typeof f==typeof m&&f>m}],"filter-<=":[yr,[wr,sr],(h,[l,f])=>{const m=h.properties()[l.value],x=f.value;return typeof m==typeof x&&m<=x}],"filter-id-<=":[yr,[sr],(h,[l])=>{const f=h.id(),m=l.value;return typeof f==typeof m&&f<=m}],"filter->=":[yr,[wr,sr],(h,[l,f])=>{const m=h.properties()[l.value],x=f.value;return typeof m==typeof x&&m>=x}],"filter-id->=":[yr,[sr],(h,[l])=>{const f=h.id(),m=l.value;return typeof f==typeof m&&f>=m}],"filter-has":[yr,[sr],(h,[l])=>l.value in h.properties()],"filter-has-id":[yr,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[yr,[Se(wr)],(h,[l])=>l.value.indexOf(h.geometryType())>=0],"filter-id-in":[yr,[Se(sr)],(h,[l])=>l.value.indexOf(h.id())>=0],"filter-in-small":[yr,[wr,Se(sr)],(h,[l,f])=>f.value.indexOf(h.properties()[l.value])>=0],"filter-in-large":[yr,[wr,Se(sr)],(h,[l,f])=>function(m,x,E,T){for(;E<=T;){const A=E+T>>1;if(x[A]===m)return!0;x[A]>m?T=A-1:E=A+1}return!1}(h.properties()[l.value],f.value,0,f.value.length-1)],all:{type:yr,overloads:[[[yr,yr],(h,[l,f])=>l.evaluate(h)&&f.evaluate(h)],[Gl(yr),(h,l)=>{for(const f of l)if(!f.evaluate(h))return!1;return!0}]]},any:{type:yr,overloads:[[[yr,yr],(h,[l,f])=>l.evaluate(h)||f.evaluate(h)],[Gl(yr),(h,l)=>{for(const f of l)if(f.evaluate(h))return!0;return!1}]]},"!":[yr,[yr],(h,[l])=>!l.evaluate(h)],"is-supported-script":[yr,[wr],(h,[l])=>{const f=h.globals&&h.globals.isSupportedScript;return!f||f(l.evaluate(h))}],upcase:[wr,[wr],(h,[l])=>l.evaluate(h).toUpperCase()],downcase:[wr,[wr],(h,[l])=>l.evaluate(h).toLowerCase()],concat:[wr,Gl(sr),(h,l)=>l.map(f=>zr(f.evaluate(h))).join("")],"resolved-locale":[wr,[Ln],(h,[l])=>l.evaluate(h).resolvedLocale()]});class bg{constructor(l,f){var m;this.expression=l,this._warningHistory={},this._evaluator=new ag,this._defaultValue=f?(m=f).type==="color"&&Ci(m.default)?new mr(0,0,0,0):m.type==="color"?mr.parse(m.default)||null:m.type==="padding"?Ur.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?ti.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(l,f,m,x,E,T){return this._evaluator.globals=l,this._evaluator.feature=f,this._evaluator.featureState=m,this._evaluator.canonical=x,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(l,f,m,x,E,T){this._evaluator.globals=l,this._evaluator.feature=f||null,this._evaluator.featureState=m||null,this._evaluator.canonical=x,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=T||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Ti(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function Ud(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Oc}function Wd(h,l){const f=new Fd(Oc,kd,[],l?function(x){const E={color:wi,string:wr,number:Ft,enum:wr,boolean:yr,formatted:be,padding:Y,resolvedImage:te,variableAnchorOffsetCollection:ge};return x.type==="array"?Se(E[x.value]||sr,x.length):E[x.type]}(l):void 0),m=f.parse(h,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Qv(new bg(m,l)):nl(f.errors)}class Sg{constructor(l,f){this.kind=l,this._styleExpression=f,this.isStateDependent=l!=="constant"&&!Ju(f.expression)}evaluateWithoutErrorHandling(l,f,m,x,E,T){return this._styleExpression.evaluateWithoutErrorHandling(l,f,m,x,E,T)}evaluate(l,f,m,x,E,T){return this._styleExpression.evaluate(l,f,m,x,E,T)}}class jd{constructor(l,f,m,x){this.kind=l,this.zoomStops=m,this._styleExpression=f,this.isStateDependent=l!=="camera"&&!Ju(f.expression),this.interpolationType=x}evaluateWithoutErrorHandling(l,f,m,x,E,T){return this._styleExpression.evaluateWithoutErrorHandling(l,f,m,x,E,T)}evaluate(l,f,m,x,E,T){return this._styleExpression.evaluate(l,f,m,x,E,T)}interpolationFactor(l,f,m){return this.interpolationType?Ns.interpolationFactor(this.interpolationType,l,f,m):0}}function Eg(h,l){const f=Wd(h,l);if(f.result==="error")return f;const m=f.value.expression,x=Ld(m);if(!x&&!Nc(l))return nl([new Yr("","data expressions not supported")]);const E=Od(m,["zoom"]);if(!E&&!Jv(l))return nl([new Yr("","zoom expressions not supported")]);const T=rh(m);return T||E?T instanceof Yr?nl([T]):T instanceof Ns&&!_g(l)?nl([new Yr("",'"interpolate" expressions cannot be used with this property')]):Qv(T?new jd(x?"camera":"composite",f.value,T.labels,T instanceof Ns?T.interpolation:void 0):new Sg(x?"constant":"source",f.value)):nl([new Yr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class th{constructor(l,f){this._parameters=l,this._specification=f,Ji(this,kr(this._parameters,this._specification))}static deserialize(l){return new th(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function rh(h){let l=null;if(h instanceof zd)l=rh(h.result);else if(h instanceof Bd){for(const f of h.args)if(l=rh(f),l)break}else(h instanceof il||h instanceof Ns)&&h.input instanceof so&&h.input.name==="zoom"&&(l=h);return l instanceof Yr||h.eachChild(f=>{const m=rh(f);m instanceof Yr?l=m:!l&&m?l=new Yr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&m&&l!==m&&(l=new Yr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function ih(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const l of h.slice(1))if(!ih(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const p_={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Rg(h){if(h==null)return{filter:()=>!0,needGeometry:!1};ih(h)||(h=$d(h));const l=Wd(h,p_);if(l.result==="error")throw new Error(l.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,m,x)=>l.value.evaluate(f,m,{},x),needGeometry:ty(h)}}function g_(h,l){return h<l?-1:h>l?1:0}function ty(h){if(!Array.isArray(h))return!1;if(h[0]==="within")return!0;for(let l=1;l<h.length;l++)if(ty(h[l]))return!0;return!1}function $d(h){if(!h)return!0;const l=h[0];return h.length<=1?l!=="any":l==="=="?Tg(h[1],h[2],"=="):l==="!="?nh(Tg(h[1],h[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Tg(h[1],h[2],l):l==="any"?(f=h.slice(1),["any"].concat(f.map($d))):l==="all"?["all"].concat(h.slice(1).map($d)):l==="none"?["all"].concat(h.slice(1).map($d).map(nh)):l==="in"?ry(h[1],h.slice(2)):l==="!in"?nh(ry(h[1],h.slice(2))):l==="has"?iy(h[1]):l==="!has"?nh(iy(h[1])):l!=="within"||h;var f}function Tg(h,l,f){switch(h){case"$type":return[`filter-type-${f}`,l];case"$id":return[`filter-id-${f}`,l];default:return[`filter-${f}`,h,l]}}function ry(h,l){if(l.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(f=>typeof f!=typeof l[0])?["filter-in-large",h,["literal",l.sort(g_)]]:["filter-in-small",h,["literal",l]]}}function iy(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function nh(h){return["!",h]}function qd(h){const l=typeof h;if(l==="number"||l==="boolean"||l==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let x="[";for(const E of h)x+=`${qd(E)},`;return`${x}]`}const f=Object.keys(h).sort();let m="{";for(let x=0;x<f.length;x++)m+=`${JSON.stringify(f[x])}:${qd(h[f[x]])},`;return`${m}}`}function Kd(h){let l="";for(const f of Jt)l+=`/${qd(h[f])}`;return l}function ny(h){const l=h.value;return l?[new Tt(h.key,l,"constants have been deprecated as of v8")]:[]}function Pi(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Hl(h){if(Array.isArray(h))return h.map(Hl);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const l={};for(const f in h)l[f]=Hl(h[f]);return l}return Pi(h)}function gs(h){const l=h.key,f=h.value,m=h.valueSpec||{},x=h.objectElementValidators||{},E=h.style,T=h.styleSpec,A=h.validateSpec;let O=[];const z=Gr(f);if(z!=="object")return[new Tt(l,f,`object expected, ${z} found`)];for(const U in f){const Z=U.split(".")[0],Q=m[Z]||m["*"];let ne;if(x[Z])ne=x[Z];else if(m[Z])ne=A;else if(x["*"])ne=x["*"];else{if(!m["*"]){O.push(new Tt(l,f[U],`unknown property "${U}"`));continue}ne=A}O=O.concat(ne({key:(l&&`${l}.`)+U,value:f[U],valueSpec:Q,style:E,styleSpec:T,object:f,objectKey:U,validateSpec:A},f))}for(const U in m)x[U]||m[U].required&&m[U].default===void 0&&f[U]===void 0&&O.push(new Tt(l,f,`missing required property "${U}"`));return O}function Bc(h){const l=h.value,f=h.valueSpec,m=h.style,x=h.styleSpec,E=h.key,T=h.arrayElementValidator||h.validateSpec;if(Gr(l)!=="array")return[new Tt(E,l,`array expected, ${Gr(l)} found`)];if(f.length&&l.length!==f.length)return[new Tt(E,l,`array length ${f.length} expected, length ${l.length} found`)];if(f["min-length"]&&l.length<f["min-length"])return[new Tt(E,l,`array length at least ${f["min-length"]} expected, length ${l.length} found`)];let A={type:f.value,values:f.values};x.$version<7&&(A.function=f.function),Gr(f.value)==="object"&&(A=f.value);let O=[];for(let z=0;z<l.length;z++)O=O.concat(T({array:l,arrayIndex:z,value:l[z],valueSpec:A,validateSpec:h.validateSpec,style:m,styleSpec:x,key:`${E}[${z}]`}));return O}function sh(h){const l=h.key,f=h.value,m=h.valueSpec;let x=Gr(f);return x==="number"&&f!=f&&(x="NaN"),x!=="number"?[new Tt(l,f,`number expected, ${x} found`)]:"minimum"in m&&f<m.minimum?[new Tt(l,f,`${f} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&f>m.maximum?[new Tt(l,f,`${f} is greater than the maximum value ${m.maximum}`)]:[]}function Zd(h){const l=h.valueSpec,f=Pi(h.value.type);let m,x,E,T={};const A=f!=="categorical"&&h.value.property===void 0,O=!A,z=Gr(h.value.stops)==="array"&&Gr(h.value.stops[0])==="array"&&Gr(h.value.stops[0][0])==="object",U=gs({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(ne){if(f==="identity")return[new Tt(ne.key,ne.value,'identity function may not have a "stops" property')];let se=[];const we=ne.value;return se=se.concat(Bc({key:ne.key,value:we,valueSpec:ne.valueSpec,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec,arrayElementValidator:Z})),Gr(we)==="array"&&we.length===0&&se.push(new Tt(ne.key,we,"array must have at least one stop")),se},default:function(ne){return ne.validateSpec({key:ne.key,value:ne.value,valueSpec:l,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec})}}});return f==="identity"&&A&&U.push(new Tt(h.key,h.value,'missing required property "property"')),f==="identity"||h.value.stops||U.push(new Tt(h.key,h.value,'missing required property "stops"')),f==="exponential"&&h.valueSpec.expression&&!_g(h.valueSpec)&&U.push(new Tt(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(O&&!Nc(h.valueSpec)?U.push(new Tt(h.key,h.value,"property functions not supported")):A&&!Jv(h.valueSpec)&&U.push(new Tt(h.key,h.value,"zoom functions not supported"))),f!=="categorical"&&!z||h.value.property!==void 0||U.push(new Tt(h.key,h.value,'"property" property is required')),U;function Z(ne){let se=[];const we=ne.value,Pe=ne.key;if(Gr(we)!=="array")return[new Tt(Pe,we,`array expected, ${Gr(we)} found`)];if(we.length!==2)return[new Tt(Pe,we,`array length 2 expected, length ${we.length} found`)];if(z){if(Gr(we[0])!=="object")return[new Tt(Pe,we,`object expected, ${Gr(we[0])} found`)];if(we[0].zoom===void 0)return[new Tt(Pe,we,"object stop key must have zoom")];if(we[0].value===void 0)return[new Tt(Pe,we,"object stop key must have value")];if(E&&E>Pi(we[0].zoom))return[new Tt(Pe,we[0].zoom,"stop zoom values must appear in ascending order")];Pi(we[0].zoom)!==E&&(E=Pi(we[0].zoom),x=void 0,T={}),se=se.concat(gs({key:`${Pe}[0]`,value:we[0],valueSpec:{zoom:{}},validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{zoom:sh,value:Q}}))}else se=se.concat(Q({key:`${Pe}[0]`,value:we[0],validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec},we));return Ud(Hl(we[1]))?se.concat([new Tt(`${Pe}[1]`,we[1],"expressions are not allowed in function stops.")]):se.concat(ne.validateSpec({key:`${Pe}[1]`,value:we[1],valueSpec:l,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec}))}function Q(ne,se){const we=Gr(ne.value),Pe=Pi(ne.value),De=ne.value!==null?ne.value:se;if(m){if(we!==m)return[new Tt(ne.key,De,`${we} stop domain type must match previous stop domain type ${m}`)]}else m=we;if(we!=="number"&&we!=="string"&&we!=="boolean")return[new Tt(ne.key,De,"stop domain value must be a number, string, or boolean")];if(we!=="number"&&f!=="categorical"){let $e=`number expected, ${we} found`;return Nc(l)&&f===void 0&&($e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Tt(ne.key,De,$e)]}return f!=="categorical"||we!=="number"||isFinite(Pe)&&Math.floor(Pe)===Pe?f!=="categorical"&&we==="number"&&x!==void 0&&Pe<x?[new Tt(ne.key,De,"stop domain values must appear in ascending order")]:(x=Pe,f==="categorical"&&Pe in T?[new Tt(ne.key,De,"stop domain values must be unique")]:(T[Pe]=!0,[])):[new Tt(ne.key,De,`integer expected, found ${Pe}`)]}}function Ul(h){const l=(h.expressionContext==="property"?Eg:Wd)(Hl(h.value),h.valueSpec);if(l.result==="error")return l.value.map(m=>new Tt(`${h.key}${m.key}`,h.value,m.message));const f=l.value.expression||l.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!f.outputDefined())return[new Tt(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!Ju(f))return[new Tt(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!Ju(f))return[new Tt(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Od(f,["zoom","feature-state"]))return[new Tt(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!Ld(f))return[new Tt(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function oh(h){const l=h.key,f=h.value,m=h.valueSpec,x=[];return Array.isArray(m.values)?m.values.indexOf(Pi(f))===-1&&x.push(new Tt(l,f,`expected one of [${m.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(m.values).indexOf(Pi(f))===-1&&x.push(new Tt(l,f,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(f)} found`)),x}function zc(h){return ih(Hl(h.value))?Ul(Ji({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):sy(h)}function sy(h){const l=h.value,f=h.key;if(Gr(l)!=="array")return[new Tt(f,l,`array expected, ${Gr(l)} found`)];const m=h.styleSpec;let x,E=[];if(l.length<1)return[new Tt(f,l,"filter array must have at least 1 element")];switch(E=E.concat(oh({key:`${f}[0]`,value:l[0],valueSpec:m.filter_operator,style:h.style,styleSpec:h.styleSpec})),Pi(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Pi(l[1])==="$type"&&E.push(new Tt(f,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&E.push(new Tt(f,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(x=Gr(l[1]),x!=="string"&&E.push(new Tt(`${f}[1]`,l[1],`string expected, ${x} found`)));for(let T=2;T<l.length;T++)x=Gr(l[T]),Pi(l[1])==="$type"?E=E.concat(oh({key:`${f}[${T}]`,value:l[T],valueSpec:m.geometry_type,style:h.style,styleSpec:h.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&E.push(new Tt(`${f}[${T}]`,l[T],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let T=1;T<l.length;T++)E=E.concat(sy({key:`${f}[${T}]`,value:l[T],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":x=Gr(l[1]),l.length!==2?E.push(new Tt(f,l,`filter array for "${l[0]}" operator must have 2 elements`)):x!=="string"&&E.push(new Tt(`${f}[1]`,l[1],`string expected, ${x} found`));break;case"within":x=Gr(l[1]),l.length!==2?E.push(new Tt(f,l,`filter array for "${l[0]}" operator must have 2 elements`)):x!=="object"&&E.push(new Tt(`${f}[1]`,l[1],`object expected, ${x} found`))}return E}function oy(h,l){const f=h.key,m=h.validateSpec,x=h.style,E=h.styleSpec,T=h.value,A=h.objectKey,O=E[`${l}_${h.layerType}`];if(!O)return[];const z=A.match(/^(.*)-transition$/);if(l==="paint"&&z&&O[z[1]]&&O[z[1]].transition)return m({key:f,value:T,valueSpec:E.transition,style:x,styleSpec:E});const U=h.valueSpec||O[A];if(!U)return[new Tt(f,T,`unknown property "${A}"`)];let Z;if(Gr(T)==="string"&&Nc(U)&&!U.tokens&&(Z=/^{([^}]+)}$/.exec(T)))return[new Tt(f,T,`"${A}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Z[1])} }\`.`)];const Q=[];return h.layerType==="symbol"&&(A==="text-field"&&x&&!x.glyphs&&Q.push(new Tt(f,T,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Ci(Hl(T))&&Pi(T.type)==="identity"&&Q.push(new Tt(f,T,'"text-font" does not support identity functions'))),Q.concat(m({key:h.key,value:T,valueSpec:U,style:x,styleSpec:E,expressionContext:"property",propertyType:l,propertyKey:A}))}function ay(h){return oy(h,"paint")}function ly(h){return oy(h,"layout")}function cy(h){let l=[];const f=h.value,m=h.key,x=h.style,E=h.styleSpec;f.type||f.ref||l.push(new Tt(m,f,'either "type" or "ref" is required'));let T=Pi(f.type);const A=Pi(f.ref);if(f.id){const O=Pi(f.id);for(let z=0;z<h.arrayIndex;z++){const U=x.layers[z];Pi(U.id)===O&&l.push(new Tt(m,f.id,`duplicate layer id "${f.id}", previously used at line ${U.id.__line__}`))}}if("ref"in f){let O;["type","source","source-layer","filter","layout"].forEach(z=>{z in f&&l.push(new Tt(m,f[z],`"${z}" is prohibited for ref layers`))}),x.layers.forEach(z=>{Pi(z.id)===A&&(O=z)}),O?O.ref?l.push(new Tt(m,f.ref,"ref cannot reference another ref layer")):T=Pi(O.type):l.push(new Tt(m,f.ref,`ref layer "${A}" not found`))}else if(T!=="background")if(f.source){const O=x.sources&&x.sources[f.source],z=O&&Pi(O.type);O?z==="vector"&&T==="raster"?l.push(new Tt(m,f.source,`layer "${f.id}" requires a raster source`)):z!=="raster-dem"&&T==="hillshade"?l.push(new Tt(m,f.source,`layer "${f.id}" requires a raster-dem source`)):z==="raster"&&T!=="raster"?l.push(new Tt(m,f.source,`layer "${f.id}" requires a vector source`)):z!=="vector"||f["source-layer"]?z==="raster-dem"&&T!=="hillshade"?l.push(new Tt(m,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!f.paint||!f.paint["line-gradient"]||z==="geojson"&&O.lineMetrics||l.push(new Tt(m,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new Tt(m,f,`layer "${f.id}" must specify a "source-layer"`)):l.push(new Tt(m,f.source,`source "${f.source}" not found`))}else l.push(new Tt(m,f,'missing required property "source"'));return l=l.concat(gs({key:m,value:f,valueSpec:E.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${m}.type`,value:f.type,valueSpec:E.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:f,objectKey:"type"}),filter:zc,layout:O=>gs({layer:f,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":z=>ly(Ji({layerType:T},z))}}),paint:O=>gs({layer:f,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":z=>ay(Ji({layerType:T},z))}})}})),l}function Xo(h){const l=h.value,f=h.key,m=Gr(l);return m!=="string"?[new Tt(f,l,`string expected, ${m} found`)]:[]}const ah={promoteId:function({key:h,value:l}){if(Gr(l)==="string")return Xo({key:h,value:l});{const f=[];for(const m in l)f.push(...Xo({key:`${h}.${m}`,value:l[m]}));return f}}};function Bs(h){const l=h.value,f=h.key,m=h.styleSpec,x=h.style,E=h.validateSpec;if(!l.type)return[new Tt(f,l,'"type" is required')];const T=Pi(l.type);let A;switch(T){case"vector":case"raster":return A=gs({key:f,value:l,valueSpec:m[`source_${T.replace("-","_")}`],style:h.style,styleSpec:m,objectElementValidators:ah,validateSpec:E}),A;case"raster-dem":return A=function(O){var z;const U=(z=O.sourceName)!==null&&z!==void 0?z:"",Z=O.value,Q=O.styleSpec,ne=Q.source_raster_dem,se=O.style;let we=[];const Pe=Gr(Z);if(Z===void 0)return we;if(Pe!=="object")return we.push(new Tt("source_raster_dem",Z,`object expected, ${Pe} found`)),we;const De=Pi(Z.encoding)==="custom",$e=["redFactor","greenFactor","blueFactor","baseShift"],Oe=O.value.encoding?`"${O.value.encoding}"`:"Default";for(const Ze in Z)!De&&$e.includes(Ze)?we.push(new Tt(Ze,Z[Ze],`In "${U}": "${Ze}" is only valid when "encoding" is set to "custom". ${Oe} encoding found`)):ne[Ze]?we=we.concat(O.validateSpec({key:Ze,value:Z[Ze],valueSpec:ne[Ze],validateSpec:O.validateSpec,style:se,styleSpec:Q})):we.push(new Tt(Ze,Z[Ze],`unknown property "${Ze}"`));return we}({sourceName:f,value:l,style:h.style,styleSpec:m,validateSpec:E}),A;case"geojson":if(A=gs({key:f,value:l,valueSpec:m.source_geojson,style:x,styleSpec:m,validateSpec:E,objectElementValidators:ah}),l.cluster)for(const O in l.clusterProperties){const[z,U]=l.clusterProperties[O],Z=typeof z=="string"?[z,["accumulated"],["get",O]]:z;A.push(...Ul({key:`${f}.${O}.map`,value:U,expressionContext:"cluster-map"})),A.push(...Ul({key:`${f}.${O}.reduce`,value:Z,expressionContext:"cluster-reduce"}))}return A;case"video":return gs({key:f,value:l,valueSpec:m.source_video,style:x,validateSpec:E,styleSpec:m});case"image":return gs({key:f,value:l,valueSpec:m.source_image,style:x,validateSpec:E,styleSpec:m});case"canvas":return[new Tt(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return oh({key:`${f}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function lh(h){const l=h.value,f=h.styleSpec,m=f.light,x=h.style;let E=[];const T=Gr(l);if(l===void 0)return E;if(T!=="object")return E=E.concat([new Tt("light",l,`object expected, ${T} found`)]),E;for(const A in l){const O=A.match(/^(.*)-transition$/);E=E.concat(O&&m[O[1]]&&m[O[1]].transition?h.validateSpec({key:A,value:l[A],valueSpec:f.transition,validateSpec:h.validateSpec,style:x,styleSpec:f}):m[A]?h.validateSpec({key:A,value:l[A],valueSpec:m[A],validateSpec:h.validateSpec,style:x,styleSpec:f}):[new Tt(A,l[A],`unknown property "${A}"`)])}return E}function uy(h){const l=h.value,f=h.styleSpec,m=f.terrain,x=h.style;let E=[];const T=Gr(l);if(l===void 0)return E;if(T!=="object")return E=E.concat([new Tt("terrain",l,`object expected, ${T} found`)]),E;for(const A in l)E=E.concat(m[A]?h.validateSpec({key:A,value:l[A],valueSpec:m[A],validateSpec:h.validateSpec,style:x,styleSpec:f}):[new Tt(A,l[A],`unknown property "${A}"`)]);return E}function hy(h){let l=[];const f=h.value,m=h.key;if(Array.isArray(f)){const x=[],E=[];for(const T in f)f[T].id&&x.includes(f[T].id)&&l.push(new Tt(m,f,`all the sprites' ids must be unique, but ${f[T].id} is duplicated`)),x.push(f[T].id),f[T].url&&E.includes(f[T].url)&&l.push(new Tt(m,f,`all the sprites' URLs must be unique, but ${f[T].url} is duplicated`)),E.push(f[T].url),l=l.concat(gs({key:`${m}[${T}]`,value:f[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return l}return Xo({key:m,value:f})}const dy={"*":()=>[],array:Bc,boolean:function(h){const l=h.value,f=h.key,m=Gr(l);return m!=="boolean"?[new Tt(f,l,`boolean expected, ${m} found`)]:[]},number:sh,color:function(h){const l=h.key,f=h.value,m=Gr(f);return m!=="string"?[new Tt(l,f,`color expected, ${m} found`)]:mr.parse(String(f))?[]:[new Tt(l,f,`color expected, "${f}" found`)]},constants:ny,enum:oh,filter:zc,function:Zd,layer:cy,object:gs,source:Bs,light:lh,terrain:uy,string:Xo,formatted:function(h){return Xo(h).length===0?[]:Ul(h)},resolvedImage:function(h){return Xo(h).length===0?[]:Ul(h)},padding:function(h){const l=h.key,f=h.value;if(Gr(f)==="array"){if(f.length<1||f.length>4)return[new Tt(l,f,`padding requires 1 to 4 values; ${f.length} values found`)];const m={type:"number"};let x=[];for(let E=0;E<f.length;E++)x=x.concat(h.validateSpec({key:`${l}[${E}]`,value:f[E],validateSpec:h.validateSpec,valueSpec:m}));return x}return sh({key:l,value:f,valueSpec:{}})},variableAnchorOffsetCollection:function(h){const l=h.key,f=h.value,m=Gr(f),x=h.styleSpec;if(m!=="array"||f.length<1||f.length%2!=0)return[new Tt(l,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let E=[];for(let T=0;T<f.length;T+=2)E=E.concat(oh({key:`${l}[${T}]`,value:f[T],valueSpec:x.layout_symbol["text-anchor"]})),E=E.concat(Bc({key:`${l}[${T+1}]`,value:f[T+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:x}));return E},sprite:hy};function sl(h){const l=h.value,f=h.valueSpec,m=h.styleSpec;return h.validateSpec=sl,f.expression&&Ci(Pi(l))?Zd(h):f.expression&&Ud(Hl(l))?Ul(h):f.type&&dy[f.type]?dy[f.type](h):gs(Ji({},h,{valueSpec:f.type?m[f.type]:f}))}function fy(h){const l=h.value,f=h.key,m=Xo(h);return m.length||(l.indexOf("{fontstack}")===-1&&m.push(new Tt(f,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&m.push(new Tt(f,l,'"glyphs" url must include a "{range}" token'))),m}function oo(h,l=Ke){let f=[];return f=f.concat(sl({key:"",value:h,valueSpec:l.$root,styleSpec:l,style:h,validateSpec:sl,objectElementValidators:{glyphs:fy,"*":()=>[]}})),h.constants&&(f=f.concat(ny({key:"constants",value:h.constants}))),Xd(f)}function ba(h){return function(l){return h({...l,validateSpec:sl})}}function Xd(h){return[].concat(h).sort((l,f)=>l.line-f.line)}function Sa(h){return function(...l){return Xd(h.apply(this,l))}}oo.source=Sa(ba(Bs)),oo.sprite=Sa(ba(hy)),oo.glyphs=Sa(ba(fy)),oo.light=Sa(ba(lh)),oo.terrain=Sa(ba(uy)),oo.layer=Sa(ba(cy)),oo.filter=Sa(ba(zc)),oo.paintProperty=Sa(ba(ay)),oo.layoutProperty=Sa(ba(ly));const Ea=oo,m_=Ea.light,Pg=Ea.paintProperty,py=Ea.layoutProperty;function Yd(h,l){let f=!1;if(l&&l.length)for(const m of l)h.fire(new hr(new Error(m.message))),f=!0;return f}class Gc{constructor(l,f,m){const x=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const T=new Int32Array(this.arrayBuffer);l=T[0],this.d=(f=T[1])+2*(m=T[2]);for(let O=0;O<this.d*this.d;O++){const z=T[3+O],U=T[3+O+1];x.push(z===U?null:T.subarray(z,U))}const A=T[3+x.length+1];this.keys=T.subarray(T[3+x.length],A),this.bboxes=T.subarray(A),this.insert=this._insertReadonly}else{this.d=f+2*m;for(let T=0;T<this.d*this.d;T++)x.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=l,this.padding=m,this.scale=f/l,this.uid=0;const E=m/f*l;this.min=-E,this.max=l+E}insert(l,f,m,x,E){this._forEachCell(f,m,x,E,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(x),this.bboxes.push(E)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,f,m,x,E,T){this.cells[E].push(T)}query(l,f,m,x,E){const T=this.min,A=this.max;if(l<=T&&f<=T&&A<=m&&A<=x&&!E)return Array.prototype.slice.call(this.keys);{const O=[];return this._forEachCell(l,f,m,x,this._queryCell,O,{},E),O}}_queryCell(l,f,m,x,E,T,A,O){const z=this.cells[E];if(z!==null){const U=this.keys,Z=this.bboxes;for(let Q=0;Q<z.length;Q++){const ne=z[Q];if(A[ne]===void 0){const se=4*ne;(O?O(Z[se+0],Z[se+1],Z[se+2],Z[se+3]):l<=Z[se+2]&&f<=Z[se+3]&&m>=Z[se+0]&&x>=Z[se+1])?(A[ne]=!0,T.push(U[ne])):A[ne]=!1}}}}_forEachCell(l,f,m,x,E,T,A,O){const z=this._convertToCellCoord(l),U=this._convertToCellCoord(f),Z=this._convertToCellCoord(m),Q=this._convertToCellCoord(x);for(let ne=z;ne<=Z;ne++)for(let se=U;se<=Q;se++){const we=this.d*se+ne;if((!O||O(this._convertFromCellCoord(ne),this._convertFromCellCoord(se),this._convertFromCellCoord(ne+1),this._convertFromCellCoord(se+1)))&&E.call(this,l,f,m,x,we,T,A,O))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,f=3+this.cells.length+1+1;let m=0;for(let T=0;T<this.cells.length;T++)m+=this.cells[T].length;const x=new Int32Array(f+m+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;let E=f;for(let T=0;T<l.length;T++){const A=l[T];x[3+T]=E,x.set(A,E),E+=A.length}return x[3+l.length]=E,x.set(this.keys,E),E+=this.keys.length,x[3+l.length+1]=E,x.set(this.bboxes,E),E+=this.bboxes.length,x.buffer}static serialize(l,f){const m=l.toArrayBuffer();return f&&f.push(m),{buffer:m}}static deserialize(l){return new Gc(l.buffer)}}const Ra={};function Kt(h,l,f={}){if(Ra[h])throw new Error(`${h} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:h,writeable:!1}),Ra[h]={klass:l,omit:f.omit||[],shallow:f.shallow||[]}}Kt("Object",Object),Kt("TransferableGridIndex",Gc),Kt("Color",mr),Kt("Error",Error),Kt("AJAXError",at),Kt("ResolvedImage",Sn),Kt("StylePropertyFunction",th),Kt("StyleExpression",bg,{omit:["_evaluator"]}),Kt("ZoomDependentExpression",jd),Kt("ZoomConstantExpression",Sg),Kt("CompoundExpression",so,{omit:["_evaluate"]});for(const h in Oc)Oc[h]._classRegistryKey||Kt(`Expression_${h}`,Oc[h]);function Qd(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function ol(h,l){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob)return h;if(Qd(h)||Ye(h))return l&&l.push(h),h;if(ArrayBuffer.isView(h)){const f=h;return l&&l.push(f.buffer),f}if(h instanceof ImageData)return l&&l.push(h.data.buffer),h;if(Array.isArray(h)){const f=[];for(const m of h)f.push(ol(m,l));return f}if(typeof h=="object"){const f=h.constructor,m=f._classRegistryKey;if(!m)throw new Error("can't serialize object of unregistered class");if(!Ra[m])throw new Error(`${m} is not registered.`);const x=f.serialize?f.serialize(h,l):{};if(f.serialize){if(l&&x===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const E in h){if(!h.hasOwnProperty(E)||Ra[m].omit.indexOf(E)>=0)continue;const T=h[E];x[E]=Ra[m].shallow.indexOf(E)>=0?T:ol(T,l)}h instanceof Error&&(x.message=h.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(x.$name=m),x}throw new Error("can't serialize object of type "+typeof h)}function Vc(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||Qd(h)||Ye(h)||ArrayBuffer.isView(h)||h instanceof ImageData)return h;if(Array.isArray(h))return h.map(Vc);if(typeof h=="object"){const l=h.$name||"Object";if(!Ra[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:f}=Ra[l];if(!f)throw new Error(`can't deserialize unregistered class ${l}`);if(f.deserialize)return f.deserialize(h);const m=Object.create(f.prototype);for(const x of Object.keys(h)){if(x==="$name")continue;const E=h[x];m[x]=Ra[l].shallow.indexOf(x)>=0?E:Vc(E)}return m}throw new Error("can't deserialize object of type "+typeof h)}class gy{constructor(){this.first=!0}update(l,f){const m=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=f),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=m,!0))}}const Vt={"Latin-1 Supplement":h=>h>=128&&h<=255,Arabic:h=>h>=1536&&h<=1791,"Arabic Supplement":h=>h>=1872&&h<=1919,"Arabic Extended-A":h=>h>=2208&&h<=2303,"Hangul Jamo":h=>h>=4352&&h<=4607,"Unified Canadian Aboriginal Syllabics":h=>h>=5120&&h<=5759,Khmer:h=>h>=6016&&h<=6143,"Unified Canadian Aboriginal Syllabics Extended":h=>h>=6320&&h<=6399,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"CJK Radicals Supplement":h=>h>=11904&&h<=12031,"Kangxi Radicals":h=>h>=12032&&h<=12255,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Bopomofo:h=>h>=12544&&h<=12591,"Hangul Compatibility Jamo":h=>h>=12592&&h<=12687,Kanbun:h=>h>=12688&&h<=12703,"Bopomofo Extended":h=>h>=12704&&h<=12735,"CJK Strokes":h=>h>=12736&&h<=12783,"Katakana Phonetic Extensions":h=>h>=12784&&h<=12799,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"CJK Unified Ideographs Extension A":h=>h>=13312&&h<=19903,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Yi Syllables":h=>h>=40960&&h<=42127,"Yi Radicals":h=>h>=42128&&h<=42191,"Hangul Jamo Extended-A":h=>h>=43360&&h<=43391,"Hangul Syllables":h=>h>=44032&&h<=55215,"Hangul Jamo Extended-B":h=>h>=55216&&h<=55295,"Private Use Area":h=>h>=57344&&h<=63743,"CJK Compatibility Ideographs":h=>h>=63744&&h<=64255,"Arabic Presentation Forms-A":h=>h>=64336&&h<=65023,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Arabic Presentation Forms-B":h=>h>=65136&&h<=65279,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function Mg(h){for(const l of h)if(Ag(l.charCodeAt(0)))return!0;return!1}function Fg(h){for(const l of h)if(!v_(l.charCodeAt(0)))return!1;return!0}function v_(h){return!(Vt.Arabic(h)||Vt["Arabic Supplement"](h)||Vt["Arabic Extended-A"](h)||Vt["Arabic Presentation Forms-A"](h)||Vt["Arabic Presentation Forms-B"](h))}function Ag(h){return!(h!==746&&h!==747&&(h<4352||!(Vt["Bopomofo Extended"](h)||Vt.Bopomofo(h)||Vt["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Vt["CJK Compatibility Ideographs"](h)||Vt["CJK Compatibility"](h)||Vt["CJK Radicals Supplement"](h)||Vt["CJK Strokes"](h)||!(!Vt["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Vt["CJK Unified Ideographs Extension A"](h)||Vt["CJK Unified Ideographs"](h)||Vt["Enclosed CJK Letters and Months"](h)||Vt["Hangul Compatibility Jamo"](h)||Vt["Hangul Jamo Extended-A"](h)||Vt["Hangul Jamo Extended-B"](h)||Vt["Hangul Jamo"](h)||Vt["Hangul Syllables"](h)||Vt.Hiragana(h)||Vt["Ideographic Description Characters"](h)||Vt.Kanbun(h)||Vt["Kangxi Radicals"](h)||Vt["Katakana Phonetic Extensions"](h)||Vt.Katakana(h)&&h!==12540||!(!Vt["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Vt["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Vt["Unified Canadian Aboriginal Syllabics"](h)||Vt["Unified Canadian Aboriginal Syllabics Extended"](h)||Vt["Vertical Forms"](h)||Vt["Yijing Hexagram Symbols"](h)||Vt["Yi Syllables"](h)||Vt["Yi Radicals"](h))))}function my(h){return!(Ag(h)||function(l){return!!(Vt["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||Vt["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||Vt["Letterlike Symbols"](l)||Vt["Number Forms"](l)||Vt["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||Vt["Control Pictures"](l)&&l!==9251||Vt["Optical Character Recognition"](l)||Vt["Enclosed Alphanumerics"](l)||Vt["Geometric Shapes"](l)||Vt["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||Vt["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||Vt["CJK Symbols and Punctuation"](l)||Vt.Katakana(l)||Vt["Private Use Area"](l)||Vt["CJK Compatibility Forms"](l)||Vt["Small Form Variants"](l)||Vt["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(h))}function vy(h){return h>=1424&&h<=2303||Vt["Arabic Presentation Forms-A"](h)||Vt["Arabic Presentation Forms-B"](h)}function yy(h,l){return!(!l&&vy(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Vt.Khmer(h))}function y_(h){for(const l of h)if(vy(l.charCodeAt(0)))return!0;return!1}const Ig="deferred",Dg="loading",kg="loaded";let Lg=null,ms="unavailable",al=null;const ch=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(ms="error"),Lg&&Lg(h)};function Og(){uh.fire(new Et("pluginStateChange",{pluginStatus:ms,pluginURL:al}))}const uh=new rr,Ng=function(){return ms},wy=function(){if(ms!==Ig||!al)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ms=Dg,Og(),al&&er({url:al},h=>{h?ch(h):(ms=kg,Og())})},zs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ms===kg||zs.applyArabicShaping!=null,isLoading:()=>ms===Dg,setState(h){if(!pt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ms=h.pluginStatus,al=h.pluginURL},isParsed(){if(!pt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return zs.applyArabicShaping!=null&&zs.processBidirectionalText!=null&&zs.processStyledBidirectionalText!=null},getPluginURL(){if(!pt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return al}};class hi{constructor(l,f){this.zoom=l,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new gy,this.transition={})}isSupportedScript(l){return function(f,m){for(const x of f)if(!yy(x.charCodeAt(0),m))return!1;return!0}(l,zs.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,f=l-Math.floor(l),m=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*f}}}class Jd{constructor(l,f){this.property=l,this.value=f,this.expression=function(m,x){if(Ci(m))return new th(m,x);if(Ud(m)){const E=Eg(m,x);if(E.result==="error")throw new Error(E.value.map(T=>`${T.key}: ${T.message}`).join(", "));return E.value}{let E=m;return x.type==="color"&&typeof m=="string"?E=mr.parse(m):x.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(E=ti.parse(m)):E=Ur.parse(m),{kind:"constant",evaluate:()=>E}}}(f===void 0?l.specification.default:f,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(l,f,m){return this.property.possiblyEvaluate(this,l,f,m)}}class Bg{constructor(l){this.property=l,this.value=new Jd(l,void 0)}transitioned(l,f){return new Cy(this.property,this.value,f,oe({},l.transition,this.transition),l.now)}untransitioned(){return new Cy(this.property,this.value,null,{},0)}}class xy{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return fe(this._values[l].value.value)}setValue(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Bg(this._values[l].property)),this._values[l].value=new Jd(this._values[l].property,f===null?void 0:fe(f))}getTransition(l){return fe(this._values[l].transition)}setTransition(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Bg(this._values[l].property)),this._values[l].transition=fe(f)||void 0}serialize(){const l={};for(const f of Object.keys(this._values)){const m=this.getValue(f);m!==void 0&&(l[f]=m);const x=this.getTransition(f);x!==void 0&&(l[`${f}-transition`]=x)}return l}transitioned(l,f){const m=new _y(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].transitioned(l,f._values[x]);return m}untransitioned(){const l=new _y(this._properties);for(const f of Object.keys(this._values))l._values[f]=this._values[f].untransitioned();return l}}class Cy{constructor(l,f,m,x,E){this.property=l,this.value=f,this.begin=E+x.delay||0,this.end=this.begin+x.duration||0,l.specification.transition&&(x.delay||x.duration)&&(this.prior=m)}possiblyEvaluate(l,f,m){const x=l.now||0,E=this.value.possiblyEvaluate(l,f,m),T=this.prior;if(T){if(x>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(x<this.begin)return T.possiblyEvaluate(l,f,m);{const A=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(l,f,m),E,function(O){if(O<=0)return 0;if(O>=1)return 1;const z=O*O,U=z*O;return 4*(O<.5?U:3*(O-z)+U-.75)}(A))}}return E}}class _y{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,f,m){const x=new ef(this._properties);for(const E of Object.keys(this._values))x._values[E]=this._values[E].possiblyEvaluate(l,f,m);return x}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class w_{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return this._values[l].value!==void 0}getValue(l){return fe(this._values[l].value)}setValue(l,f){this._values[l]=new Jd(this._values[l].property,f===null?void 0:fe(f))}serialize(){const l={};for(const f of Object.keys(this._values)){const m=this.getValue(f);m!==void 0&&(l[f]=m)}return l}possiblyEvaluate(l,f,m){const x=new ef(this._properties);for(const E of Object.keys(this._values))x._values[E]=this._values[E].possiblyEvaluate(l,f,m);return x}}class qn{constructor(l,f,m){this.property=l,this.value=f,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,f,m,x){return this.property.evaluate(this.value,this.parameters,l,f,m,x)}}class ef{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class cr{constructor(l){this.specification=l}possiblyEvaluate(l,f){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(f)}interpolate(l,f,m){const x=Os[this.specification.type];return x?x(l,f,m):l}}class pr{constructor(l,f){this.specification=l,this.overrides=f}possiblyEvaluate(l,f,m,x){return new qn(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(f,null,{},m,x)}:l.expression,f)}interpolate(l,f,m){if(l.value.kind!=="constant"||f.value.kind!=="constant")return l;if(l.value.value===void 0||f.value.value===void 0)return new qn(this,{kind:"constant",value:void 0},l.parameters);const x=Os[this.specification.type];if(x){const E=x(l.value.value,f.value.value,m);return new qn(this,{kind:"constant",value:E},l.parameters)}return l}evaluate(l,f,m,x,E,T){return l.kind==="constant"?l.value:l.evaluate(f,m,x,E,T)}}class hh extends pr{possiblyEvaluate(l,f,m,x){if(l.value===void 0)return new qn(this,{kind:"constant",value:void 0},f);if(l.expression.kind==="constant"){const E=l.expression.evaluate(f,null,{},m,x),T=l.property.specification.type==="resolvedImage"&&typeof E!="string"?E.name:E,A=this._calculate(T,T,T,f);return new qn(this,{kind:"constant",value:A},f)}if(l.expression.kind==="camera"){const E=this._calculate(l.expression.evaluate({zoom:f.zoom-1}),l.expression.evaluate({zoom:f.zoom}),l.expression.evaluate({zoom:f.zoom+1}),f);return new qn(this,{kind:"constant",value:E},f)}return new qn(this,l.expression,f)}evaluate(l,f,m,x,E,T){if(l.kind==="source"){const A=l.evaluate(f,m,x,E,T);return this._calculate(A,A,A,f)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(f.zoom)-1},m,x),l.evaluate({zoom:Math.floor(f.zoom)},m,x),l.evaluate({zoom:Math.floor(f.zoom)+1},m,x),f):l.value}_calculate(l,f,m,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:m,to:f}}interpolate(l){return l}}class zg{constructor(l){this.specification=l}possiblyEvaluate(l,f,m,x){if(l.value!==void 0){if(l.expression.kind==="constant"){const E=l.expression.evaluate(f,null,{},m,x);return this._calculate(E,E,E,f)}return this._calculate(l.expression.evaluate(new hi(Math.floor(f.zoom-1),f)),l.expression.evaluate(new hi(Math.floor(f.zoom),f)),l.expression.evaluate(new hi(Math.floor(f.zoom+1),f)),f)}}_calculate(l,f,m,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:m,to:f}}interpolate(l){return l}}class Gg{constructor(l){this.specification=l}possiblyEvaluate(l,f,m,x){return!!l.expression.evaluate(f,null,{},m,x)}interpolate(){return!1}}class Hi{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const f in l){const m=l[f];m.specification.overridable&&this.overridableProperties.push(f);const x=this.defaultPropertyValues[f]=new Jd(m,void 0),E=this.defaultTransitionablePropertyValues[f]=new Bg(m);this.defaultTransitioningPropertyValues[f]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=x.possiblyEvaluate({})}}}Kt("DataDrivenProperty",pr),Kt("DataConstantProperty",cr),Kt("CrossFadedDataDrivenProperty",hh),Kt("CrossFadedProperty",zg),Kt("ColorRampProperty",Gg);const Vg="-transition";class ao extends rr{constructor(l,f){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),f.layout&&(this._unevaluatedLayout=new w_(f.layout)),f.paint)){this._transitionablePaint=new xy(f.paint);for(const m in l.paint)this.setPaintProperty(m,l.paint[m],{validate:!1});for(const m in l.layout)this.setLayoutProperty(m,l.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ef(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,f,m={}){f!=null&&this._validate(py,`layers.${this.id}.layout.${l}`,l,f,m)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,f):this.visibility=f)}getPaintProperty(l){return l.endsWith(Vg)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,f,m={}){if(f!=null&&this._validate(Pg,`layers.${this.id}.paint.${l}`,l,f,m))return!1;if(l.endsWith(Vg))return this._transitionablePaint.setTransition(l.slice(0,-11),f||void 0),!1;{const x=this._transitionablePaint._values[l],E=x.property.specification["property-type"]==="cross-faded-data-driven",T=x.value.isDataDriven(),A=x.value;this._transitionablePaint.setValue(l,f),this._handleSpecialPaintPropertyUpdate(l);const O=this._transitionablePaint._values[l].value;return O.isDataDriven()||T||E||this._handleOverridablePaintPropertyUpdate(l,A,O)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,f,m){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,f){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,f)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),ie(l,(f,m)=>!(f===void 0||m==="layout"&&!Object.keys(f).length||m==="paint"&&!Object.keys(f).length))}_validate(l,f,m,x,E={}){return(!E||E.validate!==!1)&&Yd(this,l.call(Ea,{key:f,layerType:this.type,objectKey:m,value:x,styleSpec:Ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const f=this.paint.get(l);if(f instanceof qn&&Nc(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}const by={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Wl{constructor(l,f){this._structArray=l,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Mi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,f){return l._trim(),f&&(l.isTransferred=!0,f.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const f=Object.create(this.prototype);return f.arrayBuffer=l.arrayBuffer,f.length=l.length,f.capacity=l.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function bi(h,l=1){let f=0,m=0;return{members:h.map(x=>{const E=by[x.type].BYTES_PER_ELEMENT,T=f=Hc(f,Math.max(l,E)),A=x.components||1;return m=Math.max(m,E),f+=E*A,{name:x.name,type:x.type,components:A,offset:T}}),size:Hc(f,Math.max(m,l)),alignment:l}}function Hc(h,l){return Math.ceil(h/l)*l}class dh extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f){const m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){const x=2*l;return this.int16[x+0]=f,this.int16[x+1]=m,l}}dh.prototype.bytesPerElement=4,Kt("StructArrayLayout2i4",dh);class fh extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,l,f,m)}emplace(l,f,m,x){const E=3*l;return this.int16[E+0]=f,this.int16[E+1]=m,this.int16[E+2]=x,l}}fh.prototype.bytesPerElement=6,Kt("StructArrayLayout3i6",fh);class jl extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,x){const E=this.length;return this.resize(E+1),this.emplace(E,l,f,m,x)}emplace(l,f,m,x,E){const T=4*l;return this.int16[T+0]=f,this.int16[T+1]=m,this.int16[T+2]=x,this.int16[T+3]=E,l}}jl.prototype.bytesPerElement=8,Kt("StructArrayLayout4i8",jl);class Hg extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,x,E,T){const A=this.length;return this.resize(A+1),this.emplace(A,l,f,m,x,E,T)}emplace(l,f,m,x,E,T,A){const O=6*l;return this.int16[O+0]=f,this.int16[O+1]=m,this.int16[O+2]=x,this.int16[O+3]=E,this.int16[O+4]=T,this.int16[O+5]=A,l}}Hg.prototype.bytesPerElement=12,Kt("StructArrayLayout2i4i12",Hg);class Ug extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,x,E,T){const A=this.length;return this.resize(A+1),this.emplace(A,l,f,m,x,E,T)}emplace(l,f,m,x,E,T,A){const O=4*l,z=8*l;return this.int16[O+0]=f,this.int16[O+1]=m,this.uint8[z+4]=x,this.uint8[z+5]=E,this.uint8[z+6]=T,this.uint8[z+7]=A,l}}Ug.prototype.bytesPerElement=8,Kt("StructArrayLayout2i4ub8",Ug);class Uc extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f){const m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){const x=2*l;return this.float32[x+0]=f,this.float32[x+1]=m,l}}Uc.prototype.bytesPerElement=8,Kt("StructArrayLayout2f8",Uc);class Wg extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,x,E,T,A,O,z,U){const Z=this.length;return this.resize(Z+1),this.emplace(Z,l,f,m,x,E,T,A,O,z,U)}emplace(l,f,m,x,E,T,A,O,z,U,Z){const Q=10*l;return this.uint16[Q+0]=f,this.uint16[Q+1]=m,this.uint16[Q+2]=x,this.uint16[Q+3]=E,this.uint16[Q+4]=T,this.uint16[Q+5]=A,this.uint16[Q+6]=O,this.uint16[Q+7]=z,this.uint16[Q+8]=U,this.uint16[Q+9]=Z,l}}Wg.prototype.bytesPerElement=20,Kt("StructArrayLayout10ui20",Wg);class jg extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,x,E,T,A,O,z,U,Z,Q){const ne=this.length;return this.resize(ne+1),this.emplace(ne,l,f,m,x,E,T,A,O,z,U,Z,Q)}emplace(l,f,m,x,E,T,A,O,z,U,Z,Q,ne){const se=12*l;return this.int16[se+0]=f,this.int16[se+1]=m,this.int16[se+2]=x,this.int16[se+3]=E,this.uint16[se+4]=T,this.uint16[se+5]=A,this.uint16[se+6]=O,this.uint16[se+7]=z,this.int16[se+8]=U,this.int16[se+9]=Z,this.int16[se+10]=Q,this.int16[se+11]=ne,l}}jg.prototype.bytesPerElement=24,Kt("StructArrayLayout4i4ui4i24",jg);class Vr extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,l,f,m)}emplace(l,f,m,x){const E=3*l;return this.float32[E+0]=f,this.float32[E+1]=m,this.float32[E+2]=x,l}}Vr.prototype.bytesPerElement=12,Kt("StructArrayLayout3f12",Vr);class b extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint32[1*l+0]=f,l}}b.prototype.bytesPerElement=4,Kt("StructArrayLayout1ul4",b);class c extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,x,E,T,A,O,z){const U=this.length;return this.resize(U+1),this.emplace(U,l,f,m,x,E,T,A,O,z)}emplace(l,f,m,x,E,T,A,O,z,U){const Z=10*l,Q=5*l;return this.int16[Z+0]=f,this.int16[Z+1]=m,this.int16[Z+2]=x,this.int16[Z+3]=E,this.int16[Z+4]=T,this.int16[Z+5]=A,this.uint32[Q+3]=O,this.uint16[Z+8]=z,this.uint16[Z+9]=U,l}}c.prototype.bytesPerElement=20,Kt("StructArrayLayout6i1ul2ui20",c);class g extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,x,E,T){const A=this.length;return this.resize(A+1),this.emplace(A,l,f,m,x,E,T)}emplace(l,f,m,x,E,T,A){const O=6*l;return this.int16[O+0]=f,this.int16[O+1]=m,this.int16[O+2]=x,this.int16[O+3]=E,this.int16[O+4]=T,this.int16[O+5]=A,l}}g.prototype.bytesPerElement=12,Kt("StructArrayLayout2i2i2i12",g);class w extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,x,E){const T=this.length;return this.resize(T+1),this.emplace(T,l,f,m,x,E)}emplace(l,f,m,x,E,T){const A=4*l,O=8*l;return this.float32[A+0]=f,this.float32[A+1]=m,this.float32[A+2]=x,this.int16[O+6]=E,this.int16[O+7]=T,l}}w.prototype.bytesPerElement=16,Kt("StructArrayLayout2f1f2i16",w);class C extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,x){const E=this.length;return this.resize(E+1),this.emplace(E,l,f,m,x)}emplace(l,f,m,x,E){const T=12*l,A=3*l;return this.uint8[T+0]=f,this.uint8[T+1]=m,this.float32[A+1]=x,this.float32[A+2]=E,l}}C.prototype.bytesPerElement=12,Kt("StructArrayLayout2ub2f12",C);class S extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,l,f,m)}emplace(l,f,m,x){const E=3*l;return this.uint16[E+0]=f,this.uint16[E+1]=m,this.uint16[E+2]=x,l}}S.prototype.bytesPerElement=6,Kt("StructArrayLayout3ui6",S);class I extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,x,E,T,A,O,z,U,Z,Q,ne,se,we,Pe,De){const $e=this.length;return this.resize($e+1),this.emplace($e,l,f,m,x,E,T,A,O,z,U,Z,Q,ne,se,we,Pe,De)}emplace(l,f,m,x,E,T,A,O,z,U,Z,Q,ne,se,we,Pe,De,$e){const Oe=24*l,Ze=12*l,tt=48*l;return this.int16[Oe+0]=f,this.int16[Oe+1]=m,this.uint16[Oe+2]=x,this.uint16[Oe+3]=E,this.uint32[Ze+2]=T,this.uint32[Ze+3]=A,this.uint32[Ze+4]=O,this.uint16[Oe+10]=z,this.uint16[Oe+11]=U,this.uint16[Oe+12]=Z,this.float32[Ze+7]=Q,this.float32[Ze+8]=ne,this.uint8[tt+36]=se,this.uint8[tt+37]=we,this.uint8[tt+38]=Pe,this.uint32[Ze+10]=De,this.int16[Oe+22]=$e,l}}I.prototype.bytesPerElement=48,Kt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",I);class L extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,x,E,T,A,O,z,U,Z,Q,ne,se,we,Pe,De,$e,Oe,Ze,tt,yt,Ht,nr,zt,Bt,It,Xt){const kt=this.length;return this.resize(kt+1),this.emplace(kt,l,f,m,x,E,T,A,O,z,U,Z,Q,ne,se,we,Pe,De,$e,Oe,Ze,tt,yt,Ht,nr,zt,Bt,It,Xt)}emplace(l,f,m,x,E,T,A,O,z,U,Z,Q,ne,se,we,Pe,De,$e,Oe,Ze,tt,yt,Ht,nr,zt,Bt,It,Xt,kt){const _t=32*l,dr=16*l;return this.int16[_t+0]=f,this.int16[_t+1]=m,this.int16[_t+2]=x,this.int16[_t+3]=E,this.int16[_t+4]=T,this.int16[_t+5]=A,this.int16[_t+6]=O,this.int16[_t+7]=z,this.uint16[_t+8]=U,this.uint16[_t+9]=Z,this.uint16[_t+10]=Q,this.uint16[_t+11]=ne,this.uint16[_t+12]=se,this.uint16[_t+13]=we,this.uint16[_t+14]=Pe,this.uint16[_t+15]=De,this.uint16[_t+16]=$e,this.uint16[_t+17]=Oe,this.uint16[_t+18]=Ze,this.uint16[_t+19]=tt,this.uint16[_t+20]=yt,this.uint16[_t+21]=Ht,this.uint16[_t+22]=nr,this.uint32[dr+12]=zt,this.float32[dr+13]=Bt,this.float32[dr+14]=It,this.uint16[_t+30]=Xt,this.uint16[_t+31]=kt,l}}L.prototype.bytesPerElement=64,Kt("StructArrayLayout8i15ui1ul2f2ui64",L);class B extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.float32[1*l+0]=f,l}}B.prototype.bytesPerElement=4,Kt("StructArrayLayout1f4",B);class H extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,l,f,m)}emplace(l,f,m,x){const E=3*l;return this.uint16[6*l+0]=f,this.float32[E+1]=m,this.float32[E+2]=x,l}}H.prototype.bytesPerElement=12,Kt("StructArrayLayout1ui2f12",H);class W extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,l,f,m)}emplace(l,f,m,x){const E=4*l;return this.uint32[2*l+0]=f,this.uint16[E+2]=m,this.uint16[E+3]=x,l}}W.prototype.bytesPerElement=8,Kt("StructArrayLayout1ul2ui8",W);class K extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f){const m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){const x=2*l;return this.uint16[x+0]=f,this.uint16[x+1]=m,l}}K.prototype.bytesPerElement=4,Kt("StructArrayLayout2ui4",K);class re extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint16[1*l+0]=f,l}}re.prototype.bytesPerElement=2,Kt("StructArrayLayout1ui2",re);class Ce extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,x){const E=this.length;return this.resize(E+1),this.emplace(E,l,f,m,x)}emplace(l,f,m,x,E){const T=4*l;return this.float32[T+0]=f,this.float32[T+1]=m,this.float32[T+2]=x,this.float32[T+3]=E,l}}Ce.prototype.bytesPerElement=16,Kt("StructArrayLayout4f16",Ce);class xe extends Wl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new y(this.anchorPointX,this.anchorPointY)}}xe.prototype.size=20;class Ee extends c{get(l){return new xe(this,l)}}Kt("CollisionBoxArray",Ee);class ye extends Wl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ye.prototype.size=48;class ze extends I{get(l){return new ye(this,l)}}Kt("PlacedSymbolArray",ze);class Je extends Wl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Je.prototype.size=64;class Me extends L{get(l){return new Je(this,l)}}Kt("SymbolInstanceArray",Me);class Ue extends B{getoffsetX(l){return this.float32[1*l+0]}}Kt("GlyphOffsetArray",Ue);class it extends fh{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}Kt("SymbolLineVertexArray",it);class nt extends Wl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}nt.prototype.size=12;class vt extends H{get(l){return new nt(this,l)}}Kt("TextAnchorOffsetArray",vt);class Ct extends Wl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ct.prototype.size=8;class xt extends W{get(l){return new Ct(this,l)}}Kt("FeatureIndexArray",xt);class Pt extends dh{}class ir extends dh{}class Pr extends dh{}class Nt extends Hg{}class gr extends Ug{}class or extends Uc{}class $r extends Wg{}class Tr extends jg{}class Sr extends Vr{}class Mr extends b{}class Li extends g{}class ri extends C{}class En extends S{}class cn extends K{}const Ui=bi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gs}=Ui;class di{constructor(l=[]){this.segments=l}prepareSegment(l,f,m,x){let E=this.segments[this.segments.length-1];return l>di.MAX_VERTEX_ARRAY_LENGTH&&et(`Max vertices per segment is ${di.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!E||E.vertexLength+l>di.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==x)&&(E={vertexOffset:f.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},x!==void 0&&(E.sortKey=x),this.segments.push(E)),E}get(){return this.segments}destroy(){for(const l of this.segments)for(const f in l.vaos)l.vaos[f].destroy()}static simpleSegment(l,f,m,x){return new di([{vertexOffset:l,primitiveOffset:f,vertexLength:m,primitiveLength:x,vaos:{},sortKey:0}])}}function Yo(h,l){return 256*(h=ee(Math.floor(h),0,255))+ee(Math.floor(l),0,255)}di.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Kt("SegmentVector",di);const Qo=bi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ll={exports:{}},$l={exports:{}};$l.exports=function(h,l){var f,m,x,E,T,A,O,z;for(m=h.length-(f=3&h.length),x=l,T=3432918353,A=461845907,z=0;z<m;)O=255&h.charCodeAt(z)|(255&h.charCodeAt(++z))<<8|(255&h.charCodeAt(++z))<<16|(255&h.charCodeAt(++z))<<24,++z,x=27492+(65535&(E=5*(65535&(x=(x^=O=(65535&(O=(O=(65535&O)*T+(((O>>>16)*T&65535)<<16)&4294967295)<<15|O>>>17))*A+(((O>>>16)*A&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(O=0,f){case 3:O^=(255&h.charCodeAt(z+2))<<16;case 2:O^=(255&h.charCodeAt(z+1))<<8;case 1:x^=O=(65535&(O=(O=(65535&(O^=255&h.charCodeAt(z)))*T+(((O>>>16)*T&65535)<<16)&4294967295)<<15|O>>>17))*A+(((O>>>16)*A&65535)<<16)&4294967295}return x^=h.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0};var Wc=$l.exports,On={exports:{}};On.exports=function(h,l){for(var f,m=h.length,x=l^m,E=0;m>=4;)f=1540483477*(65535&(f=255&h.charCodeAt(E)|(255&h.charCodeAt(++E))<<8|(255&h.charCodeAt(++E))<<16|(255&h.charCodeAt(++E))<<24))+((1540483477*(f>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),m-=4,++E;switch(m){case 3:x^=(255&h.charCodeAt(E+2))<<16;case 2:x^=(255&h.charCodeAt(E+1))<<8;case 1:x=1540483477*(65535&(x^=255&h.charCodeAt(E)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0};var Rn=Wc,Kn=On.exports;ll.exports=Rn,ll.exports.murmur3=Rn,ll.exports.murmur2=Kn;var ql=d(ll.exports);class Oi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,f,m,x){this.ids.push(un(l)),this.positions.push(f,m,x)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const f=un(l);let m=0,x=this.ids.length-1;for(;m<x;){const T=m+x>>1;this.ids[T]>=f?x=T:m=T+1}const E=[];for(;this.ids[m]===f;)E.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return E}static serialize(l,f){const m=new Float64Array(l.ids),x=new Uint32Array(l.positions);return vs(m,x,0,m.length-1),f&&f.push(m.buffer,x.buffer),{ids:m,positions:x}}static deserialize(l){const f=new Oi;return f.ids=l.ids,f.positions=l.positions,f.indexed=!0,f}}function un(h){const l=+h;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:ql(String(h))}function vs(h,l,f,m){for(;f<m;){const x=h[f+m>>1];let E=f-1,T=m+1;for(;;){do E++;while(h[E]<x);do T--;while(h[T]>x);if(E>=T)break;Ni(h,E,T),Ni(l,3*E,3*T),Ni(l,3*E+1,3*T+1),Ni(l,3*E+2,3*T+2)}T-f<m-T?(vs(h,l,f,T),f=T+1):(vs(h,l,T+1,m),m=T)}}function Ni(h,l,f){const m=h[l];h[l]=h[f],h[f]=m}Kt("FeaturePositionMap",Oi);class Kl{constructor(l,f){this.gl=l.gl,this.location=f}}class tf extends Kl{constructor(l,f){super(l,f),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Sy extends Kl{constructor(l,f){super(l,f),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Ey extends Kl{constructor(l,f){super(l,f),this.current=mr.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const x_=new Float32Array(16);function $g(h){return[Yo(255*h.r,255*h.g),Yo(255*h.b,255*h.a)]}class Jo{constructor(l,f,m){this.value=l,this.uniformNames=f.map(x=>`u_${x}`),this.type=m}setUniform(l,f,m){l.set(m.constantOr(this.value))}getBinding(l,f,m){return this.type==="color"?new Ey(l,f):new tf(l,f)}}class Zl{constructor(l,f){this.uniformNames=f.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=l.tlbr}setUniform(l,f,m,x){const E=x==="u_pattern_to"?this.patternTo:x==="u_pattern_from"?this.patternFrom:x==="u_pixel_ratio_to"?this.pixelRatioTo:x==="u_pixel_ratio_from"?this.pixelRatioFrom:null;E&&l.set(E)}getBinding(l,f,m){return m.substr(0,9)==="u_pattern"?new Sy(l,f):new tf(l,f)}}class ea{constructor(l,f,m,x){this.expression=l,this.type=m,this.maxValue=0,this.paintVertexAttributes=f.map(E=>({name:`a_${E}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new x}populatePaintArray(l,f,m,x,E){const T=this.paintVertexArray.length,A=this.expression.evaluate(new hi(0),f,{},x,[],E);this.paintVertexArray.resize(l),this._setPaintValue(T,l,A)}updatePaintArray(l,f,m,x){const E=this.expression.evaluate({zoom:0},m,x);this._setPaintValue(l,f,E)}_setPaintValue(l,f,m){if(this.type==="color"){const x=$g(m);for(let E=l;E<f;E++)this.paintVertexArray.emplace(E,x[0],x[1])}else{for(let x=l;x<f;x++)this.paintVertexArray.emplace(x,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class lo{constructor(l,f,m,x,E,T){this.expression=l,this.uniformNames=f.map(A=>`u_${A}_t`),this.type=m,this.useIntegerZoom=x,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=f.map(A=>({name:`a_${A}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(l,f,m,x,E){const T=this.expression.evaluate(new hi(this.zoom),f,{},x,[],E),A=this.expression.evaluate(new hi(this.zoom+1),f,{},x,[],E),O=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(O,l,T,A)}updatePaintArray(l,f,m,x){const E=this.expression.evaluate({zoom:this.zoom},m,x),T=this.expression.evaluate({zoom:this.zoom+1},m,x);this._setPaintValue(l,f,E,T)}_setPaintValue(l,f,m,x){if(this.type==="color"){const E=$g(m),T=$g(x);for(let A=l;A<f;A++)this.paintVertexArray.emplace(A,E[0],E[1],T[0],T[1])}else{for(let E=l;E<f;E++)this.paintVertexArray.emplace(E,m,x);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(x))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,f){const m=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,x=ee(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);l.set(x)}getBinding(l,f,m){return new tf(l,f)}}class ta{constructor(l,f,m,x,E,T){this.expression=l,this.type=f,this.useIntegerZoom=m,this.zoom=x,this.layerId=T,this.zoomInPaintVertexArray=new E,this.zoomOutPaintVertexArray=new E}populatePaintArray(l,f,m){const x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(x,l,f.patterns&&f.patterns[this.layerId],m)}updatePaintArray(l,f,m,x,E){this._setPaintValues(l,f,m.patterns&&m.patterns[this.layerId],E)}_setPaintValues(l,f,m,x){if(!x||!m)return;const{min:E,mid:T,max:A}=m,O=x[E],z=x[T],U=x[A];if(O&&z&&U)for(let Z=l;Z<f;Z++)this.zoomInPaintVertexArray.emplace(Z,z.tl[0],z.tl[1],z.br[0],z.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],z.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(Z,z.tl[0],z.tl[1],z.br[0],z.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],z.pixelRatio,U.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Qo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Qo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class qg{constructor(l,f,m){this.binders={},this._buffers=[];const x=[];for(const E in l.paint._values){if(!m(E))continue;const T=l.paint.get(E);if(!(T instanceof qn&&Nc(T.property.specification)))continue;const A=MV(E,l.type),O=T.value,z=T.property.specification.type,U=T.property.useIntegerZoom,Z=T.property.specification["property-type"],Q=Z==="cross-faded"||Z==="cross-faded-data-driven";if(O.kind==="constant")this.binders[E]=Q?new Zl(O.value,A):new Jo(O.value,A,z),x.push(`/u_${E}`);else if(O.kind==="source"||Q){const ne=rM(E,z,"source");this.binders[E]=Q?new ta(O,z,U,f,ne,l.id):new ea(O,A,z,ne),x.push(`/a_${E}`)}else{const ne=rM(E,z,"composite");this.binders[E]=new lo(O,A,z,U,f,ne),x.push(`/z_${E}`)}}this.cacheKey=x.sort().join("")}getMaxValue(l){const f=this.binders[l];return f instanceof ea||f instanceof lo?f.maxValue:0}populatePaintArrays(l,f,m,x,E){for(const T in this.binders){const A=this.binders[T];(A instanceof ea||A instanceof lo||A instanceof ta)&&A.populatePaintArray(l,f,m,x,E)}}setConstantPatternPositions(l,f){for(const m in this.binders){const x=this.binders[m];x instanceof Zl&&x.setConstantPatternPositions(l,f)}}updatePaintArrays(l,f,m,x,E){let T=!1;for(const A in l){const O=f.getPositions(A);for(const z of O){const U=m.feature(z.index);for(const Z in this.binders){const Q=this.binders[Z];if((Q instanceof ea||Q instanceof lo||Q instanceof ta)&&Q.expression.isStateDependent===!0){const ne=x.paint.get(Z);Q.expression=ne.value,Q.updatePaintArray(z.start,z.end,U,l[A],E),T=!0}}}}return T}defines(){const l=[];for(const f in this.binders){const m=this.binders[f];(m instanceof Jo||m instanceof Zl)&&l.push(...m.uniformNames.map(x=>`#define HAS_UNIFORM_${x}`))}return l}getBinderAttributes(){const l=[];for(const f in this.binders){const m=this.binders[f];if(m instanceof ea||m instanceof lo)for(let x=0;x<m.paintVertexAttributes.length;x++)l.push(m.paintVertexAttributes[x].name);else if(m instanceof ta)for(let x=0;x<Qo.members.length;x++)l.push(Qo.members[x].name)}return l}getBinderUniforms(){const l=[];for(const f in this.binders){const m=this.binders[f];if(m instanceof Jo||m instanceof Zl||m instanceof lo)for(const x of m.uniformNames)l.push(x)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,f){const m=[];for(const x in this.binders){const E=this.binders[x];if(E instanceof Jo||E instanceof Zl||E instanceof lo){for(const T of E.uniformNames)if(f[T]){const A=E.getBinding(l,f[T],T);m.push({name:T,property:x,binding:A})}}}return m}setUniforms(l,f,m,x){for(const{name:E,property:T,binding:A}of f)this.binders[T].setUniform(A,x,m.get(T),E)}updatePaintBuffers(l){this._buffers=[];for(const f in this.binders){const m=this.binders[f];if(l&&m instanceof ta){const x=l.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(m instanceof ea||m instanceof lo)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(l){for(const f in this.binders){const m=this.binders[f];(m instanceof ea||m instanceof lo||m instanceof ta)&&m.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const f=this.binders[l];(f instanceof ea||f instanceof lo||f instanceof ta)&&f.destroy()}}}class Ta{constructor(l,f,m=()=>!0){this.programConfigurations={};for(const x of l)this.programConfigurations[x.id]=new qg(x,f,m);this.needsUpload=!1,this._featureMap=new Oi,this._bufferOffset=0}populatePaintArrays(l,f,m,x,E,T){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(l,f,x,E,T);f.id!==void 0&&this._featureMap.add(f.id,m,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,f,m,x){for(const E of m)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(l,this._featureMap,f,E,x)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const f in this.programConfigurations)this.programConfigurations[f].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function MV(h,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${l}-`,"").replace(/-/g,"_")]}function rM(h,l,f){const m={color:{source:Uc,composite:Ce},number:{source:B,composite:Uc}},x=function(E){return{"line-pattern":{source:$r,composite:$r},"fill-pattern":{source:$r,composite:$r},"fill-extrusion-pattern":{source:$r,composite:$r}}[E]}(h);return x&&x[f]||m[l][f]}Kt("ConstantBinder",Jo),Kt("CrossFadedConstantBinder",Zl),Kt("SourceExpressionBinder",ea),Kt("CrossFadedCompositeBinder",ta),Kt("CompositeExpressionBinder",lo),Kt("ProgramConfiguration",qg,{omit:["_buffers"]}),Kt("ProgramConfigurationSet",Ta);const en=8192,C_=Math.pow(2,14)-1,iM=-C_-1;function ph(h){const l=en/h.extent,f=h.loadGeometry();for(let m=0;m<f.length;m++){const x=f[m];for(let E=0;E<x.length;E++){const T=x[E],A=Math.round(T.x*l),O=Math.round(T.y*l);T.x=ee(A,iM,C_),T.y=ee(O,iM,C_),(A<T.x||A>T.x+1||O<T.y||O>T.y+1)&&et("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function gh(h,l){return{type:h.type,id:h.id,properties:h.properties,geometry:l?ph(h):[]}}function Ry(h,l,f,m,x){h.emplaceBack(2*l+(m+1)/2,2*f+(x+1)/2)}class __{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new ir,this.indexArray=new En,this.segments=new di,this.programConfigurations=new Ta(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){const x=this.layers[0],E=[];let T=null,A=!1;x.type==="circle"&&(T=x.layout.get("circle-sort-key"),A=!T.isConstant());for(const{feature:O,id:z,index:U,sourceLayerIndex:Z}of l){const Q=this.layers[0]._featureFilter.needGeometry,ne=gh(O,Q);if(!this.layers[0]._featureFilter.filter(new hi(this.zoom),ne,m))continue;const se=A?T.evaluate(ne,{},m):void 0,we={id:z,properties:O.properties,type:O.type,sourceLayerIndex:Z,index:U,geometry:Q?ne.geometry:ph(O),patterns:{},sortKey:se};E.push(we)}A&&E.sort((O,z)=>O.sortKey-z.sortKey);for(const O of E){const{geometry:z,index:U,sourceLayerIndex:Z}=O,Q=l[U].feature;this.addFeature(O,z,U,m),f.featureIndex.insert(Q,z,U,Z,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Gs),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,f,m,x){for(const E of f)for(const T of E){const A=T.x,O=T.y;if(A<0||A>=en||O<0||O>=en)continue;const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),U=z.vertexLength;Ry(this.layoutVertexArray,A,O,-1,-1),Ry(this.layoutVertexArray,A,O,1,-1),Ry(this.layoutVertexArray,A,O,1,1),Ry(this.layoutVertexArray,A,O,-1,1),this.indexArray.emplaceBack(U,U+1,U+2),this.indexArray.emplaceBack(U,U+3,U+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{},x)}}function nM(h,l){for(let f=0;f<h.length;f++)if(rf(l,h[f]))return!0;for(let f=0;f<l.length;f++)if(rf(h,l[f]))return!0;return!!b_(h,l)}function FV(h,l,f){return!!rf(h,l)||!!S_(l,h,f)}function sM(h,l){if(h.length===1)return aM(l,h[0]);for(let f=0;f<l.length;f++){const m=l[f];for(let x=0;x<m.length;x++)if(rf(h,m[x]))return!0}for(let f=0;f<h.length;f++)if(aM(l,h[f]))return!0;for(let f=0;f<l.length;f++)if(b_(h,l[f]))return!0;return!1}function AV(h,l,f){if(h.length>1){if(b_(h,l))return!0;for(let m=0;m<l.length;m++)if(S_(l[m],h,f))return!0}for(let m=0;m<h.length;m++)if(S_(h[m],l,f))return!0;return!1}function b_(h,l){if(h.length===0||l.length===0)return!1;for(let f=0;f<h.length-1;f++){const m=h[f],x=h[f+1];for(let E=0;E<l.length-1;E++)if(IV(m,x,l[E],l[E+1]))return!0}return!1}function IV(h,l,f,m){return Xe(h,f,m)!==Xe(l,f,m)&&Xe(h,l,f)!==Xe(h,l,m)}function S_(h,l,f){const m=f*f;if(l.length===1)return h.distSqr(l[0])<m;for(let x=1;x<l.length;x++)if(oM(h,l[x-1],l[x])<m)return!0;return!1}function oM(h,l,f){const m=l.distSqr(f);if(m===0)return h.distSqr(l);const x=((h.x-l.x)*(f.x-l.x)+(h.y-l.y)*(f.y-l.y))/m;return h.distSqr(x<0?l:x>1?f:f.sub(l)._mult(x)._add(l))}function aM(h,l){let f,m,x,E=!1;for(let T=0;T<h.length;T++){f=h[T];for(let A=0,O=f.length-1;A<f.length;O=A++)m=f[A],x=f[O],m.y>l.y!=x.y>l.y&&l.x<(x.x-m.x)*(l.y-m.y)/(x.y-m.y)+m.x&&(E=!E)}return E}function rf(h,l){let f=!1;for(let m=0,x=h.length-1;m<h.length;x=m++){const E=h[m],T=h[x];E.y>l.y!=T.y>l.y&&l.x<(T.x-E.x)*(l.y-E.y)/(T.y-E.y)+E.x&&(f=!f)}return f}function DV(h,l,f){const m=f[0],x=f[2];if(h.x<m.x&&l.x<m.x||h.x>x.x&&l.x>x.x||h.y<m.y&&l.y<m.y||h.y>x.y&&l.y>x.y)return!1;const E=Xe(h,l,f[0]);return E!==Xe(h,l,f[1])||E!==Xe(h,l,f[2])||E!==Xe(h,l,f[3])}function Kg(h,l,f){const m=l.paint.get(h).value;return m.kind==="constant"?m.value:f.programConfigurations.get(l.id).getMaxValue(h)}function Ty(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Py(h,l,f,m,x){if(!l[0]&&!l[1])return h;const E=y.convert(l)._mult(x);f==="viewport"&&E._rotate(-m);const T=[];for(let A=0;A<h.length;A++)T.push(h[A].sub(E));return T}let lM,cM;Kt("CircleBucket",__,{omit:["layers"]});var kV={get paint(){return cM=cM||new Hi({"circle-radius":new pr(Ke.paint_circle["circle-radius"]),"circle-color":new pr(Ke.paint_circle["circle-color"]),"circle-blur":new pr(Ke.paint_circle["circle-blur"]),"circle-opacity":new pr(Ke.paint_circle["circle-opacity"]),"circle-translate":new cr(Ke.paint_circle["circle-translate"]),"circle-translate-anchor":new cr(Ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new cr(Ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new cr(Ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new pr(Ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new pr(Ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new pr(Ke.paint_circle["circle-stroke-opacity"])})},get layout(){return lM=lM||new Hi({"circle-sort-key":new pr(Ke.layout_circle["circle-sort-key"])})}},ys=1e-6,nf=typeof Float32Array<"u"?Float32Array:Array;function E_(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function uM(h,l,f){var m=l[0],x=l[1],E=l[2],T=l[3],A=l[4],O=l[5],z=l[6],U=l[7],Z=l[8],Q=l[9],ne=l[10],se=l[11],we=l[12],Pe=l[13],De=l[14],$e=l[15],Oe=f[0],Ze=f[1],tt=f[2],yt=f[3];return h[0]=Oe*m+Ze*A+tt*Z+yt*we,h[1]=Oe*x+Ze*O+tt*Q+yt*Pe,h[2]=Oe*E+Ze*z+tt*ne+yt*De,h[3]=Oe*T+Ze*U+tt*se+yt*$e,h[4]=(Oe=f[4])*m+(Ze=f[5])*A+(tt=f[6])*Z+(yt=f[7])*we,h[5]=Oe*x+Ze*O+tt*Q+yt*Pe,h[6]=Oe*E+Ze*z+tt*ne+yt*De,h[7]=Oe*T+Ze*U+tt*se+yt*$e,h[8]=(Oe=f[8])*m+(Ze=f[9])*A+(tt=f[10])*Z+(yt=f[11])*we,h[9]=Oe*x+Ze*O+tt*Q+yt*Pe,h[10]=Oe*E+Ze*z+tt*ne+yt*De,h[11]=Oe*T+Ze*U+tt*se+yt*$e,h[12]=(Oe=f[12])*m+(Ze=f[13])*A+(tt=f[14])*Z+(yt=f[15])*we,h[13]=Oe*x+Ze*O+tt*Q+yt*Pe,h[14]=Oe*E+Ze*z+tt*ne+yt*De,h[15]=Oe*T+Ze*U+tt*se+yt*$e,h}Math.hypot||(Math.hypot=function(){for(var h=0,l=arguments.length;l--;)h+=arguments[l]*arguments[l];return Math.sqrt(h)});var Zg,LV=uM;function My(h,l,f){var m=l[0],x=l[1],E=l[2],T=l[3];return h[0]=f[0]*m+f[4]*x+f[8]*E+f[12]*T,h[1]=f[1]*m+f[5]*x+f[9]*E+f[13]*T,h[2]=f[2]*m+f[6]*x+f[10]*E+f[14]*T,h[3]=f[3]*m+f[7]*x+f[11]*E+f[15]*T,h}Zg=new nf(4),nf!=Float32Array&&(Zg[0]=0,Zg[1]=0,Zg[2]=0,Zg[3]=0);class OV extends ao{constructor(l){super(l,kV)}createBucket(l){return new __(l)}queryRadius(l){const f=l;return Kg("circle-radius",this,f)+Kg("circle-stroke-width",this,f)+Ty(this.paint.get("circle-translate"))}queryIntersectsFeature(l,f,m,x,E,T,A,O){const z=Py(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,A),U=this.paint.get("circle-radius").evaluate(f,m)+this.paint.get("circle-stroke-width").evaluate(f,m),Z=this.paint.get("circle-pitch-alignment")==="map",Q=Z?z:function(se,we){return se.map(Pe=>hM(Pe,we))}(z,O),ne=Z?U*A:U;for(const se of x)for(const we of se){const Pe=Z?we:hM(we,O);let De=ne;const $e=My([],[we.x,we.y,0,1],O);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?De*=$e[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(De*=T.cameraToCenterDistance/$e[3]),FV(Q,Pe,De))return!0}return!1}}function hM(h,l){const f=My([],[h.x,h.y,0,1],l);return new y(f[0]/f[3],f[1]/f[3])}class dM extends __{}let fM;Kt("HeatmapBucket",dM,{omit:["layers"]});var NV={get paint(){return fM=fM||new Hi({"heatmap-radius":new pr(Ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new pr(Ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new cr(Ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Gg(Ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new cr(Ke.paint_heatmap["heatmap-opacity"])})}};function R_(h,{width:l,height:f},m,x){if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==l*f*m)throw new RangeError(`mismatched image size. expected: ${x.length} but got: ${l*f*m}`)}else x=new Uint8Array(l*f*m);return h.width=l,h.height=f,h.data=x,h}function pM(h,{width:l,height:f},m){if(l===h.width&&f===h.height)return;const x=R_({},{width:l,height:f},m);T_(h,x,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,l),height:Math.min(h.height,f)},m),h.width=l,h.height=f,h.data=x.data}function T_(h,l,f,m,x,E){if(x.width===0||x.height===0)return l;if(x.width>h.width||x.height>h.height||f.x>h.width-x.width||f.y>h.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>l.width||x.height>l.height||m.x>l.width-x.width||m.y>l.height-x.height)throw new RangeError("out of range destination coordinates for image copy");const T=h.data,A=l.data;if(T===A)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<x.height;O++){const z=((f.y+O)*h.width+f.x)*E,U=((m.y+O)*l.width+m.x)*E;for(let Z=0;Z<x.width*E;Z++)A[U+Z]=T[z+Z]}return l}class Xg{constructor(l,f){R_(this,l,1,f)}resize(l){pM(this,l,1)}clone(){return new Xg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,m,x,E){T_(l,f,m,x,E,1)}}class Ro{constructor(l,f){R_(this,l,4,f)}resize(l){pM(this,l,4)}replace(l,f){f?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Ro({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,m,x,E){T_(l,f,m,x,E,4)}}function gM(h){const l={},f=h.resolution||256,m=h.clips?h.clips.length:1,x=h.image||new Ro({width:f,height:m});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);const E=(T,A,O)=>{l[h.evaluationKey]=O;const z=h.expression.evaluate(l);x.data[T+A+0]=Math.floor(255*z.r/z.a),x.data[T+A+1]=Math.floor(255*z.g/z.a),x.data[T+A+2]=Math.floor(255*z.b/z.a),x.data[T+A+3]=Math.floor(255*z.a)};if(h.clips)for(let T=0,A=0;T<m;++T,A+=4*f)for(let O=0,z=0;O<f;O++,z+=4){const U=O/(f-1),{start:Z,end:Q}=h.clips[T];E(A,z,Z*(1-U)+Q*U)}else for(let T=0,A=0;T<f;T++,A+=4)E(0,A,T/(f-1));return x}Kt("AlphaImage",Xg),Kt("RGBAImage",Ro);class BV extends ao{createBucket(l){return new dM(l)}constructor(l){super(l,NV),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=gM({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let mM;var zV={get paint(){return mM=mM||new Hi({"hillshade-illumination-direction":new cr(Ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new cr(Ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new cr(Ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new cr(Ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new cr(Ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new cr(Ke.paint_hillshade["hillshade-accent-color"])})}};class GV extends ao{constructor(l){super(l,zV)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const VV=bi([{name:"a_pos",components:2,type:"Int16"}],4),{members:HV}=VV;var P_={exports:{}};function Fy(h,l,f){f=f||2;var m,x,E,T,A,O,z,U=l&&l.length,Z=U?l[0]*f:h.length,Q=vM(h,0,Z,f,!0),ne=[];if(!Q||Q.next===Q.prev)return ne;if(U&&(Q=function(we,Pe,De,$e){var Oe,Ze,tt,yt=[];for(Oe=0,Ze=Pe.length;Oe<Ze;Oe++)(tt=vM(we,Pe[Oe]*$e,Oe<Ze-1?Pe[Oe+1]*$e:we.length,$e,!1))===tt.next&&(tt.steiner=!0),yt.push(XV(tt));for(yt.sort(qV),Oe=0;Oe<yt.length;Oe++)De=KV(yt[Oe],De);return De}(h,l,Q,f)),h.length>80*f){m=E=h[0],x=T=h[1];for(var se=f;se<Z;se+=f)(A=h[se])<m&&(m=A),(O=h[se+1])<x&&(x=O),A>E&&(E=A),O>T&&(T=O);z=(z=Math.max(E-m,T-x))!==0?32767/z:0}return Yg(Q,ne,f,m,x,z,0),ne}function vM(h,l,f,m,x){var E,T;if(x===A_(h,l,f,m)>0)for(E=l;E<f;E+=m)T=xM(E,h[E],h[E+1],T);else for(E=f-m;E>=l;E-=m)T=xM(E,h[E],h[E+1],T);return T&&Ay(T,T.next)&&(Jg(T),T=T.next),T}function mh(h,l){if(!h)return h;l||(l=h);var f,m=h;do if(f=!1,m.steiner||!Ay(m,m.next)&&Wi(m.prev,m,m.next)!==0)m=m.next;else{if(Jg(m),(m=l=m.prev)===m.next)break;f=!0}while(f||m!==l);return l}function Yg(h,l,f,m,x,E,T){if(h){!T&&E&&function(U,Z,Q,ne){var se=U;do se.z===0&&(se.z=M_(se.x,se.y,Z,Q,ne)),se.prevZ=se.prev,se.nextZ=se.next,se=se.next;while(se!==U);se.prevZ.nextZ=null,se.prevZ=null,function(we){var Pe,De,$e,Oe,Ze,tt,yt,Ht,nr=1;do{for(De=we,we=null,Ze=null,tt=0;De;){for(tt++,$e=De,yt=0,Pe=0;Pe<nr&&(yt++,$e=$e.nextZ);Pe++);for(Ht=nr;yt>0||Ht>0&&$e;)yt!==0&&(Ht===0||!$e||De.z<=$e.z)?(Oe=De,De=De.nextZ,yt--):(Oe=$e,$e=$e.nextZ,Ht--),Ze?Ze.nextZ=Oe:we=Oe,Oe.prevZ=Ze,Ze=Oe;De=$e}Ze.nextZ=null,nr*=2}while(tt>1)}(se)}(h,m,x,E);for(var A,O,z=h;h.prev!==h.next;)if(A=h.prev,O=h.next,E?WV(h,m,x,E):UV(h))l.push(A.i/f|0),l.push(h.i/f|0),l.push(O.i/f|0),Jg(h),h=O.next,z=O.next;else if((h=O)===z){T?T===1?Yg(h=jV(mh(h),l,f),l,f,m,x,E,2):T===2&&$V(h,l,f,m,x,E):Yg(mh(h),l,f,m,x,E,1);break}}}function UV(h){var l=h.prev,f=h,m=h.next;if(Wi(l,f,m)>=0)return!1;for(var x=l.x,E=f.x,T=m.x,A=l.y,O=f.y,z=m.y,U=x<E?x<T?x:T:E<T?E:T,Z=A<O?A<z?A:z:O<z?O:z,Q=x>E?x>T?x:T:E>T?E:T,ne=A>O?A>z?A:z:O>z?O:z,se=m.next;se!==l;){if(se.x>=U&&se.x<=Q&&se.y>=Z&&se.y<=ne&&sf(x,A,E,O,T,z,se.x,se.y)&&Wi(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function WV(h,l,f,m){var x=h.prev,E=h,T=h.next;if(Wi(x,E,T)>=0)return!1;for(var A=x.x,O=E.x,z=T.x,U=x.y,Z=E.y,Q=T.y,ne=A<O?A<z?A:z:O<z?O:z,se=U<Z?U<Q?U:Q:Z<Q?Z:Q,we=A>O?A>z?A:z:O>z?O:z,Pe=U>Z?U>Q?U:Q:Z>Q?Z:Q,De=M_(ne,se,l,f,m),$e=M_(we,Pe,l,f,m),Oe=h.prevZ,Ze=h.nextZ;Oe&&Oe.z>=De&&Ze&&Ze.z<=$e;){if(Oe.x>=ne&&Oe.x<=we&&Oe.y>=se&&Oe.y<=Pe&&Oe!==x&&Oe!==T&&sf(A,U,O,Z,z,Q,Oe.x,Oe.y)&&Wi(Oe.prev,Oe,Oe.next)>=0||(Oe=Oe.prevZ,Ze.x>=ne&&Ze.x<=we&&Ze.y>=se&&Ze.y<=Pe&&Ze!==x&&Ze!==T&&sf(A,U,O,Z,z,Q,Ze.x,Ze.y)&&Wi(Ze.prev,Ze,Ze.next)>=0))return!1;Ze=Ze.nextZ}for(;Oe&&Oe.z>=De;){if(Oe.x>=ne&&Oe.x<=we&&Oe.y>=se&&Oe.y<=Pe&&Oe!==x&&Oe!==T&&sf(A,U,O,Z,z,Q,Oe.x,Oe.y)&&Wi(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.prevZ}for(;Ze&&Ze.z<=$e;){if(Ze.x>=ne&&Ze.x<=we&&Ze.y>=se&&Ze.y<=Pe&&Ze!==x&&Ze!==T&&sf(A,U,O,Z,z,Q,Ze.x,Ze.y)&&Wi(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.nextZ}return!0}function jV(h,l,f){var m=h;do{var x=m.prev,E=m.next.next;!Ay(x,E)&&yM(x,m,m.next,E)&&Qg(x,E)&&Qg(E,x)&&(l.push(x.i/f|0),l.push(m.i/f|0),l.push(E.i/f|0),Jg(m),Jg(m.next),m=h=E),m=m.next}while(m!==h);return mh(m)}function $V(h,l,f,m,x,E){var T=h;do{for(var A=T.next.next;A!==T.prev;){if(T.i!==A.i&&YV(T,A)){var O=wM(T,A);return T=mh(T,T.next),O=mh(O,O.next),Yg(T,l,f,m,x,E,0),void Yg(O,l,f,m,x,E,0)}A=A.next}T=T.next}while(T!==h)}function qV(h,l){return h.x-l.x}function KV(h,l){var f=function(x,E){var T,A=E,O=x.x,z=x.y,U=-1/0;do{if(z<=A.y&&z>=A.next.y&&A.next.y!==A.y){var Z=A.x+(z-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(Z<=O&&Z>U&&(U=Z,T=A.x<A.next.x?A:A.next,Z===O))return T}A=A.next}while(A!==E);if(!T)return null;var Q,ne=T,se=T.x,we=T.y,Pe=1/0;A=T;do O>=A.x&&A.x>=se&&O!==A.x&&sf(z<we?O:U,z,se,we,z<we?U:O,z,A.x,A.y)&&(Q=Math.abs(z-A.y)/(O-A.x),Qg(A,x)&&(Q<Pe||Q===Pe&&(A.x>T.x||A.x===T.x&&ZV(T,A)))&&(T=A,Pe=Q)),A=A.next;while(A!==ne);return T}(h,l);if(!f)return l;var m=wM(f,h);return mh(m,m.next),mh(f,f.next)}function ZV(h,l){return Wi(h.prev,h,l.prev)<0&&Wi(l.next,h,h.next)<0}function M_(h,l,f,m,x){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-f)*x|0)|h<<8))|h<<4))|h<<2))|h<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-m)*x|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function XV(h){var l=h,f=h;do(l.x<f.x||l.x===f.x&&l.y<f.y)&&(f=l),l=l.next;while(l!==h);return f}function sf(h,l,f,m,x,E,T,A){return(x-T)*(l-A)>=(h-T)*(E-A)&&(h-T)*(m-A)>=(f-T)*(l-A)&&(f-T)*(E-A)>=(x-T)*(m-A)}function YV(h,l){return h.next.i!==l.i&&h.prev.i!==l.i&&!function(f,m){var x=f;do{if(x.i!==f.i&&x.next.i!==f.i&&x.i!==m.i&&x.next.i!==m.i&&yM(x,x.next,f,m))return!0;x=x.next}while(x!==f);return!1}(h,l)&&(Qg(h,l)&&Qg(l,h)&&function(f,m){var x=f,E=!1,T=(f.x+m.x)/2,A=(f.y+m.y)/2;do x.y>A!=x.next.y>A&&x.next.y!==x.y&&T<(x.next.x-x.x)*(A-x.y)/(x.next.y-x.y)+x.x&&(E=!E),x=x.next;while(x!==f);return E}(h,l)&&(Wi(h.prev,h,l.prev)||Wi(h,l.prev,l))||Ay(h,l)&&Wi(h.prev,h,h.next)>0&&Wi(l.prev,l,l.next)>0)}function Wi(h,l,f){return(l.y-h.y)*(f.x-l.x)-(l.x-h.x)*(f.y-l.y)}function Ay(h,l){return h.x===l.x&&h.y===l.y}function yM(h,l,f,m){var x=Dy(Wi(h,l,f)),E=Dy(Wi(h,l,m)),T=Dy(Wi(f,m,h)),A=Dy(Wi(f,m,l));return x!==E&&T!==A||!(x!==0||!Iy(h,f,l))||!(E!==0||!Iy(h,m,l))||!(T!==0||!Iy(f,h,m))||!(A!==0||!Iy(f,l,m))}function Iy(h,l,f){return l.x<=Math.max(h.x,f.x)&&l.x>=Math.min(h.x,f.x)&&l.y<=Math.max(h.y,f.y)&&l.y>=Math.min(h.y,f.y)}function Dy(h){return h>0?1:h<0?-1:0}function Qg(h,l){return Wi(h.prev,h,h.next)<0?Wi(h,l,h.next)>=0&&Wi(h,h.prev,l)>=0:Wi(h,l,h.prev)<0||Wi(h,h.next,l)<0}function wM(h,l){var f=new F_(h.i,h.x,h.y),m=new F_(l.i,l.x,l.y),x=h.next,E=l.prev;return h.next=l,l.prev=h,f.next=x,x.prev=f,m.next=f,f.prev=m,E.next=m,m.prev=E,m}function xM(h,l,f,m){var x=new F_(h,l,f);return m?(x.next=m.next,x.prev=m,m.next.prev=x,m.next=x):(x.prev=x,x.next=x),x}function Jg(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function F_(h,l,f){this.i=h,this.x=l,this.y=f,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A_(h,l,f,m){for(var x=0,E=l,T=f-m;E<f;E+=m)x+=(h[T]-h[E])*(h[E+1]+h[T+1]),T=E;return x}P_.exports=Fy,P_.exports.default=Fy,Fy.deviation=function(h,l,f,m){var x=l&&l.length,E=Math.abs(A_(h,0,x?l[0]*f:h.length,f));if(x)for(var T=0,A=l.length;T<A;T++)E-=Math.abs(A_(h,l[T]*f,T<A-1?l[T+1]*f:h.length,f));var O=0;for(T=0;T<m.length;T+=3){var z=m[T]*f,U=m[T+1]*f,Z=m[T+2]*f;O+=Math.abs((h[z]-h[Z])*(h[U+1]-h[z+1])-(h[z]-h[U])*(h[Z+1]-h[z+1]))}return E===0&&O===0?0:Math.abs((O-E)/E)},Fy.flatten=function(h){for(var l=h[0][0].length,f={vertices:[],holes:[],dimensions:l},m=0,x=0;x<h.length;x++){for(var E=0;E<h[x].length;E++)for(var T=0;T<l;T++)f.vertices.push(h[x][E][T]);x>0&&f.holes.push(m+=h[x-1].length)}return f};var CM=d(P_.exports);function QV(h,l,f,m,x){_M(h,l,f,m||h.length-1,x||JV)}function _M(h,l,f,m,x){for(;m>f;){if(m-f>600){var E=m-f+1,T=l-f+1,A=Math.log(E),O=.5*Math.exp(2*A/3),z=.5*Math.sqrt(A*O*(E-O)/E)*(T-E/2<0?-1:1);_M(h,l,Math.max(f,Math.floor(l-T*O/E+z)),Math.min(m,Math.floor(l+(E-T)*O/E+z)),x)}var U=h[l],Z=f,Q=m;for(em(h,f,l),x(h[m],U)>0&&em(h,f,m);Z<Q;){for(em(h,Z,Q),Z++,Q--;x(h[Z],U)<0;)Z++;for(;x(h[Q],U)>0;)Q--}x(h[f],U)===0?em(h,f,Q):em(h,++Q,m),Q<=l&&(f=Q+1),l<=Q&&(m=Q-1)}}function em(h,l,f){var m=h[l];h[l]=h[f],h[f]=m}function JV(h,l){return h<l?-1:h>l?1:0}function I_(h,l){const f=h.length;if(f<=1)return[h];const m=[];let x,E;for(let T=0;T<f;T++){const A=ct(h[T]);A!==0&&(h[T].area=Math.abs(A),E===void 0&&(E=A<0),E===A<0?(x&&m.push(x),x=[h[T]]):x.push(h[T]))}if(x&&m.push(x),l>1)for(let T=0;T<m.length;T++)m[T].length<=l||(QV(m[T],l,1,m[T].length-1,eH),m[T]=m[T].slice(0,l));return m}function eH(h,l){return l.area-h.area}function D_(h,l,f){const m=f.patternDependencies;let x=!1;for(const E of l){const T=E.paint.get(`${h}-pattern`);T.isConstant()||(x=!0);const A=T.constantOr(null);A&&(x=!0,m[A.to]=!0,m[A.from]=!0)}return x}function k_(h,l,f,m,x){const E=x.patternDependencies;for(const T of l){const A=T.paint.get(`${h}-pattern`).value;if(A.kind!=="constant"){let O=A.evaluate({zoom:m-1},f,{},x.availableImages),z=A.evaluate({zoom:m},f,{},x.availableImages),U=A.evaluate({zoom:m+1},f,{},x.availableImages);O=O&&O.name?O.name:O,z=z&&z.name?z.name:z,U=U&&U.name?U.name:U,E[O]=!0,E[z]=!0,E[U]=!0,f.patterns[T.id]={min:O,mid:z,max:U}}}return f}class L_{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pr,this.indexArray=new En,this.indexArray2=new cn,this.programConfigurations=new Ta(l.layers,l.zoom),this.segments=new di,this.segments2=new di,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.hasPattern=D_("fill",this.layers,f);const x=this.layers[0].layout.get("fill-sort-key"),E=!x.isConstant(),T=[];for(const{feature:A,id:O,index:z,sourceLayerIndex:U}of l){const Z=this.layers[0]._featureFilter.needGeometry,Q=gh(A,Z);if(!this.layers[0]._featureFilter.filter(new hi(this.zoom),Q,m))continue;const ne=E?x.evaluate(Q,{},m,f.availableImages):void 0,se={id:O,properties:A.properties,type:A.type,sourceLayerIndex:U,index:z,geometry:Z?Q.geometry:ph(A),patterns:{},sortKey:ne};T.push(se)}E&&T.sort((A,O)=>A.sortKey-O.sortKey);for(const A of T){const{geometry:O,index:z,sourceLayerIndex:U}=A;if(this.hasPattern){const Z=k_("fill",this.layers,A,this.zoom,f);this.patternFeatures.push(Z)}else this.addFeature(A,O,z,m,{});f.featureIndex.insert(l[z].feature,O,z,U,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}addFeatures(l,f,m){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,HV),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,f,m,x,E){for(const T of I_(f,500)){let A=0;for(const ne of T)A+=ne.length;const O=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),z=O.vertexLength,U=[],Z=[];for(const ne of T){if(ne.length===0)continue;ne!==T[0]&&Z.push(U.length/2);const se=this.segments2.prepareSegment(ne.length,this.layoutVertexArray,this.indexArray2),we=se.vertexLength;this.layoutVertexArray.emplaceBack(ne[0].x,ne[0].y),this.indexArray2.emplaceBack(we+ne.length-1,we),U.push(ne[0].x),U.push(ne[0].y);for(let Pe=1;Pe<ne.length;Pe++)this.layoutVertexArray.emplaceBack(ne[Pe].x,ne[Pe].y),this.indexArray2.emplaceBack(we+Pe-1,we+Pe),U.push(ne[Pe].x),U.push(ne[Pe].y);se.vertexLength+=ne.length,se.primitiveLength+=ne.length}const Q=CM(U,Z);for(let ne=0;ne<Q.length;ne+=3)this.indexArray.emplaceBack(z+Q[ne],z+Q[ne+1],z+Q[ne+2]);O.vertexLength+=A,O.primitiveLength+=Q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,E,x)}}let bM,SM;Kt("FillBucket",L_,{omit:["layers","patternFeatures"]});var tH={get paint(){return SM=SM||new Hi({"fill-antialias":new cr(Ke.paint_fill["fill-antialias"]),"fill-opacity":new pr(Ke.paint_fill["fill-opacity"]),"fill-color":new pr(Ke.paint_fill["fill-color"]),"fill-outline-color":new pr(Ke.paint_fill["fill-outline-color"]),"fill-translate":new cr(Ke.paint_fill["fill-translate"]),"fill-translate-anchor":new cr(Ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new hh(Ke.paint_fill["fill-pattern"])})},get layout(){return bM=bM||new Hi({"fill-sort-key":new pr(Ke.layout_fill["fill-sort-key"])})}};class rH extends ao{constructor(l){super(l,tH)}recalculate(l,f){super.recalculate(l,f);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new L_(l)}queryRadius(){return Ty(this.paint.get("fill-translate"))}queryIntersectsFeature(l,f,m,x,E,T,A){return sM(Py(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,A),x)}isTileClipped(){return!0}}const iH=bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),nH=bi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:sH}=iH;var jc={},oH=p,EM=of;function of(h,l,f,m,x){this.properties={},this.extent=f,this.type=0,this._pbf=h,this._geometry=-1,this._keys=m,this._values=x,h.readFields(aH,this,l)}function aH(h,l,f){h==1?l.id=f.readVarint():h==2?function(m,x){for(var E=m.readVarint()+m.pos;m.pos<E;){var T=x._keys[m.readVarint()],A=x._values[m.readVarint()];x.properties[T]=A}}(f,l):h==3?l.type=f.readVarint():h==4&&(l._geometry=f.pos)}function lH(h){for(var l,f,m=0,x=0,E=h.length,T=E-1;x<E;T=x++)m+=((f=h[T]).x-(l=h[x]).x)*(l.y+f.y);return m}of.types=["Unknown","Point","LineString","Polygon"],of.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var l,f=h.readVarint()+h.pos,m=1,x=0,E=0,T=0,A=[];h.pos<f;){if(x<=0){var O=h.readVarint();m=7&O,x=O>>3}if(x--,m===1||m===2)E+=h.readSVarint(),T+=h.readSVarint(),m===1&&(l&&A.push(l),l=[]),l.push(new oH(E,T));else{if(m!==7)throw new Error("unknown command "+m);l&&l.push(l[0].clone())}}return l&&A.push(l),A},of.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var l=h.readVarint()+h.pos,f=1,m=0,x=0,E=0,T=1/0,A=-1/0,O=1/0,z=-1/0;h.pos<l;){if(m<=0){var U=h.readVarint();f=7&U,m=U>>3}if(m--,f===1||f===2)(x+=h.readSVarint())<T&&(T=x),x>A&&(A=x),(E+=h.readSVarint())<O&&(O=E),E>z&&(z=E);else if(f!==7)throw new Error("unknown command "+f)}return[T,O,A,z]},of.prototype.toGeoJSON=function(h,l,f){var m,x,E=this.extent*Math.pow(2,f),T=this.extent*h,A=this.extent*l,O=this.loadGeometry(),z=of.types[this.type];function U(ne){for(var se=0;se<ne.length;se++){var we=ne[se];ne[se]=[360*(we.x+T)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(we.y+A)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var Z=[];for(m=0;m<O.length;m++)Z[m]=O[m][0];U(O=Z);break;case 2:for(m=0;m<O.length;m++)U(O[m]);break;case 3:for(O=function(ne){var se=ne.length;if(se<=1)return[ne];for(var we,Pe,De=[],$e=0;$e<se;$e++){var Oe=lH(ne[$e]);Oe!==0&&(Pe===void 0&&(Pe=Oe<0),Pe===Oe<0?(we&&De.push(we),we=[ne[$e]]):we.push(ne[$e]))}return we&&De.push(we),De}(O),m=0;m<O.length;m++)for(x=0;x<O[m].length;x++)U(O[m][x])}O.length===1?O=O[0]:z="Multi"+z;var Q={type:"Feature",geometry:{type:z,coordinates:O},properties:this.properties};return"id"in this&&(Q.id=this.id),Q};var cH=EM,RM=TM;function TM(h,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(uH,this,l),this.length=this._features.length}function uH(h,l,f){h===15?l.version=f.readVarint():h===1?l.name=f.readString():h===5?l.extent=f.readVarint():h===2?l._features.push(f.pos):h===3?l._keys.push(f.readString()):h===4&&l._values.push(function(m){for(var x=null,E=m.readVarint()+m.pos;m.pos<E;){var T=m.readVarint()>>3;x=T===1?m.readString():T===2?m.readFloat():T===3?m.readDouble():T===4?m.readVarint64():T===5?m.readVarint():T===6?m.readSVarint():T===7?m.readBoolean():null}return x}(f))}TM.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var l=this._pbf.readVarint()+this._pbf.pos;return new cH(this._pbf,l,this.extent,this._keys,this._values)};var hH=RM;function dH(h,l,f){if(h===3){var m=new hH(f,f.readVarint()+f.pos);m.length&&(l[m.name]=m)}}jc.VectorTile=function(h,l){this.layers=h.readFields(dH,{},l)},jc.VectorTileFeature=EM,jc.VectorTileLayer=RM;const fH=jc.VectorTileFeature.types,O_=Math.pow(2,13);function tm(h,l,f,m,x,E,T,A){h.emplaceBack(l,f,2*Math.floor(m*O_)+T,x*O_*2,E*O_*2,Math.round(A))}class N_{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Nt,this.centroidVertexArray=new Pt,this.indexArray=new En,this.programConfigurations=new Ta(l.layers,l.zoom),this.segments=new di,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.features=[],this.hasPattern=D_("fill-extrusion",this.layers,f);for(const{feature:x,id:E,index:T,sourceLayerIndex:A}of l){const O=this.layers[0]._featureFilter.needGeometry,z=gh(x,O);if(!this.layers[0]._featureFilter.filter(new hi(this.zoom),z,m))continue;const U={id:E,sourceLayerIndex:A,index:T,geometry:O?z.geometry:ph(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(k_("fill-extrusion",this.layers,U,this.zoom,f)):this.addFeature(U,U.geometry,T,m,{}),f.featureIndex.insert(x,U.geometry,T,A,this.index,!0)}}addFeatures(l,f,m){for(const x of this.features){const{geometry:E}=x;this.addFeature(x,E,x.index,f,m)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,sH),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,nH.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,f,m,x,E){const T={x:0,y:0,vertexCount:0};for(const A of I_(f,500)){let O=0;for(const se of A)O+=se.length;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const se of A){if(se.length===0||gH(se))continue;let we=0;for(let Pe=0;Pe<se.length;Pe++){const De=se[Pe];if(Pe>=1){const $e=se[Pe-1];if(!pH(De,$e)){z.vertexLength+4>di.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Oe=De.sub($e)._perp()._unit(),Ze=$e.dist(De);we+Ze>32768&&(we=0),tm(this.layoutVertexArray,De.x,De.y,Oe.x,Oe.y,0,0,we),tm(this.layoutVertexArray,De.x,De.y,Oe.x,Oe.y,0,1,we),T.x+=2*De.x,T.y+=2*De.y,T.vertexCount+=2,we+=Ze,tm(this.layoutVertexArray,$e.x,$e.y,Oe.x,Oe.y,0,0,we),tm(this.layoutVertexArray,$e.x,$e.y,Oe.x,Oe.y,0,1,we),T.x+=2*$e.x,T.y+=2*$e.y,T.vertexCount+=2;const tt=z.vertexLength;this.indexArray.emplaceBack(tt,tt+2,tt+1),this.indexArray.emplaceBack(tt+1,tt+2,tt+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+O>di.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray)),fH[l.type]!=="Polygon")continue;const U=[],Z=[],Q=z.vertexLength;for(const se of A)if(se.length!==0){se!==A[0]&&Z.push(U.length/2);for(let we=0;we<se.length;we++){const Pe=se[we];tm(this.layoutVertexArray,Pe.x,Pe.y,0,0,1,1,0),T.x+=Pe.x,T.y+=Pe.y,T.vertexCount+=1,U.push(Pe.x),U.push(Pe.y)}}const ne=CM(U,Z);for(let se=0;se<ne.length;se+=3)this.indexArray.emplaceBack(Q+ne[se],Q+ne[se+2],Q+ne[se+1]);z.primitiveLength+=ne.length/3,z.vertexLength+=O}for(let A=0;A<T.vertexCount;A++)this.centroidVertexArray.emplaceBack(Math.floor(T.x/T.vertexCount),Math.floor(T.y/T.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,E,x)}}function pH(h,l){return h.x===l.x&&(h.x<0||h.x>en)||h.y===l.y&&(h.y<0||h.y>en)}function gH(h){return h.every(l=>l.x<0)||h.every(l=>l.x>en)||h.every(l=>l.y<0)||h.every(l=>l.y>en)}let PM;Kt("FillExtrusionBucket",N_,{omit:["layers","features"]});var mH={get paint(){return PM=PM||new Hi({"fill-extrusion-opacity":new cr(Ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new pr(Ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new cr(Ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new cr(Ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hh(Ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new pr(Ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new pr(Ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new cr(Ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class vH extends ao{constructor(l){super(l,mH)}createBucket(l){return new N_(l)}queryRadius(){return Ty(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,f,m,x,E,T,A,O){const z=Py(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,A),U=this.paint.get("fill-extrusion-height").evaluate(f,m),Z=this.paint.get("fill-extrusion-base").evaluate(f,m),Q=function(se,we,Pe,De){const $e=[];for(const Oe of se){const Ze=[Oe.x,Oe.y,0,1];My(Ze,Ze,we),$e.push(new y(Ze[0]/Ze[3],Ze[1]/Ze[3]))}return $e}(z,O),ne=function(se,we,Pe,De){const $e=[],Oe=[],Ze=De[8]*we,tt=De[9]*we,yt=De[10]*we,Ht=De[11]*we,nr=De[8]*Pe,zt=De[9]*Pe,Bt=De[10]*Pe,It=De[11]*Pe;for(const Xt of se){const kt=[],_t=[];for(const dr of Xt){const ar=dr.x,Er=dr.y,fi=De[0]*ar+De[4]*Er+De[12],vi=De[1]*ar+De[5]*Er+De[13],dn=De[2]*ar+De[6]*Er+De[14],co=De[3]*ar+De[7]*Er+De[15],ws=dn+yt,tn=co+Ht,Tn=fi+nr,Bn=vi+zt,xs=dn+Bt,Cs=co+It,fn=new y((fi+Ze)/tn,(vi+tt)/tn);fn.z=ws/tn,kt.push(fn);const pn=new y(Tn/Cs,Bn/Cs);pn.z=xs/Cs,_t.push(pn)}$e.push(kt),Oe.push(_t)}return[$e,Oe]}(x,Z,U,O);return function(se,we,Pe){let De=1/0;sM(Pe,we)&&(De=MM(Pe,we[0]));for(let $e=0;$e<we.length;$e++){const Oe=we[$e],Ze=se[$e];for(let tt=0;tt<Oe.length-1;tt++){const yt=Oe[tt],Ht=[yt,Oe[tt+1],Ze[tt+1],Ze[tt],yt];nM(Pe,Ht)&&(De=Math.min(De,MM(Pe,Ht)))}}return De!==1/0&&De}(ne[0],ne[1],Q)}}function rm(h,l){return h.x*l.x+h.y*l.y}function MM(h,l){if(h.length===1){let f=0;const m=l[f++];let x;for(;!x||m.equals(x);)if(x=l[f++],!x)return 1/0;for(;f<l.length;f++){const E=l[f],T=h[0],A=x.sub(m),O=E.sub(m),z=T.sub(m),U=rm(A,A),Z=rm(A,O),Q=rm(O,O),ne=rm(z,A),se=rm(z,O),we=U*Q-Z*Z,Pe=(Q*ne-Z*se)/we,De=(U*se-Z*ne)/we,$e=m.z*(1-Pe-De)+x.z*Pe+E.z*De;if(isFinite($e))return $e}return 1/0}{let f=1/0;for(const m of l)f=Math.min(f,m.z);return f}}const yH=bi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:wH}=yH,xH=bi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:CH}=xH,_H=jc.VectorTileFeature.types,bH=Math.cos(Math.PI/180*37.5),FM=Math.pow(2,14)/.5;class B_{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new gr,this.layoutVertexArray2=new or,this.indexArray=new En,this.programConfigurations=new Ta(l.layers,l.zoom),this.segments=new di,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.hasPattern=D_("line",this.layers,f);const x=this.layers[0].layout.get("line-sort-key"),E=!x.isConstant(),T=[];for(const{feature:A,id:O,index:z,sourceLayerIndex:U}of l){const Z=this.layers[0]._featureFilter.needGeometry,Q=gh(A,Z);if(!this.layers[0]._featureFilter.filter(new hi(this.zoom),Q,m))continue;const ne=E?x.evaluate(Q,{},m):void 0,se={id:O,properties:A.properties,type:A.type,sourceLayerIndex:U,index:z,geometry:Z?Q.geometry:ph(A),patterns:{},sortKey:ne};T.push(se)}E&&T.sort((A,O)=>A.sortKey-O.sortKey);for(const A of T){const{geometry:O,index:z,sourceLayerIndex:U}=A;if(this.hasPattern){const Z=k_("line",this.layers,A,this.zoom,f);this.patternFeatures.push(Z)}else this.addFeature(A,O,z,m,{});f.featureIndex.insert(l[z].feature,O,z,U,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}addFeatures(l,f,m){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,CH)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,wH),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,f,m,x,E){const T=this.layers[0].layout,A=T.get("line-join").evaluate(l,{}),O=T.get("line-cap"),z=T.get("line-miter-limit"),U=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const Z of f)this.addLine(Z,l,A,O,z,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,E,x)}addLine(l,f,m,x,E,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let De=0;De<l.length-1;De++)this.totalDistance+=l[De].dist(l[De+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=_H[f.type]==="Polygon";let O=l.length;for(;O>=2&&l[O-1].equals(l[O-2]);)O--;let z=0;for(;z<O-1&&l[z].equals(l[z+1]);)z++;if(O<(A?3:2))return;m==="bevel"&&(E=1.05);const U=this.overscaling<=16?15*en/(512*this.overscaling):0,Z=this.segments.prepareSegment(10*O,this.layoutVertexArray,this.indexArray);let Q,ne,se,we,Pe;this.e1=this.e2=-1,A&&(Q=l[O-2],Pe=l[z].sub(Q)._unit()._perp());for(let De=z;De<O;De++){if(se=De===O-1?A?l[z+1]:void 0:l[De+1],se&&l[De].equals(se))continue;Pe&&(we=Pe),Q&&(ne=Q),Q=l[De],Pe=se?se.sub(Q)._unit()._perp():we,we=we||Pe;let $e=we.add(Pe);$e.x===0&&$e.y===0||$e._unit();const Oe=we.x*Pe.x+we.y*Pe.y,Ze=$e.x*Pe.x+$e.y*Pe.y,tt=Ze!==0?1/Ze:1/0,yt=2*Math.sqrt(2-2*Ze),Ht=Ze<bH&&ne&&se,nr=we.x*Pe.y-we.y*Pe.x>0;if(Ht&&De>z){const It=Q.dist(ne);if(It>2*U){const Xt=Q.sub(Q.sub(ne)._mult(U/It)._round());this.updateDistance(ne,Xt),this.addCurrentVertex(Xt,we,0,0,Z),ne=Xt}}const zt=ne&&se;let Bt=zt?m:A?"butt":x;if(zt&&Bt==="round"&&(tt<T?Bt="miter":tt<=2&&(Bt="fakeround")),Bt==="miter"&&tt>E&&(Bt="bevel"),Bt==="bevel"&&(tt>2&&(Bt="flipbevel"),tt<E&&(Bt="miter")),ne&&this.updateDistance(ne,Q),Bt==="miter")$e._mult(tt),this.addCurrentVertex(Q,$e,0,0,Z);else if(Bt==="flipbevel"){if(tt>100)$e=Pe.mult(-1);else{const It=tt*we.add(Pe).mag()/we.sub(Pe).mag();$e._perp()._mult(It*(nr?-1:1))}this.addCurrentVertex(Q,$e,0,0,Z),this.addCurrentVertex(Q,$e.mult(-1),0,0,Z)}else if(Bt==="bevel"||Bt==="fakeround"){const It=-Math.sqrt(tt*tt-1),Xt=nr?It:0,kt=nr?0:It;if(ne&&this.addCurrentVertex(Q,we,Xt,kt,Z),Bt==="fakeround"){const _t=Math.round(180*yt/Math.PI/20);for(let dr=1;dr<_t;dr++){let ar=dr/_t;if(ar!==.5){const fi=ar-.5;ar+=ar*fi*(ar-1)*((1.0904+Oe*(Oe*(3.55645-1.43519*Oe)-3.2452))*fi*fi+(.848013+Oe*(.215638*Oe-1.06021)))}const Er=Pe.sub(we)._mult(ar)._add(we)._unit()._mult(nr?-1:1);this.addHalfVertex(Q,Er.x,Er.y,!1,nr,0,Z)}}se&&this.addCurrentVertex(Q,Pe,-Xt,-kt,Z)}else if(Bt==="butt")this.addCurrentVertex(Q,$e,0,0,Z);else if(Bt==="square"){const It=ne?1:-1;this.addCurrentVertex(Q,$e,It,It,Z)}else Bt==="round"&&(ne&&(this.addCurrentVertex(Q,we,0,0,Z),this.addCurrentVertex(Q,we,1,1,Z,!0)),se&&(this.addCurrentVertex(Q,Pe,-1,-1,Z,!0),this.addCurrentVertex(Q,Pe,0,0,Z)));if(Ht&&De<O-1){const It=Q.dist(se);if(It>2*U){const Xt=Q.add(se.sub(Q)._mult(U/It)._round());this.updateDistance(Q,Xt),this.addCurrentVertex(Xt,Pe,0,0,Z),Q=Xt}}}}addCurrentVertex(l,f,m,x,E,T=!1){const A=f.y*x-f.x,O=-f.y-f.x*x;this.addHalfVertex(l,f.x+f.y*m,f.y-f.x*m,T,!1,m,E),this.addHalfVertex(l,A,O,T,!0,-x,E),this.distance>FM/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,f,m,x,E,T))}addHalfVertex({x:l,y:f},m,x,E,T,A,O){const z=.5*(this.lineClips?this.scaledDistance*(FM-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(E?1:0),(f<<1)+(T?1:0),Math.round(63*m)+128,Math.round(63*x)+128,1+(A===0?0:A<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const U=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,U),O.primitiveLength++),T?this.e2=U:this.e1=U}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,f){this.distance+=l.dist(f),this.updateScaledDistance()}}let AM,IM;Kt("LineBucket",B_,{omit:["layers","patternFeatures"]});var DM={get paint(){return IM=IM||new Hi({"line-opacity":new pr(Ke.paint_line["line-opacity"]),"line-color":new pr(Ke.paint_line["line-color"]),"line-translate":new cr(Ke.paint_line["line-translate"]),"line-translate-anchor":new cr(Ke.paint_line["line-translate-anchor"]),"line-width":new pr(Ke.paint_line["line-width"]),"line-gap-width":new pr(Ke.paint_line["line-gap-width"]),"line-offset":new pr(Ke.paint_line["line-offset"]),"line-blur":new pr(Ke.paint_line["line-blur"]),"line-dasharray":new zg(Ke.paint_line["line-dasharray"]),"line-pattern":new hh(Ke.paint_line["line-pattern"]),"line-gradient":new Gg(Ke.paint_line["line-gradient"])})},get layout(){return AM=AM||new Hi({"line-cap":new cr(Ke.layout_line["line-cap"]),"line-join":new pr(Ke.layout_line["line-join"]),"line-miter-limit":new cr(Ke.layout_line["line-miter-limit"]),"line-round-limit":new cr(Ke.layout_line["line-round-limit"]),"line-sort-key":new pr(Ke.layout_line["line-sort-key"])})}};class SH extends pr{possiblyEvaluate(l,f){return f=new hi(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(l,f)}evaluate(l,f,m,x){return f=oe({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(l,f,m,x)}}let ky;class EH extends ao{constructor(l){super(l,DM),this.gradientVersion=0,ky||(ky=new SH(DM.paint.properties["line-width"].specification),ky.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const f=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(f)&&f._styleExpression.expression instanceof il,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,f){super.recalculate(l,f),this.paint._values["line-floorwidth"]=ky.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new B_(l)}queryRadius(l){const f=l,m=kM(Kg("line-width",this,f),Kg("line-gap-width",this,f)),x=Kg("line-offset",this,f);return m/2+Math.abs(x)+Ty(this.paint.get("line-translate"))}queryIntersectsFeature(l,f,m,x,E,T,A){const O=Py(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,A),z=A/2*kM(this.paint.get("line-width").evaluate(f,m),this.paint.get("line-gap-width").evaluate(f,m)),U=this.paint.get("line-offset").evaluate(f,m);return U&&(x=function(Z,Q){const ne=[];for(let se=0;se<Z.length;se++){const we=Z[se],Pe=[];for(let De=0;De<we.length;De++){const $e=we[De-1],Oe=we[De],Ze=we[De+1],tt=De===0?new y(0,0):Oe.sub($e)._unit()._perp(),yt=De===we.length-1?new y(0,0):Ze.sub(Oe)._unit()._perp(),Ht=tt._add(yt)._unit(),nr=Ht.x*yt.x+Ht.y*yt.y;nr!==0&&Ht._mult(1/nr),Pe.push(Ht._mult(Q)._add(Oe))}ne.push(Pe)}return ne}(x,U*A)),function(Z,Q,ne){for(let se=0;se<Q.length;se++){const we=Q[se];if(Z.length>=3){for(let Pe=0;Pe<we.length;Pe++)if(rf(Z,we[Pe]))return!0}if(AV(Z,we,ne))return!0}return!1}(O,x,z)}isTileClipped(){return!0}}function kM(h,l){return l>0?l+2*h:h}const RH=bi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),TH=bi([{name:"a_projected_pos",components:3,type:"Float32"}],4);bi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const PH=bi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);bi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const LM=bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),MH=bi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function FH(h,l,f){return h.sections.forEach(m=>{m.text=function(x,E,T){const A=E.layout.get("text-transform").evaluate(T,{});return A==="uppercase"?x=x.toLocaleUpperCase():A==="lowercase"&&(x=x.toLocaleLowerCase()),zs.applyArabicShaping&&(x=zs.applyArabicShaping(x)),x}(m.text,l,f)}),h}bi([{name:"triangle",components:3,type:"Uint16"}]),bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),bi([{type:"Float32",name:"offsetX"}]),bi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),bi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const im={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var hn=24,OM=Zr,NM=function(h,l,f,m,x){var E,T,A=8*x-m-1,O=(1<<A)-1,z=O>>1,U=-7,Z=x-1,Q=-1,ne=h[l+Z];for(Z+=Q,E=ne&(1<<-U)-1,ne>>=-U,U+=A;U>0;E=256*E+h[l+Z],Z+=Q,U-=8);for(T=E&(1<<-U)-1,E>>=-U,U+=m;U>0;T=256*T+h[l+Z],Z+=Q,U-=8);if(E===0)E=1-z;else{if(E===O)return T?NaN:1/0*(ne?-1:1);T+=Math.pow(2,m),E-=z}return(ne?-1:1)*T*Math.pow(2,E-m)},BM=function(h,l,f,m,x,E){var T,A,O,z=8*E-x-1,U=(1<<z)-1,Z=U>>1,Q=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,ne=0,se=1,we=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(A=isNaN(l)?1:0,T=U):(T=Math.floor(Math.log(l)/Math.LN2),l*(O=Math.pow(2,-T))<1&&(T--,O*=2),(l+=T+Z>=1?Q/O:Q*Math.pow(2,1-Z))*O>=2&&(T++,O/=2),T+Z>=U?(A=0,T=U):T+Z>=1?(A=(l*O-1)*Math.pow(2,x),T+=Z):(A=l*Math.pow(2,Z-1)*Math.pow(2,x),T=0));x>=8;h[f+ne]=255&A,ne+=se,A/=256,x-=8);for(T=T<<x|A,z+=x;z>0;h[f+ne]=255&T,ne+=se,T/=256,z-=8);h[f+ne-se]|=128*we};function Zr(h){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(h)?h:new Uint8Array(h||0),this.pos=0,this.type=0,this.length=this.buf.length}Zr.Varint=0,Zr.Fixed64=1,Zr.Bytes=2,Zr.Fixed32=5;var z_=4294967296,zM=1/z_,GM=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Xl(h){return h.type===Zr.Bytes?h.readVarint()+h.pos:h.pos+1}function af(h,l,f){return f?4294967296*l+(h>>>0):4294967296*(l>>>0)+(h>>>0)}function VM(h,l,f){var m=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));f.realloc(m);for(var x=f.pos-1;x>=h;x--)f.buf[x+m]=f.buf[x]}function AH(h,l){for(var f=0;f<h.length;f++)l.writeVarint(h[f])}function IH(h,l){for(var f=0;f<h.length;f++)l.writeSVarint(h[f])}function DH(h,l){for(var f=0;f<h.length;f++)l.writeFloat(h[f])}function kH(h,l){for(var f=0;f<h.length;f++)l.writeDouble(h[f])}function LH(h,l){for(var f=0;f<h.length;f++)l.writeBoolean(h[f])}function OH(h,l){for(var f=0;f<h.length;f++)l.writeFixed32(h[f])}function NH(h,l){for(var f=0;f<h.length;f++)l.writeSFixed32(h[f])}function BH(h,l){for(var f=0;f<h.length;f++)l.writeFixed64(h[f])}function zH(h,l){for(var f=0;f<h.length;f++)l.writeSFixed64(h[f])}function Ly(h,l){return(h[l]|h[l+1]<<8|h[l+2]<<16)+16777216*h[l+3]}function lf(h,l,f){h[f]=l,h[f+1]=l>>>8,h[f+2]=l>>>16,h[f+3]=l>>>24}function HM(h,l){return(h[l]|h[l+1]<<8|h[l+2]<<16)+(h[l+3]<<24)}Zr.prototype={destroy:function(){this.buf=null},readFields:function(h,l,f){for(f=f||this.length;this.pos<f;){var m=this.readVarint(),x=m>>3,E=this.pos;this.type=7&m,h(x,l,this),this.pos===E&&this.skip(m)}return l},readMessage:function(h,l){return this.readFields(h,l,this.readVarint()+this.pos)},readFixed32:function(){var h=Ly(this.buf,this.pos);return this.pos+=4,h},readSFixed32:function(){var h=HM(this.buf,this.pos);return this.pos+=4,h},readFixed64:function(){var h=Ly(this.buf,this.pos)+Ly(this.buf,this.pos+4)*z_;return this.pos+=8,h},readSFixed64:function(){var h=Ly(this.buf,this.pos)+HM(this.buf,this.pos+4)*z_;return this.pos+=8,h},readFloat:function(){var h=NM(this.buf,this.pos,!0,23,4);return this.pos+=4,h},readDouble:function(){var h=NM(this.buf,this.pos,!0,52,8);return this.pos+=8,h},readVarint:function(h){var l,f,m=this.buf;return l=127&(f=m[this.pos++]),f<128?l:(l|=(127&(f=m[this.pos++]))<<7,f<128?l:(l|=(127&(f=m[this.pos++]))<<14,f<128?l:(l|=(127&(f=m[this.pos++]))<<21,f<128?l:function(x,E,T){var A,O,z=T.buf;if(A=(112&(O=z[T.pos++]))>>4,O<128||(A|=(127&(O=z[T.pos++]))<<3,O<128)||(A|=(127&(O=z[T.pos++]))<<10,O<128)||(A|=(127&(O=z[T.pos++]))<<17,O<128)||(A|=(127&(O=z[T.pos++]))<<24,O<128)||(A|=(1&(O=z[T.pos++]))<<31,O<128))return af(x,A,E);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(f=m[this.pos]))<<28,h,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var h=this.readVarint();return h%2==1?(h+1)/-2:h/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var h=this.readVarint()+this.pos,l=this.pos;return this.pos=h,h-l>=12&&GM?function(f,m,x){return GM.decode(f.subarray(m,x))}(this.buf,l,h):function(f,m,x){for(var E="",T=m;T<x;){var A,O,z,U=f[T],Z=null,Q=U>239?4:U>223?3:U>191?2:1;if(T+Q>x)break;Q===1?U<128&&(Z=U):Q===2?(192&(A=f[T+1]))==128&&(Z=(31&U)<<6|63&A)<=127&&(Z=null):Q===3?(O=f[T+2],(192&(A=f[T+1]))==128&&(192&O)==128&&((Z=(15&U)<<12|(63&A)<<6|63&O)<=2047||Z>=55296&&Z<=57343)&&(Z=null)):Q===4&&(O=f[T+2],z=f[T+3],(192&(A=f[T+1]))==128&&(192&O)==128&&(192&z)==128&&((Z=(15&U)<<18|(63&A)<<12|(63&O)<<6|63&z)<=65535||Z>=1114112)&&(Z=null)),Z===null?(Z=65533,Q=1):Z>65535&&(Z-=65536,E+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),E+=String.fromCharCode(Z),T+=Q}return E}(this.buf,l,h)},readBytes:function(){var h=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,h);return this.pos=h,l},readPackedVarint:function(h,l){if(this.type!==Zr.Bytes)return h.push(this.readVarint(l));var f=Xl(this);for(h=h||[];this.pos<f;)h.push(this.readVarint(l));return h},readPackedSVarint:function(h){if(this.type!==Zr.Bytes)return h.push(this.readSVarint());var l=Xl(this);for(h=h||[];this.pos<l;)h.push(this.readSVarint());return h},readPackedBoolean:function(h){if(this.type!==Zr.Bytes)return h.push(this.readBoolean());var l=Xl(this);for(h=h||[];this.pos<l;)h.push(this.readBoolean());return h},readPackedFloat:function(h){if(this.type!==Zr.Bytes)return h.push(this.readFloat());var l=Xl(this);for(h=h||[];this.pos<l;)h.push(this.readFloat());return h},readPackedDouble:function(h){if(this.type!==Zr.Bytes)return h.push(this.readDouble());var l=Xl(this);for(h=h||[];this.pos<l;)h.push(this.readDouble());return h},readPackedFixed32:function(h){if(this.type!==Zr.Bytes)return h.push(this.readFixed32());var l=Xl(this);for(h=h||[];this.pos<l;)h.push(this.readFixed32());return h},readPackedSFixed32:function(h){if(this.type!==Zr.Bytes)return h.push(this.readSFixed32());var l=Xl(this);for(h=h||[];this.pos<l;)h.push(this.readSFixed32());return h},readPackedFixed64:function(h){if(this.type!==Zr.Bytes)return h.push(this.readFixed64());var l=Xl(this);for(h=h||[];this.pos<l;)h.push(this.readFixed64());return h},readPackedSFixed64:function(h){if(this.type!==Zr.Bytes)return h.push(this.readSFixed64());var l=Xl(this);for(h=h||[];this.pos<l;)h.push(this.readSFixed64());return h},skip:function(h){var l=7&h;if(l===Zr.Varint)for(;this.buf[this.pos++]>127;);else if(l===Zr.Bytes)this.pos=this.readVarint()+this.pos;else if(l===Zr.Fixed32)this.pos+=4;else{if(l!==Zr.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(h,l){this.writeVarint(h<<3|l)},realloc:function(h){for(var l=this.length||16;l<this.pos+h;)l*=2;if(l!==this.length){var f=new Uint8Array(l);f.set(this.buf),this.buf=f,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(h){this.realloc(4),lf(this.buf,h,this.pos),this.pos+=4},writeSFixed32:function(h){this.realloc(4),lf(this.buf,h,this.pos),this.pos+=4},writeFixed64:function(h){this.realloc(8),lf(this.buf,-1&h,this.pos),lf(this.buf,Math.floor(h*zM),this.pos+4),this.pos+=8},writeSFixed64:function(h){this.realloc(8),lf(this.buf,-1&h,this.pos),lf(this.buf,Math.floor(h*zM),this.pos+4),this.pos+=8},writeVarint:function(h){(h=+h||0)>268435455||h<0?function(l,f){var m,x;if(l>=0?(m=l%4294967296|0,x=l/4294967296|0):(x=~(-l/4294967296),4294967295^(m=~(-l%4294967296))?m=m+1|0:(m=0,x=x+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(E,T,A){A.buf[A.pos++]=127&E|128,E>>>=7,A.buf[A.pos++]=127&E|128,E>>>=7,A.buf[A.pos++]=127&E|128,E>>>=7,A.buf[A.pos++]=127&E|128,A.buf[A.pos]=127&(E>>>=7)}(m,0,f),function(E,T){var A=(7&E)<<4;T.buf[T.pos++]|=A|((E>>>=3)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E)))))}(x,f)}(h,this):(this.realloc(4),this.buf[this.pos++]=127&h|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=h>>>7&127))))},writeSVarint:function(h){this.writeVarint(h<0?2*-h-1:2*h)},writeBoolean:function(h){this.writeVarint(!!h)},writeString:function(h){h=String(h),this.realloc(4*h.length),this.pos++;var l=this.pos;this.pos=function(m,x,E){for(var T,A,O=0;O<x.length;O++){if((T=x.charCodeAt(O))>55295&&T<57344){if(!A){T>56319||O+1===x.length?(m[E++]=239,m[E++]=191,m[E++]=189):A=T;continue}if(T<56320){m[E++]=239,m[E++]=191,m[E++]=189,A=T;continue}T=A-55296<<10|T-56320|65536,A=null}else A&&(m[E++]=239,m[E++]=191,m[E++]=189,A=null);T<128?m[E++]=T:(T<2048?m[E++]=T>>6|192:(T<65536?m[E++]=T>>12|224:(m[E++]=T>>18|240,m[E++]=T>>12&63|128),m[E++]=T>>6&63|128),m[E++]=63&T|128)}return E}(this.buf,h,this.pos);var f=this.pos-l;f>=128&&VM(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeFloat:function(h){this.realloc(4),BM(this.buf,h,this.pos,!0,23,4),this.pos+=4},writeDouble:function(h){this.realloc(8),BM(this.buf,h,this.pos,!0,52,8),this.pos+=8},writeBytes:function(h){var l=h.length;this.writeVarint(l),this.realloc(l);for(var f=0;f<l;f++)this.buf[this.pos++]=h[f]},writeRawMessage:function(h,l){this.pos++;var f=this.pos;h(l,this);var m=this.pos-f;m>=128&&VM(f,m,this),this.pos=f-1,this.writeVarint(m),this.pos+=m},writeMessage:function(h,l,f){this.writeTag(h,Zr.Bytes),this.writeRawMessage(l,f)},writePackedVarint:function(h,l){l.length&&this.writeMessage(h,AH,l)},writePackedSVarint:function(h,l){l.length&&this.writeMessage(h,IH,l)},writePackedBoolean:function(h,l){l.length&&this.writeMessage(h,LH,l)},writePackedFloat:function(h,l){l.length&&this.writeMessage(h,DH,l)},writePackedDouble:function(h,l){l.length&&this.writeMessage(h,kH,l)},writePackedFixed32:function(h,l){l.length&&this.writeMessage(h,OH,l)},writePackedSFixed32:function(h,l){l.length&&this.writeMessage(h,NH,l)},writePackedFixed64:function(h,l){l.length&&this.writeMessage(h,BH,l)},writePackedSFixed64:function(h,l){l.length&&this.writeMessage(h,zH,l)},writeBytesField:function(h,l){this.writeTag(h,Zr.Bytes),this.writeBytes(l)},writeFixed32Field:function(h,l){this.writeTag(h,Zr.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(h,l){this.writeTag(h,Zr.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(h,l){this.writeTag(h,Zr.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(h,l){this.writeTag(h,Zr.Fixed64),this.writeSFixed64(l)},writeVarintField:function(h,l){this.writeTag(h,Zr.Varint),this.writeVarint(l)},writeSVarintField:function(h,l){this.writeTag(h,Zr.Varint),this.writeSVarint(l)},writeStringField:function(h,l){this.writeTag(h,Zr.Bytes),this.writeString(l)},writeFloatField:function(h,l){this.writeTag(h,Zr.Fixed32),this.writeFloat(l)},writeDoubleField:function(h,l){this.writeTag(h,Zr.Fixed64),this.writeDouble(l)},writeBooleanField:function(h,l){this.writeVarintField(h,!!l)}};var G_=d(OM);const V_=3;function GH(h,l,f){h===1&&f.readMessage(VH,l)}function VH(h,l,f){if(h===3){const{id:m,bitmap:x,width:E,height:T,left:A,top:O,advance:z}=f.readMessage(HH,{});l.push({id:m,bitmap:new Xg({width:E+2*V_,height:T+2*V_},x),metrics:{width:E,height:T,left:A,top:O,advance:z}})}}function HH(h,l,f){h===1?l.id=f.readVarint():h===2?l.bitmap=f.readBytes():h===3?l.width=f.readVarint():h===4?l.height=f.readVarint():h===5?l.left=f.readSVarint():h===6?l.top=f.readSVarint():h===7&&(l.advance=f.readVarint())}const UM=V_;function WM(h){let l=0,f=0;for(const T of h)l+=T.w*T.h,f=Math.max(f,T.w);h.sort((T,A)=>A.h-T.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),f),h:1/0}];let x=0,E=0;for(const T of h)for(let A=m.length-1;A>=0;A--){const O=m[A];if(!(T.w>O.w||T.h>O.h)){if(T.x=O.x,T.y=O.y,E=Math.max(E,T.y+T.h),x=Math.max(x,T.x+T.w),T.w===O.w&&T.h===O.h){const z=m.pop();A<m.length&&(m[A]=z)}else T.h===O.h?(O.x+=T.w,O.w-=T.w):T.w===O.w?(O.y+=T.h,O.h-=T.h):(m.push({x:O.x+T.w,y:O.y,w:O.w-T.w,h:T.h}),O.y+=T.h,O.h-=T.h);break}}return{w:x,h:E,fill:l/(x*E)||0}}const Vs=1;class H_{constructor(l,{pixelRatio:f,version:m,stretchX:x,stretchY:E,content:T}){this.paddedRect=l,this.pixelRatio=f,this.stretchX=x,this.stretchY=E,this.content=T,this.version=m}get tl(){return[this.paddedRect.x+Vs,this.paddedRect.y+Vs]}get br(){return[this.paddedRect.x+this.paddedRect.w-Vs,this.paddedRect.y+this.paddedRect.h-Vs]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Vs)/this.pixelRatio,(this.paddedRect.h-2*Vs)/this.pixelRatio]}}class jM{constructor(l,f){const m={},x={};this.haveRenderCallbacks=[];const E=[];this.addImages(l,m,E),this.addImages(f,x,E);const{w:T,h:A}=WM(E),O=new Ro({width:T||1,height:A||1});for(const z in l){const U=l[z],Z=m[z].paddedRect;Ro.copy(U.data,O,{x:0,y:0},{x:Z.x+Vs,y:Z.y+Vs},U.data)}for(const z in f){const U=f[z],Z=x[z].paddedRect,Q=Z.x+Vs,ne=Z.y+Vs,se=U.data.width,we=U.data.height;Ro.copy(U.data,O,{x:0,y:0},{x:Q,y:ne},U.data),Ro.copy(U.data,O,{x:0,y:we-1},{x:Q,y:ne-1},{width:se,height:1}),Ro.copy(U.data,O,{x:0,y:0},{x:Q,y:ne+we},{width:se,height:1}),Ro.copy(U.data,O,{x:se-1,y:0},{x:Q-1,y:ne},{width:1,height:we}),Ro.copy(U.data,O,{x:0,y:0},{x:Q+se,y:ne},{width:1,height:we})}this.image=O,this.iconPositions=m,this.patternPositions=x}addImages(l,f,m){for(const x in l){const E=l[x],T={x:0,y:0,w:E.data.width+2*Vs,h:E.data.height+2*Vs};m.push(T),f[x]=new H_(T,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(l,f){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in l.updatedImages)this.patchUpdatedImage(this.iconPositions[m],l.getImage(m),f),this.patchUpdatedImage(this.patternPositions[m],l.getImage(m),f)}patchUpdatedImage(l,f,m){if(!l||!f||l.version===f.version)return;l.version=f.version;const[x,E]=l.tl;m.update(f.data,void 0,{x,y:E})}}var $c;Kt("ImagePosition",H_),Kt("ImageAtlas",jM),o.ai=void 0,($c=o.ai||(o.ai={}))[$c.none=0]="none",$c[$c.horizontal=1]="horizontal",$c[$c.vertical=2]="vertical",$c[$c.horizontalOnly=3]="horizontalOnly";const nm=-17;class sm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,f){const m=new sm;return m.scale=l||1,m.fontStack=f,m}static forImage(l){const f=new sm;return f.imageName=l,f}}class cf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,f){const m=new cf;for(let x=0;x<l.sections.length;x++){const E=l.sections[x];E.image?m.addImageSection(E):m.addTextSection(E,f)}return m}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let f="";for(let m=0;m<l.length;m++){const x=l.charCodeAt(m+1)||null,E=l.charCodeAt(m-1)||null;f+=x&&my(x)&&!im[l[m+1]]||E&&my(E)&&!im[l[m-1]]||!im[l[m]]?l[m]:im[l[m]]}return f}(this.text)}trim(){let l=0;for(let m=0;m<this.text.length&&Ny[this.text.charCodeAt(m)];m++)l++;let f=this.text.length;for(let m=this.text.length-1;m>=0&&m>=l&&Ny[this.text.charCodeAt(m)];m--)f--;this.text=this.text.substring(l,f),this.sectionIndex=this.sectionIndex.slice(l,f)}substring(l,f){const m=new cf;return m.text=this.text.substring(l,f),m.sectionIndex=this.sectionIndex.slice(l,f),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,f)=>Math.max(l,this.sections[f].scale),0)}addTextSection(l,f){this.text+=l.text,this.sections.push(sm.forText(l.scale,l.fontStack||f));const m=this.sections.length-1;for(let x=0;x<l.text.length;++x)this.sectionIndex.push(m)}addImageSection(l){const f=l.image?l.image.name:"";if(f.length===0)return void et("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(sm.forImage(f)),this.sectionIndex.push(this.sections.length-1)):et("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Oy(h,l,f,m,x,E,T,A,O,z,U,Z,Q,ne,se,we){const Pe=cf.fromFeature(h,x);let De;Z===o.ai.vertical&&Pe.verticalizePunctuation();const{processBidirectionalText:$e,processStyledBidirectionalText:Oe}=zs;if($e&&Pe.sections.length===1){De=[];const yt=$e(Pe.toString(),U_(Pe,z,E,l,m,ne,se));for(const Ht of yt){const nr=new cf;nr.text=Ht,nr.sections=Pe.sections;for(let zt=0;zt<Ht.length;zt++)nr.sectionIndex.push(0);De.push(nr)}}else if(Oe){De=[];const yt=Oe(Pe.text,Pe.sectionIndex,U_(Pe,z,E,l,m,ne,se));for(const Ht of yt){const nr=new cf;nr.text=Ht[0],nr.sectionIndex=Ht[1],nr.sections=Pe.sections,De.push(nr)}}else De=function(yt,Ht){const nr=[],zt=yt.text;let Bt=0;for(const It of Ht)nr.push(yt.substring(Bt,It)),Bt=It;return Bt<zt.length&&nr.push(yt.substring(Bt,zt.length)),nr}(Pe,U_(Pe,z,E,l,m,ne,se));const Ze=[],tt={positionedLines:Ze,text:Pe.toString(),top:U[1],bottom:U[1],left:U[0],right:U[0],writingMode:Z,iconsInText:!1,verticalizable:!1};return function(yt,Ht,nr,zt,Bt,It,Xt,kt,_t,dr,ar,Er){let fi=0,vi=nm,dn=0,co=0;const ws=kt==="right"?1:kt==="left"?0:.5;let tn=0;for(const fn of Bt){fn.trim();const pn=fn.getMaxScale(),Zn=(pn-1)*hn,_s={positionedGlyphs:[],lineOffset:0};yt.positionedLines[tn]=_s;const Xn=_s.positionedGlyphs;let Hs=0;if(!fn.length()){vi+=It,++tn;continue}for(let gn=0;gn<fn.length();gn++){const Fr=fn.getSection(gn),Yn=fn.getSectionIndex(gn),zn=fn.getCharCode(gn);let mn=0,ra=null,Pa=null,Ma=null,Yl=hn;const ia=!(_t===o.ai.horizontal||!ar&&!Ag(zn)||ar&&(Ny[zn]||(Tn=zn,Vt.Arabic(Tn)||Vt["Arabic Supplement"](Tn)||Vt["Arabic Extended-A"](Tn)||Vt["Arabic Presentation Forms-A"](Tn)||Vt["Arabic Presentation Forms-B"](Tn))));if(Fr.imageName){const Po=zt[Fr.imageName];if(!Po)continue;Ma=Fr.imageName,yt.iconsInText=yt.iconsInText||!0,Pa=Po.paddedRect;const Ws=Po.displaySize;Fr.scale=Fr.scale*hn/Er,ra={width:Ws[0],height:Ws[1],left:Vs,top:-UM,advance:ia?Ws[1]:Ws[0]},mn=Zn+(hn-Ws[1]*Fr.scale),Yl=ra.advance;const Ql=ia?Ws[0]*Fr.scale-hn*pn:Ws[1]*Fr.scale-hn*pn;Ql>0&&Ql>Hs&&(Hs=Ql)}else{const Po=nr[Fr.fontStack],Ws=Po&&Po[zn];if(Ws&&Ws.rect)Pa=Ws.rect,ra=Ws.metrics;else{const Ql=Ht[Fr.fontStack],um=Ql&&Ql[zn];if(!um)continue;ra=um.metrics}mn=(pn-Fr.scale)*hn}ia?(yt.verticalizable=!0,Xn.push({glyph:zn,imageName:Ma,x:fi,y:vi+mn,vertical:ia,scale:Fr.scale,fontStack:Fr.fontStack,sectionIndex:Yn,metrics:ra,rect:Pa}),fi+=Yl*Fr.scale+dr):(Xn.push({glyph:zn,imageName:Ma,x:fi,y:vi+mn,vertical:ia,scale:Fr.scale,fontStack:Fr.fontStack,sectionIndex:Yn,metrics:ra,rect:Pa}),fi+=ra.advance*Fr.scale+dr)}Xn.length!==0&&(dn=Math.max(fi-dr,dn),jH(Xn,0,Xn.length-1,ws,Hs)),fi=0;const Us=It*pn+Hs;_s.lineOffset=Math.max(Hs,Zn),vi+=Us,co=Math.max(Us,co),++tn}var Tn;const Bn=vi-nm,{horizontalAlign:xs,verticalAlign:Cs}=W_(Xt);(function(fn,pn,Zn,_s,Xn,Hs,Us,gn,Fr){const Yn=(pn-Zn)*Xn;let zn=0;zn=Hs!==Us?-gn*_s-nm:(-_s*Fr+.5)*Us;for(const mn of fn)for(const ra of mn.positionedGlyphs)ra.x+=Yn,ra.y+=zn})(yt.positionedLines,ws,xs,Cs,dn,co,It,Bn,Bt.length),yt.top+=-Cs*Bn,yt.bottom=yt.top+Bn,yt.left+=-xs*dn,yt.right=yt.left+dn}(tt,l,f,m,De,T,A,O,Z,z,Q,we),!function(yt){for(const Ht of yt)if(Ht.positionedGlyphs.length!==0)return!1;return!0}(Ze)&&tt}const Ny={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},UH={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function $M(h,l,f,m,x,E){if(l.imageName){const T=m[l.imageName];return T?T.displaySize[0]*l.scale*hn/E+x:0}{const T=f[l.fontStack],A=T&&T[h];return A?A.metrics.advance*l.scale+x:0}}function qM(h,l,f,m){const x=Math.pow(h-l,2);return m?h<l?x/2:2*x:x+Math.abs(f)*f}function WH(h,l,f){let m=0;return h===10&&(m-=1e4),f&&(m+=150),h!==40&&h!==65288||(m+=50),l!==41&&l!==65289||(m+=50),m}function KM(h,l,f,m,x,E){let T=null,A=qM(l,f,x,E);for(const O of m){const z=qM(l-O.x,f,x,E)+O.badness;z<=A&&(T=O,A=z)}return{index:h,x:l,priorBreak:T,badness:A}}function ZM(h){return h?ZM(h.priorBreak).concat(h.index):[]}function U_(h,l,f,m,x,E,T){if(E!=="point")return[];if(!h)return[];const A=[],O=function(Q,ne,se,we,Pe,De){let $e=0;for(let Oe=0;Oe<Q.length();Oe++){const Ze=Q.getSection(Oe);$e+=$M(Q.getCharCode(Oe),Ze,we,Pe,ne,De)}return $e/Math.max(1,Math.ceil($e/se))}(h,l,f,m,x,T),z=h.text.indexOf("")>=0;let U=0;for(let Q=0;Q<h.length();Q++){const ne=h.getSection(Q),se=h.getCharCode(Q);if(Ny[se]||(U+=$M(se,ne,m,x,l,T)),Q<h.length()-1){const we=!((Z=se)<11904||!(Vt["Bopomofo Extended"](Z)||Vt.Bopomofo(Z)||Vt["CJK Compatibility Forms"](Z)||Vt["CJK Compatibility Ideographs"](Z)||Vt["CJK Compatibility"](Z)||Vt["CJK Radicals Supplement"](Z)||Vt["CJK Strokes"](Z)||Vt["CJK Symbols and Punctuation"](Z)||Vt["CJK Unified Ideographs Extension A"](Z)||Vt["CJK Unified Ideographs"](Z)||Vt["Enclosed CJK Letters and Months"](Z)||Vt["Halfwidth and Fullwidth Forms"](Z)||Vt.Hiragana(Z)||Vt["Ideographic Description Characters"](Z)||Vt["Kangxi Radicals"](Z)||Vt["Katakana Phonetic Extensions"](Z)||Vt.Katakana(Z)||Vt["Vertical Forms"](Z)||Vt["Yi Radicals"](Z)||Vt["Yi Syllables"](Z)));(UH[se]||we||ne.imageName)&&A.push(KM(Q+1,U,O,A,WH(se,h.getCharCode(Q+1),we&&z),!1))}}var Z;return ZM(KM(h.length(),U,O,A,0,!0))}function W_(h){let l=.5,f=.5;switch(h){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:l,verticalAlign:f}}function jH(h,l,f,m,x){if(!m&&!x)return;const E=h[f],T=(h[f].x+E.metrics.advance*E.scale)*m;for(let A=l;A<=f;A++)h[A].x-=T,h[A].y+=x}function $H(h,l,f){const{horizontalAlign:m,verticalAlign:x}=W_(f),E=l[0]-h.displaySize[0]*m,T=l[1]-h.displaySize[1]*x;return{image:h,top:T,bottom:T+h.displaySize[1],left:E,right:E+h.displaySize[0]}}function XM(h,l,f,m,x,E){const T=h.image;let A;if(T.content){const Pe=T.content,De=T.pixelRatio||1;A=[Pe[0]/De,Pe[1]/De,T.displaySize[0]-Pe[2]/De,T.displaySize[1]-Pe[3]/De]}const O=l.left*E,z=l.right*E;let U,Z,Q,ne;f==="width"||f==="both"?(ne=x[0]+O-m[3],Z=x[0]+z+m[1]):(ne=x[0]+(O+z-T.displaySize[0])/2,Z=ne+T.displaySize[0]);const se=l.top*E,we=l.bottom*E;return f==="height"||f==="both"?(U=x[1]+se-m[0],Q=x[1]+we+m[2]):(U=x[1]+(se+we-T.displaySize[1])/2,Q=U+T.displaySize[1]),{image:T,top:U,right:Z,bottom:Q,left:ne,collisionPadding:A}}const om=255,cl=128,qc=om*cl;function YM(h,l){const{expression:f}=l;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new hi(h+1))};if(f.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:x}=f;let E=0;for(;E<m.length&&m[E]<=h;)E++;E=Math.max(0,E-1);let T=E;for(;T<m.length&&m[T]<h+1;)T++;T=Math.min(m.length-1,T);const A=m[E],O=m[T];return f.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:O,interpolationType:x}:{kind:"camera",minZoom:A,maxZoom:O,minSize:f.evaluate(new hi(A)),maxSize:f.evaluate(new hi(O)),interpolationType:x}}}function j_(h,l,f){let m="never";const x=h.get(l);return x?m=x:h.get(f)&&(m="always"),m}const qH=jc.VectorTileFeature.types,KH=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function By(h,l,f,m,x,E,T,A,O,z,U,Z,Q){const ne=A?Math.min(qc,Math.round(A[0])):0,se=A?Math.min(qc,Math.round(A[1])):0;h.emplaceBack(l,f,Math.round(32*m),Math.round(32*x),E,T,(ne<<1)+(O?1:0),se,16*z,16*U,256*Z,256*Q)}function $_(h,l,f){h.emplaceBack(l.x,l.y,f),h.emplaceBack(l.x,l.y,f),h.emplaceBack(l.x,l.y,f),h.emplaceBack(l.x,l.y,f)}function ZH(h){for(const l of h.sections)if(y_(l.text))return!0;return!1}class q_{constructor(l){this.layoutVertexArray=new Tr,this.indexArray=new En,this.programConfigurations=l,this.segments=new di,this.dynamicLayoutVertexArray=new Sr,this.opacityVertexArray=new Mr,this.hasVisibleVertices=!1,this.placedSymbolArray=new ze}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,f,m,x){this.isEmpty()||(m&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,RH.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,TH.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,KH,!0),this.opacityVertexBuffer.itemSize=1),(m||x)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Kt("SymbolBuffers",q_);class K_{constructor(l,f,m){this.layoutVertexArray=new l,this.layoutAttributes=f,this.indexArray=new m,this.segments=new di,this.collisionVertexArray=new ri}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,PH.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Kt("CollisionBuffers",K_);class uf{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(T=>T.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=E_([]),this.placementViewportMatrix=E_([]);const f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=YM(this.zoom,f["text-size"]),this.iconSizeData=YM(this.zoom,f["icon-size"]);const m=this.layers[0].layout,x=m.get("symbol-sort-key"),E=m.get("symbol-z-order");this.canOverlap=j_(m,"text-overlap","text-allow-overlap")!=="never"||j_(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=E!=="viewport-y"&&!x.isConstant(),this.sortFeaturesByY=(E==="viewport-y"||E==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(T=>o.ai[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=l.sourceID}createArrays(){this.text=new q_(new Ta(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new q_(new Ta(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new Ue,this.lineVertexArray=new it,this.symbolInstances=new Me,this.textAnchorOffsets=new vt}calculateGlyphDependencies(l,f,m,x,E){for(let T=0;T<l.length;T++)if(f[l.charCodeAt(T)]=!0,(m||x)&&E){const A=im[l.charAt(T)];A&&(f[A.charCodeAt(0)]=!0)}}populate(l,f,m){const x=this.layers[0],E=x.layout,T=E.get("text-font"),A=E.get("text-field"),O=E.get("icon-image"),z=(A.value.kind!=="constant"||A.value.value instanceof ei&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),U=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,Z=E.get("symbol-sort-key");if(this.features=[],!z&&!U)return;const Q=f.iconDependencies,ne=f.glyphDependencies,se=f.availableImages,we=new hi(this.zoom);for(const{feature:Pe,id:De,index:$e,sourceLayerIndex:Oe}of l){const Ze=x._featureFilter.needGeometry,tt=gh(Pe,Ze);if(!x._featureFilter.filter(we,tt,m))continue;let yt,Ht;if(Ze||(tt.geometry=ph(Pe)),z){const zt=x.getValueAndResolveTokens("text-field",tt,m,se),Bt=ei.factory(zt);ZH(Bt)&&(this.hasRTLText=!0),(!this.hasRTLText||Ng()==="unavailable"||this.hasRTLText&&zs.isParsed())&&(yt=FH(Bt,x,tt))}if(U){const zt=x.getValueAndResolveTokens("icon-image",tt,m,se);Ht=zt instanceof Sn?zt:Sn.fromString(zt)}if(!yt&&!Ht)continue;const nr=this.sortFeaturesByKey?Z.evaluate(tt,{},m):void 0;if(this.features.push({id:De,text:yt,icon:Ht,index:$e,sourceLayerIndex:Oe,geometry:tt.geometry,properties:Pe.properties,type:qH[Pe.type],sortKey:nr}),Ht&&(Q[Ht.name]=!0),yt){const zt=T.evaluate(tt,{},m).join(","),Bt=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ai.vertical)>=0;for(const It of yt.sections)if(It.image)Q[It.image.name]=!0;else{const Xt=Mg(yt.toString()),kt=It.fontStack||zt,_t=ne[kt]=ne[kt]||{};this.calculateGlyphDependencies(It.text,_t,Bt,this.allowVerticalPlacement,Xt)}}}E.get("symbol-placement")==="line"&&(this.features=function(Pe){const De={},$e={},Oe=[];let Ze=0;function tt(zt){Oe.push(Pe[zt]),Ze++}function yt(zt,Bt,It){const Xt=$e[zt];return delete $e[zt],$e[Bt]=Xt,Oe[Xt].geometry[0].pop(),Oe[Xt].geometry[0]=Oe[Xt].geometry[0].concat(It[0]),Xt}function Ht(zt,Bt,It){const Xt=De[Bt];return delete De[Bt],De[zt]=Xt,Oe[Xt].geometry[0].shift(),Oe[Xt].geometry[0]=It[0].concat(Oe[Xt].geometry[0]),Xt}function nr(zt,Bt,It){const Xt=It?Bt[0][Bt[0].length-1]:Bt[0][0];return`${zt}:${Xt.x}:${Xt.y}`}for(let zt=0;zt<Pe.length;zt++){const Bt=Pe[zt],It=Bt.geometry,Xt=Bt.text?Bt.text.toString():null;if(!Xt){tt(zt);continue}const kt=nr(Xt,It),_t=nr(Xt,It,!0);if(kt in $e&&_t in De&&$e[kt]!==De[_t]){const dr=Ht(kt,_t,It),ar=yt(kt,_t,Oe[dr].geometry);delete De[kt],delete $e[_t],$e[nr(Xt,Oe[ar].geometry,!0)]=ar,Oe[dr].geometry=null}else kt in $e?yt(kt,_t,It):_t in De?Ht(kt,_t,It):(tt(zt),De[kt]=Ze-1,$e[_t]=Ze-1)}return Oe.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Pe,De)=>Pe.sortKey-De.sortKey)}update(l,f,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,f,this.layers,m),this.icon.programConfigurations.updatePaintArrays(l,f,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,f){const m=this.lineVertexArray.length;if(l.segment!==void 0){let x=l.dist(f[l.segment+1]),E=l.dist(f[l.segment]);const T={};for(let A=l.segment+1;A<f.length;A++)T[A]={x:f[A].x,y:f[A].y,tileUnitDistanceFromAnchor:x},A<f.length-1&&(x+=f[A+1].dist(f[A]));for(let A=l.segment||0;A>=0;A--)T[A]={x:f[A].x,y:f[A].y,tileUnitDistanceFromAnchor:E},A>0&&(E+=f[A-1].dist(f[A]));for(let A=0;A<f.length;A++){const O=T[A];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(l,f,m,x,E,T,A,O,z,U,Z,Q){const ne=l.indexArray,se=l.layoutVertexArray,we=l.segments.prepareSegment(4*f.length,se,ne,this.canOverlap?T.sortKey:void 0),Pe=this.glyphOffsetArray.length,De=we.vertexLength,$e=this.allowVerticalPlacement&&A===o.ai.vertical?Math.PI/2:0,Oe=T.text&&T.text.sections;for(let Ze=0;Ze<f.length;Ze++){const{tl:tt,tr:yt,bl:Ht,br:nr,tex:zt,pixelOffsetTL:Bt,pixelOffsetBR:It,minFontScaleX:Xt,minFontScaleY:kt,glyphOffset:_t,isSDF:dr,sectionIndex:ar}=f[Ze],Er=we.vertexLength,fi=_t[1];By(se,O.x,O.y,tt.x,fi+tt.y,zt.x,zt.y,m,dr,Bt.x,Bt.y,Xt,kt),By(se,O.x,O.y,yt.x,fi+yt.y,zt.x+zt.w,zt.y,m,dr,It.x,Bt.y,Xt,kt),By(se,O.x,O.y,Ht.x,fi+Ht.y,zt.x,zt.y+zt.h,m,dr,Bt.x,It.y,Xt,kt),By(se,O.x,O.y,nr.x,fi+nr.y,zt.x+zt.w,zt.y+zt.h,m,dr,It.x,It.y,Xt,kt),$_(l.dynamicLayoutVertexArray,O,$e),ne.emplaceBack(Er,Er+1,Er+2),ne.emplaceBack(Er+1,Er+2,Er+3),we.vertexLength+=4,we.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_t[0]),Ze!==f.length-1&&ar===f[Ze+1].sectionIndex||l.programConfigurations.populatePaintArrays(se.length,T,T.index,{},Q,Oe&&Oe[ar])}l.placedSymbolArray.emplaceBack(O.x,O.y,Pe,this.glyphOffsetArray.length-Pe,De,z,U,O.segment,m?m[0]:0,m?m[1]:0,x[0],x[1],A,0,!1,0,Z)}_addCollisionDebugVertex(l,f,m,x,E,T){return f.emplaceBack(0,0),l.emplaceBack(m.x,m.y,x,E,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(l,f,m,x,E,T,A){const O=E.segments.prepareSegment(4,E.layoutVertexArray,E.indexArray),z=O.vertexLength,U=E.layoutVertexArray,Z=E.collisionVertexArray,Q=A.anchorX,ne=A.anchorY;this._addCollisionDebugVertex(U,Z,T,Q,ne,new y(l,f)),this._addCollisionDebugVertex(U,Z,T,Q,ne,new y(m,f)),this._addCollisionDebugVertex(U,Z,T,Q,ne,new y(m,x)),this._addCollisionDebugVertex(U,Z,T,Q,ne,new y(l,x)),O.vertexLength+=4;const se=E.indexArray;se.emplaceBack(z,z+1),se.emplaceBack(z+1,z+2),se.emplaceBack(z+2,z+3),se.emplaceBack(z+3,z),O.primitiveLength+=4}addDebugCollisionBoxes(l,f,m,x){for(let E=l;E<f;E++){const T=this.collisionBoxArray.get(E);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,x?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new K_(Li,LM.members,cn),this.iconCollisionBox=new K_(Li,LM.members,cn);for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(l,f,m,x,E,T,A,O,z){const U={};for(let Z=f;Z<m;Z++){const Q=l.get(Z);U.textBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},U.textFeatureIndex=Q.featureIndex;break}for(let Z=x;Z<E;Z++){const Q=l.get(Z);U.verticalTextBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},U.verticalTextFeatureIndex=Q.featureIndex;break}for(let Z=T;Z<A;Z++){const Q=l.get(Z);U.iconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},U.iconFeatureIndex=Q.featureIndex;break}for(let Z=O;Z<z;Z++){const Q=l.get(Z);U.verticalIconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},U.verticalIconFeatureIndex=Q.featureIndex;break}return U}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){const m=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,f){const m=l.placedSymbolArray.get(f),x=m.vertexStartIndex+4*m.numGlyphs;for(let E=m.vertexStartIndex;E<x;E+=4)l.indexArray.emplaceBack(E,E+1,E+2),l.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const f=Math.sin(l),m=Math.cos(l),x=[],E=[],T=[];for(let A=0;A<this.symbolInstances.length;++A){T.push(A);const O=this.symbolInstances.get(A);x.push(0|Math.round(f*O.anchorX+m*O.anchorY)),E.push(O.featureIndex)}return T.sort((A,O)=>x[A]-x[O]||E[O]-E[A]),T}addToSortKeyRanges(l,f){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===f?m.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const f of this.symbolInstanceIndexes){const m=this.symbolInstances.get(f);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((x,E,T)=>{x>=0&&T.indexOf(x)===E&&this.addIndicesForPlacedSymbol(this.text,x)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let QM,JM;Kt("SymbolBucket",uf,{omit:["layers","collisionBoxArray","features","compareText"]}),uf.MAX_GLYPHS=65535,uf.addDynamicAttributes=$_;var Z_={get paint(){return JM=JM||new Hi({"icon-opacity":new pr(Ke.paint_symbol["icon-opacity"]),"icon-color":new pr(Ke.paint_symbol["icon-color"]),"icon-halo-color":new pr(Ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new pr(Ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new pr(Ke.paint_symbol["icon-halo-blur"]),"icon-translate":new cr(Ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new cr(Ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new pr(Ke.paint_symbol["text-opacity"]),"text-color":new pr(Ke.paint_symbol["text-color"],{runtimeType:wi,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new pr(Ke.paint_symbol["text-halo-color"]),"text-halo-width":new pr(Ke.paint_symbol["text-halo-width"]),"text-halo-blur":new pr(Ke.paint_symbol["text-halo-blur"]),"text-translate":new cr(Ke.paint_symbol["text-translate"]),"text-translate-anchor":new cr(Ke.paint_symbol["text-translate-anchor"])})},get layout(){return QM=QM||new Hi({"symbol-placement":new cr(Ke.layout_symbol["symbol-placement"]),"symbol-spacing":new cr(Ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new cr(Ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new pr(Ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new cr(Ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new cr(Ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new cr(Ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new cr(Ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new cr(Ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new cr(Ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new pr(Ke.layout_symbol["icon-size"]),"icon-text-fit":new cr(Ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new cr(Ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new pr(Ke.layout_symbol["icon-image"]),"icon-rotate":new pr(Ke.layout_symbol["icon-rotate"]),"icon-padding":new pr(Ke.layout_symbol["icon-padding"]),"icon-keep-upright":new cr(Ke.layout_symbol["icon-keep-upright"]),"icon-offset":new pr(Ke.layout_symbol["icon-offset"]),"icon-anchor":new pr(Ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new cr(Ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new cr(Ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new cr(Ke.layout_symbol["text-rotation-alignment"]),"text-field":new pr(Ke.layout_symbol["text-field"]),"text-font":new pr(Ke.layout_symbol["text-font"]),"text-size":new pr(Ke.layout_symbol["text-size"]),"text-max-width":new pr(Ke.layout_symbol["text-max-width"]),"text-line-height":new cr(Ke.layout_symbol["text-line-height"]),"text-letter-spacing":new pr(Ke.layout_symbol["text-letter-spacing"]),"text-justify":new pr(Ke.layout_symbol["text-justify"]),"text-radial-offset":new pr(Ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new cr(Ke.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new pr(Ke.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new pr(Ke.layout_symbol["text-anchor"]),"text-max-angle":new cr(Ke.layout_symbol["text-max-angle"]),"text-writing-mode":new cr(Ke.layout_symbol["text-writing-mode"]),"text-rotate":new pr(Ke.layout_symbol["text-rotate"]),"text-padding":new cr(Ke.layout_symbol["text-padding"]),"text-keep-upright":new cr(Ke.layout_symbol["text-keep-upright"]),"text-transform":new pr(Ke.layout_symbol["text-transform"]),"text-offset":new pr(Ke.layout_symbol["text-offset"]),"text-allow-overlap":new cr(Ke.layout_symbol["text-allow-overlap"]),"text-overlap":new cr(Ke.layout_symbol["text-overlap"]),"text-ignore-placement":new cr(Ke.layout_symbol["text-ignore-placement"]),"text-optional":new cr(Ke.layout_symbol["text-optional"])})}};class eF{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:Ls,this.defaultValue=l}evaluate(l){if(l.formattedSection){const f=this.defaultValue.property.overrides;if(f&&f.hasOverride(l.formattedSection))return f.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Kt("FormatSectionOverride",eF,{omit:["defaultValue"]});class zy extends ao{constructor(l){super(l,Z_)}recalculate(l,f){if(super.recalculate(l,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const x=[];for(const E of m)x.indexOf(E)<0&&x.push(E);this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,f,m,x){const E=this.layout.get(l).evaluate(f,{},m,x),T=this._unevaluatedLayout._values[l];return T.isDataDriven()||Ud(T.value)||!E?E:function(A,O){return O.replace(/{([^{}]+)}/g,(z,U)=>A&&U in A?String(A[U]):"")}(f.properties,E)}createBucket(l){return new uf(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of Z_.paint.overridableProperties){if(!zy.hasPaintOverride(this.layout,l))continue;const f=this.paint.get(l),m=new eF(f),x=new bg(m,f.property.specification);let E=null;E=f.value.kind==="constant"||f.value.kind==="source"?new Sg("source",x):new jd("composite",x,f.value.zoomStops),this.paint._values[l]=new qn(f.property,E,f.parameters)}}_handleOverridablePaintPropertyUpdate(l,f,m){return!(!this.layout||f.isDataDriven()||m.isDataDriven())&&zy.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,f){const m=l.get("text-field"),x=Z_.paint.properties[f];let E=!1;const T=A=>{for(const O of A)if(x.overrides&&x.overrides.hasOverride(O))return void(E=!0)};if(m.value.kind==="constant"&&m.value.value instanceof ei)T(m.value.value.sections);else if(m.value.kind==="source"){const A=z=>{E||(z instanceof Bl&&xi(z.value)===be?T(z.value.sections):z instanceof Hd?T(z.sections):z.eachChild(A))},O=m.value;O._styleExpression&&A(O._styleExpression.expression)}return E}}let tF;var XH={get paint(){return tF=tF||new Hi({"background-color":new cr(Ke.paint_background["background-color"]),"background-pattern":new zg(Ke.paint_background["background-pattern"]),"background-opacity":new cr(Ke.paint_background["background-opacity"])})}};class YH extends ao{constructor(l){super(l,XH)}}let rF;var QH={get paint(){return rF=rF||new Hi({"raster-opacity":new cr(Ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new cr(Ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new cr(Ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new cr(Ke.paint_raster["raster-brightness-max"]),"raster-saturation":new cr(Ke.paint_raster["raster-saturation"]),"raster-contrast":new cr(Ke.paint_raster["raster-contrast"]),"raster-resampling":new cr(Ke.paint_raster["raster-resampling"]),"raster-fade-duration":new cr(Ke.paint_raster["raster-fade-duration"])})}};class JH extends ao{constructor(l){super(l,QH)}}class e7 extends ao{constructor(l){super(l,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class t7{constructor(l){this._callback=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const X_=63710088e-1;class Kc{constructor(l,f){if(isNaN(l)||isNaN(f))throw new Error(`Invalid LngLat object: (${l}, ${f})`);if(this.lng=+l,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Kc(q(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const f=Math.PI/180,m=this.lat*f,x=l.lat*f,E=Math.sin(m)*Math.sin(x)+Math.cos(m)*Math.cos(x)*Math.cos((l.lng-this.lng)*f);return X_*Math.acos(Math.min(E,1))}static convert(l){if(l instanceof Kc)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Kc(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Kc(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const iF=2*Math.PI*X_;function nF(h){return iF*Math.cos(h*Math.PI/180)}function sF(h){return(180+h)/360}function oF(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function aF(h,l){return h/nF(l)}function lF(h){return 360*h-180}function Y_(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}class Gy{constructor(l,f,m=0){this.x=+l,this.y=+f,this.z=+m}static fromLngLat(l,f=0){const m=Kc.convert(l);return new Gy(sF(m.lng),oF(m.lat),aF(f,m.lat))}toLngLat(){return new Kc(lF(this.x),Y_(this.y))}toAltitude(){return this.z*nF(Y_(this.y))}meterInMercatorCoordinateUnits(){return 1/iF*(l=Y_(this.y),1/Math.cos(l*Math.PI/180));var l}}function cF(h,l,f){var m=2*Math.PI*6378137/256/Math.pow(2,f);return[h*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}class Q_{constructor(l,f,m){if(l<0||l>25||m<0||m>=Math.pow(2,l)||f<0||f>=Math.pow(2,l))throw new Error(`x=${f}, y=${m}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=f,this.y=m,this.key=am(0,l,l,f,m)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,f,m){const x=(T=this.y,A=this.z,O=cF(256*(E=this.x),256*(T=Math.pow(2,A)-T-1),A),z=cF(256*(E+1),256*(T+1),A),O[0]+","+O[1]+","+z[0]+","+z[1]);var E,T,A,O,z;const U=function(Z,Q,ne){let se,we="";for(let Pe=Z;Pe>0;Pe--)se=1<<Pe-1,we+=(Q&se?1:0)+(ne&se?2:0);return we}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,U).replace(/{bbox-epsg-3857}/g,x)}isChildOf(l){const f=this.z-l.z;return f>0&&l.x===this.x>>f&&l.y===this.y>>f}getTilePoint(l){const f=Math.pow(2,this.z);return new y((l.x*f-this.x)*en,(l.y*f-this.y)*en)}toString(){return`${this.z}/${this.x}/${this.y}`}}class uF{constructor(l,f){this.wrap=l,this.canonical=f,this.key=am(l,f.z,f.z,f.x,f.y)}}class To{constructor(l,f,m,x,E){if(l<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${m}`);this.overscaledZ=l,this.wrap=f,this.canonical=new Q_(m,+x,+E),this.key=am(f,l,m,x,E)}clone(){return new To(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-l;return l>this.canonical.z?new To(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new To(l,this.wrap,l,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(l,f){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-l;return l>this.canonical.z?am(this.wrap*+f,l,this.canonical.z,this.canonical.x,this.canonical.y):am(this.wrap*+f,l,l,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(l){if(l.wrap!==this.wrap)return!1;const f=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>f&&l.canonical.y===this.canonical.y>>f}children(l){if(this.overscaledZ>=l)return[new To(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const f=this.canonical.z+1,m=2*this.canonical.x,x=2*this.canonical.y;return[new To(f,this.wrap,f,m,x),new To(f,this.wrap,f,m+1,x),new To(f,this.wrap,f,m,x+1),new To(f,this.wrap,f,m+1,x+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new To(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new To(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new uF(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new Gy(l.x-this.wrap,l.y))}}function am(h,l,f,m,x){(h*=2)<0&&(h=-1*h-1);const E=1<<f;return(E*E*h+E*x+m).toString(36)+f.toString(36)+l.toString(36)}Kt("CanonicalTileID",Q_),Kt("OverscaledTileID",To,{omit:["posMatrix"]});class hF{constructor(l,f,m,x=1,E=1,T=1,A=0){if(this.uid=l,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void et(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;const O=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=x,this.greenFactor=E,this.blueFactor=T,this.baseShift=A;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<O;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(O,z)]=this.data[this._idx(O-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,O)]=this.data[this._idx(z,O-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(O,-1)]=this.data[this._idx(O-1,0)],this.data[this._idx(-1,O)]=this.data[this._idx(0,O-1)],this.data[this._idx(O,O)]=this.data[this._idx(O-1,O-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<O;z++)for(let U=0;U<O;U++){const Z=this.get(z,U);Z>this.max&&(this.max=Z),Z<this.min&&(this.min=Z)}}get(l,f){const m=new Uint8Array(this.data.buffer),x=4*this._idx(l,f);return this.unpack(m[x],m[x+1],m[x+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,f){if(l<-1||l>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(l+1)}unpack(l,f,m){return l*this.redFactor+f*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new Ro({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,f,m){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let x=f*this.dim,E=f*this.dim+this.dim,T=m*this.dim,A=m*this.dim+this.dim;switch(f){case-1:x=E-1;break;case 1:E=x+1}switch(m){case-1:T=A-1;break;case 1:A=T+1}const O=-f*this.dim,z=-m*this.dim;for(let U=T;U<A;U++)for(let Z=x;Z<E;Z++)this.data[this._idx(Z,U)]=l.data[this._idx(Z+O,U+z)]}}Kt("DEMData",hF);class dF{constructor(l){this._stringToNumber={},this._numberToString=[];for(let f=0;f<l.length;f++){const m=l[f];this._stringToNumber[m]=f,this._numberToString[f]=m}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class fF{constructor(l,f,m,x,E){this.type="Feature",this._vectorTileFeature=l,l._z=f,l._x=m,l._y=x,this.properties=l.properties,this.id=E}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(l[f]=this[f]);return l}}class pF{constructor(l,f){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Gc(en,16,0),this.grid3D=new Gc(en,16,0),this.featureIndexArray=new xt,this.promoteId=f}insert(l,f,m,x,E,T){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,x,E);const O=T?this.grid3D:this.grid;for(let z=0;z<f.length;z++){const U=f[z],Z=[1/0,1/0,-1/0,-1/0];for(let Q=0;Q<U.length;Q++){const ne=U[Q];Z[0]=Math.min(Z[0],ne.x),Z[1]=Math.min(Z[1],ne.y),Z[2]=Math.max(Z[2],ne.x),Z[3]=Math.max(Z[3],ne.y)}Z[0]<en&&Z[1]<en&&Z[2]>=0&&Z[3]>=0&&O.insert(A,Z[0],Z[1],Z[2],Z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new jc.VectorTile(new G_(this.rawTileData)).layers,this.sourceLayerCoder=new dF(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,f,m,x){this.loadVTLayers();const E=l.params||{},T=en/l.tileSize/l.scale,A=Rg(E.filter),O=l.queryGeometry,z=l.queryPadding*T,U=mF(O),Z=this.grid.query(U.minX-z,U.minY-z,U.maxX+z,U.maxY+z),Q=mF(l.cameraQueryGeometry),ne=this.grid3D.query(Q.minX-z,Q.minY-z,Q.maxX+z,Q.maxY+z,(Pe,De,$e,Oe)=>function(Ze,tt,yt,Ht,nr){for(const Bt of Ze)if(tt<=Bt.x&&yt<=Bt.y&&Ht>=Bt.x&&nr>=Bt.y)return!0;const zt=[new y(tt,yt),new y(tt,nr),new y(Ht,nr),new y(Ht,yt)];if(Ze.length>2){for(const Bt of zt)if(rf(Ze,Bt))return!0}for(let Bt=0;Bt<Ze.length-1;Bt++)if(DV(Ze[Bt],Ze[Bt+1],zt))return!0;return!1}(l.cameraQueryGeometry,Pe-z,De-z,$e+z,Oe+z));for(const Pe of ne)Z.push(Pe);Z.sort(r7);const se={};let we;for(let Pe=0;Pe<Z.length;Pe++){const De=Z[Pe];if(De===we)continue;we=De;const $e=this.featureIndexArray.get(De);let Oe=null;this.loadMatchingFeature(se,$e.bucketIndex,$e.sourceLayerIndex,$e.featureIndex,A,E.layers,E.availableImages,f,m,x,(Ze,tt,yt)=>(Oe||(Oe=ph(Ze)),tt.queryIntersectsFeature(O,Ze,yt,Oe,this.z,l.transform,T,l.pixelPosMatrix)))}return se}loadMatchingFeature(l,f,m,x,E,T,A,O,z,U,Z){const Q=this.bucketLayerIDs[f];if(T&&!function(Pe,De){for(let $e=0;$e<Pe.length;$e++)if(De.indexOf(Pe[$e])>=0)return!0;return!1}(T,Q))return;const ne=this.sourceLayerCoder.decode(m),se=this.vtLayers[ne].feature(x);if(E.needGeometry){const Pe=gh(se,!0);if(!E.filter(new hi(this.tileID.overscaledZ),Pe,this.tileID.canonical))return}else if(!E.filter(new hi(this.tileID.overscaledZ),se))return;const we=this.getId(se,ne);for(let Pe=0;Pe<Q.length;Pe++){const De=Q[Pe];if(T&&T.indexOf(De)<0)continue;const $e=O[De];if(!$e)continue;let Oe={};we&&U&&(Oe=U.getState($e.sourceLayer||"_geojsonTileLayer",we));const Ze=oe({},z[De]);Ze.paint=gF(Ze.paint,$e.paint,se,Oe,A),Ze.layout=gF(Ze.layout,$e.layout,se,Oe,A);const tt=!Z||Z(se,$e,Oe);if(!tt)continue;const yt=new fF(se,this.z,this.x,this.y,we);yt.layer=Ze;let Ht=l[De];Ht===void 0&&(Ht=l[De]=[]),Ht.push({featureIndex:x,feature:yt,intersectionZ:tt})}}lookupSymbolFeatures(l,f,m,x,E,T,A,O){const z={};this.loadVTLayers();const U=Rg(E);for(const Z of l)this.loadMatchingFeature(z,m,x,Z,U,T,A,O,f);return z}hasLayer(l){for(const f of this.bucketLayerIDs)for(const m of f)if(l===m)return!0;return!1}getId(l,f){let m=l.id;return this.promoteId&&(m=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof m=="boolean"&&(m=Number(m))),m}}function gF(h,l,f,m,x){return me(h,(E,T)=>{const A=l instanceof ef?l.get(T):null;return A&&A.evaluate?A.evaluate(f,m,x):A})}function mF(h){let l=1/0,f=1/0,m=-1/0,x=-1/0;for(const E of h)l=Math.min(l,E.x),f=Math.min(f,E.y),m=Math.max(m,E.x),x=Math.max(x,E.y);return{minX:l,minY:f,maxX:m,maxY:x}}function r7(h,l){return l-h}function vF(h,l,f,m,x){const E=[];for(let T=0;T<h.length;T++){const A=h[T];let O;for(let z=0;z<A.length-1;z++){let U=A[z],Z=A[z+1];U.x<l&&Z.x<l||(U.x<l?U=new y(l,U.y+(l-U.x)/(Z.x-U.x)*(Z.y-U.y))._round():Z.x<l&&(Z=new y(l,U.y+(l-U.x)/(Z.x-U.x)*(Z.y-U.y))._round()),U.y<f&&Z.y<f||(U.y<f?U=new y(U.x+(f-U.y)/(Z.y-U.y)*(Z.x-U.x),f)._round():Z.y<f&&(Z=new y(U.x+(f-U.y)/(Z.y-U.y)*(Z.x-U.x),f)._round()),U.x>=m&&Z.x>=m||(U.x>=m?U=new y(m,U.y+(m-U.x)/(Z.x-U.x)*(Z.y-U.y))._round():Z.x>=m&&(Z=new y(m,U.y+(m-U.x)/(Z.x-U.x)*(Z.y-U.y))._round()),U.y>=x&&Z.y>=x||(U.y>=x?U=new y(U.x+(x-U.y)/(Z.y-U.y)*(Z.x-U.x),x)._round():Z.y>=x&&(Z=new y(U.x+(x-U.y)/(Z.y-U.y)*(Z.x-U.x),x)._round()),O&&U.equals(O[O.length-1])||(O=[U],E.push(O)),O.push(Z)))))}}return E}Kt("FeatureIndex",pF,{omit:["rawTileData","sourceLayerCoder"]});class Zc extends y{constructor(l,f,m,x){super(l,f),this.angle=m,x!==void 0&&(this.segment=x)}clone(){return new Zc(this.x,this.y,this.angle,this.segment)}}function yF(h,l,f,m,x){if(l.segment===void 0||f===0)return!0;let E=l,T=l.segment+1,A=0;for(;A>-f/2;){if(T--,T<0)return!1;A-=h[T].dist(E),E=h[T]}A+=h[T].dist(h[T+1]),T++;const O=[];let z=0;for(;A<f/2;){const U=h[T],Z=h[T+1];if(!Z)return!1;let Q=h[T-1].angleTo(U)-U.angleTo(Z);for(Q=Math.abs((Q+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:A,angleDelta:Q}),z+=Q;A-O[0].distance>m;)z-=O.shift().angleDelta;if(z>x)return!1;T++,A+=U.dist(Z)}return!0}function wF(h){let l=0;for(let f=0;f<h.length-1;f++)l+=h[f].dist(h[f+1]);return l}function xF(h,l,f){return h?.6*l*f:0}function CF(h,l){return Math.max(h?h.right-h.left:0,l?l.right-l.left:0)}function i7(h,l,f,m,x,E){const T=xF(f,x,E),A=CF(f,m)*E;let O=0;const z=wF(h)/2;for(let U=0;U<h.length-1;U++){const Z=h[U],Q=h[U+1],ne=Z.dist(Q);if(O+ne>z){const se=(z-O)/ne,we=Os.number(Z.x,Q.x,se),Pe=Os.number(Z.y,Q.y,se),De=new Zc(we,Pe,Q.angleTo(Z),U);return De._round(),!T||yF(h,De,A,T,l)?De:void 0}O+=ne}}function n7(h,l,f,m,x,E,T,A,O){const z=xF(m,E,T),U=CF(m,x),Z=U*T,Q=h[0].x===0||h[0].x===O||h[0].y===0||h[0].y===O;return l-Z<l/4&&(l=Z+l/4),_F(h,Q?l/2*A%l:(U/2+2*E)*T*A%l,l,z,f,Z,Q,!1,O)}function _F(h,l,f,m,x,E,T,A,O){const z=E/2,U=wF(h);let Z=0,Q=l-f,ne=[];for(let se=0;se<h.length-1;se++){const we=h[se],Pe=h[se+1],De=we.dist(Pe),$e=Pe.angleTo(we);for(;Q+f<Z+De;){Q+=f;const Oe=(Q-Z)/De,Ze=Os.number(we.x,Pe.x,Oe),tt=Os.number(we.y,Pe.y,Oe);if(Ze>=0&&Ze<O&&tt>=0&&tt<O&&Q-z>=0&&Q+z<=U){const yt=new Zc(Ze,tt,$e,se);yt._round(),m&&!yF(h,yt,E,m,x)||ne.push(yt)}}Z+=De}return A||ne.length||T||(ne=_F(h,Z/2,f,m,x,E,T,!0,O)),ne}Kt("Anchor",Zc);const hf=Vs;function bF(h,l,f,m){const x=[],E=h.image,T=E.pixelRatio,A=E.paddedRect.w-2*hf,O=E.paddedRect.h-2*hf,z=h.right-h.left,U=h.bottom-h.top,Z=E.stretchX||[[0,A]],Q=E.stretchY||[[0,O]],ne=(It,Xt)=>It+Xt[1]-Xt[0],se=Z.reduce(ne,0),we=Q.reduce(ne,0),Pe=A-se,De=O-we;let $e=0,Oe=se,Ze=0,tt=we,yt=0,Ht=Pe,nr=0,zt=De;if(E.content&&m){const It=E.content;$e=Vy(Z,0,It[0]),Ze=Vy(Q,0,It[1]),Oe=Vy(Z,It[0],It[2]),tt=Vy(Q,It[1],It[3]),yt=It[0]-$e,nr=It[1]-Ze,Ht=It[2]-It[0]-Oe,zt=It[3]-It[1]-tt}const Bt=(It,Xt,kt,_t)=>{const dr=Hy(It.stretch-$e,Oe,z,h.left),ar=Uy(It.fixed-yt,Ht,It.stretch,se),Er=Hy(Xt.stretch-Ze,tt,U,h.top),fi=Uy(Xt.fixed-nr,zt,Xt.stretch,we),vi=Hy(kt.stretch-$e,Oe,z,h.left),dn=Uy(kt.fixed-yt,Ht,kt.stretch,se),co=Hy(_t.stretch-Ze,tt,U,h.top),ws=Uy(_t.fixed-nr,zt,_t.stretch,we),tn=new y(dr,Er),Tn=new y(vi,Er),Bn=new y(vi,co),xs=new y(dr,co),Cs=new y(ar/T,fi/T),fn=new y(dn/T,ws/T),pn=l*Math.PI/180;if(pn){const Xn=Math.sin(pn),Hs=Math.cos(pn),Us=[Hs,-Xn,Xn,Hs];tn._matMult(Us),Tn._matMult(Us),xs._matMult(Us),Bn._matMult(Us)}const Zn=It.stretch+It.fixed,_s=Xt.stretch+Xt.fixed;return{tl:tn,tr:Tn,bl:xs,br:Bn,tex:{x:E.paddedRect.x+hf+Zn,y:E.paddedRect.y+hf+_s,w:kt.stretch+kt.fixed-Zn,h:_t.stretch+_t.fixed-_s},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Cs,pixelOffsetBR:fn,minFontScaleX:Ht/T/z,minFontScaleY:zt/T/U,isSDF:f}};if(m&&(E.stretchX||E.stretchY)){const It=SF(Z,Pe,se),Xt=SF(Q,De,we);for(let kt=0;kt<It.length-1;kt++){const _t=It[kt],dr=It[kt+1];for(let ar=0;ar<Xt.length-1;ar++)x.push(Bt(_t,Xt[ar],dr,Xt[ar+1]))}}else x.push(Bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:O+1}));return x}function Vy(h,l,f){let m=0;for(const x of h)m+=Math.max(l,Math.min(f,x[1]))-Math.max(l,Math.min(f,x[0]));return m}function SF(h,l,f){const m=[{fixed:-hf,stretch:0}];for(const[x,E]of h){const T=m[m.length-1];m.push({fixed:x-T.stretch,stretch:T.stretch}),m.push({fixed:x-T.stretch,stretch:T.stretch+(E-x)})}return m.push({fixed:l+hf,stretch:f}),m}function Hy(h,l,f,m){return h/l*f+m}function Uy(h,l,f,m){return h-l*f/m}class Wy{constructor(l,f,m,x,E,T,A,O,z,U){if(this.boxStartIndex=l.length,z){let Z=T.top,Q=T.bottom;const ne=T.collisionPadding;ne&&(Z-=ne[1],Q+=ne[3]);let se=Q-Z;se>0&&(se=Math.max(10,se),this.circleDiameter=se)}else{let Z=T.top*A-O[0],Q=T.bottom*A+O[2],ne=T.left*A-O[3],se=T.right*A+O[1];const we=T.collisionPadding;if(we&&(ne-=we[0]*A,Z-=we[1]*A,se+=we[2]*A,Q+=we[3]*A),U){const Pe=new y(ne,Z),De=new y(se,Z),$e=new y(ne,Q),Oe=new y(se,Q),Ze=U*Math.PI/180;Pe._rotate(Ze),De._rotate(Ze),$e._rotate(Ze),Oe._rotate(Ze),ne=Math.min(Pe.x,De.x,$e.x,Oe.x),se=Math.max(Pe.x,De.x,$e.x,Oe.x),Z=Math.min(Pe.y,De.y,$e.y,Oe.y),Q=Math.max(Pe.y,De.y,$e.y,Oe.y)}l.emplaceBack(f.x,f.y,ne,Z,se,Q,m,x,E)}this.boxEndIndex=l.length}}class s7{constructor(l=[],f=o7){if(this.data=l,this.length=this.data.length,this.compare=f,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(l){this.data.push(l),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const l=this.data[0],f=this.data.pop();return this.length--,this.length>0&&(this.data[0]=f,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:f,compare:m}=this,x=f[l];for(;l>0;){const E=l-1>>1,T=f[E];if(m(x,T)>=0)break;f[l]=T,l=E}f[l]=x}_down(l){const{data:f,compare:m}=this,x=this.length>>1,E=f[l];for(;l<x;){let T=1+(l<<1),A=f[T];const O=T+1;if(O<this.length&&m(f[O],A)<0&&(T=O,A=f[O]),m(A,E)>=0)break;f[l]=A,l=T}f[l]=E}}function o7(h,l){return h<l?-1:h>l?1:0}function a7(h,l=1,f=!1){let m=1/0,x=1/0,E=-1/0,T=-1/0;const A=h[0];for(let ne=0;ne<A.length;ne++){const se=A[ne];(!ne||se.x<m)&&(m=se.x),(!ne||se.y<x)&&(x=se.y),(!ne||se.x>E)&&(E=se.x),(!ne||se.y>T)&&(T=se.y)}const O=Math.min(E-m,T-x);let z=O/2;const U=new s7([],l7);if(O===0)return new y(m,x);for(let ne=m;ne<E;ne+=O)for(let se=x;se<T;se+=O)U.push(new df(ne+z,se+z,z,h));let Z=function(ne){let se=0,we=0,Pe=0;const De=ne[0];for(let $e=0,Oe=De.length,Ze=Oe-1;$e<Oe;Ze=$e++){const tt=De[$e],yt=De[Ze],Ht=tt.x*yt.y-yt.x*tt.y;we+=(tt.x+yt.x)*Ht,Pe+=(tt.y+yt.y)*Ht,se+=3*Ht}return new df(we/se,Pe/se,0,ne)}(h),Q=U.length;for(;U.length;){const ne=U.pop();(ne.d>Z.d||!Z.d)&&(Z=ne,f&&console.log("found best %d after %d probes",Math.round(1e4*ne.d)/1e4,Q)),ne.max-Z.d<=l||(z=ne.h/2,U.push(new df(ne.p.x-z,ne.p.y-z,z,h)),U.push(new df(ne.p.x+z,ne.p.y-z,z,h)),U.push(new df(ne.p.x-z,ne.p.y+z,z,h)),U.push(new df(ne.p.x+z,ne.p.y+z,z,h)),Q+=4)}return f&&(console.log(`num probes: ${Q}`),console.log(`best distance: ${Z.d}`)),Z.p}function l7(h,l){return l.max-h.max}function df(h,l,f,m){this.p=new y(h,l),this.h=f,this.d=function(x,E){let T=!1,A=1/0;for(let O=0;O<E.length;O++){const z=E[O];for(let U=0,Z=z.length,Q=Z-1;U<Z;Q=U++){const ne=z[U],se=z[Q];ne.y>x.y!=se.y>x.y&&x.x<(se.x-ne.x)*(x.y-ne.y)/(se.y-ne.y)+ne.x&&(T=!T),A=Math.min(A,oM(x,ne,se))}}return(T?1:-1)*Math.sqrt(A)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Nn;o.aq=void 0,(Nn=o.aq||(o.aq={}))[Nn.center=1]="center",Nn[Nn.left=2]="left",Nn[Nn.right=3]="right",Nn[Nn.top=4]="top",Nn[Nn.bottom=5]="bottom",Nn[Nn["top-left"]=6]="top-left",Nn[Nn["top-right"]=7]="top-right",Nn[Nn["bottom-left"]=8]="bottom-left",Nn[Nn["bottom-right"]=9]="bottom-right";const Xc=7,J_=Number.POSITIVE_INFINITY;function EF(h,l){return l[1]!==J_?function(f,m,x){let E=0,T=0;switch(m=Math.abs(m),x=Math.abs(x),f){case"top-right":case"top-left":case"top":T=x-Xc;break;case"bottom-right":case"bottom-left":case"bottom":T=-x+Xc}switch(f){case"top-right":case"bottom-right":case"right":E=-m;break;case"top-left":case"bottom-left":case"left":E=m}return[E,T]}(h,l[0],l[1]):function(f,m){let x=0,E=0;m<0&&(m=0);const T=m/Math.SQRT2;switch(f){case"top-right":case"top-left":E=T-Xc;break;case"bottom-right":case"bottom-left":E=-T+Xc;break;case"bottom":E=-m+Xc;break;case"top":E=m-Xc}switch(f){case"top-right":case"bottom-right":x=-T;break;case"top-left":case"bottom-left":x=T;break;case"left":x=m;break;case"right":x=-m}return[x,E]}(h,l[0])}function RF(h,l,f){var m;const x=h.layout,E=(m=x.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(l,{},f);if(E){const A=E.values,O=[];for(let z=0;z<A.length;z+=2){const U=O[z]=A[z],Z=A[z+1].map(Q=>Q*hn);U.startsWith("top")?Z[1]-=Xc:U.startsWith("bottom")&&(Z[1]+=Xc),O[z+1]=Z}return new ti(O)}const T=x.get("text-variable-anchor");if(T){let A;A=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[x.get("text-radial-offset").evaluate(l,{},f)*hn,J_]:x.get("text-offset").evaluate(l,{},f).map(z=>z*hn);const O=[];for(const z of T)O.push(z,EF(z,A));return new ti(O)}return null}function eb(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function c7(h,l,f,m,x,E,T,A,O,z,U){let Z=E.textMaxSize.evaluate(l,{});Z===void 0&&(Z=T);const Q=h.layers[0].layout,ne=Q.get("icon-offset").evaluate(l,{},U),se=PF(f.horizontal),we=T/24,Pe=h.tilePixelRatio*we,De=h.tilePixelRatio*Z/24,$e=h.tilePixelRatio*A,Oe=h.tilePixelRatio*Q.get("symbol-spacing"),Ze=Q.get("text-padding")*h.tilePixelRatio,tt=function(_t,dr,ar,Er=1){const fi=_t.get("icon-padding").evaluate(dr,{},ar),vi=fi&&fi.values;return[vi[0]*Er,vi[1]*Er,vi[2]*Er,vi[3]*Er]}(Q,l,U,h.tilePixelRatio),yt=Q.get("text-max-angle")/180*Math.PI,Ht=Q.get("text-rotation-alignment")!=="viewport"&&Q.get("symbol-placement")!=="point",nr=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",zt=Q.get("symbol-placement"),Bt=Oe/2,It=Q.get("icon-text-fit");let Xt;m&&It!=="none"&&(h.allowVerticalPlacement&&f.vertical&&(Xt=XM(m,f.vertical,It,Q.get("icon-text-fit-padding"),ne,we)),se&&(m=XM(m,se,It,Q.get("icon-text-fit-padding"),ne,we)));const kt=(_t,dr)=>{dr.x<0||dr.x>=en||dr.y<0||dr.y>=en||function(ar,Er,fi,vi,dn,co,ws,tn,Tn,Bn,xs,Cs,fn,pn,Zn,_s,Xn,Hs,Us,gn,Fr,Yn,zn,mn,ra){const Pa=ar.addToLineVertexArray(Er,fi);let Ma,Yl,ia,Po,Ws=0,Ql=0,um=0,IF=0,lb=-1,cb=-1;const Jl={};let DF=ql("");if(ar.allowVerticalPlacement&&vi.vertical){const Qn=tn.layout.get("text-rotate").evaluate(Fr,{},mn)+90;ia=new Wy(Tn,Er,Bn,xs,Cs,vi.vertical,fn,pn,Zn,Qn),ws&&(Po=new Wy(Tn,Er,Bn,xs,Cs,ws,Xn,Hs,Zn,Qn))}if(dn){const Qn=tn.layout.get("icon-rotate").evaluate(Fr,{}),Mo=tn.layout.get("icon-text-fit")!=="none",vh=bF(dn,Qn,zn,Mo),Aa=ws?bF(ws,Qn,zn,Mo):void 0;Yl=new Wy(Tn,Er,Bn,xs,Cs,dn,Xn,Hs,!1,Qn),Ws=4*vh.length;const yh=ar.iconSizeData;let ul=null;yh.kind==="source"?(ul=[cl*tn.layout.get("icon-size").evaluate(Fr,{})],ul[0]>qc&&et(`${ar.layerIds[0]}: Value for "icon-size" is >= ${om}. Reduce your "icon-size".`)):yh.kind==="composite"&&(ul=[cl*Yn.compositeIconSizes[0].evaluate(Fr,{},mn),cl*Yn.compositeIconSizes[1].evaluate(Fr,{},mn)],(ul[0]>qc||ul[1]>qc)&&et(`${ar.layerIds[0]}: Value for "icon-size" is >= ${om}. Reduce your "icon-size".`)),ar.addSymbols(ar.icon,vh,ul,gn,Us,Fr,o.ai.none,Er,Pa.lineStartIndex,Pa.lineLength,-1,mn),lb=ar.icon.placedSymbolArray.length-1,Aa&&(Ql=4*Aa.length,ar.addSymbols(ar.icon,Aa,ul,gn,Us,Fr,o.ai.vertical,Er,Pa.lineStartIndex,Pa.lineLength,-1,mn),cb=ar.icon.placedSymbolArray.length-1)}const kF=Object.keys(vi.horizontal);for(const Qn of kF){const Mo=vi.horizontal[Qn];if(!Ma){DF=ql(Mo.text);const Aa=tn.layout.get("text-rotate").evaluate(Fr,{},mn);Ma=new Wy(Tn,Er,Bn,xs,Cs,Mo,fn,pn,Zn,Aa)}const vh=Mo.positionedLines.length===1;if(um+=TF(ar,Er,Mo,co,tn,Zn,Fr,_s,Pa,vi.vertical?o.ai.horizontal:o.ai.horizontalOnly,vh?kF:[Qn],Jl,lb,Yn,mn),vh)break}vi.vertical&&(IF+=TF(ar,Er,vi.vertical,co,tn,Zn,Fr,_s,Pa,o.ai.vertical,["vertical"],Jl,cb,Yn,mn));const d7=Ma?Ma.boxStartIndex:ar.collisionBoxArray.length,f7=Ma?Ma.boxEndIndex:ar.collisionBoxArray.length,p7=ia?ia.boxStartIndex:ar.collisionBoxArray.length,g7=ia?ia.boxEndIndex:ar.collisionBoxArray.length,m7=Yl?Yl.boxStartIndex:ar.collisionBoxArray.length,v7=Yl?Yl.boxEndIndex:ar.collisionBoxArray.length,y7=Po?Po.boxStartIndex:ar.collisionBoxArray.length,w7=Po?Po.boxEndIndex:ar.collisionBoxArray.length;let Fa=-1;const $y=(Qn,Mo)=>Qn&&Qn.circleDiameter?Math.max(Qn.circleDiameter,Mo):Mo;Fa=$y(Ma,Fa),Fa=$y(ia,Fa),Fa=$y(Yl,Fa),Fa=$y(Po,Fa);const LF=Fa>-1?1:0;LF&&(Fa*=ra/hn),ar.glyphOffsetArray.length>=uf.MAX_GLYPHS&&et("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Fr.sortKey!==void 0&&ar.addToSortKeyRanges(ar.symbolInstances.length,Fr.sortKey);const x7=RF(tn,Fr,mn),[C7,_7]=function(Qn,Mo){const vh=Qn.length,Aa=Mo==null?void 0:Mo.values;if((Aa==null?void 0:Aa.length)>0)for(let yh=0;yh<Aa.length;yh+=2){const ul=Aa[yh+1];Qn.emplaceBack(o.aq[Aa[yh]],ul[0],ul[1])}return[vh,Qn.length]}(ar.textAnchorOffsets,x7);ar.symbolInstances.emplaceBack(Er.x,Er.y,Jl.right>=0?Jl.right:-1,Jl.center>=0?Jl.center:-1,Jl.left>=0?Jl.left:-1,Jl.vertical||-1,lb,cb,DF,d7,f7,p7,g7,m7,v7,y7,w7,Bn,um,IF,Ws,Ql,LF,0,fn,Fa,C7,_7)}(h,dr,_t,f,m,x,Xt,h.layers[0],h.collisionBoxArray,l.index,l.sourceLayerIndex,h.index,Pe,[Ze,Ze,Ze,Ze],Ht,O,$e,tt,nr,ne,l,E,z,U,T)};if(zt==="line")for(const _t of vF(l.geometry,0,0,en,en)){const dr=n7(_t,Oe,yt,f.vertical||se,m,24,De,h.overscaling,en);for(const ar of dr)se&&u7(h,se.text,Bt,ar)||kt(_t,ar)}else if(zt==="line-center"){for(const _t of l.geometry)if(_t.length>1){const dr=i7(_t,yt,f.vertical||se,m,24,De);dr&&kt(_t,dr)}}else if(l.type==="Polygon")for(const _t of I_(l.geometry,0)){const dr=a7(_t,16);kt(_t[0],new Zc(dr.x,dr.y,0))}else if(l.type==="LineString")for(const _t of l.geometry)kt(_t,new Zc(_t[0].x,_t[0].y,0));else if(l.type==="Point")for(const _t of l.geometry)for(const dr of _t)kt([dr],new Zc(dr.x,dr.y,0))}function TF(h,l,f,m,x,E,T,A,O,z,U,Z,Q,ne,se){const we=function($e,Oe,Ze,tt,yt,Ht,nr,zt){const Bt=tt.layout.get("text-rotate").evaluate(Ht,{})*Math.PI/180,It=[];for(const Xt of Oe.positionedLines)for(const kt of Xt.positionedGlyphs){if(!kt.rect)continue;const _t=kt.rect||{};let dr=UM+1,ar=!0,Er=1,fi=0;const vi=(yt||zt)&&kt.vertical,dn=kt.metrics.advance*kt.scale/2;if(zt&&Oe.verticalizable&&(fi=Xt.lineOffset/2-(kt.imageName?-(hn-kt.metrics.width*kt.scale)/2:(kt.scale-1)*hn)),kt.imageName){const gn=nr[kt.imageName];ar=gn.sdf,Er=gn.pixelRatio,dr=Vs/Er}const co=yt?[kt.x+dn,kt.y]:[0,0];let ws=yt?[0,0]:[kt.x+dn+Ze[0],kt.y+Ze[1]-fi],tn=[0,0];vi&&(tn=ws,ws=[0,0]);const Tn=kt.metrics.isDoubleResolution?2:1,Bn=(kt.metrics.left-dr)*kt.scale-dn+ws[0],xs=(-kt.metrics.top-dr)*kt.scale+ws[1],Cs=Bn+_t.w/Tn*kt.scale/Er,fn=xs+_t.h/Tn*kt.scale/Er,pn=new y(Bn,xs),Zn=new y(Cs,xs),_s=new y(Bn,fn),Xn=new y(Cs,fn);if(vi){const gn=new y(-dn,dn-nm),Fr=-Math.PI/2,Yn=hn/2-dn,zn=new y(5-nm-Yn,-(kt.imageName?Yn:0)),mn=new y(...tn);pn._rotateAround(Fr,gn)._add(zn)._add(mn),Zn._rotateAround(Fr,gn)._add(zn)._add(mn),_s._rotateAround(Fr,gn)._add(zn)._add(mn),Xn._rotateAround(Fr,gn)._add(zn)._add(mn)}if(Bt){const gn=Math.sin(Bt),Fr=Math.cos(Bt),Yn=[Fr,-gn,gn,Fr];pn._matMult(Yn),Zn._matMult(Yn),_s._matMult(Yn),Xn._matMult(Yn)}const Hs=new y(0,0),Us=new y(0,0);It.push({tl:pn,tr:Zn,bl:_s,br:Xn,tex:_t,writingMode:Oe.writingMode,glyphOffset:co,sectionIndex:kt.sectionIndex,isSDF:ar,pixelOffsetTL:Hs,pixelOffsetBR:Us,minFontScaleX:0,minFontScaleY:0})}return It}(0,f,A,x,E,T,m,h.allowVerticalPlacement),Pe=h.textSizeData;let De=null;Pe.kind==="source"?(De=[cl*x.layout.get("text-size").evaluate(T,{})],De[0]>qc&&et(`${h.layerIds[0]}: Value for "text-size" is >= ${om}. Reduce your "text-size".`)):Pe.kind==="composite"&&(De=[cl*ne.compositeTextSizes[0].evaluate(T,{},se),cl*ne.compositeTextSizes[1].evaluate(T,{},se)],(De[0]>qc||De[1]>qc)&&et(`${h.layerIds[0]}: Value for "text-size" is >= ${om}. Reduce your "text-size".`)),h.addSymbols(h.text,we,De,A,E,T,z,l,O.lineStartIndex,O.lineLength,Q,se);for(const $e of U)Z[$e]=h.text.placedSymbolArray.length-1;return 4*we.length}function PF(h){for(const l in h)return h[l];return null}function u7(h,l,f,m){const x=h.compareText;if(l in x){const E=x[l];for(let T=E.length-1;T>=0;T--)if(m.dist(E[T])<f)return!0}else x[l]=[];return x[l].push(m),!1}const MF=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class tb{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[f,m]=new Uint8Array(l,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");const x=m>>4;if(x!==1)throw new Error(`Got v${x} data when expected v1.`);const E=MF[15&m];if(!E)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(l,2,1),[A]=new Uint32Array(l,4,1);return new tb(A,T,E,l)}constructor(l,f=64,m=Float64Array,x){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=m,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const E=MF.indexOf(this.ArrayType),T=2*l*this.ArrayType.BYTES_PER_ELEMENT,A=l*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-A%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${m}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+A+O,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+T+A+O),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+A+O,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=l)}add(l,f){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=l,this.coords[this._pos++]=f,m}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return rb(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,f,m,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:T,nodeSize:A}=this,O=[0,E.length-1,0],z=[];for(;O.length;){const U=O.pop()||0,Z=O.pop()||0,Q=O.pop()||0;if(Z-Q<=A){for(let Pe=Q;Pe<=Z;Pe++){const De=T[2*Pe],$e=T[2*Pe+1];De>=l&&De<=m&&$e>=f&&$e<=x&&z.push(E[Pe])}continue}const ne=Q+Z>>1,se=T[2*ne],we=T[2*ne+1];se>=l&&se<=m&&we>=f&&we<=x&&z.push(E[ne]),(U===0?l<=se:f<=we)&&(O.push(Q),O.push(ne-1),O.push(1-U)),(U===0?m>=se:x>=we)&&(O.push(ne+1),O.push(Z),O.push(1-U))}return z}within(l,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:E,nodeSize:T}=this,A=[0,x.length-1,0],O=[],z=m*m;for(;A.length;){const U=A.pop()||0,Z=A.pop()||0,Q=A.pop()||0;if(Z-Q<=T){for(let Pe=Q;Pe<=Z;Pe++)AF(E[2*Pe],E[2*Pe+1],l,f)<=z&&O.push(x[Pe]);continue}const ne=Q+Z>>1,se=E[2*ne],we=E[2*ne+1];AF(se,we,l,f)<=z&&O.push(x[ne]),(U===0?l-m<=se:f-m<=we)&&(A.push(Q),A.push(ne-1),A.push(1-U)),(U===0?l+m>=se:f+m>=we)&&(A.push(ne+1),A.push(Z),A.push(1-U))}return O}}function rb(h,l,f,m,x,E){if(x-m<=f)return;const T=m+x>>1;FF(h,l,T,m,x,E),rb(h,l,f,m,T-1,1-E),rb(h,l,f,T+1,x,1-E)}function FF(h,l,f,m,x,E){for(;x>m;){if(x-m>600){const z=x-m+1,U=f-m+1,Z=Math.log(z),Q=.5*Math.exp(2*Z/3),ne=.5*Math.sqrt(Z*Q*(z-Q)/z)*(U-z/2<0?-1:1);FF(h,l,f,Math.max(m,Math.floor(f-U*Q/z+ne)),Math.min(x,Math.floor(f+(z-U)*Q/z+ne)),E)}const T=l[2*f+E];let A=m,O=x;for(lm(h,l,m,f),l[2*x+E]>T&&lm(h,l,m,x);A<O;){for(lm(h,l,A,O),A++,O--;l[2*A+E]<T;)A++;for(;l[2*O+E]>T;)O--}l[2*m+E]===T?lm(h,l,m,O):(O++,lm(h,l,O,x)),O<=f&&(m=O+1),f<=O&&(x=O-1)}}function lm(h,l,f,m){ib(h,f,m),ib(l,2*f,2*m),ib(l,2*f+1,2*m+1)}function ib(h,l,f){const m=h[l];h[l]=h[f],h[f]=m}function AF(h,l,f,m){const x=h-f,E=l-m;return x*x+E*E}var nb;o.bh=void 0,(nb=o.bh||(o.bh={})).create="create",nb.load="load",nb.fullLoad="fullLoad";let jy=null,cm=[];const sb=1e3/60,ob="loadTime",ab="fullLoadTime",h7={mark(h){performance.mark(h)},frame(h){const l=h;jy!=null&&cm.push(l-jy),jy=l},clearMetrics(){jy=null,cm=[],performance.clearMeasures(ob),performance.clearMeasures(ab);for(const h in o.bh)performance.clearMarks(o.bh[h])},getPerformanceMetrics(){performance.measure(ob,o.bh.create,o.bh.load),performance.measure(ab,o.bh.create,o.bh.fullLoad);const h=performance.getEntriesByName(ob)[0].duration,l=performance.getEntriesByName(ab)[0].duration,f=cm.length,m=1/(cm.reduce((E,T)=>E+T,0)/f/1e3),x=cm.filter(E=>E>sb).reduce((E,T)=>E+(T-sb)/sb,0);return{loadTime:h,fullLoadTime:l,fps:m,percentDroppedFrames:x/(f+x)*100,totalFrames:f}}};o.$=function(h,l,f){var m,x,E,T,A,O,z,U,Z,Q,ne,se,we=f[0],Pe=f[1],De=f[2];return l===h?(h[12]=l[0]*we+l[4]*Pe+l[8]*De+l[12],h[13]=l[1]*we+l[5]*Pe+l[9]*De+l[13],h[14]=l[2]*we+l[6]*Pe+l[10]*De+l[14],h[15]=l[3]*we+l[7]*Pe+l[11]*De+l[15]):(x=l[1],E=l[2],T=l[3],A=l[4],O=l[5],z=l[6],U=l[7],Z=l[8],Q=l[9],ne=l[10],se=l[11],h[0]=m=l[0],h[1]=x,h[2]=E,h[3]=T,h[4]=A,h[5]=O,h[6]=z,h[7]=U,h[8]=Z,h[9]=Q,h[10]=ne,h[11]=se,h[12]=m*we+A*Pe+Z*De+l[12],h[13]=x*we+O*Pe+Q*De+l[13],h[14]=E*we+z*Pe+ne*De+l[14],h[15]=T*we+U*Pe+se*De+l[15]),h},o.A=nf,o.B=Os,o.C=class{constructor(h,l,f){this.receive=m=>{const x=m.data,E=x.id;if(E&&(!x.targetMapId||this.mapId===x.targetMapId))if(x.type==="<cancel>"){delete this.tasks[E];const T=this.cancelCallbacks[E];delete this.cancelCallbacks[E],T&&T()}else pt()||x.mustQueue?(this.tasks[E]=x,this.taskQueue.push(E),this.invoker.trigger()):this.processTask(E,x)},this.process=()=>{if(!this.taskQueue.length)return;const m=this.taskQueue.shift(),x=this.tasks[m];delete this.tasks[m],this.taskQueue.length&&this.invoker.trigger(),x&&this.processTask(m,x)},this.target=h,this.parent=l,this.mapId=f,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new t7(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=pt()?h:window}send(h,l,f,m,x=!1){const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(this.callbacks[E]=f);const T=[],A={id:E,type:h,hasCallback:!!f,targetMapId:m,mustQueue:x,sourceMapId:this.mapId,data:ol(l,T)};return this.target.postMessage(A,{transfer:T}),{cancel:()=>{f&&delete this.callbacks[E],this.target.postMessage({id:E,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}processTask(h,l){if(l.type==="<response>"){const f=this.callbacks[h];delete this.callbacks[h],f&&(l.error?f(Vc(l.error)):f(null,Vc(l.data)))}else{let f=!1;const m=[],x=l.hasCallback?(A,O)=>{f=!0,delete this.cancelCallbacks[h];const z={id:h,type:"<response>",sourceMapId:this.mapId,error:A?ol(A):null,data:ol(O,m)};this.target.postMessage(z,{transfer:m})}:A=>{f=!0};let E=null;const T=Vc(l.data);if(this.parent[l.type])E=this.parent[l.type](l.sourceMapId,T,x);else if("getWorkerSource"in this.parent){const A=l.type.split(".");E=this.parent.getWorkerSource(l.sourceMapId,A[0],T.source)[A[1]](T,x)}else x(new Error(`Could not find function ${l.type}`));!f&&E&&E.cancel&&(this.cancelCallbacks[h]=E.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.D=cr,o.E=rr,o.F=function(h,l){const f={};for(let m=0;m<l.length;m++){const x=l[m];x in h&&(f[x]=h[x])}return f},o.G=sF,o.H=oF,o.I=H_,o.J=k,o.K=N,o.L=Kc,o.M=Be,o.N=en,o.O=To,o.P=y,o.Q=bi,o.R=Ro,o.S=di,o.T=xy,o.U=Gy,o.V=class extends jl{},o.W=Q_,o.X=function(h,l){const f=window.document.createElement("video");f.muted=!0,f.onloadstart=function(){l(null,f)};for(let m=0;m<h.length;m++){const x=window.document.createElement("source");Yt(h[m])||(f.crossOrigin="Anonymous"),x.src=h[m],f.appendChild(x)}return{cancel:()=>{}}},o.Y=Tt,o.Z=function(){var h=new nf(16);return nf!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},o._=u,o.a=Ye,o.a$=class extends re{},o.a0=function(h,l,f){var m=f[0],x=f[1],E=f[2];return h[0]=l[0]*m,h[1]=l[1]*m,h[2]=l[2]*m,h[3]=l[3]*m,h[4]=l[4]*x,h[5]=l[5]*x,h[6]=l[6]*x,h[7]=l[7]*x,h[8]=l[8]*E,h[9]=l[9]*E,h[10]=l[10]*E,h[11]=l[11]*E,h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15],h},o.a1=uM,o.a2=function(){return ue++},o.a3=Ee,o.a4=uf,o.a5=function(){zs.isLoading()||zs.isLoaded()||Ng()!=="deferred"||wy()},o.a6=Rg,o.a7=gh,o.a8=hi,o.a9=fF,o.aA=ch,o.aB=function(h){h=h.slice();const l=Object.create(null);for(let f=0;f<h.length;f++)l[h[f].id]=h[f];for(let f=0;f<h.length;f++)"ref"in h[f]&&(h[f]=Nr(h[f],l[h[f].ref]));return h},o.aC=function(h){if(h.type==="custom")return new e7(h);switch(h.type){case"background":return new YH(h);case"circle":return new OV(h);case"fill":return new rH(h);case"fill-extrusion":return new vH(h);case"heatmap":return new BV(h);case"hillshade":return new GV(h);case"line":return new EH(h);case"raster":return new JH(h);case"symbol":return new zy(h)}},o.aD=fe,o.aE=function(h,l){if(!h)return[{command:$t.setStyle,args:[l]}];let f=[];try{if(!vr(h.version,l.version))return[{command:$t.setStyle,args:[l]}];vr(h.center,l.center)||f.push({command:$t.setCenter,args:[l.center]}),vr(h.zoom,l.zoom)||f.push({command:$t.setZoom,args:[l.zoom]}),vr(h.bearing,l.bearing)||f.push({command:$t.setBearing,args:[l.bearing]}),vr(h.pitch,l.pitch)||f.push({command:$t.setPitch,args:[l.pitch]}),vr(h.sprite,l.sprite)||f.push({command:$t.setSprite,args:[l.sprite]}),vr(h.glyphs,l.glyphs)||f.push({command:$t.setGlyphs,args:[l.glyphs]}),vr(h.transition,l.transition)||f.push({command:$t.setTransition,args:[l.transition]}),vr(h.light,l.light)||f.push({command:$t.setLight,args:[l.light]});const m={},x=[];(function(T,A,O,z){let U;for(U in A=A||{},T=T||{})Object.prototype.hasOwnProperty.call(T,U)&&(Object.prototype.hasOwnProperty.call(A,U)||ds(U,O,z));for(U in A)Object.prototype.hasOwnProperty.call(A,U)&&(Object.prototype.hasOwnProperty.call(T,U)?vr(T[U],A[U])||(T[U].type==="geojson"&&A[U].type==="geojson"&&Ir(T,A,U)?O.push({command:$t.setGeoJSONSourceData,args:[U,A[U].data]}):an(U,A,O,z)):ui(U,A,O))})(h.sources,l.sources,x,m);const E=[];h.layers&&h.layers.forEach(T=>{m[T.source]?f.push({command:$t.removeLayer,args:[T.id]}):E.push(T)}),f=f.concat(x),function(T,A,O){A=A||[];const z=(T=T||[]).map(kn),U=A.map(kn),Z=T.reduce(fs,{}),Q=A.reduce(fs,{}),ne=z.slice(),se=Object.create(null);let we,Pe,De,$e,Oe,Ze,tt;for(we=0,Pe=0;we<z.length;we++)De=z[we],Object.prototype.hasOwnProperty.call(Q,De)?Pe++:(O.push({command:$t.removeLayer,args:[De]}),ne.splice(ne.indexOf(De,Pe),1));for(we=0,Pe=0;we<U.length;we++)De=U[U.length-1-we],ne[ne.length-1-we]!==De&&(Object.prototype.hasOwnProperty.call(Z,De)?(O.push({command:$t.removeLayer,args:[De]}),ne.splice(ne.lastIndexOf(De,ne.length-Pe),1)):Pe++,Ze=ne[ne.length-we],O.push({command:$t.addLayer,args:[Q[De],Ze]}),ne.splice(ne.length-we,0,De),se[De]=!0);for(we=0;we<U.length;we++)if(De=U[we],$e=Z[De],Oe=Q[De],!se[De]&&!vr($e,Oe))if(vr($e.source,Oe.source)&&vr($e["source-layer"],Oe["source-layer"])&&vr($e.type,Oe.type)){for(tt in Kr($e.layout,Oe.layout,O,De,null,$t.setLayoutProperty),Kr($e.paint,Oe.paint,O,De,null,$t.setPaintProperty),vr($e.filter,Oe.filter)||O.push({command:$t.setFilter,args:[De,Oe.filter]}),vr($e.minzoom,Oe.minzoom)&&vr($e.maxzoom,Oe.maxzoom)||O.push({command:$t.setLayerZoomRange,args:[De,Oe.minzoom,Oe.maxzoom]}),$e)Object.prototype.hasOwnProperty.call($e,tt)&&tt!=="layout"&&tt!=="paint"&&tt!=="filter"&&tt!=="metadata"&&tt!=="minzoom"&&tt!=="maxzoom"&&(tt.indexOf("paint.")===0?Kr($e[tt],Oe[tt],O,De,tt.slice(6),$t.setPaintProperty):vr($e[tt],Oe[tt])||O.push({command:$t.setLayerProperty,args:[De,tt,Oe[tt]]}));for(tt in Oe)Object.prototype.hasOwnProperty.call(Oe,tt)&&!Object.prototype.hasOwnProperty.call($e,tt)&&tt!=="layout"&&tt!=="paint"&&tt!=="filter"&&tt!=="metadata"&&tt!=="minzoom"&&tt!=="maxzoom"&&(tt.indexOf("paint.")===0?Kr($e[tt],Oe[tt],O,De,tt.slice(6),$t.setPaintProperty):vr($e[tt],Oe[tt])||O.push({command:$t.setLayerProperty,args:[De,tt,Oe[tt]]}))}else O.push({command:$t.removeLayer,args:[De]}),Ze=ne[ne.lastIndexOf(De)+1],O.push({command:$t.addLayer,args:[Oe,Ze]})}(E,l.layers,f)}catch(m){console.warn("Unable to compute style diff:",m),f=[{command:$t.setStyle,args:[l]}]}return f},o.aF=function(h){const l=[],f=h.id;return f===void 0&&l.push({message:`layers.${f}: missing required property "id"`}),h.render===void 0&&l.push({message:`layers.${f}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&l.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),l},o.aG=function h(l,f){if(Array.isArray(l)){if(!Array.isArray(f)||l.length!==f.length)return!1;for(let m=0;m<l.length;m++)if(!h(l[m],f[m]))return!1;return!0}if(typeof l=="object"&&l!==null&&f!==null){if(typeof f!="object"||Object.keys(l).length!==Object.keys(f).length)return!1;for(const m in l)if(!h(l[m],f[m]))return!1;return!0}return l===f},o.aH=me,o.aI=ie,o.aJ=uh,o.aK=function(h){return h({pluginStatus:ms,pluginURL:al}),uh.on("pluginStateChange",h),h},o.aL=class extends Kl{constructor(h,l){super(h,l),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},o.aM=tf,o.aN=class extends Kl{constructor(h,l){super(h,l),this.current=x_}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let l=1;l<16;l++)if(h[l]!==this.current[l]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},o.aO=Sy,o.aP=class extends Kl{constructor(h,l){super(h,l),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},o.aQ=class extends Kl{constructor(h,l){super(h,l),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},o.aR=Ey,o.aS=function(h,l,f,m,x,E,T){var A=1/(l-f),O=1/(m-x),z=1/(E-T);return h[0]=-2*A,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*O,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*z,h[11]=0,h[12]=(l+f)*A,h[13]=(x+m)*O,h[14]=(T+E)*z,h[15]=1,h},o.aT=mr,o.aU=LV,o.aV=class extends w{},o.aW=MH,o.aX=class extends S{},o.aY=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},o.aZ=gM,o.a_=Pt,o.aa=function(h){const l={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,m,x,E)=>{const T=x||E;return l[m]=!T||T.toLowerCase(),""}),l["max-age"]){const f=parseInt(l["max-age"],10);isNaN(f)?delete l["max-age"]:l["max-age"]=f}return l},o.ab=function(h,l){const f=[];for(const m in h)m in l||f.push(m);return f},o.ac=function(h){if(Ge==null){const l=h.navigator?h.navigator.userAgent:null;Ge=!!h.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Ge},o.ad=ee,o.ae=function(h,l,f){var m=Math.sin(f),x=Math.cos(f),E=l[0],T=l[1],A=l[2],O=l[3],z=l[4],U=l[5],Z=l[6],Q=l[7];return l!==h&&(h[8]=l[8],h[9]=l[9],h[10]=l[10],h[11]=l[11],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[0]=E*x+z*m,h[1]=T*x+U*m,h[2]=A*x+Z*m,h[3]=O*x+Q*m,h[4]=z*x-E*m,h[5]=U*x-T*m,h[6]=Z*x-A*m,h[7]=Q*x-O*m,h},o.af=function(h){var l=new nf(16);return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],l[9]=h[9],l[10]=h[10],l[11]=h[11],l[12]=h[12],l[13]=h[13],l[14]=h[14],l[15]=h[15],l},o.ag=My,o.ah=function(h,l){let f=0,m=0;if(h.kind==="constant")m=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:x,minZoom:E,maxZoom:T}=h,A=x?ee(Ns.interpolationFactor(x,l,E,T),0,1):0;h.kind==="camera"?m=Os.number(h.minSize,h.maxSize,A):f=A}return{uSizeT:f,uSize:m}},o.aj=function(h,{uSize:l,uSizeT:f},{lowerSize:m,upperSize:x}){return h.kind==="source"?m/cl:h.kind==="composite"?Os.number(m/cl,x/cl,f):l},o.ak=$_,o.al=function(h,l,f,m){const x=l.y-h.y,E=l.x-h.x,T=m.y-f.y,A=m.x-f.x,O=T*E-A*x;if(O===0)return null;const z=(A*(h.y-f.y)-T*(h.x-f.x))/O;return new y(h.x+z*E,h.y+z*x)},o.am=vF,o.an=nM,o.ao=E_,o.ap=hn,o.ar=j_,o.as=function(h,l){var f=l[0],m=l[1],x=l[2],E=l[3],T=l[4],A=l[5],O=l[6],z=l[7],U=l[8],Z=l[9],Q=l[10],ne=l[11],se=l[12],we=l[13],Pe=l[14],De=l[15],$e=f*A-m*T,Oe=f*O-x*T,Ze=f*z-E*T,tt=m*O-x*A,yt=m*z-E*A,Ht=x*z-E*O,nr=U*we-Z*se,zt=U*Pe-Q*se,Bt=U*De-ne*se,It=Z*Pe-Q*we,Xt=Z*De-ne*we,kt=Q*De-ne*Pe,_t=$e*kt-Oe*Xt+Ze*It+tt*Bt-yt*zt+Ht*nr;return _t?(h[0]=(A*kt-O*Xt+z*It)*(_t=1/_t),h[1]=(x*Xt-m*kt-E*It)*_t,h[2]=(we*Ht-Pe*yt+De*tt)*_t,h[3]=(Q*yt-Z*Ht-ne*tt)*_t,h[4]=(O*Bt-T*kt-z*zt)*_t,h[5]=(f*kt-x*Bt+E*zt)*_t,h[6]=(Pe*Ze-se*Ht-De*Oe)*_t,h[7]=(U*Ht-Q*Ze+ne*Oe)*_t,h[8]=(T*Xt-A*Bt+z*nr)*_t,h[9]=(m*Bt-f*Xt-E*nr)*_t,h[10]=(se*yt-we*Ze+De*$e)*_t,h[11]=(Z*Ze-U*yt-ne*$e)*_t,h[12]=(A*zt-T*It-O*nr)*_t,h[13]=(f*It-m*zt+x*nr)*_t,h[14]=(we*Oe-se*tt-Pe*$e)*_t,h[15]=(U*tt-Z*Oe+Q*$e)*_t,h):null},o.at=eb,o.au=W_,o.av=tb,o.aw=function(){const h={},l=Ke.$version;for(const f in Ke.$root){const m=Ke.$root[f];if(m.required){let x=null;x=f==="version"?l:m.type==="array"?[]:{},x!=null&&(h[f]=x)}}return h},o.ax=$t,o.ay=gy,o.az=ot,o.b=function(h,l){const f=new Blob([new Uint8Array(h)],{type:"image/png"});createImageBitmap(f).then(m=>{l(null,m)}).catch(m=>{l(new Error(`Could not load image because of ${m.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},o.b0=En,o.b1=function(h,l){var f=h[0],m=h[1],x=h[2],E=h[3],T=h[4],A=h[5],O=h[6],z=h[7],U=h[8],Z=h[9],Q=h[10],ne=h[11],se=h[12],we=h[13],Pe=h[14],De=h[15],$e=l[0],Oe=l[1],Ze=l[2],tt=l[3],yt=l[4],Ht=l[5],nr=l[6],zt=l[7],Bt=l[8],It=l[9],Xt=l[10],kt=l[11],_t=l[12],dr=l[13],ar=l[14],Er=l[15];return Math.abs(f-$e)<=ys*Math.max(1,Math.abs(f),Math.abs($e))&&Math.abs(m-Oe)<=ys*Math.max(1,Math.abs(m),Math.abs(Oe))&&Math.abs(x-Ze)<=ys*Math.max(1,Math.abs(x),Math.abs(Ze))&&Math.abs(E-tt)<=ys*Math.max(1,Math.abs(E),Math.abs(tt))&&Math.abs(T-yt)<=ys*Math.max(1,Math.abs(T),Math.abs(yt))&&Math.abs(A-Ht)<=ys*Math.max(1,Math.abs(A),Math.abs(Ht))&&Math.abs(O-nr)<=ys*Math.max(1,Math.abs(O),Math.abs(nr))&&Math.abs(z-zt)<=ys*Math.max(1,Math.abs(z),Math.abs(zt))&&Math.abs(U-Bt)<=ys*Math.max(1,Math.abs(U),Math.abs(Bt))&&Math.abs(Z-It)<=ys*Math.max(1,Math.abs(Z),Math.abs(It))&&Math.abs(Q-Xt)<=ys*Math.max(1,Math.abs(Q),Math.abs(Xt))&&Math.abs(ne-kt)<=ys*Math.max(1,Math.abs(ne),Math.abs(kt))&&Math.abs(se-_t)<=ys*Math.max(1,Math.abs(se),Math.abs(_t))&&Math.abs(we-dr)<=ys*Math.max(1,Math.abs(we),Math.abs(dr))&&Math.abs(Pe-ar)<=ys*Math.max(1,Math.abs(Pe),Math.abs(ar))&&Math.abs(De-Er)<=ys*Math.max(1,Math.abs(De),Math.abs(Er))},o.b2=function(h,l){return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[8]=l[8],h[9]=l[9],h[10]=l[10],h[11]=l[11],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15],h},o.b3=function(h,l,f){return h[0]=l[0]*f[0],h[1]=l[1]*f[1],h[2]=l[2]*f[2],h[3]=l[3]*f[3],h},o.b4=function(h,l){return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]+h[3]*l[3]},o.b5=q,o.b6=uF,o.b7=aF,o.b8=function(h,l,f,m,x){var E,T=1/Math.tan(l/2);return h[0]=T/f,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=T,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,x!=null&&x!==1/0?(h[10]=(x+m)*(E=1/(m-x)),h[14]=2*x*m*E):(h[10]=-1,h[14]=-2*m),h},o.b9=function(h,l,f){var m=Math.sin(f),x=Math.cos(f),E=l[4],T=l[5],A=l[6],O=l[7],z=l[8],U=l[9],Z=l[10],Q=l[11];return l!==h&&(h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[4]=E*x+z*m,h[5]=T*x+U*m,h[6]=A*x+Z*m,h[7]=O*x+Q*m,h[8]=z*x-E*m,h[9]=U*x-T*m,h[10]=Z*x-A*m,h[11]=Q*x-O*m,h},o.bA=p,o.bB=OM,o.bC=Wd,o.bD=zs,o.ba=G,o.bb=j,o.bc=function(h,l){return h[0]=l[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=l[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=l[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},o.bd=class extends fh{},o.be=X_,o.bf=lF,o.bg=h7,o.bi=at,o.bj=function(h,l,f=!1){if(ms===Ig||ms===Dg||ms===kg)throw new Error("setRTLTextPlugin cannot be called multiple times.");al=Fe.resolveURL(h),ms=Ig,Lg=l,Og(),f||wy()},o.bk=Ng,o.bl=function(h,l){const f={};for(let x=0;x<h.length;x++){const E=l&&l[h[x].id]||Kd(h[x]);l&&(l[h[x].id]=E);let T=f[E];T||(T=f[E]=[]),T.push(h[x])}const m=[];for(const x in f)m.push(f[x]);return m},o.bm=Kt,o.bn=dF,o.bo=pF,o.bp=jM,o.bq=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=en/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const l=h.bucket.layers[0],f=l.layout,m=l._unevaluatedLayout._values,x={layoutIconSize:m["icon-size"].possiblyEvaluate(new hi(h.bucket.zoom+1),h.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new hi(h.bucket.zoom+1),h.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new hi(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:U}=h.bucket.textSizeData;x.compositeTextSizes=[m["text-size"].possiblyEvaluate(new hi(z),h.canonical),m["text-size"].possiblyEvaluate(new hi(U),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:U}=h.bucket.iconSizeData;x.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new hi(z),h.canonical),m["icon-size"].possiblyEvaluate(new hi(U),h.canonical)]}const E=f.get("text-line-height")*hn,T=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",A=f.get("text-keep-upright"),O=f.get("text-size");for(const z of h.bucket.features){const U=f.get("text-font").evaluate(z,{},h.canonical).join(","),Z=O.evaluate(z,{},h.canonical),Q=x.layoutTextSize.evaluate(z,{},h.canonical),ne=x.layoutIconSize.evaluate(z,{},h.canonical),se={horizontal:{},vertical:void 0},we=z.text;let Pe,De=[0,0];if(we){const Ze=we.toString(),tt=f.get("text-letter-spacing").evaluate(z,{},h.canonical)*hn,yt=Fg(Ze)?tt:0,Ht=f.get("text-anchor").evaluate(z,{},h.canonical),nr=RF(l,z,h.canonical);if(!nr){const kt=f.get("text-radial-offset").evaluate(z,{},h.canonical);De=kt?EF(Ht,[kt*hn,J_]):f.get("text-offset").evaluate(z,{},h.canonical).map(_t=>_t*hn)}let zt=T?"center":f.get("text-justify").evaluate(z,{},h.canonical);const Bt=f.get("symbol-placement"),It=Bt==="point"?f.get("text-max-width").evaluate(z,{},h.canonical)*hn:0,Xt=()=>{h.bucket.allowVerticalPlacement&&Mg(Ze)&&(se.vertical=Oy(we,h.glyphMap,h.glyphPositions,h.imagePositions,U,It,E,Ht,"left",yt,De,o.ai.vertical,!0,Bt,Q,Z))};if(!T&&nr){const kt=new Set;if(zt==="auto")for(let dr=0;dr<nr.values.length;dr+=2)kt.add(eb(nr.values[dr]));else kt.add(zt);let _t=!1;for(const dr of kt)if(!se.horizontal[dr])if(_t)se.horizontal[dr]=se.horizontal[0];else{const ar=Oy(we,h.glyphMap,h.glyphPositions,h.imagePositions,U,It,E,"center",dr,yt,De,o.ai.horizontal,!1,Bt,Q,Z);ar&&(se.horizontal[dr]=ar,_t=ar.positionedLines.length===1)}Xt()}else{zt==="auto"&&(zt=eb(Ht));const kt=Oy(we,h.glyphMap,h.glyphPositions,h.imagePositions,U,It,E,Ht,zt,yt,De,o.ai.horizontal,!1,Bt,Q,Z);kt&&(se.horizontal[zt]=kt),Xt(),Mg(Ze)&&T&&A&&(se.vertical=Oy(we,h.glyphMap,h.glyphPositions,h.imagePositions,U,It,E,Ht,zt,yt,De,o.ai.vertical,!1,Bt,Q,Z))}}let $e=!1;if(z.icon&&z.icon.name){const Ze=h.imageMap[z.icon.name];Ze&&(Pe=$H(h.imagePositions[z.icon.name],f.get("icon-offset").evaluate(z,{},h.canonical),f.get("icon-anchor").evaluate(z,{},h.canonical)),$e=!!Ze.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=$e:h.bucket.sdfIcons!==$e&&et("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ze.pixelRatio!==h.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Oe=PF(se.horizontal)||se.vertical;h.bucket.iconsInText=!!Oe&&Oe.iconsInText,(Oe||Pe)&&c7(h.bucket,z,se,Pe,h.imageMap,x,Q,ne,De,$e,h.canonical)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},o.br=B_,o.bs=L_,o.bt=N_,o.bu=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},o.bv=G_,o.bw=jc,o.bx=function(h,l,f,m,x){return u(this,void 0,void 0,function*(){if(N())try{return yield Be(h,l,f,m,x)}catch{}return function(E,T,A,O,z){const U=E.width,Z=E.height;ce&&he||(ce=new OffscreenCanvas(U,Z),he=ce.getContext("2d",{willReadFrequently:!0})),ce.width=U,ce.height=Z,he.drawImage(E,0,0,U,Z);const Q=he.getImageData(T,A,O,z);return he.clearRect(0,0,U,Z),Q.data}(h,l,f,m,x)})},o.by=hF,o.bz=d,o.c=qe,o.d=function(h,l){const f=new Image;f.onload=()=>{l(null,f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=ht})},f.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(h)],{type:"image/png"});f.src=h.byteLength?URL.createObjectURL(m):ht},o.e=oe,o.f=function(h,l){return Ot(oe(h,{type:"json"}),l)},o.g=Qe,o.h=Fe,o.i=pt,o.j=hr,o.k=Et,o.l=er,o.m=Ot,o.n=function(h){return new G_(h).readFields(GH,[])},o.o=function(h,l,f){if(!h.length)return f(null,[]);let m=h.length;const x=new Array(h.length);let E=null;h.forEach((T,A)=>{l(T,(O,z)=>{O&&(E=O),x[A]=z,--m==0&&f(E,x)})})},o.p=WM,o.q=Xg,o.r=Hi,o.s=Yt,o.t=m_,o.u=Vt,o.v=Ke,o.w=et,o.x=Yd,o.y=Ea,o.z=function([h,l,f]){return l+=90,l*=Math.PI/180,f*=Math.PI/180,{x:h*Math.cos(l)*Math.sin(f),y:h*Math.sin(l)*Math.sin(f),z:h*Math.cos(f)}}}),s(["./shared"],function(o){class u{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,te){for(const Se of Y){this._layerConfigs[Se.id]=Se;const Te=this._layers[Se.id]=o.aC(Se);Te._featureFilter=o.a6(Te.filter),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(const Se of te)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const ge=o.bl(Object.values(this._layerConfigs),this.keyCache);for(const Se of ge){const Te=Se.map(dt=>this._layers[dt.id]),We=Te[0];if(We.visibility==="none")continue;const Ne=We.source||"";let Ae=this.familiesBySource[Ne];Ae||(Ae=this.familiesBySource[Ne]={});const Ve=We.sourceLayer||"_geojsonTileLayer";let ut=Ae[Ve];ut||(ut=Ae[Ve]=[]),ut.push(Te)}}}class d{constructor(Y){const te={},ge=[];for(const Ne in Y){const Ae=Y[Ne],Ve=te[Ne]={};for(const ut in Ae){const dt=Ae[+ut];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const X={x:0,y:0,w:dt.bitmap.width+2,h:dt.bitmap.height+2};ge.push(X),Ve[ut]={rect:X,metrics:dt.metrics}}}const{w:Se,h:Te}=o.p(ge),We=new o.q({width:Se||1,height:Te||1});for(const Ne in Y){const Ae=Y[Ne];for(const Ve in Ae){const ut=Ae[+Ve];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const dt=te[Ne][Ve].rect;o.q.copy(ut.bitmap,We,{x:0,y:0},{x:dt.x+1,y:dt.y+1},ut.bitmap)}}this.image=We,this.positions=te}}o.bm("GlyphAtlas",d);class p{constructor(Y){this.tileID=new o.O(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(Y,te,ge,Se,Te){this.status="parsing",this.data=Y,this.collisionBoxArray=new o.a3;const We=new o.bn(Object.keys(Y.layers).sort()),Ne=new o.bo(this.tileID,this.promoteId);Ne.bucketLayerIDs=[];const Ae={},Ve={featureIndex:Ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge},ut=te.familiesBySource[this.source];for(const Ie in ut){const Le=Y.layers[Ie];if(!Le)continue;Le.version===1&&o.w(`Vector tile source "${this.source}" layer "${Ie}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const He=We.encode(Ie),rt=[];for(let lt=0;lt<Le.length;lt++){const wt=Le.feature(lt),gt=Ne.getId(wt,Ie);rt.push({feature:wt,id:gt,index:lt,sourceLayerIndex:He})}for(const lt of ut[Ie]){const wt=lt[0];wt.source!==this.source&&o.w(`layer.source = ${wt.source} does not equal this.source = ${this.source}`),wt.minzoom&&this.zoom<Math.floor(wt.minzoom)||wt.maxzoom&&this.zoom>=wt.maxzoom||wt.visibility!=="none"&&(v(lt,this.zoom,ge),(Ae[wt.id]=wt.createBucket({index:Ne.bucketLayerIDs.length,layers:lt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:He,sourceID:this.source})).populate(rt,Ve,this.tileID.canonical),Ne.bucketLayerIDs.push(lt.map(gt=>gt.id)))}}let dt,X,de,le;const ae=o.aH(Ve.glyphDependencies,Ie=>Object.keys(Ie).map(Number));this.inFlightDependencies.forEach(Ie=>Ie==null?void 0:Ie.cancel()),this.inFlightDependencies=[];const pe=++this.dependencySentinel;Object.keys(ae).length?this.inFlightDependencies.push(Se.send("getGlyphs",{uid:this.uid,stacks:ae,source:this.source,tileID:this.tileID,type:"glyphs"},(Ie,Le)=>{pe===this.dependencySentinel&&(dt||(dt=Ie,X=Le,je.call(this)))})):X={};const J=Object.keys(Ve.iconDependencies);J.length?this.inFlightDependencies.push(Se.send("getImages",{icons:J,source:this.source,tileID:this.tileID,type:"icons"},(Ie,Le)=>{pe===this.dependencySentinel&&(dt||(dt=Ie,de=Le,je.call(this)))})):de={};const Re=Object.keys(Ve.patternDependencies);function je(){if(dt)return Te(dt);if(X&&de&&le){const Ie=new d(X),Le=new o.bp(de,le);for(const He in Ae){const rt=Ae[He];rt instanceof o.a4?(v(rt.layers,this.zoom,ge),o.bq({bucket:rt,glyphMap:X,glyphPositions:Ie.positions,imageMap:de,imagePositions:Le.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):rt.hasPattern&&(rt instanceof o.br||rt instanceof o.bs||rt instanceof o.bt)&&(v(rt.layers,this.zoom,ge),rt.addFeatures(Ve,this.tileID.canonical,Le.patternPositions))}this.status="done",Te(null,{buckets:Object.values(Ae).filter(He=>!He.isEmpty()),featureIndex:Ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ie.image,imageAtlas:Le,glyphMap:this.returnDependencies?X:null,iconMap:this.returnDependencies?de:null,glyphPositions:this.returnDependencies?Ie.positions:null})}}Re.length?this.inFlightDependencies.push(Se.send("getImages",{icons:Re,source:this.source,tileID:this.tileID,type:"patterns"},(Ie,Le)=>{pe===this.dependencySentinel&&(dt||(dt=Ie,le=Le,je.call(this)))})):le={},je.call(this)}}function v(be,Y,te){const ge=new o.a8(Y);for(const Se of be)Se.recalculate(ge,te)}function y(be,Y){const te=o.l(be.request,(ge,Se,Te,We)=>{if(ge)Y(ge);else if(Se)try{const Ne=new o.bw.VectorTile(new o.bv(Se));Y(null,{vectorTile:Ne,rawData:Se,cacheControl:Te,expires:We})}catch(Ne){const Ae=new Uint8Array(Se);let Ve=`Unable to parse the tile at ${be.request.url}, `;Ve+=Ae[0]===31&&Ae[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ne.messge}`,Y(new Error(Ve))}});return()=>{te.cancel(),Y()}}class _{constructor(Y,te,ge,Se){this.actor=Y,this.layerIndex=te,this.availableImages=ge,this.loadVectorData=Se||y,this.fetching={},this.loading={},this.loaded={}}loadTile(Y,te){const ge=Y.uid;this.loading||(this.loading={});const Se=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new o.bu(Y.request),Te=this.loading[ge]=new p(Y);Te.abort=this.loadVectorData(Y,(We,Ne)=>{if(delete this.loading[ge],We||!Ne)return Te.status="done",this.loaded[ge]=Te,te(We);const Ae=Ne.rawData,Ve={};Ne.expires&&(Ve.expires=Ne.expires),Ne.cacheControl&&(Ve.cacheControl=Ne.cacheControl);const ut={};if(Se){const dt=Se.finish();dt&&(ut.resourceTiming=JSON.parse(JSON.stringify(dt)))}Te.vectorTile=Ne.vectorTile,Te.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.actor,(dt,X)=>{if(delete this.fetching[ge],dt||!X)return te(dt);te(null,o.e({rawTileData:Ae.slice(0)},X,Ve,ut))}),this.loaded=this.loaded||{},this.loaded[ge]=Te,this.fetching[ge]={rawTileData:Ae,cacheControl:Ve,resourceTiming:ut}})}reloadTile(Y,te){const ge=this.loaded,Se=Y.uid;if(ge&&ge[Se]){const Te=ge[Se];Te.showCollisionBoxes=Y.showCollisionBoxes,Te.status==="parsing"?Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,(We,Ne)=>{if(We||!Ne)return te(We,Ne);let Ae;if(this.fetching[Se]){const{rawTileData:Ve,cacheControl:ut,resourceTiming:dt}=this.fetching[Se];delete this.fetching[Se],Ae=o.e({rawTileData:Ve.slice(0)},Ne,ut,dt)}else Ae=Ne;te(null,Ae)}):Te.status==="done"&&(Te.vectorTile?Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,te):te())}}abortTile(Y,te){const ge=this.loading,Se=Y.uid;ge&&ge[Se]&&ge[Se].abort&&(ge[Se].abort(),delete ge[Se]),te()}removeTile(Y,te){const ge=this.loaded,Se=Y.uid;ge&&ge[Se]&&delete ge[Se],te()}}class P{constructor(){this.loaded={}}loadTile(Y,te){return o._(this,void 0,void 0,function*(){const{uid:ge,encoding:Se,rawImageData:Te,redFactor:We,greenFactor:Ne,blueFactor:Ae,baseShift:Ve}=Y,ut=Te.width+2,dt=Te.height+2,X=o.a(Te)?new o.R({width:ut,height:dt},yield o.bx(Te,-1,-1,ut,dt)):Te,de=new o.by(ge,X,Se,We,Ne,Ae,Ve);this.loaded=this.loaded||{},this.loaded[ge]=de,te(null,de)})}removeTile(Y){const te=this.loaded,ge=Y.uid;te&&te[ge]&&delete te[ge]}}function R(be,Y){if(be.length!==0){M(be[0],Y);for(var te=1;te<be.length;te++)M(be[te],!Y)}}function M(be,Y){for(var te=0,ge=0,Se=0,Te=be.length,We=Te-1;Se<Te;We=Se++){var Ne=(be[Se][0]-be[We][0])*(be[We][1]+be[Se][1]),Ae=te+Ne;ge+=Math.abs(te)>=Math.abs(Ne)?te-Ae+Ne:Ne-Ae+te,te=Ae}te+ge>=0!=!!Y&&be.reverse()}var F=o.bz(function be(Y,te){var ge,Se=Y&&Y.type;if(Se==="FeatureCollection")for(ge=0;ge<Y.features.length;ge++)be(Y.features[ge],te);else if(Se==="GeometryCollection")for(ge=0;ge<Y.geometries.length;ge++)be(Y.geometries[ge],te);else if(Se==="Feature")be(Y.geometry,te);else if(Se==="Polygon")R(Y.coordinates,te);else if(Se==="MultiPolygon")for(ge=0;ge<Y.coordinates.length;ge++)R(Y.coordinates[ge],te);return Y});const k=o.bw.VectorTileFeature.prototype.toGeoJSON;var N={exports:{}},G=o.bA,j=o.bw.VectorTileFeature,ee=q;function q(be,Y){this.options=Y||{},this.features=be,this.length=be.length}function oe(be,Y){this.id=typeof be.id=="number"?be.id:void 0,this.type=be.type,this.rawGeometry=be.type===1?[be.geometry]:be.geometry,this.properties=be.tags,this.extent=Y||4096}q.prototype.feature=function(be){return new oe(this.features[be],this.options.extent)},oe.prototype.loadGeometry=function(){var be=this.rawGeometry;this.geometry=[];for(var Y=0;Y<be.length;Y++){for(var te=be[Y],ge=[],Se=0;Se<te.length;Se++)ge.push(new G(te[Se][0],te[Se][1]));this.geometry.push(ge)}return this.geometry},oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var be=this.geometry,Y=1/0,te=-1/0,ge=1/0,Se=-1/0,Te=0;Te<be.length;Te++)for(var We=be[Te],Ne=0;Ne<We.length;Ne++){var Ae=We[Ne];Y=Math.min(Y,Ae.x),te=Math.max(te,Ae.x),ge=Math.min(ge,Ae.y),Se=Math.max(Se,Ae.y)}return[Y,ge,te,Se]},oe.prototype.toGeoJSON=j.prototype.toGeoJSON;var ue=o.bB,me=ee;function ie(be){var Y=new ue;return function(te,ge){for(var Se in te.layers)ge.writeMessage(3,fe,te.layers[Se])}(be,Y),Y.finish()}function fe(be,Y){var te;Y.writeVarintField(15,be.version||1),Y.writeStringField(1,be.name||""),Y.writeVarintField(5,be.extent||4096);var ge={keys:[],values:[],keycache:{},valuecache:{}};for(te=0;te<be.length;te++)ge.feature=be.feature(te),Y.writeMessage(2,ke,ge);var Se=ge.keys;for(te=0;te<Se.length;te++)Y.writeStringField(3,Se[te]);var Te=ge.values;for(te=0;te<Te.length;te++)Y.writeMessage(4,Ge,Te[te])}function ke(be,Y){var te=be.feature;te.id!==void 0&&Y.writeVarintField(1,te.id),Y.writeMessage(2,et,be),Y.writeVarintField(3,te.type),Y.writeMessage(4,pt,te)}function et(be,Y){var te=be.feature,ge=be.keys,Se=be.values,Te=be.keycache,We=be.valuecache;for(var Ne in te.properties){var Ae=te.properties[Ne],Ve=Te[Ne];if(Ae!==null){Ve===void 0&&(ge.push(Ne),Te[Ne]=Ve=ge.length-1),Y.writeVarint(Ve);var ut=typeof Ae;ut!=="string"&&ut!=="boolean"&&ut!=="number"&&(Ae=JSON.stringify(Ae));var dt=ut+":"+Ae,X=We[dt];X===void 0&&(Se.push(Ae),We[dt]=X=Se.length-1),Y.writeVarint(X)}}}function Xe(be,Y){return(Y<<3)+(7&be)}function ct(be){return be<<1^be>>31}function pt(be,Y){for(var te=be.loadGeometry(),ge=be.type,Se=0,Te=0,We=te.length,Ne=0;Ne<We;Ne++){var Ae=te[Ne],Ve=1;ge===1&&(Ve=Ae.length),Y.writeVarint(Xe(1,Ve));for(var ut=ge===3?Ae.length-1:Ae.length,dt=0;dt<ut;dt++){dt===1&&ge!==1&&Y.writeVarint(Xe(2,ut-1));var X=Ae[dt].x-Se,de=Ae[dt].y-Te;Y.writeVarint(ct(X)),Y.writeVarint(ct(de)),Se+=X,Te+=de}ge===3&&Y.writeVarint(Xe(7,1))}}function Ge(be,Y){var te=typeof be;te==="string"?Y.writeStringField(1,be):te==="boolean"?Y.writeBooleanField(7,be):te==="number"&&(be%1!=0?Y.writeDoubleField(3,be):be<0?Y.writeSVarintField(6,be):Y.writeVarintField(5,be))}N.exports=ie,N.exports.fromVectorTileJs=ie,N.exports.fromGeojsonVt=function(be,Y){Y=Y||{};var te={};for(var ge in be)te[ge]=new me(be[ge].features,Y),te[ge].name=ge,te[ge].version=Y.version,te[ge].extent=Y.extent;return ie({layers:te})},N.exports.GeoJSONWrapper=me;var Ye=o.bz(N.exports);const ht={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:be=>be},Be=Math.fround||(ce=new Float32Array(1),be=>(ce[0]=+be,ce[0]));var ce;const he=3,ve=5,_e=6;class Fe{constructor(Y){this.options=Object.assign(Object.create(ht),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){const{log:te,minZoom:ge,maxZoom:Se}=this.options;te&&console.time("total time");const Te=`prepare ${Y.length} points`;te&&console.time(Te),this.points=Y;const We=[];for(let Ae=0;Ae<Y.length;Ae++){const Ve=Y[Ae];if(!Ve.geometry)continue;const[ut,dt]=Ve.geometry.coordinates,X=Be(ot(ut)),de=Be(Qe(dt));We.push(X,de,1/0,Ae,-1,1),this.options.reduce&&We.push(0)}let Ne=this.trees[Se+1]=this._createTree(We);te&&console.timeEnd(Te);for(let Ae=Se;Ae>=ge;Ae--){const Ve=+Date.now();Ne=this.trees[Ae]=this._createTree(this._cluster(Ne,Ae)),te&&console.log("z%d: %d clusters in %dms",Ae,Ne.numItems,+Date.now()-Ve)}return te&&console.timeEnd("total time"),this}getClusters(Y,te){let ge=((Y[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,Y[1]));let Te=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)ge=-180,Te=180;else if(ge>Te){const dt=this.getClusters([ge,Se,180,We],te),X=this.getClusters([-180,Se,Te,We],te);return dt.concat(X)}const Ne=this.trees[this._limitZoom(te)],Ae=Ne.range(ot(ge),Qe(We),ot(Te),Qe(Se)),Ve=Ne.data,ut=[];for(const dt of Ae){const X=this.stride*dt;ut.push(Ve[X+ve]>1?qe(Ve,X,this.clusterProps):this.points[Ve[X+he]])}return ut}getChildren(Y){const te=this._getOriginId(Y),ge=this._getOriginZoom(Y),Se="No cluster with the specified id.",Te=this.trees[ge];if(!Te)throw new Error(Se);const We=Te.data;if(te*this.stride>=We.length)throw new Error(Se);const Ne=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),Ae=Te.within(We[te*this.stride],We[te*this.stride+1],Ne),Ve=[];for(const ut of Ae){const dt=ut*this.stride;We[dt+4]===Y&&Ve.push(We[dt+ve]>1?qe(We,dt,this.clusterProps):this.points[We[dt+he]])}if(Ve.length===0)throw new Error(Se);return Ve}getLeaves(Y,te,ge){const Se=[];return this._appendLeaves(Se,Y,te=te||10,ge=ge||0,0),Se}getTile(Y,te,ge){const Se=this.trees[this._limitZoom(Y)],Te=Math.pow(2,Y),{extent:We,radius:Ne}=this.options,Ae=Ne/We,Ve=(ge-Ae)/Te,ut=(ge+1+Ae)/Te,dt={features:[]};return this._addTileFeatures(Se.range((te-Ae)/Te,Ve,(te+1+Ae)/Te,ut),Se.data,te,ge,Te,dt),te===0&&this._addTileFeatures(Se.range(1-Ae/Te,Ve,1,ut),Se.data,Te,ge,Te,dt),te===Te-1&&this._addTileFeatures(Se.range(0,Ve,Ae/Te,ut),Se.data,-1,ge,Te,dt),dt.features.length?dt:null}getClusterExpansionZoom(Y){let te=this._getOriginZoom(Y)-1;for(;te<=this.options.maxZoom;){const ge=this.getChildren(Y);if(te++,ge.length!==1)break;Y=ge[0].properties.cluster_id}return te}_appendLeaves(Y,te,ge,Se,Te){const We=this.getChildren(te);for(const Ne of We){const Ae=Ne.properties;if(Ae&&Ae.cluster?Te+Ae.point_count<=Se?Te+=Ae.point_count:Te=this._appendLeaves(Y,Ae.cluster_id,ge,Se,Te):Te<Se?Te++:Y.push(Ne),Y.length===ge)break}return Te}_createTree(Y){const te=new o.av(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ge=0;ge<Y.length;ge+=this.stride)te.add(Y[ge],Y[ge+1]);return te.finish(),te.data=Y,te}_addTileFeatures(Y,te,ge,Se,Te,We){for(const Ne of Y){const Ae=Ne*this.stride,Ve=te[Ae+ve]>1;let ut,dt,X;if(Ve)ut=at(te,Ae,this.clusterProps),dt=te[Ae],X=te[Ae+1];else{const ae=this.points[te[Ae+he]];ut=ae.properties;const[pe,J]=ae.geometry.coordinates;dt=ot(pe),X=Qe(J)}const de={type:1,geometry:[[Math.round(this.options.extent*(dt*Te-ge)),Math.round(this.options.extent*(X*Te-Se))]],tags:ut};let le;le=Ve||this.options.generateId?te[Ae+he]:this.points[te[Ae+he]].id,le!==void 0&&(de.id=le),We.features.push(de)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,te){const{radius:ge,extent:Se,reduce:Te,minPoints:We}=this.options,Ne=ge/(Se*Math.pow(2,te)),Ae=Y.data,Ve=[],ut=this.stride;for(let dt=0;dt<Ae.length;dt+=ut){if(Ae[dt+2]<=te)continue;Ae[dt+2]=te;const X=Ae[dt],de=Ae[dt+1],le=Y.within(Ae[dt],Ae[dt+1],Ne),ae=Ae[dt+ve];let pe=ae;for(const J of le){const Re=J*ut;Ae[Re+2]>te&&(pe+=Ae[Re+ve])}if(pe>ae&&pe>=We){let J,Re=X*ae,je=de*ae,Ie=-1;const Le=((dt/ut|0)<<5)+(te+1)+this.points.length;for(const He of le){const rt=He*ut;if(Ae[rt+2]<=te)continue;Ae[rt+2]=te;const lt=Ae[rt+ve];Re+=Ae[rt]*lt,je+=Ae[rt+1]*lt,Ae[rt+4]=Le,Te&&(J||(J=this._map(Ae,dt,!0),Ie=this.clusterProps.length,this.clusterProps.push(J)),Te(J,this._map(Ae,rt)))}Ae[dt+4]=Le,Ve.push(Re/pe,je/pe,1/0,Le,-1,pe),Te&&Ve.push(Ie)}else{for(let J=0;J<ut;J++)Ve.push(Ae[dt+J]);if(pe>1)for(const J of le){const Re=J*ut;if(!(Ae[Re+2]<=te)){Ae[Re+2]=te;for(let je=0;je<ut;je++)Ve.push(Ae[Re+je])}}}}return Ve}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,te,ge){if(Y[te+ve]>1){const We=this.clusterProps[Y[te+_e]];return ge?Object.assign({},We):We}const Se=this.points[Y[te+he]].properties,Te=this.options.map(Se);return ge&&Te===Se?Object.assign({},Te):Te}}function qe(be,Y,te){return{type:"Feature",id:be[Y+he],properties:at(be,Y,te),geometry:{type:"Point",coordinates:[(ge=be[Y],360*(ge-.5)),Lt(be[Y+1])]}};var ge}function at(be,Y,te){const ge=be[Y+ve],Se=ge>=1e4?`${Math.round(ge/1e3)}k`:ge>=1e3?Math.round(ge/100)/10+"k":ge,Te=be[Y+_e],We=Te===-1?{}:Object.assign({},te[Te]);return Object.assign(We,{cluster:!0,cluster_id:be[Y+he],point_count:ge,point_count_abbreviated:Se})}function ot(be){return be/360+.5}function Qe(be){const Y=Math.sin(be*Math.PI/180),te=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return te<0?0:te>1?1:te}function Lt(be){const Y=(180-360*be)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function Ot(be,Y,te,ge){for(var Se,Te=ge,We=te-Y>>1,Ne=te-Y,Ae=be[Y],Ve=be[Y+1],ut=be[te],dt=be[te+1],X=Y+3;X<te;X+=3){var de=er(be[X],be[X+1],Ae,Ve,ut,dt);if(de>Te)Se=X,Te=de;else if(de===Te){var le=Math.abs(X-We);le<Ne&&(Se=X,Ne=le)}}Te>ge&&(Se-Y>3&&Ot(be,Y,Se,ge),be[Se+2]=Te,te-Se>3&&Ot(be,Se,te,ge))}function er(be,Y,te,ge,Se,Te){var We=Se-te,Ne=Te-ge;if(We!==0||Ne!==0){var Ae=((be-te)*We+(Y-ge)*Ne)/(We*We+Ne*Ne);Ae>1?(te=Se,ge=Te):Ae>0&&(te+=We*Ae,ge+=Ne*Ae)}return(We=be-te)*We+(Ne=Y-ge)*Ne}function Yt(be,Y,te,ge){var Se={id:be===void 0?null:be,type:Y,geometry:te,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Te){var We=Te.geometry,Ne=Te.type;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")Qt(Te,We);else if(Ne==="Polygon"||Ne==="MultiLineString")for(var Ae=0;Ae<We.length;Ae++)Qt(Te,We[Ae]);else if(Ne==="MultiPolygon")for(Ae=0;Ae<We.length;Ae++)for(var Ve=0;Ve<We[Ae].length;Ve++)Qt(Te,We[Ae][Ve])}(Se),Se}function Qt(be,Y){for(var te=0;te<Y.length;te+=3)be.minX=Math.min(be.minX,Y[te]),be.minY=Math.min(be.minY,Y[te+1]),be.maxX=Math.max(be.maxX,Y[te]),be.maxY=Math.max(be.maxY,Y[te+1])}function qt(be,Y,te,ge){if(Y.geometry){var Se=Y.geometry.coordinates,Te=Y.geometry.type,We=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),Ne=[],Ae=Y.id;if(te.promoteId?Ae=Y.properties[te.promoteId]:te.generateId&&(Ae=ge||0),Te==="Point")Et(Se,Ne);else if(Te==="MultiPoint")for(var Ve=0;Ve<Se.length;Ve++)Et(Se[Ve],Ne);else if(Te==="LineString")hr(Se,Ne,We,!1);else if(Te==="MultiLineString"){if(te.lineMetrics){for(Ve=0;Ve<Se.length;Ve++)hr(Se[Ve],Ne=[],We,!1),be.push(Yt(Ae,"LineString",Ne,Y.properties));return}rr(Se,Ne,We,!1)}else if(Te==="Polygon")rr(Se,Ne,We,!0);else{if(Te!=="MultiPolygon"){if(Te==="GeometryCollection"){for(Ve=0;Ve<Y.geometry.geometries.length;Ve++)qt(be,{id:Ae,geometry:Y.geometry.geometries[Ve],properties:Y.properties},te,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ve=0;Ve<Se.length;Ve++){var ut=[];rr(Se[Ve],ut,We,!0),Ne.push(ut)}}be.push(Yt(Ae,Te,Ne,Y.properties))}}function Et(be,Y){Y.push(Ke(be[0])),Y.push(Jt(be[1])),Y.push(0)}function hr(be,Y,te,ge){for(var Se,Te,We=0,Ne=0;Ne<be.length;Ne++){var Ae=Ke(be[Ne][0]),Ve=Jt(be[Ne][1]);Y.push(Ae),Y.push(Ve),Y.push(0),Ne>0&&(We+=ge?(Se*Ve-Ae*Te)/2:Math.sqrt(Math.pow(Ae-Se,2)+Math.pow(Ve-Te,2))),Se=Ae,Te=Ve}var ut=Y.length-3;Y[2]=1,Ot(Y,0,ut,te),Y[ut+2]=1,Y.size=Math.abs(We),Y.start=0,Y.end=Y.size}function rr(be,Y,te,ge){for(var Se=0;Se<be.length;Se++){var Te=[];hr(be[Se],Te,te,ge),Y.push(Te)}}function Ke(be){return be/360+.5}function Jt(be){var Y=Math.sin(be*Math.PI/180),te=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return te<0?0:te>1?1:te}function Nr(be,Y,te,ge,Se,Te,We,Ne){if(ge/=Y,Te>=(te/=Y)&&We<ge)return be;if(We<te||Te>=ge)return null;for(var Ae=[],Ve=0;Ve<be.length;Ve++){var ut=be[Ve],dt=ut.geometry,X=ut.type,de=Se===0?ut.minX:ut.minY,le=Se===0?ut.maxX:ut.maxY;if(de>=te&&le<ge)Ae.push(ut);else if(!(le<te||de>=ge)){var ae=[];if(X==="Point"||X==="MultiPoint")vr(dt,ae,te,ge,Se);else if(X==="LineString")$t(dt,ae,te,ge,Se,!1,Ne.lineMetrics);else if(X==="MultiLineString")ds(dt,ae,te,ge,Se,!1);else if(X==="Polygon")ds(dt,ae,te,ge,Se,!0);else if(X==="MultiPolygon")for(var pe=0;pe<dt.length;pe++){var J=[];ds(dt[pe],J,te,ge,Se,!0),J.length&&ae.push(J)}if(ae.length){if(Ne.lineMetrics&&X==="LineString"){for(pe=0;pe<ae.length;pe++)Ae.push(Yt(ut.id,X,ae[pe],ut.tags));continue}X!=="LineString"&&X!=="MultiLineString"||(ae.length===1?(X="LineString",ae=ae[0]):X="MultiLineString"),X!=="Point"&&X!=="MultiPoint"||(X=ae.length===3?"Point":"MultiPoint"),Ae.push(Yt(ut.id,X,ae,ut.tags))}}}return Ae.length?Ae:null}function vr(be,Y,te,ge,Se){for(var Te=0;Te<be.length;Te+=3){var We=be[Te+Se];We>=te&&We<=ge&&(Y.push(be[Te]),Y.push(be[Te+1]),Y.push(be[Te+2]))}}function $t(be,Y,te,ge,Se,Te,We){for(var Ne,Ae,Ve=ui(be),ut=Se===0?Ir:Kr,dt=be.start,X=0;X<be.length-3;X+=3){var de=be[X],le=be[X+1],ae=be[X+2],pe=be[X+3],J=be[X+4],Re=Se===0?de:le,je=Se===0?pe:J,Ie=!1;We&&(Ne=Math.sqrt(Math.pow(de-pe,2)+Math.pow(le-J,2))),Re<te?je>te&&(Ae=ut(Ve,de,le,pe,J,te),We&&(Ve.start=dt+Ne*Ae)):Re>ge?je<ge&&(Ae=ut(Ve,de,le,pe,J,ge),We&&(Ve.start=dt+Ne*Ae)):an(Ve,de,le,ae),je<te&&Re>=te&&(Ae=ut(Ve,de,le,pe,J,te),Ie=!0),je>ge&&Re<=ge&&(Ae=ut(Ve,de,le,pe,J,ge),Ie=!0),!Te&&Ie&&(We&&(Ve.end=dt+Ne*Ae),Y.push(Ve),Ve=ui(be)),We&&(dt+=Ne)}var Le=be.length-3;de=be[Le],le=be[Le+1],ae=be[Le+2],(Re=Se===0?de:le)>=te&&Re<=ge&&an(Ve,de,le,ae),Le=Ve.length-3,Te&&Le>=3&&(Ve[Le]!==Ve[0]||Ve[Le+1]!==Ve[1])&&an(Ve,Ve[0],Ve[1],Ve[2]),Ve.length&&Y.push(Ve)}function ui(be){var Y=[];return Y.size=be.size,Y.start=be.start,Y.end=be.end,Y}function ds(be,Y,te,ge,Se,Te){for(var We=0;We<be.length;We++)$t(be[We],Y,te,ge,Se,Te,!1)}function an(be,Y,te,ge){be.push(Y),be.push(te),be.push(ge)}function Ir(be,Y,te,ge,Se,Te){var We=(Te-Y)/(ge-Y);return be.push(Te),be.push(te+(Se-te)*We),be.push(1),We}function Kr(be,Y,te,ge,Se,Te){var We=(Te-te)/(Se-te);return be.push(Y+(ge-Y)*We),be.push(Te),be.push(1),We}function kn(be,Y){for(var te=[],ge=0;ge<be.length;ge++){var Se,Te=be[ge],We=Te.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")Se=fs(Te.geometry,Y);else if(We==="MultiLineString"||We==="Polygon"){Se=[];for(var Ne=0;Ne<Te.geometry.length;Ne++)Se.push(fs(Te.geometry[Ne],Y))}else if(We==="MultiPolygon")for(Se=[],Ne=0;Ne<Te.geometry.length;Ne++){for(var Ae=[],Ve=0;Ve<Te.geometry[Ne].length;Ve++)Ae.push(fs(Te.geometry[Ne][Ve],Y));Se.push(Ae)}te.push(Yt(Te.id,We,Se,Te.tags))}return te}function fs(be,Y){var te=[];te.size=be.size,be.start!==void 0&&(te.start=be.start,te.end=be.end);for(var ge=0;ge<be.length;ge+=3)te.push(be[ge]+Y,be[ge+1],be[ge+2]);return te}function Tt(be,Y){if(be.transformed)return be;var te,ge,Se,Te=1<<be.z,We=be.x,Ne=be.y;for(te=0;te<be.features.length;te++){var Ae=be.features[te],Ve=Ae.geometry,ut=Ae.type;if(Ae.geometry=[],ut===1)for(ge=0;ge<Ve.length;ge+=2)Ae.geometry.push(Ji(Ve[ge],Ve[ge+1],Y,Te,We,Ne));else for(ge=0;ge<Ve.length;ge++){var dt=[];for(Se=0;Se<Ve[ge].length;Se+=2)dt.push(Ji(Ve[ge][Se],Ve[ge][Se+1],Y,Te,We,Ne));Ae.geometry.push(dt)}}return be.transformed=!0,be}function Ji(be,Y,te,ge,Se,Te){return[Math.round(te*(be*ge-Se)),Math.round(te*(Y*ge-Te))]}function Yr(be,Y,te,ge,Se){for(var Te=Y===Se.maxZoom?0:Se.tolerance/((1<<Y)*Se.extent),We={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:te,y:ge,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ne=0;Ne<be.length;Ne++){We.numFeatures++,ks(We,be[Ne],Te,Se);var Ae=be[Ne].minX,Ve=be[Ne].minY,ut=be[Ne].maxX,dt=be[Ne].maxY;Ae<We.minX&&(We.minX=Ae),Ve<We.minY&&(We.minY=Ve),ut>We.maxX&&(We.maxX=ut),dt>We.maxY&&(We.maxY=dt)}return We}function ks(be,Y,te,ge){var Se=Y.geometry,Te=Y.type,We=[];if(Te==="Point"||Te==="MultiPoint")for(var Ne=0;Ne<Se.length;Ne+=3)We.push(Se[Ne]),We.push(Se[Ne+1]),be.numPoints++,be.numSimplified++;else if(Te==="LineString")Ls(We,Se,be,te,!1,!1);else if(Te==="MultiLineString"||Te==="Polygon")for(Ne=0;Ne<Se.length;Ne++)Ls(We,Se[Ne],be,te,Te==="Polygon",Ne===0);else if(Te==="MultiPolygon")for(var Ae=0;Ae<Se.length;Ae++){var Ve=Se[Ae];for(Ne=0;Ne<Ve.length;Ne++)Ls(We,Ve[Ne],be,te,!0,Ne===0)}if(We.length){var ut=Y.tags||null;if(Te==="LineString"&&ge.lineMetrics){for(var dt in ut={},Y.tags)ut[dt]=Y.tags[dt];ut.mapbox_clip_start=Se.start/Se.size,ut.mapbox_clip_end=Se.end/Se.size}var X={geometry:We,type:Te==="Polygon"||Te==="MultiPolygon"?3:Te==="LineString"||Te==="MultiLineString"?2:1,tags:ut};Y.id!==null&&(X.id=Y.id),be.features.push(X)}}function Ls(be,Y,te,ge,Se,Te){var We=ge*ge;if(ge>0&&Y.size<(Se?We:ge))te.numPoints+=Y.length/3;else{for(var Ne=[],Ae=0;Ae<Y.length;Ae+=3)(ge===0||Y[Ae+2]>We)&&(te.numSimplified++,Ne.push(Y[Ae]),Ne.push(Y[Ae+1])),te.numPoints++;Se&&function(Ve,ut){for(var dt=0,X=0,de=Ve.length,le=de-2;X<de;le=X,X+=2)dt+=(Ve[X]-Ve[le])*(Ve[X+1]+Ve[le+1]);if(dt>0===ut)for(X=0,de=Ve.length;X<de/2;X+=2){var ae=Ve[X],pe=Ve[X+1];Ve[X]=Ve[de-2-X],Ve[X+1]=Ve[de-1-X],Ve[de-2-X]=ae,Ve[de-1-X]=pe}}(Ne,Te),be.push(Ne)}}function Ft(be,Y){var te=(Y=this.options=function(Se,Te){for(var We in Te)Se[We]=Te[We];return Se}(Object.create(this.options),Y)).debug;if(te&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var ge=function(Se,Te){var We=[];if(Se.type==="FeatureCollection")for(var Ne=0;Ne<Se.features.length;Ne++)qt(We,Se.features[Ne],Te,Ne);else qt(We,Se.type==="Feature"?Se:{geometry:Se},Te);return We}(be,Y);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ge=function(Se,Te){var We=Te.buffer/Te.extent,Ne=Se,Ae=Nr(Se,1,-1-We,We,0,-1,2,Te),Ve=Nr(Se,1,1-We,2+We,0,-1,2,Te);return(Ae||Ve)&&(Ne=Nr(Se,1,-We,1+We,0,-1,2,Te)||[],Ae&&(Ne=kn(Ae,1).concat(Ne)),Ve&&(Ne=Ne.concat(kn(Ve,-1)))),Ne}(ge,Y),ge.length&&this.splitTile(ge,0,0,0),te&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wr(be,Y,te){return 32*((1<<be)*te+Y)+be}function yr(be,Y){return Y?be.properties[Y]:be.id}function wi(be,Y){if(be==null)return!0;if(be.type==="Feature")return yr(be,Y)!=null;if(be.type==="FeatureCollection"){const te=new Set;for(const ge of be.features){const Se=yr(ge,Y);if(Se==null||te.has(Se))return!1;te.add(Se)}return!0}return!1}function ps(be,Y){const te=new Map;if(be!=null)if(be.type==="Feature")te.set(yr(be,Y),be);else for(const ge of be.features)te.set(yr(ge,Y),ge);return te}Ft.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ft.prototype.splitTile=function(be,Y,te,ge,Se,Te,We){for(var Ne=[be,Y,te,ge],Ae=this.options,Ve=Ae.debug;Ne.length;){ge=Ne.pop(),te=Ne.pop(),Y=Ne.pop(),be=Ne.pop();var ut=1<<Y,dt=wr(Y,te,ge),X=this.tiles[dt];if(!X&&(Ve>1&&console.time("creation"),X=this.tiles[dt]=Yr(be,Y,te,ge,Ae),this.tileCoords.push({z:Y,x:te,y:ge}),Ve)){Ve>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,te,ge,X.numFeatures,X.numPoints,X.numSimplified),console.timeEnd("creation"));var de="z"+Y;this.stats[de]=(this.stats[de]||0)+1,this.total++}if(X.source=be,Se){if(Y===Ae.maxZoom||Y===Se)continue;var le=1<<Se-Y;if(te!==Math.floor(Te/le)||ge!==Math.floor(We/le))continue}else if(Y===Ae.indexMaxZoom||X.numPoints<=Ae.indexMaxPoints)continue;if(X.source=null,be.length!==0){Ve>1&&console.time("clipping");var ae,pe,J,Re,je,Ie,Le=.5*Ae.buffer/Ae.extent,He=.5-Le,rt=.5+Le,lt=1+Le;ae=pe=J=Re=null,je=Nr(be,ut,te-Le,te+rt,0,X.minX,X.maxX,Ae),Ie=Nr(be,ut,te+He,te+lt,0,X.minX,X.maxX,Ae),be=null,je&&(ae=Nr(je,ut,ge-Le,ge+rt,1,X.minY,X.maxY,Ae),pe=Nr(je,ut,ge+He,ge+lt,1,X.minY,X.maxY,Ae),je=null),Ie&&(J=Nr(Ie,ut,ge-Le,ge+rt,1,X.minY,X.maxY,Ae),Re=Nr(Ie,ut,ge+He,ge+lt,1,X.minY,X.maxY,Ae),Ie=null),Ve>1&&console.timeEnd("clipping"),Ne.push(ae||[],Y+1,2*te,2*ge),Ne.push(pe||[],Y+1,2*te,2*ge+1),Ne.push(J||[],Y+1,2*te+1,2*ge),Ne.push(Re||[],Y+1,2*te+1,2*ge+1)}}},Ft.prototype.getTile=function(be,Y,te){var ge=this.options,Se=ge.extent,Te=ge.debug;if(be<0||be>24)return null;var We=1<<be,Ne=wr(be,Y=(Y%We+We)%We,te);if(this.tiles[Ne])return Tt(this.tiles[Ne],Se);Te>1&&console.log("drilling down to z%d-%d-%d",be,Y,te);for(var Ae,Ve=be,ut=Y,dt=te;!Ae&&Ve>0;)Ve--,ut=Math.floor(ut/2),dt=Math.floor(dt/2),Ae=this.tiles[wr(Ve,ut,dt)];return Ae&&Ae.source?(Te>1&&console.log("found parent tile z%d-%d-%d",Ve,ut,dt),Te>1&&console.time("drilling down"),this.splitTile(Ae.source,Ve,ut,dt,be,Y,te),Te>1&&console.timeEnd("drilling down"),this.tiles[Ne]?Tt(this.tiles[Ne],Se):null):null};class sr extends _{constructor(Y,te,ge,Se){super(Y,te,ge),this._dataUpdateable=new Map,this.loadGeoJSON=(Te,We)=>{const{promoteId:Ne}=Te;if(Te.request)return o.f(Te.request,(Ae,Ve,ut,dt)=>{this._dataUpdateable=wi(Ve,Ne)?ps(Ve,Ne):void 0,We(Ae,Ve,ut,dt)});if(typeof Te.data=="string")try{const Ae=JSON.parse(Te.data);this._dataUpdateable=wi(Ae,Ne)?ps(Ae,Ne):void 0,We(null,Ae)}catch{We(new Error(`Input data given to '${Te.source}' is not a valid GeoJSON object.`))}else Te.dataDiff?this._dataUpdateable?(function(Ae,Ve,ut){var dt,X,de,le;if(Ve.removeAll&&Ae.clear(),Ve.remove)for(const ae of Ve.remove)Ae.delete(ae);if(Ve.add)for(const ae of Ve.add){const pe=yr(ae,ut);pe!=null&&Ae.set(pe,ae)}if(Ve.update)for(const ae of Ve.update){let pe=Ae.get(ae.id);if(pe==null)continue;const J=!ae.removeAllProperties&&(((dt=ae.removeProperties)===null||dt===void 0?void 0:dt.length)>0||((X=ae.addOrUpdateProperties)===null||X===void 0?void 0:X.length)>0);if((ae.newGeometry||ae.removeAllProperties||J)&&(pe=Object.assign({},pe),Ae.set(ae.id,pe),J&&(pe.properties=Object.assign({},pe.properties))),ae.newGeometry&&(pe.geometry=ae.newGeometry),ae.removeAllProperties)pe.properties={};else if(((de=ae.removeProperties)===null||de===void 0?void 0:de.length)>0)for(const Re of ae.removeProperties)Object.prototype.hasOwnProperty.call(pe.properties,Re)&&delete pe.properties[Re];if(((le=ae.addOrUpdateProperties)===null||le===void 0?void 0:le.length)>0)for(const{key:Re,value:je}of ae.addOrUpdateProperties)pe.properties[Re]=je}}(this._dataUpdateable,Te.dataDiff,Ne),We(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):We(new Error(`Cannot update existing geojson data in ${Te.source}`)):We(new Error(`Input data given to '${Te.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Se&&(this.loadGeoJSON=Se)}loadGeoJSONTile(Y,te){const ge=Y.tileID.canonical;if(!this._geoJSONIndex)return te(null,null);const Se=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);if(!Se)return te(null,null);const Te=new class{constructor(Ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.N,this.length=Ne.length,this._features=Ne}feature(Ne){return new class{constructor(Ae){this._feature=Ae,this.extent=o.N,this.type=Ae.type,this.properties=Ae.tags,"id"in Ae&&!isNaN(Ae.id)&&(this.id=parseInt(Ae.id,10))}loadGeometry(){if(this._feature.type===1){const Ae=[];for(const Ve of this._feature.geometry)Ae.push([new o.P(Ve[0],Ve[1])]);return Ae}{const Ae=[];for(const Ve of this._feature.geometry){const ut=[];for(const dt of Ve)ut.push(new o.P(dt[0],dt[1]));Ae.push(ut)}return Ae}}toGeoJSON(Ae,Ve,ut){return k.call(this,Ae,Ve,ut)}}(this._features[Ne])}}(Se.features);let We=Ye(Te);We.byteOffset===0&&We.byteLength===We.buffer.byteLength||(We=new Uint8Array(We)),te(null,{vectorTile:Te,rawData:We.buffer})}loadData(Y,te){var ge;(ge=this._pendingRequest)===null||ge===void 0||ge.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Se=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new o.bu(Y.request);this._pendingCallback=te,this._pendingRequest=this.loadGeoJSON(Y,(Te,We)=>{if(delete this._pendingCallback,delete this._pendingRequest,Te||!We)return te(Te);if(typeof We!="object")return te(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{F(We,!0);try{if(Y.filter){const Ae=o.bC(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ae.result==="error")throw new Error(Ae.value.map(ut=>`${ut.key}: ${ut.message}`).join(", "));We={type:"FeatureCollection",features:We.features.filter(ut=>Ae.value.evaluate({zoom:0},ut))}}this._geoJSONIndex=Y.cluster?new Fe(function({superclusterOptions:Ae,clusterProperties:Ve}){if(!Ve||!Ae)return Ae;const ut={},dt={},X={accumulated:null,zoom:0},de={properties:null},le=Object.keys(Ve);for(const ae of le){const[pe,J]=Ve[ae],Re=o.bC(J),je=o.bC(typeof pe=="string"?[pe,["accumulated"],["get",ae]]:pe);ut[ae]=Re.value,dt[ae]=je.value}return Ae.map=ae=>{de.properties=ae;const pe={};for(const J of le)pe[J]=ut[J].evaluate(X,de);return pe},Ae.reduce=(ae,pe)=>{de.properties=pe;for(const J of le)X.accumulated=ae[J],ae[J]=dt[J].evaluate(X,de)},Ae}(Y)).load(We.features):function(Ae,Ve){return new Ft(Ae,Ve)}(We,Y.geojsonVtOptions)}catch(Ae){return te(Ae)}this.loaded={};const Ne={};if(Se){const Ae=Se.finish();Ae&&(Ne.resourceTiming={},Ne.resourceTiming[Y.source]=JSON.parse(JSON.stringify(Ae)))}te(null,Ne)}})}reloadTile(Y,te){const ge=this.loaded;return ge&&ge[Y.uid]?super.reloadTile(Y,te):this.loadTile(Y,te)}removeSource(Y,te){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),te()}getClusterExpansionZoom(Y,te){try{te(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(ge){te(ge)}}getClusterChildren(Y,te){try{te(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(ge){te(ge)}}getClusterLeaves(Y,te){try{te(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(ge){te(ge)}}}class Ln{constructor(Y){this.self=Y,this.actor=new o.C(Y,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:_,geojson:sr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(te,ge)=>{if(this.workerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.workerSourceTypes[te]=ge},this.self.registerRTLTextPlugin=te=>{if(o.bD.isParsed())throw new Error("RTL text plugin already registered.");o.bD.applyArabicShaping=te.applyArabicShaping,o.bD.processBidirectionalText=te.processBidirectionalText,o.bD.processStyledBidirectionalText=te.processStyledBidirectionalText}}setReferrer(Y,te){this.referrer=te}setImages(Y,te,ge){this.availableImages[Y]=te;for(const Se in this.workerSources[Y]){const Te=this.workerSources[Y][Se];for(const We in Te)Te[We].availableImages=te}ge()}setLayers(Y,te,ge){this.getLayerIndex(Y).replace(te),ge()}updateLayers(Y,te,ge){this.getLayerIndex(Y).update(te.layers,te.removedIds),ge()}loadTile(Y,te,ge){this.getWorkerSource(Y,te.type,te.source).loadTile(te,ge)}loadDEMTile(Y,te,ge){this.getDEMWorkerSource(Y,te.source).loadTile(te,ge)}reloadTile(Y,te,ge){this.getWorkerSource(Y,te.type,te.source).reloadTile(te,ge)}abortTile(Y,te,ge){this.getWorkerSource(Y,te.type,te.source).abortTile(te,ge)}removeTile(Y,te,ge){this.getWorkerSource(Y,te.type,te.source).removeTile(te,ge)}removeDEMTile(Y,te){this.getDEMWorkerSource(Y,te.source).removeTile(te)}removeSource(Y,te,ge){if(!this.workerSources[Y]||!this.workerSources[Y][te.type]||!this.workerSources[Y][te.type][te.source])return;const Se=this.workerSources[Y][te.type][te.source];delete this.workerSources[Y][te.type][te.source],Se.removeSource!==void 0?Se.removeSource(te,ge):ge()}loadWorkerSource(Y,te,ge){try{this.self.importScripts(te.url),ge()}catch(Se){ge(Se.toString())}}syncRTLPluginState(Y,te,ge){try{o.bD.setState(te);const Se=o.bD.getPluginURL();if(o.bD.isLoaded()&&!o.bD.isParsed()&&Se!=null){this.self.importScripts(Se);const Te=o.bD.isParsed();ge(Te?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Se}`),Te)}}catch(Se){ge(Se.toString())}}getAvailableImages(Y){let te=this.availableImages[Y];return te||(te=[]),te}getLayerIndex(Y){let te=this.layerIndexes[Y];return te||(te=this.layerIndexes[Y]=new u),te}getWorkerSource(Y,te,ge){return this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][te]||(this.workerSources[Y][te]={}),this.workerSources[Y][te][ge]||(this.workerSources[Y][te][ge]=new this.workerSourceTypes[te]({send:(Se,Te,We)=>{this.actor.send(Se,Te,We,Y)}},this.getLayerIndex(Y),this.getAvailableImages(Y))),this.workerSources[Y][te][ge]}getDEMWorkerSource(Y,te){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][te]||(this.demWorkerSources[Y][te]=new P),this.demWorkerSources[Y][te]}}return o.i()&&(self.worker=new Ln(self)),Ln}),s(["./shared"],function(o){var u="3.6.2";class d{static testProp(c){if(!d.docStyle)return c[0];for(let g=0;g<c.length;g++)if(c[g]in d.docStyle)return c[g];return c[0]}static create(c,g,w){const C=window.document.createElement(c);return g!==void 0&&(C.className=g),w&&w.appendChild(C),C}static createNS(c,g){return window.document.createElementNS(c,g)}static disableDrag(){d.docStyle&&d.selectProp&&(d.userSelect=d.docStyle[d.selectProp],d.docStyle[d.selectProp]="none")}static enableDrag(){d.docStyle&&d.selectProp&&(d.docStyle[d.selectProp]=d.userSelect)}static setTransform(c,g){c.style[d.transformProp]=g}static addEventListener(c,g,w,C={}){c.addEventListener(g,w,"passive"in C?C:C.capture)}static removeEventListener(c,g,w,C={}){c.removeEventListener(g,w,"passive"in C?C:C.capture)}static suppressClickInternal(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",d.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",d.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",d.suppressClickInternal,!0)},0)}static mousePos(c,g){const w=c.getBoundingClientRect();return new o.P(g.clientX-w.left-c.clientLeft,g.clientY-w.top-c.clientTop)}static touchPos(c,g){const w=c.getBoundingClientRect(),C=[];for(let S=0;S<g.length;S++)C.push(new o.P(g[S].clientX-w.left-c.clientLeft,g[S].clientY-w.top-c.clientTop));return C}static mouseButton(c){return c.button}static remove(c){c.parentNode&&c.parentNode.removeChild(c)}}d.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,d.selectProp=d.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),d.transformProp=d.testProp(["transform","WebkitTransform"]);const p={supported:!1,testSupport:function(b){!_&&y&&(P?R(b):v=b)}};let v,y,_=!1,P=!1;function R(b){const c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,y),b.isContextLost())return;p.supported=!0}catch{}b.deleteTexture(c),_=!0}var M,F;typeof document<"u"&&(y=document.createElement("img"),y.onload=function(){v&&R(v),v=null,P=!0},y.onerror=function(){_=!0,v=null},y.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let c,g,w,C;b.resetRequestQueue=()=>{c=[],g=0,w=0,C={}},b.addThrottleControl=H=>{const W=w++;return C[W]=H,W},b.removeThrottleControl=H=>{delete C[H],L()},b.getImage=(H,W,K=!0)=>{p.supported&&(H.headers||(H.headers={}),H.headers.accept="image/webp,*/*");const re={requestParameters:H,supportImageRefresh:K,callback:W,cancelled:!1,completed:!1,cancel:()=>{re.completed||re.cancelled||(re.cancelled=!0,re.innerRequest&&(re.innerRequest.cancel(),g--),L())}};return c.push(re),L(),re};const S=H=>{const{requestParameters:W,supportImageRefresh:K,callback:re}=H;return o.e(W,{type:"image"}),(K!==!1||o.i()||o.g(W.url)||W.headers&&!Object.keys(W.headers).reduce((Ce,xe)=>Ce&&xe==="accept",!0)?o.m:B)(W,(Ce,xe,Ee,ye)=>{I(H,re,Ce,xe,Ee,ye)})},I=(H,W,K,re,Ce,xe)=>{K?W(K):re instanceof HTMLImageElement||o.a(re)?W(null,re):re&&((Ee,ye)=>{typeof createImageBitmap=="function"?o.b(Ee,ye):o.d(Ee,ye)})(re,(Ee,ye)=>{Ee!=null?W(Ee):ye!=null&&W(null,ye,{cacheControl:Ce,expires:xe})}),H.cancelled||(H.completed=!0,g--,L())},L=()=>{const H=(()=>{const W=Object.keys(C);let K=!1;if(W.length>0){for(const re of W)if(K=C[re](),K)break}return K})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let W=g;W<H&&c.length>0;W++){const K=c.shift();if(K.cancelled){W--;continue}const re=S(K);g++,K.innerRequest=re}},B=(H,W)=>{const K=new Image,re=H.url;let Ce=!1;const xe=H.credentials;return xe&&xe==="include"?K.crossOrigin="use-credentials":(xe&&xe==="same-origin"||!o.s(re))&&(K.crossOrigin="anonymous"),K.fetchPriority="high",K.onload=()=>{W(null,K),K.onerror=K.onload=null},K.onerror=()=>{Ce||W(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),K.onerror=K.onload=null},K.src=re,{cancel:()=>{Ce=!0,K.src=""}}}}(M||(M={})),M.resetRequestQueue(),function(b){b.Glyphs="Glyphs",b.Image="Image",b.Source="Source",b.SpriteImage="SpriteImage",b.SpriteJSON="SpriteJSON",b.Style="Style",b.Tile="Tile",b.Unknown="Unknown"}(F||(F={}));class k{constructor(c){this._transformRequestFn=c}transformRequest(c,g){return this._transformRequestFn&&this._transformRequestFn(c,g)||{url:c}}normalizeSpriteURL(c,g,w){const C=function(S){const I=S.match(N);if(!I)throw new Error(`Unable to parse URL "${S}"`);return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}(c);return C.path+=`${g}${w}`,function(S){const I=S.params.length?`?${S.params.join("&")}`:"";return`${S.protocol}://${S.authority}${S.path}${I}`}(C)}setTransformRequest(c){this._transformRequestFn=c}}const N=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function G(b){var c=new o.A(3);return c[0]=b[0],c[1]=b[1],c[2]=b[2],c}var j,ee=function(b,c,g){return b[0]=c[0]-g[0],b[1]=c[1]-g[1],b[2]=c[2]-g[2],b};j=new o.A(3),o.A!=Float32Array&&(j[0]=0,j[1]=0,j[2]=0);var q=function(b){var c=b[0],g=b[1];return c*c+g*g};function oe(b){const c=[];if(typeof b=="string")c.push({id:"default",url:b});else if(b&&b.length>0){const g=[];for(const{id:w,url:C}of b){const S=`${w}${C}`;g.indexOf(S)===-1&&(g.push(S),c.push({id:w,url:C}))}}return c}function ue(b,c,g,w,C){if(w)return void b(w);if(C!==Object.values(c).length||C!==Object.values(g).length)return;const S={};for(const I in c){S[I]={};const L=o.h.getImageCanvasContext(g[I]),B=c[I];for(const H in B){const{width:W,height:K,x:re,y:Ce,sdf:xe,pixelRatio:Ee,stretchX:ye,stretchY:ze,content:Je}=B[H];S[I][H]={data:null,pixelRatio:Ee,sdf:xe,stretchX:ye,stretchY:ze,content:Je,spriteData:{width:W,height:K,x:re,y:Ce,context:L}}}}b(null,S)}(function(){var b=new o.A(2);o.A!=Float32Array&&(b[0]=0,b[1]=0)})();class me{constructor(c,g,w,C){this.context=c,this.format=w,this.texture=c.gl.createTexture(),this.update(g,C)}update(c,g,w){const{width:C,height:S}=c,I=!(this.size&&this.size[0]===C&&this.size[1]===S||w),{context:L}=this,{gl:B}=L;if(this.useMipmap=!!(g&&g.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!g||g.premultiply!==!1)),I)this.size=[C,S],c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||o.a(c)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,c):B.texImage2D(B.TEXTURE_2D,0,this.format,C,S,0,this.format,B.UNSIGNED_BYTE,c.data);else{const{x:H,y:W}=w||{x:0,y:0};c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||o.a(c)?B.texSubImage2D(B.TEXTURE_2D,0,H,W,B.RGBA,B.UNSIGNED_BYTE,c):B.texSubImage2D(B.TEXTURE_2D,0,H,W,C,S,B.RGBA,B.UNSIGNED_BYTE,c.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(c,g,w){const{context:C}=this,{gl:S}=C;S.bindTexture(S.TEXTURE_2D,this.texture),w!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(w=S.LINEAR),c!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,c),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,w||c),this.filter=c),g!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,g),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,g),this.wrap=g)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:c}=this.context;c.deleteTexture(this.texture),this.texture=null}}function ie(b){const{userImage:c}=b;return!!(c&&c.render&&c.render())&&(b.data.replace(new Uint8Array(c.data.buffer)),!0)}class fe extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:g,callback:w}of this.requestors)this._notify(g,w);this.requestors=[]}}getImage(c){const g=this.images[c];if(g&&!g.data&&g.spriteData){const w=g.spriteData;g.data=new o.R({width:w.width,height:w.height},w.context.getImageData(w.x,w.y,w.width,w.height).data),g.spriteData=null}return g}addImage(c,g){if(this.images[c])throw new Error(`Image id ${c} already exist, use updateImage instead`);this._validate(c,g)&&(this.images[c]=g)}_validate(c,g){let w=!0;const C=g.data||g.spriteData;return this._validateStretch(g.stretchX,C&&C.width)||(this.fire(new o.j(new Error(`Image "${c}" has invalid "stretchX" value`))),w=!1),this._validateStretch(g.stretchY,C&&C.height)||(this.fire(new o.j(new Error(`Image "${c}" has invalid "stretchY" value`))),w=!1),this._validateContent(g.content,g)||(this.fire(new o.j(new Error(`Image "${c}" has invalid "content" value`))),w=!1),w}_validateStretch(c,g){if(!c)return!0;let w=0;for(const C of c){if(C[0]<w||C[1]<C[0]||g<C[1])return!1;w=C[1]}return!0}_validateContent(c,g){if(!c)return!0;if(c.length!==4)return!1;const w=g.spriteData,C=w&&w.width||g.data.width,S=w&&w.height||g.data.height;return!(c[0]<0||C<c[0]||c[1]<0||S<c[1]||c[2]<0||C<c[2]||c[3]<0||S<c[3]||c[2]<c[0]||c[3]<c[1])}updateImage(c,g,w=!0){const C=this.getImage(c);if(w&&(C.data.width!==g.data.width||C.data.height!==g.data.height))throw new Error(`size mismatch between old image (${C.data.width}x${C.data.height}) and new image (${g.data.width}x${g.data.height}).`);g.version=C.version+1,this.images[c]=g,this.updatedImages[c]=!0}removeImage(c){const g=this.images[c];delete this.images[c],delete this.patterns[c],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,g){let w=!0;if(!this.isLoaded())for(const C of c)this.images[C]||(w=!1);this.isLoaded()||w?this._notify(c,g):this.requestors.push({ids:c,callback:g})}_notify(c,g){const w={};for(const C of c){let S=this.getImage(C);S||(this.fire(new o.k("styleimagemissing",{id:C})),S=this.getImage(C)),S?w[C]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:o.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}g(null,w)}getPixelSize(){const{width:c,height:g}=this.atlasImage;return{width:c,height:g}}getPattern(c){const g=this.patterns[c],w=this.getImage(c);if(!w)return null;if(g&&g.position.version===w.version)return g.position;if(g)g.position.version=w.version;else{const C={w:w.data.width+2,h:w.data.height+2,x:0,y:0},S=new o.I(C,w);this.patterns[c]={bin:C,position:S}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const g=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new me(c,this.atlasImage,g.RGBA),this.atlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const S in this.patterns)c.push(this.patterns[S].bin);const{w:g,h:w}=o.p(c),C=this.atlasImage;C.resize({width:g||1,height:w||1});for(const S in this.patterns){const{bin:I}=this.patterns[S],L=I.x+1,B=I.y+1,H=this.getImage(S).data,W=H.width,K=H.height;o.R.copy(H,C,{x:0,y:0},{x:L,y:B},{width:W,height:K}),o.R.copy(H,C,{x:0,y:K-1},{x:L,y:B-1},{width:W,height:1}),o.R.copy(H,C,{x:0,y:0},{x:L,y:B+K},{width:W,height:1}),o.R.copy(H,C,{x:W-1,y:0},{x:L-1,y:B},{width:1,height:K}),o.R.copy(H,C,{x:0,y:0},{x:L+W,y:B},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const g of c){if(this.callbackDispatchedThisFrame[g])continue;this.callbackDispatchedThisFrame[g]=!0;const w=this.getImage(g);w||o.w(`Image with ID: "${g}" was not found`),ie(w)&&this.updateImage(g,w)}}}const ke=1e20;function et(b,c,g,w,C,S,I,L,B){for(let H=c;H<c+w;H++)Xe(b,g*S+H,S,C,I,L,B);for(let H=g;H<g+C;H++)Xe(b,H*S+c,1,w,I,L,B)}function Xe(b,c,g,w,C,S,I){S[0]=0,I[0]=-ke,I[1]=ke,C[0]=b[c];for(let L=1,B=0,H=0;L<w;L++){C[L]=b[c+L*g];const W=L*L;do{const K=S[B];H=(C[L]-C[K]+W-K*K)/(L-K)/2}while(H<=I[B]&&--B>-1);B++,S[B]=L,I[B]=H,I[B+1]=ke}for(let L=0,B=0;L<w;L++){for(;I[B+1]<L;)B++;const H=S[B],W=L-H;b[c+L*g]=C[H]+W*W}}class ct{constructor(c,g){this.requestManager=c,this.localIdeographFontFamily=g,this.entries={}}setURL(c){this.url=c}getGlyphs(c,g){const w=[];for(const C in c)for(const S of c[C])w.push({stack:C,id:S});o.o(w,({stack:C,id:S},I)=>{let L=this.entries[C];L||(L=this.entries[C]={glyphs:{},requests:{},ranges:{}});let B=L.glyphs[S];if(B!==void 0)return void I(null,{stack:C,id:S,glyph:B});if(B=this._tinySDF(L,C,S),B)return L.glyphs[S]=B,void I(null,{stack:C,id:S,glyph:B});const H=Math.floor(S/256);if(256*H>65535)return void I(new Error("glyphs > 65535 not supported"));if(L.ranges[H])return void I(null,{stack:C,id:S,glyph:B});if(!this.url)return void I(new Error("glyphsUrl is not set"));let W=L.requests[H];W||(W=L.requests[H]=[],ct.loadGlyphRange(C,H,this.url,this.requestManager,(K,re)=>{if(re){for(const Ce in re)this._doesCharSupportLocalGlyph(+Ce)||(L.glyphs[+Ce]=re[+Ce]);L.ranges[H]=!0}for(const Ce of W)Ce(K,re);delete L.requests[H]})),W.push((K,re)=>{K?I(K):re&&I(null,{stack:C,id:S,glyph:re[S]||null})})},(C,S)=>{if(C)g(C);else if(S){const I={};for(const{stack:L,id:B,glyph:H}of S)(I[L]||(I[L]={}))[B]=H&&{id:H.id,bitmap:H.bitmap.clone(),metrics:H.metrics};g(null,I)}})}_doesCharSupportLocalGlyph(c){return!!this.localIdeographFontFamily&&(o.u["CJK Unified Ideographs"](c)||o.u["Hangul Syllables"](c)||o.u.Hiragana(c)||o.u.Katakana(c))}_tinySDF(c,g,w){const C=this.localIdeographFontFamily;if(!C||!this._doesCharSupportLocalGlyph(w))return;let S=c.tinySDF;if(!S){let L="400";/bold/i.test(g)?L="900":/medium/i.test(g)?L="500":/light/i.test(g)&&(L="200"),S=c.tinySDF=new ct.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:C,fontWeight:L})}const I=S.draw(String.fromCharCode(w));return{id:w,bitmap:new o.q({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}ct.loadGlyphRange=function(b,c,g,w,C){const S=256*c,I=S+255,L=w.transformRequest(g.replace("{fontstack}",b).replace("{range}",`${S}-${I}`),F.Glyphs);o.l(L,(B,H)=>{if(B)C(B);else if(H){const W={};for(const K of o.n(H))W[K.id]=K;C(null,W)}})},ct.TinySDF=class{constructor({fontSize:b=24,buffer:c=3,radius:g=8,cutoff:w=.25,fontFamily:C="sans-serif",fontWeight:S="normal",fontStyle:I="normal"}={}){this.buffer=c,this.cutoff=w,this.radius=g;const L=this.size=b+4*c,B=this._createCanvas(L),H=this.ctx=B.getContext("2d",{willReadFrequently:!0});H.font=`${I} ${S} ${b}px ${C}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(b){const c=document.createElement("canvas");return c.width=c.height=b,c}draw(b){const{width:c,actualBoundingBoxAscent:g,actualBoundingBoxDescent:w,actualBoundingBoxLeft:C,actualBoundingBoxRight:S}=this.ctx.measureText(b),I=Math.ceil(g),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-C))),B=Math.min(this.size-this.buffer,I+Math.ceil(w)),H=L+2*this.buffer,W=B+2*this.buffer,K=Math.max(H*W,0),re=new Uint8ClampedArray(K),Ce={data:re,width:H,height:W,glyphWidth:L,glyphHeight:B,glyphTop:I,glyphLeft:0,glyphAdvance:c};if(L===0||B===0)return Ce;const{ctx:xe,buffer:Ee,gridInner:ye,gridOuter:ze}=this;xe.clearRect(Ee,Ee,L,B),xe.fillText(b,Ee,Ee+I);const Je=xe.getImageData(Ee,Ee,L,B);ze.fill(ke,0,K),ye.fill(0,0,K);for(let Me=0;Me<B;Me++)for(let Ue=0;Ue<L;Ue++){const it=Je.data[4*(Me*L+Ue)+3]/255;if(it===0)continue;const nt=(Me+Ee)*H+Ue+Ee;if(it===1)ze[nt]=0,ye[nt]=ke;else{const vt=.5-it;ze[nt]=vt>0?vt*vt:0,ye[nt]=vt<0?vt*vt:0}}et(ze,0,0,H,W,H,this.f,this.v,this.z),et(ye,Ee,Ee,L,B,H,this.f,this.v,this.z);for(let Me=0;Me<K;Me++){const Ue=Math.sqrt(ze[Me])-Math.sqrt(ye[Me]);re[Me]=Math.round(255-255*(Ue/this.radius+this.cutoff))}return Ce}};class pt{constructor(){this.specification=o.v.light.position}possiblyEvaluate(c,g){return o.z(c.expression.evaluate(g))}interpolate(c,g,w){return{x:o.B.number(c.x,g.x,w),y:o.B.number(c.y,g.y,w),z:o.B.number(c.z,g.z,w)}}}let Ge;class Ye extends o.E{constructor(c){super(),Ge=Ge||new o.r({anchor:new o.D(o.v.light.anchor),position:new pt,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(Ge),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,g={}){if(!this._validate(o.t,c,g))for(const w in c){const C=c[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),C):this._transitionable.setValue(w,C)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,g,w){return(!w||w.validate!==!1)&&o.x(this,c.call(o.y,o.e({value:g,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}}class ht{constructor(c,g){this.width=c,this.height=g,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(c,g){const w=c.join(",")+String(g);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(c,g)),this.dashEntry[w]}getDashRanges(c,g,w){const C=[];let S=c.length%2==1?-c[c.length-1]*w:0,I=c[0]*w,L=!0;C.push({left:S,right:I,isDash:L,zeroLength:c[0]===0});let B=c[0];for(let H=1;H<c.length;H++){L=!L;const W=c[H];S=B*w,B+=W,I=B*w,C.push({left:S,right:I,isDash:L,zeroLength:W===0})}return C}addRoundDash(c,g,w){const C=g/2;for(let S=-w;S<=w;S++){const I=this.width*(this.nextRow+w+S);let L=0,B=c[L];for(let H=0;H<this.width;H++){H/B.right>1&&(B=c[++L]);const W=Math.abs(H-B.left),K=Math.abs(H-B.right),re=Math.min(W,K);let Ce;const xe=S/w*(C+1);if(B.isDash){const Ee=C-Math.abs(xe);Ce=Math.sqrt(re*re+Ee*Ee)}else Ce=C-Math.sqrt(re*re+xe*xe);this.data[I+H]=Math.max(0,Math.min(255,Ce+128))}}}addRegularDash(c){for(let L=c.length-1;L>=0;--L){const B=c[L],H=c[L+1];B.zeroLength?c.splice(L,1):H&&H.isDash===B.isDash&&(H.left=B.left,c.splice(L,1))}const g=c[0],w=c[c.length-1];g.isDash===w.isDash&&(g.left=w.left-this.width,w.right=g.right+this.width);const C=this.width*this.nextRow;let S=0,I=c[S];for(let L=0;L<this.width;L++){L/I.right>1&&(I=c[++S]);const B=Math.abs(L-I.left),H=Math.abs(L-I.right),W=Math.min(B,H);this.data[C+L]=Math.max(0,Math.min(255,(I.isDash?W:-W)+128))}}addDash(c,g){const w=g?7:0,C=2*w+1;if(this.nextRow+C>this.height)return o.w("LineAtlas out of space"),null;let S=0;for(let L=0;L<c.length;L++)S+=c[L];if(S!==0){const L=this.width/S,B=this.getDashRanges(c,this.width,L);g?this.addRoundDash(B,L,w):this.addRegularDash(B)}const I={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:S};return this.nextRow+=C,this.dirty=!0,I}bind(c){const g=c.gl;this.texture?(g.bindTexture(g.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,g.texSubImage2D(g.TEXTURE_2D,0,0,0,this.width,this.height,g.ALPHA,g.UNSIGNED_BYTE,this.data))):(this.texture=g.createTexture(),g.bindTexture(g.TEXTURE_2D,this.texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texImage2D(g.TEXTURE_2D,0,g.ALPHA,this.width,this.height,0,g.ALPHA,g.UNSIGNED_BYTE,this.data))}}class Be{constructor(c,g,w){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=w;const C=this.workerPool.acquire(w);for(let S=0;S<C.length;S++){const I=new o.C(C[S],g,w);I.name=`Worker ${S}`,this.actors.push(I)}if(!this.actors.length)throw new Error("No actors found")}broadcast(c,g,w){o.o(this.actors,(C,S)=>{C.send(c,g,S)},w=w||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(c=!0){this.actors.forEach(g=>{g.remove()}),this.actors=[],c&&this.workerPool.release(this.id)}}function ce(b,c,g){const w=function(C,S){if(C)return g(C);if(S){const I=o.F(o.e(S,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);S.vector_layers&&(I.vectorLayers=S.vector_layers,I.vectorLayerIds=I.vectorLayers.map(L=>L.id)),g(null,I)}};return b.url?o.f(c.transformRequest(b.url,F.Source),w):o.h.frame(()=>w(null,b))}class he{constructor(c,g){c&&(g?this.setSouthWest(c).setNorthEast(g):Array.isArray(c)&&(c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1])))}setNorthEast(c){return this._ne=c instanceof o.L?new o.L(c.lng,c.lat):o.L.convert(c),this}setSouthWest(c){return this._sw=c instanceof o.L?new o.L(c.lng,c.lat):o.L.convert(c),this}extend(c){const g=this._sw,w=this._ne;let C,S;if(c instanceof o.L)C=c,S=c;else{if(!(c instanceof he))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(he.convert(c)):this.extend(o.L.convert(c)):c&&("lng"in c||"lon"in c)&&"lat"in c?this.extend(o.L.convert(c)):this;if(C=c._sw,S=c._ne,!C||!S)return this}return g||w?(g.lng=Math.min(C.lng,g.lng),g.lat=Math.min(C.lat,g.lat),w.lng=Math.max(S.lng,w.lng),w.lat=Math.max(S.lat,w.lat)):(this._sw=new o.L(C.lng,C.lat),this._ne=new o.L(S.lng,S.lat)),this}getCenter(){return new o.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.L(this.getWest(),this.getNorth())}getSouthEast(){return new o.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:g,lat:w}=o.L.convert(c);let C=this._sw.lng<=g&&g<=this._ne.lng;return this._sw.lng>this._ne.lng&&(C=this._sw.lng>=g&&g>=this._ne.lng),this._sw.lat<=w&&w<=this._ne.lat&&C}static convert(c){return c instanceof he?c:c&&new he(c)}static fromLngLat(c,g=0){const w=360*g/40075017,C=w/Math.cos(Math.PI/180*c.lat);return new he(new o.L(c.lng-C,c.lat-w),new o.L(c.lng+C,c.lat+w))}}class ve{constructor(c,g,w){this.bounds=he.convert(this.validateBounds(c)),this.minzoom=g||0,this.maxzoom=w||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const g=Math.pow(2,c.z),w=Math.floor(o.G(this.bounds.getWest())*g),C=Math.floor(o.H(this.bounds.getNorth())*g),S=Math.ceil(o.G(this.bounds.getEast())*g),I=Math.ceil(o.H(this.bounds.getSouth())*g);return c.x>=w&&c.x<S&&c.y>=C&&c.y<I}}class _e extends o.E{constructor(c,g,w,C){if(super(),this.load=()=>{this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ce(this._options,this.map._requestManager,(S,I)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),S?this.fire(new o.j(S)):I&&(o.e(this,I),I.bounds&&(this.tileBounds=new ve(I.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>o.e({},this._options),this.id=c,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.F(g,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},g),this._collectResourceTiming=g.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C)}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.cancel(),c(),this.load()}setTiles(c){return this.setSourceProperty(()=>{this._options.tiles=c}),this}setUrl(c){return this.setSourceProperty(()=>{this.url=c,this._options.url=c}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(c,g){const w=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(w,F.Tile),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function S(I,L){return delete c.request,c.aborted?g(null):I&&I.status!==404?g(I):(L&&L.resourceTiming&&(c.resourceTiming=L.resourceTiming),this.map._refreshExpiredTiles&&L&&c.setExpiryData(L),c.loadVectorData(L,this.map.painter),g(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}C.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired"?c.state==="loading"?c.reloadCallback=g:c.request=c.actor.send("reloadTile",C,S.bind(this)):(c.actor=this.dispatcher.getActor(),c.request=c.actor.send("loadTile",C,S.bind(this)))}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id},void 0)}unloadTile(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Fe extends o.E{constructor(c,g,w,C){super(),this.id=c,this.dispatcher=w,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},g),o.e(this,o.F(g,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ce(this._options,this.map._requestManager,(c,g)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new o.j(c)):g&&(o.e(this,g),g.bounds&&(this.tileBounds=new ve(g.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.cancel(),c(),this.load()}setTiles(c){return this.setSourceProperty(()=>{this._options.tiles=c}),this}serialize(){return o.e({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,g){const w=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);c.request=M.getImage(this.map._requestManager.transformRequest(w,F.Tile),(C,S,I)=>{if(delete c.request,c.aborted)c.state="unloaded",g(null);else if(C)c.state="errored",g(C);else if(S){this.map._refreshExpiredTiles&&I&&c.setExpiryData(I);const L=this.map.painter.context,B=L.gl;c.texture=this.map.painter.getTileTexture(S.width),c.texture?c.texture.update(S,{useMipmap:!0}):(c.texture=new me(L,S,B.RGBA,{useMipmap:!0}),c.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),L.extTextureFilterAnisotropic&&B.texParameterf(B.TEXTURE_2D,L.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L.extTextureFilterAnisotropicMax)),c.state="loaded",g(null)}},this.map._refreshExpiredTiles)}abortTile(c,g){c.request&&(c.request.cancel(),delete c.request),g()}unloadTile(c,g){c.texture&&this.map.painter.saveTileTexture(c.texture),g()}hasTransition(){return!1}}class qe extends Fe{constructor(c,g,w,C){super(c,g,w,C),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},g),this.encoding=g.encoding||"mapbox",this.redFactor=g.redFactor,this.greenFactor=g.greenFactor,this.blueFactor=g.blueFactor,this.baseShift=g.baseShift}loadTile(c,g){const w=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(w,F.Tile);function S(I,L){I&&(c.state="errored",g(I)),L&&(c.dem=L,c.needsHillshadePrepare=!0,c.needsTerrainPrepare=!0,c.state="loaded",g(null))}c.neighboringTiles=this._getNeighboringTiles(c.tileID),c.request=M.getImage(C,(I,L,B)=>o._(this,void 0,void 0,function*(){if(delete c.request,c.aborted)c.state="unloaded",g(null);else if(I)c.state="errored",g(I);else if(L){this.map._refreshExpiredTiles&&c.setExpiryData(B);const H=o.a(L)&&o.J()?L:yield function(K){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.K()){const re=K.width+2,Ce=K.height+2;try{return new o.R({width:re,height:Ce},yield o.M(K,-1,-1,re,Ce))}catch{}}return o.h.getImageData(K,1)})}(L),W={uid:c.uid,coord:c.tileID,source:this.id,rawImageData:H,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};c.actor&&c.state!=="expired"||(c.actor=this.dispatcher.getActor(),c.actor.send("loadDEMTile",W,S))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(c){const g=c.canonical,w=Math.pow(2,g.z),C=(g.x-1+w)%w,S=g.x===0?c.wrap-1:c.wrap,I=(g.x+1+w)%w,L=g.x+1===w?c.wrap+1:c.wrap,B={};return B[new o.O(c.overscaledZ,S,g.z,C,g.y).key]={backfilled:!1},B[new o.O(c.overscaledZ,L,g.z,I,g.y).key]={backfilled:!1},g.y>0&&(B[new o.O(c.overscaledZ,S,g.z,C,g.y-1).key]={backfilled:!1},B[new o.O(c.overscaledZ,c.wrap,g.z,g.x,g.y-1).key]={backfilled:!1},B[new o.O(c.overscaledZ,L,g.z,I,g.y-1).key]={backfilled:!1}),g.y+1<w&&(B[new o.O(c.overscaledZ,S,g.z,C,g.y+1).key]={backfilled:!1},B[new o.O(c.overscaledZ,c.wrap,g.z,g.x,g.y+1).key]={backfilled:!1},B[new o.O(c.overscaledZ,L,g.z,I,g.y+1).key]={backfilled:!1}),B}unloadTile(c){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&c.actor.send("removeDEMTile",{uid:c.uid,source:this.id})}}class at extends o.E{constructor(c,g,w,C){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>o.e({},this._options,{type:this.type,data:this._data}),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=w.getActor(),this.setEventedParent(C),this._data=g.data,this._options=o.e({},g),this._collectResourceTiming=g.collectResourceTiming,g.maxzoom!==void 0&&(this.maxzoom=g.maxzoom),g.type&&(this.type=g.type),g.attribution&&(this.attribution=g.attribution),this.promoteId=g.promoteId;const S=o.N/this.tileSize;this.workerOptions=o.e({source:this.id,cluster:g.cluster||!1,geojsonVtOptions:{buffer:(g.buffer!==void 0?g.buffer:128)*S,tolerance:(g.tolerance!==void 0?g.tolerance:.375)*S,extent:o.N,maxZoom:this.maxzoom,lineMetrics:g.lineMetrics||!1,generateId:g.generateId||!1},superclusterOptions:{maxZoom:g.clusterMaxZoom!==void 0?g.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,g.clusterMinPoints||2),extent:o.N,radius:(g.clusterRadius||50)*S,log:!1,generateId:g.generateId||!1},clusterProperties:g.clusterProperties,filter:g.filter},g.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(c){this.map=c,this.load()}setData(c){return this._data=c,this._updateWorkerData(),this}updateData(c){return this._updateWorkerData(c),this}setClusterOptions(c){return this.workerOptions.cluster=c.cluster,c&&(c.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=c.clusterRadius),c.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=c.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(c,g){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:c,source:this.id},g),this}getClusterChildren(c,g){return this.actor.send("geojson.getClusterChildren",{clusterId:c,source:this.id},g),this}getClusterLeaves(c,g,w,C){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:c,limit:g,offset:w},C),this}_updateWorkerData(c){const g=o.e({},this.workerOptions);c?g.dataDiff=c:typeof this._data=="string"?(g.request=this.map._requestManager.transformRequest(o.h.resolveURL(this._data),F.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,g,(w,C)=>{if(this._pendingLoads--,this._removed||C&&C.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let S=null;if(C&&C.resourceTiming&&C.resourceTiming[this.id]&&(S=C.resourceTiming[this.id].slice(0)),w)return void this.fire(new o.j(w));const I={dataType:"source"};this._collectResourceTiming&&S&&S.length>0&&o.e(I,{resourceTiming:S}),this.fire(new o.k("data",Object.assign(Object.assign({},I),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},I),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(c,g){const w=c.actor?"reloadTile":"loadTile";c.actor=this.actor;const C={type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.request=this.actor.send(w,C,(S,I)=>(delete c.request,c.unloadVectorData(),c.aborted?g(null):S?g(S):(c.loadVectorData(I,this.map.painter,w==="reloadTile"),g(null))))}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.aborted=!0}unloadTile(c){c.unloadVectorData(),this.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var ot=o.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Qe extends o.E{constructor(c,g,w,C){super(),this.load=(S,I)=>{this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=M.getImage(this.map._requestManager.transformRequest(this.url,F.Image),(L,B)=>{this._request=null,this._loaded=!0,L?this.fire(new o.j(L)):B&&(this.image=B,S&&(this.coordinates=S),I&&I(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const S=this.map.painter.context,I=S.gl;this.boundsBuffer||(this.boundsBuffer=S.createVertexBuffer(this._boundsArray,ot.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new me(S,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE));let L=!1;for(const B in this.tiles){const H=this.tiles[B];H.state!=="loaded"&&(H.state="loaded",H.texture=this.texture,L=!0)}L&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=c,this.dispatcher=w,this.coordinates=g.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=g}loaded(){return this._loaded}updateImage(c){return c.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=c.url,this.load(c.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(c){this.coordinates=c;const g=c.map(o.U.fromLngLat);this.tileID=function(C){let S=1/0,I=1/0,L=-1/0,B=-1/0;for(const re of C)S=Math.min(S,re.x),I=Math.min(I,re.y),L=Math.max(L,re.x),B=Math.max(B,re.y);const H=Math.max(L-S,B-I),W=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),K=Math.pow(2,W);return new o.W(W,Math.floor((S+L)/2*K),Math.floor((I+B)/2*K))}(g),this.minzoom=this.maxzoom=this.tileID.z;const w=g.map(C=>this.tileID.getTilePoint(C)._round());return this._boundsArray=new o.V,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,o.N,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,o.N),this._boundsArray.emplaceBack(w[2].x,w[2].y,o.N,o.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(c,g){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},g(null)):(c.state="errored",g(null))}hasTransition(){return!1}}class Lt extends Qe{constructor(c,g,w,C){super(c,g,w,C),this.load=()=>{this._loaded=!1;const S=this.options;this.urls=[];for(const I of S.urls)this.urls.push(this.map._requestManager.transformRequest(I,F.Source).url);o.X(this.urls,(I,L)=>{this._loaded=!0,I?this.fire(new o.j(I)):L&&(this.video=L,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const S=this.map.painter.context,I=S.gl;this.boundsBuffer||(this.boundsBuffer=S.createVertexBuffer(this._boundsArray,ot.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new me(S,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE));let L=!1;for(const B in this.tiles){const H=this.tiles[B];H.state!=="loaded"&&(H.state="loaded",H.texture=this.texture,L=!0)}L&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=g}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){if(this.video){const g=this.video.seekable;c<g.start(0)||c>g.end(0)?this.fire(new o.j(new o.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${g.start(0)} and ${g.end(0)}-second mark.`))):this.video.currentTime=c}}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Ot extends Qe{constructor(c,g,w,C){super(c,g,w,C),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let S=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,S=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,S=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const I=this.map.painter.context,L=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,ot.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture?(S||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new me(I,this.canvas,L.RGBA,{premultiply:!0});let B=!1;for(const H in this.tiles){const W=this.tiles[H];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture,B=!0)}B&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),g.coordinates?Array.isArray(g.coordinates)&&g.coordinates.length===4&&!g.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(I=>typeof I!="number"))||this.fire(new o.j(new o.Y(`sources.${c}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.Y(`sources.${c}`,null,'missing required property "coordinates"'))),g.animate&&typeof g.animate!="boolean"&&this.fire(new o.j(new o.Y(`sources.${c}`,null,'optional "animate" property must be a boolean value'))),g.canvas?typeof g.canvas=="string"||g.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.Y(`sources.${c}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.Y(`sources.${c}`,null,'missing required property "canvas"'))),this.options=g,this.animate=g.animate===void 0||g.animate}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}}const er={},Yt=b=>{switch(b){case"geojson":return at;case"image":return Qe;case"raster":return Fe;case"raster-dem":return qe;case"vector":return _e;case"video":return Lt;case"canvas":return Ot}return er[b]};function Qt(b,c){const g=o.Z();return o.$(g,g,[1,1,0]),o.a0(g,g,[.5*b.width,.5*b.height,1]),o.a1(g,g,b.calculatePosMatrix(c.toUnwrapped()))}function qt(b,c,g,w,C,S){const I=function(K,re,Ce){if(K)for(const xe of K){const Ee=re[xe];if(Ee&&Ee.source===Ce&&Ee.type==="fill-extrusion")return!0}else for(const xe in re){const Ee=re[xe];if(Ee.source===Ce&&Ee.type==="fill-extrusion")return!0}return!1}(C&&C.layers,c,b.id),L=S.maxPitchScaleFactor(),B=b.tilesIn(w,L,I);B.sort(Et);const H=[];for(const K of B)H.push({wrappedTileID:K.tileID.wrapped().key,queryResults:K.tile.queryRenderedFeatures(c,g,b._state,K.queryGeometry,K.cameraQueryGeometry,K.scale,C,S,L,Qt(b.transform,K.tileID))});const W=function(K){const re={},Ce={};for(const xe of K){const Ee=xe.queryResults,ye=xe.wrappedTileID,ze=Ce[ye]=Ce[ye]||{};for(const Je in Ee){const Me=Ee[Je],Ue=ze[Je]=ze[Je]||{},it=re[Je]=re[Je]||[];for(const nt of Me)Ue[nt.featureIndex]||(Ue[nt.featureIndex]=!0,it.push(nt))}}return re}(H);for(const K in W)W[K].forEach(re=>{const Ce=re.feature,xe=b.getFeatureState(Ce.layer["source-layer"],Ce.id);Ce.source=Ce.layer.source,Ce.layer["source-layer"]&&(Ce.sourceLayer=Ce.layer["source-layer"]),Ce.state=xe});return W}function Et(b,c){const g=b.tileID,w=c.tileID;return g.overscaledZ-w.overscaledZ||g.canonical.y-w.canonical.y||g.wrap-w.wrap||g.canonical.x-w.canonical.x}class hr{constructor(c,g){this.timeAdded=0,this.fadeEndTime=0,this.tileID=c,this.uid=o.a2(),this.uses=0,this.tileSize=g,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(c){const g=c+this.timeAdded;g<this.fadeEndTime||(this.fadeEndTime=g)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(c){this.demTexture&&c.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(c,g,w){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=function(C,S){const I={};if(!S)return I;for(const L of C){const B=L.layerIds.map(H=>S.getLayer(H)).filter(Boolean);if(B.length!==0){L.layers=B,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map(H=>B.filter(W=>W.id===H)[0]));for(const H of B)I[H.id]=L}}return I}(c.buckets,g.style),this.hasSymbolBuckets=!1;for(const C in this.buckets){const S=this.buckets[C];if(S instanceof o.a4){if(this.hasSymbolBuckets=!0,!w)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const C in this.buckets){const S=this.buckets[C];if(S instanceof o.a4&&S.hasRTLText){this.hasRTLText=!0,o.a5();break}}this.queryPadding=0;for(const C in this.buckets){const S=this.buckets[C];this.queryPadding=Math.max(this.queryPadding,g.style.getLayer(C).queryRadius(S))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage)}else this.collisionBoxArray=new o.a3}unloadVectorData(){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(c){return this.buckets[c.id]}upload(c){for(const w in this.buckets){const C=this.buckets[w];C.uploadPending()&&C.upload(c)}const g=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new me(c,this.imageAtlas.image,g.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new me(c,this.glyphAtlasImage,g.ALPHA),this.glyphAtlasImage=null)}prepare(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)}queryRenderedFeatures(c,g,w,C,S,I,L,B,H,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:C,cameraQueryGeometry:S,scale:I,tileSize:this.tileSize,pixelPosMatrix:W,transform:B,params:L,queryPadding:this.queryPadding*H},c,g,w):{}}querySourceFeatures(c,g){const w=this.latestFeatureIndex;if(!w||!w.rawTileData)return;const C=w.loadVTLayers(),S=g&&g.sourceLayer?g.sourceLayer:"",I=C._geojsonTileLayer||C[S];if(!I)return;const L=o.a6(g&&g.filter),{z:B,x:H,y:W}=this.tileID.canonical,K={z:B,x:H,y:W};for(let re=0;re<I.length;re++){const Ce=I.feature(re);if(L.needGeometry){const ye=o.a7(Ce,!0);if(!L.filter(new o.a8(this.tileID.overscaledZ),ye,this.tileID.canonical))continue}else if(!L.filter(new o.a8(this.tileID.overscaledZ),Ce))continue;const xe=w.getId(Ce,S),Ee=new o.a9(Ce,B,H,W,xe);Ee.tile=K,c.push(Ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){const g=this.expirationTime;if(c.cacheControl){const w=o.aa(c.cacheControl);w["max-age"]&&(this.expirationTime=Date.now()+1e3*w["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const w=Date.now();let C=!1;if(this.expirationTime>w)C=!1;else if(g)if(this.expirationTime<g)C=!0;else{const S=this.expirationTime-g;S?this.expirationTime=w+Math.max(S,3e4):C=!0}else C=!0;C?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(c,g){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(c).length===0)return;const w=this.latestFeatureIndex.loadVTLayers();for(const C in this.buckets){if(!g.style.hasLayer(C))continue;const S=this.buckets[C],I=S.layers[0].sourceLayer||"_geojsonTileLayer",L=w[I],B=c[I];if(!L||!B||Object.keys(B).length===0)continue;S.update(B,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});const H=g&&g.style&&g.style.getLayer(C);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(c){this.symbolFadeHoldUntil=o.h.now()+c}setDependencies(c,g){const w={};for(const C of g)w[C]=!0;this.dependencies[c]=w}hasDependency(c,g){for(const w of c){const C=this.dependencies[w];if(C){for(const S of g)if(C[S])return!0}}return!1}}class rr{constructor(c,g){this.max=c,this.onRemove=g,this.reset()}reset(){for(const c in this.data)for(const g of this.data[c])g.timeout&&clearTimeout(g.timeout),this.onRemove(g.value);return this.data={},this.order=[],this}add(c,g,w){const C=c.wrapped().key;this.data[C]===void 0&&(this.data[C]=[]);const S={value:g,timeout:void 0};if(w!==void 0&&(S.timeout=setTimeout(()=>{this.remove(c,S)},w)),this.data[C].push(S),this.order.push(C),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(c){return c.wrapped().key in this.data}getAndRemove(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null}_getAndRemoveByKey(c){const g=this.data[c].shift();return g.timeout&&clearTimeout(g.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),g.value}getByKey(c){const g=this.data[c];return g?g[0].value:null}get(c){return this.has(c)?this.data[c.wrapped().key][0].value:null}remove(c,g){if(!this.has(c))return this;const w=c.wrapped().key,C=g===void 0?0:this.data[w].indexOf(g),S=this.data[w][C];return this.data[w].splice(C,1),S.timeout&&clearTimeout(S.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(S.value),this.order.splice(this.order.indexOf(w),1),this}setMaxSize(c){for(this.max=c;this.order.length>this.max;){const g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}filter(c){const g=[];for(const w in this.data)for(const C of this.data[w])c(C.value)||g.push(C);for(const w of g)this.remove(w.value.tileID,w)}}class Ke{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,g,w){const C=String(g);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][C]=this.stateChanges[c][C]||{},o.e(this.stateChanges[c][C],w),this.deletedStates[c]===null){this.deletedStates[c]={};for(const S in this.state[c])S!==C&&(this.deletedStates[c][S]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][C]===null){this.deletedStates[c][C]={};for(const S in this.state[c][C])w[S]||(this.deletedStates[c][C][S]=null)}else for(const S in w)this.deletedStates[c]&&this.deletedStates[c][C]&&this.deletedStates[c][C][S]===null&&delete this.deletedStates[c][C][S]}removeFeatureState(c,g,w){if(this.deletedStates[c]===null)return;const C=String(g);if(this.deletedStates[c]=this.deletedStates[c]||{},w&&g!==void 0)this.deletedStates[c][C]!==null&&(this.deletedStates[c][C]=this.deletedStates[c][C]||{},this.deletedStates[c][C][w]=null);else if(g!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][C])for(w in this.deletedStates[c][C]={},this.stateChanges[c][C])this.deletedStates[c][C][w]=null;else this.deletedStates[c][C]=null;else this.deletedStates[c]=null}getState(c,g){const w=String(g),C=o.e({},(this.state[c]||{})[w],(this.stateChanges[c]||{})[w]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){const S=this.deletedStates[c][g];if(S===null)return{};for(const I in S)delete C[I]}return C}initializeTileState(c,g){c.setFeatureState(this.state,g)}coalesceChanges(c,g){const w={};for(const C in this.stateChanges){this.state[C]=this.state[C]||{};const S={};for(const I in this.stateChanges[C])this.state[C][I]||(this.state[C][I]={}),o.e(this.state[C][I],this.stateChanges[C][I]),S[I]=this.state[C][I];w[C]=S}for(const C in this.deletedStates){this.state[C]=this.state[C]||{};const S={};if(this.deletedStates[C]===null)for(const I in this.state[C])S[I]={},this.state[C][I]={};else for(const I in this.deletedStates[C]){if(this.deletedStates[C][I]===null)this.state[C][I]={};else for(const L of Object.keys(this.deletedStates[C][I]))delete this.state[C][I][L];S[I]=this.state[C][I]}w[C]=w[C]||{},o.e(w[C],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(w).length!==0)for(const C in c)c[C].setFeatureState(w,g)}}class Jt extends o.E{constructor(c,g,w){super(),this.id=c,this.dispatcher=w,this.on("data",C=>{C.dataType==="source"&&C.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&C.dataType==="source"&&C.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((C,S,I,L)=>{const B=new(Yt(S.type))(C,S,I,L);if(B.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${B.id}`);return B})(c,g,w,this),this._tiles={},this._cache=new rr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ke,this._didEmitContent=!1,this._updated=!1}onAdd(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._maxTileCacheZoomLevels=c?c._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(c)}onRemove(c){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(c)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const c in this._tiles){const g=this._tiles[c];if(g.state!=="loaded"&&g.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(c,g){return this._source.loadTile(c,g)}_unloadTile(c){if(this._source.unloadTile)return this._source.unloadTile(c,()=>{})}_abortTile(c){this._source.abortTile&&this._source.abortTile(c,()=>{}),this._source.fire(new o.k("dataabort",{tile:c,coord:c.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const g in this._tiles){const w=this._tiles[g];w.upload(c),w.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(c=>c.tileID).sort(Nr).map(c=>c.key)}getRenderableIds(c){const g=[];for(const w in this._tiles)this._isIdRenderable(w,c)&&g.push(this._tiles[w]);return c?g.sort((w,C)=>{const S=w.tileID,I=C.tileID,L=new o.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),B=new o.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-I.overscaledZ||B.y-L.y||B.x-L.x}).map(w=>w.tileID.key):g.map(w=>w.tileID).sort(Nr).map(w=>w.key)}hasRenderableParent(c){const g=this.findLoadedParent(c,0);return!!g&&this._isIdRenderable(g.tileID.key)}_isIdRenderable(c,g){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(g||!this._tiles[c].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")}}_reloadTile(c,g){const w=this._tiles[c];w&&(w.state!=="loading"&&(w.state=g),this._loadTile(w,this._tileLoaded.bind(this,w,c,g)))}_tileLoaded(c,g,w,C){if(C)return c.state="errored",void(C.status!==404?this._source.fire(new o.j(C,{tile:c})):this.update(this.transform,this.terrain));c.timeAdded=o.h.now(),w==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(g,c),this.getSource().type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),c.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:c,coord:c.tileID}))}_backfillDEM(c){const g=this.getRenderableIds();for(let C=0;C<g.length;C++){const S=g[C];if(c.neighboringTiles&&c.neighboringTiles[S]){const I=this.getTileByID(S);w(c,I),w(I,c)}}function w(C,S){C.needsHillshadePrepare=!0,C.needsTerrainPrepare=!0;let I=S.tileID.canonical.x-C.tileID.canonical.x;const L=S.tileID.canonical.y-C.tileID.canonical.y,B=Math.pow(2,C.tileID.canonical.z),H=S.tileID.key;I===0&&L===0||Math.abs(L)>1||(Math.abs(I)>1&&(Math.abs(I+B)===1?I+=B:Math.abs(I-B)===1&&(I-=B)),S.dem&&C.dem&&(C.dem.backfillBorder(S.dem,I,L),C.neighboringTiles&&C.neighboringTiles[H]&&(C.neighboringTiles[H].backfilled=!0)))}}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._tiles[c]}_retainLoadedChildren(c,g,w,C){for(const S in this._tiles){let I=this._tiles[S];if(C[S]||!I.hasData()||I.tileID.overscaledZ<=g||I.tileID.overscaledZ>w)continue;let L=I.tileID;for(;I&&I.tileID.overscaledZ>g+1;){const H=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[H.key],I&&I.hasData()&&(L=H)}let B=L;for(;B.overscaledZ>g;)if(B=B.scaledTo(B.overscaledZ-1),c[B.key]){C[L.key]=L;break}}}findLoadedParent(c,g){if(c.key in this._loadedParentTiles){const w=this._loadedParentTiles[c.key];return w&&w.tileID.overscaledZ>=g?w:null}for(let w=c.overscaledZ-1;w>=g;w--){const C=c.scaledTo(w),S=this._getLoadedTile(C);if(S)return S}}_getLoadedTile(c){const g=this._tiles[c.key];return g&&g.hasData()?g:this._cache.getByKey(c.wrapped().key)}updateCacheSize(c){const g=Math.ceil(c.width/this._source.tileSize)+1,w=Math.ceil(c.height/this._source.tileSize)+1,C=Math.floor(g*w*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._cache.setMaxSize(S)}handleWrapJump(c){const g=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,g){const w={};for(const C in this._tiles){const S=this._tiles[C];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+g),w[S.tileID.key]=S}this._tiles=w;for(const C in this._timers)clearTimeout(this._timers[C]),delete this._timers[C];for(const C in this._tiles)this._setTileReloadTimer(C,this._tiles[C])}}update(c,g){if(this.transform=c,this.terrain=g,!this._sourceLoaded||this._paused)return;let w;this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?w=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(W=>new o.O(W.canonical.z,W.wrap,W.canonical.z,W.canonical.x,W.canonical.y)):(w=c.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:g}),this._source.hasTile&&(w=w.filter(W=>this._source.hasTile(W)))):w=[];const C=c.coveringZoomLevel(this._source),S=Math.max(C-Jt.maxOverzooming,this._source.minzoom),I=Math.max(C+Jt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const W={};for(const K of w)if(K.canonical.z>this._source.minzoom){const re=K.scaledTo(K.canonical.z-1);W[re.key]=re;const Ce=K.scaledTo(Math.max(this._source.minzoom,Math.min(K.canonical.z,5)));W[Ce.key]=Ce}w=w.concat(Object.values(W))}const L=w.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,L&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=this._updateRetainedTiles(w,C);if(vr(this._source.type)){const W={},K={},re=Object.keys(B),Ce=o.h.now();for(const xe of re){const Ee=B[xe],ye=this._tiles[xe];if(!ye||ye.fadeEndTime!==0&&ye.fadeEndTime<=Ce)continue;const ze=this.findLoadedParent(Ee,S);ze&&(this._addTile(ze.tileID),W[ze.tileID.key]=ze.tileID),K[xe]=Ee}this._retainLoadedChildren(K,C,I,B);for(const xe in W)B[xe]||(this._coveredTiles[xe]=!0,B[xe]=W[xe]);if(g){const xe={},Ee={};for(const ye of w)this._tiles[ye.key].hasData()?xe[ye.key]=ye:Ee[ye.key]=ye;for(const ye in Ee){const ze=Ee[ye].children(this._source.maxzoom);this._tiles[ze[0].key]&&this._tiles[ze[1].key]&&this._tiles[ze[2].key]&&this._tiles[ze[3].key]&&(xe[ze[0].key]=B[ze[0].key]=ze[0],xe[ze[1].key]=B[ze[1].key]=ze[1],xe[ze[2].key]=B[ze[2].key]=ze[2],xe[ze[3].key]=B[ze[3].key]=ze[3],delete Ee[ye])}for(const ye in Ee){const ze=this.findLoadedParent(Ee[ye],this._source.minzoom);if(ze){xe[ze.tileID.key]=B[ze.tileID.key]=ze.tileID;for(const Je in xe)xe[Je].isChildOf(ze.tileID)&&delete xe[Je]}}for(const ye in this._tiles)xe[ye]||(this._coveredTiles[ye]=!0)}}for(const W in B)this._tiles[W].clearFadeHold();const H=o.ab(this._tiles,B);for(const W of H){const K=this._tiles[W];K.hasSymbolBuckets&&!K.holdingForFade()?K.setHoldDuration(this.map._fadeDuration):K.hasSymbolBuckets&&!K.symbolFadeFinished()||this._removeTile(W)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)}_updateRetainedTiles(c,g){const w={},C={},S=Math.max(g-Jt.maxOverzooming,this._source.minzoom),I=Math.max(g+Jt.maxUnderzooming,this._source.minzoom),L={};for(const B of c){const H=this._addTile(B);w[B.key]=B,H.hasData()||g<this._source.maxzoom&&(L[B.key]=B)}this._retainLoadedChildren(L,g,I,w);for(const B of c){let H=this._tiles[B.key];if(H.hasData())continue;if(g+1>this._source.maxzoom){const K=B.children(this._source.maxzoom)[0],re=this.getTile(K);if(re&&re.hasData()){w[K.key]=K;continue}}else{const K=B.children(this._source.maxzoom);if(w[K[0].key]&&w[K[1].key]&&w[K[2].key]&&w[K[3].key])continue}let W=H.wasRequested();for(let K=B.overscaledZ-1;K>=S;--K){const re=B.scaledTo(K);if(C[re.key])break;if(C[re.key]=!0,H=this.getTile(re),!H&&W&&(H=this._addTile(re)),H){const Ce=H.hasData();if((W||Ce)&&(w[re.key]=re),W=H.wasRequested(),Ce)break}}}return w}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const c in this._tiles){const g=[];let w,C=this._tiles[c].tileID;for(;C.overscaledZ>0;){if(C.key in this._loadedParentTiles){w=this._loadedParentTiles[C.key];break}g.push(C.key);const S=C.scaledTo(C.overscaledZ-1);if(w=this._getLoadedTile(S),w)break;C=S}for(const S of g)this._loadedParentTiles[S]=w}}_addTile(c){let g=this._tiles[c.key];if(g)return g;g=this._cache.getAndRemove(c),g&&(this._setTileReloadTimer(c.key,g),g.tileID=c,this._state.initializeTileState(g,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,g)));const w=g;return g||(g=new hr(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(g,this._tileLoaded.bind(this,g,c.key,g.state))),g.uses++,this._tiles[c.key]=g,w||this._source.fire(new o.k("dataloading",{tile:g,coord:g.tileID,dataType:"source"})),g}_setTileReloadTimer(c,g){c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);const w=g.getExpiryTimeout();w&&(this._timers[c]=setTimeout(()=>{this._reloadTile(c,"expired"),delete this._timers[c]},w))}_removeTile(c){const g=this._tiles[c];g&&(g.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),g.uses>0||(g.hasData()&&g.state!=="reloading"?this._cache.add(g.tileID,g,g.getExpiryTimeout()):(g.aborted=!0,this._abortTile(g),this._unloadTile(g))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c in this._tiles)this._removeTile(c);this._cache.reset()}tilesIn(c,g,w){const C=[],S=this.transform;if(!S)return C;const I=w?S.getCameraQueryGeometry(c):c,L=c.map(xe=>S.pointCoordinate(xe,this.terrain)),B=I.map(xe=>S.pointCoordinate(xe,this.terrain)),H=this.getIds();let W=1/0,K=1/0,re=-1/0,Ce=-1/0;for(const xe of B)W=Math.min(W,xe.x),K=Math.min(K,xe.y),re=Math.max(re,xe.x),Ce=Math.max(Ce,xe.y);for(let xe=0;xe<H.length;xe++){const Ee=this._tiles[H[xe]];if(Ee.holdingForFade())continue;const ye=Ee.tileID,ze=Math.pow(2,S.zoom-Ee.tileID.overscaledZ),Je=g*Ee.queryPadding*o.N/Ee.tileSize/ze,Me=[ye.getTilePoint(new o.U(W,K)),ye.getTilePoint(new o.U(re,Ce))];if(Me[0].x-Je<o.N&&Me[0].y-Je<o.N&&Me[1].x+Je>=0&&Me[1].y+Je>=0){const Ue=L.map(nt=>ye.getTilePoint(nt)),it=B.map(nt=>ye.getTilePoint(nt));C.push({tile:Ee,tileID:ye,queryGeometry:Ue,cameraQueryGeometry:it,scale:ze})}}return C}getVisibleCoordinates(c){const g=this.getRenderableIds(c).map(w=>this._tiles[w].tileID);for(const w of g)w.posMatrix=this.transform.calculatePosMatrix(w.toUnwrapped());return g}hasTransition(){if(this._source.hasTransition())return!0;if(vr(this._source.type)){const c=o.h.now();for(const g in this._tiles)if(this._tiles[g].fadeEndTime>=c)return!0}return!1}setFeatureState(c,g,w){this._state.updateState(c=c||"_geojsonTileLayer",g,w)}removeFeatureState(c,g,w){this._state.removeFeatureState(c=c||"_geojsonTileLayer",g,w)}getFeatureState(c,g){return this._state.getState(c=c||"_geojsonTileLayer",g)}setDependencies(c,g,w){const C=this._tiles[c];C&&C.setDependencies(g,w)}reloadTilesForDependencies(c,g){for(const w in this._tiles)this._tiles[w].hasDependency(c,g)&&this._reloadTile(w,"reloading");this._cache.filter(w=>!w.hasDependency(c,g))}}function Nr(b,c){const g=Math.abs(2*b.wrap)-+(b.wrap<0),w=Math.abs(2*c.wrap)-+(c.wrap<0);return b.overscaledZ-c.overscaledZ||w-g||c.canonical.y-b.canonical.y||c.canonical.x-b.canonical.x}function vr(b){return b==="raster"||b==="image"||b==="video"}Jt.maxOverzooming=10,Jt.maxUnderzooming=3;const $t="mapboxgl_preloaded_worker_pool";class ui{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<ui.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(g=>{g.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[$t]}numActive(){return Object.keys(this.active).length}}const ds=Math.floor(o.h.hardwareConcurrency/2);let an;function Ir(){return an||(an=new ui),an}ui.workerCount=o.ac(globalThis)?Math.max(Math.min(ds,3),1):1;class Kr{constructor(c,g){this.reset(c,g)}reset(c,g){this.points=c||[],this._distances=[0];for(let w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(g||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=o.ad(c,0,1);let g=1,w=this._distances[g];const C=c*this.paddedLength+this.padding;for(;w<C&&g<this._distances.length;)w=this._distances[++g];const S=g-1,I=this._distances[S],L=w-I,B=L>0?(C-I)/L:0;return this.points[S].mult(1-B).add(this.points[g].mult(B))}}function kn(b,c){let g=!0;return b==="always"||b!=="never"&&c!=="never"||(g=!1),g}class fs{constructor(c,g,w){const C=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(c/w),this.yCellCount=Math.ceil(g/w);for(let I=0;I<this.xCellCount*this.yCellCount;I++)C.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=g,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/g,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,g,w,C,S){this._forEachCell(g,w,C,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(g),this.bboxes.push(w),this.bboxes.push(C),this.bboxes.push(S)}insertCircle(c,g,w,C){this._forEachCell(g-C,w-C,g+C,w+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(g),this.circles.push(w),this.circles.push(C)}_insertBoxCell(c,g,w,C,S,I){this.boxCells[S].push(I)}_insertCircleCell(c,g,w,C,S,I){this.circleCells[S].push(I)}_query(c,g,w,C,S,I,L){if(w<0||c>this.width||C<0||g>this.height)return[];const B=[];if(c<=0&&g<=0&&this.width<=w&&this.height<=C){if(S)return[{key:null,x1:c,y1:g,x2:w,y2:C}];for(let H=0;H<this.boxKeys.length;H++)B.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const W=this.circles[3*H],K=this.circles[3*H+1],re=this.circles[3*H+2];B.push({key:this.circleKeys[H],x1:W-re,y1:K-re,x2:W+re,y2:K+re})}}else this._forEachCell(c,g,w,C,this._queryCell,B,{hitTest:S,overlapMode:I,seenUids:{box:{},circle:{}}},L);return B}query(c,g,w,C){return this._query(c,g,w,C,!1,null)}hitTest(c,g,w,C,S,I){return this._query(c,g,w,C,!0,S,I).length>0}hitTestCircle(c,g,w,C,S){const I=c-w,L=c+w,B=g-w,H=g+w;if(L<0||I>this.width||H<0||B>this.height)return!1;const W=[];return this._forEachCell(I,B,L,H,this._queryCellCircle,W,{hitTest:!0,overlapMode:C,circle:{x:c,y:g,radius:w},seenUids:{box:{},circle:{}}},S),W.length>0}_queryCell(c,g,w,C,S,I,L,B){const{seenUids:H,hitTest:W,overlapMode:K}=L,re=this.boxCells[S];if(re!==null){const xe=this.bboxes;for(const Ee of re)if(!H.box[Ee]){H.box[Ee]=!0;const ye=4*Ee,ze=this.boxKeys[Ee];if(c<=xe[ye+2]&&g<=xe[ye+3]&&w>=xe[ye+0]&&C>=xe[ye+1]&&(!B||B(ze))&&(!W||!kn(K,ze.overlapMode))&&(I.push({key:ze,x1:xe[ye],y1:xe[ye+1],x2:xe[ye+2],y2:xe[ye+3]}),W))return!0}}const Ce=this.circleCells[S];if(Ce!==null){const xe=this.circles;for(const Ee of Ce)if(!H.circle[Ee]){H.circle[Ee]=!0;const ye=3*Ee,ze=this.circleKeys[Ee];if(this._circleAndRectCollide(xe[ye],xe[ye+1],xe[ye+2],c,g,w,C)&&(!B||B(ze))&&(!W||!kn(K,ze.overlapMode))){const Je=xe[ye],Me=xe[ye+1],Ue=xe[ye+2];if(I.push({key:ze,x1:Je-Ue,y1:Me-Ue,x2:Je+Ue,y2:Me+Ue}),W)return!0}}}return!1}_queryCellCircle(c,g,w,C,S,I,L,B){const{circle:H,seenUids:W,overlapMode:K}=L,re=this.boxCells[S];if(re!==null){const xe=this.bboxes;for(const Ee of re)if(!W.box[Ee]){W.box[Ee]=!0;const ye=4*Ee,ze=this.boxKeys[Ee];if(this._circleAndRectCollide(H.x,H.y,H.radius,xe[ye+0],xe[ye+1],xe[ye+2],xe[ye+3])&&(!B||B(ze))&&!kn(K,ze.overlapMode))return I.push(!0),!0}}const Ce=this.circleCells[S];if(Ce!==null){const xe=this.circles;for(const Ee of Ce)if(!W.circle[Ee]){W.circle[Ee]=!0;const ye=3*Ee,ze=this.circleKeys[Ee];if(this._circlesCollide(xe[ye],xe[ye+1],xe[ye+2],H.x,H.y,H.radius)&&(!B||B(ze))&&!kn(K,ze.overlapMode))return I.push(!0),!0}}}_forEachCell(c,g,w,C,S,I,L,B){const H=this._convertToXCellCoord(c),W=this._convertToYCellCoord(g),K=this._convertToXCellCoord(w),re=this._convertToYCellCoord(C);for(let Ce=H;Ce<=K;Ce++)for(let xe=W;xe<=re;xe++)if(S.call(this,c,g,w,C,this.xCellCount*xe+Ce,I,L,B))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,g,w,C,S,I){const L=C-c,B=S-g,H=w+I;return H*H>L*L+B*B}_circleAndRectCollide(c,g,w,C,S,I,L){const B=(I-C)/2,H=Math.abs(c-(C+B));if(H>B+w)return!1;const W=(L-S)/2,K=Math.abs(g-(S+W));if(K>W+w)return!1;if(H<=B||K<=W)return!0;const re=H-B,Ce=K-W;return re*re+Ce*Ce<=w*w}}function Tt(b,c,g,w,C){const S=o.Z();return c?(o.a0(S,S,[1/C,1/C,1]),g||o.ae(S,S,w.angle)):o.a1(S,w.labelPlaneMatrix,b),S}function Ji(b,c,g,w,C){if(c){const S=o.af(b);return o.a0(S,S,[C,C,1]),g||o.ae(S,S,-w.angle),S}return w.glCoordMatrix}function Yr(b,c,g){let w;g?(w=[b.x,b.y,g(b.x,b.y),1],o.ag(w,w,c)):(w=[b.x,b.y,0,1],Se(w,w,c));const C=w[3];return{point:new o.P(w[0]/C,w[1]/C),signedDistanceFromCamera:C}}function ks(b,c){return .5+b/c*.5}function Ls(b,c){const g=b[0]/b[3],w=b[1]/b[3];return g>=-c[0]&&g<=c[0]&&w>=-c[1]&&w<=c[1]}function Ft(b,c,g,w,C,S,I,L,B,H){const W=w?b.textSizeData:b.iconSizeData,K=o.ah(W,g.transform.zoom),re=[256/g.width*2+1,256/g.height*2+1],Ce=w?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;Ce.clear();const xe=b.lineVertexArray,Ee=w?b.text.placedSymbolArray:b.icon.placedSymbolArray,ye=g.transform.width/g.transform.height;let ze=!1;for(let Je=0;Je<Ee.length;Je++){const Me=Ee.get(Je);if(Me.hidden||Me.writingMode===o.ai.vertical&&!ze){ge(Me.numGlyphs,Ce);continue}let Ue;if(ze=!1,H?(Ue=[Me.anchorX,Me.anchorY,H(Me.anchorX,Me.anchorY),1],o.ag(Ue,Ue,c)):(Ue=[Me.anchorX,Me.anchorY,0,1],Se(Ue,Ue,c)),!Ls(Ue,re)){ge(Me.numGlyphs,Ce);continue}const it=ks(g.transform.cameraToCenterDistance,Ue[3]),nt=o.aj(W,K,Me),vt=I?nt/it:nt*it,Ct=new o.P(Me.anchorX,Me.anchorY),xt=Yr(Ct,C,H).point,Pt={projections:{},offsets:{}},ir=wi(Me,vt,!1,L,c,C,S,b.glyphOffsetArray,xe,Ce,xt,Ct,Pt,ye,B,H);ze=ir.useVertical,(ir.notEnoughRoom||ze||ir.needsFlipping&&wi(Me,vt,!0,L,c,C,S,b.glyphOffsetArray,xe,Ce,xt,Ct,Pt,ye,B,H).notEnoughRoom)&&ge(Me.numGlyphs,Ce)}w?b.text.dynamicLayoutVertexBuffer.updateData(Ce):b.icon.dynamicLayoutVertexBuffer.updateData(Ce)}function wr(b,c,g,w,C,S,I,L,B,H,W,K,re){const Ce=L.glyphStartIndex+L.numGlyphs,xe=L.lineStartIndex,Ee=L.lineStartIndex+L.lineLength,ye=c.getoffsetX(L.glyphStartIndex),ze=c.getoffsetX(Ce-1),Je=Y(b*ye,g,w,C,S,I,L.segment,xe,Ee,B,H,W,K,re);if(!Je)return null;const Me=Y(b*ze,g,w,C,S,I,L.segment,xe,Ee,B,H,W,K,re);return Me?{first:Je,last:Me}:null}function yr(b,c,g,w){return b===o.ai.horizontal&&Math.abs(g.y-c.y)>Math.abs(g.x-c.x)*w?{useVertical:!0}:(b===o.ai.vertical?c.y<g.y:c.x>g.x)?{needsFlipping:!0}:null}function wi(b,c,g,w,C,S,I,L,B,H,W,K,re,Ce,xe,Ee){const ye=c/24,ze=b.lineOffsetX*ye,Je=b.lineOffsetY*ye;let Me;if(b.numGlyphs>1){const Ue=b.glyphStartIndex+b.numGlyphs,it=b.lineStartIndex,nt=b.lineStartIndex+b.lineLength,vt=wr(ye,L,ze,Je,g,W,K,b,B,S,re,xe,Ee);if(!vt)return{notEnoughRoom:!0};const Ct=Yr(vt.first.point,I,Ee).point,xt=Yr(vt.last.point,I,Ee).point;if(w&&!g){const Pt=yr(b.writingMode,Ct,xt,Ce);if(Pt)return Pt}Me=[vt.first];for(let Pt=b.glyphStartIndex+1;Pt<Ue-1;Pt++)Me.push(Y(ye*L.getoffsetX(Pt),ze,Je,g,W,K,b.segment,it,nt,B,S,re,xe,Ee));Me.push(vt.last)}else{if(w&&!g){const it=Yr(K,C,Ee).point,nt=b.lineStartIndex+b.segment+1,vt=new o.P(B.getx(nt),B.gety(nt)),Ct=Yr(vt,C,Ee),xt=Ct.signedDistanceFromCamera>0?Ct.point:ps(K,vt,it,1,C,Ee),Pt=yr(b.writingMode,it,xt,Ce);if(Pt)return Pt}const Ue=Y(ye*L.getoffsetX(b.glyphStartIndex),ze,Je,g,W,K,b.segment,b.lineStartIndex,b.lineStartIndex+b.lineLength,B,S,re,xe,Ee);if(!Ue)return{notEnoughRoom:!0};Me=[Ue]}for(const Ue of Me)o.ak(H,Ue.point,Ue.angle);return{}}function ps(b,c,g,w,C,S){const I=Yr(b.add(b.sub(c)._unit()),C,S).point,L=g.sub(I);return g.add(L._mult(w/L.mag()))}function sr(b,c){const{projectionCache:g,lineVertexArray:w,labelPlaneMatrix:C,tileAnchorPoint:S,distanceFromAnchor:I,getElevation:L,previousVertex:B,direction:H,absOffsetX:W}=c;if(g.projections[b])return g.projections[b];const K=new o.P(w.getx(b),w.gety(b)),re=Yr(K,C,L);if(re.signedDistanceFromCamera>0)return g.projections[b]=re.point,re.point;const Ce=b-H;return ps(I===0?S:new o.P(w.getx(Ce),w.gety(Ce)),K,B,W-I+1,C,L)}function Ln(b,c,g){return b._unit()._perp()._mult(c*g)}function be(b,c,g,w,C,S,I,L){const{projectionCache:B,direction:H}=L;if(B.offsets[b])return B.offsets[b];const W=g.add(c);if(b+H<w||b+H>=C)return B.offsets[b]=W,W;const K=sr(b+H,L),re=Ln(K.sub(g),I,H),Ce=g.add(re),xe=K.add(re);return B.offsets[b]=o.al(S,W,Ce,xe)||W,B.offsets[b]}function Y(b,c,g,w,C,S,I,L,B,H,W,K,re,Ce){const xe=w?b-c:b+c;let Ee=xe>0?1:-1,ye=0;w&&(Ee*=-1,ye=Math.PI),Ee<0&&(ye+=Math.PI);let ze,Je,Me=Ee>0?L+I:L+I+1,Ue=C,it=C,nt=0,vt=0;const Ct=Math.abs(xe),xt=[];let Pt;for(;nt+vt<=Ct;){if(Me+=Ee,Me<L||Me>=B)return null;nt+=vt,it=Ue,Je=ze;const Nt={projectionCache:K,lineVertexArray:H,labelPlaneMatrix:W,tileAnchorPoint:S,distanceFromAnchor:nt,getElevation:Ce,previousVertex:it,direction:Ee,absOffsetX:Ct};if(Ue=sr(Me,Nt),g===0)xt.push(it),Pt=Ue.sub(it);else{let gr;const or=Ue.sub(it);gr=or.mag()===0?Ln(sr(Me+Ee,Nt).sub(Ue),g,Ee):Ln(or,g,Ee),Je||(Je=it.add(gr)),ze=be(Me,gr,Ue,L,B,Je,g,Nt),xt.push(Je),Pt=ze.sub(Je)}vt=Pt.mag()}const ir=Pt._mult((Ct-nt)/vt)._add(Je||it),Pr=ye+Math.atan2(Ue.y-it.y,Ue.x-it.x);return xt.push(ir),{point:ir,angle:re?Pr:0,path:xt}}const te=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ge(b,c){for(let g=0;g<b;g++){const w=c.length;c.resize(w+4),c.float32.set(te,3*w)}}function Se(b,c,g){const w=c[0],C=c[1];return b[0]=g[0]*w+g[4]*C+g[12],b[1]=g[1]*w+g[5]*C+g[13],b[3]=g[3]*w+g[7]*C+g[15],b}const Te=100;class We{constructor(c,g=new fs(c.width+200,c.height+200,25),w=new fs(c.width+200,c.height+200,25)){this.transform=c,this.grid=g,this.ignoredGrid=w,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+Te,this.screenBottomBoundary=c.height+Te,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(c,g,w,C,S,I){const L=this.projectAndGetPerspectiveRatio(C,c.anchorPointX,c.anchorPointY,I),B=w*L.perspectiveRatio,H=c.x1*B+L.point.x,W=c.y1*B+L.point.y,K=c.x2*B+L.point.x,re=c.y2*B+L.point.y;return!this.isInsideGrid(H,W,K,re)||g!=="always"&&this.grid.hitTest(H,W,K,re,g,S)||L.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[H,W,K,re],offscreen:this.isOffscreen(H,W,K,re)}}placeCollisionCircles(c,g,w,C,S,I,L,B,H,W,K,re,Ce,xe){const Ee=[],ye=new o.P(g.anchorX,g.anchorY),ze=Yr(ye,I,xe),Je=ks(this.transform.cameraToCenterDistance,ze.signedDistanceFromCamera),Me=(W?S/Je:S*Je)/o.ap,Ue=Yr(ye,L,xe).point,it=wr(Me,C,g.lineOffsetX*Me,g.lineOffsetY*Me,!1,Ue,ye,g,w,L,{projections:{},offsets:{}},!1,xe);let nt=!1,vt=!1,Ct=!0;if(it){const xt=.5*re*Je+Ce,Pt=new o.P(-100,-100),ir=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Pr=new Kr,Nt=it.first,gr=it.last;let or=[];for(let Sr=Nt.path.length-1;Sr>=1;Sr--)or.push(Nt.path[Sr]);for(let Sr=1;Sr<gr.path.length;Sr++)or.push(gr.path[Sr]);const $r=2.5*xt;if(B){const Sr=or.map(Mr=>Yr(Mr,B,xe));or=Sr.some(Mr=>Mr.signedDistanceFromCamera<=0)?[]:Sr.map(Mr=>Mr.point)}let Tr=[];if(or.length>0){const Sr=or[0].clone(),Mr=or[0].clone();for(let Li=1;Li<or.length;Li++)Sr.x=Math.min(Sr.x,or[Li].x),Sr.y=Math.min(Sr.y,or[Li].y),Mr.x=Math.max(Mr.x,or[Li].x),Mr.y=Math.max(Mr.y,or[Li].y);Tr=Sr.x>=Pt.x&&Mr.x<=ir.x&&Sr.y>=Pt.y&&Mr.y<=ir.y?[or]:Mr.x<Pt.x||Sr.x>ir.x||Mr.y<Pt.y||Sr.y>ir.y?[]:o.am([or],Pt.x,Pt.y,ir.x,ir.y)}for(const Sr of Tr){Pr.reset(Sr,.25*xt);let Mr=0;Mr=Pr.length<=.5*xt?1:Math.ceil(Pr.paddedLength/$r)+1;for(let Li=0;Li<Mr;Li++){const ri=Li/Math.max(Mr-1,1),En=Pr.lerp(ri),cn=En.x+Te,Ui=En.y+Te;Ee.push(cn,Ui,xt,0);const Gs=cn-xt,di=Ui-xt,Yo=cn+xt,Qo=Ui+xt;if(Ct=Ct&&this.isOffscreen(Gs,di,Yo,Qo),vt=vt||this.isInsideGrid(Gs,di,Yo,Qo),c!=="always"&&this.grid.hitTestCircle(cn,Ui,xt,c,K)&&(nt=!0,!H))return{circles:[],offscreen:!1,collisionDetected:nt}}}}return{circles:!H&&nt||!vt||Je<this.perspectiveRatioCutoff?[]:Ee,offscreen:Ct,collisionDetected:nt}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const g=[];let w=1/0,C=1/0,S=-1/0,I=-1/0;for(const W of c){const K=new o.P(W.x+Te,W.y+Te);w=Math.min(w,K.x),C=Math.min(C,K.y),S=Math.max(S,K.x),I=Math.max(I,K.y),g.push(K)}const L=this.grid.query(w,C,S,I).concat(this.ignoredGrid.query(w,C,S,I)),B={},H={};for(const W of L){const K=W.key;if(B[K.bucketInstanceId]===void 0&&(B[K.bucketInstanceId]={}),B[K.bucketInstanceId][K.featureIndex])continue;const re=[new o.P(W.x1,W.y1),new o.P(W.x2,W.y1),new o.P(W.x2,W.y2),new o.P(W.x1,W.y2)];o.an(g,re)&&(B[K.bucketInstanceId][K.featureIndex]=!0,H[K.bucketInstanceId]===void 0&&(H[K.bucketInstanceId]=[]),H[K.bucketInstanceId].push(K.featureIndex))}return H}insertCollisionBox(c,g,w,C,S,I){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:S,collisionGroupID:I,overlapMode:g},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,g,w,C,S,I){const L=w?this.ignoredGrid:this.grid,B={bucketInstanceId:C,featureIndex:S,collisionGroupID:I,overlapMode:g};for(let H=0;H<c.length;H+=4)L.insertCircle(B,c[H],c[H+1],c[H+2])}projectAndGetPerspectiveRatio(c,g,w,C){let S;return C?(S=[g,w,C(g,w),1],o.ag(S,S,c)):(S=[g,w,0,1],Se(S,S,c)),{point:new o.P((S[0]/S[3]+1)/2*this.transform.width+Te,(-S[1]/S[3]+1)/2*this.transform.height+Te),perspectiveRatio:.5+this.transform.cameraToCenterDistance/S[3]*.5}}isOffscreen(c,g,w,C){return w<Te||c>=this.screenRightBoundary||C<Te||g>this.screenBottomBoundary}isInsideGrid(c,g,w,C){return w>=0&&c<this.gridRightBoundary&&C>=0&&g<this.gridBottomBoundary}getViewportMatrix(){const c=o.ao([]);return o.$(c,c,[-100,-100,0]),c}}function Ne(b,c,g){return c*(o.N/(b.tileSize*Math.pow(2,g-b.tileID.overscaledZ)))}class Ae{constructor(c,g,w,C){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?g:-g))):C&&w?1:0,this.placed=w}isHidden(){return this.opacity===0&&!this.placed}}class Ve{constructor(c,g,w,C,S){this.text=new Ae(c?c.text:null,g,w,S),this.icon=new Ae(c?c.icon:null,g,C,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ut{constructor(c,g,w){this.text=c,this.icon=g,this.skipFade=w}}class dt{constructor(){this.invProjMatrix=o.Z(),this.viewportMatrix=o.Z(),this.circles=[]}}class X{constructor(c,g,w,C,S){this.bucketInstanceId=c,this.featureIndex=g,this.sourceLayerIndex=w,this.bucketIndex=C,this.tileID=S}}class de{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const g=++this.maxGroupID;this.collisionGroups[c]={ID:g,predicate:w=>w.collisionGroupID===g}}return this.collisionGroups[c]}}function le(b,c,g,w,C){const{horizontalAlign:S,verticalAlign:I}=o.au(b);return new o.P(-(S-.5)*c+w[0]*C,-(I-.5)*g+w[1]*C)}function ae(b,c,g,w,C,S){const{x1:I,x2:L,y1:B,y2:H,anchorPointX:W,anchorPointY:K}=b,re=new o.P(c,g);return w&&re._rotate(C?S:-S),{x1:I+re.x,y1:B+re.y,x2:L+re.x,y2:H+re.y,anchorPointX:W,anchorPointY:K}}class pe{constructor(c,g,w,C,S){this.transform=c.clone(),this.terrain=g,this.collisionIndex=new We(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new de(C),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,g,w,C){const S=w.getBucket(g),I=w.latestFeatureIndex;if(!S||!I||g.id!==S.layerIds[0])return;const L=w.collisionBoxArray,B=S.layers[0].layout,H=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),W=w.tileSize/o.N,K=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),re=B.get("text-pitch-alignment")==="map",Ce=B.get("text-rotation-alignment")==="map",xe=Ne(w,1,this.transform.zoom),Ee=Tt(K,re,Ce,this.transform,xe);let ye=null;if(re){const Je=Ji(K,re,Ce,this.transform,xe);ye=o.a1([],this.transform.labelPlaneMatrix,Je)}this.retainedQueryData[S.bucketInstanceId]=new X(S.bucketInstanceId,I,S.sourceLayerIndex,S.index,w.tileID);const ze={bucket:S,layout:B,posMatrix:K,textLabelPlaneMatrix:Ee,labelToScreenMatrix:ye,scale:H,textPixelRatio:W,holdingForFade:w.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:o.ah(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(C)for(const Je of S.sortKeyRanges){const{sortKey:Me,symbolInstanceStart:Ue,symbolInstanceEnd:it}=Je;c.push({sortKey:Me,symbolInstanceStart:Ue,symbolInstanceEnd:it,parameters:ze})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:ze})}attemptAnchorPlacement(c,g,w,C,S,I,L,B,H,W,K,re,Ce,xe,Ee,ye){const ze=o.aq[c.textAnchor],Je=[c.textOffset0,c.textOffset1],Me=le(ze,w,C,Je,S),Ue=this.collisionIndex.placeCollisionBox(ae(g,Me.x,Me.y,I,L,this.transform.angle),K,B,H,W.predicate,ye);if((!Ee||this.collisionIndex.placeCollisionBox(ae(Ee,Me.x,Me.y,I,L,this.transform.angle),K,B,H,W.predicate,ye).box.length!==0)&&Ue.box.length>0){let it;if(this.prevPlacement&&this.prevPlacement.variableOffsets[re.crossTileID]&&this.prevPlacement.placements[re.crossTileID]&&this.prevPlacement.placements[re.crossTileID].text&&(it=this.prevPlacement.variableOffsets[re.crossTileID].anchor),re.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[re.crossTileID]={textOffset:Je,width:w,height:C,anchor:ze,textBoxScale:S,prevAnchor:it},this.markUsedJustification(Ce,ze,re,xe),Ce.allowVerticalPlacement&&(this.markUsedOrientation(Ce,xe,re),this.placedOrientations[re.crossTileID]=xe),{shift:Me,placedGlyphBoxes:Ue}}}placeLayerBucketPart(c,g,w){const{bucket:C,layout:S,posMatrix:I,textLabelPlaneMatrix:L,labelToScreenMatrix:B,textPixelRatio:H,holdingForFade:W,collisionBoxArray:K,partiallyEvaluatedTextSize:re,collisionGroup:Ce}=c.parameters,xe=S.get("text-optional"),Ee=S.get("icon-optional"),ye=o.ar(S,"text-overlap","text-allow-overlap"),ze=ye==="always",Je=o.ar(S,"icon-overlap","icon-allow-overlap"),Me=Je==="always",Ue=S.get("text-rotation-alignment")==="map",it=S.get("text-pitch-alignment")==="map",nt=S.get("icon-text-fit")!=="none",vt=S.get("symbol-z-order")==="viewport-y",Ct=ze&&(Me||!C.hasIconData()||Ee),xt=Me&&(ze||!C.hasTextData()||xe);!C.collisionArrays&&K&&C.deserializeCollisionBoxes(K);const Pt=this.retainedQueryData[C.bucketInstanceId].tileID,ir=this.terrain?(Nt,gr)=>this.terrain.getElevation(Pt,Nt,gr):null,Pr=(Nt,gr)=>{var or,$r;if(g[Nt.crossTileID])return;if(W)return void(this.placements[Nt.crossTileID]=new ut(!1,!1,!1));let Tr=!1,Sr=!1,Mr=!0,Li=null,ri={box:null,offscreen:null},En={box:null},cn=null,Ui=null,Gs=null,di=0,Yo=0,Qo=0;gr.textFeatureIndex?di=gr.textFeatureIndex:Nt.useRuntimeCollisionCircles&&(di=Nt.featureIndex),gr.verticalTextFeatureIndex&&(Yo=gr.verticalTextFeatureIndex);const ll=gr.textBox;if(ll){const On=Oi=>{let un=o.ai.horizontal;if(C.allowVerticalPlacement&&!Oi&&this.prevPlacement){const vs=this.prevPlacement.placedOrientations[Nt.crossTileID];vs&&(this.placedOrientations[Nt.crossTileID]=vs,un=vs,this.markUsedOrientation(C,un,Nt))}return un},Rn=(Oi,un)=>{if(C.allowVerticalPlacement&&Nt.numVerticalGlyphVertices>0&&gr.verticalTextBox){for(const vs of C.writingModes)if(vs===o.ai.vertical?(ri=un(),En=ri):ri=Oi(),ri&&ri.box&&ri.box.length)break}else ri=Oi()},Kn=Nt.textAnchorOffsetStartIndex,ql=Nt.textAnchorOffsetEndIndex;if(ql===Kn){const Oi=(un,vs)=>{const Ni=this.collisionIndex.placeCollisionBox(un,ye,H,I,Ce.predicate,ir);return Ni&&Ni.box&&Ni.box.length&&(this.markUsedOrientation(C,vs,Nt),this.placedOrientations[Nt.crossTileID]=vs),Ni};Rn(()=>Oi(ll,o.ai.horizontal),()=>{const un=gr.verticalTextBox;return C.allowVerticalPlacement&&Nt.numVerticalGlyphVertices>0&&un?Oi(un,o.ai.vertical):{box:null,offscreen:null}}),On(ri&&ri.box&&ri.box.length)}else{let Oi=o.aq[($r=(or=this.prevPlacement)===null||or===void 0?void 0:or.variableOffsets[Nt.crossTileID])===null||$r===void 0?void 0:$r.anchor];const un=(Ni,Kl,tf)=>{const Sy=Ni.x2-Ni.x1,Ey=Ni.y2-Ni.y1,x_=Nt.textBoxScale,$g=nt&&Je==="never"?Kl:null;let Jo={box:[],offscreen:!1},Zl=ye==="never"?1:2,ea="never";Oi&&Zl++;for(let lo=0;lo<Zl;lo++){for(let ta=Kn;ta<ql;ta++){const qg=C.textAnchorOffsets.get(ta);if(Oi&&qg.textAnchor!==Oi)continue;const Ta=this.attemptAnchorPlacement(qg,Ni,Sy,Ey,x_,Ue,it,H,I,Ce,ea,Nt,C,tf,$g,ir);if(Ta&&(Jo=Ta.placedGlyphBoxes,Jo&&Jo.box&&Jo.box.length))return Tr=!0,Li=Ta.shift,Jo}Oi?Oi=null:ea=ye}return Jo};Rn(()=>un(ll,gr.iconBox,o.ai.horizontal),()=>{const Ni=gr.verticalTextBox;return C.allowVerticalPlacement&&!(ri&&ri.box&&ri.box.length)&&Nt.numVerticalGlyphVertices>0&&Ni?un(Ni,gr.verticalIconBox,o.ai.vertical):{box:null,offscreen:null}}),ri&&(Tr=ri.box,Mr=ri.offscreen);const vs=On(ri&&ri.box);if(!Tr&&this.prevPlacement){const Ni=this.prevPlacement.variableOffsets[Nt.crossTileID];Ni&&(this.variableOffsets[Nt.crossTileID]=Ni,this.markUsedJustification(C,Ni.anchor,Nt,vs))}}}if(cn=ri,Tr=cn&&cn.box&&cn.box.length>0,Mr=cn&&cn.offscreen,Nt.useRuntimeCollisionCircles){const On=C.text.placedSymbolArray.get(Nt.centerJustifiedTextSymbolIndex),Rn=o.aj(C.textSizeData,re,On),Kn=S.get("text-padding");Ui=this.collisionIndex.placeCollisionCircles(ye,On,C.lineVertexArray,C.glyphOffsetArray,Rn,I,L,B,w,it,Ce.predicate,Nt.collisionCircleDiameter,Kn,ir),Ui.circles.length&&Ui.collisionDetected&&!w&&o.w("Collisions detected, but collision boxes are not shown"),Tr=ze||Ui.circles.length>0&&!Ui.collisionDetected,Mr=Mr&&Ui.offscreen}if(gr.iconFeatureIndex&&(Qo=gr.iconFeatureIndex),gr.iconBox){const On=Rn=>{const Kn=nt&&Li?ae(Rn,Li.x,Li.y,Ue,it,this.transform.angle):Rn;return this.collisionIndex.placeCollisionBox(Kn,Je,H,I,Ce.predicate,ir)};En&&En.box&&En.box.length&&gr.verticalIconBox?(Gs=On(gr.verticalIconBox),Sr=Gs.box.length>0):(Gs=On(gr.iconBox),Sr=Gs.box.length>0),Mr=Mr&&Gs.offscreen}const $l=xe||Nt.numHorizontalGlyphVertices===0&&Nt.numVerticalGlyphVertices===0,Wc=Ee||Nt.numIconVertices===0;if($l||Wc?Wc?$l||(Sr=Sr&&Tr):Tr=Sr&&Tr:Sr=Tr=Sr&&Tr,Tr&&cn&&cn.box&&this.collisionIndex.insertCollisionBox(cn.box,ye,S.get("text-ignore-placement"),C.bucketInstanceId,En&&En.box&&Yo?Yo:di,Ce.ID),Sr&&Gs&&this.collisionIndex.insertCollisionBox(Gs.box,Je,S.get("icon-ignore-placement"),C.bucketInstanceId,Qo,Ce.ID),Ui&&(Tr&&this.collisionIndex.insertCollisionCircles(Ui.circles,ye,S.get("text-ignore-placement"),C.bucketInstanceId,di,Ce.ID),w)){const On=C.bucketInstanceId;let Rn=this.collisionCircleArrays[On];Rn===void 0&&(Rn=this.collisionCircleArrays[On]=new dt);for(let Kn=0;Kn<Ui.circles.length;Kn+=4)Rn.circles.push(Ui.circles[Kn+0]),Rn.circles.push(Ui.circles[Kn+1]),Rn.circles.push(Ui.circles[Kn+2]),Rn.circles.push(Ui.collisionDetected?1:0)}if(Nt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(C.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Nt.crossTileID]=new ut(Tr||Ct,Sr||xt,Mr||C.justReloaded),g[Nt.crossTileID]=!0};if(vt){if(c.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Nt=C.getSortedSymbolIndexes(this.transform.angle);for(let gr=Nt.length-1;gr>=0;--gr){const or=Nt[gr];Pr(C.symbolInstances.get(or),C.collisionArrays[or])}}else for(let Nt=c.symbolInstanceStart;Nt<c.symbolInstanceEnd;Nt++)Pr(C.symbolInstances.get(Nt),C.collisionArrays[Nt]);if(w&&C.bucketInstanceId in this.collisionCircleArrays){const Nt=this.collisionCircleArrays[C.bucketInstanceId];o.as(Nt.invProjMatrix,I),Nt.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(c,g,w,C){let S;S=C===o.ai.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[o.at(g)];const I=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];for(const L of I)L>=0&&(c.text.placedSymbolArray.get(L).crossTileID=S>=0&&L!==S?0:w.crossTileID)}markUsedOrientation(c,g,w){const C=g===o.ai.horizontal||g===o.ai.horizontalOnly?g:0,S=g===o.ai.vertical?g:0,I=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];for(const L of I)c.text.placedSymbolArray.get(L).placedOrientation=C;w.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const g=this.prevPlacement;let w=!1;this.prevZoomAdjustment=g?g.zoomAdjustment(this.transform.zoom):0;const C=g?g.symbolFadeChange(c):1,S=g?g.opacities:{},I=g?g.variableOffsets:{},L=g?g.placedOrientations:{};for(const B in this.placements){const H=this.placements[B],W=S[B];W?(this.opacities[B]=new Ve(W,C,H.text,H.icon),w=w||H.text!==W.text.placed||H.icon!==W.icon.placed):(this.opacities[B]=new Ve(null,C,H.text,H.icon,H.skipFade),w=w||H.text||H.icon)}for(const B in S){const H=S[B];if(!this.opacities[B]){const W=new Ve(H,C,!1,!1);W.isHidden()||(this.opacities[B]=W,w=w||H.text.placed||H.icon.placed)}}for(const B in I)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=I[B]);for(const B in L)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=L[B]);if(g&&g.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");w?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=g?g.lastPlacementChangeTime:c)}updateLayerOpacities(c,g){const w={};for(const C of g){const S=C.getBucket(c);S&&C.latestFeatureIndex&&c.id===S.layerIds[0]&&this.updateBucketOpacities(S,w,C.collisionBoxArray)}}updateBucketOpacities(c,g,w){c.hasTextData()&&(c.text.opacityVertexArray.clear(),c.text.hasVisibleVertices=!1),c.hasIconData()&&(c.icon.opacityVertexArray.clear(),c.icon.hasVisibleVertices=!1),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const C=c.layers[0],S=C.layout,I=new Ve(null,0,!1,!1,!0),L=S.get("text-allow-overlap"),B=S.get("icon-allow-overlap"),H=C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"),W=S.get("text-rotation-alignment")==="map",K=S.get("text-pitch-alignment")==="map",re=S.get("icon-text-fit")!=="none",Ce=new Ve(null,0,L&&(B||!c.hasIconData()||S.get("icon-optional")),B&&(L||!c.hasTextData()||S.get("text-optional")),!0);!c.collisionArrays&&w&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(w);const xe=(Ee,ye,ze)=>{for(let Je=0;Je<ye/4;Je++)Ee.opacityVertexArray.emplaceBack(ze);Ee.hasVisibleVertices=Ee.hasVisibleVertices||ze!==gt};for(let Ee=0;Ee<c.symbolInstances.length;Ee++){const ye=c.symbolInstances.get(Ee),{numHorizontalGlyphVertices:ze,numVerticalGlyphVertices:Je,crossTileID:Me}=ye;let Ue=this.opacities[Me];g[Me]?Ue=I:Ue||(Ue=Ce,this.opacities[Me]=Ue),g[Me]=!0;const it=ye.numIconVertices>0,nt=this.placedOrientations[ye.crossTileID],vt=nt===o.ai.vertical,Ct=nt===o.ai.horizontal||nt===o.ai.horizontalOnly;if(ze>0||Je>0){const xt=wt(Ue.text);xe(c.text,ze,vt?gt:xt),xe(c.text,Je,Ct?gt:xt);const Pt=Ue.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(Nt=>{Nt>=0&&(c.text.placedSymbolArray.get(Nt).hidden=Pt||vt?1:0)}),ye.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=Pt||Ct?1:0);const ir=this.variableOffsets[ye.crossTileID];ir&&this.markUsedJustification(c,ir.anchor,ye,nt);const Pr=this.placedOrientations[ye.crossTileID];Pr&&(this.markUsedJustification(c,"left",ye,Pr),this.markUsedOrientation(c,Pr,ye))}if(it){const xt=wt(Ue.icon),Pt=!(re&&ye.verticalPlacedIconSymbolIndex&&vt);ye.placedIconSymbolIndex>=0&&(xe(c.icon,ye.numIconVertices,Pt?xt:gt),c.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=Ue.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(xe(c.icon,ye.numVerticalIconVertices,Pt?gt:xt),c.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=Ue.icon.isHidden())}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const xt=c.collisionArrays[Ee];if(xt){let Pt=new o.P(0,0);if(xt.textBox||xt.verticalTextBox){let Pr=!0;if(H){const Nt=this.variableOffsets[Me];Nt?(Pt=le(Nt.anchor,Nt.width,Nt.height,Nt.textOffset,Nt.textBoxScale),W&&Pt._rotate(K?this.transform.angle:-this.transform.angle)):Pr=!1}xt.textBox&&J(c.textCollisionBox.collisionVertexArray,Ue.text.placed,!Pr||vt,Pt.x,Pt.y),xt.verticalTextBox&&J(c.textCollisionBox.collisionVertexArray,Ue.text.placed,!Pr||Ct,Pt.x,Pt.y)}const ir=!!(!Ct&&xt.verticalIconBox);xt.iconBox&&J(c.iconCollisionBox.collisionVertexArray,Ue.icon.placed,ir,re?Pt.x:0,re?Pt.y:0),xt.verticalIconBox&&J(c.iconCollisionBox.collisionVertexArray,Ue.icon.placed,!ir,re?Pt.x:0,re?Pt.y:0)}}}if(c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.text.opacityVertexArray.length!==c.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${c.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${c.text.layoutVertexArray.length}) / 4`);if(c.icon.opacityVertexArray.length!==c.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${c.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${c.icon.layoutVertexArray.length}) / 4`);if(c.bucketInstanceId in this.collisionCircleArrays){const Ee=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=Ee.invProjMatrix,c.placementViewportMatrix=Ee.viewportMatrix,c.collisionCircleArray=Ee.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,g){const w=this.zoomAtLastRecencyCheck===g?1-this.zoomAdjustment(g):1;return this.zoomAtLastRecencyCheck=g,this.commitTime+this.fadeDuration*w>c}setStale(){this.stale=!0}}function J(b,c,g,w,C){b.emplaceBack(c?1:0,g?1:0,w||0,C||0),b.emplaceBack(c?1:0,g?1:0,w||0,C||0),b.emplaceBack(c?1:0,g?1:0,w||0,C||0),b.emplaceBack(c?1:0,g?1:0,w||0,C||0)}const Re=Math.pow(2,25),je=Math.pow(2,24),Ie=Math.pow(2,17),Le=Math.pow(2,16),He=Math.pow(2,9),rt=Math.pow(2,8),lt=Math.pow(2,1);function wt(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const c=b.placed?1:0,g=Math.floor(127*b.opacity);return g*Re+c*je+g*Ie+c*Le+g*He+c*rt+g*lt+c}const gt=0;class At{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,g,w,C,S){const I=this._bucketParts;for(;this._currentTileIndex<c.length;)if(g.getBucketParts(I,C,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((L,B)=>L.sortKey-B.sortKey));this._currentPartIndex<I.length;)if(g.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,S())return!0;return!1}}class lr{constructor(c,g,w,C,S,I,L,B){this.placement=new pe(c,g,I,L,B),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(c,g,w){const C=o.h.now(),S=()=>!this._forceFullPlacement&&o.h.now()-C>2;for(;this._currentPlacementIndex>=0;){const I=g[c[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=L)&&(!I.maxzoom||I.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new At(I)),this._inProgressLayer.continuePlacement(w[I.source],this.placement,this._showCollisionBoxes,I,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const br=512/o.N/2;class Rr{constructor(c,g,w){this.tileID=c,this.bucketInstanceId=w,this._symbolsByKey={};const C=new Map;for(let S=0;S<g.length;S++){const I=g.get(S),L=I.key,B=C.get(L);B?B.push(I):C.set(L,[I])}for(const[S,I]of C){const L={positions:I.map(B=>({x:Math.floor(B.anchorX*br),y:Math.floor(B.anchorY*br)})),crossTileIDs:I.map(B=>B.crossTileID)};if(L.positions.length>128){const B=new o.av(L.positions.length,16,Uint16Array);for(const{x:H,y:W}of L.positions)B.add(H,W);B.finish(),delete L.positions,L.index=B}this._symbolsByKey[S]=L}}getScaledCoordinates(c,g){const{x:w,y:C,z:S}=this.tileID.canonical,{x:I,y:L,z:B}=g.canonical,H=br/Math.pow(2,B-S),W=(L*o.N+c.anchorY)*H,K=C*o.N*br;return{x:Math.floor((I*o.N+c.anchorX)*H-w*o.N*br),y:Math.floor(W-K)}}findMatches(c,g,w){const C=this.tileID.canonical.z<g.canonical.z?1:Math.pow(2,this.tileID.canonical.z-g.canonical.z);for(let S=0;S<c.length;S++){const I=c.get(S);if(I.crossTileID)continue;const L=this._symbolsByKey[I.key];if(!L)continue;const B=this.getScaledCoordinates(I,g);if(L.index){const H=L.index.range(B.x-C,B.y-C,B.x+C,B.y+C).sort();for(const W of H){const K=L.crossTileIDs[W];if(!w[K]){w[K]=!0,I.crossTileID=K;break}}}else if(L.positions)for(let H=0;H<L.positions.length;H++){const W=L.positions[H],K=L.crossTileIDs[H];if(Math.abs(W.x-B.x)<=C&&Math.abs(W.y-B.y)<=C&&!w[K]){w[K]=!0,I.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:c})=>c)}}class mr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ln{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const g=Math.round((c-this.lng)/360);if(g!==0)for(const w in this.indexes){const C=this.indexes[w],S={};for(const I in C){const L=C[I];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+g),S[L.tileID.key]=L}this.indexes[w]=S}this.lng=c}addBucket(c,g,w){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===g.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let S=0;S<g.symbolInstances.length;S++)g.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const C=this.usedCrossTileIDs[c.overscaledZ];for(const S in this.indexes){const I=this.indexes[S];if(Number(S)>c.overscaledZ)for(const L in I){const B=I[L];B.tileID.isChildOf(c)&&B.findMatches(g.symbolInstances,c,C)}else{const L=I[c.scaledTo(Number(S)).key];L&&L.findMatches(g.symbolInstances,c,C)}}for(let S=0;S<g.symbolInstances.length;S++){const I=g.symbolInstances.get(S);I.crossTileID||(I.crossTileID=w.generate(),C[I.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Rr(c,g.symbolInstances,g.bucketInstanceId),!0}removeBucketCrossTileIDs(c,g){for(const w of g.getCrossTileIDsLists())for(const C of w)delete this.usedCrossTileIDs[c][C]}removeStaleBuckets(c){let g=!1;for(const w in this.indexes){const C=this.indexes[w];for(const S in C)c[C[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,C[S]),delete C[S],g=!0)}return g}}class $n{constructor(){this.layerIndexes={},this.crossTileIDs=new mr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,g,w){let C=this.layerIndexes[c.id];C===void 0&&(C=this.layerIndexes[c.id]=new ln);let S=!1;const I={};C.handleWrapJump(w);for(const L of g){const B=L.getBucket(c);B&&c.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(L.tileID,B,this.crossTileIDs)&&(S=!0),I[B.bucketInstanceId]=!0)}return C.removeStaleBuckets(I)&&(S=!0),S}pruneUnusedLayers(c){const g={};c.forEach(w=>{g[w]=!0});for(const w in this.layerIndexes)g[w]||delete this.layerIndexes[w]}}const ei=(b,c)=>o.x(b,c&&c.filter(g=>g.identifier!=="source.canvas")),Ur=o.F(o.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Zo=o.F(o.ax,["setCenter","setZoom","setBearing","setPitch"]),ti=o.aw();class Sn extends o.E{constructor(c,g={}){super(),this.map=c,this.dispatcher=new Be(Ir(),this,c._getMapId()),this.imageManager=new fe,this.imageManager.setEventedParent(this),this.glyphManager=new ct(c._requestManager,g.localIdeographFontFamily),this.lineAtlas=new ht(256,512),this.crossTileSymbolIndex=new $n,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.az());const w=this;this._rtlTextPluginCallback=Sn.registerForPluginStateChange(C=>{w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:C.pluginStatus,pluginURL:C.pluginURL},(S,I)=>{if(o.aA(S),I&&I.every(L=>L))for(const L in w.sourceCaches){const B=w.sourceCaches[L].getSource().type;B!=="vector"&&B!=="geojson"||w.sourceCaches[L].reload()}})}),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;const S=this.sourceCaches[C.sourceId];if(!S)return;const I=S.getSource();if(I&&I.vectorLayerIds)for(const L in this._layers){const B=this._layers[L];B.source===I.id&&this._validateLayer(B)}})}loadURL(c,g={},w){this.fire(new o.k("dataloading",{dataType:"style"})),g.validate=typeof g.validate!="boolean"||g.validate;const C=this.map._requestManager.transformRequest(c,F.Style);this._request=o.f(C,(S,I)=>{this._request=null,S?this.fire(new o.j(S)):I&&this._load(I,g,w)})}loadJSON(c,g={},w){this.fire(new o.k("dataloading",{dataType:"style"})),this._request=o.h.frame(()=>{this._request=null,g.validate=g.validate!==!1,this._load(c,g,w)})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(ti,{validate:!1})}_load(c,g,w){var C;const S=g.transformStyle?g.transformStyle(w,c):c;if(!g.validate||!ei(this,o.y(S))){this._loaded=!0,this.stylesheet=S;for(const I in S.sources)this.addSource(I,S.sources[I],{validate:!1});S.sprite?this._loadSprite(S.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(S.glyphs),this._createLayers(),this.light=new Ye(this.stylesheet.light),this.map.setTerrain((C=this.stylesheet.terrain)!==null&&C!==void 0?C:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const c=o.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",c),this._order=c.map(g=>g.id),this._layers={},this._serializedLayers=null;for(const g of c){const w=o.aC(g);w.setEventedParent(this,{layer:{id:g.id}}),this._layers[g.id]=w}}_loadSprite(c,g=!1,w=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(C,S,I,L){const B=oe(C),H=B.length,W=I>1?"@2x":"",K={},re={},Ce={};for(const{id:xe,url:Ee}of B){const ye=S.transformRequest(S.normalizeSpriteURL(Ee,W,".json"),F.SpriteJSON),ze=`${xe}_${ye.url}`;K[ze]=o.f(ye,(Ue,it)=>{delete K[ze],re[xe]=it,ue(L,re,Ce,Ue,H)});const Je=S.transformRequest(S.normalizeSpriteURL(Ee,W,".png"),F.SpriteImage),Me=`${xe}_${Je.url}`;K[Me]=M.getImage(Je,(Ue,it)=>{delete K[Me],Ce[xe]=it,ue(L,re,Ce,Ue,H)})}return{cancel(){for(const xe of Object.values(K))xe.cancel()}}}(c,this.map._requestManager,this.map.getPixelRatio(),(C,S)=>{if(this._spriteRequest=null,C)this.fire(new o.j(C));else if(S)for(const I in S){this._spritesImagesIds[I]=[];const L=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(B=>!(B in S)):[];for(const B of L)this.imageManager.removeImage(B),this._changedImages[B]=!0;for(const B in S[I]){const H=I==="default"?B:`${I}:${B}`;this._spritesImagesIds[I].push(H),H in this.imageManager.images?this.imageManager.updateImage(H,S[I][B],!1):this.imageManager.addImage(H,S[I][B]),g&&(this._changedImages[H]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),g&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),w&&w(C)})}_unloadSprite(){for(const c of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(c),this._changedImages[c]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(c){const g=this.sourceCaches[c.source];if(!g)return;const w=c.sourceLayer;if(!w)return;const C=g.getSource();(C.type==="geojson"||C.vectorLayerIds&&C.vectorLayerIds.indexOf(w)===-1)&&this.fire(new o.j(new Error(`Source layer "${w}" does not exist on source "${C.id}" as specified by style layer "${c.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(c){const g=this._serializedAllLayers();if(!c||c.length===0)return Object.values(g);const w=[];for(const C of c)g[C]&&w.push(g[C]);return w}_serializedAllLayers(){let c=this._serializedLayers;if(c)return c;c=this._serializedLayers={};const g=Object.keys(this._layers);for(const w of g){const C=this._layers[w];C.type!=="custom"&&(c[w]=C.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(c){if(!this._loaded)return;const g=this._changed;if(this._changed){const C=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(C.length||S.length)&&this._updateWorkerLayers(C,S);for(const I in this._updatedSources){const L=this._updatedSources[I];if(L==="reload")this._reloadSource(I);else{if(L!=="clear")throw new Error(`Invalid action ${L}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(c);this.light.updateTransitions(c),this._resetUpdates()}const w={};for(const C in this.sourceCaches){const S=this.sourceCaches[C];w[C]=S.used,S.used=!1}for(const C of this._order){const S=this._layers[C];S.recalculate(c,this._availableImages),!S.isHidden(c.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const C in w){const S=this.sourceCaches[C];w[C]!==S.used&&S.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:C}))}this.light.recalculate(c),this.z=c.zoom,g&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const g in this.sourceCaches)this.sourceCaches[g].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(c,g){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(c),removedIds:g})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(c,g={}){this._checkLoaded();const w=this.serialize();if(c=g.transformStyle?g.transformStyle(w,c):c,ei(this,o.y(c)))return!1;(c=o.aD(c)).layers=o.aB(c.layers);const C=o.aE(w,c).filter(I=>!(I.command in Zo));if(C.length===0)return!1;const S=C.filter(I=>!(I.command in Ur));if(S.length>0)throw new Error(`Unimplemented: ${S.map(I=>I.command).join(", ")}.`);for(const I of C)I.command!=="setTransition"&&this[I.command].apply(this,I.args);return this.stylesheet=c,this._serializedLayers=null,!0}addImage(c,g){if(this.getImage(c))return this.fire(new o.j(new Error(`An image named "${c}" already exists.`)));this.imageManager.addImage(c,g),this._afterImageUpdated(c)}updateImage(c,g){this.imageManager.updateImage(c,g)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){if(!this.getImage(c))return this.fire(new o.j(new Error(`An image named "${c}" does not exist.`)));this.imageManager.removeImage(c),this._afterImageUpdated(c)}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(c,g,w={}){if(this._checkLoaded(),this.sourceCaches[c]!==void 0)throw new Error(`Source "${c}" already exists.`);if(!g.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(g).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(g.type)>=0&&this._validate(o.y.source,`sources.${c}`,g,null,w))return;this.map&&this.map._collectResourceTiming&&(g.collectResourceTiming=!0);const C=this.sourceCaches[c]=new Jt(c,g,this.dispatcher);C.style=this,C.setEventedParent(this,()=>({isSourceLoaded:C.loaded(),source:C.serialize(),sourceId:c})),C.onAdd(this.map),this._changed=!0}removeSource(c){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===c)return this.fire(new o.j(new Error(`Source "${c}" cannot be removed while layer "${w}" is using it.`)));const g=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],g.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),g.setEventedParent(null),g.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(c,g){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error(`There is no source with this ID=${c}`);const w=this.sourceCaches[c].getSource();if(w.type!=="geojson")throw new Error(`geojsonSource.type is ${w.type}, which is !== 'geojson`);w.setData(g),this._changed=!0}getSource(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()}addLayer(c,g,w={}){this._checkLoaded();const C=c.id;if(this.getLayer(C))return void this.fire(new o.j(new Error(`Layer "${C}" already exists on this map.`)));let S;if(c.type==="custom"){if(ei(this,o.aF(c)))return;S=o.aC(c)}else{if("source"in c&&typeof c.source=="object"&&(this.addSource(C,c.source),c=o.aD(c),c=o.e(c,{source:C})),this._validate(o.y.layer,`layers.${C}`,c,{arrayIndex:-1},w))return;S=o.aC(c),this._validateLayer(S),S.setEventedParent(this,{layer:{id:C}})}const I=g?this._order.indexOf(g):this._order.length;if(g&&I===-1)this.fire(new o.j(new Error(`Cannot add layer "${C}" before non-existing layer "${g}".`)));else{if(this._order.splice(I,0,C),this._layerOrderChanged=!0,this._layers[C]=S,this._removedLayers[C]&&S.source&&S.type!=="custom"){const L=this._removedLayers[C];delete this._removedLayers[C],L.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(c,g){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new o.j(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===g)return;const w=this._order.indexOf(c);this._order.splice(w,1);const C=g?this._order.indexOf(g):this._order.length;g&&C===-1?this.fire(new o.j(new Error(`Cannot move layer "${c}" before non-existing layer "${g}".`))):(this._order.splice(C,0,c),this._layerOrderChanged=!0)}removeLayer(c){this._checkLoaded();const g=this._layers[c];if(!g)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${c}".`)));g.setEventedParent(null);const w=this._order.indexOf(c);this._order.splice(w,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=g,delete this._layers[c],this._serializedLayers&&delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],g.onRemove&&g.onRemove(this.map)}getLayer(c){return this._layers[c]}getLayersOrder(){return[...this._order]}hasLayer(c){return c in this._layers}setLayerZoomRange(c,g,w){this._checkLoaded();const C=this.getLayer(c);C?C.minzoom===g&&C.maxzoom===w||(g!=null&&(C.minzoom=g),w!=null&&(C.maxzoom=w),this._updateLayer(C)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${c}".`)))}setFilter(c,g,w={}){this._checkLoaded();const C=this.getLayer(c);if(C){if(!o.aG(C.filter,g))return g==null?(C.filter=void 0,void this._updateLayer(C)):void(this._validate(o.y.filter,`layers.${C.id}.filter`,g,null,w)||(C.filter=o.aD(g),this._updateLayer(C)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${c}".`)))}getFilter(c){return o.aD(this.getLayer(c).filter)}setLayoutProperty(c,g,w,C={}){this._checkLoaded();const S=this.getLayer(c);S?o.aG(S.getLayoutProperty(g),w)||(S.setLayoutProperty(g,w,C),this._updateLayer(S)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${c}".`)))}getLayoutProperty(c,g){const w=this.getLayer(c);if(w)return w.getLayoutProperty(g);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${c}".`)))}setPaintProperty(c,g,w,C={}){this._checkLoaded();const S=this.getLayer(c);S?o.aG(S.getPaintProperty(g),w)||(S.setPaintProperty(g,w,C)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new o.j(new Error(`Cannot style non-existing layer "${c}".`)))}getPaintProperty(c,g){return this.getLayer(c).getPaintProperty(g)}setFeatureState(c,g){this._checkLoaded();const w=c.source,C=c.sourceLayer,S=this.sourceCaches[w];if(S===void 0)return void this.fire(new o.j(new Error(`The source '${w}' does not exist in the map's style.`)));const I=S.getSource().type;I==="geojson"&&C?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||C?(c.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),S.setFeatureState(C,c.id,g)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(c,g){this._checkLoaded();const w=c.source,C=this.sourceCaches[w];if(C===void 0)return void this.fire(new o.j(new Error(`The source '${w}' does not exist in the map's style.`)));const S=C.getSource().type,I=S==="vector"?c.sourceLayer:void 0;S!=="vector"||I?g&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):C.removeFeatureState(I,c.id,g):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(c){this._checkLoaded();const g=c.source,w=c.sourceLayer,C=this.sourceCaches[g];if(C!==void 0)return C.getSource().type!=="vector"||w?(c.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),C.getFeatureState(w,c.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const c=o.aH(this.sourceCaches,S=>S.serialize()),g=this._serializeByIds(this._order),w=this.map.getTerrain()||void 0,C=this.stylesheet;return o.aI({version:C.version,name:C.name,metadata:C.metadata,light:C.light,center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,sprite:C.sprite,glyphs:C.glyphs,transition:C.transition,sources:c,layers:g,terrain:w},S=>S!==void 0)}_updateLayer(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.sourceCaches[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(c){const g=I=>this._layers[I].type==="fill-extrusion",w={},C=[];for(let I=this._order.length-1;I>=0;I--){const L=this._order[I];if(g(L)){w[L]=I;for(const B of c){const H=B[L];if(H)for(const W of H)C.push(W)}}}C.sort((I,L)=>L.intersectionZ-I.intersectionZ);const S=[];for(let I=this._order.length-1;I>=0;I--){const L=this._order[I];if(g(L))for(let B=C.length-1;B>=0;B--){const H=C[B].feature;if(w[H.layer.id]<I)break;S.push(H),C.pop()}else for(const B of c){const H=B[L];if(H)for(const W of H)S.push(W.feature)}}return S}queryRenderedFeatures(c,g,w){g&&g.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",g.filter,null,g);const C={};if(g&&g.layers){if(!Array.isArray(g.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const L of g.layers){const B=this._layers[L];if(!B)return this.fire(new o.j(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];C[B.source]=!0}}const S=[];g.availableImages=this._availableImages;const I=this._serializedAllLayers();for(const L in this.sourceCaches)g.layers&&!C[L]||S.push(qt(this.sourceCaches[L],this._layers,I,c,g,w));return this.placement&&S.push(function(L,B,H,W,K,re,Ce){const xe={},Ee=re.queryRenderedSymbols(W),ye=[];for(const ze of Object.keys(Ee).map(Number))ye.push(Ce[ze]);ye.sort(Et);for(const ze of ye){const Je=ze.featureIndex.lookupSymbolFeatures(Ee[ze.bucketInstanceId],B,ze.bucketIndex,ze.sourceLayerIndex,K.filter,K.layers,K.availableImages,L);for(const Me in Je){const Ue=xe[Me]=xe[Me]||[],it=Je[Me];it.sort((nt,vt)=>{const Ct=ze.featureSortOrder;if(Ct){const xt=Ct.indexOf(nt.featureIndex);return Ct.indexOf(vt.featureIndex)-xt}return vt.featureIndex-nt.featureIndex});for(const nt of it)Ue.push(nt)}}for(const ze in xe)xe[ze].forEach(Je=>{const Me=Je.feature,Ue=H[L[ze].source].getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=Ue});return xe}(this._layers,I,this.sourceCaches,c,g,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(c,g){g&&g.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",g.filter,null,g);const w=this.sourceCaches[c];return w?function(C,S){const I=C.getRenderableIds().map(H=>C.getTileByID(H)),L=[],B={};for(let H=0;H<I.length;H++){const W=I[H],K=W.tileID.canonical.key;B[K]||(B[K]=!0,W.querySourceFeatures(L,S))}return L}(w,g):[]}addSourceType(c,g,w){return Yt(c)?w(new Error(`A source type called "${c}" already exists.`)):(((C,S)=>{er[C]=S})(c,g),g.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:g.workerSourceURL},w):w(null,null))}getLight(){return this.light.getLight()}setLight(c,g={}){this._checkLoaded();const w=this.light.getLight();let C=!1;for(const I in c)if(!o.aG(c[I],w[I])){C=!0;break}if(!C)return;const S={now:o.h.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,g),this.light.updateTransitions(S)}_validate(c,g,w,C,S={}){return(!S||S.validate!==!1)&&ei(this,c.call(o.y,o.e({key:g,style:this.serialize(),value:w,styleSpec:o.v},C)))}_remove(c=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const g in this._layers)this._layers[g].setEventedParent(null);for(const g in this.sourceCaches){const w=this.sourceCaches[g];w.setEventedParent(null),w.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(c)}_clearSource(c){this.sourceCaches[c].clearTiles()}_reloadSource(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()}_updateSources(c){for(const g in this.sourceCaches)this.sourceCaches[g].update(c,this.map.terrain)}_generateCollisionBoxes(){for(const c in this.sourceCaches)this._reloadSource(c)}_updatePlacement(c,g,w,C,S=!1){let I=!1,L=!1;const B={};for(const H of this._order){const W=this._layers[H];if(W.type!=="symbol")continue;if(!B[W.source]){const re=this.sourceCaches[W.source];B[W.source]=re.getRenderableIds(!0).map(Ce=>re.getTileByID(Ce)).sort((Ce,xe)=>xe.tileID.overscaledZ-Ce.tileID.overscaledZ||(Ce.tileID.isLessThan(xe.tileID)?-1:1))}const K=this.crossTileSymbolIndex.addLayer(W,B[W.source],c.center.lng);I=I||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||w===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.h.now(),c.zoom))&&(this.pauseablePlacement=new lr(c,this.map.terrain,this._order,S,g,w,C,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.h.now()),L=!0),I&&this.pauseablePlacement.placement.setStale()),L||I)for(const H of this._order){const W=this._layers[H];W.type==="symbol"&&this.placement.updateLayerOpacities(W,B[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.h.now())}_releaseSymbolFadeTiles(){for(const c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,g,w){this.imageManager.getImages(g.icons,w),this._updateTilesForChangedImages();const C=this.sourceCaches[g.source];C&&C.setDependencies(g.tileID.key,g.type,g.icons)}getGlyphs(c,g,w){this.glyphManager.getGlyphs(g.stacks,w);const C=this.sourceCaches[g.source];C&&C.setDependencies(g.tileID.key,g.type,[""])}getResource(c,g,w){return o.m(g,w)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(c,g={}){this._checkLoaded(),c&&this._validate(o.y.glyphs,"glyphs",c,null,g)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=c,this.glyphManager.entries={},this.glyphManager.setURL(c))}addSprite(c,g,w={},C){this._checkLoaded();const S=[{id:c,url:g}],I=[...oe(this.stylesheet.sprite),...S];this._validate(o.y.sprite,"sprite",I,null,w)||(this.stylesheet.sprite=I,this._loadSprite(S,!0,C))}removeSprite(c){this._checkLoaded();const g=oe(this.stylesheet.sprite);if(g.find(w=>w.id===c)){if(this._spritesImagesIds[c])for(const w of this._spritesImagesIds[c])this.imageManager.removeImage(w),this._changedImages[w]=!0;g.splice(g.findIndex(w=>w.id===c),1),this.stylesheet.sprite=g.length>0?g:void 0,delete this._spritesImagesIds[c],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${c}" doesn't exists on this map.`)))}getSprite(){return oe(this.stylesheet.sprite)}setSprite(c,g={},w){this._checkLoaded(),c&&this._validate(o.y.sprite,"sprite",c,null,g)||(this.stylesheet.sprite=c,c?this._loadSprite(c,!0,w):(this._unloadSprite(),w&&w(null)))}}Sn.registerForPluginStateChange=o.aK;var Pd=o.Q([{name:"a_pos",type:"Int16",components:2}]),Dc="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const xi={prelude:zr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:zr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:zr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:zr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:zr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:zr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:zr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:zr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:zr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:zr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:zr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:zr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:zr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:zr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:zr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:zr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:zr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:zr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:zr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Dc),terrainDepth:zr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Dc),terrainCoords:zr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Dc)};function zr(b,c){const g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=c.match(/attribute ([\w]+) ([\w]+)/g),C=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=S?S.concat(C):C,L={};return{fragmentSource:b=b.replace(g,(B,H,W,K,re)=>(L[re]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${re}
varying ${W} ${K} ${re};
#else
uniform ${W} ${K} u_${re};
#endif
`:`
#ifdef HAS_UNIFORM_u_${re}
    ${W} ${K} ${re} = u_${re};
#endif
`)),vertexSource:c=c.replace(g,(B,H,W,K,re)=>{const Ce=K==="float"?"vec2":"vec4",xe=re.match(/color/)?"color":Ce;return L[re]?H==="define"?`
#ifndef HAS_UNIFORM_u_${re}
uniform lowp float u_${re}_t;
attribute ${W} ${Ce} a_${re};
varying ${W} ${K} ${re};
#else
uniform ${W} ${K} u_${re};
#endif
`:xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${re}
    ${re} = a_${re};
#else
    ${W} ${K} ${re} = u_${re};
#endif
`:`
#ifndef HAS_UNIFORM_u_${re}
    ${re} = unpack_mix_${xe}(a_${re}, u_${re}_t);
#else
    ${W} ${K} ${re} = u_${re};
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_${re}
uniform lowp float u_${re}_t;
attribute ${W} ${Ce} a_${re};
#else
uniform ${W} ${K} u_${re};
#endif
`:xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${re}
    ${W} ${K} ${re} = a_${re};
#else
    ${W} ${K} ${re} = u_${re};
#endif
`:`
#ifndef HAS_UNIFORM_u_${re}
    ${W} ${K} ${re} = unpack_mix_${xe}(a_${re}, u_${re}_t);
#else
    ${W} ${K} ${re} = u_${re};
#endif
`}),staticAttributes:w,staticUniforms:I}}class Bl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(c,g,w,C,S,I,L,B,H){this.context=c;let W=this.boundPaintVertexBuffers.length!==C.length;for(let K=0;!W&&K<C.length;K++)this.boundPaintVertexBuffers[K]!==C[K]&&(W=!0);!this.vao||this.boundProgram!==g||this.boundLayoutVertexBuffer!==w||W||this.boundIndexBuffer!==S||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==L||this.boundDynamicVertexBuffer2!==B||this.boundDynamicVertexBuffer3!==H?this.freshBind(g,w,C,S,I,L,B,H):(c.bindVertexArray.set(this.vao),L&&L.bind(),S&&S.dynamicDraw&&S.bind(),B&&B.bind(),H&&H.bind())}freshBind(c,g,w,C,S,I,L,B){const H=c.numAttributes,W=this.context,K=W.gl;this.vao&&this.destroy(),this.vao=W.createVertexArray(),W.bindVertexArray.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=g,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=C,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=L,this.boundDynamicVertexBuffer3=B,g.enableAttributes(K,c);for(const re of w)re.enableAttributes(K,c);I&&I.enableAttributes(K,c),L&&L.enableAttributes(K,c),B&&B.enableAttributes(K,c),g.bind(),g.setVertexAttribPointers(K,c,S);for(const re of w)re.bind(),re.setVertexAttribPointers(K,c,S);I&&(I.bind(),I.setVertexAttribPointers(K,c,S)),C&&C.bind(),L&&(L.bind(),L.setVertexAttribPointers(K,c,S)),B&&(B.bind(),B.setVertexAttribPointers(K,c,S)),W.currentNumAttributes=H}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Ti(b){const c=[];for(let g=0;g<b.length;g++){if(b[g]===null)continue;const w=b[g].split(" ");c.push(w.pop())}return c}class Md{constructor(c,g,w,C,S,I){const L=c.gl;this.program=L.createProgram();const B=Ti(g.staticAttributes),H=w?w.getBinderAttributes():[],W=B.concat(H),K=xi.prelude.staticUniforms?Ti(xi.prelude.staticUniforms):[],re=g.staticUniforms?Ti(g.staticUniforms):[],Ce=w?w.getBinderUniforms():[],xe=K.concat(re).concat(Ce),Ee=[];for(const nt of xe)Ee.indexOf(nt)<0&&Ee.push(nt);const ye=w?w.defines():[];S&&ye.push("#define OVERDRAW_INSPECTOR;"),I&&ye.push("#define TERRAIN3D;");const ze=ye.concat(xi.prelude.fragmentSource,g.fragmentSource).join(`
`),Je=ye.concat(xi.prelude.vertexSource,g.vertexSource).join(`
`),Me=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);if(L.shaderSource(Me,ze),L.compileShader(Me),!L.getShaderParameter(Me,L.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${L.getShaderInfoLog(Me)}`);L.attachShader(this.program,Me);const Ue=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);if(L.shaderSource(Ue,Je),L.compileShader(Ue),!L.getShaderParameter(Ue,L.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${L.getShaderInfoLog(Ue)}`);L.attachShader(this.program,Ue),this.attributes={};const it={};this.numAttributes=W.length;for(let nt=0;nt<this.numAttributes;nt++)W[nt]&&(L.bindAttribLocation(this.program,nt,W[nt]),this.attributes[W[nt]]=nt);if(L.linkProgram(this.program),!L.getProgramParameter(this.program,L.LINK_STATUS))throw new Error(`Program failed to link: ${L.getProgramInfoLog(this.program)}`);L.deleteShader(Ue),L.deleteShader(Me);for(let nt=0;nt<Ee.length;nt++){const vt=Ee[nt];if(vt&&!it[vt]){const Ct=L.getUniformLocation(this.program,vt);Ct&&(it[vt]=Ct)}}this.fixedUniforms=C(c,it),this.terrainUniforms=((nt,vt)=>({u_depth:new o.aL(nt,vt.u_depth),u_terrain:new o.aL(nt,vt.u_terrain),u_terrain_dim:new o.aM(nt,vt.u_terrain_dim),u_terrain_matrix:new o.aN(nt,vt.u_terrain_matrix),u_terrain_unpack:new o.aO(nt,vt.u_terrain_unpack),u_terrain_exaggeration:new o.aM(nt,vt.u_terrain_exaggeration)}))(c,it),this.binderUniforms=w?w.getUniforms(c,it):[]}draw(c,g,w,C,S,I,L,B,H,W,K,re,Ce,xe,Ee,ye,ze,Je){const Me=c.gl;if(this.failedToCreate)return;if(c.program.set(this.program),c.setDepthMode(w),c.setStencilMode(C),c.setColorMode(S),c.setCullFace(I),B){c.activeTexture.set(Me.TEXTURE2),Me.bindTexture(Me.TEXTURE_2D,B.depthTexture),c.activeTexture.set(Me.TEXTURE3),Me.bindTexture(Me.TEXTURE_2D,B.texture);for(const it in this.terrainUniforms)this.terrainUniforms[it].set(B[it])}for(const it in this.fixedUniforms)this.fixedUniforms[it].set(L[it]);Ee&&Ee.setUniforms(c,this.binderUniforms,Ce,{zoom:xe});let Ue=0;switch(g){case Me.LINES:Ue=2;break;case Me.TRIANGLES:Ue=3;break;case Me.LINE_STRIP:Ue=1}for(const it of re.get()){const nt=it.vaos||(it.vaos={});(nt[H]||(nt[H]=new Bl)).bind(c,this,W,Ee?Ee.getPaintVertexBuffers():[],K,it.vertexOffset,ye,ze,Je),Me.drawElements(g,it.primitiveLength*Ue,Me.UNSIGNED_SHORT,it.primitiveOffset*Ue*2)}}}function no(b,c,g){const w=1/Ne(g,1,c.transform.tileZoom),C=Math.pow(2,g.tileID.overscaledZ),S=g.tileSize*Math.pow(2,c.transform.tileZoom)/C,I=S*(g.tileID.canonical.x+g.tileID.wrap*C),L=S*g.tileID.canonical.y;return{u_image:0,u_texsize:g.imageAtlasTexture.size,u_scale:[w,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[I>>16,L>>16],u_pixel_coord_lower:[65535&I,65535&L]}}const og=(b,c,g,w)=>{const C=c.style.light,S=C.properties.get("position"),I=[S.x,S.y,S.z],L=function(){var H=new o.A(9);return o.A!=Float32Array&&(H[1]=0,H[2]=0,H[3]=0,H[5]=0,H[6]=0,H[7]=0),H[0]=1,H[4]=1,H[8]=1,H}();C.properties.get("anchor")==="viewport"&&function(H,W){var K=Math.sin(W),re=Math.cos(W);H[0]=re,H[1]=K,H[2]=0,H[3]=-K,H[4]=re,H[5]=0,H[6]=0,H[7]=0,H[8]=1}(L,-c.transform.angle),function(H,W,K){var re=W[0],Ce=W[1],xe=W[2];H[0]=re*K[0]+Ce*K[3]+xe*K[6],H[1]=re*K[1]+Ce*K[4]+xe*K[7],H[2]=re*K[2]+Ce*K[5]+xe*K[8]}(I,I,L);const B=C.properties.get("color");return{u_matrix:b,u_lightpos:I,u_lightintensity:C.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+g,u_opacity:w}},tl=(b,c,g,w,C,S,I)=>o.e(og(b,c,g,w),no(S,c,I),{u_height_factor:-Math.pow(2,C.overscaledZ)/I.tileSize/8}),Vv=b=>({u_matrix:b}),ag=(b,c,g,w)=>o.e(Vv(b),no(g,c,w)),Fd=(b,c)=>({u_matrix:b,u_world:c}),Ad=(b,c,g,w,C)=>o.e(ag(b,c,g,w),{u_world:C}),rl=(b,c,g,w)=>{const C=b.transform;let S,I;if(w.paint.get("circle-pitch-alignment")==="map"){const L=Ne(g,1,C.zoom);S=!0,I=[L,L]}else S=!1,I=C.pixelsToGLUnits;return{u_camera_to_center_distance:C.cameraToCenterDistance,u_scale_with_map:+(w.paint.get("circle-pitch-scale")==="map"),u_matrix:b.translatePosMatrix(c.posMatrix,g,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+S,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:I}},lg=(b,c,g)=>{const w=Ne(g,1,c.zoom),C=Math.pow(2,c.zoom-g.tileID.overscaledZ),S=g.tileID.overscaleFactor();return{u_matrix:b,u_camera_to_center_distance:c.cameraToCenterDistance,u_pixels_to_tile_units:w,u_extrude_scale:[c.pixelsToGLUnits[0]/(w*C),c.pixelsToGLUnits[1]/(w*C)],u_overscale_factor:S}},Qu=(b,c,g=1)=>({u_matrix:b,u_color:c,u_overlay:0,u_overlay_scale:g}),Hv=b=>({u_matrix:b}),s_=(b,c,g,w)=>({u_matrix:b,u_extrude_scale:Ne(c,1,g),u_intensity:w});function cg(b,c){const g=Math.pow(2,c.canonical.z),w=c.canonical.y;return[new o.U(0,w/g).toLngLat().lat,new o.U(0,(w+1)/g).toLngLat().lat]}const ug=(b,c,g,w)=>{const C=b.transform;return{u_matrix:Id(b,c,g,w),u_ratio:1/Ne(c,1,C.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Uv=(b,c,g,w,C)=>o.e(ug(b,c,g,C),{u_image:0,u_image_height:w}),o_=(b,c,g,w,C)=>{const S=b.transform,I=jv(c,S);return{u_matrix:Id(b,c,g,C),u_texsize:c.imageAtlasTexture.size,u_ratio:1/Ne(c,1,S.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[I,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Wv=(b,c,g,w,C,S)=>{const I=b.lineAtlas,L=jv(c,b.transform),B=g.layout.get("line-cap")==="round",H=I.getDash(w.from,B),W=I.getDash(w.to,B),K=H.width*C.fromScale,re=W.width*C.toScale;return o.e(ug(b,c,g,S),{u_patternscale_a:[L/K,-H.height/2],u_patternscale_b:[L/re,-W.height/2],u_sdfgamma:I.width/(256*Math.min(K,re)*b.pixelRatio)/2,u_image:0,u_tex_y_a:H.y,u_tex_y_b:W.y,u_mix:C.t})};function jv(b,c){return 1/Ne(b,1,c.tileZoom)}function Id(b,c,g,w){return b.translatePosMatrix(w?w.posMatrix:c.tileID.posMatrix,c,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}const $v=(b,c,g,w,C)=>{return{u_matrix:b,u_tl_parent:c,u_scale_parent:g,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(I=C.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(S=C.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:qv(C.paint.get("raster-hue-rotate"))};var S,I};function qv(b){b*=Math.PI/180;const c=Math.sin(b),g=Math.cos(b);return[(2*g+1)/3,(-Math.sqrt(3)*c-g+1)/3,(Math.sqrt(3)*c-g+1)/3]}const hg=(b,c,g,w,C,S,I,L,B,H)=>{const W=C.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:W.cameraToCenterDistance,u_pitch:W.pitch/360*2*Math.PI,u_rotate_symbol:+g,u_aspect_ratio:W.width/W.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:I,u_coord_matrix:L,u_is_text:+B,u_pitch_with_map:+w,u_texsize:H,u_texture:0}},dg=(b,c,g,w,C,S,I,L,B,H,W)=>{const K=C.transform;return o.e(hg(b,c,g,w,C,S,I,L,B,H),{u_gamma_scale:w?Math.cos(K._pitch)*K.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:1})},zl=(b,c,g,w,C,S,I,L,B,H)=>o.e(dg(b,c,g,w,C,S,I,L,!0,B),{u_texsize_icon:H,u_texture_icon:1}),Dd=(b,c,g)=>({u_matrix:b,u_opacity:c,u_color:g}),so=(b,c,g,w,C,S)=>o.e(function(I,L,B,H){const W=B.imageManager.getPattern(I.from.toString()),K=B.imageManager.getPattern(I.to.toString()),{width:re,height:Ce}=B.imageManager.getPixelSize(),xe=Math.pow(2,H.tileID.overscaledZ),Ee=H.tileSize*Math.pow(2,B.transform.tileZoom)/xe,ye=Ee*(H.tileID.canonical.x+H.tileID.wrap*xe),ze=Ee*H.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[re,Ce],u_mix:L.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/Ne(H,1,B.transform.tileZoom),u_pixel_coord_upper:[ye>>16,ze>>16],u_pixel_coord_lower:[65535&ye,65535&ze]}}(w,S,g,C),{u_matrix:b,u_opacity:c}),kd={fillExtrusion:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_lightpos:new o.aP(b,c.u_lightpos),u_lightintensity:new o.aM(b,c.u_lightintensity),u_lightcolor:new o.aP(b,c.u_lightcolor),u_vertical_gradient:new o.aM(b,c.u_vertical_gradient),u_opacity:new o.aM(b,c.u_opacity)}),fillExtrusionPattern:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_lightpos:new o.aP(b,c.u_lightpos),u_lightintensity:new o.aM(b,c.u_lightintensity),u_lightcolor:new o.aP(b,c.u_lightcolor),u_vertical_gradient:new o.aM(b,c.u_vertical_gradient),u_height_factor:new o.aM(b,c.u_height_factor),u_image:new o.aL(b,c.u_image),u_texsize:new o.aQ(b,c.u_texsize),u_pixel_coord_upper:new o.aQ(b,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(b,c.u_pixel_coord_lower),u_scale:new o.aP(b,c.u_scale),u_fade:new o.aM(b,c.u_fade),u_opacity:new o.aM(b,c.u_opacity)}),fill:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix)}),fillPattern:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_image:new o.aL(b,c.u_image),u_texsize:new o.aQ(b,c.u_texsize),u_pixel_coord_upper:new o.aQ(b,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(b,c.u_pixel_coord_lower),u_scale:new o.aP(b,c.u_scale),u_fade:new o.aM(b,c.u_fade)}),fillOutline:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_world:new o.aQ(b,c.u_world)}),fillOutlinePattern:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_world:new o.aQ(b,c.u_world),u_image:new o.aL(b,c.u_image),u_texsize:new o.aQ(b,c.u_texsize),u_pixel_coord_upper:new o.aQ(b,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(b,c.u_pixel_coord_lower),u_scale:new o.aP(b,c.u_scale),u_fade:new o.aM(b,c.u_fade)}),circle:(b,c)=>({u_camera_to_center_distance:new o.aM(b,c.u_camera_to_center_distance),u_scale_with_map:new o.aL(b,c.u_scale_with_map),u_pitch_with_map:new o.aL(b,c.u_pitch_with_map),u_extrude_scale:new o.aQ(b,c.u_extrude_scale),u_device_pixel_ratio:new o.aM(b,c.u_device_pixel_ratio),u_matrix:new o.aN(b,c.u_matrix)}),collisionBox:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_camera_to_center_distance:new o.aM(b,c.u_camera_to_center_distance),u_pixels_to_tile_units:new o.aM(b,c.u_pixels_to_tile_units),u_extrude_scale:new o.aQ(b,c.u_extrude_scale),u_overscale_factor:new o.aM(b,c.u_overscale_factor)}),collisionCircle:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_inv_matrix:new o.aN(b,c.u_inv_matrix),u_camera_to_center_distance:new o.aM(b,c.u_camera_to_center_distance),u_viewport_size:new o.aQ(b,c.u_viewport_size)}),debug:(b,c)=>({u_color:new o.aR(b,c.u_color),u_matrix:new o.aN(b,c.u_matrix),u_overlay:new o.aL(b,c.u_overlay),u_overlay_scale:new o.aM(b,c.u_overlay_scale)}),clippingMask:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix)}),heatmap:(b,c)=>({u_extrude_scale:new o.aM(b,c.u_extrude_scale),u_intensity:new o.aM(b,c.u_intensity),u_matrix:new o.aN(b,c.u_matrix)}),heatmapTexture:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_world:new o.aQ(b,c.u_world),u_image:new o.aL(b,c.u_image),u_color_ramp:new o.aL(b,c.u_color_ramp),u_opacity:new o.aM(b,c.u_opacity)}),hillshade:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_image:new o.aL(b,c.u_image),u_latrange:new o.aQ(b,c.u_latrange),u_light:new o.aQ(b,c.u_light),u_shadow:new o.aR(b,c.u_shadow),u_highlight:new o.aR(b,c.u_highlight),u_accent:new o.aR(b,c.u_accent)}),hillshadePrepare:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_image:new o.aL(b,c.u_image),u_dimension:new o.aQ(b,c.u_dimension),u_zoom:new o.aM(b,c.u_zoom),u_unpack:new o.aO(b,c.u_unpack)}),line:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_ratio:new o.aM(b,c.u_ratio),u_device_pixel_ratio:new o.aM(b,c.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(b,c.u_units_to_pixels)}),lineGradient:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_ratio:new o.aM(b,c.u_ratio),u_device_pixel_ratio:new o.aM(b,c.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(b,c.u_units_to_pixels),u_image:new o.aL(b,c.u_image),u_image_height:new o.aM(b,c.u_image_height)}),linePattern:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_texsize:new o.aQ(b,c.u_texsize),u_ratio:new o.aM(b,c.u_ratio),u_device_pixel_ratio:new o.aM(b,c.u_device_pixel_ratio),u_image:new o.aL(b,c.u_image),u_units_to_pixels:new o.aQ(b,c.u_units_to_pixels),u_scale:new o.aP(b,c.u_scale),u_fade:new o.aM(b,c.u_fade)}),lineSDF:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_ratio:new o.aM(b,c.u_ratio),u_device_pixel_ratio:new o.aM(b,c.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(b,c.u_units_to_pixels),u_patternscale_a:new o.aQ(b,c.u_patternscale_a),u_patternscale_b:new o.aQ(b,c.u_patternscale_b),u_sdfgamma:new o.aM(b,c.u_sdfgamma),u_image:new o.aL(b,c.u_image),u_tex_y_a:new o.aM(b,c.u_tex_y_a),u_tex_y_b:new o.aM(b,c.u_tex_y_b),u_mix:new o.aM(b,c.u_mix)}),raster:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_tl_parent:new o.aQ(b,c.u_tl_parent),u_scale_parent:new o.aM(b,c.u_scale_parent),u_buffer_scale:new o.aM(b,c.u_buffer_scale),u_fade_t:new o.aM(b,c.u_fade_t),u_opacity:new o.aM(b,c.u_opacity),u_image0:new o.aL(b,c.u_image0),u_image1:new o.aL(b,c.u_image1),u_brightness_low:new o.aM(b,c.u_brightness_low),u_brightness_high:new o.aM(b,c.u_brightness_high),u_saturation_factor:new o.aM(b,c.u_saturation_factor),u_contrast_factor:new o.aM(b,c.u_contrast_factor),u_spin_weights:new o.aP(b,c.u_spin_weights)}),symbolIcon:(b,c)=>({u_is_size_zoom_constant:new o.aL(b,c.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(b,c.u_is_size_feature_constant),u_size_t:new o.aM(b,c.u_size_t),u_size:new o.aM(b,c.u_size),u_camera_to_center_distance:new o.aM(b,c.u_camera_to_center_distance),u_pitch:new o.aM(b,c.u_pitch),u_rotate_symbol:new o.aL(b,c.u_rotate_symbol),u_aspect_ratio:new o.aM(b,c.u_aspect_ratio),u_fade_change:new o.aM(b,c.u_fade_change),u_matrix:new o.aN(b,c.u_matrix),u_label_plane_matrix:new o.aN(b,c.u_label_plane_matrix),u_coord_matrix:new o.aN(b,c.u_coord_matrix),u_is_text:new o.aL(b,c.u_is_text),u_pitch_with_map:new o.aL(b,c.u_pitch_with_map),u_texsize:new o.aQ(b,c.u_texsize),u_texture:new o.aL(b,c.u_texture)}),symbolSDF:(b,c)=>({u_is_size_zoom_constant:new o.aL(b,c.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(b,c.u_is_size_feature_constant),u_size_t:new o.aM(b,c.u_size_t),u_size:new o.aM(b,c.u_size),u_camera_to_center_distance:new o.aM(b,c.u_camera_to_center_distance),u_pitch:new o.aM(b,c.u_pitch),u_rotate_symbol:new o.aL(b,c.u_rotate_symbol),u_aspect_ratio:new o.aM(b,c.u_aspect_ratio),u_fade_change:new o.aM(b,c.u_fade_change),u_matrix:new o.aN(b,c.u_matrix),u_label_plane_matrix:new o.aN(b,c.u_label_plane_matrix),u_coord_matrix:new o.aN(b,c.u_coord_matrix),u_is_text:new o.aL(b,c.u_is_text),u_pitch_with_map:new o.aL(b,c.u_pitch_with_map),u_texsize:new o.aQ(b,c.u_texsize),u_texture:new o.aL(b,c.u_texture),u_gamma_scale:new o.aM(b,c.u_gamma_scale),u_device_pixel_ratio:new o.aM(b,c.u_device_pixel_ratio),u_is_halo:new o.aL(b,c.u_is_halo)}),symbolTextAndIcon:(b,c)=>({u_is_size_zoom_constant:new o.aL(b,c.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(b,c.u_is_size_feature_constant),u_size_t:new o.aM(b,c.u_size_t),u_size:new o.aM(b,c.u_size),u_camera_to_center_distance:new o.aM(b,c.u_camera_to_center_distance),u_pitch:new o.aM(b,c.u_pitch),u_rotate_symbol:new o.aL(b,c.u_rotate_symbol),u_aspect_ratio:new o.aM(b,c.u_aspect_ratio),u_fade_change:new o.aM(b,c.u_fade_change),u_matrix:new o.aN(b,c.u_matrix),u_label_plane_matrix:new o.aN(b,c.u_label_plane_matrix),u_coord_matrix:new o.aN(b,c.u_coord_matrix),u_is_text:new o.aL(b,c.u_is_text),u_pitch_with_map:new o.aL(b,c.u_pitch_with_map),u_texsize:new o.aQ(b,c.u_texsize),u_texsize_icon:new o.aQ(b,c.u_texsize_icon),u_texture:new o.aL(b,c.u_texture),u_texture_icon:new o.aL(b,c.u_texture_icon),u_gamma_scale:new o.aM(b,c.u_gamma_scale),u_device_pixel_ratio:new o.aM(b,c.u_device_pixel_ratio),u_is_halo:new o.aL(b,c.u_is_halo)}),background:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_opacity:new o.aM(b,c.u_opacity),u_color:new o.aR(b,c.u_color)}),backgroundPattern:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_opacity:new o.aM(b,c.u_opacity),u_image:new o.aL(b,c.u_image),u_pattern_tl_a:new o.aQ(b,c.u_pattern_tl_a),u_pattern_br_a:new o.aQ(b,c.u_pattern_br_a),u_pattern_tl_b:new o.aQ(b,c.u_pattern_tl_b),u_pattern_br_b:new o.aQ(b,c.u_pattern_br_b),u_texsize:new o.aQ(b,c.u_texsize),u_mix:new o.aM(b,c.u_mix),u_pattern_size_a:new o.aQ(b,c.u_pattern_size_a),u_pattern_size_b:new o.aQ(b,c.u_pattern_size_b),u_scale_a:new o.aM(b,c.u_scale_a),u_scale_b:new o.aM(b,c.u_scale_b),u_pixel_coord_upper:new o.aQ(b,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(b,c.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aM(b,c.u_tile_units_to_pixels)}),terrain:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_texture:new o.aL(b,c.u_texture),u_ele_delta:new o.aM(b,c.u_ele_delta)}),terrainDepth:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_ele_delta:new o.aM(b,c.u_ele_delta)}),terrainCoords:(b,c)=>({u_matrix:new o.aN(b,c.u_matrix),u_texture:new o.aL(b,c.u_texture),u_terrain_coords_id:new o.aM(b,c.u_terrain_coords_id),u_ele_delta:new o.aM(b,c.u_ele_delta)})};class Ld{constructor(c,g,w){this.context=c;const C=c.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!w,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const g=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),g.bufferSubData(g.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ju={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Od{constructor(c,g,w,C){this.length=g.length,this.attributes=w,this.itemSize=g.bytesPerElement,this.dynamicDraw=C,this.context=c;const S=c.gl;this.buffer=S.createBuffer(),c.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){if(c.length!==this.length)throw new Error(`Length of new data is ${c.length}, which doesn't match current length of ${this.length}`);const g=this.context.gl;this.bind(),g.bufferSubData(g.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,g){for(let w=0;w<this.attributes.length;w++){const C=g.attributes[this.attributes[w].name];C!==void 0&&c.enableVertexAttribArray(C)}}setVertexAttribPointers(c,g,w){for(let C=0;C<this.attributes.length;C++){const S=this.attributes[C],I=g.attributes[S.name];I!==void 0&&c.vertexAttribPointer(I,S.components,c[Ju[S.type]],!1,this.itemSize,S.offset+this.itemSize*(w||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const kc=new WeakMap;function il(b){var c;if(kc.has(b))return kc.get(b);{const g=(c=b.getParameter(b.VERSION))===null||c===void 0?void 0:c.startsWith("WebGL 2.0");return kc.set(b,g),g}}class Dr{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Nd extends Dr{getDefault(){return o.aT.transparent}set(c){const g=this.current;(c.r!==g.r||c.g!==g.g||c.b!==g.b||c.a!==g.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Os extends Dr{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Ns extends Dr{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class fg extends Dr{getDefault(){return[!0,!0,!0,!0]}set(c){const g=this.current;(c[0]!==g[0]||c[1]!==g[1]||c[2]!==g[2]||c[3]!==g[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Bd extends Dr{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class zd extends Dr{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class pg extends Dr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const g=this.current;(c.func!==g.func||c.ref!==g.ref||c.mask!==g.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class gg extends Dr{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const g=this.current;(c[0]!==g[0]||c[1]!==g[1]||c[2]!==g[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class Gd extends Dr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;c?g.enable(g.STENCIL_TEST):g.disable(g.STENCIL_TEST),this.current=c,this.dirty=!1}}class mg extends Dr{getDefault(){return[0,1]}set(c){const g=this.current;(c[0]!==g[0]||c[1]!==g[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class vg extends Dr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;c?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST),this.current=c,this.dirty=!1}}class Vd extends Dr{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class Kv extends Dr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;c?g.enable(g.BLEND):g.disable(g.BLEND),this.current=c,this.dirty=!1}}class Zv extends Dr{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const g=this.current;(c[0]!==g[0]||c[1]!==g[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class Lc extends Dr{getDefault(){return o.aT.transparent}set(c){const g=this.current;(c.r!==g.r||c.g!==g.g||c.b!==g.b||c.a!==g.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class a_ extends Dr{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class l_ extends Dr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;c?g.enable(g.CULL_FACE):g.disable(g.CULL_FACE),this.current=c,this.dirty=!1}}class c_ extends Dr{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class u_ extends Dr{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class h_ extends Dr{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class d_ extends Dr{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class yg extends Dr{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const g=this.current;(c[0]!==g[0]||c[1]!==g[1]||c[2]!==g[2]||c[3]!==g[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Hd extends Dr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class wg extends Dr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.bindRenderbuffer(g.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class xg extends Dr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.bindTexture(g.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Oc extends Dr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.bindBuffer(g.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Xv extends Dr{getDefault(){return null}set(c){const g=this.gl;g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Yv extends Dr{getDefault(){return null}set(c){var g;if(c===this.current&&!this.dirty)return;const w=this.gl;il(w)?w.bindVertexArray(c):(g=w.getExtension("OES_vertex_array_object"))===null||g===void 0||g.bindVertexArrayOES(c),this.current=c,this.dirty=!1}}class Cg extends Dr{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class Gl extends Dr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Qv extends Dr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class nl extends Dr{constructor(c,g){super(c),this.context=c,this.parent=g}getDefault(){return null}}class Nc extends nl{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class Jv extends nl{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class _g extends nl{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,g.DEPTH_STENCIL_ATTACHMENT,g.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Gr{constructor(c,g,w,C,S){this.context=c,this.width=g,this.height=w;const I=c.gl,L=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new Nc(c,L),C)this.depthAttachment=S?new _g(c,L):new Jv(c,L);else if(S)throw new Error("Stencil cannot be setted without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const c=this.context.gl,g=this.colorAttachment.get();if(g&&c.deleteTexture(g),this.depthAttachment){const w=this.depthAttachment.get();w&&c.deleteRenderbuffer(w)}c.deleteFramebuffer(this.framebuffer)}}class Ci{constructor(c,g,w){this.blendFunction=c,this.blendColor=g,this.mask=w}}Ci.Replace=[1,0],Ci.disabled=new Ci(Ci.Replace,o.aT.transparent,[!1,!1,!1,!1]),Ci.unblended=new Ci(Ci.Replace,o.aT.transparent,[!0,!0,!0,!0]),Ci.alphaBlended=new Ci([1,771],o.aT.transparent,[!0,!0,!0,!0]);class f_{constructor(c){var g,w;if(this.gl=c,this.clearColor=new Nd(this),this.clearDepth=new Os(this),this.clearStencil=new Ns(this),this.colorMask=new fg(this),this.depthMask=new Bd(this),this.stencilMask=new zd(this),this.stencilFunc=new pg(this),this.stencilOp=new gg(this),this.stencilTest=new Gd(this),this.depthRange=new mg(this),this.depthTest=new vg(this),this.depthFunc=new Vd(this),this.blend=new Kv(this),this.blendFunc=new Zv(this),this.blendColor=new Lc(this),this.blendEquation=new a_(this),this.cullFace=new l_(this),this.cullFaceSide=new c_(this),this.frontFace=new u_(this),this.program=new h_(this),this.activeTexture=new d_(this),this.viewport=new yg(this),this.bindFramebuffer=new Hd(this),this.bindRenderbuffer=new wg(this),this.bindTexture=new xg(this),this.bindVertexBuffer=new Oc(this),this.bindElementBuffer=new Xv(this),this.bindVertexArray=new Yv(this),this.pixelStoreUnpack=new Cg(this),this.pixelStoreUnpackPremultiplyAlpha=new Gl(this),this.pixelStoreUnpackFlipY=new Qv(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),il(c)){this.HALF_FLOAT=c.HALF_FLOAT;const C=c.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(g=c.RGBA16F)!==null&&g!==void 0?g:C==null?void 0:C.RGBA16F_EXT,this.RGB16F=(w=c.RGB16F)!==null&&w!==void 0?w:C==null?void 0:C.RGB16F_EXT,c.getExtension("EXT_color_buffer_float")}else{c.getExtension("EXT_color_buffer_half_float"),c.getExtension("OES_texture_half_float_linear");const C=c.getExtension("OES_texture_half_float");this.HALF_FLOAT=C==null?void 0:C.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,g){return new Ld(this,c,g)}createVertexBuffer(c,g,w){return new Od(this,c,g,w)}createRenderbuffer(c,g,w){const C=this.gl,S=C.createRenderbuffer();return this.bindRenderbuffer.set(S),C.renderbufferStorage(C.RENDERBUFFER,c,g,w),this.bindRenderbuffer.set(null),S}createFramebuffer(c,g,w,C){return new Gr(this,c,g,w,C)}clear({color:c,depth:g,stencil:w}){const C=this.gl;let S=0;c&&(S|=C.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),g!==void 0&&(S|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),w!==void 0&&(S|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(w),this.stencilMask.set(255)),C.clear(S)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){o.aG(c.blendFunction,Ci.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}createVertexArray(){var c;return il(this.gl)?this.gl.createVertexArray():(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.createVertexArrayOES()}deleteVertexArray(c){var g;return il(this.gl)?this.gl.deleteVertexArray(c):(g=this.gl.getExtension("OES_vertex_array_object"))===null||g===void 0?void 0:g.deleteVertexArrayOES(c)}unbindVAO(){this.bindVertexArray.set(null)}}class kr{constructor(c,g,w){this.func=c,this.mask=g,this.range=w}}kr.ReadOnly=!1,kr.ReadWrite=!0,kr.disabled=new kr(519,kr.ReadOnly,[0,1]);const Vl=7680;class _i{constructor(c,g,w,C,S,I){this.test=c,this.ref=g,this.mask=w,this.fail=C,this.depthFail=S,this.pass=I}}_i.disabled=new _i({func:519,mask:0},0,0,Vl,Vl,Vl);class mi{constructor(c,g,w){this.enable=c,this.mode=g,this.frontFace=w}}let eh;function ey(b,c,g,w,C,S,I){const L=b.context,B=L.gl,H=b.useProgram("collisionBox"),W=[];let K=0,re=0;for(let Me=0;Me<w.length;Me++){const Ue=w[Me],it=c.getTile(Ue),nt=it.getBucket(g);if(!nt)continue;let vt=Ue.posMatrix;C[0]===0&&C[1]===0||(vt=b.translatePosMatrix(Ue.posMatrix,it,C,S));const Ct=I?nt.textCollisionBox:nt.iconCollisionBox,xt=nt.collisionCircleArray;if(xt.length>0){const Pt=o.Z(),ir=vt;o.aU(Pt,nt.placementInvProjMatrix,b.transform.glCoordMatrix),o.aU(Pt,Pt,nt.placementViewportMatrix),W.push({circleArray:xt,circleOffset:re,transform:ir,invTransform:Pt,coord:Ue}),K+=xt.length/4,re=K}Ct&&H.draw(L,B.LINES,kr.disabled,_i.disabled,b.colorModeForRenderPass(),mi.disabled,lg(vt,b.transform,it),b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ue),g.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,null,b.transform.zoom,null,null,Ct.collisionVertexBuffer)}if(!I||!W.length)return;const Ce=b.useProgram("collisionCircle"),xe=new o.aV;xe.resize(4*K),xe._trim();let Ee=0;for(const Me of W)for(let Ue=0;Ue<Me.circleArray.length/4;Ue++){const it=4*Ue,nt=Me.circleArray[it+0],vt=Me.circleArray[it+1],Ct=Me.circleArray[it+2],xt=Me.circleArray[it+3];xe.emplace(Ee++,nt,vt,Ct,xt,0),xe.emplace(Ee++,nt,vt,Ct,xt,1),xe.emplace(Ee++,nt,vt,Ct,xt,2),xe.emplace(Ee++,nt,vt,Ct,xt,3)}(!eh||eh.length<2*K)&&(eh=function(Me){const Ue=2*Me,it=new o.aX;it.resize(Ue),it._trim();for(let nt=0;nt<Ue;nt++){const vt=6*nt;it.uint16[vt+0]=4*nt+0,it.uint16[vt+1]=4*nt+1,it.uint16[vt+2]=4*nt+2,it.uint16[vt+3]=4*nt+2,it.uint16[vt+4]=4*nt+3,it.uint16[vt+5]=4*nt+0}return it}(K));const ye=L.createIndexBuffer(eh,!0),ze=L.createVertexBuffer(xe,o.aW.members,!0);for(const Me of W){const Ue={u_matrix:Me.transform,u_inv_matrix:Me.invTransform,u_camera_to_center_distance:(Je=b.transform).cameraToCenterDistance,u_viewport_size:[Je.width,Je.height]};Ce.draw(L,B.TRIANGLES,kr.disabled,_i.disabled,b.colorModeForRenderPass(),mi.disabled,Ue,b.style.map.terrain&&b.style.map.terrain.getTerrainData(Me.coord),g.id,ze,ye,o.S.simpleSegment(0,2*Me.circleOffset,Me.circleArray.length,Me.circleArray.length/2),null,b.transform.zoom,null,null,null)}var Je;ze.destroy(),ye.destroy()}mi.disabled=new mi(!1,1029,2305),mi.backCCW=new mi(!0,1029,2305);const bg=o.ao(new Float32Array(16));function Ud(b,c,g,w,C,S){const{horizontalAlign:I,verticalAlign:L}=o.au(b);return new o.P((-(I-.5)*c/C+w[0])*S,(-(L-.5)*g/C+w[1])*S)}function Wd(b,c,g,w,C,S,I,L,B,H,W){const K=b.text.placedSymbolArray,re=b.text.dynamicLayoutVertexArray,Ce=b.icon.dynamicLayoutVertexArray,xe={};re.clear();for(let Ee=0;Ee<K.length;Ee++){const ye=K.get(Ee),ze=ye.hidden||!ye.crossTileID||b.allowVerticalPlacement&&!ye.placedOrientation?null:w[ye.crossTileID];if(ze){const Je=new o.P(ye.anchorX,ye.anchorY),Me=Yr(Je,g?I:S,W),Ue=ks(C.cameraToCenterDistance,Me.signedDistanceFromCamera);let it=o.aj(b.textSizeData,B,ye)*Ue/o.ap;g&&(it*=b.tilePixelRatio/L);const{width:nt,height:vt,anchor:Ct,textOffset:xt,textBoxScale:Pt}=ze,ir=Ud(Ct,nt,vt,xt,Pt,it),Pr=g?Yr(Je.add(ir),S,W).point:Me.point.add(c?ir.rotate(-C.angle):ir),Nt=b.allowVerticalPlacement&&ye.placedOrientation===o.ai.vertical?Math.PI/2:0;for(let gr=0;gr<ye.numGlyphs;gr++)o.ak(re,Pr,Nt);H&&ye.associatedIconIndex>=0&&(xe[ye.associatedIconIndex]={shiftedAnchor:Pr,angle:Nt})}else ge(ye.numGlyphs,re)}if(H){Ce.clear();const Ee=b.icon.placedSymbolArray;for(let ye=0;ye<Ee.length;ye++){const ze=Ee.get(ye);if(ze.hidden)ge(ze.numGlyphs,Ce);else{const Je=xe[ye];if(Je)for(let Me=0;Me<ze.numGlyphs;Me++)o.ak(Ce,Je.shiftedAnchor,Je.angle);else ge(ze.numGlyphs,Ce)}}b.icon.dynamicLayoutVertexBuffer.updateData(Ce)}b.text.dynamicLayoutVertexBuffer.updateData(re)}function Sg(b,c,g){return g.iconsInText&&c?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function jd(b,c,g,w,C,S,I,L,B,H,W,K){const re=b.context,Ce=re.gl,xe=b.transform,Ee=L==="map",ye=B==="map",ze=L!=="viewport"&&g.layout.get("symbol-placement")!=="point",Je=Ee&&!ye&&!ze,Me=!g.layout.get("symbol-sort-key").isConstant();let Ue=!1;const it=b.depthModeForSublayer(0,kr.ReadOnly),nt=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),vt=[];for(const Ct of w){const xt=c.getTile(Ct),Pt=xt.getBucket(g);if(!Pt)continue;const ir=C?Pt.text:Pt.icon;if(!ir||!ir.segments.get().length||!ir.hasVisibleVertices)continue;const Pr=ir.programConfigurations.get(g.id),Nt=C||Pt.sdfIcons,gr=C?Pt.textSizeData:Pt.iconSizeData,or=ye||xe.pitch!==0,$r=b.useProgram(Sg(Nt,C,Pt),Pr),Tr=o.ah(gr,xe.zoom),Sr=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ct);let Mr,Li,ri,En,cn=[0,0],Ui=null;if(C)Li=xt.glyphAtlasTexture,ri=Ce.LINEAR,Mr=xt.glyphAtlasTexture.size,Pt.iconsInText&&(cn=xt.imageAtlasTexture.size,Ui=xt.imageAtlasTexture,En=or||b.options.rotating||b.options.zooming||gr.kind==="composite"||gr.kind==="camera"?Ce.LINEAR:Ce.NEAREST);else{const Oi=g.layout.get("icon-size").constantOr(0)!==1||Pt.iconsNeedLinear;Li=xt.imageAtlasTexture,ri=Nt||b.options.rotating||b.options.zooming||Oi||or?Ce.LINEAR:Ce.NEAREST,Mr=xt.imageAtlasTexture.size}const Gs=Ne(xt,1,b.transform.zoom),di=Tt(Ct.posMatrix,ye,Ee,b.transform,Gs),Yo=Ji(Ct.posMatrix,ye,Ee,b.transform,Gs),Qo=nt&&Pt.hasTextData(),ll=g.layout.get("icon-text-fit")!=="none"&&Qo&&Pt.hasIconData();if(ze){const Oi=b.style.map.terrain?(vs,Ni)=>b.style.map.terrain.getElevation(Ct,vs,Ni):null,un=g.layout.get("text-rotation-alignment")==="map";Ft(Pt,Ct.posMatrix,b,C,di,Yo,ye,H,un,Oi)}const $l=b.translatePosMatrix(Ct.posMatrix,xt,S,I),Wc=ze||C&&nt||ll?bg:di,On=b.translatePosMatrix(Yo,xt,S,I,!0),Rn=Nt&&g.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Kn;Kn=Nt?Pt.iconsInText?zl(gr.kind,Tr,Je,ye,b,$l,Wc,On,Mr,cn):dg(gr.kind,Tr,Je,ye,b,$l,Wc,On,C,Mr):hg(gr.kind,Tr,Je,ye,b,$l,Wc,On,C,Mr);const ql={program:$r,buffers:ir,uniformValues:Kn,atlasTexture:Li,atlasTextureIcon:Ui,atlasInterpolation:ri,atlasInterpolationIcon:En,isSDF:Nt,hasHalo:Rn};if(Me&&Pt.canOverlap){Ue=!0;const Oi=ir.segments.get();for(const un of Oi)vt.push({segments:new o.S([un]),sortKey:un.sortKey,state:ql,terrainData:Sr})}else vt.push({segments:ir.segments,sortKey:0,state:ql,terrainData:Sr})}Ue&&vt.sort((Ct,xt)=>Ct.sortKey-xt.sortKey);for(const Ct of vt){const xt=Ct.state;if(re.activeTexture.set(Ce.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,Ce.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(re.activeTexture.set(Ce.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,Ce.CLAMP_TO_EDGE)),xt.isSDF){const Pt=xt.uniformValues;xt.hasHalo&&(Pt.u_is_halo=1,Eg(xt.buffers,Ct.segments,g,b,xt.program,it,W,K,Pt,Ct.terrainData)),Pt.u_is_halo=0}Eg(xt.buffers,Ct.segments,g,b,xt.program,it,W,K,xt.uniformValues,Ct.terrainData)}}function Eg(b,c,g,w,C,S,I,L,B,H){const W=w.context;C.draw(W,W.gl.TRIANGLES,S,I,L,mi.disabled,B,H,g.id,b.layoutVertexBuffer,b.indexBuffer,c,g.paint,w.transform.zoom,b.programConfigurations.get(g.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function th(b,c,g,w,C){if(!g||!w||!w.imageAtlas)return;const S=w.imageAtlas.patternPositions;let I=S[g.to.toString()],L=S[g.from.toString()];if(!I&&L&&(I=L),!L&&I&&(L=I),!I||!L){const B=C.getPaintProperty(c);I=S[B],L=S[B]}I&&L&&b.setConstantPatternPositions(I,L)}function rh(b,c,g,w,C,S,I){const L=b.context.gl,B="fill-pattern",H=g.paint.get(B),W=H&&H.constantOr(1),K=g.getCrossfadeParameters();let re,Ce,xe,Ee,ye;I?(Ce=W&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",re=L.LINES):(Ce=W?"fillPattern":"fill",re=L.TRIANGLES);const ze=H.constantOr(null);for(const Je of w){const Me=c.getTile(Je);if(W&&!Me.patternsLoaded())continue;const Ue=Me.getBucket(g);if(!Ue)continue;const it=Ue.programConfigurations.get(g.id),nt=b.useProgram(Ce,it),vt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Je);W&&(b.context.activeTexture.set(L.TEXTURE0),Me.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),it.updatePaintBuffers(K)),th(it,B,ze,Me,g);const Ct=vt?Je:null,xt=b.translatePosMatrix(Ct?Ct.posMatrix:Je.posMatrix,Me,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(I){Ee=Ue.indexBuffer2,ye=Ue.segments2;const Pt=[L.drawingBufferWidth,L.drawingBufferHeight];xe=Ce==="fillOutlinePattern"&&W?Ad(xt,b,K,Me,Pt):Fd(xt,Pt)}else Ee=Ue.indexBuffer,ye=Ue.segments,xe=W?ag(xt,b,K,Me):Vv(xt);nt.draw(b.context,re,C,b.stencilModeForClipping(Je),S,mi.disabled,xe,vt,g.id,Ue.layoutVertexBuffer,Ee,ye,g.paint,b.transform.zoom,it)}}function ih(b,c,g,w,C,S,I){const L=b.context,B=L.gl,H="fill-extrusion-pattern",W=g.paint.get(H),K=W.constantOr(1),re=g.getCrossfadeParameters(),Ce=g.paint.get("fill-extrusion-opacity"),xe=W.constantOr(null);for(const Ee of w){const ye=c.getTile(Ee),ze=ye.getBucket(g);if(!ze)continue;const Je=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ee),Me=ze.programConfigurations.get(g.id),Ue=b.useProgram(K?"fillExtrusionPattern":"fillExtrusion",Me);K&&(b.context.activeTexture.set(B.TEXTURE0),ye.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Me.updatePaintBuffers(re)),th(Me,H,xe,ye,g);const it=b.translatePosMatrix(Ee.posMatrix,ye,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),nt=g.paint.get("fill-extrusion-vertical-gradient"),vt=K?tl(it,b,nt,Ce,Ee,re,ye):og(it,b,nt,Ce);Ue.draw(L,L.gl.TRIANGLES,C,S,I,mi.backCCW,vt,Je,g.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,g.paint,b.transform.zoom,Me,b.style.map.terrain&&ze.centroidVertexBuffer)}}function p_(b,c,g,w,C,S,I){const L=b.context,B=L.gl,H=g.fbo;if(!H)return;const W=b.useProgram("hillshade"),K=b.style.map.terrain&&b.style.map.terrain.getTerrainData(c);L.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,H.colorAttachment.get()),W.draw(L,B.TRIANGLES,C,S,I,mi.disabled,((re,Ce,xe,Ee)=>{const ye=xe.paint.get("hillshade-shadow-color"),ze=xe.paint.get("hillshade-highlight-color"),Je=xe.paint.get("hillshade-accent-color");let Me=xe.paint.get("hillshade-illumination-direction")*(Math.PI/180);xe.paint.get("hillshade-illumination-anchor")==="viewport"&&(Me-=re.transform.angle);const Ue=!re.options.moving;return{u_matrix:Ee?Ee.posMatrix:re.transform.calculatePosMatrix(Ce.tileID.toUnwrapped(),Ue),u_image:0,u_latrange:cg(0,Ce.tileID),u_light:[xe.paint.get("hillshade-exaggeration"),Me],u_shadow:ye,u_highlight:ze,u_accent:Je}})(b,g,w,K?c:null),K,w.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}function Rg(b,c,g,w,C,S){const I=b.context,L=I.gl,B=c.dem;if(B&&B.data){const H=B.dim,W=B.stride,K=B.getPixels();if(I.activeTexture.set(L.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||b.getTileTexture(W),c.demTexture){const Ce=c.demTexture;Ce.update(K,{premultiply:!1}),Ce.bind(L.NEAREST,L.CLAMP_TO_EDGE)}else c.demTexture=new me(I,K,L.RGBA,{premultiply:!1}),c.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE);I.activeTexture.set(L.TEXTURE0);let re=c.fbo;if(!re){const Ce=new me(I,{width:H,height:H,data:null},L.RGBA);Ce.bind(L.LINEAR,L.CLAMP_TO_EDGE),re=c.fbo=I.createFramebuffer(H,H,!0,!1),re.colorAttachment.set(Ce.texture)}I.bindFramebuffer.set(re.framebuffer),I.viewport.set([0,0,H,H]),b.useProgram("hillshadePrepare").draw(I,L.TRIANGLES,w,C,S,mi.disabled,((Ce,xe)=>{const Ee=xe.stride,ye=o.Z();return o.aS(ye,0,o.N,-o.N,0,0,1),o.$(ye,ye,[0,-o.N,0]),{u_matrix:ye,u_image:1,u_dimension:[Ee,Ee],u_zoom:Ce.overscaledZ,u_unpack:xe.getUnpackVector()}})(c.tileID,B),null,g.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments),c.needsHillshadePrepare=!1}}function g_(b,c,g,w,C,S){const I=w.paint.get("raster-fade-duration");if(!S&&I>0){const L=o.h.now(),B=(L-b.timeAdded)/I,H=c?(L-c.timeAdded)/I:-1,W=g.getSource(),K=C.coveringZoomLevel({tileSize:W.tileSize,roundZoom:W.roundZoom}),re=!c||Math.abs(c.tileID.overscaledZ-K)>Math.abs(b.tileID.overscaledZ-K),Ce=re&&b.refreshedUponExpiration?1:o.ad(re?B:1-H,0,1);return b.refreshedUponExpiration&&B>=1&&(b.refreshedUponExpiration=!1),c?{opacity:1,mix:1-Ce}:{opacity:Ce,mix:0}}return{opacity:1,mix:0}}const ty=new o.aT(1,0,0,1),$d=new o.aT(0,1,0,1),Tg=new o.aT(0,0,1,1),ry=new o.aT(1,0,1,1),iy=new o.aT(0,1,1,1);function nh(b,c,g,w){Kd(b,0,c+g/2,b.transform.width,g,w)}function qd(b,c,g,w){Kd(b,c-g/2,0,g,b.transform.height,w)}function Kd(b,c,g,w,C,S){const I=b.context,L=I.gl;L.enable(L.SCISSOR_TEST),L.scissor(c*b.pixelRatio,g*b.pixelRatio,w*b.pixelRatio,C*b.pixelRatio),I.clear({color:S}),L.disable(L.SCISSOR_TEST)}function ny(b,c,g){const w=b.context,C=w.gl,S=g.posMatrix,I=b.useProgram("debug"),L=kr.disabled,B=_i.disabled,H=b.colorModeForRenderPass(),W="$debug",K=b.style.map.terrain&&b.style.map.terrain.getTerrainData(g);w.activeTexture.set(C.TEXTURE0);const re=c.getTileByID(g.key).latestRawTileData,Ce=Math.floor((re&&re.byteLength||0)/1024),xe=c.getTile(g).tileSize,Ee=512/Math.min(xe,512)*(g.overscaledZ/b.transform.zoom)*.5;let ye=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(ye+=` => ${g.overscaledZ}`),function(ze,Je){ze.initDebugOverlayCanvas();const Me=ze.debugOverlayCanvas,Ue=ze.context.gl,it=ze.debugOverlayCanvas.getContext("2d");it.clearRect(0,0,Me.width,Me.height),it.shadowColor="white",it.shadowBlur=2,it.lineWidth=1.5,it.strokeStyle="white",it.textBaseline="top",it.font="bold 36px Open Sans, sans-serif",it.fillText(Je,5,5),it.strokeText(Je,5,5),ze.debugOverlayTexture.update(Me),ze.debugOverlayTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE)}(b,`${ye} ${Ce}kB`),I.draw(w,C.TRIANGLES,L,B,Ci.alphaBlended,mi.disabled,Qu(S,o.aT.transparent,Ee),null,W,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),I.draw(w,C.LINE_STRIP,L,B,H,mi.disabled,Qu(S,o.aT.red),K,W,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function Pi(b,c,g){const w=b.context,C=w.gl,S=b.colorModeForRenderPass(),I=new kr(C.LEQUAL,kr.ReadWrite,b.depthRangeFor3D),L=b.useProgram("terrain"),B=c.getTerrainMesh();w.bindFramebuffer.set(null),w.viewport.set([0,0,b.width,b.height]);for(const H of g){const W=b.renderToTexture.getTexture(H),K=c.getTerrainData(H.tileID);w.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,W.texture);const re={u_matrix:b.transform.calculatePosMatrix(H.tileID.toUnwrapped()),u_texture:0,u_ele_delta:c.getMeshFrameDelta(b.transform.zoom)};L.draw(w,C.TRIANGLES,I,_i.disabled,S,mi.backCCW,re,K,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}}class Hl{constructor(c,g){this.context=new f_(c),this.transform=g,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.Z(),renderTime:0},this.setup(),this.numSublayers=Jt.maxUnderzooming+Jt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $n}resize(c,g,w){if(this.width=Math.floor(c*w),this.height=Math.floor(g*w),this.pixelRatio=w,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const C of this.style._order)this.style._layers[C].resize()}setup(){const c=this.context,g=new o.a_;g.emplaceBack(0,0),g.emplaceBack(o.N,0),g.emplaceBack(0,o.N),g.emplaceBack(o.N,o.N),this.tileExtentBuffer=c.createVertexBuffer(g,Pd.members),this.tileExtentSegments=o.S.simpleSegment(0,0,4,2);const w=new o.a_;w.emplaceBack(0,0),w.emplaceBack(o.N,0),w.emplaceBack(0,o.N),w.emplaceBack(o.N,o.N),this.debugBuffer=c.createVertexBuffer(w,Pd.members),this.debugSegments=o.S.simpleSegment(0,0,4,5);const C=new o.V;C.emplaceBack(0,0,0,0),C.emplaceBack(o.N,0,o.N,0),C.emplaceBack(0,o.N,0,o.N),C.emplaceBack(o.N,o.N,o.N,o.N),this.rasterBoundsBuffer=c.createVertexBuffer(C,ot.members),this.rasterBoundsSegments=o.S.simpleSegment(0,0,4,2);const S=new o.a_;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(S,Pd.members),this.viewportSegments=o.S.simpleSegment(0,0,4,2);const I=new o.a$;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(I);const L=new o.b0;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(L);const B=this.context.gl;this.stencilClearMode=new _i({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const c=this.context,g=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const w=o.Z();o.aS(w,0,this.width,this.height,0,0,1),o.a0(w,w,[g.drawingBufferWidth,g.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(c,g.TRIANGLES,kr.disabled,this.stencilClearMode,Ci.disabled,mi.disabled,Hv(w),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(c,g){if(this.currentStencilSource===c.source||!c.isTileClipped()||!g||!g.length)return;this.currentStencilSource=c.source;const w=this.context,C=w.gl;this.nextStencilID+g.length>256&&this.clearStencil(),w.setColorMode(Ci.disabled),w.setDepthMode(kr.disabled);const S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of g){const L=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I);S.draw(w,C.TRIANGLES,kr.disabled,new _i({func:C.ALWAYS,mask:0},L,255,C.KEEP,C.KEEP,C.REPLACE),Ci.disabled,mi.disabled,Hv(I.posMatrix),B,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,g=this.context.gl;return new _i({func:g.NOTEQUAL,mask:255},c,255,g.KEEP,g.KEEP,g.REPLACE)}stencilModeForClipping(c){const g=this.context.gl;return new _i({func:g.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,g.KEEP,g.KEEP,g.REPLACE)}stencilConfigForOverlap(c){const g=this.context.gl,w=c.sort((I,L)=>L.overscaledZ-I.overscaledZ),C=w[w.length-1].overscaledZ,S=w[0].overscaledZ-C+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const I={};for(let L=0;L<S;L++)I[L+C]=new _i({func:g.GEQUAL,mask:255},L+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=S,[I,w]}return[{[C]:_i.disabled},w]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new Ci([c.CONSTANT_COLOR,c.ONE],new o.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ci.unblended:Ci.alphaBlended}depthModeForSublayer(c,g,w){if(!this.opaquePassEnabledForLayer())return kr.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new kr(w||this.context.gl.LEQUAL,g,[C,C])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,g){this.style=c,this.options=g,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(o.h.now()),this.imageManager.beginFrame();const w=this.style._order,C=this.style.sourceCaches,S={},I={},L={};for(const B in C){const H=C[B];H.used&&H.prepare(this.context),S[B]=H.getVisibleCoordinates(),I[B]=S[B].slice().reverse(),L[B]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<w.length;B++)if(this.style._layers[w[B]].is3D()){this.opaquePassCutoff=B;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const B=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!o.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||B.length)&&(o.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(H,W){const K=H.context,re=K.gl,Ce=Ci.unblended,xe=new kr(re.LEQUAL,kr.ReadWrite,[0,1]),Ee=W.getTerrainMesh(),ye=W.sourceCache.getRenderableTiles(),ze=H.useProgram("terrainDepth");K.bindFramebuffer.set(W.getFramebuffer("depth").framebuffer),K.viewport.set([0,0,H.width/devicePixelRatio,H.height/devicePixelRatio]),K.clear({color:o.aT.transparent,depth:1});for(const Je of ye){const Me=W.getTerrainData(Je.tileID),Ue={u_matrix:H.transform.calculatePosMatrix(Je.tileID.toUnwrapped()),u_ele_delta:W.getMeshFrameDelta(H.transform.zoom)};ze.draw(K,re.TRIANGLES,xe,_i.disabled,Ce,mi.backCCW,Ue,Me,"terrain",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}K.bindFramebuffer.set(null),K.viewport.set([0,0,H.width,H.height])}(this,this.style.map.terrain),function(H,W){const K=H.context,re=K.gl,Ce=Ci.unblended,xe=new kr(re.LEQUAL,kr.ReadWrite,[0,1]),Ee=W.getTerrainMesh(),ye=W.getCoordsTexture(),ze=W.sourceCache.getRenderableTiles(),Je=H.useProgram("terrainCoords");K.bindFramebuffer.set(W.getFramebuffer("coords").framebuffer),K.viewport.set([0,0,H.width/devicePixelRatio,H.height/devicePixelRatio]),K.clear({color:o.aT.transparent,depth:1}),W.coordsIndex=[];for(const Me of ze){const Ue=W.getTerrainData(Me.tileID);K.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,ye.texture);const it={u_matrix:H.transform.calculatePosMatrix(Me.tileID.toUnwrapped()),u_terrain_coords_id:(255-W.coordsIndex.length)/255,u_texture:0,u_ele_delta:W.getMeshFrameDelta(H.transform.zoom)};Je.draw(K,re.TRIANGLES,xe,_i.disabled,Ce,mi.backCCW,it,Ue,"terrain",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments),W.coordsIndex.push(Me.tileID.key)}K.bindFramebuffer.set(null),K.viewport.set([0,0,H.width,H.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const B of w){const H=this.style._layers[B];if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const W=I[H.source];(H.type==="custom"||W.length)&&this.renderLayer(this,C[H.source],H,W)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:g.showOverdrawInspector?o.aT.black:o.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=g.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[w[this.currentLayer]],H=C[B.source],W=S[B.source];this._renderTileClippingMasks(B,W),this.renderLayer(this,H,B,W)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const B=this.style._layers[w[this.currentLayer]],H=C[B.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(B))continue;const W=(B.type==="symbol"?L:I)[B.source];this._renderTileClippingMasks(B,S[B.source]),this.renderLayer(this,H,B,W)}if(this.options.showTileBoundaries){const B=function(H,W){let K=null;const re=Object.values(H._layers).flatMap(ye=>ye.source&&!ye.isHidden(W)?[H.sourceCaches[ye.source]]:[]),Ce=re.filter(ye=>ye.getSource().type==="vector"),xe=re.filter(ye=>ye.getSource().type!=="vector"),Ee=ye=>{(!K||K.getSource().maxzoom<ye.getSource().maxzoom)&&(K=ye)};return Ce.forEach(ye=>Ee(ye)),K||xe.forEach(ye=>Ee(ye)),K}(this.style,this.transform.zoom);B&&function(H,W,K){for(let re=0;re<K.length;re++)ny(H,W,K[re])}(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const H=B.transform.padding;nh(B,B.transform.height-(H.top||0),3,ty),nh(B,H.bottom||0,3,$d),qd(B,H.left||0,3,Tg),qd(B,B.transform.width-(H.right||0),3,ry);const W=B.transform.centerPoint;(function(K,re,Ce,xe){Kd(K,re-1,Ce-10,2,20,xe),Kd(K,re-10,Ce-1,20,2,xe)})(B,W.x,B.transform.height-W.y,iy)}(this),this.context.setDefault()}renderLayer(c,g,w,C){if(!w.isHidden(this.transform.zoom)&&(w.type==="background"||w.type==="custom"||(C||[]).length))switch(this.id=w.id,w.type){case"symbol":(function(S,I,L,B,H){if(S.renderPass!=="translucent")return;const W=_i.disabled,K=S.colorModeForRenderPass();(L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(re,Ce,xe,Ee,ye,ze,Je){const Me=Ce.transform,Ue=ye==="map",it=ze==="map";for(const nt of re){const vt=Ee.getTile(nt),Ct=vt.getBucket(xe);if(!Ct||!Ct.text||!Ct.text.segments.get().length)continue;const xt=o.ah(Ct.textSizeData,Me.zoom),Pt=Ne(vt,1,Ce.transform.zoom),ir=Tt(nt.posMatrix,it,Ue,Ce.transform,Pt),Pr=xe.layout.get("icon-text-fit")!=="none"&&Ct.hasIconData();if(xt){const Nt=Math.pow(2,Me.zoom-vt.tileID.overscaledZ);Wd(Ct,Ue,it,Je,Me,ir,nt.posMatrix,Nt,xt,Pr,Ce.style.map.terrain?(gr,or)=>Ce.style.map.terrain.getElevation(nt,gr,or):null)}}}(B,S,L,I,L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),H),L.paint.get("icon-opacity").constantOr(1)!==0&&jd(S,I,L,B,!1,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),L.layout.get("icon-rotation-alignment"),L.layout.get("icon-pitch-alignment"),L.layout.get("icon-keep-upright"),W,K),L.paint.get("text-opacity").constantOr(1)!==0&&jd(S,I,L,B,!0,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.layout.get("text-keep-upright"),W,K),I.map.showCollisionBoxes&&(ey(S,I,L,B,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),!0),ey(S,I,L,B,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),!1))})(c,g,w,C,this.style.placement.variableOffsets);break;case"circle":(function(S,I,L,B){if(S.renderPass!=="translucent")return;const H=L.paint.get("circle-opacity"),W=L.paint.get("circle-stroke-width"),K=L.paint.get("circle-stroke-opacity"),re=!L.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(W.constantOr(1)===0||K.constantOr(1)===0))return;const Ce=S.context,xe=Ce.gl,Ee=S.depthModeForSublayer(0,kr.ReadOnly),ye=_i.disabled,ze=S.colorModeForRenderPass(),Je=[];for(let Me=0;Me<B.length;Me++){const Ue=B[Me],it=I.getTile(Ue),nt=it.getBucket(L);if(!nt)continue;const vt=nt.programConfigurations.get(L.id),Ct=S.useProgram("circle",vt),xt=nt.layoutVertexBuffer,Pt=nt.indexBuffer,ir=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Ue),Pr={programConfiguration:vt,program:Ct,layoutVertexBuffer:xt,indexBuffer:Pt,uniformValues:rl(S,Ue,it,L),terrainData:ir};if(re){const Nt=nt.segments.get();for(const gr of Nt)Je.push({segments:new o.S([gr]),sortKey:gr.sortKey,state:Pr})}else Je.push({segments:nt.segments,sortKey:0,state:Pr})}re&&Je.sort((Me,Ue)=>Me.sortKey-Ue.sortKey);for(const Me of Je){const{programConfiguration:Ue,program:it,layoutVertexBuffer:nt,indexBuffer:vt,uniformValues:Ct,terrainData:xt}=Me.state;it.draw(Ce,xe.TRIANGLES,Ee,ye,ze,mi.disabled,Ct,xt,L.id,nt,vt,Me.segments,L.paint,S.transform.zoom,Ue)}})(c,g,w,C);break;case"heatmap":(function(S,I,L,B){if(L.paint.get("heatmap-opacity")!==0)if(S.renderPass==="offscreen"){const H=S.context,W=H.gl,K=_i.disabled,re=new Ci([W.ONE,W.ONE],o.aT.transparent,[!0,!0,!0,!0]);(function(Ce,xe,Ee){const ye=Ce.gl;Ce.activeTexture.set(ye.TEXTURE1),Ce.viewport.set([0,0,xe.width/4,xe.height/4]);let ze=Ee.heatmapFbo;if(ze)ye.bindTexture(ye.TEXTURE_2D,ze.colorAttachment.get()),Ce.bindFramebuffer.set(ze.framebuffer);else{const Je=ye.createTexture();ye.bindTexture(ye.TEXTURE_2D,Je),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_S,ye.CLAMP_TO_EDGE),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_T,ye.CLAMP_TO_EDGE),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MIN_FILTER,ye.LINEAR),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MAG_FILTER,ye.LINEAR),ze=Ee.heatmapFbo=Ce.createFramebuffer(xe.width/4,xe.height/4,!1,!1),function(Me,Ue,it,nt){var vt,Ct;const xt=Me.gl,Pt=(vt=Me.HALF_FLOAT)!==null&&vt!==void 0?vt:xt.UNSIGNED_BYTE,ir=(Ct=Me.RGBA16F)!==null&&Ct!==void 0?Ct:xt.RGBA;xt.texImage2D(xt.TEXTURE_2D,0,ir,Ue.width/4,Ue.height/4,0,xt.RGBA,Pt,null),nt.colorAttachment.set(it)}(Ce,xe,Je,ze)}})(H,S,L),H.clear({color:o.aT.transparent});for(let Ce=0;Ce<B.length;Ce++){const xe=B[Ce];if(I.hasRenderableParent(xe))continue;const Ee=I.getTile(xe),ye=Ee.getBucket(L);if(!ye)continue;const ze=ye.programConfigurations.get(L.id),Je=S.useProgram("heatmap",ze),{zoom:Me}=S.transform;Je.draw(H,W.TRIANGLES,kr.disabled,K,re,mi.disabled,s_(xe.posMatrix,Ee,Me,L.paint.get("heatmap-intensity")),null,L.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,L.paint,S.transform.zoom,ze)}H.viewport.set([0,0,S.width,S.height])}else S.renderPass==="translucent"&&(S.context.setColorMode(S.colorModeForRenderPass()),function(H,W){const K=H.context,re=K.gl,Ce=W.heatmapFbo;if(!Ce)return;K.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,Ce.colorAttachment.get()),K.activeTexture.set(re.TEXTURE1);let xe=W.colorRampTexture;xe||(xe=W.colorRampTexture=new me(K,W.colorRamp,re.RGBA)),xe.bind(re.LINEAR,re.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(K,re.TRIANGLES,kr.disabled,_i.disabled,H.colorModeForRenderPass(),mi.disabled,((Ee,ye,ze,Je)=>{const Me=o.Z();o.aS(Me,0,Ee.width,Ee.height,0,0,1);const Ue=Ee.context.gl;return{u_matrix:Me,u_world:[Ue.drawingBufferWidth,Ue.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ye.paint.get("heatmap-opacity")}})(H,W),null,W.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,W.paint,H.transform.zoom)}(S,L))})(c,g,w,C);break;case"line":(function(S,I,L,B){if(S.renderPass!=="translucent")return;const H=L.paint.get("line-opacity"),W=L.paint.get("line-width");if(H.constantOr(1)===0||W.constantOr(1)===0)return;const K=S.depthModeForSublayer(0,kr.ReadOnly),re=S.colorModeForRenderPass(),Ce=L.paint.get("line-dasharray"),xe=L.paint.get("line-pattern"),Ee=xe.constantOr(1),ye=L.paint.get("line-gradient"),ze=L.getCrossfadeParameters(),Je=Ee?"linePattern":Ce?"lineSDF":ye?"lineGradient":"line",Me=S.context,Ue=Me.gl;let it=!0;for(const nt of B){const vt=I.getTile(nt);if(Ee&&!vt.patternsLoaded())continue;const Ct=vt.getBucket(L);if(!Ct)continue;const xt=Ct.programConfigurations.get(L.id),Pt=S.context.program.get(),ir=S.useProgram(Je,xt),Pr=it||ir.program!==Pt,Nt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(nt),gr=xe.constantOr(null);if(gr&&vt.imageAtlas){const Tr=vt.imageAtlas,Sr=Tr.patternPositions[gr.to.toString()],Mr=Tr.patternPositions[gr.from.toString()];Sr&&Mr&&xt.setConstantPatternPositions(Sr,Mr)}const or=Nt?nt:null,$r=Ee?o_(S,vt,L,ze,or):Ce?Wv(S,vt,L,Ce,ze,or):ye?Uv(S,vt,L,Ct.lineClipsArray.length,or):ug(S,vt,L,or);if(Ee)Me.activeTexture.set(Ue.TEXTURE0),vt.imageAtlasTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),xt.updatePaintBuffers(ze);else if(Ce&&(Pr||S.lineAtlas.dirty))Me.activeTexture.set(Ue.TEXTURE0),S.lineAtlas.bind(Me);else if(ye){const Tr=Ct.gradients[L.id];let Sr=Tr.texture;if(L.gradientVersion!==Tr.version){let Mr=256;if(L.stepInterpolant){const Li=I.getSource().maxzoom,ri=nt.canonical.z===Li?Math.ceil(1<<S.transform.maxZoom-nt.canonical.z):1;Mr=o.ad(o.aY(Ct.maxLineLength/o.N*1024*ri),256,Me.maxTextureSize)}Tr.gradient=o.aZ({expression:L.gradientExpression(),evaluationKey:"lineProgress",resolution:Mr,image:Tr.gradient||void 0,clips:Ct.lineClipsArray}),Tr.texture?Tr.texture.update(Tr.gradient):Tr.texture=new me(Me,Tr.gradient,Ue.RGBA),Tr.version=L.gradientVersion,Sr=Tr.texture}Me.activeTexture.set(Ue.TEXTURE0),Sr.bind(L.stepInterpolant?Ue.NEAREST:Ue.LINEAR,Ue.CLAMP_TO_EDGE)}ir.draw(Me,Ue.TRIANGLES,K,S.stencilModeForClipping(nt),re,mi.disabled,$r,Nt,L.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,L.paint,S.transform.zoom,xt,Ct.layoutVertexBuffer2),it=!1}})(c,g,w,C);break;case"fill":(function(S,I,L,B){const H=L.paint.get("fill-color"),W=L.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const K=S.colorModeForRenderPass(),re=L.paint.get("fill-pattern"),Ce=S.opaquePassEnabledForLayer()&&!re.constantOr(1)&&H.constantOr(o.aT.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===Ce){const xe=S.depthModeForSublayer(1,S.renderPass==="opaque"?kr.ReadWrite:kr.ReadOnly);rh(S,I,L,B,xe,K,!1)}if(S.renderPass==="translucent"&&L.paint.get("fill-antialias")){const xe=S.depthModeForSublayer(L.getPaintProperty("fill-outline-color")?2:0,kr.ReadOnly);rh(S,I,L,B,xe,K,!0)}})(c,g,w,C);break;case"fill-extrusion":(function(S,I,L,B){const H=L.paint.get("fill-extrusion-opacity");if(H!==0&&S.renderPass==="translucent"){const W=new kr(S.context.gl.LEQUAL,kr.ReadWrite,S.depthRangeFor3D);if(H!==1||L.paint.get("fill-extrusion-pattern").constantOr(1))ih(S,I,L,B,W,_i.disabled,Ci.disabled),ih(S,I,L,B,W,S.stencilModeFor3D(),S.colorModeForRenderPass());else{const K=S.colorModeForRenderPass();ih(S,I,L,B,W,_i.disabled,K)}}})(c,g,w,C);break;case"hillshade":(function(S,I,L,B){if(S.renderPass!=="offscreen"&&S.renderPass!=="translucent")return;const H=S.context,W=S.depthModeForSublayer(0,kr.ReadOnly),K=S.colorModeForRenderPass(),[re,Ce]=S.renderPass==="translucent"?S.stencilConfigForOverlap(B):[{},B];for(const xe of Ce){const Ee=I.getTile(xe);Ee.needsHillshadePrepare!==void 0&&Ee.needsHillshadePrepare&&S.renderPass==="offscreen"?Rg(S,Ee,L,W,_i.disabled,K):S.renderPass==="translucent"&&p_(S,xe,Ee,L,W,re[xe.overscaledZ],K)}H.viewport.set([0,0,S.width,S.height])})(c,g,w,C);break;case"raster":(function(S,I,L,B){if(S.renderPass!=="translucent"||L.paint.get("raster-opacity")===0||!B.length)return;const H=S.context,W=H.gl,K=I.getSource(),re=S.useProgram("raster"),Ce=S.colorModeForRenderPass(),[xe,Ee]=K instanceof Qe?[{},B]:S.stencilConfigForOverlap(B),ye=Ee[Ee.length-1].overscaledZ,ze=!S.options.moving;for(const Je of Ee){const Me=S.depthModeForSublayer(Je.overscaledZ-ye,L.paint.get("raster-opacity")===1?kr.ReadWrite:kr.ReadOnly,W.LESS),Ue=I.getTile(Je);Ue.registerFadeDuration(L.paint.get("raster-fade-duration"));const it=I.findLoadedParent(Je,0),nt=g_(Ue,it,I,L,S.transform,S.style.map.terrain);let vt,Ct;const xt=L.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;H.activeTexture.set(W.TEXTURE0),Ue.texture.bind(xt,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(W.TEXTURE1),it?(it.texture.bind(xt,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),vt=Math.pow(2,it.tileID.overscaledZ-Ue.tileID.overscaledZ),Ct=[Ue.tileID.canonical.x*vt%1,Ue.tileID.canonical.y*vt%1]):Ue.texture.bind(xt,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST);const Pt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Je),ir=Pt?Je:null,Pr=ir?ir.posMatrix:S.transform.calculatePosMatrix(Je.toUnwrapped(),ze),Nt=$v(Pr,Ct||[0,0],vt||1,nt,L);K instanceof Qe?re.draw(H,W.TRIANGLES,Me,_i.disabled,Ce,mi.disabled,Nt,Pt,L.id,K.boundsBuffer,S.quadTriangleIndexBuffer,K.boundsSegments):re.draw(H,W.TRIANGLES,Me,xe[Je.overscaledZ],Ce,mi.disabled,Nt,Pt,L.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}})(c,g,w,C);break;case"background":(function(S,I,L,B){const H=L.paint.get("background-color"),W=L.paint.get("background-opacity");if(W===0)return;const K=S.context,re=K.gl,Ce=S.transform,xe=Ce.tileSize,Ee=L.paint.get("background-pattern");if(S.isPatternMissing(Ee))return;const ye=!Ee&&H.a===1&&W===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==ye)return;const ze=_i.disabled,Je=S.depthModeForSublayer(0,ye==="opaque"?kr.ReadWrite:kr.ReadOnly),Me=S.colorModeForRenderPass(),Ue=S.useProgram(Ee?"backgroundPattern":"background"),it=B||Ce.coveringTiles({tileSize:xe,terrain:S.style.map.terrain});Ee&&(K.activeTexture.set(re.TEXTURE0),S.imageManager.bind(S.context));const nt=L.getCrossfadeParameters();for(const vt of it){const Ct=B?vt.posMatrix:S.transform.calculatePosMatrix(vt.toUnwrapped()),xt=Ee?so(Ct,W,S,Ee,{tileID:vt,tileSize:xe},nt):Dd(Ct,W,H),Pt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(vt);Ue.draw(K,re.TRIANGLES,Je,ze,Me,mi.disabled,xt,Pt,L.id,S.tileExtentBuffer,S.quadTriangleIndexBuffer,S.tileExtentSegments)}})(c,0,w,C);break;case"custom":(function(S,I,L){const B=S.context,H=L.implementation;if(S.renderPass==="offscreen"){const W=H.prerender;W&&(S.setCustomLayerDefaults(),B.setColorMode(S.colorModeForRenderPass()),W.call(H,B.gl,S.transform.customLayerMatrix()),B.setDirty(),S.setBaseState())}else if(S.renderPass==="translucent"){S.setCustomLayerDefaults(),B.setColorMode(S.colorModeForRenderPass()),B.setStencilMode(_i.disabled);const W=H.renderingMode==="3d"?new kr(S.context.gl.LEQUAL,kr.ReadWrite,S.depthRangeFor3D):S.depthModeForSublayer(0,kr.ReadOnly);B.setDepthMode(W),H.render(B.gl,S.transform.customLayerMatrix()),B.setDirty(),S.setBaseState(),B.bindFramebuffer.set(null)}})(c,0,w)}}translatePosMatrix(c,g,w,C,S){if(!w[0]&&!w[1])return c;const I=S?C==="map"?this.transform.angle:0:C==="viewport"?-this.transform.angle:0;if(I){const H=Math.sin(I),W=Math.cos(I);w=[w[0]*W-w[1]*H,w[0]*H+w[1]*W]}const L=[S?w[0]:Ne(g,w[0],this.transform.zoom),S?w[1]:Ne(g,w[1],this.transform.zoom),0],B=new Float32Array(16);return o.$(B,c,L),B}saveTileTexture(c){const g=this._tileTextures[c.size[0]];g?g.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const g=this._tileTextures[c];return g&&g.length>0?g.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const g=this.imageManager.getPattern(c.from.toString()),w=this.imageManager.getPattern(c.to.toString());return!g||!w}useProgram(c,g){this.cache=this.cache||{};const w=c+(g?g.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[w]||(this.cache[w]=new Md(this.context,xi[c],g,kd[c],this._showOverdrawInspector,this.style.map.terrain)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new me(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:c,drawingBufferHeight:g}=this.context.gl;return this.width!==c||this.height!==g}}class gs{constructor(c,g){this.points=c,this.planes=g}static fromInvProjectionMatrix(c,g,w){const C=Math.pow(2,w),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(L=>{const B=1/(L=o.ag([],L,c))[3]/g*C;return o.b3(L,L,[B,B,1/L[3],B])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(L=>{const B=function(re,Ce){var xe=Ce[0],Ee=Ce[1],ye=Ce[2],ze=xe*xe+Ee*Ee+ye*ye;return ze>0&&(ze=1/Math.sqrt(ze)),re[0]=Ce[0]*ze,re[1]=Ce[1]*ze,re[2]=Ce[2]*ze,re}([],function(re,Ce,xe){var Ee=Ce[0],ye=Ce[1],ze=Ce[2],Je=xe[0],Me=xe[1],Ue=xe[2];return re[0]=ye*Ue-ze*Me,re[1]=ze*Je-Ee*Ue,re[2]=Ee*Me-ye*Je,re}([],ee([],S[L[0]],S[L[1]]),ee([],S[L[2]],S[L[1]]))),H=-((W=B)[0]*(K=S[L[1]])[0]+W[1]*K[1]+W[2]*K[2]);var W,K;return B.concat(H)});return new gs(S,I)}}class Bc{constructor(c,g){this.min=c,this.max=g,this.center=function(w,C,S){return w[0]=.5*C[0],w[1]=.5*C[1],w[2]=.5*C[2],w}([],function(w,C,S){return w[0]=C[0]+S[0],w[1]=C[1]+S[1],w[2]=C[2]+S[2],w}([],this.min,this.max))}quadrant(c){const g=[c%2==0,c<2],w=G(this.min),C=G(this.max);for(let S=0;S<g.length;S++)w[S]=g[S]?this.min[S]:this.center[S],C[S]=g[S]?this.center[S]:this.max[S];return C[2]=this.max[2],new Bc(w,C)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}intersects(c){const g=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let w=!0;for(let C=0;C<c.planes.length;C++){const S=c.planes[C];let I=0;for(let L=0;L<g.length;L++)o.b4(S,g[L])>=0&&I++;if(I===0)return 0;I!==g.length&&(w=!1)}if(w)return 2;for(let C=0;C<3;C++){let S=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let L=0;L<c.points.length;L++){const B=c.points[L][C]-this.min[C];S=Math.min(S,B),I=Math.max(I,B)}if(I<0||S>this.max[C]-this.min[C])return 0}return 1}}class sh{constructor(c=0,g=0,w=0,C=0){if(isNaN(c)||c<0||isNaN(g)||g<0||isNaN(w)||w<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=g,this.left=w,this.right=C}interpolate(c,g,w){return g.top!=null&&c.top!=null&&(this.top=o.B.number(c.top,g.top,w)),g.bottom!=null&&c.bottom!=null&&(this.bottom=o.B.number(c.bottom,g.bottom,w)),g.left!=null&&c.left!=null&&(this.left=o.B.number(c.left,g.left,w)),g.right!=null&&c.right!=null&&(this.right=o.B.number(c.right,g.right,w)),this}getCenter(c,g){const w=o.ad((this.left+c-this.right)/2,0,c),C=o.ad((this.top+g-this.bottom)/2,0,g);return new o.P(w,C)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new sh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Zd{constructor(c,g,w,C,S){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=S===void 0||!!S,this._minZoom=c||0,this._maxZoom=g||22,this._minPitch=w??0,this._maxPitch=C??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new sh,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const c=new Zd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return c.apply(this),c}apply(c){this.tileSize=c.tileSize,this.latRange=c.latRange,this.width=c.width,this.height=c.height,this._center=c._center,this._elevation=c._elevation,this._minEleveationForCurrentTile=c._minEleveationForCurrentTile,this.zoom=c.zoom,this.angle=c.angle,this._fov=c._fov,this._pitch=c._pitch,this._unmodified=c._unmodified,this._edgeInsets=c._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(c){const g=-o.b5(c,-180,180)*Math.PI/180;this.angle!==g&&(this._unmodified=!1,this.angle=g,this._calcMatrices(),this.rotationMatrix=function(){var w=new o.A(4);return o.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}(),function(w,C,S){var I=C[0],L=C[1],B=C[2],H=C[3],W=Math.sin(S),K=Math.cos(S);w[0]=I*K+B*W,w[1]=L*K+H*W,w[2]=I*-W+B*K,w[3]=L*-W+H*K}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const g=o.ad(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==g&&(this._unmodified=!1,this._pitch=g,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=c/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(c){const g=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==g&&(this._unmodified=!1,this._zoom=g,this.tileZoom=Math.max(0,Math.floor(g)),this.scale=this.zoomScale(g),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(c){c!==this._elevation&&(this._elevation=c,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,g,w){this._unmodified=!1,this._edgeInsets.interpolate(c,g,w),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const g=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,g)}getVisibleUnwrappedCoordinates(c){const g=[new o.b6(0,c)];if(this._renderWorldCopies){const w=this.pointCoordinate(new o.P(0,0)),C=this.pointCoordinate(new o.P(this.width,0)),S=this.pointCoordinate(new o.P(this.width,this.height)),I=this.pointCoordinate(new o.P(0,this.height)),L=Math.floor(Math.min(w.x,C.x,S.x,I.x)),B=Math.floor(Math.max(w.x,C.x,S.x,I.x)),H=1;for(let W=L-H;W<=B+H;W++)W!==0&&g.push(new o.b6(W,c))}return g}coveringTiles(c){var g,w;let C=this.coveringZoomLevel(c);const S=C;if(c.minzoom!==void 0&&C<c.minzoom)return[];c.maxzoom!==void 0&&C>c.maxzoom&&(C=c.maxzoom);const I=this.pointCoordinate(this.getCameraPoint()),L=o.U.fromLngLat(this.center),B=Math.pow(2,C),H=[B*I.x,B*I.y,0],W=[B*L.x,B*L.y,0],K=gs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,C);let re=c.minzoom||0;!c.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(re=C);const Ce=c.terrain?2/Math.min(this.tileSize,c.tileSize)*this.tileSize:3,xe=Me=>({aabb:new Bc([Me*B,0,0],[(Me+1)*B,B,0]),zoom:0,x:0,y:0,wrap:Me,fullyVisible:!1}),Ee=[],ye=[],ze=C,Je=c.reparseOverscaled?S:C;if(this._renderWorldCopies)for(let Me=1;Me<=3;Me++)Ee.push(xe(-Me)),Ee.push(xe(Me));for(Ee.push(xe(0));Ee.length>0;){const Me=Ee.pop(),Ue=Me.x,it=Me.y;let nt=Me.fullyVisible;if(!nt){const ir=Me.aabb.intersects(K);if(ir===0)continue;nt=ir===2}const vt=c.terrain?H:W,Ct=Me.aabb.distanceX(vt),xt=Me.aabb.distanceY(vt),Pt=Math.max(Math.abs(Ct),Math.abs(xt));if(Me.zoom===ze||Pt>Ce+(1<<ze-Me.zoom)-2&&Me.zoom>=re){const ir=ze-Me.zoom,Pr=H[0]-.5-(Ue<<ir),Nt=H[1]-.5-(it<<ir);ye.push({tileID:new o.O(Me.zoom===ze?Je:Me.zoom,Me.wrap,Me.zoom,Ue,it),distanceSq:q([W[0]-.5-Ue,W[1]-.5-it]),tileDistanceToCamera:Math.sqrt(Pr*Pr+Nt*Nt)})}else for(let ir=0;ir<4;ir++){const Pr=(Ue<<1)+ir%2,Nt=(it<<1)+(ir>>1),gr=Me.zoom+1;let or=Me.aabb.quadrant(ir);if(c.terrain){const $r=new o.O(gr,Me.wrap,gr,Pr,Nt),Tr=c.terrain.getMinMaxElevation($r),Sr=(g=Tr.minElevation)!==null&&g!==void 0?g:this.elevation,Mr=(w=Tr.maxElevation)!==null&&w!==void 0?w:this.elevation;or=new Bc([or.min[0],or.min[1],Sr],[or.max[0],or.max[1],Mr])}Ee.push({aabb:or,zoom:gr,x:Pr,y:Nt,wrap:Me.wrap,fullyVisible:nt})}}return ye.sort((Me,Ue)=>Me.distanceSq-Ue.distanceSq).map(Me=>Me.tileID)}resize(c,g){this.width=c,this.height=g,this.pixelsToGLUnits=[2/c,-2/g],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const g=o.ad(c.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.P(o.G(c.lng)*this.worldSize,o.H(g)*this.worldSize)}unproject(c){return new o.U(c.x/this.worldSize,c.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(c){const g=this.pointLocation(this.centerPoint,c),w=c.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-w))return;const C=this.getCameraPosition(),S=o.U.fromLngLat(C.lngLat,C.altitude),I=o.U.fromLngLat(g,w),L=S.x-I.x,B=S.y-I.y,H=S.z-I.z,W=Math.sqrt(L*L+B*B+H*H),K=this.scaleZoom(this.cameraToCenterDistance/W/this.tileSize);this._elevation=w,this._center=g,this.zoom=K}setLocationAtPoint(c,g){const w=this.pointCoordinate(g),C=this.pointCoordinate(this.centerPoint),S=this.locationCoordinate(c),I=new o.U(S.x-(w.x-C.x),S.y-(w.y-C.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(c,g){return g?this.coordinatePoint(this.locationCoordinate(c),g.getElevationForLngLatZoom(c,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(c))}pointLocation(c,g){return this.coordinateLocation(this.pointCoordinate(c,g))}locationCoordinate(c){return o.U.fromLngLat(c)}coordinateLocation(c){return c&&c.toLngLat()}pointCoordinate(c,g){if(g){const re=g.pointCoordinate(c);if(re!=null)return re}const w=[c.x,c.y,0,1],C=[c.x,c.y,1,1];o.ag(w,w,this.pixelMatrixInverse),o.ag(C,C,this.pixelMatrixInverse);const S=w[3],I=C[3],L=w[1]/S,B=C[1]/I,H=w[2]/S,W=C[2]/I,K=H===W?0:(0-H)/(W-H);return new o.U(o.B.number(w[0]/S,C[0]/I,K)/this.worldSize,o.B.number(L,B,K)/this.worldSize)}coordinatePoint(c,g=0,w=this.pixelMatrix){const C=[c.x*this.worldSize,c.y*this.worldSize,g,1];return o.ag(C,C,w),new o.P(C[0]/C[3],C[1]/C[3])}getBounds(){const c=Math.max(0,this.height/2-this.getHorizon());return new he().extend(this.pointLocation(new o.P(0,c))).extend(this.pointLocation(new o.P(this.width,c))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new he([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(c){c?(this.lngRange=[c.getWest(),c.getEast()],this.latRange=[c.getSouth(),c.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(c,g=!1){const w=c.key,C=g?this._alignedPosMatrixCache:this._posMatrixCache;if(C[w])return C[w];const S=c.canonical,I=this.worldSize/this.zoomScale(S.z),L=S.x+Math.pow(2,S.z)*c.wrap,B=o.ao(new Float64Array(16));return o.$(B,B,[L*I,S.y*I,0]),o.a0(B,B,[I/o.N,I/o.N,1]),o.a1(B,g?this.alignedProjMatrix:this.projMatrix,B),C[w]=new Float32Array(B),C[w]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let c,g,w,C,S=-90,I=90,L=-180,B=180;const H=this.size,W=this._unmodified;if(this.latRange){const Ce=this.latRange;S=o.H(Ce[1])*this.worldSize,I=o.H(Ce[0])*this.worldSize,c=I-S<H.y?H.y/(I-S):0}if(this.lngRange){const Ce=this.lngRange;L=o.b5(o.G(Ce[0])*this.worldSize,0,this.worldSize),B=o.b5(o.G(Ce[1])*this.worldSize,0,this.worldSize),B<L&&(B+=this.worldSize),g=B-L<H.x?H.x/(B-L):0}const K=this.point,re=Math.max(g||0,c||0);if(re)return this.center=this.unproject(new o.P(g?(B+L)/2:K.x,c?(I+S)/2:K.y)),this.zoom+=this.scaleZoom(re),this._unmodified=W,void(this._constraining=!1);if(this.latRange){const Ce=K.y,xe=H.y/2;Ce-xe<S&&(C=S+xe),Ce+xe>I&&(C=I-xe)}if(this.lngRange){const Ce=(L+B)/2,xe=o.b5(K.x,Ce-this.worldSize/2,Ce+this.worldSize/2),Ee=H.x/2;xe-Ee<L&&(w=L+Ee),xe+Ee>B&&(w=B-Ee)}w===void 0&&C===void 0||(this.center=this.unproject(new o.P(w!==void 0?w:K.x,C!==void 0?C:K.y)).wrap()),this._unmodified=W,this._constraining=!1}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,g=this.point.x,w=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b7(1,this.center.lat)*this.worldSize;let C=o.ao(new Float64Array(16));o.a0(C,C,[this.width/2,-this.height/2,1]),o.$(C,C,[1,-1,0]),this.labelPlaneMatrix=C,C=o.ao(new Float64Array(16)),o.a0(C,C,[1,-1,1]),o.$(C,C,[-1,-1,0]),o.a0(C,C,[2/this.width,2/this.height,1]),this.glCoordMatrix=C;const S=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),I=Math.min(this.elevation,this._minEleveationForCurrentTile),L=S-I*this._pixelPerMeter/Math.cos(this._pitch),B=I<0?L:S,H=Math.PI/2+this._pitch,W=this._fov*(.5+c.y/this.height),K=Math.sin(W)*B/Math.sin(o.ad(Math.PI-H-W,.01,Math.PI-.01)),re=this.getHorizon(),Ce=2*Math.atan(re/this.cameraToCenterDistance)*(.5+c.y/(2*re)),xe=Math.sin(Ce)*B/Math.sin(o.ad(Math.PI-H-Ce,.01,Math.PI-.01)),Ee=Math.min(K,xe),ye=1.01*(Math.cos(Math.PI/2-this._pitch)*Ee+B),ze=this.height/50;C=new Float64Array(16),o.b8(C,this._fov,this.width/this.height,ze,ye),C[8]=2*-c.x/this.width,C[9]=2*c.y/this.height,o.a0(C,C,[1,-1,1]),o.$(C,C,[0,0,-this.cameraToCenterDistance]),o.b9(C,C,this._pitch),o.ae(C,C,this.angle),o.$(C,C,[-g,-w,0]),this.mercatorMatrix=o.a0([],C,[this.worldSize,this.worldSize,this.worldSize]),o.a0(C,C,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.a1(new Float64Array(16),this.labelPlaneMatrix,C),o.$(C,C,[0,0,-this.elevation]),this.projMatrix=C,this.invProjMatrix=o.as([],C),this.pixelMatrix3D=o.a1(new Float64Array(16),this.labelPlaneMatrix,C);const Je=this.width%2/2,Me=this.height%2/2,Ue=Math.cos(this.angle),it=Math.sin(this.angle),nt=g-Math.round(g)+Ue*Je+it*Me,vt=w-Math.round(w)+Ue*Me+it*Je,Ct=new Float64Array(C);if(o.$(Ct,Ct,[nt>.5?nt-1:nt,vt>.5?vt-1:vt,0]),this.alignedProjMatrix=Ct,C=o.as(new Float64Array(16),this.pixelMatrix),!C)throw new Error("failed to invert matrix");this.pixelMatrixInverse=C,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const c=this.pointCoordinate(new o.P(0,0)),g=[c.x*this.worldSize,c.y*this.worldSize,0,1];return o.ag(g,g,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,c))}getCameraQueryGeometry(c){const g=this.getCameraPoint();if(c.length===1)return[c[0],g];{let w=g.x,C=g.y,S=g.x,I=g.y;for(const L of c)w=Math.min(w,L.x),C=Math.min(C,L.y),S=Math.max(S,L.x),I=Math.max(I,L.y);return[new o.P(w,C),new o.P(S,C),new o.P(S,I),new o.P(w,I),new o.P(w,C)]}}}function Ul(b,c){let g,w=!1,C=null,S=null;const I=()=>{C=null,w&&(b.apply(S,g),C=setTimeout(I,c),w=!1)};return(...L)=>(w=!0,S=this,g=L,C||I(),C)}class oh{constructor(c){this._getCurrentHash=()=>{const g=window.location.hash.replace("#","");if(this._hashName){let w;return g.split("&").map(C=>C.split("=")).forEach(C=>{C[0]===this._hashName&&(w=C)}),(w&&w[1]||"").split("/")}return g.split("/")},this._onHashChange=()=>{const g=this._getCurrentHash();if(g.length>=3&&!g.some(w=>isNaN(w))){const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(g[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+g[2],+g[1]],zoom:+g[0],bearing:w,pitch:+(g[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const g=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,g)}catch{}},this._updateHash=Ul(this._updateHashUnthrottled,300),this._hashName=c&&encodeURIComponent(c)}addTo(c){return this._map=c,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(c){const g=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,C=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,C),I=Math.round(g.lng*S)/S,L=Math.round(g.lat*S)/S,B=this._map.getBearing(),H=this._map.getPitch();let W="";if(W+=c?`/${I}/${L}/${w}`:`${w}/${L}/${I}`,(B||H)&&(W+="/"+Math.round(10*B)/10),H&&(W+=`/${Math.round(H)}`),this._hashName){const K=this._hashName;let re=!1;const Ce=window.location.hash.slice(1).split("&").map(xe=>{const Ee=xe.split("=")[0];return Ee===K?(re=!0,`${Ee}=${W}`):xe}).filter(xe=>xe);return re||Ce.push(`${K}=${W}`),`#${Ce.join("&")}`}return`#${W}`}}const zc={linearity:.3,easing:o.ba(0,0,.3,1)},sy=o.e({deceleration:2500,maxSpeed:1400},zc),oy=o.e({deceleration:20,maxSpeed:1400},zc),ay=o.e({deceleration:1e3,maxSpeed:360},zc),ly=o.e({deceleration:1e3,maxSpeed:90},zc);class cy{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.h.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,g=o.h.now();for(;c.length>0&&g-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const g={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)g.zoom+=S.zoomDelta||0,g.bearing+=S.bearingDelta||0,g.pitch+=S.pitchDelta||0,S.panDelta&&g.pan._add(S.panDelta),S.around&&(g.around=S.around),S.pinchAround&&(g.pinchAround=S.pinchAround);const w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(g.pan.mag()){const S=ah(g.pan.mag(),w,o.e({},sy,c||{}));C.offset=g.pan.mult(S.amount/g.pan.mag()),C.center=this._map.transform.center,Xo(C,S)}if(g.zoom){const S=ah(g.zoom,w,oy);C.zoom=this._map.transform.zoom+S.amount,Xo(C,S)}if(g.bearing){const S=ah(g.bearing,w,ay);C.bearing=this._map.transform.bearing+o.ad(S.amount,-179,179),Xo(C,S)}if(g.pitch){const S=ah(g.pitch,w,ly);C.pitch=this._map.transform.pitch+S.amount,Xo(C,S)}if(C.zoom||C.bearing){const S=g.pinchAround===void 0?g.around:g.pinchAround;C.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),o.e(C,{noMoveStart:!0})}}function Xo(b,c){(!b.duration||b.duration<c.duration)&&(b.duration=c.duration,b.easing=c.easing)}function ah(b,c,g){const{maxSpeed:w,linearity:C,deceleration:S}=g,I=o.ad(b*C/(c/1e3),-w,w),L=Math.abs(I)/(S*C);return{easing:g.easing,duration:1e3*L,amount:I*(L/2)}}class Bs extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,g,w,C={}){const S=d.mousePos(g.getCanvasContainer(),w),I=g.unproject(S);super(c,o.e({point:S,lngLat:I,originalEvent:w},C)),this._defaultPrevented=!1,this.target=g}}class lh extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,g,w){const C=c==="touchend"?w.changedTouches:w.touches,S=d.touchPos(g.getCanvasContainer(),C),I=S.map(B=>g.unproject(B)),L=S.reduce((B,H,W,K)=>B.add(H.div(K.length)),new o.P(0,0));super(c,{points:S,point:L,lngLats:I,lngLat:g.unproject(L),originalEvent:w}),this._defaultPrevented=!1}}class uy extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,g,w){super(c,{originalEvent:w}),this._defaultPrevented=!1}}class hy{constructor(c,g){this._map=c,this._clickTolerance=g.clickTolerance}reset(){delete this._mousedownPos}wheel(c){return this._firePreventable(new uy(c.type,this._map,c))}mousedown(c,g){return this._mousedownPos=g,this._firePreventable(new Bs(c.type,this._map,c))}mouseup(c){this._map.fire(new Bs(c.type,this._map,c))}click(c,g){this._mousedownPos&&this._mousedownPos.dist(g)>=this._clickTolerance||this._map.fire(new Bs(c.type,this._map,c))}dblclick(c){return this._firePreventable(new Bs(c.type,this._map,c))}mouseover(c){this._map.fire(new Bs(c.type,this._map,c))}mouseout(c){this._map.fire(new Bs(c.type,this._map,c))}touchstart(c){return this._firePreventable(new lh(c.type,this._map,c))}touchmove(c){this._map.fire(new lh(c.type,this._map,c))}touchend(c){this._map.fire(new lh(c.type,this._map,c))}touchcancel(c){this._map.fire(new lh(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dy{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(c){this._map.fire(new Bs(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Bs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._ignoreContextMenu||this._map.fire(new Bs(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sl{constructor(c){this._map=c}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(c){return this.transform.pointLocation(o.P.convert(c),this._map.terrain)}}class fy{constructor(c,g){this._map=c,this._tr=new sl(c),this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=g.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,g){this.isEnabled()&&c.shiftKey&&c.button===0&&(d.disableDrag(),this._startPos=this._lastPos=g,this._active=!0)}mousemoveWindow(c,g){if(!this._active)return;const w=g;if(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)return;const C=this._startPos;this._lastPos=w,this._box||(this._box=d.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",c));const S=Math.min(C.x,w.x),I=Math.max(C.x,w.x),L=Math.min(C.y,w.y),B=Math.max(C.y,w.y);d.setTransform(this._box,`translate(${S}px,${L}px)`),this._box.style.width=I-S+"px",this._box.style.height=B-L+"px"}mouseupWindow(c,g){if(!this._active||c.button!==0)return;const w=this._startPos,C=g;if(this.reset(),d.suppressClick(),w.x!==C.x||w.y!==C.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:c})),{cameraAnimation:S=>S.fitScreenCoordinates(w,C,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(d.remove(this._box),this._box=null),d.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(c,g){return this._map.fire(new o.k(c,{originalEvent:g}))}}function oo(b,c){if(b.length!==c.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${c.length}`);const g={};for(let w=0;w<b.length;w++)g[b[w].identifier]=c[w];return g}class ba{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(c,g,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),w.length===this.numTouches&&(this.centroid=function(C){const S=new o.P(0,0);for(const I of C)S._add(I);return S.div(C.length)}(g),this.touches=oo(w,g)))}touchmove(c,g,w){if(this.aborted||!this.centroid)return;const C=oo(w,g);for(const S in this.touches){const I=C[S];(!I||I.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(c,g,w){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class Xd{constructor(c){this.singleTap=new ba(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(c,g,w){this.singleTap.touchstart(c,g,w)}touchmove(c,g,w){this.singleTap.touchmove(c,g,w)}touchend(c,g,w){const C=this.singleTap.touchend(c,g,w);if(C){const S=c.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(C)<30;if(S&&I||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class Sa{constructor(c){this._tr=new sl(c),this._zoomIn=new Xd({numTouches:1,numTaps:2}),this._zoomOut=new Xd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,g,w){this._zoomIn.touchstart(c,g,w),this._zoomOut.touchstart(c,g,w)}touchmove(c,g,w){this._zoomIn.touchmove(c,g,w),this._zoomOut.touchmove(c,g,w)}touchend(c,g,w){const C=this._zoomIn.touchend(c,g,w),S=this._zoomOut.touchend(c,g,w),I=this._tr;return C?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(C)},{originalEvent:c})}):S?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(S)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ea{constructor(c){this._enabled=!!c.enable,this._moveStateManager=c.moveStateManager,this._clickTolerance=c.clickTolerance||1,this._moveFunction=c.move,this._activateOnStart=!!c.activateOnStart,c.assignEvents(this),this.reset()}reset(c){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(c)}_move(...c){const g=this._moveFunction(...c);if(g.bearingDelta||g.pitchDelta||g.around||g.panDelta)return this._active=!0,g}dragStart(c,g){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(c)&&(this._moveStateManager.startMove(c),this._lastPoint=g.length?g[0]:g,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(c,g){if(!this.isEnabled())return;const w=this._lastPoint;if(!w)return;if(c.preventDefault(),!this._moveStateManager.isValidMoveEvent(c))return void this.reset(c);const C=g.length?g[0]:g;return!this._moved&&C.dist(w)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=C,this._move(w,C))}dragEnd(c){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(c)&&(this._moved&&d.suppressClick(),this.reset(c))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const m_={0:1,2:2};class Pg{constructor(c){this._correctEvent=c.checkCorrectEvent}startMove(c){const g=d.mouseButton(c);this._eventButton=g}endMove(c){delete this._eventButton}isValidStartEvent(c){return this._correctEvent(c)}isValidMoveEvent(c){return!function(g,w){const C=m_[w];return g.buttons===void 0||(g.buttons&C)!==C}(c,this._eventButton)}isValidEndEvent(c){return d.mouseButton(c)===this._eventButton}}class py{constructor(){this._firstTouch=void 0}_isOneFingerTouch(c){return c.targetTouches.length===1}_isSameTouchEvent(c){return c.targetTouches[0].identifier===this._firstTouch}startMove(c){this._firstTouch=c.targetTouches[0].identifier}endMove(c){delete this._firstTouch}isValidStartEvent(c){return this._isOneFingerTouch(c)}isValidMoveEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}isValidEndEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}}const Yd=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=function(c){c.preventDefault()}},Gc=({enable:b,clickTolerance:c,bearingDegreesPerPixelMoved:g=.8})=>{const w=new Pg({checkCorrectEvent:C=>d.mouseButton(C)===0&&C.ctrlKey||d.mouseButton(C)===2});return new Ea({clickTolerance:c,move:(C,S)=>({bearingDelta:(S.x-C.x)*g}),moveStateManager:w,enable:b,assignEvents:Yd})},Ra=({enable:b,clickTolerance:c,pitchDegreesPerPixelMoved:g=-.5})=>{const w=new Pg({checkCorrectEvent:C=>d.mouseButton(C)===0&&C.ctrlKey||d.mouseButton(C)===2});return new Ea({clickTolerance:c,move:(C,S)=>({pitchDelta:(S.y-C.y)*g}),moveStateManager:w,enable:b,assignEvents:Yd})};class Kt{constructor(c,g){this._minTouches=c.cooperativeGestures?2:1,this._clickTolerance=c.clickTolerance||1,this._map=g,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(c,g,w){return this._calculateTransform(c,g,w)}touchmove(c,g,w){if(this._map._cooperativeGestures&&(this._minTouches===2&&w.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(c,!1,w.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(w.length<this._minTouches))return c.preventDefault(),this._calculateTransform(c,g,w)}touchend(c,g,w){this._calculateTransform(c,g,w),this._active&&w.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,g,w){w.length>0&&(this._active=!0);const C=oo(w,g),S=new o.P(0,0),I=new o.P(0,0);let L=0;for(const H in C){const W=C[H],K=this._touches[H];K&&(S._add(W),I._add(W.sub(K)),L++,C[H]=W)}if(this._touches=C,L<this._minTouches||!I.mag())return;const B=I.div(L);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(L),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(c,g,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([g[0],g[1]]))}touchmove(c,g,w){if(!this._firstTwoTouches)return;c.preventDefault();const[C,S]=this._firstTwoTouches,I=ol(w,g,C),L=ol(w,g,S);if(!I||!L)return;const B=this._aroundCenter?null:I.add(L).div(2);return this._move([I,L],B,c)}touchend(c,g,w){if(!this._firstTwoTouches)return;const[C,S]=this._firstTwoTouches,I=ol(w,g,C),L=ol(w,g,S);I&&L||(this._active&&d.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ol(b,c,g){for(let w=0;w<b.length;w++)if(b[w].identifier===g)return c[w]}function Vc(b,c){return Math.log(b/c)/Math.LN2}class gy extends Qd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,g){const w=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Vc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Vc(this._distance,w),pinchAround:g}}}function Vt(b,c){return 180*b.angleWith(c)/Math.PI}class Mg extends Qd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,g){const w=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vt(this._vector,w),pinchAround:g}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const g=25/(Math.PI*this._minDiameter)*360,w=Vt(c,this._startVector);return Math.abs(w)<g}}function Fg(b){return Math.abs(b.y)>Math.abs(b.x)}class v_ extends Qd{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(c,g,w){super.touchstart(c,g,w),this._currentTouchCount=w.length}_start(c){this._lastPoints=c,Fg(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,g,w){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const C=c[0].sub(this._lastPoints[0]),S=c[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(C,S,w.timeStamp),this._valid?(this._lastPoints=c,this._active=!0,{pitchDelta:(C.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(c,g,w){if(this._valid!==void 0)return this._valid;const C=c.mag()>=2,S=g.mag()>=2;if(!C&&!S)return;if(!C||!S)return this._firstMove===void 0&&(this._firstMove=w),w-this._firstMove<100&&void 0;const I=c.y>0==g.y>0;return Fg(c)&&Fg(g)&&I}}const Ag={panStep:100,bearingStep:15,pitchStep:10};class my{constructor(c){this._tr=new sl(c);const g=Ag;this._panStep=g.panStep,this._bearingStep=g.bearingStep,this._pitchStep=g.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let g=0,w=0,C=0,S=0,I=0;switch(c.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:c.shiftKey?w=-1:(c.preventDefault(),S=-1);break;case 39:c.shiftKey?w=1:(c.preventDefault(),S=1);break;case 38:c.shiftKey?C=1:(c.preventDefault(),I=-1);break;case 40:c.shiftKey?C=-1:(c.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(w=0,C=0),{cameraAnimation:L=>{const B=this._tr;L.easeTo({duration:300,easeId:"keyboardHandler",easing:vy,zoom:g?Math.round(B.zoom)+g*(c.shiftKey?2:1):B.zoom,bearing:B.bearing+w*this._bearingStep,pitch:B.pitch+C*this._pitchStep,offset:[-S*this._panStep,-I*this._panStep],center:B.center},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function vy(b){return b*(2-b)}const yy=4.000244140625;class y_{constructor(c,g){this._onTimeout=w=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(w)},this._map=c,this._tr=new sl(c),this._el=c.getCanvasContainer(),this._triggerRenderFrame=g,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!c[this._map._metaKey])return;c.preventDefault()}let g=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const w=o.h.now(),C=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,g!==0&&g%yy==0?this._type="wheel":g!==0&&Math.abs(g)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(C*g)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue)),c.shiftKey&&g&&(g/=4),this._type&&(this._lastWheelEvent=c,this._delta-=g,this._active||this._start(c)),c.preventDefault()}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const g=d.mousePos(this._el,c),w=this._tr;this._around=o.L.convert(this._aroundCenter?w.center:w.unproject(g)),this._aroundPoint=w.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._tr.transform;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>yy?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&B!==0&&(B=1/B);const H=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):c.scale;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(H*B))),this._type==="wheel"&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:c.zoom,w=this._startZoom,C=this._easing;let S,I=!1;if(this._type==="wheel"&&w&&C){const L=Math.min((o.h.now()-this._lastWheelEventTime)/200,1),B=C(L);S=o.B.number(w,g,B),L<1?this._frameId||(this._frameId=!0):I=!0}else S=g,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:S-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let g=o.bb;if(this._prevEase){const w=this._prevEase,C=(o.h.now()-w.start)/w.duration,S=w.easing(C+.01)-w.easing(C),I=.27/Math.sqrt(S*S+1e-4)*.01,L=Math.sqrt(.0729-I*I);g=o.ba(I,L,.25,1)}return this._prevEase={start:o.h.now(),duration:c,easing:g},g}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ig{constructor(c,g){this._clickZoom=c,this._tapZoom=g}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Dg{constructor(c){this._tr=new sl(c),this.reset()}reset(){this._active=!1}dblclick(c,g){return c.preventDefault(),{cameraAnimation:w=>{w.easeTo({duration:300,zoom:this._tr.zoom+(c.shiftKey?-1:1),around:this._tr.unproject(g)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kg{constructor(){this._tap=new Xd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(c,g,w){if(!this._swipePoint)if(this._tapTime){const C=g[0],S=c.timeStamp-this._tapTime<500,I=this._tapPoint.dist(C)<30;S&&I?w.length>0&&(this._swipePoint=C,this._swipeTouch=w[0].identifier):this.reset()}else this._tap.touchstart(c,g,w)}touchmove(c,g,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;const C=g[0],S=C.y-this._swipePoint.y;return this._swipePoint=C,c.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(c,g,w)}touchend(c,g,w){if(this._tapTime)this._swipePoint&&w.length===0&&this.reset();else{const C=this._tap.touchend(c,g,w);C&&(this._tapTime=c.timeStamp,this._tapPoint=C)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Lg{constructor(c,g,w){this._el=c,this._mousePan=g,this._touchPan=w}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ms{constructor(c,g,w){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=g,this._mousePitch=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class al{constructor(c,g,w,C){this._el=c,this._touchZoom=g,this._touchRotate=w,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ch=b=>b.zoom||b.drag||b.pitch||b.rotate;class Og extends o.k{}function uh(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}class Ng{constructor(c,g){this.handleWindowEvent=C=>{this.handleEvent(C,`${C.type}Window`)},this.handleEvent=(C,S)=>{if(C.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=C.type==="renderFrame"?void 0:C,L={needsRenderFrame:!1},B={},H={},W=C.touches,K=W?this._getMapTouches(W):void 0,re=K?d.touchPos(this._el,K):d.mousePos(this._el,C);for(const{handlerName:Ee,handler:ye,allowed:ze}of this._handlers){if(!ye.isEnabled())continue;let Je;this._blockedByActive(H,ze,Ee)?ye.reset():ye[S||C.type]&&(Je=ye[S||C.type](C,re,K),this.mergeHandlerResult(L,B,Je,Ee,I),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()),(Je||ye.isActive())&&(H[Ee]=ye)}const Ce={};for(const Ee in this._previousActiveHandlers)H[Ee]||(Ce[Ee]=I);this._previousActiveHandlers=H,(Object.keys(Ce).length||uh(L))&&(this._changes.push([L,B,Ce]),this._triggerRenderFrame()),(Object.keys(H).length||uh(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:xe}=L;xe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],xe(this._map))},this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new cy(c),this._bearingSnap=g.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(g);const w=this._el;this._listeners=[[w,"touchstart",{passive:!0}],[w,"touchmove",{passive:!1}],[w,"touchend",void 0],[w,"touchcancel",void 0],[w,"mousedown",void 0],[w,"mousemove",void 0],[w,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[w,"mouseover",void 0],[w,"mouseout",void 0],[w,"dblclick",void 0],[w,"click",void 0],[w,"keydown",{capture:!1}],[w,"keyup",void 0],[w,"wheel",{passive:!1}],[w,"contextmenu",void 0],[window,"blur",void 0]];for(const[C,S,I]of this._listeners)d.addEventListener(C,S,C===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[c,g,w]of this._listeners)d.removeEventListener(c,g,c===document?this.handleWindowEvent:this.handleEvent,w)}_addDefaultHandlers(c){const g=this._map,w=g.getCanvasContainer();this._add("mapEvent",new hy(g,c));const C=g.boxZoom=new fy(g,c);this._add("boxZoom",C),c.interactive&&c.boxZoom&&C.enable();const S=new Sa(g),I=new Dg(g);g.doubleClickZoom=new Ig(I,S),this._add("tapZoom",S),this._add("clickZoom",I),c.interactive&&c.doubleClickZoom&&g.doubleClickZoom.enable();const L=new kg;this._add("tapDragZoom",L);const B=g.touchPitch=new v_(g);this._add("touchPitch",B),c.interactive&&c.touchPitch&&g.touchPitch.enable(c.touchPitch);const H=Gc(c),W=Ra(c);g.dragRotate=new ms(c,H,W),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",W,["mouseRotate"]),c.interactive&&c.dragRotate&&g.dragRotate.enable();const K=(({enable:ze,clickTolerance:Je})=>{const Me=new Pg({checkCorrectEvent:Ue=>d.mouseButton(Ue)===0&&!Ue.ctrlKey});return new Ea({clickTolerance:Je,move:(Ue,it)=>({around:it,panDelta:it.sub(Ue)}),activateOnStart:!0,moveStateManager:Me,enable:ze,assignEvents:Yd})})(c),re=new Kt(c,g);g.dragPan=new Lg(w,K,re),this._add("mousePan",K),this._add("touchPan",re,["touchZoom","touchRotate"]),c.interactive&&c.dragPan&&g.dragPan.enable(c.dragPan);const Ce=new Mg,xe=new gy;g.touchZoomRotate=new al(w,xe,Ce,L),this._add("touchRotate",Ce,["touchPan","touchZoom"]),this._add("touchZoom",xe,["touchPan","touchRotate"]),c.interactive&&c.touchZoomRotate&&g.touchZoomRotate.enable(c.touchZoomRotate);const Ee=g.scrollZoom=new y_(g,()=>this._triggerRenderFrame());this._add("scrollZoom",Ee,["mousePan"]),c.interactive&&c.scrollZoom&&g.scrollZoom.enable(c.scrollZoom);const ye=g.keyboard=new my(g);this._add("keyboard",ye),c.interactive&&c.keyboard&&g.keyboard.enable(),this._add("blockableMapEvent",new dy(g))}_add(c,g,w){this._handlers.push({handlerName:c,handler:g,allowed:w}),this._handlersById[c]=g}stop(c){if(!this._updatingCamera){for(const{handler:g}of this._handlers)g.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ch(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,g,w){for(const C in c)if(C!==w&&(!g||g.indexOf(C)<0))return!0;return!1}_getMapTouches(c){const g=[];for(const w of c)this._el.contains(w.target)&&g.push(w);return g}mergeHandlerResult(c,g,w,C,S){if(!w)return;o.e(c,w);const I={handlerName:C,originalEvent:w.originalEvent||S};w.zoomDelta!==void 0&&(g.zoom=I),w.panDelta!==void 0&&(g.drag=I),w.pitchDelta!==void 0&&(g.pitch=I),w.bearingDelta!==void 0&&(g.rotate=I)}_applyChanges(){const c={},g={},w={};for(const[C,S,I]of this._changes)C.panDelta&&(c.panDelta=(c.panDelta||new o.P(0,0))._add(C.panDelta)),C.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+C.pitchDelta),C.around!==void 0&&(c.around=C.around),C.pinchAround!==void 0&&(c.pinchAround=C.pinchAround),C.noInertia&&(c.noInertia=C.noInertia),o.e(g,S),o.e(w,I);this._updateMapTransform(c,g,w),this._changes=[]}_updateMapTransform(c,g,w){const C=this._map,S=C._getTransformForUpdate(),I=C.terrain;if(!(uh(c)||I&&this._terrainMovement))return this._fireEvents(g,w,!0);let{panDelta:L,zoomDelta:B,bearingDelta:H,pitchDelta:W,around:K,pinchAround:re}=c;re!==void 0&&(K=re),C._stop(!0),K=K||C.transform.centerPoint;const Ce=S.pointLocation(L?K.sub(L):K);H&&(S.bearing+=H),W&&(S.pitch+=W),B&&(S.zoom+=B),I?this._terrainMovement||!g.drag&&!g.zoom?g.drag&&this._terrainMovement?S.center=S.pointLocation(S.centerPoint.sub(L)):S.setLocationAtPoint(Ce,K):(this._terrainMovement=!0,this._map._elevationFreeze=!0,S.setLocationAtPoint(Ce,K),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,S.recalculateZoom(C.terrain)})):S.setLocationAtPoint(Ce,K),C._applyUpdatedTransform(S),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(g,w,!0)}_fireEvents(c,g,w){const C=ch(this._eventsInProgress),S=ch(c),I={};for(const W in c){const{originalEvent:K}=c[W];this._eventsInProgress[W]||(I[`${W}start`]=K),this._eventsInProgress[W]=c[W]}!C&&S&&this._fireEvent("movestart",S.originalEvent);for(const W in I)this._fireEvent(W,I[W]);S&&this._fireEvent("move",S.originalEvent);for(const W in c){const{originalEvent:K}=c[W];this._fireEvent(W,K)}const L={};let B;for(const W in this._eventsInProgress){const{handlerName:K,originalEvent:re}=this._eventsInProgress[W];this._handlersById[K].isActive()||(delete this._eventsInProgress[W],B=g[K]||re,L[`${W}end`]=B)}for(const W in L)this._fireEvent(W,L[W]);const H=ch(this._eventsInProgress);if(w&&(C||S)&&!H){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),K=re=>re!==0&&-this._bearingSnap<re&&re<this._bearingSnap;!W||!W.essential&&o.h.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:B})),K(this._map.getBearing())&&this._map.resetNorth()):(K(W.bearing||this._map.getBearing())&&(W.bearing=0),W.freezeElevation=!0,this._map.easeTo(W,{originalEvent:B})),this._updatingCamera=!1}}_fireEvent(c,g){this._map.fire(new o.k(c,g?{originalEvent:g}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{delete this._frameId,this.handleEvent(new Og("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class wy extends o.E{constructor(c,g){super(),this._renderFrameCallback=()=>{const w=Math.min((o.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=g.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.L(this.transform.center.lng,this.transform.center.lat)}setCenter(c,g){return this.jumpTo({center:c},g)}panBy(c,g,w){return c=o.P.convert(c).mult(-1),this.panTo(this.transform.center,o.e({offset:c},g),w)}panTo(c,g,w){return this.easeTo(o.e({center:c},g),w)}getZoom(){return this.transform.zoom}setZoom(c,g){return this.jumpTo({zoom:c},g),this}zoomTo(c,g,w){return this.easeTo(o.e({zoom:c},g),w)}zoomIn(c,g){return this.zoomTo(this.getZoom()+1,c,g),this}zoomOut(c,g){return this.zoomTo(this.getZoom()-1,c,g),this}getBearing(){return this.transform.bearing}setBearing(c,g){return this.jumpTo({bearing:c},g),this}getPadding(){return this.transform.padding}setPadding(c,g){return this.jumpTo({padding:c},g),this}rotateTo(c,g,w){return this.easeTo(o.e({bearing:c},g),w)}resetNorth(c,g){return this.rotateTo(0,o.e({duration:1e3},c),g),this}resetNorthPitch(c,g){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},c),g),this}snapToNorth(c,g){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,g):this}getPitch(){return this.transform.pitch}setPitch(c,g){return this.jumpTo({pitch:c},g),this}cameraForBounds(c,g){c=he.convert(c);const w=g&&g.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),w,g)}_cameraForBoxAndBearing(c,g,w,C){const S={top:0,bottom:0,right:0,left:0};if(typeof(C=o.e({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},C)).padding=="number"){const it=C.padding;C.padding={top:it,bottom:it,right:it,left:it}}C.padding=o.e(S,C.padding);const I=this.transform,L=I.padding,B=I.project(o.L.convert(c)),H=I.project(o.L.convert(g)),W=B.rotate(-w*Math.PI/180),K=H.rotate(-w*Math.PI/180),re=new o.P(Math.max(W.x,K.x),Math.max(W.y,K.y)),Ce=new o.P(Math.min(W.x,K.x),Math.min(W.y,K.y)),xe=re.sub(Ce),Ee=(I.width-(L.left+L.right+C.padding.left+C.padding.right))/xe.x,ye=(I.height-(L.top+L.bottom+C.padding.top+C.padding.bottom))/xe.y;if(ye<0||Ee<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ze=Math.min(I.scaleZoom(I.scale*Math.min(Ee,ye)),C.maxZoom),Je=o.P.convert(C.offset),Me=new o.P((C.padding.left-C.padding.right)/2,(C.padding.top-C.padding.bottom)/2).rotate(w*Math.PI/180),Ue=Je.add(Me).mult(I.scale/I.zoomScale(ze));return{center:I.unproject(B.add(H).div(2).sub(Ue)),zoom:ze,bearing:w}}fitBounds(c,g,w){return this._fitInternal(this.cameraForBounds(c,g),g,w)}fitScreenCoordinates(c,g,w,C,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(c)),this.transform.pointLocation(o.P.convert(g)),w,C),C,S)}_fitInternal(c,g,w){return c?(delete(g=o.e(c,g)).padding,g.linear?this.easeTo(g,w):this.flyTo(g,w)):this}jumpTo(c,g){this.stop();const w=this._getTransformForUpdate();let C=!1,S=!1,I=!1;return"zoom"in c&&w.zoom!==+c.zoom&&(C=!0,w.zoom=+c.zoom),c.center!==void 0&&(w.center=o.L.convert(c.center)),"bearing"in c&&w.bearing!==+c.bearing&&(S=!0,w.bearing=+c.bearing),"pitch"in c&&w.pitch!==+c.pitch&&(I=!0,w.pitch=+c.pitch),c.padding==null||w.isPaddingEqual(c.padding)||(w.padding=c.padding),this._applyUpdatedTransform(w),this.fire(new o.k("movestart",g)).fire(new o.k("move",g)),C&&this.fire(new o.k("zoomstart",g)).fire(new o.k("zoom",g)).fire(new o.k("zoomend",g)),S&&this.fire(new o.k("rotatestart",g)).fire(new o.k("rotate",g)).fire(new o.k("rotateend",g)),I&&this.fire(new o.k("pitchstart",g)).fire(new o.k("pitch",g)).fire(new o.k("pitchend",g)),this.fire(new o.k("moveend",g))}calculateCameraOptionsFromTo(c,g,w,C=0){const S=o.U.fromLngLat(c,g),I=o.U.fromLngLat(w,C),L=I.x-S.x,B=I.y-S.y,H=I.z-S.z,W=Math.hypot(L,B,H);if(W===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(L,B),re=this.transform.scaleZoom(this.transform.cameraToCenterDistance/W/this.transform.tileSize),Ce=180*Math.atan2(L,-B)/Math.PI;let xe=180*Math.acos(K/W)/Math.PI;return xe=H<0?90-xe:90+xe,{center:I.toLngLat(),zoom:re,pitch:xe,bearing:Ce}}easeTo(c,g){this._stop(!1,c.easeId),((c=o.e({offset:[0,0],duration:500,easing:o.bb},c)).animate===!1||!c.essential&&o.h.prefersReducedMotion)&&(c.duration=0);const w=this._getTransformForUpdate(),C=this.getZoom(),S=this.getBearing(),I=this.getPitch(),L=this.getPadding(),B="zoom"in c?+c.zoom:C,H="bearing"in c?this._normalizeBearing(c.bearing,S):S,W="pitch"in c?+c.pitch:I,K="padding"in c?c.padding:w.padding,re=o.P.convert(c.offset);let Ce=w.centerPoint.add(re);const xe=w.pointLocation(Ce),Ee=o.L.convert(c.center||xe);this._normalizeCenter(Ee);const ye=w.project(xe),ze=w.project(Ee).sub(ye),Je=w.zoomScale(B-C);let Me,Ue;c.around&&(Me=o.L.convert(c.around),Ue=w.locationPoint(Me));const it={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||B!==C,this._rotating=this._rotating||S!==H,this._pitching=this._pitching||W!==I,this._padding=!w.isPaddingEqual(K),this._easeId=c.easeId,this._prepareEase(g,c.noMoveStart,it),this.terrain&&this._prepareElevation(Ee),this._ease(nt=>{if(this._zooming&&(w.zoom=o.B.number(C,B,nt)),this._rotating&&(w.bearing=o.B.number(S,H,nt)),this._pitching&&(w.pitch=o.B.number(I,W,nt)),this._padding&&(w.interpolatePadding(L,K,nt),Ce=w.centerPoint.add(re)),this.terrain&&!c.freezeElevation&&this._updateElevation(nt),Me)w.setLocationAtPoint(Me,Ue);else{const vt=w.zoomScale(w.zoom-C),Ct=B>C?Math.min(2,Je):Math.max(.5,Je),xt=Math.pow(Ct,1-nt),Pt=w.unproject(ye.add(ze.mult(nt*xt)).mult(vt));w.setLocationAtPoint(w.renderWorldCopies?Pt.wrap():Pt,Ce)}this._applyUpdatedTransform(w),this._fireMoveEvents(g)},nt=>{this.terrain&&this._finalizeElevation(),this._afterEase(g,nt)},c),this}_prepareEase(c,g,w={}){this._moving=!0,g||w.moving||this.fire(new o.k("movestart",c)),this._zooming&&!w.zooming&&this.fire(new o.k("zoomstart",c)),this._rotating&&!w.rotating&&this.fire(new o.k("rotatestart",c)),this._pitching&&!w.pitching&&this.fire(new o.k("pitchstart",c))}_prepareElevation(c){this._elevationCenter=c,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(c){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const g=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(c<1&&g!==this._elevationTarget){const w=this._elevationTarget-this._elevationStart;this._elevationStart+=c*(w-(g-(w*c+this._elevationStart))/(1-c)),this._elevationTarget=g}this.transform.elevation=o.B.number(this._elevationStart,this._elevationTarget,c)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(c){if(!this.transformCameraUpdate)return;const g=c.clone(),{center:w,zoom:C,pitch:S,bearing:I,elevation:L}=this.transformCameraUpdate(g);w&&(g.center=w),C!==void 0&&(g.zoom=C),S!==void 0&&(g.pitch=S),I!==void 0&&(g.bearing=I),L!==void 0&&(g.elevation=L),this.transform.apply(g)}_fireMoveEvents(c){this.fire(new o.k("move",c)),this._zooming&&this.fire(new o.k("zoom",c)),this._rotating&&this.fire(new o.k("rotate",c)),this._pitching&&this.fire(new o.k("pitch",c))}_afterEase(c,g){if(this._easeId&&g&&this._easeId===g)return;delete this._easeId;const w=this._zooming,C=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,w&&this.fire(new o.k("zoomend",c)),C&&this.fire(new o.k("rotateend",c)),S&&this.fire(new o.k("pitchend",c)),this.fire(new o.k("moveend",c))}flyTo(c,g){if(!c.essential&&o.h.prefersReducedMotion){const or=o.F(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(or,g)}this.stop(),c=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.bb},c);const w=this._getTransformForUpdate(),C=this.getZoom(),S=this.getBearing(),I=this.getPitch(),L=this.getPadding(),B="zoom"in c?o.ad(+c.zoom,w.minZoom,w.maxZoom):C,H="bearing"in c?this._normalizeBearing(c.bearing,S):S,W="pitch"in c?+c.pitch:I,K="padding"in c?c.padding:w.padding,re=w.zoomScale(B-C),Ce=o.P.convert(c.offset);let xe=w.centerPoint.add(Ce);const Ee=w.pointLocation(xe),ye=o.L.convert(c.center||Ee);this._normalizeCenter(ye);const ze=w.project(Ee),Je=w.project(ye).sub(ze);let Me=c.curve;const Ue=Math.max(w.width,w.height),it=Ue/re,nt=Je.mag();if("minZoom"in c){const or=o.ad(Math.min(c.minZoom,C,B),w.minZoom,w.maxZoom),$r=Ue/w.zoomScale(or-C);Me=Math.sqrt($r/nt*2)}const vt=Me*Me;function Ct(or){const $r=(it*it-Ue*Ue+(or?-1:1)*vt*vt*nt*nt)/(2*(or?it:Ue)*vt*nt);return Math.log(Math.sqrt($r*$r+1)-$r)}function xt(or){return(Math.exp(or)-Math.exp(-or))/2}function Pt(or){return(Math.exp(or)+Math.exp(-or))/2}const ir=Ct(!1);let Pr=function(or){return Pt(ir)/Pt(ir+Me*or)},Nt=function(or){return Ue*((Pt(ir)*(xt($r=ir+Me*or)/Pt($r))-xt(ir))/vt)/nt;var $r},gr=(Ct(!0)-ir)/Me;if(Math.abs(nt)<1e-6||!isFinite(gr)){if(Math.abs(Ue-it)<1e-6)return this.easeTo(c,g);const or=it<Ue?-1:1;gr=Math.abs(Math.log(it/Ue))/Me,Nt=function(){return 0},Pr=function($r){return Math.exp(or*Me*$r)}}return c.duration="duration"in c?+c.duration:1e3*gr/("screenSpeed"in c?+c.screenSpeed/Me:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=S!==H,this._pitching=W!==I,this._padding=!w.isPaddingEqual(K),this._prepareEase(g,!1),this.terrain&&this._prepareElevation(ye),this._ease(or=>{const $r=or*gr,Tr=1/Pr($r);w.zoom=or===1?B:C+w.scaleZoom(Tr),this._rotating&&(w.bearing=o.B.number(S,H,or)),this._pitching&&(w.pitch=o.B.number(I,W,or)),this._padding&&(w.interpolatePadding(L,K,or),xe=w.centerPoint.add(Ce)),this.terrain&&!c.freezeElevation&&this._updateElevation(or);const Sr=or===1?ye:w.unproject(ze.add(Je.mult(Nt($r))).mult(Tr));w.setLocationAtPoint(w.renderWorldCopies?Sr.wrap():Sr,xe),this._applyUpdatedTransform(w),this._fireMoveEvents(g)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(g)},c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,g){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,g)}if(!c){const w=this.handlers;w&&w.stop(!1)}return this}_ease(c,g,w){w.animate===!1||w.duration===0?(c(1),g()):(this._easeStart=o.h.now(),this._easeOptions=w,this._onEaseFrame=c,this._onEaseEnd=g,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(c,g){c=o.b5(c,-180,180);const w=Math.abs(c-g);return Math.abs(c-360-g)<w&&(c-=360),Math.abs(c+360-g)<w&&(c+=360),c}_normalizeCenter(c){const g=this.transform;if(!g.renderWorldCopies||g.lngRange)return;const w=c.lng-g.center.lng;c.lng+=w>180?-360:w<-180?360:0}queryTerrainElevation(c){return this.terrain?this.terrain.getElevationForLngLatZoom(o.L.convert(c),this.transform.tileZoom)-this.transform.elevation:null}}class zs{constructor(c={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=g=>{!g||g.sourceDataType!=="metadata"&&g.sourceDataType!=="visibility"&&g.dataType!=="style"&&g.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=c}getDefaultPosition(){return"bottom-right"}onAdd(c){return this._map=c,this._compact=this.options&&this.options.compact,this._container=d.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=d.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=d.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){d.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(c,g){const w=this._map._getUIString(`AttributionControl.${g}`);c.title=w,c.setAttribute("aria-label",w)}_updateAttributions(){if(!this._map.style)return;let c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map(C=>typeof C!="string"?"":C)):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const g=this._map.style.sourceCaches;for(const C in g){const S=g[C];if(S.used||S.usedForTerrain){const I=S.getSource();I.attribution&&c.indexOf(I.attribution)<0&&c.push(I.attribution)}}c=c.filter(C=>String(C).trim()),c.sort((C,S)=>C.length-S.length),c=c.filter((C,S)=>{for(let I=S+1;I<c.length;I++)if(c[I].indexOf(C)>=0)return!1;return!0});const w=c.join(" | ");w!==this._attribHTML&&(this._attribHTML=w,c.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class hi{constructor(c={}){this._updateCompact=()=>{const g=this._container.children;if(g.length){const w=g[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&w.classList.add("maplibregl-compact"):w.classList.remove("maplibregl-compact")}},this.options=c}getDefaultPosition(){return"bottom-left"}onAdd(c){this._map=c,this._compact=this.options&&this.options.compact,this._container=d.create("div","maplibregl-ctrl");const g=d.create("a","maplibregl-ctrl-logo");return g.target="_blank",g.rel="noopener nofollow",g.href="https://maplibre.org/",g.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),g.setAttribute("rel","noopener nofollow"),this._container.appendChild(g),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){d.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Jd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const g=++this._id;return this._queue.push({callback:c,id:g,cancelled:!1}),g}remove(c){const g=this._currentlyRunning,w=g?this._queue.concat(g):this._queue;for(const C of w)if(C.id===c)return void(C.cancelled=!0)}run(c=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const g=this._currentlyRunning=this._queue;this._queue=[];for(const w of g)if(!w.cancelled&&(w.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Bg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var xy=o.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Cy extends o.E{constructor(c){super(),this.sourceCache=c,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,c.usedForTerrain=!0,c.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(c,g){this.sourceCache.update(c,g),this._renderableTilesKeys=[];const w={};for(const C of c.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:g}))w[C.key]=!0,this._renderableTilesKeys.push(C.key),this._tiles[C.key]||(C.posMatrix=new Float64Array(16),o.aS(C.posMatrix,0,o.N,0,o.N,0,1),this._tiles[C.key]=new hr(C,this.tileSize));for(const C in this._tiles)w[C]||delete this._tiles[C]}freeRtt(c){for(const g in this._tiles){const w=this._tiles[g];(!c||w.tileID.equals(c)||w.tileID.isChildOf(c)||c.isChildOf(w.tileID))&&(w.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(c=>this.getTileByID(c))}getTileByID(c){return this._tiles[c]}getTerrainCoords(c){const g={};for(const w of this._renderableTilesKeys){const C=this._tiles[w].tileID;if(C.canonical.equals(c.canonical)){const S=c.clone();S.posMatrix=new Float64Array(16),o.aS(S.posMatrix,0,o.N,0,o.N,0,1),g[w]=S}else if(C.canonical.isChildOf(c.canonical)){const S=c.clone();S.posMatrix=new Float64Array(16);const I=C.canonical.z-c.canonical.z,L=C.canonical.x-(C.canonical.x>>I<<I),B=C.canonical.y-(C.canonical.y>>I<<I),H=o.N>>I;o.aS(S.posMatrix,0,H,0,H,0,1),o.$(S.posMatrix,S.posMatrix,[-L*H,-B*H,0]),g[w]=S}else if(c.canonical.isChildOf(C.canonical)){const S=c.clone();S.posMatrix=new Float64Array(16);const I=c.canonical.z-C.canonical.z,L=c.canonical.x-(c.canonical.x>>I<<I),B=c.canonical.y-(c.canonical.y>>I<<I),H=o.N>>I;o.aS(S.posMatrix,0,o.N,0,o.N,0,1),o.$(S.posMatrix,S.posMatrix,[L*H,B*H,0]),o.a0(S.posMatrix,S.posMatrix,[1/2**I,1/2**I,0]),g[w]=S}}return g}getSourceTile(c,g){const w=this.sourceCache._source;let C=c.overscaledZ-this.deltaZoom;if(C>w.maxzoom&&(C=w.maxzoom),C<w.minzoom)return null;this._sourceTileCache[c.key]||(this._sourceTileCache[c.key]=c.scaledTo(C).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[c.key]);if((!S||!S.dem)&&g)for(;C>=w.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(c.scaledTo(C--).key);return S}tilesAfterTime(c=Date.now()){return Object.values(this._tiles).filter(g=>g.timeAdded>=c)}}class _y{constructor(c,g,w){this.painter=c,this.sourceCache=new Cy(g),this.options=w,this.exaggeration=typeof w.exaggeration=="number"?w.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(c,g,w,C=o.N){var S;if(!(g>=0&&g<C&&w>=0&&w<C))return 0;const I=this.getTerrainData(c),L=(S=I.tile)===null||S===void 0?void 0:S.dem;if(!L)return 0;const B=function(xe,Ee,ye){var ze=Ee[0],Je=Ee[1];return xe[0]=ye[0]*ze+ye[4]*Je+ye[12],xe[1]=ye[1]*ze+ye[5]*Je+ye[13],xe}([],[g/C*o.N,w/C*o.N],I.u_terrain_matrix),H=[B[0]*L.dim,B[1]*L.dim],W=Math.floor(H[0]),K=Math.floor(H[1]),re=H[0]-W,Ce=H[1]-K;return L.get(W,K)*(1-re)*(1-Ce)+L.get(W+1,K)*re*(1-Ce)+L.get(W,K+1)*(1-re)*Ce+L.get(W+1,K+1)*re*Ce}getElevationForLngLatZoom(c,g){const{tileID:w,mercatorX:C,mercatorY:S}=this._getOverscaledTileIDFromLngLatZoom(c,g);return this.getElevation(w,C%o.N,S%o.N,o.N)}getElevation(c,g,w,C=o.N){return this.getDEMElevation(c,g,w,C)*this.exaggeration}getTerrainData(c){if(!this._emptyDemTexture){const C=this.painter.context,S=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new me(C,S,C.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new me(C,new o.R({width:1,height:1}),C.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ao([])}const g=this.sourceCache.getSourceTile(c,!0);if(g&&g.dem&&(!g.demTexture||g.needsTerrainPrepare)){const C=this.painter.context;g.demTexture=this.painter.getTileTexture(g.dem.stride),g.demTexture?g.demTexture.update(g.dem.getPixels(),{premultiply:!1}):g.demTexture=new me(C,g.dem.getPixels(),C.gl.RGBA,{premultiply:!1}),g.demTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),g.needsTerrainPrepare=!1}const w=g&&g+g.tileID.key+c.key;if(w&&!this._demMatrixCache[w]){const C=this.sourceCache.sourceCache._source.maxzoom;let S=c.canonical.z-g.tileID.canonical.z;c.overscaledZ>c.canonical.z&&(c.canonical.z>=C?S=c.canonical.z-C:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=c.canonical.x-(c.canonical.x>>S<<S),L=c.canonical.y-(c.canonical.y>>S<<S),B=o.bc(new Float64Array(16),[1/(o.N<<S),1/(o.N<<S),0]);o.$(B,B,[I*o.N,L*o.N,0]),this._demMatrixCache[c.key]={matrix:B,coord:c}}return{u_depth:2,u_terrain:3,u_terrain_dim:g&&g.dem&&g.dem.dim||1,u_terrain_matrix:w?this._demMatrixCache[c.key].matrix:this._emptyDemMatrix,u_terrain_unpack:g&&g.dem&&g.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(g&&g.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:g}}getFramebuffer(c){const g=this.painter,w=g.width/devicePixelRatio,C=g.height/devicePixelRatio;return!this._fbo||this._fbo.width===w&&this._fbo.height===C||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new me(g.context,{width:w,height:C,data:null},g.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(g.context.gl.NEAREST,g.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new me(g.context,{width:w,height:C,data:null},g.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(g.context.gl.NEAREST,g.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=g.context.createFramebuffer(w,C,!0,!1),this._fbo.depthAttachment.set(g.context.createRenderbuffer(g.context.gl.DEPTH_COMPONENT16,w,C))),this._fbo.colorAttachment.set(c==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const c=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const g=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,I=0;S<this._coordsTextureSize;S++)for(let L=0;L<this._coordsTextureSize;L++,I+=4)g[I+0]=255&L,g[I+1]=255&S,g[I+2]=L>>8<<4|S>>8,g[I+3]=0;const w=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(g.buffer)),C=new me(c,w,c.gl.RGBA,{premultiply:!1});return C.bind(c.gl.NEAREST,c.gl.CLAMP_TO_EDGE),this._coordsTexture=C,C}pointCoordinate(c){const g=new Uint8Array(4),w=this.painter.context,C=w.gl;w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),C.readPixels(c.x,this.painter.height/devicePixelRatio-c.y-1,1,1,C.RGBA,C.UNSIGNED_BYTE,g),w.bindFramebuffer.set(null);const S=g[0]+(g[2]>>4<<8),I=g[1]+((15&g[2])<<8),L=this.coordsIndex[255-g[3]],B=L&&this.sourceCache.getTileByID(L);if(!B)return null;const H=this._coordsTextureSize,W=(1<<B.tileID.canonical.z)*H;return new o.U(this._allowMercatorOverflow(c,(B.tileID.canonical.x*H+S)/W),(B.tileID.canonical.y*H+I)/W,this.getElevation(B.tileID,S,I,H))}getTerrainMesh(){if(this._mesh)return this._mesh;const c=this.painter.context,g=new o.bd,w=new o.b0,C=this.meshSize,S=o.N/C,I=C*C;for(let K=0;K<=C;K++)for(let re=0;re<=C;re++)g.emplaceBack(re*S,K*S,0);for(let K=0;K<I;K+=C+1)for(let re=0;re<C;re++)w.emplaceBack(re+K,C+re+K+1,C+re+K+2),w.emplaceBack(re+K,C+re+K+2,re+K+1);const L=g.length,B=L+2*(C+1);for(const K of[0,1])for(let re=0;re<=C;re++)for(const Ce of[0,1])g.emplaceBack(re*S,K*o.N,Ce);for(let K=0;K<2*C;K+=2)w.emplaceBack(B+K,B+K+1,B+K+3),w.emplaceBack(B+K,B+K+3,B+K+2),w.emplaceBack(L+K,L+K+3,L+K+1),w.emplaceBack(L+K,L+K+2,L+K+3);const H=g.length,W=H+2*(C+1);for(const K of[0,1])for(let re=0;re<=C;re++)for(const Ce of[0,1])g.emplaceBack(K*o.N,re*S,Ce);for(let K=0;K<2*C;K+=2)w.emplaceBack(H+K,H+K+1,H+K+3),w.emplaceBack(H+K,H+K+3,H+K+2),w.emplaceBack(W+K,W+K+3,W+K+1),w.emplaceBack(W+K,W+K+2,W+K+3);return this._mesh={indexBuffer:c.createIndexBuffer(w),vertexBuffer:c.createVertexBuffer(g,xy.members),segments:o.S.simpleSegment(0,0,g.length,w.length)},this._mesh}getMeshFrameDelta(c){return 2*Math.PI*o.be/Math.pow(2,c)/5}getMinTileElevationForLngLatZoom(c,g){var w;const{tileID:C}=this._getOverscaledTileIDFromLngLatZoom(c,g);return(w=this.getMinMaxElevation(C).minElevation)!==null&&w!==void 0?w:0}getMinMaxElevation(c){const g=this.getTerrainData(c).tile,w={minElevation:null,maxElevation:null};return g&&g.dem&&(w.minElevation=g.dem.min*this.exaggeration,w.maxElevation=g.dem.max*this.exaggeration),w}_getOverscaledTileIDFromLngLatZoom(c,g){const w=o.U.fromLngLat(c.wrap()),C=(1<<g)*o.N,S=w.x*C,I=w.y*C,L=Math.floor(S/o.N),B=Math.floor(I/o.N);return{tileID:new o.O(g,0,g,L,B),mercatorX:S,mercatorY:I}}_allowMercatorOverflow(c,g){const w=c.x<this.painter.width/2;let C=o.bf(g);const S=this.painter.transform.center.lng;return w&&Math.sign(C)>0&&Math.sign(S)<0||!w&&Math.sign(C)<0&&Math.sign(S)>0?(C=360*Math.sign(S)+C,o.G(C)):g}}class w_{constructor(c,g,w){this._context=c,this._size=g,this._tileSize=w,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const c of this._objects)c.texture.destroy(),c.fbo.destroy()}_createObject(c){const g=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),w=new me(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return w.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),g.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),g.colorAttachment.set(w.texture),{id:c,fbo:g,texture:w,stamp:-1,inUse:!1}}getObjectForId(c){return this._objects[c]}useObject(c){c.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(g=>c.id!==g),this._recentlyUsed.push(c.id)}stampObject(c){c.stamp=++this._stamp}getOrCreateFreeObject(){for(const g of this._recentlyUsed)if(!this._objects[g].inUse)return this._objects[g];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const c=this._createObject(this._objects.length);return this._objects.push(c),c}freeObject(c){c.inUse=!1}freeAllObjects(){for(const c of this._objects)this.freeObject(c)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(c=>!c.inUse)===!1}}const qn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ef{constructor(c,g){this.painter=c,this.terrain=g,this.pool=new w_(c.context,30,g.sourceCache.tileSize*g.qualityFactor)}destruct(){this.pool.destruct()}getTexture(c){return this.pool.getObjectForId(c.rtt[this._stacks.length-1].id).texture}prepareForRender(c,g){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=c._order.filter(w=>!c._layers[w].isHidden(g)),this._coordsDescendingInv={};for(const w in c.sourceCaches){this._coordsDescendingInv[w]={};const C=c.sourceCaches[w].getVisibleCoordinates();for(const S of C){const I=this.terrain.sourceCache.getTerrainCoords(S);for(const L in I)this._coordsDescendingInv[w][L]||(this._coordsDescendingInv[w][L]=[]),this._coordsDescendingInv[w][L].push(I[L])}}this._coordsDescendingInvStr={};for(const w of c._order){const C=c._layers[w],S=C.source;if(qn[C.type]&&!this._coordsDescendingInvStr[S]){this._coordsDescendingInvStr[S]={};for(const I in this._coordsDescendingInv[S])this._coordsDescendingInvStr[S][I]=this._coordsDescendingInv[S][I].map(L=>L.key).sort().join()}}for(const w of this._renderableTiles)for(const C in this._coordsDescendingInvStr){const S=this._coordsDescendingInvStr[C][w.tileID.key];S&&S!==w.rttCoords[C]&&(w.rtt=[])}}renderLayer(c){if(c.isHidden(this.painter.transform.zoom))return!1;const g=c.type,w=this.painter,C=this._renderableLayerIds[this._renderableLayerIds.length-1]===c.id;if(qn[g]&&(this._prevType&&qn[this._prevType]||this._stacks.push([]),this._prevType=g,this._stacks[this._stacks.length-1].push(c.id),!C))return!0;if(qn[this._prevType]||qn[g]&&C){this._prevType=g;const S=this._stacks.length-1,I=this._stacks[S]||[];for(const L of this._renderableTiles){if(this.pool.isFull()&&(Pi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(L),L.rtt[S]){const H=this.pool.getObjectForId(L.rtt[S].id);if(H.stamp===L.rtt[S].stamp){this.pool.useObject(H);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),L.rtt[S]={id:B.id,stamp:B.stamp},w.context.bindFramebuffer.set(B.fbo.framebuffer),w.context.clear({color:o.aT.transparent,stencil:0}),w.currentStencilSource=void 0;for(let H=0;H<I.length;H++){const W=w.style._layers[I[H]],K=W.source?this._coordsDescendingInv[W.source][L.tileID.key]:[L.tileID];w.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),w._renderTileClippingMasks(W,K),w.renderLayer(w,w.style.sourceCaches[W.source],W,K),W.source&&(L.rttCoords[W.source]=this._coordsDescendingInvStr[W.source][L.tileID.key])}}return Pi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),qn[g]}return!1}}const cr=u,pr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},hh=b=>{b.touchstart=b.dragStart,b.touchmoveWindow=b.dragMove,b.touchend=b.dragEnd},zg={showCompass:!0,showZoom:!0,visualizePitch:!1};class Gg{constructor(c,g,w=!1){this.mousedown=I=>{this.startMouse(o.e({},I,{ctrlKey:!0,preventDefault:()=>I.preventDefault()}),d.mousePos(this.element,I)),d.addEventListener(window,"mousemove",this.mousemove),d.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.moveMouse(I,d.mousePos(this.element,I))},this.mouseup=I=>{this.mouseRotate.dragEnd(I),this.mousePitch&&this.mousePitch.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=d.touchPos(this.element,I.targetTouches)[0],this.startTouch(I,this._startPos),d.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),d.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=d.touchPos(this.element,I.targetTouches)[0],this.moveTouch(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const C=c.dragRotate._mouseRotate.getClickTolerance(),S=c.dragRotate._mousePitch.getClickTolerance();this.element=g,this.mouseRotate=Gc({clickTolerance:C,enable:!0}),this.touchRotate=(({enable:I,clickTolerance:L,bearingDegreesPerPixelMoved:B=.8})=>{const H=new py;return new Ea({clickTolerance:L,move:(W,K)=>({bearingDelta:(K.x-W.x)*B}),moveStateManager:H,enable:I,assignEvents:hh})})({clickTolerance:C,enable:!0}),this.map=c,w&&(this.mousePitch=Ra({clickTolerance:S,enable:!0}),this.touchPitch=(({enable:I,clickTolerance:L,pitchDegreesPerPixelMoved:B=-.5})=>{const H=new py;return new Ea({clickTolerance:L,move:(W,K)=>({pitchDelta:(K.y-W.y)*B}),moveStateManager:H,enable:I,assignEvents:hh})})({clickTolerance:S,enable:!0})),d.addEventListener(g,"mousedown",this.mousedown),d.addEventListener(g,"touchstart",this.touchstart,{passive:!1}),d.addEventListener(g,"touchcancel",this.reset)}startMouse(c,g){this.mouseRotate.dragStart(c,g),this.mousePitch&&this.mousePitch.dragStart(c,g),d.disableDrag()}startTouch(c,g){this.touchRotate.dragStart(c,g),this.touchPitch&&this.touchPitch.dragStart(c,g),d.disableDrag()}moveMouse(c,g){const w=this.map,{bearingDelta:C}=this.mouseRotate.dragMove(c,g)||{};if(C&&w.setBearing(w.getBearing()+C),this.mousePitch){const{pitchDelta:S}=this.mousePitch.dragMove(c,g)||{};S&&w.setPitch(w.getPitch()+S)}}moveTouch(c,g){const w=this.map,{bearingDelta:C}=this.touchRotate.dragMove(c,g)||{};if(C&&w.setBearing(w.getBearing()+C),this.touchPitch){const{pitchDelta:S}=this.touchPitch.dragMove(c,g)||{};S&&w.setPitch(w.getPitch()+S)}}off(){const c=this.element;d.removeEventListener(c,"mousedown",this.mousedown),d.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),d.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),d.removeEventListener(window,"touchend",this.touchend),d.removeEventListener(c,"touchcancel",this.reset),this.offTemp()}offTemp(){d.enableDrag(),d.removeEventListener(window,"mousemove",this.mousemove),d.removeEventListener(window,"mouseup",this.mouseup),d.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),d.removeEventListener(window,"touchend",this.touchend)}}let Hi;function Vg(b,c,g){if(b=new o.L(b.lng,b.lat),c){const w=new o.L(b.lng-360,b.lat),C=new o.L(b.lng+360,b.lat),S=g.locationPoint(b).distSqr(c);g.locationPoint(w).distSqr(c)<S?b=w:g.locationPoint(C).distSqr(c)<S&&(b=C)}for(;Math.abs(b.lng-g.center.lng)>180;){const w=g.locationPoint(b);if(w.x>=0&&w.y>=0&&w.x<=g.width&&w.y<=g.height)break;b.lng>g.center.lng?b.lng-=360:b.lng+=360}return b}const ao={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function by(b,c,g){const w=b.classList;for(const C in ao)w.remove(`maplibregl-${g}-anchor-${C}`);w.add(`maplibregl-${g}-anchor-${c}`)}class Wl extends o.E{constructor(c){if(super(),this._onKeyPress=g=>{const w=g.code,C=g.charCode||g.keyCode;w!=="Space"&&w!=="Enter"&&C!==32&&C!==13||this.togglePopup()},this._onMapClick=g=>{const w=g.originalEvent.target,C=this._element;this._popup&&(w===C||C.contains(w))&&this.togglePopup()},this._update=g=>{if(!this._map)return;const w=this._map.loaded()&&!this._map.isMoving();((g==null?void 0:g.type)==="terrain"||(g==null?void 0:g.type)==="render"&&!w)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Vg(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(C=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),g&&g.type!=="moveend"||(this._pos=this._pos.round()),d.setTransform(this._element,`${ao[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${C}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const I=this._map.unproject(this._pos),L=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=I.distanceTo(this._lngLat)>20*L?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=g=>{if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=g.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=g.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=g=>{this._element.contains(g.originalEvent.target)&&(g.preventDefault(),this._positionDelta=g.point.sub(this._pos).add(this._offset),this._pointerdownPos=g.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,c&&c.element)this._element=c.element,this._offset=o.P.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=d.create("div"),this._element.setAttribute("aria-label","Map marker");const g=d.createNS("http://www.w3.org/2000/svg","svg"),w=41,C=27;g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height",`${w}px`),g.setAttributeNS(null,"width",`${C}px`),g.setAttributeNS(null,"viewBox",`0 0 ${C} ${w}`);const S=d.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const I=d.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const L=d.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");const B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ze of B){const Je=d.createNS("http://www.w3.org/2000/svg","ellipse");Je.setAttributeNS(null,"opacity","0.04"),Je.setAttributeNS(null,"cx","10.5"),Je.setAttributeNS(null,"cy","5.80029008"),Je.setAttributeNS(null,"rx",ze.rx),Je.setAttributeNS(null,"ry",ze.ry),L.appendChild(Je)}const H=d.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const W=d.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(W);const K=d.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const re=d.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(re);const Ce=d.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ce.setAttributeNS(null,"fill","#FFFFFF");const xe=d.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ee=d.createNS("http://www.w3.org/2000/svg","circle");Ee.setAttributeNS(null,"fill","#000000"),Ee.setAttributeNS(null,"opacity","0.25"),Ee.setAttributeNS(null,"cx","5.5"),Ee.setAttributeNS(null,"cy","5.5"),Ee.setAttributeNS(null,"r","5.4999962");const ye=d.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),xe.appendChild(Ee),xe.appendChild(ye),I.appendChild(L),I.appendChild(H),I.appendChild(K),I.appendChild(Ce),I.appendChild(xe),g.appendChild(I),g.setAttributeNS(null,"height",w*this._scale+"px"),g.setAttributeNS(null,"width",C*this._scale+"px"),this._element.appendChild(g),this._offset=o.P.convert(c&&c.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",g=>{g.preventDefault()}),this._element.addEventListener("mousedown",g=>{g.preventDefault()}),by(this._element,this._anchor,"marker"),c&&c.className)for(const g of c.className.split(" "))this._element.classList.add(g);this._popup=null}addTo(c){return this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),c.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),d.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=o.L.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const C=Math.abs(13.5)/Math.SQRT2;c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(38.1-13.5+C)],"bottom-right":[-C,-1*(38.1-13.5+C)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?c.remove():c.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(c){return this._offset=o.P.convert(c),this._update(),this}addClassName(c){this._element.classList.add(c)}removeClassName(c){this._element.classList.remove(c)}toggleClassName(c){return this._element.classList.toggle(c)}setDraggable(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Mi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let bi=0,Hc=!1;const dh={maxWidth:100,unit:"metric"};function fh(b,c,g){const w=g&&g.maxWidth||100,C=b._container.clientHeight/2,S=b.unproject([0,C]),I=b.unproject([w,C]),L=S.distanceTo(I);if(g&&g.unit==="imperial"){const B=3.2808*L;B>5280?jl(c,w,B/5280,b._getUIString("ScaleControl.Miles")):jl(c,w,B,b._getUIString("ScaleControl.Feet"))}else g&&g.unit==="nautical"?jl(c,w,L/1852,b._getUIString("ScaleControl.NauticalMiles")):L>=1e3?jl(c,w,L/1e3,b._getUIString("ScaleControl.Kilometers")):jl(c,w,L,b._getUIString("ScaleControl.Meters"))}function jl(b,c,g,w){const C=function(S){const I=Math.pow(10,`${Math.floor(S)}`.length-1);let L=S/I;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(B){const H=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*H)/H}(L),I*L}(g);b.style.width=c*(C/g)+"px",b.innerHTML=`${C}&nbsp;${w}`}const Hg={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ug=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Uc(b){if(b){if(typeof b=="number"){const c=Math.round(Math.abs(b)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,b),"top-left":new o.P(c,c),"top-right":new o.P(-c,c),bottom:new o.P(0,-b),"bottom-left":new o.P(c,-c),"bottom-right":new o.P(-c,-c),left:new o.P(b,0),right:new o.P(-b,0)}}if(b instanceof o.P||Array.isArray(b)){const c=o.P.convert(b);return{center:c,top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}}return{center:o.P.convert(b.center||[0,0]),top:o.P.convert(b.top||[0,0]),"top-left":o.P.convert(b["top-left"]||[0,0]),"top-right":o.P.convert(b["top-right"]||[0,0]),bottom:o.P.convert(b.bottom||[0,0]),"bottom-left":o.P.convert(b["bottom-left"]||[0,0]),"bottom-right":o.P.convert(b["bottom-right"]||[0,0]),left:o.P.convert(b.left||[0,0]),right:o.P.convert(b.right||[0,0])}}return Uc(new o.P(0,0))}const Wg={extend:(b,...c)=>o.e(b,...c),run(b){b()},logToElement(b,c=!1,g="log"){const w=window.document.getElementById(g);w&&(c&&(w.innerHTML=""),w.innerHTML+=`<br>${b}`)}},jg=u;class Vr{static get version(){return jg}static get workerCount(){return ui.workerCount}static set workerCount(c){ui.workerCount=c}static get maxParallelImageRequests(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(c){o.c.MAX_PARALLEL_IMAGE_REQUESTS=c}static get workerUrl(){return o.c.WORKER_URL}static set workerUrl(c){o.c.WORKER_URL=c}static addProtocol(c,g){o.c.REGISTERED_PROTOCOLS[c]=g}static removeProtocol(c){delete o.c.REGISTERED_PROTOCOLS[c]}}return Vr.Map=class extends wy{constructor(b){if(o.bg.mark(o.bh.create),(b=o.e({},pr,b)).minZoom!=null&&b.maxZoom!=null&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(b.minPitch!=null&&b.maxPitch!=null&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(b.minPitch!=null&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(b.maxPitch!=null&&b.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Zd(b.minZoom,b.maxZoom,b.minPitch,b.maxPitch,b.renderWorldCopies),{bearingSnap:b.bearingSnap}),this._cooperativeGesturesOnWheel=c=>{this._onCooperativeGesture(c,c[this._metaKey],1)},this._contextLost=c=>{c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=b.interactive,this._cooperativeGestures=b.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=b.maxTileCacheSize,this._maxTileCacheZoomLevels=b.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=b.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=b.preserveDrawingBuffer,this._antialias=b.antialias,this._trackResize=b.trackResize,this._bearingSnap=b.bearingSnap,this._refreshExpiredTiles=b.refreshExpiredTiles,this._fadeDuration=b.fadeDuration,this._crossSourceCollisions=b.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=b.collectResourceTiming,this._renderTaskQueue=new Jd,this._controls=[],this._mapId=o.a2(),this._locale=o.e({},Bg,b.locale),this._clickTolerance=b.clickTolerance,this._overridePixelRatio=b.pixelRatio,this._maxCanvasSize=b.maxCanvasSize,this.transformCameraUpdate=b.transformCameraUpdate,this._imageQueueHandle=M.addThrottleControl(()=>this.isMoving()),this._requestManager=new k(b.transformRequest),typeof b.container=="string"){if(this._container=document.getElementById(b.container),!this._container)throw new Error(`Container '${b.container}' not found.`)}else{if(!(b.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(b.maxBounds&&this.setMaxBounds(b.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;const g=Ul(w=>{this._trackResize&&!this._removed&&this.resize(w)._update()},50);this._resizeObserver=new ResizeObserver(w=>{c?g(w):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ng(this,b),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=b.hash&&new oh(typeof b.hash=="string"&&b.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,o.e({},b.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=b.localIdeographFontFamily,this._validateStyle=b.validateStyle,b.style&&this.setStyle(b.style,{localIdeographFontFamily:b.localIdeographFontFamily}),b.attributionControl&&this.addControl(new zs({customAttribution:b.customAttribution})),b.maplibreLogo&&this.addControl(new hi,b.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new o.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new o.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new o.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(b,c){if(c===void 0&&(c=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const g=b.onAdd(this);this._controls.push(b);const w=this._controlPositions[c];return c.indexOf("bottom")!==-1?w.insertBefore(g,w.firstChild):w.appendChild(g),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(b);return c>-1&&this._controls.splice(c,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,c,g,w){return w==null&&this.terrain&&(w=this.terrain.getElevationForLngLatZoom(g,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,c,g,w)}resize(b){var c;const g=this._containerDimensions(),w=g[0],C=g[1],S=this._getClampedPixelRatio(w,C);if(this._resizeCanvas(w,C,S),this.painter.resize(w,C,S),this.painter.overLimit()){const L=this.painter.context.gl;this._maxCanvasSize=[L.drawingBufferWidth,L.drawingBufferHeight];const B=this._getClampedPixelRatio(w,C);this._resizeCanvas(w,C,B),this.painter.resize(w,C,B)}this.transform.resize(w,C),(c=this._requestedCameraState)===null||c===void 0||c.resize(w,C);const I=!this._moving;return I&&(this.stop(),this.fire(new o.k("movestart",b)).fire(new o.k("move",b))),this.fire(new o.k("resize",b)),I&&this.fire(new o.k("moveend",b)),this}_getClampedPixelRatio(b,c){const{0:g,1:w}=this._maxCanvasSize,C=this.getPixelRatio(),S=b*C,I=c*C;return Math.min(S>g?g/S:1,I>w?w/I:1)*C}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(he.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.renderWorldCopies=b,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(b){return this._cooperativeGestures=b,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(b){return this.transform.locationPoint(o.L.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.pointLocation(o.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,c,g){if(b==="mouseenter"||b==="mouseover"){let w=!1;return{layer:c,listener:g,delegates:{mousemove:S=>{const I=this.getLayer(c)?this.queryRenderedFeatures(S.point,{layers:[c]}):[];I.length?w||(w=!0,g.call(this,new Bs(b,this,S.originalEvent,{features:I}))):w=!1},mouseout:()=>{w=!1}}}}if(b==="mouseleave"||b==="mouseout"){let w=!1;return{layer:c,listener:g,delegates:{mousemove:I=>{(this.getLayer(c)?this.queryRenderedFeatures(I.point,{layers:[c]}):[]).length?w=!0:w&&(w=!1,g.call(this,new Bs(b,this,I.originalEvent)))},mouseout:I=>{w&&(w=!1,g.call(this,new Bs(b,this,I.originalEvent)))}}}}{const w=C=>{const S=this.getLayer(c)?this.queryRenderedFeatures(C.point,{layers:[c]}):[];S.length&&(C.features=S,g.call(this,C),delete C.features)};return{layer:c,listener:g,delegates:{[b]:w}}}}on(b,c,g){if(g===void 0)return super.on(b,c);const w=this._createDelegatedListener(b,c,g);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(w);for(const C in w.delegates)this.on(C,w.delegates[C]);return this}once(b,c,g){if(g===void 0)return super.once(b,c);const w=this._createDelegatedListener(b,c,g);for(const C in w.delegates)this.once(C,w.delegates[C]);return this}off(b,c,g){return g===void 0?super.off(b,c):(this._delegatedListeners&&this._delegatedListeners[b]&&(w=>{const C=this._delegatedListeners[b];for(let S=0;S<C.length;S++){const I=C[S];if(I.layer===c&&I.listener===g){for(const L in I.delegates)this.off(L,I.delegates[L]);return C.splice(S,1),this}}})(),this)}queryRenderedFeatures(b,c){if(!this.style)return[];let g;const w=b instanceof o.P||Array.isArray(b),C=w?b:[[0,0],[this.transform.width,this.transform.height]];if(c=c||(w?{}:b)||{},C instanceof o.P||typeof C[0]=="number")g=[o.P.convert(C)];else{const S=o.P.convert(C[0]),I=o.P.convert(C[1]);g=[S,new o.P(I.x,S.y),I,new o.P(S.x,I.y),S]}return this.style.queryRenderedFeatures(g,c,this.transform)}querySourceFeatures(b,c){return this.style.querySourceFeatures(b,c)}setStyle(b,c){return(c=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(b,c))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const c=this._locale[b];if(c==null)throw new Error(`Missing UI string '${b}'`);return c}_updateStyle(b,c){if(c.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,c));const g=this.style&&c.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new Sn(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,c,g):this.style.loadJSON(b,c,g),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Sn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,c){if(typeof b=="string"){const g=this._requestManager.transformRequest(b,F.Style);o.f(g,(w,C)=>{w?this.fire(new o.j(w)):C&&this._updateDiff(C,c)})}else typeof b=="object"&&this._updateDiff(b,c)}_updateDiff(b,c){try{this.style.setState(b,c)&&this._update(!0)}catch(g){o.w(`Unable to perform style diff: ${g.message||g.error||g}.  Rebuilding the style from scratch.`),this._updateStyle(b,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(b,c){return this._lazyInitEmptyStyle(),this.style.addSource(b,c),this._update(!0)}isSourceLoaded(b){const c=this.style&&this.style.sourceCaches[b];if(c!==void 0)return c.loaded();this.fire(new o.j(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const c=this.style.sourceCaches[b.source];if(!c)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);for(const g in this.style._layers){const w=this.style._layers[g];w.type==="hillshade"&&w.source===b.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new _y(this.painter,c,b),this.painter.renderToTexture=new ef(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=g=>{g.dataType==="style"?this.terrain.sourceCache.freeRtt():g.dataType==="source"&&g.tile&&(g.sourceId!==b.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(g.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:b})),this}getTerrain(){var b,c;return(c=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&c!==void 0?c:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const c in b){const g=b[c]._tiles;for(const w in g){const C=g[w];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}addSourceType(b,c,g){return this._lazyInitEmptyStyle(),this.style.addSourceType(b,c,g)}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}addImage(b,c,g={}){const{pixelRatio:w=1,sdf:C=!1,stretchX:S,stretchY:I,content:L}=g;if(this._lazyInitEmptyStyle(),!(c instanceof HTMLImageElement||o.a(c))){if(c.width===void 0||c.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:H,data:W}=c,K=c;return this.style.addImage(b,{data:new o.R({width:B,height:H},new Uint8Array(W)),pixelRatio:w,stretchX:S,stretchY:I,content:L,sdf:C,version:0,userImage:K}),K.onAdd&&K.onAdd(this,b),this}}{const{width:B,height:H,data:W}=o.h.getImageData(c);this.style.addImage(b,{data:new o.R({width:B,height:H},W),pixelRatio:w,stretchX:S,stretchY:I,content:L,sdf:C,version:0})}}updateImage(b,c){const g=this.style.getImage(b);if(!g)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const w=c instanceof HTMLImageElement||o.a(c)?o.h.getImageData(c):c,{width:C,height:S,data:I}=w;if(C===void 0||S===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==g.data.width||S!==g.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(c instanceof HTMLImageElement||o.a(c));return g.data.replace(I,L),this.style.updateImage(b,g),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b,c){M.getImage(this._requestManager.transformRequest(b,F.Image),c)}listImages(){return this.style.listImages()}addLayer(b,c){return this._lazyInitEmptyStyle(),this.style.addLayer(b,c),this._update(!0)}moveLayer(b,c){return this.style.moveLayer(b,c),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,c,g){return this.style.setLayerZoomRange(b,c,g),this._update(!0)}setFilter(b,c,g={}){return this.style.setFilter(b,c,g),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,c,g,w={}){return this.style.setPaintProperty(b,c,g,w),this._update(!0)}getPaintProperty(b,c){return this.style.getPaintProperty(b,c)}setLayoutProperty(b,c,g,w={}){return this.style.setLayoutProperty(b,c,g,w),this._update(!0)}getLayoutProperty(b,c){return this.style.getLayoutProperty(b,c)}setGlyphs(b,c={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,c),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,c,g={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,c,g,w=>{w||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,c={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,c,g=>{g||this._update(!0)}),this}setLight(b,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,c),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(b,c){return this.style.setFeatureState(b,c),this._update()}removeFeatureState(b,c){return this.style.removeFeatureState(b,c),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,c=0;return this._container&&(b=this._container.clientWidth||400,c=this._container.clientHeight||300),[b,c]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const c=this._canvasContainer=d.create("div","maplibregl-canvas-container",b);this._interactive&&c.classList.add("maplibregl-interactive"),this._canvas=d.create("canvas","maplibregl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const g=this._containerDimensions(),w=this._getClampedPixelRatio(g[0],g[1]);this._resizeCanvas(g[0],g[1],w);const C=this._controlContainer=d.create("div","maplibregl-control-container",b),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{S[I]=d.create("div",`maplibregl-ctrl-${I} `,C)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=d.create("div","maplibregl-cooperative-gesture-screen",this._container);let b=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(b=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${b}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){d.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(b,c,g){this._canvas.width=Math.floor(g*b),this._canvas.height=Math.floor(g*c),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${c}px`}_setupPainter(){const b={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let c=null;this._canvas.addEventListener("webglcontextcreationerror",w=>{c={requestedAttributes:b},w&&(c.statusMessage=w.statusMessage,c.type=w.type)},{once:!0});const g=this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b);if(!g){const w="Failed to initialize WebGL";throw c?(c.message=w,new Error(JSON.stringify(c))):new Error(w)}this.painter=new Hl(g,this.transform),p.testSupport(g)}_onCooperativeGesture(b,c,g){return!c&&g<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){const c=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let g=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const C=this.transform.zoom,S=o.h.now();this.style.zoomHistory.update(C,S);const I=new o.a8(C,{now:S,fadeDuration:c,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),L=I.crossFadingFactor();L===1&&L===this._crossFadingFactor||(g=!0,this._crossFadingFactor=L),this.style.update(I)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,c,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:c,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bg.mark(o.bh.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||g)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const w=this._sourcesDirty||this._styleDirty||this._placementDirty;return w||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||w||(this._fullyLoaded=!0,o.bg.mark(o.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const g of this._controls)g.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),M.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const c=this.painter.context.gl.getExtension("WEBGL_lose_context");c&&c.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),d.remove(this._canvasContainer),d.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),o.bg.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=o.h.frame(b=>{o.bg.frame(b),this._frame=null,this._render(b)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return cr}getCameraTargetElevation(){return this.transform.elevation}},Vr.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const c=this._map.getZoom(),g=c===this._map.getMaxZoom(),w=c===this._map.getMinZoom();this._zoomInButton.disabled=g,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",g.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},this._rotateCompassArrow=()=>{const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=c},this._setButtonTitle=(c,g)=>{const w=this._map._getUIString(`NavigationControl.${g}`);c.title=w,c.setAttribute("aria-label",w)},this.options=o.e({},zg,b),this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",c=>this._map.zoomIn({},{originalEvent:c})),d.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",c=>this._map.zoomOut({},{originalEvent:c})),d.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",c=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:c}):this._map.resetNorth({},{originalEvent:c})}),this._compassIcon=d.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gg(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){d.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,c){const g=d.create("button",b,this._container);return g.type="button",g.addEventListener("click",c),g}},Vr.GeolocateControl=class extends o.E{constructor(b){super(),this._onSuccess=c=>{if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",c)),this._finish()}},this._updateCamera=c=>{const g=new o.L(c.coords.longitude,c.coords.latitude),w=c.coords.accuracy,C=this._map.getBearing(),S=o.e({bearing:C},this.options.fitBoundsOptions),I=he.fromLngLat(g,w);this._map.fitBounds(I,S,{geolocateSource:!0})},this._updateMarker=c=>{if(c){const g=new o.L(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(g).addTo(this._map),this._userLocationDotMarker.setLngLat(g).addTo(this._map),this._accuracy=c.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=c=>{if(this._map){if(this.options.trackUserLocation)if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&Hc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",c)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=c=>{if(this._map){if(this._container.addEventListener("contextmenu",g=>g.preventDefault()),this._geolocateButton=d.create("button","maplibregl-ctrl-geolocate",this._container),d.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",c===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{const g=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=d.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Wl({element:this._dotElement}),this._circleElement=d.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Wl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",g=>{g.geolocateSource||this._watchState!=="ACTIVE_LOCK"||g.originalEvent&&g.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")))})}},this.options=o.e({},Mi,b)}onAdd(b){return this._map=b,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(c,g=!1){Hi===void 0||g?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(w=>{Hi=w.state!=="denied",c(Hi)}).catch(()=>{Hi=!!window.navigator.geolocation,c(Hi)}):(Hi=!!window.navigator.geolocation,c(Hi)):c(Hi)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),d.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,bi=0,Hc=!1}_isOutOfMapMaxBounds(b){const c=this._map.getMaxBounds(),g=b.coords;return c&&(g.longitude<c.getWest()||g.longitude>c.getEast()||g.latitude<c.getSouth()||g.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const b=this._map.getBounds(),c=b.getSouthEast(),g=b.getNorthEast(),w=c.distanceTo(g),C=Math.ceil(this._accuracy/(w/this._map._container.clientHeight)*2);this._circleElement.style.width=`${C}px`,this._circleElement.style.height=`${C}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":bi--,Hc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),bi++,bi>1?(b={maximumAge:6e5,timeout:0},Hc=!0):(b=this.options.positionOptions,Hc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Vr.AttributionControl=zs,Vr.LogoControl=hi,Vr.ScaleControl=class{constructor(b){this._onMove=()=>{fh(this._map,this._container,this.options)},this.setUnit=c=>{this.options.unit=c,fh(this._map,this._container,this.options)},this.options=o.e({},dh,b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){d.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Vr.FullscreenControl=class extends o.E{constructor(b={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=d.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){d.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=d.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);d.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Vr.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=b}onAdd(b){return this._map=b,this._container=d.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=d.create("button","maplibregl-ctrl-terrain",this._container),d.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){d.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Vr.Popup=class extends o.E{constructor(b){super(),this.remove=()=>(this._content&&d.remove(this._content),this._container&&(d.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.k("close")),this),this._onMouseUp=c=>{this._update(c.point)},this._onMouseMove=c=>{this._update(c.point)},this._onDrag=c=>{this._update(c.point)},this._update=c=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=d.create("div","maplibregl-popup",this._map.getContainer()),this._tip=d.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const I of this.options.className.split(" "))this._container.classList.add(I);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Vg(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!c)return;const g=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat);let w=this.options.anchor;const C=Uc(this.options.offset);if(!w){const I=this._container.offsetWidth,L=this._container.offsetHeight;let B;B=g.y+C.bottom.y<L?["top"]:g.y>this._map.transform.height-L?["bottom"]:[],g.x<I/2?B.push("left"):g.x>this._map.transform.width-I/2&&B.push("right"),w=B.length===0?"bottom":B.join("-")}const S=g.add(C[w]).round();d.setTransform(this._container,`${ao[w]} translate(${S.x}px,${S.y}px)`),by(this._container,w,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Hg),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=o.L.convert(b),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const c=document.createDocumentFragment(),g=document.createElement("body");let w;for(g.innerHTML=b;w=g.firstChild,w;)c.appendChild(w);return this.setDOMContent(c)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=d.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){this._container&&this._container.classList.add(b)}removeClassName(b){this._container&&this._container.classList.remove(b)}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}_createCloseButton(){this.options.closeButton&&(this._closeButton=d.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(Ug);b&&b.focus()}},Vr.Marker=Wl,Vr.Style=Sn,Vr.LngLat=o.L,Vr.LngLatBounds=he,Vr.Point=o.P,Vr.MercatorCoordinate=o.U,Vr.Evented=o.E,Vr.AJAXError=o.bi,Vr.config=o.c,Vr.CanvasSource=Ot,Vr.GeoJSONSource=at,Vr.ImageSource=Qe,Vr.RasterDEMTileSource=qe,Vr.RasterTileSource=Fe,Vr.VectorTileSource=_e,Vr.VideoSource=Lt,Vr.setRTLTextPlugin=o.bj,Vr.getRTLTextPluginStatus=o.bk,Vr.prewarm=function(){Ir().acquire($t)},Vr.clearPrewarmedResources=function(){const b=an;b&&(b.isPreloaded()&&b.numActive()===1?(b.release($t),an=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Wg.extend(Vr,{isSafari:o.ac,getPerformanceMetrics:o.bg.getPerformanceMetrics}),Vr});var a=n;return a})})(lO);var uO=lO.exports;const Tj=Y2(uO),hO=xL({__proto__:null,default:Tj},[uO]),Pj="modulepreload",Mj=function(e){return"/"+e},nI={},Fj=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(r.map(u=>{if(u=Mj(u),u in nI)return;nI[u]=!0;const d=u.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":Pj,d||(v.as="script"),v.crossOrigin="",v.href=u,o&&v.setAttribute("nonce",o),document.head.appendChild(v),d)return new Promise((y,_)=>{v.addEventListener("load",y),v.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},Aj=D.createContext(null);function Ij(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,n=Array.isArray(t)?t[0]:t?t.x:0,s=Array.isArray(t)?t[1]:t?t.y:0;return r===n&&i===s}function sc(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!sc(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const n of r)if(!t.hasOwnProperty(n)||!sc(e[n],t[n]))return!1;return!0}return!1}function Dj(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function sI(e,t){if(!e.getProjection)return;const r=e.getProjection(),i=t.getProjection();sc(r,i)||t.setProjection(r)}function oI(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function aI(e,t){const r=t.viewState||t;let i=!1;if("zoom"in r){const n=e.zoom;e.zoom=r.zoom,i=i||n!==e.zoom}if("bearing"in r){const n=e.bearing;e.bearing=r.bearing,i=i||n!==e.bearing}if("pitch"in r){const n=e.pitch;e.pitch=r.pitch,i=i||n!==e.pitch}if(r.padding&&!e.isPaddingEqual(r.padding)&&(i=!0,e.padding=r.padding),"longitude"in r&&"latitude"in r){const n=e.center;e.center=new n.constructor(r.longitude,r.latitude),i=i||n!==e.center}return i}const kj=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function lI(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const i of e.layers)t[i.id]=i;const r=e.layers.map(i=>{let n=null;"interactive"in i&&(n=Object.assign({},i),delete n.interactive);const s=t[i.ref];if(s){n=n||Object.assign({},i),delete n.ref;for(const a of kj)a in s&&(n[a]=s[a])}return n||i});return{...e,layers:r}}var cI={};const uI={version:8,sources:{},layers:[]},hI={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Kb={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},dI={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Lj=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Oj=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Ip{constructor(t,r,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=n=>{const s=this.props[dI[n.type]];s?s(n):n.type==="error"&&console.error(n.error)},this._onPointerEvent=n=>{(n.type==="mousemove"||n.type==="mouseout")&&this._updateHover(n);const s=this.props[hI[n.type]];s&&(this.props.interactiveLayerIds&&n.type!=="mouseover"&&n.type!=="mouseout"&&(n.features=this._hoveredFeatures||this._queryRenderedFeatures(n.point)),s(n),delete n.features)},this._onCameraEvent=n=>{if(!this._internalUpdate){const s=this.props[Kb[n.type]];s&&s(n)}n.type in this._deferredEvents&&(this._deferredEvents[n.type]=!1)},this._MapClass=t,this.props=r,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const i=this._updateSettings(t,r);i&&this._createShadowTransform(this._map);const n=this._updateSize(t),s=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(i||n||s&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const i=Ip.savedMaps.pop();if(!i)return null;const n=i.map,s=n.getContainer();for(r.className=s.className;s.childNodes.length>0;)r.appendChild(s.childNodes[0]);n._container=r;const a=n._resizeObserver;a&&(a.disconnect(),a.observe(r)),i.setProps({...t,styleDiffing:!1}),n.resize();const{initialViewState:o}=t;return o&&(o.bounds?n.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):i._updateViewState(o,!1)),n.isStyleLoaded()?n.fire("load"):n.once("styledata",()=>n.fire("load")),n._update(),i}_initialize(t){const{props:r}=this,{mapStyle:i=uI}=r,n={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||Nj()||null,container:t,style:lI(i)},s=n.initialViewState||n.viewState||n;if(Object.assign(n,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),r.gl){const p=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=p,r.gl)}const a=new this._MapClass(n);s.padding&&a.setPadding(s.padding),r.cursor&&(a.getCanvas().style.cursor=r.cursor),this._createShadowTransform(a);const o=a._render;a._render=p=>{this._inRender=!0,o.call(a,p),this._inRender=!1};const u=a._renderTaskQueue.run;a._renderTaskQueue.run=p=>{u.call(a._renderTaskQueue,p),this._onBeforeRepaint()},a.on("render",()=>this._onAfterRepaint());const d=a.fire;a.fire=this._fireEvent.bind(this,d),a.on("resize",()=>{this._renderTransform.resize(a.transform.width,a.transform.height)}),a.on("styledata",()=>{this._updateStyleComponents(this.props,{}),sI(a.transform,this._renderTransform)}),a.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const p in hI)a.on(p,this._onPointerEvent);for(const p in Kb)a.on(p,this._onCameraEvent);for(const p in dI)a.on(p,this._onEvent);this._map=a}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),Ip.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=Dj(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const i=this._map;if(r.width!==i.transform.width||r.height!==i.transform.height)return i.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const i=this._map,n=this._renderTransform,{zoom:s,pitch:a,bearing:o}=n,u=i.isMoving();u&&(n.cameraElevationReference="sea");const d=aI(n,{...oI(i.transform),...t});if(u&&(n.cameraElevationReference="ground"),d&&r){const p=this._deferredEvents;p.move=!0,p.zoom||(p.zoom=s!==n.zoom),p.rotate||(p.rotate=o!==n.bearing),p.pitch||(p.pitch=a!==n.pitch)}return u||aI(i.transform,t),d}_updateSettings(t,r){const i=this._map;let n=!1;for(const s of Lj)if(s in t&&!sc(t[s],r[s])){n=!0;const a=i[`set${s[0].toUpperCase()}${s.slice(1)}`];a==null||a.call(i,t[s])}return n}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:i=uI,styleDiffing:n=!0}=t,s={diff:n};return"localIdeographFontFamily"in t&&(s.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(lI(i),s),!0}return!1}_updateStyleComponents(t,r){const i=this._map;let n=!1;return i.isStyleLoaded()&&("light"in t&&i.setLight&&!sc(t.light,r.light)&&(n=!0,i.setLight(t.light)),"fog"in t&&i.setFog&&!sc(t.fog,r.fog)&&(n=!0,i.setFog(t.fog)),"terrain"in t&&i.setTerrain&&!sc(t.terrain,r.terrain)&&(!t.terrain||i.getSource(t.terrain.source))&&(n=!0,i.setTerrain(t.terrain))),n}_updateHandlers(t,r){var i,n;const s=this._map;let a=!1;for(const o of Oj){const u=(i=t[o])!==null&&i!==void 0?i:!0,d=(n=r[o])!==null&&n!==void 0?n:!0;sc(u,d)||(a=!0,u?s[o].enable(u):s[o].disable())}return a}_queryRenderedFeatures(t){const r=this._map,i=r.transform,{interactiveLayerIds:n=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:n.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=i}}_updateHover(t){var r;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const s=t.type,a=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,o=this._queryRenderedFeatures(t.point),u=o.length>0;!u&&a&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=o,u&&!a&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=s}else this._hoveredFeatures=null}_fireEvent(t,r,i){const n=this._map,s=n.transform,a=typeof r=="string"?r:r.type;return a==="move"&&this._updateViewState(this.props,!1),a in Kb&&(typeof r=="object"&&(r.viewState=oI(s)),this._map.isMoving())?(n.transform=this._renderTransform,t.call(n,r,i),n.transform=s,n):(t.call(n,r,i),n)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const i in this._deferredEvents)this._deferredEvents[i]&&t.fire(i);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{sI(this._renderTransform,r),t.transform=r}}}Ip.savedMaps=[];function Nj(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||cI.MapboxAccessToken}catch{}try{e=e||cI.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const Bj=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function zj(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:i=>{const n=t.transform;t.transform=e.transform;const s=t.project(i);return t.transform=n,s},unproject:i=>{const n=t.transform;t.transform=e.transform;const s=t.unproject(i);return t.transform=n,s},queryTerrainElevation:(i,n)=>{const s=t.transform;t.transform=e.transform;const a=t.queryTerrainElevation(i,n);return t.transform=s,a},queryRenderedFeatures:(i,n)=>{const s=t.transform;t.transform=e.transform;const a=t.queryRenderedFeatures(i,n);return t.transform=s,a}};for(const i of Gj(t))!(i in r)&&!Bj.includes(i)&&(r[i]=t[i].bind(t));return r}function Gj(e){const t=new Set;let r=e;for(;r;){for(const i of Object.getOwnPropertyNames(r))i[0]!=="_"&&typeof e[i]=="function"&&i!=="fire"&&i!=="setEventedParent"&&t.add(i);r=Object.getPrototypeOf(r)}return Array.from(t)}const Vj=typeof document<"u"?D.useLayoutEffect:D.useEffect,Hj=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Uj(e,t){for(const i of Hj)i in t&&(e[i]=t[i]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,i=>{i&&console.error(i)},!0)}const w1=D.createContext(null);function Wj(e,t,r){const i=D.useContext(Aj),[n,s]=D.useState(null),a=D.useRef(),{current:o}=D.useRef({mapLib:null,map:null});D.useEffect(()=>{const p=e.mapLib;let v=!0,y;return Promise.resolve(p||r).then(_=>{if(!v)return;if(!_)throw new Error("Invalid mapLib");const P="Map"in _?_:_.default;if(!P.Map)throw new Error("Invalid mapLib");if(Uj(P,e),!P.supported||P.supported(e))e.reuseMaps&&(y=Ip.reuse(e,a.current)),y||(y=new Ip(P.Map,e,a.current)),o.map=zj(y),o.mapLib=P,s(y),i==null||i.onMapMount(o.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(_=>{const{onError:P}=e;P?P({type:"error",target:null,originalEvent:null,error:_}):console.error(_)}),()=>{v=!1,y&&(i==null||i.onMapUnmount(e.id),e.reuseMaps?y.recycle():y.destroy())}},[]),Vj(()=>{n&&n.setProps(e)}),D.useImperativeHandle(t,()=>o.map,[n]);const u=D.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),d={height:"100%"};return D.createElement("div",{id:e.id,ref:a,style:u},n&&D.createElement(w1.Provider,{value:o},D.createElement("div",{"mapboxgl-children":"",style:d},e.children)))}const jj=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function gd(e,t){if(!e||!t)return;const r=e.style;for(const i in t){const n=t[i];Number.isFinite(n)&&!jj.test(i)?r[i]=`${n}px`:r[i]=n}}function $j(e,t){const{map:r,mapLib:i}=D.useContext(w1),n=D.useRef({props:e});n.current.props=e;const s=D.useMemo(()=>{let R=!1;D.Children.forEach(e.children,k=>{k&&(R=!0)});const M={...e,element:R?document.createElement("div"):null},F=new i.Marker(M);return F.setLngLat([e.longitude,e.latitude]),F.getElement().addEventListener("click",k=>{var N,G;(G=(N=n.current.props).onClick)===null||G===void 0||G.call(N,{type:"click",target:F,originalEvent:k})}),F.on("dragstart",k=>{var N,G;const j=k;j.lngLat=s.getLngLat(),(G=(N=n.current.props).onDragStart)===null||G===void 0||G.call(N,j)}),F.on("drag",k=>{var N,G;const j=k;j.lngLat=s.getLngLat(),(G=(N=n.current.props).onDrag)===null||G===void 0||G.call(N,j)}),F.on("dragend",k=>{var N,G;const j=k;j.lngLat=s.getLngLat(),(G=(N=n.current.props).onDragEnd)===null||G===void 0||G.call(N,j)}),F},[]);D.useEffect(()=>(s.addTo(r.getMap()),()=>{s.remove()}),[]);const{longitude:a,latitude:o,offset:u,style:d,draggable:p=!1,popup:v=null,rotation:y=0,rotationAlignment:_="auto",pitchAlignment:P="auto"}=e;return D.useEffect(()=>{gd(s.getElement(),d)},[d]),D.useImperativeHandle(t,()=>s,[]),(s.getLngLat().lng!==a||s.getLngLat().lat!==o)&&s.setLngLat([a,o]),u&&!Ij(s.getOffset(),u)&&s.setOffset(u),s.isDraggable()!==p&&s.setDraggable(p),s.getRotation()!==y&&s.setRotation(y),s.getRotationAlignment()!==_&&s.setRotationAlignment(_),s.getPitchAlignment()!==P&&s.setPitchAlignment(P),s.getPopup()!==v&&s.setPopup(v),ju.createPortal(e.children,s.getElement())}const qj=D.memo(D.forwardRef($j));function fI(e){return new Set(e?e.trim().split(/\s+/):[])}function Kj(e,t){const{map:r,mapLib:i}=D.useContext(w1),n=D.useMemo(()=>document.createElement("div"),[]),s=D.useRef({props:e});s.current.props=e;const a=D.useMemo(()=>{const o={...e},u=new i.Popup(o);return u.setLngLat([e.longitude,e.latitude]),u.once("open",d=>{var p,v;(v=(p=s.current.props).onOpen)===null||v===void 0||v.call(p,d)}),u},[]);if(D.useEffect(()=>{const o=u=>{var d,p;(p=(d=s.current.props).onClose)===null||p===void 0||p.call(d,u)};return a.on("close",o),a.setDOMContent(n).addTo(r.getMap()),()=>{a.off("close",o),a.isOpen()&&a.remove()}},[]),D.useEffect(()=>{gd(a.getElement(),e.style)},[e.style]),D.useImperativeHandle(t,()=>a,[]),a.isOpen()&&((a.getLngLat().lng!==e.longitude||a.getLngLat().lat!==e.latitude)&&a.setLngLat([e.longitude,e.latitude]),e.offset&&!sc(a.options.offset,e.offset)&&a.setOffset(e.offset),(a.options.anchor!==e.anchor||a.options.maxWidth!==e.maxWidth)&&(a.options.anchor=e.anchor,a.setMaxWidth(e.maxWidth)),a.options.className!==e.className)){const o=fI(a.options.className),u=fI(e.className);for(const d of o)u.has(d)||a.removeClassName(d);for(const d of u)o.has(d)||a.addClassName(d);a.options.className=e.className}return ju.createPortal(e.children,n)}D.memo(D.forwardRef(Kj));function gv(e,t,r,i){const n=D.useContext(w1),s=D.useMemo(()=>e(n),[]);return D.useEffect(()=>{const a=t,o=null,u=typeof t=="function"?t:null,{map:d}=n;return d.hasControl(s)||(d.addControl(s,a==null?void 0:a.position),o&&o(n)),()=>{u&&u(n),d.hasControl(s)&&d.removeControl(s)}},[]),s}function Zj(e){const t=gv(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return D.useEffect(()=>{gd(t._container,e.style)},[e.style]),null}D.memo(Zj);function Xj(e){const t=gv(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return D.useEffect(()=>{gd(t._controlContainer,e.style)},[e.style]),null}D.memo(Xj);function Yj(e,t){const r=D.useRef({props:e}),i=gv(({mapLib:n})=>{const s=new n.GeolocateControl(e),a=s._setupUI;return s._setupUI=o=>{s._container.hasChildNodes()||a(o)},s.on("geolocate",o=>{var u,d;(d=(u=r.current.props).onGeolocate)===null||d===void 0||d.call(u,o)}),s.on("error",o=>{var u,d;(d=(u=r.current.props).onError)===null||d===void 0||d.call(u,o)}),s.on("outofmaxbounds",o=>{var u,d;(d=(u=r.current.props).onOutOfMaxBounds)===null||d===void 0||d.call(u,o)}),s.on("trackuserlocationstart",o=>{var u,d;(d=(u=r.current.props).onTrackUserLocationStart)===null||d===void 0||d.call(u,o)}),s.on("trackuserlocationend",o=>{var u,d;(d=(u=r.current.props).onTrackUserLocationEnd)===null||d===void 0||d.call(u,o)}),s},{position:e.position});return r.current.props=e,D.useImperativeHandle(t,()=>i,[]),D.useEffect(()=>{gd(i._container,e.style)},[e.style]),null}D.memo(D.forwardRef(Yj));function Qj(e){const t=gv(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return D.useEffect(()=>{gd(t._container,e.style)},[e.style]),null}const Jj=D.memo(Qj);function e$(e){const t=gv(({mapLib:s})=>new s.ScaleControl(e),{position:e.position}),r=D.useRef(e),i=r.current;r.current=e;const{style:n}=e;return e.maxWidth!==void 0&&e.maxWidth!==i.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==i.unit&&t.setUnit(e.unit),D.useEffect(()=>{gd(t._container,n)},[n]),null}D.memo(e$);const t$=Fj(()=>Promise.resolve().then(()=>hO),void 0),r$=D.forwardRef(function(t,r){return Wj(t,r,t$)}),i$=qj,n$=Jj;function dO(e,t,r){if(e!==null)for(var i,n,s,a,o,u,d,p=0,v=0,y,_=e.type,P=_==="FeatureCollection",R=_==="Feature",M=P?e.features.length:1,F=0;F<M;F++){d=P?e.features[F].geometry:R?e.geometry:e,y=d?d.type==="GeometryCollection":!1,o=y?d.geometries.length:1;for(var k=0;k<o;k++){var N=0,G=0;if(a=y?d.geometries[k]:d,a!==null){u=a.coordinates;var j=a.type;switch(p=0,j){case null:break;case"Point":if(t(u,v,F,N,G)===!1)return!1;v++,N++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(t(u[i],v,F,N,G)===!1)return!1;v++,j==="MultiPoint"&&N++}j==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(n=0;n<u[i].length-p;n++){if(t(u[i][n],v,F,N,G)===!1)return!1;v++}j==="MultiLineString"&&N++,j==="Polygon"&&G++}j==="Polygon"&&N++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(G=0,n=0;n<u[i].length;n++){for(s=0;s<u[i][n].length-p;s++){if(t(u[i][n][s],v,F,N,G)===!1)return!1;v++}G++}N++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(dO(a.geometries[i],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function s$(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const r=[1/0,1/0,-1/0,-1/0];return dO(e,i=>{r[0]>i[0]&&(r[0]=i[0]),r[1]>i[1]&&(r[1]=i[1]),r[2]<i[0]&&(r[2]=i[0]),r[3]<i[1]&&(r[3]=i[1])}),r}var fl=s$;const Yh="http://r48-vgeohub01.zsniigg.local:7800",fO="http://r48-vgeohub01.zsniigg.local:8001",pO="/api/v1/report/rgf/",Ys="gdx2",Jw="field",o$={type:"vector",tiles:[`${Yh}/gdx2.${Jw}/{z}/{x}/{y}.pbf`],minzoom:0,maxzoom:22},a$={id:`${Ys}.${Jw}`,type:"fill",source:`${Ys}.${Jw}`,"source-layer":`${Ys}.${Jw}`,paint:{"fill-color":"#693502","fill-opacity":.2}},ex="lu",l$={type:"vector",tiles:[`${Yh}/gdx2.${ex}/{z}/{x}/{y}.pbf`],minzoom:0,maxzoom:22},c$={id:`${Ys}.${ex}`,type:"fill",source:`${Ys}.${ex}`,"source-layer":`${Ys}.${ex}`,paint:{"fill-color":"#0a0171","fill-opacity":.2}},tx="sta",u$={type:"vector",tiles:[`${Yh}/gdx2.${tx}/{z}/{x}/{y}.pbf`],minzoom:0,maxzoom:22},h$={id:`${Ys}.${tx}`,type:"fill",source:`${Ys}.${tx}`,"source-layer":`${Ys}.${tx}`,paint:{"fill-color":"#EFCDB8","fill-outline-color":"#CD9575","fill-opacity":.6}},rx="stl",d$={type:"vector",tiles:[`${Yh}/gdx2.${rx}/{z}/{x}/{y}.pbf`],minzoom:0,maxzoom:22},f$={id:`${Ys}.${rx}`,source:`${Ys}.${rx}`,"source-layer":`${Ys}.${rx}`,type:"line",paint:{"line-color":"#198EC8"}},ix="stp",p$={type:"vector",tiles:[`${Yh}/gdx2.${ix}/{z}/{x}/{y}.pbf`],minzoom:0,maxzoom:22},g$={id:`${Ys}.${ix}`,source:`${Ys}.${ix}`,"source-layer":`${Ys}.${ix}`,type:"circle",paint:{"circle-color":"blue","circle-radius":4}},Ef={field:{source:o$,layer:a$},lu:{source:l$,layer:c$},sta:{source:u$,layer:h$},stl:{source:d$,layer:f$},stp:{source:p$,layer:g$}},m$=D.forwardRef(({styleUrl:e,visibleLayers:t,layers:r,onFeaturesHover:i,enableHover:n,infoMode:s,onClick:a,marker:o,markerLuName:u,onMouseMoveCoords:d,highlightedPoints:p,highlightedLines:v,highlightedPolygons:y,onZoomChange:_,selectedFeature:P,hoveredFeature:R,selectedAttributeRow:M,onRedrawStart:F,onRedrawEnd:k,filteredFeature:N,rectangleSelection:G,onRectangleSelect:j},ee)=>{const q=["stp","stl","sta"],oe=D.useRef(null),[ue,me]=D.useState(!1),[ie,fe]=D.useState(null),[ke,et]=D.useState(null);D.useImperativeHandle(ee,()=>({getMap:()=>{var Be;return(Be=oe.current)==null?void 0:Be.getMap()}}));const[Xe,ct]=D.useState({longitude:77,latitude:76,zoom:2,bearing:0,pitch:0}),pt=D.useCallback(Be=>{ct(Be.viewState),_(Be.viewState.zoom)},[_]),Ge=D.useCallback(Be=>{var at;if(!ue)return;const ce=(at=oe.current)==null?void 0:at.getMap();if(!ce)return;const he={lng:Be.lngLat.lng,lat:Be.lngLat.lat};d(he),G&&ie&&et(he);let ve=q;s==="points"?ve=["stp"]:s==="lines"?ve=["stl"]:s==="polygons"&&(ve=["sta"]);const _e=ve.filter(ot=>t.has(ot)).map(ot=>`gdx2.${ot}`).filter(ot=>ce.getLayer(ot)?ce.getLayoutProperty(ot,"visibility")!=="none":!1);if(_e.length===0){n&&i([]),G||(ce.getCanvas().style.cursor="");return}const Fe=ce.queryRenderedFeatures(Be.point,{layers:_e});let qe=Fe;N&&(qe=Fe.filter(ot=>{var Ot;const Qe=(Ot=ot.properties)==null?void 0:Ot.id,Lt=N.row.id;return Qe===Lt||String(Qe)===String(Lt)})),n&&i(qe),G||(ce.getCanvas().style.cursor=qe.length>0?"pointer":"")},[ue,i,t,n,s,d,G,ie,N]),Ye=D.useCallback(Be=>{var Fe;if(!ue)return;const ce=(Fe=oe.current)==null?void 0:Fe.getMap();if(!ce)return;if(G){if(!ie)fe({lng:Be.lngLat.lng,lat:Be.lngLat.lat});else{const qe=[[Math.min(ie.lng,Be.lngLat.lng),Math.min(ie.lat,Be.lngLat.lat)],[Math.max(ie.lng,Be.lngLat.lng),Math.max(ie.lat,Be.lngLat.lat)]];j==null||j(qe),fe(null),et(null)}return}const he=q.filter(qe=>t.has(qe)).map(qe=>`gdx2.${qe}`).filter(qe=>ce.getLayer(qe)?ce.getLayoutProperty(qe,"visibility")!=="none":!1),ve=ce.queryRenderedFeatures(Be.point,{layers:he});let _e=ve;N&&(_e=ve.filter(qe=>{var Qe;const at=(Qe=qe.properties)==null?void 0:Qe.id,ot=N.row.id;return at===ot||String(at)===String(ot)})),a(_e,{lng:Be.lngLat.lng,lat:Be.lngLat.lat})},[ue,t,a,G,ie,j,N]),ht=D.useCallback(()=>{var he;if(!ue)return;const Be=(he=oe.current)==null?void 0:he.getMap();if(!Be)return;F==null||F(),r.forEach(ve=>{const _e=Ef[ve.name];if(!_e)return;const Fe=_e.layer.source,qe=_e.layer.id,at=`${qe}-highlight`;if(t.has(ve.name)){if(Be.getSource(Fe)){const Qe=Be.getSource(Fe);Qe&&Qe.vectorLayers}else try{Be.addSource(Fe,_e.source),Be.once("sourcedata",Qe=>{if(Qe.sourceId===Fe&&Qe.isSourceLoaded){const Lt=Be.getSource(Fe);Lt&&Lt.vectorLayers}})}catch(Qe){console.error("Error adding source",Fe,Qe)}if(Be.getLayer(qe))Be.getLayoutProperty(qe,"visibility");else try{Be.addLayer(_e.layer),Be.triggerRepaint()}catch(Qe){if(console.error("Error adding layer",qe,Qe),Qe&&Qe.message&&Qe.message.includes("source-layer")){const Lt={..._e.layer};Lt["source-layer"]===ve.name?Lt["source-layer"]=`gdx2.${ve.name}`:Lt["source-layer"]=ve.name;try{Be.addLayer(Lt),Be.triggerRepaint()}catch(Ot){console.error("Failed with alternative source-layer too",Ot)}}}let ot=[];if(ve.name==="stp"&&p.size>0?ot=Array.from(p):ve.name==="stl"&&v.size>0?ot=Array.from(v):ve.name==="sta"&&y.size>0&&(ot=Array.from(y)),ot.length>0){if(!Be.getLayer(at)){const Qe={..._e.layer};Qe.id=at,Qe.filter=["in","id",...ot.map(Lt=>parseInt(Lt))],Qe.type==="circle"?Qe.paint={...Qe.paint,"circle-color":"red","circle-radius":6}:Qe.type==="line"?Qe.paint={...Qe.paint,"line-color":"red","line-width":3}:Qe.type==="fill"&&(Qe.paint={...Qe.paint,"fill-color":"red","fill-opacity":.8}),Be.addLayer(Qe,qe),Be.triggerRepaint()}}else Be.getLayer(at)&&Be.removeLayer(at)}else Be.getLayer(qe)&&Be.removeLayer(qe),Be.getLayer(at)&&Be.removeLayer(at),Be.getSource(Fe)&&Object.values(Ef).filter(Lt=>Lt.layer.source===Fe).filter(Lt=>Be.getLayer(Lt.layer.id)).length===0&&Be.removeSource(Fe)}),setTimeout(()=>{k==null||k()},100)},[ue,t,r,p,v,y,F,k]);return D.useEffect(()=>{var he;if(!ue)return;const Be=(he=oe.current)==null?void 0:he.getMap();if(!Be)return;const ce="selected-feature-highlight";if(P){if(!Be.getLayer(ce)){const ve=P.layer.id.split(".")[1],_e=Ef[ve];if(_e){const Fe={..._e.layer};Fe.id=ce,Fe.filter=["==","id",P.properties.id],Fe.type==="circle"?Fe.paint={...Fe.paint,"circle-color":"yellow","circle-radius":8,"circle-stroke-color":"black","circle-stroke-width":2}:Fe.type==="line"?Fe.paint={...Fe.paint,"line-color":"yellow","line-width":5}:Fe.type==="fill"&&(Fe.paint={...Fe.paint,"fill-color":"yellow","fill-opacity":.9}),Be.addLayer(Fe),Be.triggerRepaint()}}}else Be.getLayer(ce)&&Be.removeLayer(ce)},[P,ue]),D.useEffect(()=>{var he;if(!ue)return;const Be=(he=oe.current)==null?void 0:he.getMap();if(!Be)return;const ce="hover-feature-highlight";if(R){if(!Be.getLayer(ce)){const ve=R.layer.id.split(".")[1],_e=Ef[ve];if(_e){const Fe={..._e.layer};Fe.id=ce,Fe.filter=["==","id",R.properties.id],Fe.type==="circle"?Fe.paint={...Fe.paint,"circle-color":"orange","circle-radius":7}:Fe.type==="line"?Fe.paint={...Fe.paint,"line-color":"orange","line-width":4}:Fe.type==="fill"&&(Fe.paint={...Fe.paint,"fill-color":"orange","fill-opacity":.7}),Be.addLayer(Fe),Be.triggerRepaint()}}}else Be.getLayer(ce)&&Be.removeLayer(ce)},[R,ue]),D.useEffect(()=>{var he;if(!ue)return;const Be=(he=oe.current)==null?void 0:he.getMap();if(!Be)return;const ce="selected-attribute-highlight";if(M){if(!Be.getLayer(ce)){const ve=M.type==="points"?"stp":M.type==="lines"?"stl":"sta",_e=Ef[ve];if(_e){const Fe={..._e.layer};Fe.id=ce,Fe.filter=["==","id",M.data.id],Fe.type==="circle"?Fe.paint={...Fe.paint,"circle-color":"red","circle-radius":8,"circle-stroke-color":"black","circle-stroke-width":2}:Fe.type==="line"?Fe.paint={...Fe.paint,"line-color":"red","line-width":5}:Fe.type==="fill"&&(Fe.paint={...Fe.paint,"fill-color":"red","fill-opacity":.9}),Be.addLayer(Fe),Be.triggerRepaint()}}}else Be.getLayer(ce)&&Be.removeLayer(ce)},[M,ue]),D.useEffect(()=>{var he;if(!ue||!P)return;const Be=(he=oe.current)==null?void 0:he.getMap();if(!Be)return;const ce=P.geometry.coordinates;ce&&ce.length>=2&&!isNaN(ce[0])&&!isNaN(ce[1])&&Be.flyTo({center:[ce[0],ce[1]],zoom:12,duration:1e3})},[P,ue]),D.useEffect(()=>{ht()},[ht,e]),D.useEffect(()=>{var ce;if(!ue)return;const Be=(ce=oe.current)==null?void 0:ce.getMap();if(Be)if(N){const ve=`gdx2.${N.type==="points"?"stp":N.type==="lines"?"stl":"sta"}`;["gdx2.stp","gdx2.stl","gdx2.sta","gdx2.lu","gdx2.field"].forEach(qe=>{if(Be.getLayer(qe))if(qe===ve){Be.setLayoutProperty(qe,"visibility","visible");const at=N.row.id,ot=typeof at=="number"?["==",["get","id"],at]:["==",["get","id"],String(at)];Be.setFilter(qe,ot)}else Be.setLayoutProperty(qe,"visibility","none"),Be.setFilter(qe,null)}),Be.triggerRepaint();const Fe=()=>{const qe=Be.queryRenderedFeatures(void 0,{layers:[ve],filter:["==",["get","id"],N.row.id]});if(qe.length>0){const ot=qe[0].geometry;if(ot.type==="Point"){const Qe=ot.coordinates;Qe&&Qe.length>=2&&!isNaN(Qe[0])&&!isNaN(Qe[1])&&Be.flyTo({center:Qe,zoom:12,duration:1e3})}else try{const Qe={type:"Feature",properties:{},geometry:ot},[Lt,Ot,er,Yt]=fl(Qe);!isNaN(Lt)&&!isNaN(Ot)&&!isNaN(er)&&!isNaN(Yt)&&Be.fitBounds([[Lt,Ot],[er,Yt]],{padding:50,duration:1e3})}catch(Qe){if(console.error("Error calculating bbox for feature:",Qe),ot.coordinates&&ot.coordinates.length>0){let Lt=ot.coordinates[0];if(Array.isArray(Lt)&&Lt.length>0&&Array.isArray(Lt[0])&&(Lt=Lt[0]),Array.isArray(Lt)&&Lt.length>=2){const[Ot,er]=Lt;!isNaN(Ot)&&!isNaN(er)&&Be.flyTo({center:[Ot,er],zoom:10,duration:1e3})}}}}else setTimeout(Fe,200)};setTimeout(Fe,10)}else["gdx2.stp","gdx2.stl","gdx2.sta","gdx2.lu","gdx2.field"].forEach(ve=>{Be.getLayer(ve)&&(Be.setLayoutProperty(ve,"visibility","visible"),Be.setFilter(ve,null))}),Be.triggerRepaint()},[N,ue]),D.useEffect(()=>{var ce;if(!ue)return;const Be=(ce=oe.current)==null?void 0:ce.getMap();Be&&(G?Be.getCanvas().style.cursor="default":Be.getCanvas().style.cursor="")},[G,ue]),D.useEffect(()=>{G||(fe(null),et(null))},[G]),V.jsxs("div",{className:"relative w-full h-full rounded-md border overflow-hidden",children:[V.jsxs(r$,{ref:oe,mapLib:hO,reuseMaps:!0,mapStyle:e,...Xe,className:"w-full h-full",onLoad:()=>me(!0),onStyleLoad:()=>ht(),onMove:pt,onMouseMove:Ge,onMouseLeave:()=>d(null),onClick:Ye,children:[V.jsx(n$,{visualizePitch:!0,position:"top-right"}),o&&V.jsx(i$,{longitude:o.lng,latitude:o.lat,children:V.jsx("div",{className:"map-marker-emoji",children:u?V.jsxs("div",{className:"relative",children:[V.jsx("div",{children:""}),V.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-black text-white text-xs px-1 rounded whitespace-nowrap",children:u})]}):V.jsx("div",{children:""})})})]}),G&&ie&&ke&&ue&&(()=>{var at;const Be=(at=oe.current)==null?void 0:at.getMap();if(!Be)return null;const ce=Be.project(ie),he=Be.project(ke),ve=Math.min(ce.x,he.x),_e=Math.min(ce.y,he.y),Fe=Math.abs(ce.x-he.x),qe=Math.abs(ce.y-he.y);return V.jsx("div",{className:"map-rectangle-container",children:V.jsx("svg",{className:"map-rectangle-svg",children:V.jsx("rect",{x:ve,y:_e,width:Fe,height:qe,className:"map-rectangle-rect"})})})})()]})});/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var tC={};tC.version="0.18.5";var gO=1252,v$=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],mO=function(e){v$.indexOf(e)!=-1&&(gO=e)};function y$(){mO(1252)}var k0=function(e){mO(e)};function w$(){k0(1200),y$()}var hw=function(t){return String.fromCharCode(t)},pI=function(t){return String.fromCharCode(t)},rC,pu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function L0(e){for(var t="",r=0,i=0,n=0,s=0,a=0,o=0,u=0,d=0;d<e.length;)r=e.charCodeAt(d++),s=r>>2,i=e.charCodeAt(d++),a=(r&3)<<4|i>>4,n=e.charCodeAt(d++),o=(i&15)<<2|n>>6,u=n&63,isNaN(i)?o=u=64:isNaN(n)&&(u=64),t+=pu.charAt(s)+pu.charAt(a)+pu.charAt(o)+pu.charAt(u);return t}function Cc(e){var t="",r=0,i=0,n=0,s=0,a=0,o=0,u=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)s=pu.indexOf(e.charAt(d++)),a=pu.indexOf(e.charAt(d++)),r=s<<2|a>>4,t+=String.fromCharCode(r),o=pu.indexOf(e.charAt(d++)),i=(a&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(i)),u=pu.indexOf(e.charAt(d++)),n=(o&3)<<6|u,u!==64&&(t+=String.fromCharCode(n));return t}var Xr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Tc=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Qh(e){return Xr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function gI(e){return Xr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var za=function(t){return Xr?Tc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function x1(e){if(typeof ArrayBuffer>"u")return za(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i!=e.length;++i)r[i]=e.charCodeAt(i)&255;return t}function mv(e){if(Array.isArray(e))return e.map(function(i){return String.fromCharCode(i)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function x$(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var is=Xr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Tc(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var i=new Uint8Array(r),n=0;for(t=0,r=0;t<e.length;r+=n,++t)if(n=e[t].length,e[t]instanceof Uint8Array)i.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";i.set(new Uint8Array(e[t]),r)}return i}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function C$(e){for(var t=[],r=0,i=e.length+250,n=Qh(e.length+255),s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a<128)n[r++]=a;else if(a<2048)n[r++]=192|a>>6&31,n[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=e.charCodeAt(++s)&1023;n[r++]=240|a>>8&7,n[r++]=128|a>>2&63,n[r++]=128|o>>6&15|(a&3)<<4,n[r++]=128|o&63}else n[r++]=224|a>>12&15,n[r++]=128|a>>6&63,n[r++]=128|a&63;r>i&&(t.push(n.slice(0,r)),r=0,n=Qh(65535),i=65530)}return t.push(n.slice(0,r)),is(t)}var Ym=/\u0000/g,dw=/[\u0001-\u0006]/g;function np(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ga(e,t){var r=""+e;return r.length>=t?r:nn("0",t-r.length)+r}function eT(e,t){var r=""+e;return r.length>=t?r:nn(" ",t-r.length)+r}function iC(e,t){var r=""+e;return r.length>=t?r:r+nn(" ",t-r.length)}function _$(e,t){var r=""+Math.round(e);return r.length>=t?r:nn("0",t-r.length)+r}function b$(e,t){var r=""+e;return r.length>=t?r:nn("0",t-r.length)+r}var mI=Math.pow(2,32);function gf(e,t){if(e>mI||e<-mI)return _$(e,t);var r=Math.round(e);return b$(r,t)}function nC(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var vI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Zb=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function S$(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var on={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},yI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},E$={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function sC(e,t,r){for(var i=e<0?-1:1,n=e*i,s=0,a=1,o=0,u=1,d=0,p=0,v=Math.floor(n);d<t&&(v=Math.floor(n),o=v*a+s,p=v*d+u,!(n-v<5e-8));)n=1/(n-v),s=a,a=o,u=d,d=p;if(p>t&&(d>t?(p=u,o=s):(p=d,o=a)),!r)return[0,i*o,p];var y=Math.floor(i*o/p);return[y,i*o-y*p,p]}function fw(e,t,r){if(e>2958465||e<0)return null;var i=e|0,n=Math.floor(86400*(e-i)),s=0,a=[],o={D:i,T:n,u:86400*(e-i)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(i+=1462),o.u>.9999&&(o.u=0,++n==86400&&(o.T=n=0,++i,++o.D)),i===60)a=r?[1317,10,29]:[1900,2,29],s=3;else if(i===0)a=r?[1317,8,29]:[1900,1,0],s=6;else{i>60&&--i;var u=new Date(1900,0,1);u.setDate(u.getDate()+i-1),a=[u.getFullYear(),u.getMonth()+1,u.getDate()],s=u.getDay(),i<60&&(s=(s+6)%7),r&&(s=I$(u,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=n%60,n=Math.floor(n/60),o.M=n%60,n=Math.floor(n/60),o.H=n,o.q=s,o}var vO=new Date(1899,11,31,0,0,0),R$=vO.getTime(),T$=new Date(1900,2,1,0,0,0);function yO(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=T$&&(r+=24*60*60*1e3),(r-(R$+(e.getTimezoneOffset()-vO.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function tT(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function P$(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function M$(e){var t=e<0?12:11,r=tT(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function F$(e){var t=tT(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function A$(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=M$(e):t===10?r=e.toFixed(10).substr(0,12):r=F$(e),tT(P$(r.toUpperCase()))}function KE(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):A$(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Fu(14,yO(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function I$(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function D$(e,t,r,i){var n="",s=0,a=0,o=r.y,u,d=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:u=o%100,d=2;break;default:u=o%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:u=r.m,d=t.length;break;case 3:return Zb[r.m-1][1];case 5:return Zb[r.m-1][0];default:return Zb[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:u=r.d,d=t.length;break;case 3:return vI[r.q][0];default:return vI[r.q][1]}break;case 104:switch(t.length){case 1:case 2:u=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:u=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:u=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ga(r.S,t.length):(i>=2?a=i===3?1e3:100:a=i===1?10:1,s=Math.round(a*(r.S+r.u)),s>=60*a&&(s=0),t==="s"?s===0?"0":""+s/a:(n=Ga(s,2+i),t==="ss"?n.substr(0,2):"."+n.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":u=r.D*24+r.H;break;case"[m]":case"[mm]":u=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":u=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:u=o,d=1;break}var p=d>0?Ga(u,d):"";return p}function gu(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,i=e.substr(0,r);r!=e.length;r+=t)i+=(i.length>0?",":"")+e.substr(r,t);return i}var wO=/%/g;function k$(e,t,r){var i=t.replace(wO,""),n=t.length-i.length;return hc(e,i,r*Math.pow(10,2*n))+nn("%",n)}function L$(e,t,r){for(var i=t.length-1;t.charCodeAt(i-1)===44;)--i;return hc(e,t.substr(0,i),r/Math.pow(10,3*(t.length-i)))}function xO(e,t){var r,i=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+xO(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%n;if(s<0&&(s+=n),r=(t/Math.pow(10,s)).toPrecision(i+1+(n+s)%n),r.indexOf("e")===-1){var a=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,u,d,p){return u+d+p.substr(0,(n+s)%n)+"."+p.substr(s)+"E"})}else r=t.toExponential(i);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var CO=/# (\?+)( ?)\/( ?)(\d+)/;function O$(e,t,r){var i=parseInt(e[4],10),n=Math.round(t*i),s=Math.floor(n/i),a=n-s*i,o=i;return r+(s===0?"":""+s)+" "+(a===0?nn(" ",e[1].length+1+e[4].length):eT(a,e[1].length)+e[2]+"/"+e[3]+Ga(o,e[4].length))}function N$(e,t,r){return r+(t===0?"":""+t)+nn(" ",e[1].length+2+e[4].length)}var _O=/^#*0*\.([0#]+)/,bO=/\).*[0#]/,SO=/\(###\) ###\\?-####/;function qs(e){for(var t="",r,i=0;i!=e.length;++i)switch(r=e.charCodeAt(i)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function wI(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function xI(e,t){var r=e-Math.floor(e),i=Math.pow(10,t);return t<(""+Math.round(r*i)).length?0:Math.round(r*i)}function B$(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function z$(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function na(e,t,r){if(e.charCodeAt(0)===40&&!t.match(bO)){var i=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?na("n",i,r):"("+na("n",i,-r)+")"}if(t.charCodeAt(t.length-1)===44)return L$(e,t,r);if(t.indexOf("%")!==-1)return k$(e,t,r);if(t.indexOf("E")!==-1)return xO(t,r);if(t.charCodeAt(0)===36)return"$"+na(e,t.substr(t.charAt(1)==" "?2:1),r);var n,s,a,o,u=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+gf(u,t.length);if(t.match(/^[#?]+$/))return n=gf(r,0),n==="0"&&(n=""),n.length>t.length?n:qs(t.substr(0,t.length-n.length))+n;if(s=t.match(CO))return O$(s,u,d);if(t.match(/^#+0+$/))return d+gf(u,t.length-t.indexOf("0"));if(s=t.match(_O))return n=wI(r,s[1].length).replace(/^([^\.]+)$/,"$1."+qs(s[1])).replace(/\.$/,"."+qs(s[1])).replace(/\.(\d*)$/,function(P,R){return"."+R+nn("0",qs(s[1]).length-R.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return d+wI(u,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return d+gu(gf(u,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+na(e,t,-r):gu(""+(Math.floor(r)+B$(r,s[1].length)))+"."+Ga(xI(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return na(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=np(na(e,t.replace(/[\\-]/g,""),r)),a=0,np(np(t.replace(/\\/g,"")).replace(/[0#]/g,function(P){return a<n.length?n.charAt(a++):P==="0"?"0":""}));if(t.match(SO))return n=na(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var p="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=sC(u,Math.pow(10,a)-1,!1),n=""+d,p=hc("n",s[1],o[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),n+=p+s[2]+"/"+s[3],p=iC(o[2],a),p.length<s[4].length&&(p=qs(s[4].substr(s[4].length-p.length))+p),n+=p,n;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=sC(u,Math.pow(10,a)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?eT(o[1],a)+s[2]+"/"+s[3]+iC(o[2],a):nn(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return n=gf(r,0),t.length<=n.length?n:qs(t.substr(0,t.length-n.length))+n;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=n.indexOf(".");var v=t.indexOf(".")-a,y=t.length-n.length-v;return qs(t.substr(0,v)+n+t.substr(t.length-y))}if(s=t.match(/^00,000\.([#0]*0)$/))return a=xI(r,s[1].length),r<0?"-"+na(e,t,-r):gu(z$(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(P){return"00,"+(P.length<3?Ga(0,3-P.length):"")+P})+"."+Ga(a,s[1].length);switch(t){case"###,##0.00":return na(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var _=gu(gf(u,0));return _!=="0"?d+_:"";case"###,###.00":return na(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return na(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function G$(e,t,r){for(var i=t.length-1;t.charCodeAt(i-1)===44;)--i;return hc(e,t.substr(0,i),r/Math.pow(10,3*(t.length-i)))}function V$(e,t,r){var i=t.replace(wO,""),n=t.length-i.length;return hc(e,i,r*Math.pow(10,2*n))+nn("%",n)}function EO(e,t){var r,i=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+EO(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%n;if(s<0&&(s+=n),r=(t/Math.pow(10,s)).toPrecision(i+1+(n+s)%n),!r.match(/[Ee]/)){var a=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+s):r+="E+"+(a-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,u,d,p){return u+d+p.substr(0,(n+s)%n)+"."+p.substr(s)+"E"})}else r=t.toExponential(i);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function pl(e,t,r){if(e.charCodeAt(0)===40&&!t.match(bO)){var i=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?pl("n",i,r):"("+pl("n",i,-r)+")"}if(t.charCodeAt(t.length-1)===44)return G$(e,t,r);if(t.indexOf("%")!==-1)return V$(e,t,r);if(t.indexOf("E")!==-1)return EO(t,r);if(t.charCodeAt(0)===36)return"$"+pl(e,t.substr(t.charAt(1)==" "?2:1),r);var n,s,a,o,u=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Ga(u,t.length);if(t.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>t.length?n:qs(t.substr(0,t.length-n.length))+n;if(s=t.match(CO))return N$(s,u,d);if(t.match(/^#+0+$/))return d+Ga(u,t.length-t.indexOf("0"));if(s=t.match(_O))return n=(""+r).replace(/^([^\.]+)$/,"$1."+qs(s[1])).replace(/\.$/,"."+qs(s[1])),n=n.replace(/\.(\d*)$/,function(P,R){return"."+R+nn("0",qs(s[1]).length-R.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return d+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return d+gu(""+u);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+pl(e,t,-r):gu(""+r)+"."+nn("0",s[1].length);if(s=t.match(/^#,#*,#0/))return pl(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=np(pl(e,t.replace(/[\\-]/g,""),r)),a=0,np(np(t.replace(/\\/g,"")).replace(/[0#]/g,function(P){return a<n.length?n.charAt(a++):P==="0"?"0":""}));if(t.match(SO))return n=pl(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var p="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=sC(u,Math.pow(10,a)-1,!1),n=""+d,p=hc("n",s[1],o[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),n+=p+s[2]+"/"+s[3],p=iC(o[2],a),p.length<s[4].length&&(p=qs(s[4].substr(s[4].length-p.length))+p),n+=p,n;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=sC(u,Math.pow(10,a)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?eT(o[1],a)+s[2]+"/"+s[3]+iC(o[2],a):nn(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return n=""+r,t.length<=n.length?n:qs(t.substr(0,t.length-n.length))+n;if(s=t.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=n.indexOf(".");var v=t.indexOf(".")-a,y=t.length-n.length-v;return qs(t.substr(0,v)+n+t.substr(t.length-y))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+pl(e,t,-r):gu(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(P){return"00,"+(P.length<3?Ga(0,3-P.length):"")+P})+"."+Ga(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var _=gu(""+u);return _!=="0"?d+_:"";default:if(t.match(/\.[0#?]*$/))return pl(e,t.slice(0,t.lastIndexOf(".")),r)+qs(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function hc(e,t,r){return(r|0)===r?pl(e,t,r):na(e,t,r)}function H$(e){for(var t=[],r=!1,i=0,n=0;i<e.length;++i)switch(e.charCodeAt(i)){case 34:r=!r;break;case 95:case 42:case 92:++i;break;case 59:t[t.length]=e.substr(n,i-n),n=i+1}if(t[t.length]=e.substr(n),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var RO=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function TO(e){for(var t=0,r="",i="";t<e.length;)switch(r=e.charAt(t)){case"G":nC(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(i=r;e.charAt(t++)!=="]"&&t<e.length;)i+=e.charAt(t);if(i.match(RO))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function U$(e,t,r,i){for(var n=[],s="",a=0,o="",u="t",d,p,v,y="H";a<e.length;)switch(o=e.charAt(a)){case"G":if(!nC(e,a))throw new Error("unrecognized character "+o+" in "+e);n[n.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(v=e.charCodeAt(++a))!==34&&a<e.length;)s+=String.fromCharCode(v);n[n.length]={t:"t",v:s},++a;break;case"\\":var _=e.charAt(++a),P=_==="("||_===")"?_:"t";n[n.length]={t:P,v:_},++a;break;case"_":n[n.length]={t:"t",v:" "},a+=2;break;case"@":n[n.length]={t:"T",v:t},++a;break;case"B":case"b":if(e.charAt(a+1)==="1"||e.charAt(a+1)==="2"){if(d==null&&(d=fw(t,r,e.charAt(a+1)==="2"),d==null))return"";n[n.length]={t:"X",v:e.substr(a,2)},u=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=fw(t,r),d==null))return"";for(s=o;++a<e.length&&e.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&u.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=y),n[n.length]={t:o,v:s},u=o;break;case"A":case"a":case"":var R={t:o,v:o};if(d==null&&(d=fw(t,r)),e.substr(a,3).toUpperCase()==="A/P"?(d!=null&&(R.v=d.H>=12?"P":"A"),R.t="T",y="h",a+=3):e.substr(a,5).toUpperCase()==="AM/PM"?(d!=null&&(R.v=d.H>=12?"PM":"AM"),R.t="T",a+=5,y="h"):e.substr(a,5).toUpperCase()==="/"?(d!=null&&(R.v=d.H>=12?"":""),R.t="T",a+=5,y="h"):(R.t="t",++a),d==null&&R.t==="T")return"";n[n.length]=R,u=o;break;case"[":for(s=o;e.charAt(a++)!=="]"&&a<e.length;)s+=e.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(RO)){if(d==null&&(d=fw(t,r),d==null))return"";n[n.length]={t:"Z",v:s.toLowerCase()},u=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",TO(e)||(n[n.length]={t:"t",v:s}));break;case".":if(d!=null){for(s=o;++a<e.length&&(o=e.charAt(a))==="0";)s+=o;n[n.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(a))>-1;)s+=o;n[n.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++a)===o;)s+=o;n[n.length]={t:o,v:s},u=o;break;case"*":++a,(e.charAt(a)==" "||e.charAt(a)=="*")&&++a;break;case"(":case")":n[n.length]={t:i===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<e.length&&"0123456789".indexOf(e.charAt(++a))>-1;)s+=e.charAt(a);n[n.length]={t:"D",v:s};break;case" ":n[n.length]={t:o,v:o},++a;break;case"$":n[n.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);n[n.length]={t:"t",v:o},++a;break}var M=0,F=0,k;for(a=n.length-1,u="t";a>=0;--a)switch(n[a].t){case"h":case"H":n[a].t=y,u="h",M<1&&(M=1);break;case"s":(k=n[a].v.match(/\.0+$/))&&(F=Math.max(F,k[0].length-1)),M<3&&(M=3);case"d":case"y":case"M":case"e":u=n[a].t;break;case"m":u==="s"&&(n[a].t="M",M<2&&(M=2));break;case"X":break;case"Z":M<1&&n[a].v.match(/[Hh]/)&&(M=1),M<2&&n[a].v.match(/[Mm]/)&&(M=2),M<3&&n[a].v.match(/[Ss]/)&&(M=3)}switch(M){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var N="",G;for(a=0;a<n.length;++a)switch(n[a].t){case"t":case"T":case" ":case"D":break;case"X":n[a].v="",n[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[a].v=D$(n[a].t.charCodeAt(0),n[a].v,d,F),n[a].t="t";break;case"n":case"?":for(G=a+1;n[G]!=null&&((o=n[G].t)==="?"||o==="D"||(o===" "||o==="t")&&n[G+1]!=null&&(n[G+1].t==="?"||n[G+1].t==="t"&&n[G+1].v==="/")||n[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(n[G].v==="/"||n[G].v===" "&&n[G+1]!=null&&n[G+1].t=="?"));)n[a].v+=n[G].v,n[G]={v:"",t:";"},++G;N+=n[a].v,a=G-1;break;case"G":n[a].t="t",n[a].v=KE(t,r);break}var j="",ee,q;if(N.length>0){N.charCodeAt(0)==40?(ee=t<0&&N.charCodeAt(0)===45?-t:t,q=hc("n",N,ee)):(ee=t<0&&i>1?-t:t,q=hc("n",N,ee),ee<0&&n[0]&&n[0].t=="t"&&(q=q.substr(1),n[0].v="-"+n[0].v)),G=q.length-1;var oe=n.length;for(a=0;a<n.length;++a)if(n[a]!=null&&n[a].t!="t"&&n[a].v.indexOf(".")>-1){oe=a;break}var ue=n.length;if(oe===n.length&&q.indexOf("E")===-1){for(a=n.length-1;a>=0;--a)n[a]==null||"n?".indexOf(n[a].t)===-1||(G>=n[a].v.length-1?(G-=n[a].v.length,n[a].v=q.substr(G+1,n[a].v.length)):G<0?n[a].v="":(n[a].v=q.substr(0,G+1),G=-1),n[a].t="t",ue=a);G>=0&&ue<n.length&&(n[ue].v=q.substr(0,G+1)+n[ue].v)}else if(oe!==n.length&&q.indexOf("E")===-1){for(G=q.indexOf(".")-1,a=oe;a>=0;--a)if(!(n[a]==null||"n?".indexOf(n[a].t)===-1)){for(p=n[a].v.indexOf(".")>-1&&a===oe?n[a].v.indexOf(".")-1:n[a].v.length-1,j=n[a].v.substr(p+1);p>=0;--p)G>=0&&(n[a].v.charAt(p)==="0"||n[a].v.charAt(p)==="#")&&(j=q.charAt(G--)+j);n[a].v=j,n[a].t="t",ue=a}for(G>=0&&ue<n.length&&(n[ue].v=q.substr(0,G+1)+n[ue].v),G=q.indexOf(".")+1,a=oe;a<n.length;++a)if(!(n[a]==null||"n?(".indexOf(n[a].t)===-1&&a!==oe)){for(p=n[a].v.indexOf(".")>-1&&a===oe?n[a].v.indexOf(".")+1:0,j=n[a].v.substr(0,p);p<n[a].v.length;++p)G<q.length&&(j+=q.charAt(G++));n[a].v=j,n[a].t="t",ue=a}}}for(a=0;a<n.length;++a)n[a]!=null&&"n?".indexOf(n[a].t)>-1&&(ee=i>1&&t<0&&a>0&&n[a-1].v==="-"?-t:t,n[a].v=hc(n[a].t,n[a].v,ee),n[a].t="t");var me="";for(a=0;a!==n.length;++a)n[a]!=null&&(me+=n[a].v);return me}var CI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function _I(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function W$(e,t){var r=H$(e),i=r.length,n=r[i-1].indexOf("@");if(i<4&&n>-1&&--i,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[i,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(CI),o=r[1].match(CI);return _I(t,a)?[i,r[0]]:_I(t,o)?[i,r[1]]:[i,r[a!=null&&o!=null?2:1]]}return[i,s]}function Fu(e,t,r){r==null&&(r={});var i="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?i=r.dateNF:i=e;break;case"number":e==14&&r.dateNF?i=r.dateNF:i=(r.table!=null?r.table:on)[e],i==null&&(i=r.table&&r.table[yI[e]]||on[yI[e]]),i==null&&(i=E$[e]||"General");break}if(nC(i,0))return KE(t,r);t instanceof Date&&(t=yO(t,r.date1904));var n=W$(i,t);if(nC(n[1]))return KE(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return U$(n[1],t,r,n[0])}function PO(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(on[r]==null){t<0&&(t=r);continue}if(on[r]==e){t=r;break}}t<0&&(t=391)}return on[t]=e,t}function C1(e){for(var t=0;t!=392;++t)e[t]!==void 0&&PO(e[t],t)}function _1(){on=S$()}var MO=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function j$(e){var t=typeof e=="number"?on[e]:e;return t=t.replace(MO,"(\\d+)"),new RegExp("^"+t+"$")}function $$(e,t,r){var i=-1,n=-1,s=-1,a=-1,o=-1,u=-1;(t.match(MO)||[]).forEach(function(v,y){var _=parseInt(r[y+1],10);switch(v.toLowerCase().charAt(0)){case"y":i=_;break;case"d":s=_;break;case"h":a=_;break;case"s":u=_;break;case"m":a>=0?o=_:n=_;break}}),u>=0&&o==-1&&n>=0&&(o=n,n=-1);var d=(""+(i>=0?i:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var p=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return a==-1&&o==-1&&u==-1?d:i==-1&&n==-1&&s==-1?p:d+"T"+p}var q$=function(){var e={};e.version="1.2.0";function t(){for(var q=0,oe=new Array(256),ue=0;ue!=256;++ue)q=ue,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,q=q&1?-306674912^q>>>1:q>>>1,oe[ue]=q;return typeof Int32Array<"u"?new Int32Array(oe):oe}var r=t();function i(q){var oe=0,ue=0,me=0,ie=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(me=0;me!=256;++me)ie[me]=q[me];for(me=0;me!=256;++me)for(ue=q[me],oe=256+me;oe<4096;oe+=256)ue=ie[oe]=ue>>>8^q[ue&255];var fe=[];for(me=1;me!=16;++me)fe[me-1]=typeof Int32Array<"u"?ie.subarray(me*256,me*256+256):ie.slice(me*256,me*256+256);return fe}var n=i(r),s=n[0],a=n[1],o=n[2],u=n[3],d=n[4],p=n[5],v=n[6],y=n[7],_=n[8],P=n[9],R=n[10],M=n[11],F=n[12],k=n[13],N=n[14];function G(q,oe){for(var ue=oe^-1,me=0,ie=q.length;me<ie;)ue=ue>>>8^r[(ue^q.charCodeAt(me++))&255];return~ue}function j(q,oe){for(var ue=oe^-1,me=q.length-15,ie=0;ie<me;)ue=N[q[ie++]^ue&255]^k[q[ie++]^ue>>8&255]^F[q[ie++]^ue>>16&255]^M[q[ie++]^ue>>>24]^R[q[ie++]]^P[q[ie++]]^_[q[ie++]]^y[q[ie++]]^v[q[ie++]]^p[q[ie++]]^d[q[ie++]]^u[q[ie++]]^o[q[ie++]]^a[q[ie++]]^s[q[ie++]]^r[q[ie++]];for(me+=15;ie<me;)ue=ue>>>8^r[(ue^q[ie++])&255];return~ue}function ee(q,oe){for(var ue=oe^-1,me=0,ie=q.length,fe=0,ke=0;me<ie;)fe=q.charCodeAt(me++),fe<128?ue=ue>>>8^r[(ue^fe)&255]:fe<2048?(ue=ue>>>8^r[(ue^(192|fe>>6&31))&255],ue=ue>>>8^r[(ue^(128|fe&63))&255]):fe>=55296&&fe<57344?(fe=(fe&1023)+64,ke=q.charCodeAt(me++)&1023,ue=ue>>>8^r[(ue^(240|fe>>8&7))&255],ue=ue>>>8^r[(ue^(128|fe>>2&63))&255],ue=ue>>>8^r[(ue^(128|ke>>6&15|(fe&3)<<4))&255],ue=ue>>>8^r[(ue^(128|ke&63))&255]):(ue=ue>>>8^r[(ue^(224|fe>>12&15))&255],ue=ue>>>8^r[(ue^(128|fe>>6&63))&255],ue=ue>>>8^r[(ue^(128|fe&63))&255]);return~ue}return e.table=r,e.bstr=G,e.buf=j,e.str=ee,e}(),pi=function(){var t={};t.version="1.2.1";function r(X,de){for(var le=X.split("/"),ae=de.split("/"),pe=0,J=0,Re=Math.min(le.length,ae.length);pe<Re;++pe){if(J=le[pe].length-ae[pe].length)return J;if(le[pe]!=ae[pe])return le[pe]<ae[pe]?-1:1}return le.length-ae.length}function i(X){if(X.charAt(X.length-1)=="/")return X.slice(0,-1).indexOf("/")===-1?X:i(X.slice(0,-1));var de=X.lastIndexOf("/");return de===-1?X:X.slice(0,de+1)}function n(X){if(X.charAt(X.length-1)=="/")return n(X.slice(0,-1));var de=X.lastIndexOf("/");return de===-1?X:X.slice(de+1)}function s(X,de){typeof de=="string"&&(de=new Date(de));var le=de.getHours();le=le<<6|de.getMinutes(),le=le<<5|de.getSeconds()>>>1,X.write_shift(2,le);var ae=de.getFullYear()-1980;ae=ae<<4|de.getMonth()+1,ae=ae<<5|de.getDate(),X.write_shift(2,ae)}function a(X){var de=X.read_shift(2)&65535,le=X.read_shift(2)&65535,ae=new Date,pe=le&31;le>>>=5;var J=le&15;le>>>=4,ae.setMilliseconds(0),ae.setFullYear(le+1980),ae.setMonth(J-1),ae.setDate(pe);var Re=de&31;de>>>=5;var je=de&63;return de>>>=6,ae.setHours(de),ae.setMinutes(je),ae.setSeconds(Re<<1),ae}function o(X){Do(X,0);for(var de={},le=0;X.l<=X.length-4;){var ae=X.read_shift(2),pe=X.read_shift(2),J=X.l+pe,Re={};switch(ae){case 21589:le=X.read_shift(1),le&1&&(Re.mtime=X.read_shift(4)),pe>5&&(le&2&&(Re.atime=X.read_shift(4)),le&4&&(Re.ctime=X.read_shift(4))),Re.mtime&&(Re.mt=new Date(Re.mtime*1e3));break}X.l=J,de[ae]=Re}return de}var u;function d(){return u||(u={})}function p(X,de){if(X[0]==80&&X[1]==75)return wi(X,de);if((X[0]|32)==109&&(X[1]|32)==105)return Te(X,de);if(X.length<512)throw new Error("CFB file size "+X.length+" < 512");var le=3,ae=512,pe=0,J=0,Re=0,je=0,Ie=0,Le=[],He=X.slice(0,512);Do(He,0);var rt=v(He);switch(le=rt[0],le){case 3:ae=512;break;case 4:ae=4096;break;case 0:if(rt[1]==0)return wi(X,de);default:throw new Error("Major Version: Expected 3 or 4 saw "+le)}ae!==512&&(He=X.slice(0,ae),Do(He,28));var lt=X.slice(0,ae);y(He,le);var wt=He.read_shift(4,"i");if(le===3&&wt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+wt);He.l+=4,Re=He.read_shift(4,"i"),He.l+=4,He.chk("00100000","Mini Stream Cutoff Size: "),je=He.read_shift(4,"i"),pe=He.read_shift(4,"i"),Ie=He.read_shift(4,"i"),J=He.read_shift(4,"i");for(var gt=-1,At=0;At<109&&(gt=He.read_shift(4,"i"),!(gt<0));++At)Le[At]=gt;var lr=_(X,ae);M(Ie,J,lr,ae,Le);var br=k(lr,Re,Le,ae);br[Re].name="!Directory",pe>0&&je!==ke&&(br[je].name="!MiniFAT"),br[Le[0]].name="!FAT",br.fat_addrs=Le,br.ssz=ae;var Rr={},mr=[],ln=[],$n=[];N(Re,br,lr,mr,pe,Rr,ln,je),P(ln,$n,mr),mr.shift();var ei={FileIndex:ln,FullPaths:$n};return de&&de.raw&&(ei.raw={header:lt,sectors:lr}),ei}function v(X){if(X[X.l]==80&&X[X.l+1]==75)return[0,0];X.chk(et,"Header Signature: "),X.l+=16;var de=X.read_shift(2,"u");return[X.read_shift(2,"u"),de]}function y(X,de){var le=9;switch(X.l+=2,le=X.read_shift(2)){case 9:if(de!=3)throw new Error("Sector Shift: Expected 9 saw "+le);break;case 12:if(de!=4)throw new Error("Sector Shift: Expected 12 saw "+le);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+le)}X.chk("0600","Mini Sector Shift: "),X.chk("000000000000","Reserved: ")}function _(X,de){for(var le=Math.ceil(X.length/de)-1,ae=[],pe=1;pe<le;++pe)ae[pe-1]=X.slice(pe*de,(pe+1)*de);return ae[le-1]=X.slice(le*de),ae}function P(X,de,le){for(var ae=0,pe=0,J=0,Re=0,je=0,Ie=le.length,Le=[],He=[];ae<Ie;++ae)Le[ae]=He[ae]=ae,de[ae]=le[ae];for(;je<He.length;++je)ae=He[je],pe=X[ae].L,J=X[ae].R,Re=X[ae].C,Le[ae]===ae&&(pe!==-1&&Le[pe]!==pe&&(Le[ae]=Le[pe]),J!==-1&&Le[J]!==J&&(Le[ae]=Le[J])),Re!==-1&&(Le[Re]=ae),pe!==-1&&ae!=Le[ae]&&(Le[pe]=Le[ae],He.lastIndexOf(pe)<je&&He.push(pe)),J!==-1&&ae!=Le[ae]&&(Le[J]=Le[ae],He.lastIndexOf(J)<je&&He.push(J));for(ae=1;ae<Ie;++ae)Le[ae]===ae&&(J!==-1&&Le[J]!==J?Le[ae]=Le[J]:pe!==-1&&Le[pe]!==pe&&(Le[ae]=Le[pe]));for(ae=1;ae<Ie;++ae)if(X[ae].type!==0){if(je=ae,je!=Le[je])do je=Le[je],de[ae]=de[je]+"/"+de[ae];while(je!==0&&Le[je]!==-1&&je!=Le[je]);Le[ae]=-1}for(de[0]+="/",ae=1;ae<Ie;++ae)X[ae].type!==2&&(de[ae]+="/")}function R(X,de,le){for(var ae=X.start,pe=X.size,J=[],Re=ae;le&&pe>0&&Re>=0;)J.push(de.slice(Re*fe,Re*fe+fe)),pe-=fe,Re=Rh(le,Re*4);return J.length===0?mt(0):is(J).slice(0,X.size)}function M(X,de,le,ae,pe){var J=ke;if(X===ke){if(de!==0)throw new Error("DIFAT chain shorter than expected")}else if(X!==-1){var Re=le[X],je=(ae>>>2)-1;if(!Re)return;for(var Ie=0;Ie<je&&(J=Rh(Re,Ie*4))!==ke;++Ie)pe.push(J);M(Rh(Re,ae-4),de-1,le,ae,pe)}}function F(X,de,le,ae,pe){var J=[],Re=[];pe||(pe=[]);var je=ae-1,Ie=0,Le=0;for(Ie=de;Ie>=0;){pe[Ie]=!0,J[J.length]=Ie,Re.push(X[Ie]);var He=le[Math.floor(Ie*4/ae)];if(Le=Ie*4&je,ae<4+Le)throw new Error("FAT boundary crossed: "+Ie+" 4 "+ae);if(!X[He])break;Ie=Rh(X[He],Le)}return{nodes:J,data:FI([Re])}}function k(X,de,le,ae){var pe=X.length,J=[],Re=[],je=[],Ie=[],Le=ae-1,He=0,rt=0,lt=0,wt=0;for(He=0;He<pe;++He)if(je=[],lt=He+de,lt>=pe&&(lt-=pe),!Re[lt]){Ie=[];var gt=[];for(rt=lt;rt>=0;){gt[rt]=!0,Re[rt]=!0,je[je.length]=rt,Ie.push(X[rt]);var At=le[Math.floor(rt*4/ae)];if(wt=rt*4&Le,ae<4+wt)throw new Error("FAT boundary crossed: "+rt+" 4 "+ae);if(!X[At]||(rt=Rh(X[At],wt),gt[rt]))break}J[lt]={nodes:je,data:FI([Ie])}}return J}function N(X,de,le,ae,pe,J,Re,je){for(var Ie=0,Le=ae.length?2:0,He=de[X].data,rt=0,lt=0,wt;rt<He.length;rt+=128){var gt=He.slice(rt,rt+128);Do(gt,64),lt=gt.read_shift(2),wt=oT(gt,0,lt-Le),ae.push(wt);var At={name:wt,type:gt.read_shift(1),color:gt.read_shift(1),L:gt.read_shift(4,"i"),R:gt.read_shift(4,"i"),C:gt.read_shift(4,"i"),clsid:gt.read_shift(16),state:gt.read_shift(4,"i"),start:0,size:0},lr=gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2);lr!==0&&(At.ct=G(gt,gt.l-8));var br=gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2);br!==0&&(At.mt=G(gt,gt.l-8)),At.start=gt.read_shift(4,"i"),At.size=gt.read_shift(4,"i"),At.size<0&&At.start<0&&(At.size=At.type=0,At.start=ke,At.name=""),At.type===5?(Ie=At.start,pe>0&&Ie!==ke&&(de[Ie].name="!StreamData")):At.size>=4096?(At.storage="fat",de[At.start]===void 0&&(de[At.start]=F(le,At.start,de.fat_addrs,de.ssz)),de[At.start].name=At.name,At.content=de[At.start].data.slice(0,At.size)):(At.storage="minifat",At.size<0?At.size=0:Ie!==ke&&At.start!==ke&&de[Ie]&&(At.content=R(At,de[Ie].data,(de[je]||{}).data))),At.content&&Do(At.content,0),J[wt]=At,Re.push(At)}}function G(X,de){return new Date((Lo(X,de+4)/1e7*Math.pow(2,32)+Lo(X,de)/1e7-11644473600)*1e3)}function j(X,de){return d(),p(u.readFileSync(X),de)}function ee(X,de){var le=de&&de.type;switch(le||Xr&&Buffer.isBuffer(X)&&(le="buffer"),le||"base64"){case"file":return j(X,de);case"base64":return p(za(Cc(X)),de);case"binary":return p(za(X),de)}return p(X,de)}function q(X,de){var le=de||{},ae=le.root||"Root Entry";if(X.FullPaths||(X.FullPaths=[]),X.FileIndex||(X.FileIndex=[]),X.FullPaths.length!==X.FileIndex.length)throw new Error("inconsistent CFB structure");X.FullPaths.length===0&&(X.FullPaths[0]=ae+"/",X.FileIndex[0]={name:ae,type:5}),le.CLSID&&(X.FileIndex[0].clsid=le.CLSID),oe(X)}function oe(X){var de="Sh33tJ5";if(!pi.find(X,"/"+de)){var le=mt(4);le[0]=55,le[1]=le[3]=50,le[2]=54,X.FileIndex.push({name:de,type:2,content:le,size:4,L:69,R:69,C:69}),X.FullPaths.push(X.FullPaths[0]+de),ue(X)}}function ue(X,de){q(X);for(var le=!1,ae=!1,pe=X.FullPaths.length-1;pe>=0;--pe){var J=X.FileIndex[pe];switch(J.type){case 0:ae?le=!0:(X.FileIndex.pop(),X.FullPaths.pop());break;case 1:case 2:case 5:ae=!0,isNaN(J.R*J.L*J.C)&&(le=!0),J.R>-1&&J.L>-1&&J.R==J.L&&(le=!0);break;default:le=!0;break}}if(!(!le&&!de)){var Re=new Date(1987,1,19),je=0,Ie=Object.create?Object.create(null):{},Le=[];for(pe=0;pe<X.FullPaths.length;++pe)Ie[X.FullPaths[pe]]=!0,X.FileIndex[pe].type!==0&&Le.push([X.FullPaths[pe],X.FileIndex[pe]]);for(pe=0;pe<Le.length;++pe){var He=i(Le[pe][0]);ae=Ie[He],ae||(Le.push([He,{name:n(He).replace("/",""),type:1,clsid:ct,ct:Re,mt:Re,content:null}]),Ie[He]=!0)}for(Le.sort(function(wt,gt){return r(wt[0],gt[0])}),X.FullPaths=[],X.FileIndex=[],pe=0;pe<Le.length;++pe)X.FullPaths[pe]=Le[pe][0],X.FileIndex[pe]=Le[pe][1];for(pe=0;pe<Le.length;++pe){var rt=X.FileIndex[pe],lt=X.FullPaths[pe];if(rt.name=n(lt).replace("/",""),rt.L=rt.R=rt.C=-(rt.color=1),rt.size=rt.content?rt.content.length:0,rt.start=0,rt.clsid=rt.clsid||ct,pe===0)rt.C=Le.length>1?1:-1,rt.size=0,rt.type=5;else if(lt.slice(-1)=="/"){for(je=pe+1;je<Le.length&&i(X.FullPaths[je])!=lt;++je);for(rt.C=je>=Le.length?-1:je,je=pe+1;je<Le.length&&i(X.FullPaths[je])!=i(lt);++je);rt.R=je>=Le.length?-1:je,rt.type=1}else i(X.FullPaths[pe+1]||"")==i(lt)&&(rt.R=pe+1),rt.type=2}}}function me(X,de){var le=de||{};if(le.fileType=="mad")return We(X,le);switch(ue(X),le.fileType){case"zip":return sr(X,le)}var ae=function(wt){for(var gt=0,At=0,lr=0;lr<wt.FileIndex.length;++lr){var br=wt.FileIndex[lr];if(br.content){var Rr=br.content.length;Rr>0&&(Rr<4096?gt+=Rr+63>>6:At+=Rr+511>>9)}}for(var mr=wt.FullPaths.length+3>>2,ln=gt+7>>3,$n=gt+127>>7,ei=ln+At+mr+$n,Ur=ei+127>>7,Zo=Ur<=109?0:Math.ceil((Ur-109)/127);ei+Ur+Zo+127>>7>Ur;)Zo=++Ur<=109?0:Math.ceil((Ur-109)/127);var ti=[1,Zo,Ur,$n,mr,At,gt,0];return wt.FileIndex[0].size=gt<<6,ti[7]=(wt.FileIndex[0].start=ti[0]+ti[1]+ti[2]+ti[3]+ti[4]+ti[5])+(ti[6]+7>>3),ti}(X),pe=mt(ae[7]<<9),J=0,Re=0;{for(J=0;J<8;++J)pe.write_shift(1,Xe[J]);for(J=0;J<8;++J)pe.write_shift(2,0);for(pe.write_shift(2,62),pe.write_shift(2,3),pe.write_shift(2,65534),pe.write_shift(2,9),pe.write_shift(2,6),J=0;J<3;++J)pe.write_shift(2,0);for(pe.write_shift(4,0),pe.write_shift(4,ae[2]),pe.write_shift(4,ae[0]+ae[1]+ae[2]+ae[3]-1),pe.write_shift(4,0),pe.write_shift(4,4096),pe.write_shift(4,ae[3]?ae[0]+ae[1]+ae[2]-1:ke),pe.write_shift(4,ae[3]),pe.write_shift(-4,ae[1]?ae[0]-1:ke),pe.write_shift(4,ae[1]),J=0;J<109;++J)pe.write_shift(-4,J<ae[2]?ae[1]+J:-1)}if(ae[1])for(Re=0;Re<ae[1];++Re){for(;J<236+Re*127;++J)pe.write_shift(-4,J<ae[2]?ae[1]+J:-1);pe.write_shift(-4,Re===ae[1]-1?ke:Re+1)}var je=function(wt){for(Re+=wt;J<Re-1;++J)pe.write_shift(-4,J+1);wt&&(++J,pe.write_shift(-4,ke))};for(Re=J=0,Re+=ae[1];J<Re;++J)pe.write_shift(-4,pt.DIFSECT);for(Re+=ae[2];J<Re;++J)pe.write_shift(-4,pt.FATSECT);je(ae[3]),je(ae[4]);for(var Ie=0,Le=0,He=X.FileIndex[0];Ie<X.FileIndex.length;++Ie)He=X.FileIndex[Ie],He.content&&(Le=He.content.length,!(Le<4096)&&(He.start=Re,je(Le+511>>9)));for(je(ae[6]+7>>3);pe.l&511;)pe.write_shift(-4,pt.ENDOFCHAIN);for(Re=J=0,Ie=0;Ie<X.FileIndex.length;++Ie)He=X.FileIndex[Ie],He.content&&(Le=He.content.length,!(!Le||Le>=4096)&&(He.start=Re,je(Le+63>>6)));for(;pe.l&511;)pe.write_shift(-4,pt.ENDOFCHAIN);for(J=0;J<ae[4]<<2;++J){var rt=X.FullPaths[J];if(!rt||rt.length===0){for(Ie=0;Ie<17;++Ie)pe.write_shift(4,0);for(Ie=0;Ie<3;++Ie)pe.write_shift(4,-1);for(Ie=0;Ie<12;++Ie)pe.write_shift(4,0);continue}He=X.FileIndex[J],J===0&&(He.start=He.size?He.start-1:ke);var lt=J===0&&le.root||He.name;if(Le=2*(lt.length+1),pe.write_shift(64,lt,"utf16le"),pe.write_shift(2,Le),pe.write_shift(1,He.type),pe.write_shift(1,He.color),pe.write_shift(-4,He.L),pe.write_shift(-4,He.R),pe.write_shift(-4,He.C),He.clsid)pe.write_shift(16,He.clsid,"hex");else for(Ie=0;Ie<4;++Ie)pe.write_shift(4,0);pe.write_shift(4,He.state||0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,He.start),pe.write_shift(4,He.size),pe.write_shift(4,0)}for(J=1;J<X.FileIndex.length;++J)if(He=X.FileIndex[J],He.size>=4096)if(pe.l=He.start+1<<9,Xr&&Buffer.isBuffer(He.content))He.content.copy(pe,pe.l,0,He.size),pe.l+=He.size+511&-512;else{for(Ie=0;Ie<He.size;++Ie)pe.write_shift(1,He.content[Ie]);for(;Ie&511;++Ie)pe.write_shift(1,0)}for(J=1;J<X.FileIndex.length;++J)if(He=X.FileIndex[J],He.size>0&&He.size<4096)if(Xr&&Buffer.isBuffer(He.content))He.content.copy(pe,pe.l,0,He.size),pe.l+=He.size+63&-64;else{for(Ie=0;Ie<He.size;++Ie)pe.write_shift(1,He.content[Ie]);for(;Ie&63;++Ie)pe.write_shift(1,0)}if(Xr)pe.l=pe.length;else for(;pe.l<pe.length;)pe.write_shift(1,0);return pe}function ie(X,de){var le=X.FullPaths.map(function(Ie){return Ie.toUpperCase()}),ae=le.map(function(Ie){var Le=Ie.split("/");return Le[Le.length-(Ie.slice(-1)=="/"?2:1)]}),pe=!1;de.charCodeAt(0)===47?(pe=!0,de=le[0].slice(0,-1)+de):pe=de.indexOf("/")!==-1;var J=de.toUpperCase(),Re=pe===!0?le.indexOf(J):ae.indexOf(J);if(Re!==-1)return X.FileIndex[Re];var je=!J.match(dw);for(J=J.replace(Ym,""),je&&(J=J.replace(dw,"!")),Re=0;Re<le.length;++Re)if((je?le[Re].replace(dw,"!"):le[Re]).replace(Ym,"")==J||(je?ae[Re].replace(dw,"!"):ae[Re]).replace(Ym,"")==J)return X.FileIndex[Re];return null}var fe=64,ke=-2,et="d0cf11e0a1b11ae1",Xe=[208,207,17,224,161,177,26,225],ct="00000000000000000000000000000000",pt={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ke,FREESECT:-1,HEADER_SIGNATURE:et,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ct,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ge(X,de,le){d();var ae=me(X,le);u.writeFileSync(de,ae)}function Ye(X){for(var de=new Array(X.length),le=0;le<X.length;++le)de[le]=String.fromCharCode(X[le]);return de.join("")}function ht(X,de){var le=me(X,de);switch(de&&de.type||"buffer"){case"file":return d(),u.writeFileSync(de.filename,le),le;case"binary":return typeof le=="string"?le:Ye(le);case"base64":return L0(typeof le=="string"?le:Ye(le));case"buffer":if(Xr)return Buffer.isBuffer(le)?le:Tc(le);case"array":return typeof le=="string"?za(le):le}return le}var Be;function ce(X){try{var de=X.InflateRaw,le=new de;if(le._processChunk(new Uint8Array([3,0]),le._finishFlushFlag),le.bytesRead)Be=X;else throw new Error("zlib does not expose bytesRead")}catch(ae){console.error("cannot use native zlib: "+(ae.message||ae))}}function he(X,de){if(!Be)return wr(X,de);var le=Be.InflateRaw,ae=new le,pe=ae._processChunk(X.slice(X.l),ae._finishFlushFlag);return X.l+=ae.bytesRead,pe}function ve(X){return Be?Be.deflateRawSync(X):kn(X)}var _e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Fe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],qe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function at(X){var de=(X<<1|X<<11)&139536|(X<<5|X<<15)&558144;return(de>>16|de>>8|de)&255}for(var ot=typeof Uint8Array<"u",Qe=ot?new Uint8Array(256):[],Lt=0;Lt<256;++Lt)Qe[Lt]=at(Lt);function Ot(X,de){var le=Qe[X&255];return de<=8?le>>>8-de:(le=le<<8|Qe[X>>8&255],de<=16?le>>>16-de:(le=le<<8|Qe[X>>16&255],le>>>24-de))}function er(X,de){var le=de&7,ae=de>>>3;return(X[ae]|(le<=6?0:X[ae+1]<<8))>>>le&3}function Yt(X,de){var le=de&7,ae=de>>>3;return(X[ae]|(le<=5?0:X[ae+1]<<8))>>>le&7}function Qt(X,de){var le=de&7,ae=de>>>3;return(X[ae]|(le<=4?0:X[ae+1]<<8))>>>le&15}function qt(X,de){var le=de&7,ae=de>>>3;return(X[ae]|(le<=3?0:X[ae+1]<<8))>>>le&31}function Et(X,de){var le=de&7,ae=de>>>3;return(X[ae]|(le<=1?0:X[ae+1]<<8))>>>le&127}function hr(X,de,le){var ae=de&7,pe=de>>>3,J=(1<<le)-1,Re=X[pe]>>>ae;return le<8-ae||(Re|=X[pe+1]<<8-ae,le<16-ae)||(Re|=X[pe+2]<<16-ae,le<24-ae)||(Re|=X[pe+3]<<24-ae),Re&J}function rr(X,de,le){var ae=de&7,pe=de>>>3;return ae<=5?X[pe]|=(le&7)<<ae:(X[pe]|=le<<ae&255,X[pe+1]=(le&7)>>8-ae),de+3}function Ke(X,de,le){var ae=de&7,pe=de>>>3;return le=(le&1)<<ae,X[pe]|=le,de+1}function Jt(X,de,le){var ae=de&7,pe=de>>>3;return le<<=ae,X[pe]|=le&255,le>>>=8,X[pe+1]=le,de+8}function Nr(X,de,le){var ae=de&7,pe=de>>>3;return le<<=ae,X[pe]|=le&255,le>>>=8,X[pe+1]=le&255,X[pe+2]=le>>>8,de+16}function vr(X,de){var le=X.length,ae=2*le>de?2*le:de+5,pe=0;if(le>=de)return X;if(Xr){var J=gI(ae);if(X.copy)X.copy(J);else for(;pe<X.length;++pe)J[pe]=X[pe];return J}else if(ot){var Re=new Uint8Array(ae);if(Re.set)Re.set(X);else for(;pe<le;++pe)Re[pe]=X[pe];return Re}return X.length=ae,X}function $t(X){for(var de=new Array(X),le=0;le<X;++le)de[le]=0;return de}function ui(X,de,le){var ae=1,pe=0,J=0,Re=0,je=0,Ie=X.length,Le=ot?new Uint16Array(32):$t(32);for(J=0;J<32;++J)Le[J]=0;for(J=Ie;J<le;++J)X[J]=0;Ie=X.length;var He=ot?new Uint16Array(Ie):$t(Ie);for(J=0;J<Ie;++J)Le[pe=X[J]]++,ae<pe&&(ae=pe),He[J]=0;for(Le[0]=0,J=1;J<=ae;++J)Le[J+16]=je=je+Le[J-1]<<1;for(J=0;J<Ie;++J)je=X[J],je!=0&&(He[J]=Le[je+16]++);var rt=0;for(J=0;J<Ie;++J)if(rt=X[J],rt!=0)for(je=Ot(He[J],ae)>>ae-rt,Re=(1<<ae+4-rt)-1;Re>=0;--Re)de[je|Re<<rt]=rt&15|J<<4;return ae}var ds=ot?new Uint16Array(512):$t(512),an=ot?new Uint16Array(32):$t(32);if(!ot){for(var Ir=0;Ir<512;++Ir)ds[Ir]=0;for(Ir=0;Ir<32;++Ir)an[Ir]=0}(function(){for(var X=[],de=0;de<32;de++)X.push(5);ui(X,an,32);var le=[];for(de=0;de<=143;de++)le.push(8);for(;de<=255;de++)le.push(9);for(;de<=279;de++)le.push(7);for(;de<=287;de++)le.push(8);ui(le,ds,288)})();var Kr=function(){for(var de=ot?new Uint8Array(32768):[],le=0,ae=0;le<qe.length-1;++le)for(;ae<qe[le+1];++ae)de[ae]=le;for(;ae<32768;++ae)de[ae]=29;var pe=ot?new Uint8Array(259):[];for(le=0,ae=0;le<Fe.length-1;++le)for(;ae<Fe[le+1];++ae)pe[ae]=le;function J(je,Ie){for(var Le=0;Le<je.length;){var He=Math.min(65535,je.length-Le),rt=Le+He==je.length;for(Ie.write_shift(1,+rt),Ie.write_shift(2,He),Ie.write_shift(2,~He&65535);He-- >0;)Ie[Ie.l++]=je[Le++]}return Ie.l}function Re(je,Ie){for(var Le=0,He=0,rt=ot?new Uint16Array(32768):[];He<je.length;){var lt=Math.min(65535,je.length-He);if(lt<10){for(Le=rr(Ie,Le,+(He+lt==je.length)),Le&7&&(Le+=8-(Le&7)),Ie.l=Le/8|0,Ie.write_shift(2,lt),Ie.write_shift(2,~lt&65535);lt-- >0;)Ie[Ie.l++]=je[He++];Le=Ie.l*8;continue}Le=rr(Ie,Le,+(He+lt==je.length)+2);for(var wt=0;lt-- >0;){var gt=je[He];wt=(wt<<5^gt)&32767;var At=-1,lr=0;if((At=rt[wt])&&(At|=He&-32768,At>He&&(At-=32768),At<He))for(;je[At+lr]==je[He+lr]&&lr<250;)++lr;if(lr>2){gt=pe[lr],gt<=22?Le=Jt(Ie,Le,Qe[gt+1]>>1)-1:(Jt(Ie,Le,3),Le+=5,Jt(Ie,Le,Qe[gt-23]>>5),Le+=3);var br=gt<8?0:gt-4>>2;br>0&&(Nr(Ie,Le,lr-Fe[gt]),Le+=br),gt=de[He-At],Le=Jt(Ie,Le,Qe[gt]>>3),Le-=3;var Rr=gt<4?0:gt-2>>1;Rr>0&&(Nr(Ie,Le,He-At-qe[gt]),Le+=Rr);for(var mr=0;mr<lr;++mr)rt[wt]=He&32767,wt=(wt<<5^je[He])&32767,++He;lt-=lr-1}else gt<=143?gt=gt+48:Le=Ke(Ie,Le,1),Le=Jt(Ie,Le,Qe[gt]),rt[wt]=He&32767,++He}Le=Jt(Ie,Le,0)-1}return Ie.l=(Le+7)/8|0,Ie.l}return function(Ie,Le){return Ie.length<8?J(Ie,Le):Re(Ie,Le)}}();function kn(X){var de=mt(50+Math.floor(X.length*1.1)),le=Kr(X,de);return de.slice(0,le)}var fs=ot?new Uint16Array(32768):$t(32768),Tt=ot?new Uint16Array(32768):$t(32768),Ji=ot?new Uint16Array(128):$t(128),Yr=1,ks=1;function Ls(X,de){var le=qt(X,de)+257;de+=5;var ae=qt(X,de)+1;de+=5;var pe=Qt(X,de)+4;de+=4;for(var J=0,Re=ot?new Uint8Array(19):$t(19),je=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ie=1,Le=ot?new Uint8Array(8):$t(8),He=ot?new Uint8Array(8):$t(8),rt=Re.length,lt=0;lt<pe;++lt)Re[_e[lt]]=J=Yt(X,de),Ie<J&&(Ie=J),Le[J]++,de+=3;var wt=0;for(Le[0]=0,lt=1;lt<=Ie;++lt)He[lt]=wt=wt+Le[lt-1]<<1;for(lt=0;lt<rt;++lt)(wt=Re[lt])!=0&&(je[lt]=He[wt]++);var gt=0;for(lt=0;lt<rt;++lt)if(gt=Re[lt],gt!=0){wt=Qe[je[lt]]>>8-gt;for(var At=(1<<7-gt)-1;At>=0;--At)Ji[wt|At<<gt]=gt&7|lt<<3}var lr=[];for(Ie=1;lr.length<le+ae;)switch(wt=Ji[Et(X,de)],de+=wt&7,wt>>>=3){case 16:for(J=3+er(X,de),de+=2,wt=lr[lr.length-1];J-- >0;)lr.push(wt);break;case 17:for(J=3+Yt(X,de),de+=3;J-- >0;)lr.push(0);break;case 18:for(J=11+Et(X,de),de+=7;J-- >0;)lr.push(0);break;default:lr.push(wt),Ie<wt&&(Ie=wt);break}var br=lr.slice(0,le),Rr=lr.slice(le);for(lt=le;lt<286;++lt)br[lt]=0;for(lt=ae;lt<30;++lt)Rr[lt]=0;return Yr=ui(br,fs,286),ks=ui(Rr,Tt,30),de}function Ft(X,de){if(X[0]==3&&!(X[1]&3))return[Qh(de),2];for(var le=0,ae=0,pe=gI(de||1<<18),J=0,Re=pe.length>>>0,je=0,Ie=0;!(ae&1);){if(ae=Yt(X,le),le+=3,ae>>>1)ae>>1==1?(je=9,Ie=5):(le=Ls(X,le),je=Yr,Ie=ks);else{le&7&&(le+=8-(le&7));var Le=X[le>>>3]|X[(le>>>3)+1]<<8;if(le+=32,Le>0)for(!de&&Re<J+Le&&(pe=vr(pe,J+Le),Re=pe.length);Le-- >0;)pe[J++]=X[le>>>3],le+=8;continue}for(;;){!de&&Re<J+32767&&(pe=vr(pe,J+32767),Re=pe.length);var He=hr(X,le,je),rt=ae>>>1==1?ds[He]:fs[He];if(le+=rt&15,rt>>>=4,!(rt>>>8&255))pe[J++]=rt;else{if(rt==256)break;rt-=257;var lt=rt<8?0:rt-4>>2;lt>5&&(lt=0);var wt=J+Fe[rt];lt>0&&(wt+=hr(X,le,lt),le+=lt),He=hr(X,le,Ie),rt=ae>>>1==1?an[He]:Tt[He],le+=rt&15,rt>>>=4;var gt=rt<4?0:rt-2>>1,At=qe[rt];for(gt>0&&(At+=hr(X,le,gt),le+=gt),!de&&Re<wt&&(pe=vr(pe,wt+100),Re=pe.length);J<wt;)pe[J]=pe[J-At],++J}}}return de?[pe,le+7>>>3]:[pe.slice(0,J),le+7>>>3]}function wr(X,de){var le=X.slice(X.l||0),ae=Ft(le,de);return X.l+=ae[1],ae[0]}function yr(X,de){if(X)typeof console<"u"&&console.error(de);else throw new Error(de)}function wi(X,de){var le=X;Do(le,0);var ae=[],pe=[],J={FileIndex:ae,FullPaths:pe};q(J,{root:de.root});for(var Re=le.length-4;(le[Re]!=80||le[Re+1]!=75||le[Re+2]!=5||le[Re+3]!=6)&&Re>=0;)--Re;le.l=Re+4,le.l+=4;var je=le.read_shift(2);le.l+=6;var Ie=le.read_shift(4);for(le.l=Ie,Re=0;Re<je;++Re){le.l+=20;var Le=le.read_shift(4),He=le.read_shift(4),rt=le.read_shift(2),lt=le.read_shift(2),wt=le.read_shift(2);le.l+=8;var gt=le.read_shift(4),At=o(le.slice(le.l+rt,le.l+rt+lt));le.l+=rt+lt+wt;var lr=le.l;le.l=gt+4,ps(le,Le,He,J,At),le.l=lr}return J}function ps(X,de,le,ae,pe){X.l+=2;var J=X.read_shift(2),Re=X.read_shift(2),je=a(X);if(J&8257)throw new Error("Unsupported ZIP encryption");for(var Ie=X.read_shift(4),Le=X.read_shift(4),He=X.read_shift(4),rt=X.read_shift(2),lt=X.read_shift(2),wt="",gt=0;gt<rt;++gt)wt+=String.fromCharCode(X[X.l++]);if(lt){var At=o(X.slice(X.l,X.l+lt));(At[21589]||{}).mt&&(je=At[21589].mt),((pe||{})[21589]||{}).mt&&(je=pe[21589].mt)}X.l+=lt;var lr=X.slice(X.l,X.l+Le);switch(Re){case 8:lr=he(X,He);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Re)}var br=!1;J&8&&(Ie=X.read_shift(4),Ie==134695760&&(Ie=X.read_shift(4),br=!0),Le=X.read_shift(4),He=X.read_shift(4)),Le!=de&&yr(br,"Bad compressed size: "+de+" != "+Le),He!=le&&yr(br,"Bad uncompressed size: "+le+" != "+He),Ae(ae,wt,lr,{unsafe:!0,mt:je})}function sr(X,de){var le=de||{},ae=[],pe=[],J=mt(1),Re=le.compression?8:0,je=0,Ie=0,Le=0,He=0,rt=0,lt=X.FullPaths[0],wt=lt,gt=X.FileIndex[0],At=[],lr=0;for(Ie=1;Ie<X.FullPaths.length;++Ie)if(wt=X.FullPaths[Ie].slice(lt.length),gt=X.FileIndex[Ie],!(!gt.size||!gt.content||wt=="Sh33tJ5")){var br=He,Rr=mt(wt.length);for(Le=0;Le<wt.length;++Le)Rr.write_shift(1,wt.charCodeAt(Le)&127);Rr=Rr.slice(0,Rr.l),At[rt]=q$.buf(gt.content,0);var mr=gt.content;Re==8&&(mr=ve(mr)),J=mt(30),J.write_shift(4,67324752),J.write_shift(2,20),J.write_shift(2,je),J.write_shift(2,Re),gt.mt?s(J,gt.mt):J.write_shift(4,0),J.write_shift(-4,At[rt]),J.write_shift(4,mr.length),J.write_shift(4,gt.content.length),J.write_shift(2,Rr.length),J.write_shift(2,0),He+=J.length,ae.push(J),He+=Rr.length,ae.push(Rr),He+=mr.length,ae.push(mr),J=mt(46),J.write_shift(4,33639248),J.write_shift(2,0),J.write_shift(2,20),J.write_shift(2,je),J.write_shift(2,Re),J.write_shift(4,0),J.write_shift(-4,At[rt]),J.write_shift(4,mr.length),J.write_shift(4,gt.content.length),J.write_shift(2,Rr.length),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(4,0),J.write_shift(4,br),lr+=J.l,pe.push(J),lr+=Rr.length,pe.push(Rr),++rt}return J=mt(22),J.write_shift(4,101010256),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(2,rt),J.write_shift(2,rt),J.write_shift(4,lr),J.write_shift(4,He),J.write_shift(2,0),is([is(ae),is(pe),J])}var Ln={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function be(X,de){if(X.ctype)return X.ctype;var le=X.name||"",ae=le.match(/\.([^\.]+)$/);return ae&&Ln[ae[1]]||de&&(ae=(le=de).match(/[\.\\]([^\.\\])+$/),ae&&Ln[ae[1]])?Ln[ae[1]]:"application/octet-stream"}function Y(X){for(var de=L0(X),le=[],ae=0;ae<de.length;ae+=76)le.push(de.slice(ae,ae+76));return le.join(`\r
`)+`\r
`}function te(X){var de=X.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Le){var He=Le.charCodeAt(0).toString(16).toUpperCase();return"="+(He.length==1?"0"+He:He)});de=de.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),de.charAt(0)==`
`&&(de="=0D"+de.slice(1)),de=de.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var le=[],ae=de.split(`\r
`),pe=0;pe<ae.length;++pe){var J=ae[pe];if(J.length==0){le.push("");continue}for(var Re=0;Re<J.length;){var je=76,Ie=J.slice(Re,Re+je);Ie.charAt(je-1)=="="?je--:Ie.charAt(je-2)=="="?je-=2:Ie.charAt(je-3)=="="&&(je-=3),Ie=J.slice(Re,Re+je),Re+=je,Re<J.length&&(Ie+="="),le.push(Ie)}}return le.join(`\r
`)}function ge(X){for(var de=[],le=0;le<X.length;++le){for(var ae=X[le];le<=X.length&&ae.charAt(ae.length-1)=="=";)ae=ae.slice(0,ae.length-1)+X[++le];de.push(ae)}for(var pe=0;pe<de.length;++pe)de[pe]=de[pe].replace(/[=][0-9A-Fa-f]{2}/g,function(J){return String.fromCharCode(parseInt(J.slice(1),16))});return za(de.join(`\r
`))}function Se(X,de,le){for(var ae="",pe="",J="",Re,je=0;je<10;++je){var Ie=de[je];if(!Ie||Ie.match(/^\s*$/))break;var Le=Ie.match(/^(.*?):\s*([^\s].*)$/);if(Le)switch(Le[1].toLowerCase()){case"content-location":ae=Le[2].trim();break;case"content-type":J=Le[2].trim();break;case"content-transfer-encoding":pe=Le[2].trim();break}}switch(++je,pe.toLowerCase()){case"base64":Re=za(Cc(de.slice(je).join("")));break;case"quoted-printable":Re=ge(de.slice(je));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+pe)}var He=Ae(X,ae.slice(le.length),Re,{unsafe:!0});J&&(He.ctype=J)}function Te(X,de){if(Ye(X.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var le=de&&de.root||"",ae=(Xr&&Buffer.isBuffer(X)?X.toString("binary"):Ye(X)).split(`\r
`),pe=0,J="";for(pe=0;pe<ae.length;++pe)if(J=ae[pe],!!/^Content-Location:/i.test(J)&&(J=J.slice(J.indexOf("file")),le||(le=J.slice(0,J.lastIndexOf("/")+1)),J.slice(0,le.length)!=le))for(;le.length>0&&(le=le.slice(0,le.length-1),le=le.slice(0,le.lastIndexOf("/")+1),J.slice(0,le.length)!=le););var Re=(ae[1]||"").match(/boundary="(.*?)"/);if(!Re)throw new Error("MAD cannot find boundary");var je="--"+(Re[1]||""),Ie=[],Le=[],He={FileIndex:Ie,FullPaths:Le};q(He);var rt,lt=0;for(pe=0;pe<ae.length;++pe){var wt=ae[pe];wt!==je&&wt!==je+"--"||(lt++&&Se(He,ae.slice(rt,pe),le),rt=pe)}return He}function We(X,de){var le=de||{},ae=le.boundary||"SheetJS";ae="------="+ae;for(var pe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ae.slice(2)+'"',"","",""],J=X.FullPaths[0],Re=J,je=X.FileIndex[0],Ie=1;Ie<X.FullPaths.length;++Ie)if(Re=X.FullPaths[Ie].slice(J.length),je=X.FileIndex[Ie],!(!je.size||!je.content||Re=="Sh33tJ5")){Re=Re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(lr){return"_x"+lr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(lr){return"_u"+lr.charCodeAt(0).toString(16)+"_"});for(var Le=je.content,He=Xr&&Buffer.isBuffer(Le)?Le.toString("binary"):Ye(Le),rt=0,lt=Math.min(1024,He.length),wt=0,gt=0;gt<=lt;++gt)(wt=He.charCodeAt(gt))>=32&&wt<128&&++rt;var At=rt>=lt*4/5;pe.push(ae),pe.push("Content-Location: "+(le.root||"file:///C:/SheetJS/")+Re),pe.push("Content-Transfer-Encoding: "+(At?"quoted-printable":"base64")),pe.push("Content-Type: "+be(je,Re)),pe.push(""),pe.push(At?te(He):Y(He))}return pe.push(ae+`--\r
`),pe.join(`\r
`)}function Ne(X){var de={};return q(de,X),de}function Ae(X,de,le,ae){var pe=ae&&ae.unsafe;pe||q(X);var J=!pe&&pi.find(X,de);if(!J){var Re=X.FullPaths[0];de.slice(0,Re.length)==Re?Re=de:(Re.slice(-1)!="/"&&(Re+="/"),Re=(Re+de).replace("//","/")),J={name:n(de),type:2},X.FileIndex.push(J),X.FullPaths.push(Re),pe||pi.utils.cfb_gc(X)}return J.content=le,J.size=le?le.length:0,ae&&(ae.CLSID&&(J.clsid=ae.CLSID),ae.mt&&(J.mt=ae.mt),ae.ct&&(J.ct=ae.ct)),J}function Ve(X,de){q(X);var le=pi.find(X,de);if(le){for(var ae=0;ae<X.FileIndex.length;++ae)if(X.FileIndex[ae]==le)return X.FileIndex.splice(ae,1),X.FullPaths.splice(ae,1),!0}return!1}function ut(X,de,le){q(X);var ae=pi.find(X,de);if(ae){for(var pe=0;pe<X.FileIndex.length;++pe)if(X.FileIndex[pe]==ae)return X.FileIndex[pe].name=n(le),X.FullPaths[pe]=le,!0}return!1}function dt(X){ue(X,!0)}return t.find=ie,t.read=ee,t.parse=p,t.write=ht,t.writeFile=Ge,t.utils={cfb_new:Ne,cfb_add:Ae,cfb_del:Ve,cfb_mov:ut,cfb_gc:dt,ReadShift:Jm,CheckField:qO,prep_blob:Do,bconcat:is,use_zlib:ce,_deflateRaw:kn,_inflateRaw:wr,consts:pt},t}();function K$(e){return typeof e=="string"?x1(e):Array.isArray(e)?x$(e):e}function vv(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=x1(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var i=r=="utf8"?N0(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(i,e);if(typeof Blob<"u"){var n=new Blob([K$(i)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,e);if(typeof saveAs<"u")return saveAs(n,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=e,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=mv(t)),o.write(t),o.close(),t}catch(u){if(!u.message||!u.message.match(/onstruct/))throw u}throw new Error("cannot save file "+e)}function hs(e){for(var t=Object.keys(e),r=[],i=0;i<t.length;++i)Object.prototype.hasOwnProperty.call(e,t[i])&&r.push(t[i]);return r}function bI(e,t){for(var r=[],i=hs(e),n=0;n!==i.length;++n)r[e[i[n]][t]]==null&&(r[e[i[n]][t]]=i[n]);return r}function rT(e){for(var t=[],r=hs(e),i=0;i!==r.length;++i)t[e[r[i]]]=r[i];return t}function b1(e){for(var t=[],r=hs(e),i=0;i!==r.length;++i)t[e[r[i]]]=parseInt(r[i],10);return t}function Z$(e){for(var t=[],r=hs(e),i=0;i!==r.length;++i)t[e[r[i]]]==null&&(t[e[r[i]]]=[]),t[e[r[i]]].push(r[i]);return t}var oC=new Date(1899,11,30,0,0,0);function Co(e,t){var r=e.getTime(),i=oC.getTime()+(e.getTimezoneOffset()-oC.getTimezoneOffset())*6e4;return(r-i)/(24*60*60*1e3)}var FO=new Date,X$=oC.getTime()+(FO.getTimezoneOffset()-oC.getTimezoneOffset())*6e4,SI=FO.getTimezoneOffset();function AO(e){var t=new Date;return t.setTime(e*24*60*60*1e3+X$),t.getTimezoneOffset()!==SI&&t.setTime(t.getTime()+(t.getTimezoneOffset()-SI)*6e4),t}var EI=new Date("2017-02-19T19:06:09.000Z"),IO=isNaN(EI.getFullYear())?new Date("2/19/17"):EI,Y$=IO.getFullYear()==2017;function Qs(e,t){var r=new Date(e);if(Y$)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(IO.getFullYear()==1917&&!isNaN(r.getFullYear())){var i=r.getFullYear();return e.indexOf(""+i)>-1||r.setFullYear(r.getFullYear()+100),r}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function S1(e,t){if(Xr&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var i=[],n=0;n!=e.length;++n)i.push(String.fromCharCode(e[n]));return i.join("")}function _o(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=_o(e[r]));return t}function nn(e,t){for(var r="";r.length<t;)r+=e;return r}function dc(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,i=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(i))||(i=i.replace(/[(](.*)[)]/,function(n,s){return r=-r,s}),!isNaN(t=Number(i)))?t/r:t}var Q$=["january","february","march","april","may","june","july","august","september","october","november","december"];function O0(e){var t=new Date(e),r=new Date(NaN),i=t.getYear(),n=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var a=e.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&Q$.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return i<0||i>8099?r:(n>0||s>1)&&i!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function Lr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var i;return Xr?i=Tc(r):i=C$(r),pi.utils.cfb_add(e,t,i)}pi.utils.cfb_add(e,t,r)}else e.file(t,r)}function iT(){return pi.utils.cfb_new()}var bn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,J$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},nT=rT(J$),sT=/[&<>'"]/g,eq=/[\u0000-\u0008\u000b-\u001f]/g;function oi(e){var t=e+"";return t.replace(sT,function(r){return nT[r]}).replace(eq,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function RI(e){return oi(e).replace(/ /g,"_x0020_")}var DO=/[\u0000-\u001f]/g;function tq(e){var t=e+"";return t.replace(sT,function(r){return nT[r]}).replace(/\n/g,"<br/>").replace(DO,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function rq(e){var t=e+"";return t.replace(sT,function(r){return nT[r]}).replace(DO,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function iq(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function nq(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Xb(e){for(var t="",r=0,i=0,n=0,s=0,a=0,o=0;r<e.length;){if(i=e.charCodeAt(r++),i<128){t+=String.fromCharCode(i);continue}if(n=e.charCodeAt(r++),i>191&&i<224){a=(i&31)<<6,a|=n&63,t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),i<240){t+=String.fromCharCode((i&15)<<12|(n&63)<<6|s&63);continue}a=e.charCodeAt(r++),o=((i&7)<<18|(n&63)<<12|(s&63)<<6|a&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function TI(e){var t=Qh(2*e.length),r,i,n=1,s=0,a=0,o;for(i=0;i<e.length;i+=n)n=1,(o=e.charCodeAt(i))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(i+1)&63),n=2):o<240?(r=(o&15)*4096+(e.charCodeAt(i+1)&63)*64+(e.charCodeAt(i+2)&63),n=3):(n=4,r=(o&7)*262144+(e.charCodeAt(i+1)&63)*4096+(e.charCodeAt(i+2)&63)*64+(e.charCodeAt(i+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(t[s++]=a&255,t[s++]=a>>>8,a=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function PI(e){return Tc(e,"binary").toString("utf8")}var pw="foo bar baz",Qm=Xr&&(PI(pw)==Xb(pw)&&PI||TI(pw)==Xb(pw)&&TI)||Xb,N0=Xr?function(e){return Tc(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,i=0,n=0;r<e.length;)switch(i=e.charCodeAt(r++),!0){case i<128:t.push(String.fromCharCode(i));break;case i<2048:t.push(String.fromCharCode(192+(i>>6))),t.push(String.fromCharCode(128+(i&63)));break;case(i>=55296&&i<57344):i-=55296,n=e.charCodeAt(r++)-56320+(i<<10),t.push(String.fromCharCode(240+(n>>18&7))),t.push(String.fromCharCode(144+(n>>12&63))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)));break;default:t.push(String.fromCharCode(224+(i>>12))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)))}return t.join("")},sq=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var i=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<e.length;++n)i=i.replace(e[n][0],e[n][1]);return i}}(),kO=/(^\s|\s$|\n)/;function ns(e,t){return"<"+e+(t.match(kO)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function B0(e){return hs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Gt(e,t,r){return"<"+e+(r!=null?B0(r):"")+(t!=null?(t.match(kO)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function ZE(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function oq(e,t){switch(typeof e){case"string":var r=Gt("vt:lpwstr",oi(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Gt((e|0)==e?"vt:i4":"vt:r8",oi(String(e)));case"boolean":return Gt("vt:bool",e?"true":"false")}if(e instanceof Date)return Gt("vt:filetime",ZE(e));throw new Error("Unable to serialize "+e)}var Hn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},qp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ko={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function aq(e,t){for(var r=1-2*(e[t+7]>>>7),i=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),n=e[t+6]&15,s=5;s>=0;--s)n=n*256+e[t+s];return i==2047?n==0?r*(1/0):NaN:(i==0?i=-1022:(i-=1023,n+=Math.pow(2,52)),r*Math.pow(2,i-52)*n)}function lq(e,t,r){var i=(t<0||1/t==-1/0?1:0)<<7,n=0,s=0,a=i?-t:t;isFinite(a)?a==0?n=s=0:(n=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-n),n<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?n=-1022:(s-=Math.pow(2,52),n+=1023)):(n=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(n&15)<<4|s&15,e[r+7]=n>>4|i}var MI=function(e){for(var t=[],r=10240,i=0;i<e[0].length;++i)if(e[0][i])for(var n=0,s=e[0][i].length;n<s;n+=r)t.push.apply(t,e[0][i].slice(n,n+r));return t},FI=Xr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Tc(t)})):MI(e)}:MI,AI=function(e,t,r){for(var i=[],n=t;n<r;n+=2)i.push(String.fromCharCode(km(e,n)));return i.join("").replace(Ym,"")},oT=Xr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Ym,""):AI(e,t,r)}:AI,II=function(e,t,r){for(var i=[],n=t;n<t+r;++n)i.push(("0"+e[n].toString(16)).slice(-2));return i.join("")},LO=Xr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):II(e,t,r)}:II,DI=function(e,t,r){for(var i=[],n=t;n<r;n++)i.push(String.fromCharCode(Rf(e,n)));return i.join("")},yv=Xr?function(t,r,i){return Buffer.isBuffer(t)?t.toString("utf8",r,i):DI(t,r,i)}:DI,OO=function(e,t){var r=Lo(e,t);return r>0?yv(e,t+4,t+4+r-1):""},NO=OO,BO=function(e,t){var r=Lo(e,t);return r>0?yv(e,t+4,t+4+r-1):""},zO=BO,GO=function(e,t){var r=2*Lo(e,t);return r>0?yv(e,t+4,t+4+r-1):""},VO=GO,HO=function(t,r){var i=Lo(t,r);return i>0?oT(t,r+4,r+4+i):""},UO=HO,WO=function(e,t){var r=Lo(e,t);return r>0?yv(e,t+4,t+4+r):""},jO=WO,$O=function(e,t){return aq(e,t)},aC=$O,aT=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Xr&&(NO=function(t,r){if(!Buffer.isBuffer(t))return OO(t,r);var i=t.readUInt32LE(r);return i>0?t.toString("utf8",r+4,r+4+i-1):""},zO=function(t,r){if(!Buffer.isBuffer(t))return BO(t,r);var i=t.readUInt32LE(r);return i>0?t.toString("utf8",r+4,r+4+i-1):""},VO=function(t,r){if(!Buffer.isBuffer(t))return GO(t,r);var i=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+i-1)},UO=function(t,r){if(!Buffer.isBuffer(t))return HO(t,r);var i=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+i)},jO=function(t,r){if(!Buffer.isBuffer(t))return WO(t,r);var i=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+i)},aC=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):$O(t,r)},aT=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Rf=function(e,t){return e[t]},km=function(e,t){return e[t+1]*256+e[t]},cq=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Lo=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Rh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},uq=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Jm(e,t){var r="",i,n,s=[],a,o,u,d;switch(t){case"dbcs":if(d=this.l,Xr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(u=0;u<e;++u)r+=String.fromCharCode(km(this,d)),d+=2;e*=2;break;case"utf8":r=yv(this,this.l,this.l+e);break;case"utf16le":e*=2,r=oT(this,this.l,this.l+e);break;case"wstr":return Jm.call(this,e,"dbcs");case"lpstr-ansi":r=NO(this,this.l),e=4+Lo(this,this.l);break;case"lpstr-cp":r=zO(this,this.l),e=4+Lo(this,this.l);break;case"lpwstr":r=VO(this,this.l),e=4+2*Lo(this,this.l);break;case"lpp4":e=4+Lo(this,this.l),r=UO(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Lo(this,this.l),r=jO(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(a=Rf(this,this.l+e++))!==0;)s.push(hw(a));r=s.join("");break;case"_wstr":for(e=0,r="";(a=km(this,this.l+e))!==0;)s.push(hw(a)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",d=this.l,u=0;u<e;++u){if(this.lens&&this.lens.indexOf(d)!==-1)return a=Rf(this,d),this.l=d+1,o=Jm.call(this,e-u,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(hw(km(this,d))),d+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,u=0;u!=e;++u){if(this.lens&&this.lens.indexOf(d)!==-1)return a=Rf(this,d),this.l=d+1,o=Jm.call(this,e-u,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(hw(Rf(this,d))),d+=1}r=s.join("");break;default:switch(e){case 1:return i=Rf(this,this.l),this.l++,i;case 2:return i=(t==="i"?cq:km)(this,this.l),this.l+=2,i;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(i=(e>0?Rh:uq)(this,this.l),this.l+=4,i):(n=Lo(this,this.l),this.l+=4,n);case 8:case-8:if(t==="f")return e==8?n=aC(this,this.l):n=aC([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:r=LO(this,this.l,e);break}}return this.l+=e,r}var hq=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},dq=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},fq=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function pq(e,t,r){var i=0,n=0;if(r==="dbcs"){for(n=0;n!=t.length;++n)fq(this,t.charCodeAt(n),this.l+2*n);i=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=t.length;++n)this[this.l+n]=t.charCodeAt(n)&255;i=t.length}else if(r==="hex"){for(;n<e;++n)this[this.l++]=parseInt(t.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(n=0;n<Math.min(t.length,e);++n){var a=t.charCodeAt(n);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:i=1,this[this.l]=t&255;break;case 2:i=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:i=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:i=4,hq(this,t,this.l);break;case 8:if(i=8,r==="f"){lq(this,t,this.l);break}case 16:break;case-4:i=4,dq(this,t,this.l);break}return this.l+=i,this}function qO(e,t){var r=LO(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Do(e,t){e.l=t,e.read_shift=Jm,e.chk=qO,e.write_shift=pq}function Fl(e,t){e.l+=t}function mt(e){var t=Qh(e);return Do(t,0),t}function xo(){var e=[],t=Xr?256:2048,r=function(d){var p=mt(d);return Do(p,0),p},i=r(t),n=function(){i&&(i.length>i.l&&(i=i.slice(0,i.l),i.l=i.length),i.length>0&&e.push(i),i=null)},s=function(d){return i&&d<i.length-i.l?i:(n(),i=r(Math.max(d+1,t)))},a=function(){return n(),is(e)},o=function(d){n(),i=d,i.l==null&&(i.l=i.length),s(t)};return{next:s,push:o,end:a,_bufs:e}}function bt(e,t,r,i){var n=+t,s;if(!isNaN(n)){i||(i=aJ[n].p||(r||[]).length||0),s=1+(n>=128?1:0)+1,i>=128&&++s,i>=16384&&++s,i>=2097152&&++s;var a=e.next(s);n<=127?a.write_shift(1,n):(a.write_shift(1,(n&127)+128),a.write_shift(1,n>>7));for(var o=0;o!=4;++o)if(i>=128)a.write_shift(1,(i&127)+128),i>>=7;else{a.write_shift(1,i);break}i>0&&aT(r)&&e.push(r)}}function e0(e,t,r){var i=_o(e);if(t.s?(i.cRel&&(i.c+=t.s.c),i.rRel&&(i.r+=t.s.r)):(i.cRel&&(i.c+=t.c),i.rRel&&(i.r+=t.r)),!r||r.biff<12){for(;i.c>=256;)i.c-=256;for(;i.r>=65536;)i.r-=65536}return i}function kI(e,t,r){var i=_o(e);return i.s=e0(i.s,t.s,r),i.e=e0(i.e,t.s,r),i}function t0(e,t){if(e.cRel&&e.c<0)for(e=_o(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=_o(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=ci(e);return!e.cRel&&e.cRel!=null&&(r=vq(r)),!e.rRel&&e.rRel!=null&&(r=gq(r)),r}function Yb(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Fs(e.s.c)+":"+(e.e.cRel?"":"$")+Fs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ls(e.s.r)+":"+(e.e.rRel?"":"$")+ls(e.e.r):t0(e.s,t.biff)+":"+t0(e.e,t.biff)}function lT(e){return parseInt(mq(e),10)-1}function ls(e){return""+(e+1)}function gq(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function mq(e){return e.replace(/\$(\d+)$/,"$1")}function cT(e){for(var t=yq(e),r=0,i=0;i!==t.length;++i)r=26*r+t.charCodeAt(i)-64;return r-1}function Fs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function vq(e){return e.replace(/^([A-Z])/,"$$$1")}function yq(e){return e.replace(/^\$([A-Z])/,"$1")}function wq(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Un(e){for(var t=0,r=0,i=0;i<e.length;++i){var n=e.charCodeAt(i);n>=48&&n<=57?t=10*t+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:t-1}}function ci(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Wo(e){var t=e.indexOf(":");return t==-1?{s:Un(e),e:Un(e)}:{s:Un(e.slice(0,t)),e:Un(e.slice(t+1))}}function _n(e,t){return typeof t>"u"||typeof t=="number"?_n(e.s,e.e):(typeof e!="string"&&(e=ci(e)),typeof t!="string"&&(t=ci(t)),e==t?e:e+":"+t)}function Di(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,i=0,n=0,s=e.length;for(r=0;i<s&&!((n=e.charCodeAt(i)-64)<1||n>26);++i)r=26*r+n;for(t.s.c=--r,r=0;i<s&&!((n=e.charCodeAt(i)-48)<0||n>9);++i)r=10*r+n;if(t.s.r=--r,i===s||n!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++i,r=0;i!=s&&!((n=e.charCodeAt(i)-64)<1||n>26);++i)r=26*r+n;for(t.e.c=--r,r=0;i!=s&&!((n=e.charCodeAt(i)-48)<0||n>9);++i)r=10*r+n;return t.e.r=--r,t}function LI(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Fu(e.z,r?Co(t):t)}catch{}try{return e.w=Fu((e.XF||{}).numFmtId||(r?14:0),r?Co(t):t)}catch{return""+t}}function _c(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?wv[e.v]||e.v:t==null?LI(e,e.v):LI(e,t))}function md(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",i={};return i[r]=e,{SheetNames:[r],Sheets:i}}function KO(e,t,r){var i=r||{},n=e?Array.isArray(e):i.dense,s=e||(n?[]:{}),a=0,o=0;if(s&&i.origin!=null){if(typeof i.origin=="number")a=i.origin;else{var u=typeof i.origin=="string"?Un(i.origin):i.origin;a=u.r,o=u.c}s["!ref"]||(s["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var p=Di(s["!ref"]);d.s.c=p.s.c,d.s.r=p.s.r,d.e.c=Math.max(d.e.c,p.e.c),d.e.r=Math.max(d.e.r,p.e.r),a==-1&&(d.e.r=a=p.e.r+1)}for(var v=0;v!=t.length;++v)if(t[v]){if(!Array.isArray(t[v]))throw new Error("aoa_to_sheet expects an array of arrays");for(var y=0;y!=t[v].length;++y)if(!(typeof t[v][y]>"u")){var _={v:t[v][y]},P=a+v,R=o+y;if(d.s.r>P&&(d.s.r=P),d.s.c>R&&(d.s.c=R),d.e.r<P&&(d.e.r=P),d.e.c<R&&(d.e.c=R),t[v][y]&&typeof t[v][y]=="object"&&!Array.isArray(t[v][y])&&!(t[v][y]instanceof Date))_=t[v][y];else if(Array.isArray(_.v)&&(_.f=t[v][y][1],_.v=_.v[0]),_.v===null)if(_.f)_.t="n";else if(i.nullError)_.t="e",_.v=0;else if(i.sheetStubs)_.t="z";else continue;else typeof _.v=="number"?_.t="n":typeof _.v=="boolean"?_.t="b":_.v instanceof Date?(_.z=i.dateNF||on[14],i.cellDates?(_.t="d",_.w=Fu(_.z,Co(_.v))):(_.t="n",_.v=Co(_.v),_.w=Fu(_.z,_.v))):_.t="s";if(n)s[P]||(s[P]=[]),s[P][R]&&s[P][R].z&&(_.z=s[P][R].z),s[P][R]=_;else{var M=ci({c:R,r:P});s[M]&&s[M].z&&(_.z=s[M].z),s[M]=_}}}return d.s.c<1e7&&(s["!ref"]=_n(d)),s}function Kp(e,t){return KO(null,e,t)}function xq(e){return e.read_shift(4,"i")}function Wa(e,t){return t||(t=mt(4)),t.write_shift(4,e),t}function As(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Wn(e,t){var r=!1;return t==null&&(r=!0,t=mt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Cq(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function _q(e,t){return t||(t=mt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function uT(e,t){var r=e.l,i=e.read_shift(1),n=As(e),s=[],a={t:n,h:n};if(i&1){for(var o=e.read_shift(4),u=0;u!=o;++u)s.push(Cq(e));a.r=s}else a.r=[{ich:0,ifnt:0}];return e.l=r+t,a}function bq(e,t){var r=!1;return t==null&&(r=!0,t=mt(15+4*e.t.length)),t.write_shift(1,0),Wn(e.t,t),r?t.slice(0,t.l):t}var Sq=uT;function Eq(e,t){var r=!1;return t==null&&(r=!0,t=mt(23+4*e.t.length)),t.write_shift(1,1),Wn(e.t,t),t.write_shift(4,1),_q({},t),r?t.slice(0,t.l):t}function _a(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function vd(e,t){return t==null&&(t=mt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function yd(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function wd(e,t){return t==null&&(t=mt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Rq=As,ZO=Wn;function hT(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function lC(e,t){var r=!1;return t==null&&(r=!0,t=mt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Tq=As,XE=hT,dT=lC;function XO(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,i=t[0]&2;e.l+=4;var n=i===0?aC([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Rh(t,0)>>2;return r?n/100:n}function YO(e,t){t==null&&(t=mt(4));var r=0,i=0,n=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?i=1:n==(n|0)&&n>=-536870912&&n<1<<29&&(i=1,r=1),i)t.write_shift(-4,((r?n:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function QO(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Pq(e,t){return t||(t=mt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var xd=QO,Zp=Pq;function Xp(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Jh(e,t){return(t||mt(8)).write_shift(8,e,"f")}function Mq(e){var t={},r=e.read_shift(1),i=r>>>1,n=e.read_shift(1),s=e.read_shift(2,"i"),a=e.read_shift(1),o=e.read_shift(1),u=e.read_shift(1);switch(e.l++,i){case 0:t.auto=1;break;case 1:t.index=n;var d=Bq[n];d&&(t.rgb=$I(d));break;case 2:t.rgb=$I([a,o,u]);break;case 3:t.theme=n;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function cC(e,t){if(t||(t=mt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var i=e.rgb||"FFFFFF";typeof i=="number"&&(i=("000000"+i.toString(16)).slice(-6)),t.write_shift(1,parseInt(i.slice(0,2),16)),t.write_shift(1,parseInt(i.slice(2,4),16)),t.write_shift(1,parseInt(i.slice(4,6),16)),t.write_shift(1,255)}return t}function Fq(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Aq(e,t){t||(t=mt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var JO=2,Fo=3,gw=11,uC=19,mw=64,Iq=65,Dq=71,kq=4108,Lq=4126,rs=80,OI={1:{n:"CodePage",t:JO},2:{n:"Category",t:rs},3:{n:"PresentationFormat",t:rs},4:{n:"ByteCount",t:Fo},5:{n:"LineCount",t:Fo},6:{n:"ParagraphCount",t:Fo},7:{n:"SlideCount",t:Fo},8:{n:"NoteCount",t:Fo},9:{n:"HiddenCount",t:Fo},10:{n:"MultimediaClipCount",t:Fo},11:{n:"ScaleCrop",t:gw},12:{n:"HeadingPairs",t:kq},13:{n:"TitlesOfParts",t:Lq},14:{n:"Manager",t:rs},15:{n:"Company",t:rs},16:{n:"LinksUpToDate",t:gw},17:{n:"CharacterCount",t:Fo},19:{n:"SharedDoc",t:gw},22:{n:"HyperlinksChanged",t:gw},23:{n:"AppVersion",t:Fo,p:"version"},24:{n:"DigSig",t:Iq},26:{n:"ContentType",t:rs},27:{n:"ContentStatus",t:rs},28:{n:"Language",t:rs},29:{n:"Version",t:rs},255:{},2147483648:{n:"Locale",t:uC},2147483651:{n:"Behavior",t:uC},1919054434:{}},NI={1:{n:"CodePage",t:JO},2:{n:"Title",t:rs},3:{n:"Subject",t:rs},4:{n:"Author",t:rs},5:{n:"Keywords",t:rs},6:{n:"Comments",t:rs},7:{n:"Template",t:rs},8:{n:"LastAuthor",t:rs},9:{n:"RevNumber",t:rs},10:{n:"EditTime",t:mw},11:{n:"LastPrinted",t:mw},12:{n:"CreatedDate",t:mw},13:{n:"ModifiedDate",t:mw},14:{n:"PageCount",t:Fo},15:{n:"WordCount",t:Fo},16:{n:"CharCount",t:Fo},17:{n:"Thumbnail",t:Dq},18:{n:"Application",t:rs},19:{n:"DocSecurity",t:Fo},255:{},2147483648:{n:"Locale",t:uC},2147483651:{n:"Behavior",t:uC},1919054434:{}};function Oq(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Nq=Oq([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Bq=_o(Nq),wv={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},zq={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},vw={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function eN(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function tN(e,t){var r=Z$(zq),i=[],n;i[i.length]=bn,i[i.length]=Gt("Types",null,{xmlns:Hn.CT,"xmlns:xsd":Hn.xsd,"xmlns:xsi":Hn.xsi}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(u){return Gt("Default",null,{Extension:u[0],ContentType:u[1]})}));var s=function(u){e[u]&&e[u].length>0&&(n=e[u][0],i[i.length]=Gt("Override",null,{PartName:(n[0]=="/"?"":"/")+n,ContentType:vw[u][t.bookType]||vw[u].xlsx}))},a=function(u){(e[u]||[]).forEach(function(d){i[i.length]=Gt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:vw[u][t.bookType]||vw[u].xlsx})})},o=function(u){(e[u]||[]).forEach(function(d){i[i.length]=Gt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[u][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var qr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function rN(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function sp(e){var t=[bn,Gt("Relationships",null,{xmlns:Hn.RELS})];return hs(e["!id"]).forEach(function(r){t[t.length]=Gt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ni(e,t,r,i,n,s){if(n||(n={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,n.Id="rId"+t,n.Type=i,n.Target=r,[qr.HLINK,qr.XPATH,qr.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),e["!id"][n.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][n.Id]=n,e[("/"+n.Target).replace("//","/")]=n,t}function Gq(e){var t=[bn];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function BI(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Vq(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Hq(e){var t=[bn];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(BI(e[r][0],e[r][1])),t.push(Vq("",e[r][0]));return t.push(BI("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function iN(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+tC.version+"</meta:generator></office:meta></office:document-meta>"}var Nh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Qb(e,t,r,i,n){n[e]!=null||t==null||t===""||(n[e]=t,t=oi(t),i[i.length]=r?Gt(e,t,r):ns(e,t))}function nN(e,t){var r=t||{},i=[bn,Gt("cp:coreProperties",null,{"xmlns:cp":Hn.CORE_PROPS,"xmlns:dc":Hn.dc,"xmlns:dcterms":Hn.dcterms,"xmlns:dcmitype":Hn.dcmitype,"xmlns:xsi":Hn.xsi})],n={};if(!e&&!r.Props)return i.join("");e&&(e.CreatedDate!=null&&Qb("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:ZE(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},i,n),e.ModifiedDate!=null&&Qb("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:ZE(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},i,n));for(var s=0;s!=Nh.length;++s){var a=Nh[s],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:e?e[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Qb(a[0],o,null,i,n)}return i.length>2&&(i[i.length]="</cp:coreProperties>",i[1]=i[1].replace("/>",">")),i.join("")}var op=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],sN=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function oN(e){var t=[],r=Gt;return e||(e={}),e.Application="SheetJS",t[t.length]=bn,t[t.length]=Gt("Properties",null,{xmlns:Hn.EXT_PROPS,"xmlns:vt":Hn.vt}),op.forEach(function(i){if(e[i[1]]!==void 0){var n;switch(i[2]){case"string":n=oi(String(e[i[1]]));break;case"bool":n=e[i[1]]?"true":"false";break}n!==void 0&&(t[t.length]=r(i[0],n))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(i){return"<vt:lpstr>"+oi(i)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function aN(e){var t=[bn,Gt("Properties",null,{xmlns:Hn.CUST_PROPS,"xmlns:vt":Hn.vt})];if(!e)return t.join("");var r=1;return hs(e).forEach(function(n){++r,t[t.length]=Gt("property",oq(e[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:oi(n)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var zI={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Uq(e,t){var r=[];return hs(zI).map(function(i){for(var n=0;n<Nh.length;++n)if(Nh[n][1]==i)return Nh[n];for(n=0;n<op.length;++n)if(op[n][1]==i)return op[n];throw i}).forEach(function(i){if(e[i[1]]!=null){var n=t&&t.Props&&t.Props[i[1]]!=null?t.Props[i[1]]:e[i[1]];switch(i[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}typeof n=="number"?n=String(n):n===!0||n===!1?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),r.push(ns(zI[i[1]]||i[1],n))}}),Gt("DocumentProperties",r.join(""),{xmlns:ko.o})}function Wq(e,t){var r=["Worksheets","SheetNames"],i="CustomDocumentProperties",n=[];return e&&hs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var a=0;a<Nh.length;++a)if(s==Nh[a][1])return;for(a=0;a<op.length;++a)if(s==op[a][1])return;for(a=0;a<r.length;++a)if(s==r[a])return;var o=e[s],u="string";typeof o=="number"?(u="float",o=String(o)):o===!0||o===!1?(u="boolean",o=o?"1":"0"):o=String(o),n.push(Gt(RI(s),o,{"dt:dt":u}))}}),t&&hs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var a=t[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),n.push(Gt(RI(s),a,{"dt:dt":o}))}}),"<"+i+' xmlns="'+ko.o+'">'+n.join("")+"</"+i+">"}function jq(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,i=r%Math.pow(2,32),n=(r-i)/Math.pow(2,32);i*=1e7,n*=1e7;var s=i/Math.pow(2,32)|0;s>0&&(i=i%Math.pow(2,32),n+=s);var a=mt(8);return a.write_shift(4,i),a.write_shift(4,n),a}function GI(e,t){var r=mt(4),i=mt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:i.write_shift(-4,t);break;case 5:i=mt(8),i.write_shift(8,t,"f");break;case 11:i.write_shift(4,t?1:0);break;case 64:i=jq(t);break;case 31:case 80:for(i=mt(4+2*(t.length+1)+(t.length%2?0:2)),i.write_shift(4,t.length+1),i.write_shift(0,t,"dbcs");i.l!=i.length;)i.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return is([r,i])}var lN=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function $q(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function VI(e,t,r){var i=mt(8),n=[],s=[],a=8,o=0,u=mt(8),d=mt(8);if(u.write_shift(4,2),u.write_shift(4,1200),d.write_shift(4,1),s.push(u),n.push(d),a+=8+u.length,!t){d=mt(8),d.write_shift(4,0),n.unshift(d);var p=[mt(4)];for(p[0].write_shift(4,e.length),o=0;o<e.length;++o){var v=e[o][0];for(u=mt(8+2*(v.length+1)+(v.length%2?0:2)),u.write_shift(4,o+2),u.write_shift(4,v.length+1),u.write_shift(0,v,"dbcs");u.l!=u.length;)u.write_shift(1,0);p.push(u)}u=is(p),s.unshift(u),a+=8+u.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(lN.indexOf(e[o][0])>-1||sN.indexOf(e[o][0])>-1)&&e[o][1]!=null){var y=e[o][1],_=0;if(t){_=+t[e[o][0]];var P=r[_];if(P.p=="version"&&typeof y=="string"){var R=y.split(".");y=(+R[0]<<16)+(+R[1]||0)}u=GI(P.t,y)}else{var M=$q(y);M==-1&&(M=31,y=String(y)),u=GI(M,y)}s.push(u),d=mt(8),d.write_shift(4,t?_:2+o),n.push(d),a+=8+u.length}var F=8*(s.length+1);for(o=0;o<s.length;++o)n[o].write_shift(4,F),F+=s[o].length;return i.write_shift(4,a),i.write_shift(4,s.length),is([i].concat(n).concat(s))}function HI(e,t,r,i,n,s){var a=mt(n?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,pi.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,n?2:1),a.write_shift(16,t,"hex"),a.write_shift(4,n?68:48);var u=VI(e,r,i);if(o.push(u),n){var d=VI(n,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+u.length),o.push(d)}return is(o)}function qq(e,t){t||(t=mt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Kq(e,t){return e.read_shift(t)===1}function Ks(e,t){return t||(t=mt(2)),t.write_shift(2,+!!e),t}function cN(e){return e.read_shift(2,"u")}function la(e,t){return t||(t=mt(2)),t.write_shift(2,e),t}function uN(e,t,r){return r||(r=mt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function hN(e,t,r){var i=e.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var a=i?e.read_shift(i,n):"";return a}function Zq(e){var t=e.t||"",r=mt(3);r.write_shift(2,t.length),r.write_shift(1,1);var i=mt(2*t.length);i.write_shift(2*t.length,t,"utf16le");var n=[r,i];return is(n)}function Xq(e,t,r){var i;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var n=e.read_shift(1);return n===0?i=e.read_shift(t,"sbcs-cont"):i=e.read_shift(t,"dbcs-cont"),i}function Yq(e,t,r){var i=e.read_shift(r&&r.biff==2?1:2);return i===0?(e.l++,""):Xq(e,i,r)}function Qq(e,t,r){if(r.biff>5)return Yq(e,t,r);var i=e.read_shift(1);return i===0?(e.l++,""):e.read_shift(i,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function dN(e,t,r){return r||(r=mt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function UI(e,t){t||(t=mt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Jq(e){var t=mt(512),r=0,i=e.Target;i.slice(0,7)=="file://"&&(i=i.slice(7));var n=i.indexOf("#"),s=n>-1?31:23;switch(i.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)t.write_shift(4,a[r]);if(s==28)i=i.slice(1),UI(i,t);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)t.write_shift(1,parseInt(a[r],16));var o=n>-1?i.slice(0,n):i;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&UI(n>-1?i.slice(n+1):"",t)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)t.write_shift(1,parseInt(a[r],16));for(var u=0;i.slice(u*3,u*3+3)=="../"||i.slice(u*3,u*3+3)=="..\\";)++u;for(t.write_shift(2,u),t.write_shift(4,i.length-3*u+1),r=0;r<i.length-3*u;++r)t.write_shift(1,i.charCodeAt(r+3*u)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function ed(e,t,r,i){return i||(i=mt(6)),i.write_shift(2,e),i.write_shift(2,t),i.write_shift(2,r||0),i}function eK(e,t,r){var i=r.biff>8?4:2,n=e.read_shift(i),s=e.read_shift(i,"i"),a=e.read_shift(i,"i");return[n,s,a]}function tK(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2),n=e.read_shift(2);return{s:{c:i,r:t},e:{c:n,r}}}function fN(e,t){return t||(t=mt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function fT(e,t,r){var i=1536,n=16;switch(r.bookType){case"biff8":break;case"biff5":i=1280,n=8;break;case"biff4":i=4,n=6;break;case"biff3":i=3,n=6;break;case"biff2":i=2,n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=mt(n);return s.write_shift(2,i),s.write_shift(2,t),n>4&&s.write_shift(2,29282),n>6&&s.write_shift(2,1997),n>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function rK(e,t){var r=!t||t.biff==8,i=mt(r?112:54);for(i.write_shift(t.biff==8?2:1,7),r&&i.write_shift(1,0),i.write_shift(4,859007059),i.write_shift(4,5458548|(r?0:536870912));i.l<i.length;)i.write_shift(1,r?0:32);return i}function iK(e,t){var r=!t||t.biff>=8?2:1,i=mt(8+r*e.name.length);i.write_shift(4,e.pos),i.write_shift(1,e.hs||0),i.write_shift(1,e.dt),i.write_shift(1,e.name.length),t.biff>=8&&i.write_shift(1,1),i.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var n=i.slice(0,i.l);return n.l=i.l,n}function nK(e,t){var r=mt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var i=[],n=0;n<e.length;++n)i[n]=Zq(e[n]);var s=is([r].concat(i));return s.parts=[r.length].concat(i.map(function(a){return a.length})),s}function sK(){var e=mt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function oK(e){var t=mt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function aK(e,t){var r=e.name||"Arial",i=t&&t.biff==5,n=i?15+r.length:16+2*r.length,s=mt(n);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),i||s.write_shift(1,1),s.write_shift((i?1:2)*r.length,r,i?"sbcs":"utf16le"),s}function lK(e,t,r,i){var n=mt(10);return ed(e,t,i,n),n.write_shift(4,r),n}function cK(e,t,r,i,n){var s=!n||n.biff==8,a=mt(8+ +s+(1+s)*r.length);return ed(e,t,i,a),a.write_shift(2,r.length),s&&a.write_shift(1,1),a.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),a}function uK(e,t,r,i){var n=r&&r.biff==5;i||(i=mt(n?3+t.length:5+2*t.length)),i.write_shift(2,e),i.write_shift(n?1:2,t.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le");var s=i.length>i.l?i.slice(0,i.l):i;return s.l==null&&(s.l=s.length),s}function hK(e,t){var r=t.biff==8||!t.biff?4:2,i=mt(2*r+6);return i.write_shift(r,e.s.r),i.write_shift(r,e.e.r+1),i.write_shift(2,e.s.c),i.write_shift(2,e.e.c+1),i.write_shift(2,0),i}function WI(e,t,r,i){var n=r&&r.biff==5;i||(i=mt(n?16:20)),i.write_shift(2,0),e.style?(i.write_shift(2,e.numFmtId||0),i.write_shift(2,65524)):(i.write_shift(2,e.numFmtId||0),i.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&n&&(s|=1024),i.write_shift(4,s),i.write_shift(4,0),n||i.write_shift(4,0),i.write_shift(2,0),i}function dK(e){var t=mt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function fK(e,t,r,i,n,s){var a=mt(8);return ed(e,t,i,a),uN(r,s,a),a}function pK(e,t,r,i){var n=mt(14);return ed(e,t,i,n),Jh(r,n),n}function gK(e,t,r){if(r.biff<8)return mK(e,t,r);for(var i=[],n=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)i.push(eK(e,r.biff>8?12:6,r));if(e.l!=n)throw new Error("Bad ExternSheet: "+e.l+" != "+n);return i}function mK(e,t,r){e[e.l+1]==3&&e[e.l]++;var i=hN(e,t,r);return i.charCodeAt(0)==3?i.slice(1):i}function vK(e){var t=mt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)fN(e[r],t);return t}function yK(e){var t=mt(24),r=Un(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)t.write_shift(1,parseInt(i[n],16));return is([t,Jq(e[1])])}function wK(e){var t=e[1].Tooltip,r=mt(10+2*(t.length+1));r.write_shift(2,2048);var i=Un(e[0]);r.write_shift(2,i.r),r.write_shift(2,i.r),r.write_shift(2,i.c),r.write_shift(2,i.c);for(var n=0;n<t.length;++n)r.write_shift(2,t.charCodeAt(n));return r.write_shift(2,0),r}function xK(e){return e||(e=mt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function CK(e,t,r){if(!r.cellStyles)return Fl(e,t);var i=r&&r.biff>=12?4:2,n=e.read_shift(i),s=e.read_shift(i),a=e.read_shift(i),o=e.read_shift(i),u=e.read_shift(2);i==2&&(e.l+=2);var d={s:n,e:s,w:a,ixfe:o,flags:u};return(r.biff>=5||!r.biff)&&(d.level=u>>8&7),d}function _K(e,t){var r=mt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var i=0;return e.hidden&&(i|=1),r.write_shift(1,i),i=e.level||0,r.write_shift(1,i),r.write_shift(2,0),r}function bK(e){for(var t=mt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function SK(e,t,r){var i=mt(15);return Cv(i,e,t),i.write_shift(8,r,"f"),i}function EK(e,t,r){var i=mt(9);return Cv(i,e,t),i.write_shift(2,r),i}var RK=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=rT({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,u){var d=[],p=Qh(1);switch(u.type){case"base64":p=za(Cc(o));break;case"binary":p=za(o);break;case"buffer":case"array":p=o;break}Do(p,0);var v=p.read_shift(1),y=!!(v&136),_=!1,P=!1;switch(v){case 2:break;case 3:break;case 48:_=!0,y=!0;break;case 49:_=!0,y=!0;break;case 131:break;case 139:break;case 140:P=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+v.toString(16))}var R=0,M=521;v==2&&(R=p.read_shift(2)),p.l+=3,v!=2&&(R=p.read_shift(4)),R>1048576&&(R=1e6),v!=2&&(M=p.read_shift(2));var F=p.read_shift(2),k=u.codepage||1252;v!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(k=e[p[p.l]]),p.l+=1,p.l+=2),P&&(p.l+=36);for(var N=[],G={},j=Math.min(p.length,v==2?521:M-10-(_?264:0)),ee=P?32:11;p.l<j&&p[p.l]!=13;)switch(G={},G.name=rC.utils.decode(k,p.slice(p.l,p.l+ee)).replace(/[\u0000\r\n].*$/g,""),p.l+=ee,G.type=String.fromCharCode(p.read_shift(1)),v!=2&&!P&&(G.offset=p.read_shift(4)),G.len=p.read_shift(1),v==2&&(G.offset=p.read_shift(2)),G.dec=p.read_shift(1),G.name.length&&N.push(G),v!=2&&(p.l+=P?13:14),G.type){case"B":(!_||G.len!=8)&&u.WTF&&console.log("Skipping "+G.name+":"+G.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+G.name+":"+G.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+G.type)}if(p[p.l]!==13&&(p.l=M-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=M;var q=0,oe=0;for(d[0]=[],oe=0;oe!=N.length;++oe)d[0][oe]=N[oe].name;for(;R-- >0;){if(p[p.l]===42){p.l+=F;continue}for(++p.l,d[++q]=[],oe=0,oe=0;oe!=N.length;++oe){var ue=p.slice(p.l,p.l+N[oe].len);p.l+=N[oe].len,Do(ue,0);var me=rC.utils.decode(k,ue);switch(N[oe].type){case"C":me.trim().length&&(d[q][oe]=me.replace(/\s+$/,""));break;case"D":me.length===8?d[q][oe]=new Date(+me.slice(0,4),+me.slice(4,6)-1,+me.slice(6,8)):d[q][oe]=me;break;case"F":d[q][oe]=parseFloat(me.trim());break;case"+":case"I":d[q][oe]=P?ue.read_shift(-4,"i")^2147483648:ue.read_shift(4,"i");break;case"L":switch(me.trim().toUpperCase()){case"Y":case"T":d[q][oe]=!0;break;case"N":case"F":d[q][oe]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+me+"|")}break;case"M":if(!y)throw new Error("DBF Unexpected MEMO for type "+v.toString(16));d[q][oe]="##MEMO##"+(P?parseInt(me.trim(),10):ue.read_shift(4));break;case"N":me=me.replace(/\u0000/g,"").trim(),me&&me!="."&&(d[q][oe]=+me||0);break;case"@":d[q][oe]=new Date(ue.read_shift(-8,"f")-621356832e5);break;case"T":d[q][oe]=new Date((ue.read_shift(4)-2440588)*864e5+ue.read_shift(4));break;case"Y":d[q][oe]=ue.read_shift(4,"i")/1e4+ue.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[q][oe]=-ue.read_shift(-8,"f");break;case"B":if(_&&N[oe].len==8){d[q][oe]=ue.read_shift(8,"f");break}case"G":case"P":ue.l+=N[oe].len;break;case"0":if(N[oe].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[oe].type)}}}if(v!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return u&&u.sheetRows&&(d=d.slice(0,u.sheetRows)),u.DBF=N,d}function i(o,u){var d=u||{};d.dateNF||(d.dateNF="yyyymmdd");var p=Kp(r(o,d),d);return p["!cols"]=d.DBF.map(function(v){return{wch:v.len,DBF:v}}),delete d.DBF,p}function n(o,u){try{return md(i(o,u),u)}catch(d){if(u&&u.WTF)throw d}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,u){var d=u||{};if(+d.codepage>=0&&k0(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var p=xo(),v=gC(o,{header:1,raw:!0,cellDates:!0}),y=v[0],_=v.slice(1),P=o["!cols"]||[],R=0,M=0,F=0,k=1;for(R=0;R<y.length;++R){if(((P[R]||{}).DBF||{}).name){y[R]=P[R].DBF.name,++F;continue}if(y[R]!=null){if(++F,typeof y[R]=="number"&&(y[R]=y[R].toString(10)),typeof y[R]!="string")throw new Error("DBF Invalid column name "+y[R]+" |"+typeof y[R]+"|");if(y.indexOf(y[R])!==R){for(M=0;M<1024;++M)if(y.indexOf(y[R]+"_"+M)==-1){y[R]+="_"+M;break}}}}var N=Di(o["!ref"]),G=[],j=[],ee=[];for(R=0;R<=N.e.c-N.s.c;++R){var q="",oe="",ue=0,me=[];for(M=0;M<_.length;++M)_[M][R]!=null&&me.push(_[M][R]);if(me.length==0||y[R]==null){G[R]="?";continue}for(M=0;M<me.length;++M){switch(typeof me[M]){case"number":oe="B";break;case"string":oe="C";break;case"boolean":oe="L";break;case"object":oe=me[M]instanceof Date?"D":"C";break;default:oe="C"}ue=Math.max(ue,String(me[M]).length),q=q&&q!=oe?"C":oe}ue>250&&(ue=250),oe=((P[R]||{}).DBF||{}).type,oe=="C"&&P[R].DBF.len>ue&&(ue=P[R].DBF.len),q=="B"&&oe=="N"&&(q="N",ee[R]=P[R].DBF.dec,ue=P[R].DBF.len),j[R]=q=="C"||oe=="N"?ue:s[q]||0,k+=j[R],G[R]=q}var ie=p.next(32);for(ie.write_shift(4,318902576),ie.write_shift(4,_.length),ie.write_shift(2,296+32*F),ie.write_shift(2,k),R=0;R<4;++R)ie.write_shift(4,0);for(ie.write_shift(4,0|(+t[gO]||3)<<8),R=0,M=0;R<y.length;++R)if(y[R]!=null){var fe=p.next(32),ke=(y[R].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);fe.write_shift(1,ke,"sbcs"),fe.write_shift(1,G[R]=="?"?"C":G[R],"sbcs"),fe.write_shift(4,M),fe.write_shift(1,j[R]||s[G[R]]||0),fe.write_shift(1,ee[R]||0),fe.write_shift(1,2),fe.write_shift(4,0),fe.write_shift(1,0),fe.write_shift(4,0),fe.write_shift(4,0),M+=j[R]||s[G[R]]||0}var et=p.next(264);for(et.write_shift(4,13),R=0;R<65;++R)et.write_shift(4,0);for(R=0;R<_.length;++R){var Xe=p.next(k);for(Xe.write_shift(1,0),M=0;M<y.length;++M)if(y[M]!=null)switch(G[M]){case"L":Xe.write_shift(1,_[R][M]==null?63:_[R][M]?84:70);break;case"B":Xe.write_shift(8,_[R][M]||0,"f");break;case"N":var ct="0";for(typeof _[R][M]=="number"&&(ct=_[R][M].toFixed(ee[M]||0)),F=0;F<j[M]-ct.length;++F)Xe.write_shift(1,32);Xe.write_shift(1,ct,"sbcs");break;case"D":_[R][M]?(Xe.write_shift(4,("0000"+_[R][M].getFullYear()).slice(-4),"sbcs"),Xe.write_shift(2,("00"+(_[R][M].getMonth()+1)).slice(-2),"sbcs"),Xe.write_shift(2,("00"+_[R][M].getDate()).slice(-2),"sbcs")):Xe.write_shift(8,"00000000","sbcs");break;case"C":var pt=String(_[R][M]!=null?_[R][M]:"").slice(0,j[M]);for(Xe.write_shift(1,pt,"sbcs"),F=0;F<j[M]-pt.length;++F)Xe.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:n,to_sheet:i,from_sheet:a}}(),TK=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+hs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(y,_){var P=e[_];return typeof P=="number"?pI(P):P},i=function(y,_,P){var R=_.charCodeAt(0)-32<<4|P.charCodeAt(0)-48;return R==59?y:pI(R)};e["|"]=254;function n(y,_){switch(_.type){case"base64":return s(Cc(y),_);case"binary":return s(y,_);case"buffer":return s(Xr&&Buffer.isBuffer(y)?y.toString("binary"):mv(y),_);case"array":return s(S1(y),_)}throw new Error("Unrecognized type "+_.type)}function s(y,_){var P=y.split(/[\n\r]+/),R=-1,M=-1,F=0,k=0,N=[],G=[],j=null,ee={},q=[],oe=[],ue=[],me=0,ie;for(+_.codepage>=0&&k0(+_.codepage);F!==P.length;++F){me=0;var fe=P[F].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,i).replace(t,r),ke=fe.replace(/;;/g,"\0").split(";").map(function(_e){return _e.replace(/\u0000/g,";")}),et=ke[0],Xe;if(fe.length>0)switch(et){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ke[1].charAt(0)=="P"&&G.push(fe.slice(3).replace(/;;/g,";"));break;case"C":var ct=!1,pt=!1,Ge=!1,Ye=!1,ht=-1,Be=-1;for(k=1;k<ke.length;++k)switch(ke[k].charAt(0)){case"A":break;case"X":M=parseInt(ke[k].slice(1))-1,pt=!0;break;case"Y":for(R=parseInt(ke[k].slice(1))-1,pt||(M=0),ie=N.length;ie<=R;++ie)N[ie]=[];break;case"K":Xe=ke[k].slice(1),Xe.charAt(0)==='"'?Xe=Xe.slice(1,Xe.length-1):Xe==="TRUE"?Xe=!0:Xe==="FALSE"?Xe=!1:isNaN(dc(Xe))?isNaN(O0(Xe).getDate())||(Xe=Qs(Xe)):(Xe=dc(Xe),j!==null&&TO(j)&&(Xe=AO(Xe))),ct=!0;break;case"E":Ye=!0;var ce=EZ(ke[k].slice(1),{r:R,c:M});N[R][M]=[N[R][M],ce];break;case"S":Ge=!0,N[R][M]=[N[R][M],"S5S"];break;case"G":break;case"R":ht=parseInt(ke[k].slice(1))-1;break;case"C":Be=parseInt(ke[k].slice(1))-1;break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+fe)}if(ct&&(N[R][M]&&N[R][M].length==2?N[R][M][0]=Xe:N[R][M]=Xe,j=null),Ge){if(Ye)throw new Error("SYLK shared formula cannot have own formula");var he=ht>-1&&N[ht][Be];if(!he||!he[1])throw new Error("SYLK shared formula cannot find base");N[R][M][1]=RZ(he[1],{r:R-ht,c:M-Be})}break;case"F":var ve=0;for(k=1;k<ke.length;++k)switch(ke[k].charAt(0)){case"X":M=parseInt(ke[k].slice(1))-1,++ve;break;case"Y":for(R=parseInt(ke[k].slice(1))-1,ie=N.length;ie<=R;++ie)N[ie]=[];break;case"M":me=parseInt(ke[k].slice(1))/20;break;case"F":break;case"G":break;case"P":j=G[parseInt(ke[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(ue=ke[k].slice(1).split(" "),ie=parseInt(ue[0],10);ie<=parseInt(ue[1],10);++ie)me=parseInt(ue[2],10),oe[ie-1]=me===0?{hidden:!0}:{wch:me},pT(oe[ie-1]);break;case"C":M=parseInt(ke[k].slice(1))-1,oe[M]||(oe[M]={});break;case"R":R=parseInt(ke[k].slice(1))-1,q[R]||(q[R]={}),me>0?(q[R].hpt=me,q[R].hpx=yN(me)):me===0&&(q[R].hidden=!0);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+fe)}ve<1&&(j=null);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+fe)}}return q.length>0&&(ee["!rows"]=q),oe.length>0&&(ee["!cols"]=oe),_&&_.sheetRows&&(N=N.slice(0,_.sheetRows)),[N,ee]}function a(y,_){var P=n(y,_),R=P[0],M=P[1],F=Kp(R,_);return hs(M).forEach(function(k){F[k]=M[k]}),F}function o(y,_){return md(a(y,_),_)}function u(y,_,P,R){var M="C;Y"+(P+1)+";X"+(R+1)+";K";switch(y.t){case"n":M+=y.v||0,y.f&&!y.F&&(M+=";E"+mT(y.f,{r:P,c:R}));break;case"b":M+=y.v?"TRUE":"FALSE";break;case"e":M+=y.w||y.v;break;case"d":M+='"'+(y.w||y.v)+'"';break;case"s":M+='"'+y.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return M}function d(y,_){_.forEach(function(P,R){var M="F;W"+(R+1)+" "+(R+1)+" ";P.hidden?M+="0":(typeof P.width=="number"&&!P.wpx&&(P.wpx=hC(P.width)),typeof P.wpx=="number"&&!P.wch&&(P.wch=dC(P.wpx)),typeof P.wch=="number"&&(M+=Math.round(P.wch))),M.charAt(M.length-1)!=" "&&y.push(M)})}function p(y,_){_.forEach(function(P,R){var M="F;";P.hidden?M+="M0;":P.hpt?M+="M"+20*P.hpt+";":P.hpx&&(M+="M"+20*fC(P.hpx)+";"),M.length>2&&y.push(M+"R"+(R+1))})}function v(y,_){var P=["ID;PWXL;N;E"],R=[],M=Di(y["!ref"]),F,k=Array.isArray(y),N=`\r
`;P.push("P;PGeneral"),P.push("F;P0;DG0G8;M255"),y["!cols"]&&d(P,y["!cols"]),y["!rows"]&&p(P,y["!rows"]),P.push("B;Y"+(M.e.r-M.s.r+1)+";X"+(M.e.c-M.s.c+1)+";D"+[M.s.c,M.s.r,M.e.c,M.e.r].join(" "));for(var G=M.s.r;G<=M.e.r;++G)for(var j=M.s.c;j<=M.e.c;++j){var ee=ci({r:G,c:j});F=k?(y[G]||[])[j]:y[ee],!(!F||F.v==null&&(!F.f||F.F))&&R.push(u(F,y,G,j))}return P.join(N)+N+R.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:a,from_sheet:v}}(),PK=function(){function e(s,a){switch(a.type){case"base64":return t(Cc(s),a);case"binary":return t(s,a);case"buffer":return t(Xr&&Buffer.isBuffer(s)?s.toString("binary"):mv(s),a);case"array":return t(S1(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){for(var o=s.split(`
`),u=-1,d=-1,p=0,v=[];p!==o.length;++p){if(o[p].trim()==="BOT"){v[++u]=[],d=0;continue}if(!(u<0)){var y=o[p].trim().split(","),_=y[0],P=y[1];++p;for(var R=o[p]||"";(R.match(/["]/g)||[]).length&1&&p<o.length-1;)R+=`
`+o[++p];switch(R=R.trim(),+_){case-1:if(R==="BOT"){v[++u]=[],d=0;continue}else if(R!=="EOD")throw new Error("Unrecognized DIF special command "+R);break;case 0:R==="TRUE"?v[u][d]=!0:R==="FALSE"?v[u][d]=!1:isNaN(dc(P))?isNaN(O0(P).getDate())?v[u][d]=P:v[u][d]=Qs(P):v[u][d]=dc(P),++d;break;case 1:R=R.slice(1,R.length-1),R=R.replace(/""/g,'"'),R&&R.match(/^=".*"$/)&&(R=R.slice(2,-1)),v[u][d++]=R!==""?R:null;break}if(R==="EOD")break}}return a&&a.sheetRows&&(v=v.slice(0,a.sheetRows)),v}function r(s,a){return Kp(e(s,a),a)}function i(s,a){return md(r(s,a),a)}var n=function(){var s=function(u,d,p,v,y){u.push(d),u.push(p+","+v),u.push('"'+y.replace(/"/g,'""')+'"')},a=function(u,d,p,v){u.push(d+","+p),u.push(d==1?'"'+v.replace(/"/g,'""')+'"':v)};return function(u){var d=[],p=Di(u["!ref"]),v,y=Array.isArray(u);s(d,"TABLE",0,1,"sheetjs"),s(d,"VECTORS",0,p.e.r-p.s.r+1,""),s(d,"TUPLES",0,p.e.c-p.s.c+1,""),s(d,"DATA",0,0,"");for(var _=p.s.r;_<=p.e.r;++_){a(d,-1,0,"BOT");for(var P=p.s.c;P<=p.e.c;++P){var R=ci({r:_,c:P});if(v=y?(u[_]||[])[P]:u[R],!v){a(d,1,0,"");continue}switch(v.t){case"n":var M=v.w;!M&&v.v!=null&&(M=v.v),M==null?v.f&&!v.F?a(d,1,0,"="+v.f):a(d,1,0,""):a(d,0,M,"V");break;case"b":a(d,0,v.v?1:0,v.v?"TRUE":"FALSE");break;case"s":a(d,1,0,isNaN(v.v)?v.v:'="'+v.v+'"');break;case"d":v.w||(v.w=Fu(v.z||on[14],Co(Qs(v.v)))),a(d,0,v.w,"V");break;default:a(d,1,0,"")}}}a(d,-1,0,"EOD");var F=`\r
`,k=d.join(F);return k}}();return{to_workbook:i,to_sheet:r,from_sheet:n}}(),pN=function(){function e(v){return v.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(v){return v.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(v,y){for(var _=v.split(`
`),P=-1,R=-1,M=0,F=[];M!==_.length;++M){var k=_[M].trim().split(":");if(k[0]==="cell"){var N=Un(k[1]);if(F.length<=N.r)for(P=F.length;P<=N.r;++P)F[P]||(F[P]=[]);switch(P=N.r,R=N.c,k[2]){case"t":F[P][R]=e(k[3]);break;case"v":F[P][R]=+k[3];break;case"vtf":var G=k[k.length-1];case"vtc":switch(k[3]){case"nl":F[P][R]=!!+k[4];break;default:F[P][R]=+k[4];break}k[2]=="vtf"&&(F[P][R]=[F[P][R],G])}}}return y&&y.sheetRows&&(F=F.slice(0,y.sheetRows)),F}function i(v,y){return Kp(r(v,y),y)}function n(v,y){return md(i(v,y),y)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function d(v){if(!v||!v["!ref"])return"";for(var y=[],_=[],P,R="",M=Wo(v["!ref"]),F=Array.isArray(v),k=M.s.r;k<=M.e.r;++k)for(var N=M.s.c;N<=M.e.c;++N)if(R=ci({r:k,c:N}),P=F?(v[k]||[])[N]:v[R],!(!P||P.v==null||P.t==="z")){switch(_=["cell",R,"t"],P.t){case"s":case"str":_.push(t(P.v));break;case"n":P.f?(_[2]="vtf",_[3]="n",_[4]=P.v,_[5]=t(P.f)):(_[2]="v",_[3]=P.v);break;case"b":_[2]="vt"+(P.f?"f":"c"),_[3]="nl",_[4]=P.v?"1":"0",_[5]=t(P.f||(P.v?"TRUE":"FALSE"));break;case"d":var G=Co(Qs(P.v));_[2]="vtc",_[3]="nd",_[4]=""+G,_[5]=P.w||Fu(P.z||on[14],G);break;case"e":continue}y.push(_.join(":"))}return y.push("sheet:c:"+(M.e.c-M.s.c+1)+":r:"+(M.e.r-M.s.r+1)+":tvf:1"),y.push("valueformat:1:text-wiki"),y.join(`
`)}function p(v){return[s,a,o,a,d(v),u].join(`
`)}return{to_workbook:n,to_sheet:i,from_sheet:p}}(),MK=function(){function e(p,v,y,_,P){P.raw?v[y][_]=p:p===""||(p==="TRUE"?v[y][_]=!0:p==="FALSE"?v[y][_]=!1:isNaN(dc(p))?isNaN(O0(p).getDate())?v[y][_]=p:v[y][_]=Qs(p):v[y][_]=dc(p))}function t(p,v){var y=v||{},_=[];if(!p||p.length===0)return _;for(var P=p.split(/[\r\n]/),R=P.length-1;R>=0&&P[R].length===0;)--R;for(var M=10,F=0,k=0;k<=R;++k)F=P[k].indexOf(" "),F==-1?F=P[k].length:F++,M=Math.max(M,F);for(k=0;k<=R;++k){_[k]=[];var N=0;for(e(P[k].slice(0,M).trim(),_,k,N,y),N=1;N<=(P[k].length-M)/10+1;++N)e(P[k].slice(M+(N-1)*10,M+N*10).trim(),_,k,N,y)}return y.sheetRows&&(_=_.slice(0,y.sheetRows)),_}var r={44:",",9:"	",59:";",124:"|"},i={44:3,9:2,59:1,124:0};function n(p){for(var v={},y=!1,_=0,P=0;_<p.length;++_)(P=p.charCodeAt(_))==34?y=!y:!y&&P in r&&(v[P]=(v[P]||0)+1);P=[];for(_ in v)Object.prototype.hasOwnProperty.call(v,_)&&P.push([v[_],_]);if(!P.length){v=i;for(_ in v)Object.prototype.hasOwnProperty.call(v,_)&&P.push([v[_],_])}return P.sort(function(R,M){return R[0]-M[0]||i[R[1]]-i[M[1]]}),r[P.pop()[1]]||44}function s(p,v){var y=v||{},_="",P=y.dense?[]:{},R={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(_=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(_=p.charAt(4),p=p.slice(6)):_=n(p.slice(0,1024)):y&&y.FS?_=y.FS:_=n(p.slice(0,1024));var M=0,F=0,k=0,N=0,G=0,j=_.charCodeAt(0),ee=!1,q=0,oe=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var ue=y.dateNF!=null?j$(y.dateNF):null;function me(){var ie=p.slice(N,G),fe={};if(ie.charAt(0)=='"'&&ie.charAt(ie.length-1)=='"'&&(ie=ie.slice(1,-1).replace(/""/g,'"')),ie.length===0)fe.t="z";else if(y.raw)fe.t="s",fe.v=ie;else if(ie.trim().length===0)fe.t="s",fe.v=ie;else if(ie.charCodeAt(0)==61)ie.charCodeAt(1)==34&&ie.charCodeAt(ie.length-1)==34?(fe.t="s",fe.v=ie.slice(2,-1).replace(/""/g,'"')):TZ(ie)?(fe.t="n",fe.f=ie.slice(1)):(fe.t="s",fe.v=ie);else if(ie=="TRUE")fe.t="b",fe.v=!0;else if(ie=="FALSE")fe.t="b",fe.v=!1;else if(!isNaN(k=dc(ie)))fe.t="n",y.cellText!==!1&&(fe.w=ie),fe.v=k;else if(!isNaN(O0(ie).getDate())||ue&&ie.match(ue)){fe.z=y.dateNF||on[14];var ke=0;ue&&ie.match(ue)&&(ie=$$(ie,y.dateNF,ie.match(ue)||[]),ke=1),y.cellDates?(fe.t="d",fe.v=Qs(ie,ke)):(fe.t="n",fe.v=Co(Qs(ie,ke))),y.cellText!==!1&&(fe.w=Fu(fe.z,fe.v instanceof Date?Co(fe.v):fe.v)),y.cellNF||delete fe.z}else fe.t="s",fe.v=ie;if(fe.t=="z"||(y.dense?(P[M]||(P[M]=[]),P[M][F]=fe):P[ci({c:F,r:M})]=fe),N=G+1,oe=p.charCodeAt(N),R.e.c<F&&(R.e.c=F),R.e.r<M&&(R.e.r=M),q==j)++F;else if(F=0,++M,y.sheetRows&&y.sheetRows<=M)return!0}e:for(;G<p.length;++G)switch(q=p.charCodeAt(G)){case 34:oe===34&&(ee=!ee);break;case j:case 10:case 13:if(!ee&&me())break e;break}return G-N>0&&me(),P["!ref"]=_n(R),P}function a(p,v){return!(v&&v.PRN)||v.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?s(p,v):Kp(t(p,v),v)}function o(p,v){var y="",_=v.type=="string"?[0,0,0,0]:VJ(p,v);switch(v.type){case"base64":y=Cc(p);break;case"binary":y=p;break;case"buffer":v.codepage==65001?y=p.toString("utf8"):v.codepage&&typeof rC<"u"||(y=Xr&&Buffer.isBuffer(p)?p.toString("binary"):mv(p));break;case"array":y=S1(p);break;case"string":y=p;break;default:throw new Error("Unrecognized type "+v.type)}return _[0]==239&&_[1]==187&&_[2]==191?y=Qm(y.slice(3)):v.type!="string"&&v.type!="buffer"&&v.codepage==65001?y=Qm(y):v.type=="binary"&&typeof rC<"u",y.slice(0,19)=="socialcalc:version:"?pN.to_sheet(v.type=="string"?y:Qm(y),v):a(y,v)}function u(p,v){return md(o(p,v),v)}function d(p){for(var v=[],y=Di(p["!ref"]),_,P=Array.isArray(p),R=y.s.r;R<=y.e.r;++R){for(var M=[],F=y.s.c;F<=y.e.c;++F){var k=ci({r:R,c:F});if(_=P?(p[R]||[])[F]:p[k],!_||_.v==null){M.push("          ");continue}for(var N=(_.w||(_c(_),_.w)||"").slice(0,10);N.length<10;)N+=" ";M.push(N+(F===0?" ":""))}v.push(M.join(""))}return v.join(`
`)}return{to_workbook:u,to_sheet:o,from_sheet:d}}(),jI=function(){function e(ce,he,ve){if(ce){Do(ce,ce.l||0);for(var _e=ve.Enum||ht;ce.l<ce.length;){var Fe=ce.read_shift(2),qe=_e[Fe]||_e[65535],at=ce.read_shift(2),ot=ce.l+at,Qe=qe.f&&qe.f(ce,at,ve);if(ce.l=ot,he(Qe,qe,Fe))return}}}function t(ce,he){switch(he.type){case"base64":return r(za(Cc(ce)),he);case"binary":return r(za(ce),he);case"buffer":case"array":return r(ce,he)}throw"Unsupported type "+he.type}function r(ce,he){if(!ce)return ce;var ve=he||{},_e=ve.dense?[]:{},Fe="Sheet1",qe="",at=0,ot={},Qe=[],Lt=[],Ot={s:{r:0,c:0},e:{r:0,c:0}},er=ve.sheetRows||0;if(ce[2]==0&&(ce[3]==8||ce[3]==9)&&ce.length>=16&&ce[14]==5&&ce[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(ce[2]==2)ve.Enum=ht,e(ce,function(Et,hr,rr){switch(rr){case 0:ve.vers=Et,Et>=4096&&(ve.qpro=!0);break;case 6:Ot=Et;break;case 204:Et&&(qe=Et);break;case 222:qe=Et;break;case 15:case 51:ve.qpro||(Et[1].v=Et[1].v.slice(1));case 13:case 14:case 16:rr==14&&(Et[2]&112)==112&&(Et[2]&15)>1&&(Et[2]&15)<15&&(Et[1].z=ve.dateNF||on[14],ve.cellDates&&(Et[1].t="d",Et[1].v=AO(Et[1].v))),ve.qpro&&Et[3]>at&&(_e["!ref"]=_n(Ot),ot[Fe]=_e,Qe.push(Fe),_e=ve.dense?[]:{},Ot={s:{r:0,c:0},e:{r:0,c:0}},at=Et[3],Fe=qe||"Sheet"+(at+1),qe="");var Ke=ve.dense?(_e[Et[0].r]||[])[Et[0].c]:_e[ci(Et[0])];if(Ke){Ke.t=Et[1].t,Ke.v=Et[1].v,Et[1].z!=null&&(Ke.z=Et[1].z),Et[1].f!=null&&(Ke.f=Et[1].f);break}ve.dense?(_e[Et[0].r]||(_e[Et[0].r]=[]),_e[Et[0].r][Et[0].c]=Et[1]):_e[ci(Et[0])]=Et[1];break}},ve);else if(ce[2]==26||ce[2]==14)ve.Enum=Be,ce[2]==14&&(ve.qpro=!0,ce.l=0),e(ce,function(Et,hr,rr){switch(rr){case 204:Fe=Et;break;case 22:Et[1].v=Et[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Et[3]>at&&(_e["!ref"]=_n(Ot),ot[Fe]=_e,Qe.push(Fe),_e=ve.dense?[]:{},Ot={s:{r:0,c:0},e:{r:0,c:0}},at=Et[3],Fe="Sheet"+(at+1)),er>0&&Et[0].r>=er)break;ve.dense?(_e[Et[0].r]||(_e[Et[0].r]=[]),_e[Et[0].r][Et[0].c]=Et[1]):_e[ci(Et[0])]=Et[1],Ot.e.c<Et[0].c&&(Ot.e.c=Et[0].c),Ot.e.r<Et[0].r&&(Ot.e.r=Et[0].r);break;case 27:Et[14e3]&&(Lt[Et[14e3][0]]=Et[14e3][1]);break;case 1537:Lt[Et[0]]=Et[1],Et[0]==at&&(Fe=Et[1]);break}},ve);else throw new Error("Unrecognized LOTUS BOF "+ce[2]);if(_e["!ref"]=_n(Ot),ot[qe||Fe]=_e,Qe.push(qe||Fe),!Lt.length)return{SheetNames:Qe,Sheets:ot};for(var Yt={},Qt=[],qt=0;qt<Lt.length;++qt)ot[Qe[qt]]?(Qt.push(Lt[qt]||Qe[qt]),Yt[Lt[qt]]=ot[Lt[qt]]||ot[Qe[qt]]):(Qt.push(Lt[qt]),Yt[Lt[qt]]={"!ref":"A1"});return{SheetNames:Qt,Sheets:Yt}}function i(ce,he){var ve=he||{};if(+ve.codepage>=0&&k0(+ve.codepage),ve.type=="string")throw new Error("Cannot write WK1 to JS string");var _e=xo(),Fe=Di(ce["!ref"]),qe=Array.isArray(ce),at=[];Ut(_e,0,s(1030)),Ut(_e,6,u(Fe));for(var ot=Math.min(Fe.e.r,8191),Qe=Fe.s.r;Qe<=ot;++Qe)for(var Lt=ls(Qe),Ot=Fe.s.c;Ot<=Fe.e.c;++Ot){Qe===Fe.s.r&&(at[Ot]=Fs(Ot));var er=at[Ot]+Lt,Yt=qe?(ce[Qe]||[])[Ot]:ce[er];if(!(!Yt||Yt.t=="z"))if(Yt.t=="n")(Yt.v|0)==Yt.v&&Yt.v>=-32768&&Yt.v<=32767?Ut(_e,13,_(Qe,Ot,Yt.v)):Ut(_e,14,R(Qe,Ot,Yt.v));else{var Qt=_c(Yt);Ut(_e,15,v(Qe,Ot,Qt.slice(0,239)))}}return Ut(_e,1),_e.end()}function n(ce,he){var ve=he||{};if(+ve.codepage>=0&&k0(+ve.codepage),ve.type=="string")throw new Error("Cannot write WK3 to JS string");var _e=xo();Ut(_e,0,a(ce));for(var Fe=0,qe=0;Fe<ce.SheetNames.length;++Fe)(ce.Sheets[ce.SheetNames[Fe]]||{})["!ref"]&&Ut(_e,27,Ye(ce.SheetNames[Fe],qe++));var at=0;for(Fe=0;Fe<ce.SheetNames.length;++Fe){var ot=ce.Sheets[ce.SheetNames[Fe]];if(!(!ot||!ot["!ref"])){for(var Qe=Di(ot["!ref"]),Lt=Array.isArray(ot),Ot=[],er=Math.min(Qe.e.r,8191),Yt=Qe.s.r;Yt<=er;++Yt)for(var Qt=ls(Yt),qt=Qe.s.c;qt<=Qe.e.c;++qt){Yt===Qe.s.r&&(Ot[qt]=Fs(qt));var Et=Ot[qt]+Qt,hr=Lt?(ot[Yt]||[])[qt]:ot[Et];if(!(!hr||hr.t=="z"))if(hr.t=="n")Ut(_e,23,me(Yt,qt,at,hr.v));else{var rr=_c(hr);Ut(_e,22,q(Yt,qt,at,rr.slice(0,239)))}}++at}}return Ut(_e,1),_e.end()}function s(ce){var he=mt(2);return he.write_shift(2,ce),he}function a(ce){var he=mt(26);he.write_shift(2,4096),he.write_shift(2,4),he.write_shift(4,0);for(var ve=0,_e=0,Fe=0,qe=0;qe<ce.SheetNames.length;++qe){var at=ce.SheetNames[qe],ot=ce.Sheets[at];if(!(!ot||!ot["!ref"])){++Fe;var Qe=Wo(ot["!ref"]);ve<Qe.e.r&&(ve=Qe.e.r),_e<Qe.e.c&&(_e=Qe.e.c)}}return ve>8191&&(ve=8191),he.write_shift(2,ve),he.write_shift(1,Fe),he.write_shift(1,_e),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(1,1),he.write_shift(1,2),he.write_shift(4,0),he.write_shift(4,0),he}function o(ce,he,ve){var _e={s:{c:0,r:0},e:{c:0,r:0}};return he==8&&ve.qpro?(_e.s.c=ce.read_shift(1),ce.l++,_e.s.r=ce.read_shift(2),_e.e.c=ce.read_shift(1),ce.l++,_e.e.r=ce.read_shift(2),_e):(_e.s.c=ce.read_shift(2),_e.s.r=ce.read_shift(2),he==12&&ve.qpro&&(ce.l+=2),_e.e.c=ce.read_shift(2),_e.e.r=ce.read_shift(2),he==12&&ve.qpro&&(ce.l+=2),_e.s.c==65535&&(_e.s.c=_e.e.c=_e.s.r=_e.e.r=0),_e)}function u(ce){var he=mt(8);return he.write_shift(2,ce.s.c),he.write_shift(2,ce.s.r),he.write_shift(2,ce.e.c),he.write_shift(2,ce.e.r),he}function d(ce,he,ve){var _e=[{c:0,r:0},{t:"n",v:0},0,0];return ve.qpro&&ve.vers!=20768?(_e[0].c=ce.read_shift(1),_e[3]=ce.read_shift(1),_e[0].r=ce.read_shift(2),ce.l+=2):(_e[2]=ce.read_shift(1),_e[0].c=ce.read_shift(2),_e[0].r=ce.read_shift(2)),_e}function p(ce,he,ve){var _e=ce.l+he,Fe=d(ce,he,ve);if(Fe[1].t="s",ve.vers==20768){ce.l++;var qe=ce.read_shift(1);return Fe[1].v=ce.read_shift(qe,"utf8"),Fe}return ve.qpro&&ce.l++,Fe[1].v=ce.read_shift(_e-ce.l,"cstr"),Fe}function v(ce,he,ve){var _e=mt(7+ve.length);_e.write_shift(1,255),_e.write_shift(2,he),_e.write_shift(2,ce),_e.write_shift(1,39);for(var Fe=0;Fe<_e.length;++Fe){var qe=ve.charCodeAt(Fe);_e.write_shift(1,qe>=128?95:qe)}return _e.write_shift(1,0),_e}function y(ce,he,ve){var _e=d(ce,he,ve);return _e[1].v=ce.read_shift(2,"i"),_e}function _(ce,he,ve){var _e=mt(7);return _e.write_shift(1,255),_e.write_shift(2,he),_e.write_shift(2,ce),_e.write_shift(2,ve,"i"),_e}function P(ce,he,ve){var _e=d(ce,he,ve);return _e[1].v=ce.read_shift(8,"f"),_e}function R(ce,he,ve){var _e=mt(13);return _e.write_shift(1,255),_e.write_shift(2,he),_e.write_shift(2,ce),_e.write_shift(8,ve,"f"),_e}function M(ce,he,ve){var _e=ce.l+he,Fe=d(ce,he,ve);if(Fe[1].v=ce.read_shift(8,"f"),ve.qpro)ce.l=_e;else{var qe=ce.read_shift(2);G(ce.slice(ce.l,ce.l+qe),Fe),ce.l+=qe}return Fe}function F(ce,he,ve){var _e=he&32768;return he&=-32769,he=(_e?ce:0)+(he>=8192?he-16384:he),(_e?"":"$")+(ve?Fs(he):ls(he))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function G(ce,he){Do(ce,0);for(var ve=[],_e=0,Fe="",qe="",at="",ot="";ce.l<ce.length;){var Qe=ce[ce.l++];switch(Qe){case 0:ve.push(ce.read_shift(8,"f"));break;case 1:qe=F(he[0].c,ce.read_shift(2),!0),Fe=F(he[0].r,ce.read_shift(2),!1),ve.push(qe+Fe);break;case 2:{var Lt=F(he[0].c,ce.read_shift(2),!0),Ot=F(he[0].r,ce.read_shift(2),!1);qe=F(he[0].c,ce.read_shift(2),!0),Fe=F(he[0].r,ce.read_shift(2),!1),ve.push(Lt+Ot+":"+qe+Fe)}break;case 3:if(ce.l<ce.length){console.error("WK1 premature formula end");return}break;case 4:ve.push("("+ve.pop()+")");break;case 5:ve.push(ce.read_shift(2));break;case 6:{for(var er="";Qe=ce[ce.l++];)er+=String.fromCharCode(Qe);ve.push('"'+er.replace(/"/g,'""')+'"')}break;case 8:ve.push("-"+ve.pop());break;case 23:ve.push("+"+ve.pop());break;case 22:ve.push("NOT("+ve.pop()+")");break;case 20:case 21:ot=ve.pop(),at=ve.pop(),ve.push(["AND","OR"][Qe-20]+"("+at+","+ot+")");break;default:if(Qe<32&&N[Qe])ot=ve.pop(),at=ve.pop(),ve.push(at+N[Qe]+ot);else if(k[Qe]){if(_e=k[Qe][1],_e==69&&(_e=ce[ce.l++]),_e>ve.length){console.error("WK1 bad formula parse 0x"+Qe.toString(16)+":|"+ve.join("|")+"|");return}var Yt=ve.slice(-_e);ve.length-=_e,ve.push(k[Qe][0]+"("+Yt.join(",")+")")}else return Qe<=7?console.error("WK1 invalid opcode "+Qe.toString(16)):Qe<=24?console.error("WK1 unsupported op "+Qe.toString(16)):Qe<=30?console.error("WK1 invalid opcode "+Qe.toString(16)):Qe<=115?console.error("WK1 unsupported function opcode "+Qe.toString(16)):console.error("WK1 unrecognized opcode "+Qe.toString(16))}}ve.length==1?he[1].f=""+ve[0]:console.error("WK1 bad formula parse |"+ve.join("|")+"|")}function j(ce){var he=[{c:0,r:0},{t:"n",v:0},0];return he[0].r=ce.read_shift(2),he[3]=ce[ce.l++],he[0].c=ce[ce.l++],he}function ee(ce,he){var ve=j(ce);return ve[1].t="s",ve[1].v=ce.read_shift(he-4,"cstr"),ve}function q(ce,he,ve,_e){var Fe=mt(6+_e.length);Fe.write_shift(2,ce),Fe.write_shift(1,ve),Fe.write_shift(1,he),Fe.write_shift(1,39);for(var qe=0;qe<_e.length;++qe){var at=_e.charCodeAt(qe);Fe.write_shift(1,at>=128?95:at)}return Fe.write_shift(1,0),Fe}function oe(ce,he){var ve=j(ce);ve[1].v=ce.read_shift(2);var _e=ve[1].v>>1;if(ve[1].v&1)switch(_e&7){case 0:_e=(_e>>3)*5e3;break;case 1:_e=(_e>>3)*500;break;case 2:_e=(_e>>3)/20;break;case 3:_e=(_e>>3)/200;break;case 4:_e=(_e>>3)/2e3;break;case 5:_e=(_e>>3)/2e4;break;case 6:_e=(_e>>3)/16;break;case 7:_e=(_e>>3)/64;break}return ve[1].v=_e,ve}function ue(ce,he){var ve=j(ce),_e=ce.read_shift(4),Fe=ce.read_shift(4),qe=ce.read_shift(2);if(qe==65535)return _e===0&&Fe===3221225472?(ve[1].t="e",ve[1].v=15):_e===0&&Fe===3489660928?(ve[1].t="e",ve[1].v=42):ve[1].v=0,ve;var at=qe&32768;return qe=(qe&32767)-16446,ve[1].v=(1-at*2)*(Fe*Math.pow(2,qe+32)+_e*Math.pow(2,qe)),ve}function me(ce,he,ve,_e){var Fe=mt(14);if(Fe.write_shift(2,ce),Fe.write_shift(1,ve),Fe.write_shift(1,he),_e==0)return Fe.write_shift(4,0),Fe.write_shift(4,0),Fe.write_shift(2,65535),Fe;var qe=0,at=0,ot=0,Qe=0;return _e<0&&(qe=1,_e=-_e),at=Math.log2(_e)|0,_e/=Math.pow(2,at-31),Qe=_e>>>0,Qe&2147483648||(_e/=2,++at,Qe=_e>>>0),_e-=Qe,Qe|=2147483648,Qe>>>=0,_e*=Math.pow(2,32),ot=_e>>>0,Fe.write_shift(4,ot),Fe.write_shift(4,Qe),at+=16383+(qe?32768:0),Fe.write_shift(2,at),Fe}function ie(ce,he){var ve=ue(ce);return ce.l+=he-14,ve}function fe(ce,he){var ve=j(ce),_e=ce.read_shift(4);return ve[1].v=_e>>6,ve}function ke(ce,he){var ve=j(ce),_e=ce.read_shift(8,"f");return ve[1].v=_e,ve}function et(ce,he){var ve=ke(ce);return ce.l+=he-10,ve}function Xe(ce,he){return ce[ce.l+he-1]==0?ce.read_shift(he,"cstr"):""}function ct(ce,he){var ve=ce[ce.l++];ve>he-1&&(ve=he-1);for(var _e="";_e.length<ve;)_e+=String.fromCharCode(ce[ce.l++]);return _e}function pt(ce,he,ve){if(!(!ve.qpro||he<21)){var _e=ce.read_shift(1);ce.l+=17,ce.l+=1,ce.l+=2;var Fe=ce.read_shift(he-21,"cstr");return[_e,Fe]}}function Ge(ce,he){for(var ve={},_e=ce.l+he;ce.l<_e;){var Fe=ce.read_shift(2);if(Fe==14e3){for(ve[Fe]=[0,""],ve[Fe][0]=ce.read_shift(2);ce[ce.l];)ve[Fe][1]+=String.fromCharCode(ce[ce.l]),ce.l++;ce.l++}}return ve}function Ye(ce,he){var ve=mt(5+ce.length);ve.write_shift(2,14e3),ve.write_shift(2,he);for(var _e=0;_e<ce.length;++_e){var Fe=ce.charCodeAt(_e);ve[ve.l++]=Fe>127?95:Fe}return ve[ve.l++]=0,ve}var ht={0:{n:"BOF",f:cN},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:y},14:{n:"NUMBER",f:P},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:M},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Xe},222:{n:"SHEETNAMELP",f:ct},65535:{n:""}},Be={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ee},23:{n:"NUMBER17",f:ue},24:{n:"NUMBER18",f:oe},25:{n:"FORMULA19",f:ie},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ge},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:fe},38:{n:"??"},39:{n:"NUMBER27",f:ke},40:{n:"FORMULA28",f:et},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Xe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:pt},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:i,book_to_wk3:n,to_workbook:t}}(),FK=/^\s|\s$|[\t\n\r]/;function gN(e,t){if(!t.bookSST)return"";var r=[bn];r[r.length]=Gt("sst",null,{xmlns:qp[0],count:e.Count,uniqueCount:e.Unique});for(var i=0;i!=e.length;++i)if(e[i]!=null){var n=e[i],s="<si>";n.r?s+=n.r:(s+="<t",n.t||(n.t=""),n.t.match(FK)&&(s+=' xml:space="preserve"'),s+=">"+oi(n.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function AK(e){return[e.read_shift(4),e.read_shift(4)]}function IK(e,t){return t||(t=mt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var DK=bq;function kK(e){var t=xo();bt(t,159,IK(e));for(var r=0;r<e.length;++r)bt(t,19,DK(e[r]));return bt(t,160),t.end()}function LK(e){for(var t=[],r=e.split(""),i=0;i<r.length;++i)t[i]=r[i].charCodeAt(0);return t}function mN(e){var t=0,r,i=LK(e),n=i.length+1,s,a,o,u,d;for(r=Qh(n),r[0]=i.length,s=1;s!=n;++s)r[s]=i[s-1];for(s=n-1;s>=0;--s)a=r[s],o=t&16384?1:0,u=t<<1&32767,d=o|u,t=d^a;return t^52811}var OK=function(){function e(n,s){switch(s.type){case"base64":return t(Cc(n),s);case"binary":return t(n,s);case"buffer":return t(Xr&&Buffer.isBuffer(n)?n.toString("binary"):mv(n),s);case"array":return t(S1(n),s)}throw new Error("Unrecognized type "+s.type)}function t(n,s){var a=s||{},o=a.dense?[]:{},u=n.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(p,v){Array.isArray(o)&&(o[v]=[]);for(var y=/\\\w+\b/g,_=0,P,R=-1;P=y.exec(p);){switch(P[0]){case"\\cell":var M=p.slice(_,y.lastIndex-P[0].length);if(M[0]==" "&&(M=M.slice(1)),++R,M.length){var F={v:M,t:"s"};Array.isArray(o)?o[v][R]=F:o[ci({r:v,c:R})]=F}break}_=y.lastIndex}R>d.e.c&&(d.e.c=R)}),o["!ref"]=_n(d),o}function r(n,s){return md(e(n,s),s)}function i(n){for(var s=["{\\rtf1\\ansi"],a=Di(n["!ref"]),o,u=Array.isArray(n),d=a.s.r;d<=a.e.r;++d){s.push("\\trowd\\trautofit1");for(var p=a.s.c;p<=a.e.c;++p)s.push("\\cellx"+(p+1));for(s.push("\\pard\\intbl"),p=a.s.c;p<=a.e.c;++p){var v=ci({r:d,c:p});o=u?(n[d]||[])[p]:n[v],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(_c(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:i}}();function $I(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var NK=6,fc=NK;function hC(e){return Math.floor((e+Math.round(128/fc)/256)*fc)}function dC(e){return Math.floor((e-5)/fc*100+.5)/100}function YE(e){return Math.round((e*fc+5)/fc*256)/256}function pT(e){e.width?(e.wpx=hC(e.width),e.wch=dC(e.wpx),e.MDW=fc):e.wpx?(e.wch=dC(e.wpx),e.width=YE(e.wch),e.MDW=fc):typeof e.wch=="number"&&(e.width=YE(e.wch),e.wpx=hC(e.width),e.MDW=fc),e.customWidth&&delete e.customWidth}var BK=96,vN=BK;function fC(e){return e*96/vN}function yN(e){return e*vN/96}function zK(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&(t[t.length]=Gt("numFmt",null,{numFmtId:i,formatCode:oi(e[i])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Gt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function GK(e){var t=[];return t[t.length]=Gt("cellXfs",null),e.forEach(function(r){t[t.length]=Gt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Gt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function wN(e,t){var r=[bn,Gt("styleSheet",null,{xmlns:qp[0],"xmlns:vt":Hn.vt})],i;return e.SSF&&(i=zK(e.SSF))!=null&&(r[r.length]=i),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(i=GK(t.cellXfs))&&(r[r.length]=i),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function VK(e,t){var r=e.read_shift(2),i=As(e);return[r,i]}function HK(e,t,r){r||(r=mt(6+4*t.length)),r.write_shift(2,e),Wn(t,r);var i=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),i}function UK(e,t,r){var i={};i.sz=e.read_shift(2)/20;var n=Fq(e);n.fItalic&&(i.italic=1),n.fCondense&&(i.condense=1),n.fExtend&&(i.extend=1),n.fShadow&&(i.shadow=1),n.fOutline&&(i.outline=1),n.fStrikeout&&(i.strike=1);var s=e.read_shift(2);switch(s===700&&(i.bold=1),e.read_shift(2)){case 1:i.vertAlign="superscript";break;case 2:i.vertAlign="subscript";break}var a=e.read_shift(1);a!=0&&(i.underline=a);var o=e.read_shift(1);o>0&&(i.family=o);var u=e.read_shift(1);switch(u>0&&(i.charset=u),e.l++,i.color=Mq(e),e.read_shift(1)){case 1:i.scheme="major";break;case 2:i.scheme="minor";break}return i.name=As(e),i}function WK(e,t){t||(t=mt(25+4*32)),t.write_shift(2,e.sz*20),Aq(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),cC(e.color,t);var i=0;return i=2,t.write_shift(1,i),Wn(e.name,t),t.length>t.l?t.slice(0,t.l):t}var jK=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Jb,$K=Fl;function qI(e,t){t||(t=mt(4*3+8*7+16*1)),Jb||(Jb=rT(jK));var r=Jb[e.patternType];r==null&&(r=40),t.write_shift(4,r);var i=0;if(r!=40)for(cC({auto:1},t),cC({auto:1},t);i<12;++i)t.write_shift(4,0);else{for(;i<4;++i)t.write_shift(4,0);for(;i<12;++i)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function qK(e,t){var r=e.l+t,i=e.read_shift(2),n=e.read_shift(2);return e.l=r,{ixfe:i,numFmtId:n}}function xN(e,t,r){r||(r=mt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var i=0;return r.write_shift(1,i),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Cm(e,t){return t||(t=mt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var KK=Fl;function ZK(e,t){return t||(t=mt(51)),t.write_shift(1,0),Cm(null,t),Cm(null,t),Cm(null,t),Cm(null,t),Cm(null,t),t.length>t.l?t.slice(0,t.l):t}function XK(e,t){return t||(t=mt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),lC(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function YK(e,t,r){var i=mt(2052);return i.write_shift(4,e),lC(t,i),lC(r,i),i.length>i.l?i.slice(0,i.l):i}function QK(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(i){for(var n=i[0];n<=i[1];++n)t[n]!=null&&++r}),r!=0&&(bt(e,615,Wa(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(i){for(var n=i[0];n<=i[1];++n)t[n]!=null&&bt(e,44,HK(n,t[n]))}),bt(e,616))}}function JK(e){var t=1;bt(e,611,Wa(t)),bt(e,43,WK({sz:12,color:{theme:1},name:"Calibri",family:2})),bt(e,612)}function eZ(e){var t=2;bt(e,603,Wa(t)),bt(e,45,qI({patternType:"none"})),bt(e,45,qI({patternType:"gray125"})),bt(e,604)}function tZ(e){var t=1;bt(e,613,Wa(t)),bt(e,46,ZK()),bt(e,614)}function rZ(e){var t=1;bt(e,626,Wa(t)),bt(e,47,xN({numFmtId:0},65535)),bt(e,627)}function iZ(e,t){bt(e,617,Wa(t.length)),t.forEach(function(r){bt(e,47,xN(r,0))}),bt(e,618)}function nZ(e){var t=1;bt(e,619,Wa(t)),bt(e,48,XK({xfId:0,name:"Normal"})),bt(e,620)}function sZ(e){var t=0;bt(e,505,Wa(t)),bt(e,506)}function oZ(e){var t=0;bt(e,508,YK(t,"TableStyleMedium9","PivotStyleMedium4")),bt(e,509)}function aZ(e,t){var r=xo();return bt(r,278),QK(r,e.SSF),JK(r),eZ(r),tZ(r),rZ(r),iZ(r,t.cellXfs),nZ(r),sZ(r),oZ(r),bt(r,279),r.end()}function CN(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[bn];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function lZ(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:As(e)}}function cZ(e){var t=mt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Wn(e.name,t),t.slice(0,t.l)}function uZ(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function hZ(e){var t=mt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function dZ(e,t){var r=mt(8+2*t.length);return r.write_shift(4,e),Wn(t,r),r.slice(0,r.l)}function fZ(e){return e.l+=4,e.read_shift(4)!=0}function pZ(e,t){var r=mt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function gZ(){var e=xo();return bt(e,332),bt(e,334,Wa(1)),bt(e,335,cZ({name:"XLDAPR",version:12e4,flags:3496657072})),bt(e,336),bt(e,339,dZ(1,"XLDAPR")),bt(e,52),bt(e,35,Wa(514)),bt(e,4096,Wa(0)),bt(e,4097,la(1)),bt(e,36),bt(e,53),bt(e,340),bt(e,337,pZ(1)),bt(e,51,hZ([[1,0]])),bt(e,338),bt(e,333),e.end()}function _N(){var e=[bn];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function mZ(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=ci(r);var i=e.read_shift(1);return i&2&&(t.l="1"),i&8&&(t.a="1"),t}var Hf=1024;function bN(e,t){for(var r=[21600,21600],i=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),n=[Gt("xml",null,{"xmlns:v":ko.v,"xmlns:o":ko.o,"xmlns:x":ko.x,"xmlns:mv":ko.mv}).replace(/\/>/,">"),Gt("o:shapelayout",Gt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Gt("v:shapetype",[Gt("v:stroke",null,{joinstyle:"miter"}),Gt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:i})];Hf<e*1e3;)Hf+=1e3;return t.forEach(function(s){var a=Un(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var u=o.type=="gradient"?Gt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=Gt("v:fill",u,o),p={on:"t",obscured:"t"};++Hf,n=n.concat(["<v:shape"+B0({id:"_x0000_s"+Hf,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,Gt("v:shadow",null,p),Gt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ns("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),ns("x:AutoFill","False"),ns("x:Row",String(a.r)),ns("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function SN(e){var t=[bn,Gt("comments",null,{xmlns:qp[0]})],r=[];return t.push("<authors>"),e.forEach(function(i){i[1].forEach(function(n){var s=oi(n.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),n.T&&n.ID&&r.indexOf("tc="+n.ID)==-1&&(r.push("tc="+n.ID),t.push("<author>tc="+n.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(i){var n=0,s=[];if(i[1][0]&&i[1][0].T&&i[1][0].ID?n=r.indexOf("tc="+i[1][0].ID):i[1].forEach(function(u){u.a&&(n=r.indexOf(oi(u.a))),s.push(u.t||"")}),t.push('<comment ref="'+i[0]+'" authorId="'+n+'"><text>'),s.length<=1)t.push(ns("t",oi(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;t.push(ns("t",oi(a)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function vZ(e,t,r){var i=[bn,Gt("ThreadedComments",null,{xmlns:Hn.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(n){var s="";(n[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&t.indexOf(a.a)==-1&&t.push(a.a);var u={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=u.id:u.parentId=s,a.ID=u.id,a.a&&(u.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(a.a)).slice(-12)+"}"),i.push(Gt("threadedComment",ns("text",a.t||""),u))})}),i.push("</ThreadedComments>"),i.join("")}function yZ(e){var t=[bn,Gt("personList",null,{xmlns:Hn.TCMNT,"xmlns:x":qp[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,i){t.push(Gt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+i).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function wZ(e){var t={};t.iauthor=e.read_shift(4);var r=xd(e);return t.rfx=r.s,t.ref=ci(r.s),e.l+=16,t}function xZ(e,t){return t==null&&(t=mt(36)),t.write_shift(4,e[1].iauthor),Zp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var CZ=As;function _Z(e){return Wn(e.slice(0,54))}function bZ(e){var t=xo(),r=[];return bt(t,628),bt(t,630),e.forEach(function(i){i[1].forEach(function(n){r.indexOf(n.a)>-1||(r.push(n.a.slice(0,54)),bt(t,632,_Z(n.a)))})}),bt(t,631),bt(t,633),e.forEach(function(i){i[1].forEach(function(n){n.iauthor=r.indexOf(n.a);var s={s:Un(i[0]),e:Un(i[0])};bt(t,635,xZ([s,n])),n.t&&n.t.length>0&&bt(t,637,Eq(n)),bt(t,636),delete n.iauthor})}),bt(t,634),bt(t,629),t.end()}function SZ(e,t){t.FullPaths.forEach(function(r,i){if(i!=0){var n=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");n.slice(-1)!=="/"&&pi.utils.cfb_add(e,n,t.FileIndex[i].content)}})}var EN=["xlsb","xlsm","xlam","biff8","xla"],EZ=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(i,n,s,a){var o=!1,u=!1;s.length==0?u=!0:s.charAt(0)=="["&&(u=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var d=s.length>0?parseInt(s,10)|0:0,p=a.length>0?parseInt(a,10)|0:0;return o?p+=t.c:--p,u?d+=t.r:--d,n+(o?"":"$")+Fs(p)+(u?"":"$")+ls(d)}return function(n,s){return t=s,n.replace(e,r)}}(),gT=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,mT=function(){return function(t,r){return t.replace(gT,function(i,n,s,a,o,u){var d=cT(a)-(s?0:r.c),p=lT(u)-(o?0:r.r),v=p==0?"":o?p+1:"["+p+"]",y=d==0?"":s?d+1:"["+d+"]";return n+"R"+v+"C"+y})}}();function RZ(e,t){return e.replace(gT,function(r,i,n,s,a,o){return i+(n=="$"?n+s:Fs(cT(s)+t.c))+(a=="$"?a+o:ls(lT(o)+t.r))})}function TZ(e){return e.length!=1}function xn(e){e.l+=1}function Au(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function RN(e,t,r){var i=2;if(r){if(r.biff>=2&&r.biff<=5)return TN(e);r.biff==12&&(i=4)}var n=e.read_shift(i),s=e.read_shift(i),a=Au(e),o=Au(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function TN(e){var t=Au(e),r=Au(e),i=e.read_shift(1),n=e.read_shift(1);return{s:{r:t[0],c:i,cRel:t[1],rRel:t[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function PZ(e,t,r){if(r.biff<8)return TN(e);var i=e.read_shift(r.biff==12?4:2),n=e.read_shift(r.biff==12?4:2),s=Au(e),a=Au(e);return{s:{r:i,c:s[0],cRel:s[1],rRel:s[2]},e:{r:n,c:a[0],cRel:a[1],rRel:a[2]}}}function PN(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return MZ(e);var i=e.read_shift(r&&r.biff==12?4:2),n=Au(e);return{r:i,c:n[0],cRel:n[1],rRel:n[2]}}function MZ(e){var t=Au(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function FZ(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function AZ(e,t,r){var i=r&&r.biff?r.biff:8;if(i>=2&&i<=5)return IZ(e);var n=e.read_shift(i>=12?4:2),s=e.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;n>524287;)n-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:n,c:s,cRel:a,rRel:o}}function IZ(e){var t=e.read_shift(2),r=e.read_shift(1),i=(t&32768)>>15,n=(t&16384)>>14;return t&=16383,i==1&&t>=8192&&(t=t-16384),n==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:n,rRel:i}}function DZ(e,t,r){var i=(e[e.l++]&96)>>5,n=RN(e,r.biff>=2&&r.biff<=5?6:8,r);return[i,n]}function kZ(e,t,r){var i=(e[e.l++]&96)>>5,n=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var a=RN(e,s,r);return[i,n,a]}function LZ(e,t,r){var i=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[i]}function OZ(e,t,r){var i=(e[e.l++]&96)>>5,n=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[i,n]}function NZ(e,t,r){var i=(e[e.l++]&96)>>5,n=PZ(e,t-1,r);return[i,n]}function BZ(e,t,r){var i=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[i]}function KI(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function zZ(e,t,r){e.l+=2;for(var i=e.read_shift(r&&r.biff==2?1:2),n=[],s=0;s<=i;++s)n.push(e.read_shift(r&&r.biff==2?1:2));return n}function GZ(e,t,r){var i=e[e.l+1]&255?1:0;return e.l+=2,[i,e.read_shift(r&&r.biff==2?1:2)]}function VZ(e,t,r){var i=e[e.l+1]&255?1:0;return e.l+=2,[i,e.read_shift(r&&r.biff==2?1:2)]}function HZ(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function UZ(e,t,r){var i=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[i]}function MN(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function WZ(e){return e.read_shift(2),MN(e)}function jZ(e){return e.read_shift(2),MN(e)}function $Z(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=PN(e,0,r);return[i,n]}function qZ(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=AZ(e,0,r);return[i,n]}function KZ(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=PN(e,0,r);return[i,n,s]}function ZZ(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(r&&r.biff<=3?1:2);return[ZX[n],IN[n],i]}function XZ(e,t,r){var i=e[e.l++],n=e.read_shift(1),s=r&&r.biff<=3?[i==88?-1:0,e.read_shift(1)]:YZ(e);return[n,(s[0]===0?IN:KX)[s[1]]]}function YZ(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function QZ(e,t,r){e.l+=r&&r.biff==2?3:4}function JZ(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var i=e.read_shift(2),n=e.read_shift(r&&r.biff==2?1:2);return[i,n]}function eX(e){return e.l++,wv[e.read_shift(1)]}function tX(e){return e.l++,e.read_shift(2)}function rX(e){return e.l++,e.read_shift(1)!==0}function iX(e){return e.l++,Xp(e)}function nX(e,t,r){return e.l++,hN(e,t-1,r)}function sX(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Kq(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=wv[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Xp(e);break;case 2:r[1]=Qq(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function oX(e,t,r){for(var i=e.read_shift(r.biff==12?4:2),n=[],s=0;s!=i;++s)n.push((r.biff==12?xd:tK)(e));return n}function aX(e,t,r){var i=0,n=0;r.biff==12?(i=e.read_shift(4),n=e.read_shift(4)):(n=1+e.read_shift(1),i=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--i,--n==0&&(n=256));for(var s=0,a=[];s!=i&&(a[s]=[]);++s)for(var o=0;o!=n;++o)a[s][o]=sX(e,r.biff);return a}function lX(e,t,r){var i=e.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,s=e.read_shift(n);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[i,0,s]}function cX(e,t,r){if(r.biff==5)return uX(e);var i=e.read_shift(1)>>>5&3,n=e.read_shift(2),s=e.read_shift(4);return[i,n,s]}function uX(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var i=e.read_shift(2);return e.l+=12,[t,r,i]}function hX(e,t,r){var i=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var n=e.read_shift(r&&r.biff==2?1:2);return[i,n]}function dX(e,t,r){var i=e.read_shift(1)>>>5&3,n=e.read_shift(r&&r.biff==2?1:2);return[i,n]}function fX(e,t,r){var i=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[i]}function pX(e,t,r){var i=(e[e.l++]&96)>>5,n=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[i,n]}var gX=Fl,mX=Fl,vX=Fl;function xv(e,t,r){return e.l+=2,[FZ(e)]}function vT(e){return e.l+=6,[]}var yX=xv,wX=vT,xX=vT,CX=xv;function FN(e){return e.l+=2,[cN(e),e.read_shift(2)&1]}var _X=xv,bX=FN,SX=vT,EX=xv,RX=xv,TX=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function PX(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(4),n=e.read_shift(2),s=e.read_shift(2),a=TX[r>>2&31];return{ixti:t,coltype:r&3,rt:a,idx:i,c:n,C:s}}function MX(e){return e.l+=2,[e.read_shift(4)]}function FX(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function AX(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function IX(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function DX(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function kX(e){return e.l+=4,[0,0]}var ZI={1:{n:"PtgExp",f:JZ},2:{n:"PtgTbl",f:vX},3:{n:"PtgAdd",f:xn},4:{n:"PtgSub",f:xn},5:{n:"PtgMul",f:xn},6:{n:"PtgDiv",f:xn},7:{n:"PtgPower",f:xn},8:{n:"PtgConcat",f:xn},9:{n:"PtgLt",f:xn},10:{n:"PtgLe",f:xn},11:{n:"PtgEq",f:xn},12:{n:"PtgGe",f:xn},13:{n:"PtgGt",f:xn},14:{n:"PtgNe",f:xn},15:{n:"PtgIsect",f:xn},16:{n:"PtgUnion",f:xn},17:{n:"PtgRange",f:xn},18:{n:"PtgUplus",f:xn},19:{n:"PtgUminus",f:xn},20:{n:"PtgPercent",f:xn},21:{n:"PtgParen",f:xn},22:{n:"PtgMissArg",f:xn},23:{n:"PtgStr",f:nX},26:{n:"PtgSheet",f:FX},27:{n:"PtgEndSheet",f:AX},28:{n:"PtgErr",f:eX},29:{n:"PtgBool",f:rX},30:{n:"PtgInt",f:tX},31:{n:"PtgNum",f:iX},32:{n:"PtgArray",f:BZ},33:{n:"PtgFunc",f:ZZ},34:{n:"PtgFuncVar",f:XZ},35:{n:"PtgName",f:lX},36:{n:"PtgRef",f:$Z},37:{n:"PtgArea",f:DZ},38:{n:"PtgMemArea",f:hX},39:{n:"PtgMemErr",f:gX},40:{n:"PtgMemNoMem",f:mX},41:{n:"PtgMemFunc",f:dX},42:{n:"PtgRefErr",f:fX},43:{n:"PtgAreaErr",f:LZ},44:{n:"PtgRefN",f:qZ},45:{n:"PtgAreaN",f:NZ},46:{n:"PtgMemAreaN",f:IX},47:{n:"PtgMemNoMemN",f:DX},57:{n:"PtgNameX",f:cX},58:{n:"PtgRef3d",f:KZ},59:{n:"PtgArea3d",f:kZ},60:{n:"PtgRefErr3d",f:pX},61:{n:"PtgAreaErr3d",f:OZ},255:{}},LX={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},OX={1:{n:"PtgElfLel",f:FN},2:{n:"PtgElfRw",f:EX},3:{n:"PtgElfCol",f:yX},6:{n:"PtgElfRwV",f:RX},7:{n:"PtgElfColV",f:CX},10:{n:"PtgElfRadical",f:_X},11:{n:"PtgElfRadicalS",f:SX},13:{n:"PtgElfColS",f:wX},15:{n:"PtgElfColSV",f:xX},16:{n:"PtgElfRadicalLel",f:bX},25:{n:"PtgList",f:PX},29:{n:"PtgSxName",f:MX},255:{}},NX={0:{n:"PtgAttrNoop",f:kX},1:{n:"PtgAttrSemi",f:UZ},2:{n:"PtgAttrIf",f:VZ},4:{n:"PtgAttrChoose",f:zZ},8:{n:"PtgAttrGoto",f:GZ},16:{n:"PtgAttrSum",f:QZ},32:{n:"PtgAttrBaxcel",f:KI},33:{n:"PtgAttrBaxcel",f:KI},64:{n:"PtgAttrSpace",f:WZ},65:{n:"PtgAttrSpaceSemi",f:jZ},128:{n:"PtgAttrIfError",f:HZ},255:{}};function BX(e,t,r,i){if(i.biff<8)return Fl(e,t);for(var n=e.l+t,s=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=aX(e,0,i),s.push(r[a][1]);break;case"PtgMemArea":r[a][2]=oX(e,r[a][1],i),s.push(r[a][2]);break;case"PtgExp":i&&i.biff==12&&(r[a][1][1]=e.read_shift(4),s.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return t=n-e.l,t!==0&&s.push(Fl(e,t)),s}function zX(e,t,r){for(var i=e.l+t,n,s,a=[];i!=e.l;)t=i-e.l,s=e[e.l],n=ZI[s]||ZI[LX[s]],(s===24||s===25)&&(n=(s===24?OX:NX)[e[e.l+1]]),!n||!n.f?Fl(e,t):a.push([n.n,n.f(e,t,r)]);return a}function GX(e){for(var t=[],r=0;r<e.length;++r){for(var i=e[r],n=[],s=0;s<i.length;++s){var a=i[s];if(a)switch(a[0]){case 2:n.push('"'+a[1].replace(/"/g,'""')+'"');break;default:n.push(a[1])}else n.push("")}t.push(n.join(","))}return t.join(";")}var VX={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function HX(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function AN(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var i=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!i)return"SH33TJSERR1";var n="";if(r.biff>8)switch(e[i[0]][0]){case 357:return n=i[1]==-1?"#REF":e.SheetNames[i[1]],i[1]==i[2]?n:n+":"+e.SheetNames[i[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[i[0]][0];case 355:default:return"SH33TJSSRC"+e[i[0]][0]}switch(e[i[0]][0][0]){case 1025:return n=i[1]==-1?"#REF":e.SheetNames[i[1]]||"SH33TJSERR3",i[1]==i[2]?n:n+":"+e.SheetNames[i[2]];case 14849:return e[i[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[i[0]][0][3]?(n=i[1]==-1?"#REF":e[i[0]][0][3][i[1]]||"SH33TJSERR4",i[1]==i[2]?n:n+":"+e[i[0]][0][3][i[2]]):"SH33TJSERR2"}}function XI(e,t,r){var i=AN(e,t,r);return i=="#REF"?i:HX(i,r)}function Dp(e,t,r,i,n){var s=n&&n.biff||8,a={s:{c:0,r:0}},o=[],u,d,p,v=0,y=0,_,P="";if(!e[0]||!e[0][0])return"";for(var R=-1,M="",F=0,k=e[0].length;F<k;++F){var N=e[0][F];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=o.pop(),d=o.pop(),R>=0){switch(e[0][R][1][0]){case 0:M=nn(" ",e[0][R][1][1]);break;case 1:M=nn("\r",e[0][R][1][1]);break;default:if(M="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][R][1][0])}d=d+M,R=-1}o.push(d+VX[N[0]]+u);break;case"PtgIsect":u=o.pop(),d=o.pop(),o.push(d+" "+u);break;case"PtgUnion":u=o.pop(),d=o.pop(),o.push(d+","+u);break;case"PtgRange":u=o.pop(),d=o.pop(),o.push(d+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=e0(N[1][1],a,n),o.push(t0(p,s));break;case"PtgRefN":p=r?e0(N[1][1],r,n):N[1][1],o.push(t0(p,s));break;case"PtgRef3d":v=N[1][1],p=e0(N[1][2],a,n),P=XI(i,v,n),o.push(P+"!"+t0(p,s));break;case"PtgFunc":case"PtgFuncVar":var G=N[1][0],j=N[1][1];G||(G=0),G&=127;var ee=G==0?[]:o.slice(-G);o.length-=G,j==="User"&&(j=ee.shift()),o.push(j+"("+ee.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":_=kI(N[1][1],r?{s:r}:a,n),o.push(Yb(_,n));break;case"PtgArea":_=kI(N[1][1],a,n),o.push(Yb(_,n));break;case"PtgArea3d":v=N[1][1],_=N[1][2],P=XI(i,v,n),o.push(P+"!"+Yb(_,n));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":y=N[1][2];var q=(i.names||[])[y-1]||(i[0]||[])[y],oe=q?q.Name:"SH33TJSNAME"+String(y);oe&&oe.slice(0,6)=="_xlfn."&&!n.xlfn&&(oe=oe.slice(6)),o.push(oe);break;case"PtgNameX":var ue=N[1][1];y=N[1][2];var me;if(n.biff<=5)ue<0&&(ue=-ue),i[ue]&&(me=i[ue][y]);else{var ie="";if(((i[ue]||[])[0]||[])[0]==14849||(((i[ue]||[])[0]||[])[0]==1025?i[ue][y]&&i[ue][y].itab>0&&(ie=i.SheetNames[i[ue][y].itab-1]+"!"):ie=i.SheetNames[y-1]+"!"),i[ue]&&i[ue][y])ie+=i[ue][y].Name;else if(i[0]&&i[0][y])ie+=i[0][y].Name;else{var fe=(AN(i,ue,n)||"").split(";;");fe[y-1]?ie=fe[y-1]:ie+="SH33TJSERRX"}o.push(ie);break}me||(me={Name:"SH33TJSERRY"}),o.push(me.Name);break;case"PtgParen":var ke="(",et=")";if(R>=0){switch(M="",e[0][R][1][0]){case 2:ke=nn(" ",e[0][R][1][1])+ke;break;case 3:ke=nn("\r",e[0][R][1][1])+ke;break;case 4:et=nn(" ",e[0][R][1][1])+et;break;case 5:et=nn("\r",e[0][R][1][1])+et;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][R][1][0])}R=-1}o.push(ke+o.pop()+et);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":p={c:N[1][1],r:N[1][0]};var Xe={c:r.c,r:r.r};if(i.sharedf[ci(p)]){var ct=i.sharedf[ci(p)];o.push(Dp(ct,a,Xe,i,n))}else{var pt=!1;for(u=0;u!=i.arrayf.length;++u)if(d=i.arrayf[u],!(p.c<d[0].s.c||p.c>d[0].e.c)&&!(p.r<d[0].s.r||p.r>d[0].e.r)){o.push(Dp(d[1],a,Xe,i,n)),pt=!0;break}pt||o.push(N[1])}break;case"PtgArray":o.push("{"+GX(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":R=F;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var Ge=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&R>=0&&Ge.indexOf(e[0][F][0])==-1){N=e[0][R];var Ye=!0;switch(N[1][0]){case 4:Ye=!1;case 0:M=nn(" ",N[1][1]);break;case 5:Ye=!1;case 1:M=nn("\r",N[1][1]);break;default:if(M="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((Ye?M:"")+o.pop()+(Ye?"":M)),R=-1}}if(o.length>1&&n.WTF)throw new Error("bad formula stack");return o[0]}function UX(e){if(e==null){var t=mt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Jh(e);return Jh(0)}function WX(e,t,r,i,n){var s=ed(t,r,n),a=UX(e.v),o=mt(6),u=33;o.write_shift(2,u),o.write_shift(4,0);for(var d=mt(e.bf.length),p=0;p<e.bf.length;++p)d[p]=e.bf[p];var v=is([s,a,o,d]);return v}function E1(e,t,r){var i=e.read_shift(4),n=zX(e,i,r),s=e.read_shift(4),a=s>0?BX(e,s,n,r):null;return[n,a]}var jX=E1,R1=E1,$X=E1,qX=E1,KX={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},IN={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},ZX={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function XX(e){var t="of:="+e.replace(gT,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function YX(e){return e.replace(/\./,"!")}var r0=typeof Map<"u";function yT(e,t,r){var i=0,n=e.length;if(r){if(r0?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=r0?r.get(t):r[t];i<s.length;++i)if(e[s[i]].t===t)return e.Count++,s[i]}}else for(;i<n;++i)if(e[i].t===t)return e.Count++,i;return e[n]={t},e.Count++,e.Unique++,r&&(r0?(r.has(t)||r.set(t,[]),r.get(t).push(n)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(n))),n}function T1(e,t){var r={min:e+1,max:e+1},i=-1;return t.MDW&&(fc=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?i=dC(t.wpx):t.wch!=null&&(i=t.wch),i>-1?(r.width=YE(i),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function DN(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function $u(e,t,r){var i=r.revssf[t.z!=null?t.z:"General"],n=60,s=e.length;if(i==null&&r.ssf){for(;n<392;++n)if(r.ssf[n]==null){PO(t.z,n),r.ssf[n]=t.z,r.revssf[t.z]=i=n;break}}for(n=0;n!=s;++n)if(e[n].numFmtId===i)return n;return e[s]={numFmtId:i,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function QX(e,t,r){if(e&&e["!ref"]){var i=Di(e["!ref"]);if(i.e.c<i.s.c||i.e.r<i.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function JX(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+_n(e[r])+'"/>';return t+"</mergeCells>"}function eY(e,t,r,i,n){var s=!1,a={},o=null;if(i.bookType!=="xlsx"&&t.vbaraw){var u=t.SheetNames[r];try{t.Workbook&&(u=t.Workbook.Sheets[r].CodeName||u)}catch{}s=!0,a.codeName=N0(oi(u))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),o=(o||"")+Gt("outlinePr",null,d)}!s&&!o||(n[n.length]=Gt("sheetPr",o,a))}var tY=["objects","scenarios","selectLockedCells","selectUnlockedCells"],rY=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function iY(e){var t={sheet:1};return tY.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),rY.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=mN(e.password).toString(16).toUpperCase()),Gt("sheetProtection",null,t)}function nY(e){return DN(e),Gt("pageMargins",null,e)}function sY(e,t){for(var r=["<cols>"],i,n=0;n!=t.length;++n)(i=t[n])&&(r[r.length]=Gt("col",null,T1(n,i)));return r[r.length]="</cols>",r.join("")}function oY(e,t,r,i){var n=typeof e.ref=="string"?e.ref:_n(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,a=Wo(n);a.s.r==a.e.r&&(a.e.r=Wo(t["!ref"]).e.r,n=_n(a));for(var o=0;o<s.length;++o){var u=s[o];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==i){u.Ref="'"+r.SheetNames[i]+"'!"+n;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:i,Ref:"'"+r.SheetNames[i]+"'!"+n}),Gt("autoFilter",null,{ref:n})}function aY(e,t,r,i){var n={workbookViewId:"0"};return(((i||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=i.Workbook.Views[0].RTL?"1":"0"),Gt("sheetViews",Gt("sheetView",null,n),{})}function lY(e,t,r,i){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var n="",s=e.t,a=e.v;if(e.t!=="z")switch(e.t){case"b":n=e.v?"1":"0";break;case"n":n=""+e.v;break;case"e":n=wv[e.v];break;case"d":i&&i.cellDates?n=Qs(e.v,-1).toISOString():(e=_o(e),e.t="n",n=""+(e.v=Co(Qs(e.v)))),typeof e.z>"u"&&(e.z=on[14]);break;default:n=e.v;break}var o=ns("v",oi(n)),u={r:t},d=$u(i.cellXfs,e,i);switch(d!==0&&(u.s=d),e.t){case"n":break;case"d":u.t="d";break;case"b":u.t="b";break;case"e":u.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(i&&i.bookSST){o=ns("v",""+yT(i.Strings,e.v,i.revStrings)),u.t="s";break}u.t="str";break}if(e.t!=s&&(e.t=s,e.v=a),typeof e.f=="string"&&e.f){var p=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Gt("f",oi(e.f),p)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(u.cm=1),Gt("c",o,u)}function cY(e,t,r,i){var n=[],s=[],a=Di(e["!ref"]),o="",u,d="",p=[],v=0,y=0,_=e["!rows"],P=Array.isArray(e),R={r:d},M,F=-1;for(y=a.s.c;y<=a.e.c;++y)p[y]=Fs(y);for(v=a.s.r;v<=a.e.r;++v){for(s=[],d=ls(v),y=a.s.c;y<=a.e.c;++y){u=p[y]+d;var k=P?(e[v]||[])[y]:e[u];k!==void 0&&(o=lY(k,u,e,t))!=null&&s.push(o)}(s.length>0||_&&_[v])&&(R={r:d},_&&_[v]&&(M=_[v],M.hidden&&(R.hidden=1),F=-1,M.hpx?F=fC(M.hpx):M.hpt&&(F=M.hpt),F>-1&&(R.ht=F,R.customHeight=1),M.level&&(R.outlineLevel=M.level)),n[n.length]=Gt("row",s.join(""),R))}if(_)for(;v<_.length;++v)_&&_[v]&&(R={r:v+1},M=_[v],M.hidden&&(R.hidden=1),F=-1,M.hpx?F=fC(M.hpx):M.hpt&&(F=M.hpt),F>-1&&(R.ht=F,R.customHeight=1),M.level&&(R.outlineLevel=M.level),n[n.length]=Gt("row","",R));return n.join("")}function kN(e,t,r,i){var n=[bn,Gt("worksheet",null,{xmlns:qp[0],"xmlns:r":Hn.r})],s=r.SheetNames[e],a=0,o="",u=r.Sheets[s];u==null&&(u={});var d=u["!ref"]||"A1",p=Di(d);if(p.e.c>16383||p.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),d=_n(p)}i||(i={}),u["!comments"]=[];var v=[];eY(u,r,e,t,n),n[n.length]=Gt("dimension",null,{ref:d}),n[n.length]=aY(u,t,e,r),t.sheetFormat&&(n[n.length]=Gt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),u["!cols"]!=null&&u["!cols"].length>0&&(n[n.length]=sY(u,u["!cols"])),n[a=n.length]="<sheetData/>",u["!links"]=[],u["!ref"]!=null&&(o=cY(u,t),o.length>0&&(n[n.length]=o)),n.length>a+1&&(n[n.length]="</sheetData>",n[a]=n[a].replace("/>",">")),u["!protect"]&&(n[n.length]=iY(u["!protect"])),u["!autofilter"]!=null&&(n[n.length]=oY(u["!autofilter"],u,r,e)),u["!merges"]!=null&&u["!merges"].length>0&&(n[n.length]=JX(u["!merges"]));var y=-1,_,P=-1;return u["!links"].length>0&&(n[n.length]="<hyperlinks>",u["!links"].forEach(function(R){R[1].Target&&(_={ref:R[0]},R[1].Target.charAt(0)!="#"&&(P=ni(i,-1,oi(R[1].Target).replace(/#.*$/,""),qr.HLINK),_["r:id"]="rId"+P),(y=R[1].Target.indexOf("#"))>-1&&(_.location=oi(R[1].Target.slice(y+1))),R[1].Tooltip&&(_.tooltip=oi(R[1].Tooltip)),n[n.length]=Gt("hyperlink",null,_))}),n[n.length]="</hyperlinks>"),delete u["!links"],u["!margins"]!=null&&(n[n.length]=nY(u["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(n[n.length]=ns("ignoredErrors",Gt("ignoredError",null,{numberStoredAsText:1,sqref:d}))),v.length>0&&(P=ni(i,-1,"../drawings/drawing"+(e+1)+".xml",qr.DRAW),n[n.length]=Gt("drawing",null,{"r:id":"rId"+P}),u["!drawing"]=v),u["!comments"].length>0&&(P=ni(i,-1,"../drawings/vmlDrawing"+(e+1)+".vml",qr.VML),n[n.length]=Gt("legacyDrawing",null,{"r:id":"rId"+P}),u["!legacy"]=P),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}function uY(e,t){var r={},i=e.l+t;r.r=e.read_shift(4),e.l+=4;var n=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=i,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=n/20),r}function hY(e,t,r){var i=mt(145),n=(r["!rows"]||[])[e]||{};i.write_shift(4,e),i.write_shift(4,0);var s=320;n.hpx?s=fC(n.hpx)*20:n.hpt&&(s=n.hpt*20),i.write_shift(2,s),i.write_shift(1,0);var a=0;n.level&&(a|=n.level),n.hidden&&(a|=16),(n.hpx||n.hpt)&&(a|=32),i.write_shift(1,a),i.write_shift(1,0);var o=0,u=i.l;i.l+=4;for(var d={r:e,c:0},p=0;p<16;++p)if(!(t.s.c>p+1<<10||t.e.c<p<<10)){for(var v=-1,y=-1,_=p<<10;_<p+1<<10;++_){d.c=_;var P=Array.isArray(r)?(r[d.r]||[])[d.c]:r[ci(d)];P&&(v<0&&(v=_),y=_)}v<0||(++o,i.write_shift(4,v),i.write_shift(4,y))}var R=i.l;return i.l=u,i.write_shift(4,o),i.l=R,i.length>i.l?i.slice(0,i.l):i}function dY(e,t,r,i){var n=hY(i,r,t);(n.length>17||(t["!rows"]||[])[i])&&bt(e,0,n)}var fY=xd,pY=Zp;function gY(){}function mY(e,t){var r={},i=e[e.l];return++e.l,r.above=!(i&64),r.left=!(i&128),e.l+=18,r.name=Rq(e),r}function vY(e,t,r){r==null&&(r=mt(84+4*e.length));var i=192;t&&(t.above&&(i&=-65),t.left&&(i&=-129)),r.write_shift(1,i);for(var n=1;n<3;++n)r.write_shift(1,0);return cC({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),ZO(e,r),r.slice(0,r.l)}function yY(e){var t=_a(e);return[t]}function wY(e,t,r){return r==null&&(r=mt(8)),vd(t,r)}function xY(e){var t=yd(e);return[t]}function CY(e,t,r){return r==null&&(r=mt(4)),wd(t,r)}function _Y(e){var t=_a(e),r=e.read_shift(1);return[t,r,"b"]}function bY(e,t,r){return r==null&&(r=mt(9)),vd(t,r),r.write_shift(1,e.v?1:0),r}function SY(e){var t=yd(e),r=e.read_shift(1);return[t,r,"b"]}function EY(e,t,r){return r==null&&(r=mt(5)),wd(t,r),r.write_shift(1,e.v?1:0),r}function RY(e){var t=_a(e),r=e.read_shift(1);return[t,r,"e"]}function TY(e,t,r){return r==null&&(r=mt(9)),vd(t,r),r.write_shift(1,e.v),r}function PY(e){var t=yd(e),r=e.read_shift(1);return[t,r,"e"]}function MY(e,t,r){return r==null&&(r=mt(8)),wd(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function FY(e){var t=_a(e),r=e.read_shift(4);return[t,r,"s"]}function AY(e,t,r){return r==null&&(r=mt(12)),vd(t,r),r.write_shift(4,t.v),r}function IY(e){var t=yd(e),r=e.read_shift(4);return[t,r,"s"]}function DY(e,t,r){return r==null&&(r=mt(8)),wd(t,r),r.write_shift(4,t.v),r}function kY(e){var t=_a(e),r=Xp(e);return[t,r,"n"]}function LY(e,t,r){return r==null&&(r=mt(16)),vd(t,r),Jh(e.v,r),r}function OY(e){var t=yd(e),r=Xp(e);return[t,r,"n"]}function NY(e,t,r){return r==null&&(r=mt(12)),wd(t,r),Jh(e.v,r),r}function BY(e){var t=_a(e),r=XO(e);return[t,r,"n"]}function zY(e,t,r){return r==null&&(r=mt(12)),vd(t,r),YO(e.v,r),r}function GY(e){var t=yd(e),r=XO(e);return[t,r,"n"]}function VY(e,t,r){return r==null&&(r=mt(8)),wd(t,r),YO(e.v,r),r}function HY(e){var t=_a(e),r=uT(e);return[t,r,"is"]}function UY(e){var t=_a(e),r=As(e);return[t,r,"str"]}function WY(e,t,r){return r==null&&(r=mt(12+4*e.v.length)),vd(t,r),Wn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function jY(e){var t=yd(e),r=As(e);return[t,r,"str"]}function $Y(e,t,r){return r==null&&(r=mt(8+4*e.v.length)),wd(t,r),Wn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function qY(e,t,r){var i=e.l+t,n=_a(e);n.r=r["!row"];var s=e.read_shift(1),a=[n,s,"b"];if(r.cellFormula){e.l+=2;var o=R1(e,i-e.l,r);a[3]=Dp(o,null,n,r.supbooks,r)}else e.l=i;return a}function KY(e,t,r){var i=e.l+t,n=_a(e);n.r=r["!row"];var s=e.read_shift(1),a=[n,s,"e"];if(r.cellFormula){e.l+=2;var o=R1(e,i-e.l,r);a[3]=Dp(o,null,n,r.supbooks,r)}else e.l=i;return a}function ZY(e,t,r){var i=e.l+t,n=_a(e);n.r=r["!row"];var s=Xp(e),a=[n,s,"n"];if(r.cellFormula){e.l+=2;var o=R1(e,i-e.l,r);a[3]=Dp(o,null,n,r.supbooks,r)}else e.l=i;return a}function XY(e,t,r){var i=e.l+t,n=_a(e);n.r=r["!row"];var s=As(e),a=[n,s,"str"];if(r.cellFormula){e.l+=2;var o=R1(e,i-e.l,r);a[3]=Dp(o,null,n,r.supbooks,r)}else e.l=i;return a}var YY=xd,QY=Zp;function JY(e,t){return t==null&&(t=mt(4)),t.write_shift(4,e),t}function eQ(e,t){var r=e.l+t,i=xd(e),n=hT(e),s=As(e),a=As(e),o=As(e);e.l=r;var u={rfx:i,relId:n,loc:s,display:o};return a&&(u.Tooltip=a),u}function tQ(e,t){var r=mt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Zp({s:Un(e[0]),e:Un(e[0])},r),dT("rId"+t,r);var i=e[1].Target.indexOf("#"),n=i==-1?"":e[1].Target.slice(i+1);return Wn(n||"",r),Wn(e[1].Tooltip||"",r),Wn("",r),r.slice(0,r.l)}function rQ(){}function iQ(e,t,r){var i=e.l+t,n=QO(e),s=e.read_shift(1),a=[n];if(a[2]=s,r.cellFormula){var o=jX(e,i-e.l,r);a[1]=o}else e.l=i;return a}function nQ(e,t,r){var i=e.l+t,n=xd(e),s=[n];if(r.cellFormula){var a=qX(e,i-e.l,r);s[1]=a,e.l=i}else e.l=i;return s}function sQ(e,t,r){r==null&&(r=mt(18));var i=T1(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(i.width||10)*256),r.write_shift(4,0);var n=0;return t.hidden&&(n|=1),typeof i.width=="number"&&(n|=2),t.level&&(n|=t.level<<8),r.write_shift(2,n),r}var LN=["left","right","top","bottom","header","footer"];function oQ(e){var t={};return LN.forEach(function(r){t[r]=Xp(e)}),t}function aQ(e,t){return t==null&&(t=mt(6*8)),DN(e),LN.forEach(function(r){Jh(e[r],t)}),t}function lQ(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function cQ(e,t,r){r==null&&(r=mt(30));var i=924;return(((t||{}).Views||[])[0]||{}).RTL&&(i|=32),r.write_shift(2,i),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function uQ(e){var t=mt(24);return t.write_shift(4,4),t.write_shift(4,1),Zp(e,t),t}function hQ(e,t){return t==null&&(t=mt(16*4+2)),t.write_shift(2,e.password?mN(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function dQ(){}function fQ(){}function pQ(e,t,r,i,n,s,a){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=_o(t),t.z=t.z||on[14],t.v=Co(Qs(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var u={r,c:i};switch(u.s=$u(n.cellXfs,t,n),t.l&&s["!links"].push([ci(u),t.l]),t.c&&s["!comments"].push([ci(u),t.c]),t.t){case"s":case"str":return n.bookSST?(o=yT(n.Strings,t.v,n.revStrings),u.t="s",u.v=o,a?bt(e,18,DY(t,u)):bt(e,7,AY(t,u))):(u.t="str",a?bt(e,17,$Y(t,u)):bt(e,6,WY(t,u))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?a?bt(e,13,VY(t,u)):bt(e,2,zY(t,u)):a?bt(e,16,NY(t,u)):bt(e,5,LY(t,u)),!0;case"b":return u.t="b",a?bt(e,15,EY(t,u)):bt(e,4,bY(t,u)),!0;case"e":return u.t="e",a?bt(e,14,MY(t,u)):bt(e,3,TY(t,u)),!0}return a?bt(e,12,CY(t,u)):bt(e,1,wY(t,u)),!0}function gQ(e,t,r,i){var n=Di(t["!ref"]||"A1"),s,a="",o=[];bt(e,145);var u=Array.isArray(t),d=n.e.r;t["!rows"]&&(d=Math.max(n.e.r,t["!rows"].length-1));for(var p=n.s.r;p<=d;++p){a=ls(p),dY(e,t,n,p);var v=!1;if(p<=n.e.r)for(var y=n.s.c;y<=n.e.c;++y){p===n.s.r&&(o[y]=Fs(y)),s=o[y]+a;var _=u?(t[p]||[])[y]:t[s];if(!_){v=!1;continue}v=pQ(e,_,p,y,i,t,v)}}bt(e,146)}function mQ(e,t){!t||!t["!merges"]||(bt(e,177,JY(t["!merges"].length)),t["!merges"].forEach(function(r){bt(e,176,QY(r))}),bt(e,178))}function vQ(e,t){!t||!t["!cols"]||(bt(e,390),t["!cols"].forEach(function(r,i){r&&bt(e,60,sQ(i,r))}),bt(e,391))}function yQ(e,t){!t||!t["!ref"]||(bt(e,648),bt(e,649,uQ(Di(t["!ref"]))),bt(e,650))}function wQ(e,t,r){t["!links"].forEach(function(i){if(i[1].Target){var n=ni(r,-1,i[1].Target.replace(/#.*$/,""),qr.HLINK);bt(e,494,tQ(i,n))}}),delete t["!links"]}function xQ(e,t,r,i){if(t["!comments"].length>0){var n=ni(i,-1,"../drawings/vmlDrawing"+(r+1)+".vml",qr.VML);bt(e,551,dT("rId"+n)),t["!legacy"]=n}}function CQ(e,t,r,i){if(t["!autofilter"]){var n=t["!autofilter"],s=typeof n.ref=="string"?n.ref:_n(n.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=Wo(s);o.s.r==o.e.r&&(o.e.r=Wo(t["!ref"]).e.r,s=_n(o));for(var u=0;u<a.length;++u){var d=a[u];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==i){d.Ref="'"+r.SheetNames[i]+"'!"+s;break}}u==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:i,Ref:"'"+r.SheetNames[i]+"'!"+s}),bt(e,161,Zp(Di(s))),bt(e,162)}}function _Q(e,t,r){bt(e,133),bt(e,137,cQ(t,r)),bt(e,138),bt(e,134)}function bQ(e,t){t["!protect"]&&bt(e,535,hQ(t["!protect"]))}function SQ(e,t,r,i){var n=xo(),s=r.SheetNames[e],a=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var u=Di(a["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],bt(n,129),(r.vbaraw||a["!outline"])&&bt(n,147,vY(o,a["!outline"])),bt(n,148,pY(u)),_Q(n,a,r.Workbook),vQ(n,a),gQ(n,a,e,t),bQ(n,a),CQ(n,a,r,e),mQ(n,a),wQ(n,a,i),a["!margins"]&&bt(n,476,aQ(a["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&yQ(n,a),xQ(n,a,e,i),bt(n,130),n.end()}function EQ(e,t){e.l+=10;var r=As(e);return{name:r}}var RQ=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function TQ(e){return!e.Workbook||!e.Workbook.WBProps?"false":nq(e.Workbook.WBProps.date1904)?"true":"false"}var PQ="][*?/\\".split("");function ON(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return PQ.forEach(function(i){if(e.indexOf(i)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function MQ(e,t,r){e.forEach(function(i,n){ON(i);for(var s=0;s<n;++s)if(i==e[s])throw new Error("Duplicate Sheet Name: "+i);if(r){var a=t&&t[n]&&t[n].CodeName||i;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function FQ(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];MQ(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)QX(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function NN(e){var t=[bn];t[t.length]=Gt("workbook",null,{xmlns:qp[0],"xmlns:r":Hn.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,i={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(RQ.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(i[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(i.codeName=e.Workbook.WBProps.CodeName,delete i.CodeName)),t[t.length]=Gt("workbookPr",null,i);var n=e.Workbook&&e.Workbook.Sheets||[],s=0;if(n&&n[0]&&n[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!n[s]||!n[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var a={name:oi(e.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),n[s])switch(n[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}t[t.length]=Gt("sheet",null,a)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var u={name:o.Name};o.Comment&&(u.comment=o.Comment),o.Sheet!=null&&(u.localSheetId=""+o.Sheet),o.Hidden&&(u.hidden="1"),o.Ref&&(t[t.length]=Gt("definedName",oi(o.Ref),u))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function AQ(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=XE(e),r.name=As(e),r}function IQ(e,t){return t||(t=mt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),dT(e.strRelID,t),Wn(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function DQ(e,t){var r={},i=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var n=t>8?As(e):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(i&65536),r.backupFile=!!(i&64),r.checkCompatibility=!!(i&4096),r.date1904=!!(i&1),r.filterPrivacy=!!(i&8),r.hidePivotFieldList=!!(i&1024),r.promptedSolutions=!!(i&16),r.publishItems=!!(i&2048),r.refreshAllConnections=!!(i&262144),r.saveExternalLinkValues=!!(i&128),r.showBorderUnselectedTables=!!(i&4),r.showInkAnnotation=!!(i&32),r.showObjects=["all","placeholders","none"][i>>13&3],r.showPivotChartFilter=!!(i&32768),r.updateLinks=["userSet","never","always"][i>>8&3],r}function kQ(e,t){t||(t=mt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),ZO(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function LQ(e,t,r){var i=e.l+t;e.l+=4,e.l+=1;var n=e.read_shift(4),s=Tq(e),a=$X(e,0,r),o=hT(e);e.l=i;var u={Name:s,Ptg:a};return n<268435455&&(u.Sheet=n),o&&(u.Comment=o),u}function OQ(e,t){bt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var i=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,n={Hidden:i,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};bt(e,156,IQ(n))}bt(e,144)}function NQ(e,t){t||(t=mt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Wn("SheetJS",t),Wn(tC.version,t),Wn(tC.version,t),Wn("7262",t),t.length>t.l?t.slice(0,t.l):t}function BQ(e,t){t||(t=mt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function zQ(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,i=0,n=-1,s=-1;i<r.length;++i)!r[i]||!r[i].Hidden&&n==-1?n=i:r[i].Hidden==1&&s==-1&&(s=i);s>n||(bt(e,135),bt(e,158,BQ(n)),bt(e,136))}}function GQ(e,t){var r=xo();return bt(r,131),bt(r,128,NQ()),bt(r,153,kQ(e.Workbook&&e.Workbook.WBProps||null)),zQ(r,e),OQ(r,e),bt(r,132),r.end()}function VQ(e,t,r){return(t.slice(-4)===".bin"?GQ:NN)(e)}function HQ(e,t,r,i,n){return(t.slice(-4)===".bin"?SQ:kN)(e,r,i,n)}function UQ(e,t,r){return(t.slice(-4)===".bin"?aZ:wN)(e,r)}function WQ(e,t,r){return(t.slice(-4)===".bin"?kK:gN)(e,r)}function jQ(e,t,r){return(t.slice(-4)===".bin"?bZ:SN)(e)}function $Q(e){return(e.slice(-4)===".bin"?gZ:_N)()}function qQ(e,t){var r=[];return e.Props&&r.push(Uq(e.Props,t)),e.Custprops&&r.push(Wq(e.Props,e.Custprops)),r.join("")}function KQ(){return""}function ZQ(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(i,n){var s=[];s.push(Gt("NumberFormat",null,{"ss:Format":oi(on[i.numFmtId])}));var a={"ss:ID":"s"+(21+n)};r.push(Gt("Style",s.join(""),a))}),Gt("Styles",r.join(""))}function BN(e){return Gt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+mT(e.Ref,{r:0,c:0})})}function XQ(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],i=0;i<t.length;++i){var n=t[i];n.Sheet==null&&(n.Name.match(/^_xlfn\./)||r.push(BN(n)))}return Gt("Names",r.join(""))}function YQ(e,t,r,i){if(!e||!((i||{}).Workbook||{}).Names)return"";for(var n=i.Workbook.Names,s=[],a=0;a<n.length;++a){var o=n[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(BN(o)))}return s.join("")}function QQ(e,t,r,i){if(!e)return"";var n=[];if(e["!margins"]&&(n.push("<PageSetup>"),e["!margins"].header&&n.push(Gt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&n.push(Gt("Footer",null,{"x:Margin":e["!margins"].footer})),n.push(Gt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),n.push("</PageSetup>")),i&&i.Workbook&&i.Workbook.Sheets&&i.Workbook.Sheets[r])if(i.Workbook.Sheets[r].Hidden)n.push(Gt("Visible",i.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(i.Workbook.Sheets[s]&&!i.Workbook.Sheets[s].Hidden);++s);s==r&&n.push("<Selected/>")}return((((i||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),e["!protect"]&&(n.push(ns("ProtectContents","True")),e["!protect"].objects&&n.push(ns("ProtectObjects","True")),e["!protect"].scenarios&&n.push(ns("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?n.push(ns("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&n.push(ns("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){e["!protect"][a[0]]&&n.push("<"+a[1]+"/>")})),n.length==0?"":Gt("WorksheetOptions",n.join(""),{xmlns:ko.x})}function JQ(e){return e.map(function(t){var r=iq(t.t||""),i=Gt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Gt("Comment",i,{"ss:Author":t.a})}).join("")}function eJ(e,t,r,i,n,s,a){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+oi(mT(e.f,a))),e.F&&e.F.slice(0,t.length)==t){var u=Un(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(u.r==a.r?"":"["+(u.r-a.r)+"]")+"C"+(u.c==a.c?"":"["+(u.c-a.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=oi(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=oi(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],p=0;p!=d.length;++p)d[p].s.c!=a.c||d[p].s.r!=a.r||(d[p].e.c>d[p].s.c&&(o["ss:MergeAcross"]=d[p].e.c-d[p].s.c),d[p].e.r>d[p].s.r&&(o["ss:MergeDown"]=d[p].e.r-d[p].s.r));var v="",y="";switch(e.t){case"z":if(!i.sheetStubs)return"";break;case"n":v="Number",y=String(e.v);break;case"b":v="Boolean",y=e.v?"1":"0";break;case"e":v="Error",y=wv[e.v];break;case"d":v="DateTime",y=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||on[14]);break;case"s":v="String",y=rq(e.v||"");break}var _=$u(i.cellXfs,e,i);o["ss:StyleID"]="s"+(21+_),o["ss:Index"]=a.c+1;var P=e.v!=null?y:"",R=e.t=="z"?"":'<Data ss:Type="'+v+'">'+P+"</Data>";return(e.c||[]).length>0&&(R+=JQ(e.c)),Gt("Cell",R,o)}function tJ(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=yN(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function rJ(e,t,r,i){if(!e["!ref"])return"";var n=Di(e["!ref"]),s=e["!merges"]||[],a=0,o=[];e["!cols"]&&e["!cols"].forEach(function(M,F){pT(M);var k=!!M.width,N=T1(F,M),G={"ss:Index":F+1};k&&(G["ss:Width"]=hC(N.width)),M.hidden&&(G["ss:Hidden"]="1"),o.push(Gt("Column",null,G))});for(var u=Array.isArray(e),d=n.s.r;d<=n.e.r;++d){for(var p=[tJ(d,(e["!rows"]||[])[d])],v=n.s.c;v<=n.e.c;++v){var y=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>v)&&!(s[a].s.r>d)&&!(s[a].e.c<v)&&!(s[a].e.r<d)){(s[a].s.c!=v||s[a].s.r!=d)&&(y=!0);break}if(!y){var _={r:d,c:v},P=ci(_),R=u?(e[d]||[])[v]:e[P];p.push(eJ(R,P,e,t,r,i,_))}}p.push("</Row>"),p.length>2&&o.push(p.join(""))}return o.join("")}function iJ(e,t,r){var i=[],n=r.SheetNames[e],s=r.Sheets[n],a=s?YQ(s,t,e,r):"";return a.length>0&&i.push("<Names>"+a+"</Names>"),a=s?rJ(s,t,e,r):"",a.length>0&&i.push("<Table>"+a+"</Table>"),i.push(QQ(s,t,e,r)),i.join("")}function nJ(e,t){t||(t={}),e.SSF||(e.SSF=_o(on)),e.SSF&&(_1(),C1(e.SSF),t.revssf=b1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],$u(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(qQ(e,t)),r.push(KQ()),r.push(""),r.push("");for(var i=0;i<e.SheetNames.length;++i)r.push(Gt("Worksheet",iJ(i,t,e),{"ss:Name":oi(e.SheetNames[i])}));return r[2]=ZQ(e,t),r[3]=XQ(e),bn+Gt("Workbook",r.join(""),{xmlns:ko.ss,"xmlns:o":ko.o,"xmlns:x":ko.x,"xmlns:ss":ko.ss,"xmlns:dt":ko.dt,"xmlns:html":ko.html})}var eS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function sJ(e,t){var r=[],i=[],n=[],s=0,a,o=bI(OI,"n"),u=bI(NI,"n");if(e.Props)for(a=hs(e.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(u,a[s])?i:n).push([a[s],e.Props[a[s]]]);if(e.Custprops)for(a=hs(e.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?r:Object.prototype.hasOwnProperty.call(u,a[s])?i:n).push([a[s],e.Custprops[a[s]]]);var d=[];for(s=0;s<n.length;++s)lN.indexOf(n[s][0])>-1||sN.indexOf(n[s][0])>-1||n[s][1]!=null&&d.push(n[s]);i.length&&pi.utils.cfb_add(t,"/SummaryInformation",HI(i,eS.SI,u,NI)),(r.length||d.length)&&pi.utils.cfb_add(t,"/DocumentSummaryInformation",HI(r,eS.DSI,o,OI,d.length?d:null,eS.UDI))}function oJ(e,t){var r=t||{},i=pi.utils.cfb_new({root:"R"}),n="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":n="/Workbook",r.biff=8;break;case"biff5":n="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return pi.utils.cfb_add(i,n,zN(e,r)),r.biff==8&&(e.Props||e.Custprops)&&sJ(e,i),r.biff==8&&e.vbaraw&&SZ(i,pi.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),i}var aJ={0:{f:uY},1:{f:yY},2:{f:BY},3:{f:RY},4:{f:_Y},5:{f:kY},6:{f:UY},7:{f:FY},8:{f:XY},9:{f:ZY},10:{f:qY},11:{f:KY},12:{f:xY},13:{f:GY},14:{f:PY},15:{f:SY},16:{f:OY},17:{f:jY},18:{f:IY},19:{f:uT},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:LQ},40:{},42:{},43:{f:UK},44:{f:VK},45:{f:$K},46:{f:KK},47:{f:qK},48:{},49:{f:xq},50:{},51:{f:uZ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:CK},62:{f:HY},63:{f:mZ},64:{f:dQ},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Fl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:lQ},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:mY},148:{f:fY,p:16},151:{f:rQ},152:{},153:{f:DQ},154:{},155:{},156:{f:AQ},157:{},158:{},159:{T:1,f:AK},160:{T:-1},161:{T:1,f:xd},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:YY},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:lZ},336:{T:-1},337:{f:fZ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:XE},357:{},358:{},359:{},360:{T:1},361:{},362:{f:gK},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:iQ},427:{f:nQ},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:oQ},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:gY},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:eQ},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:XE},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:CZ},633:{T:1},634:{T:-1},635:{T:1,f:wZ},636:{T:-1},637:{f:Sq},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:EQ},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:fQ},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ut(e,t,r,i){var n=t;if(!isNaN(n)){var s=i||(r||[]).length||0,a=e.next(4);a.write_shift(2,n),a.write_shift(2,s),s>0&&aT(r)&&e.push(r)}}function lJ(e,t,r,i){var n=(r||[]).length||0;if(n<=8224)return Ut(e,t,r,n);var s=t;if(!isNaN(s)){for(var a=r.parts||[],o=0,u=0,d=0;d+(a[o]||8224)<=8224;)d+=a[o]||8224,o++;var p=e.next(4);for(p.write_shift(2,s),p.write_shift(2,d),e.push(r.slice(u,u+d)),u+=d;u<n;){for(p=e.next(4),p.write_shift(2,60),d=0;d+(a[o]||8224)<=8224;)d+=a[o]||8224,o++;p.write_shift(2,d),e.push(r.slice(u,u+d)),u+=d}}}function Cv(e,t,r){return e||(e=mt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function cJ(e,t,r,i){var n=mt(9);return Cv(n,e,t),uN(r,i||"b",n),n}function uJ(e,t,r){var i=mt(8+2*r.length);return Cv(i,e,t),i.write_shift(1,r.length),i.write_shift(r.length,r,"sbcs"),i.l<i.length?i.slice(0,i.l):i}function hJ(e,t,r,i){if(t.v!=null)switch(t.t){case"d":case"n":var n=t.t=="d"?Co(Qs(t.v)):t.v;n==(n|0)&&n>=0&&n<65536?Ut(e,2,EK(r,i,n)):Ut(e,3,SK(r,i,n));return;case"b":case"e":Ut(e,5,cJ(r,i,t.v,t.t));return;case"s":case"str":Ut(e,4,uJ(r,i,(t.v||"").slice(0,255)));return}Ut(e,1,Cv(null,r,i))}function dJ(e,t,r,i){var n=Array.isArray(t),s=Di(t["!ref"]||"A1"),a,o="",u=[];if(s.e.c>255||s.e.r>16383){if(i.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=_n(s)}for(var d=s.s.r;d<=s.e.r;++d){o=ls(d);for(var p=s.s.c;p<=s.e.c;++p){d===s.s.r&&(u[p]=Fs(p)),a=u[p]+o;var v=n?(t[d]||[])[p]:t[a];v&&hJ(e,v,d,p)}}}function fJ(e,t){for(var r=t||{},i=xo(),n=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(n=s);if(n==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ut(i,r.biff==4?1033:r.biff==3?521:9,fT(e,16,r)),dJ(i,e.Sheets[e.SheetNames[n]],n,r),Ut(i,10),i.end()}function pJ(e,t,r){Ut(e,49,aK({sz:12,name:"Arial"},r))}function gJ(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(i){for(var n=i[0];n<=i[1];++n)t[n]!=null&&Ut(e,1054,uK(n,t[n],r))})}function mJ(e,t){var r=mt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ut(e,2151,r),r=mt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),fN(Di(t["!ref"]||"A1"),r),r.write_shift(4,4),Ut(e,2152,r)}function vJ(e,t){for(var r=0;r<16;++r)Ut(e,224,WI({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(i){Ut(e,224,WI(i,0,t))})}function yJ(e,t){for(var r=0;r<t["!links"].length;++r){var i=t["!links"][r];Ut(e,440,yK(i)),i[1].Tooltip&&Ut(e,2048,wK(i))}delete t["!links"]}function wJ(e,t){if(t){var r=0;t.forEach(function(i,n){++r<=256&&i&&Ut(e,125,_K(T1(n,i),n))})}}function xJ(e,t,r,i,n){var s=16+$u(n.cellXfs,t,n);if(t.v==null&&!t.bf){Ut(e,513,ed(r,i,s));return}if(t.bf)Ut(e,6,WX(t,r,i,n,s));else switch(t.t){case"d":case"n":var a=t.t=="d"?Co(Qs(t.v)):t.v;Ut(e,515,pK(r,i,a,s));break;case"b":case"e":Ut(e,517,fK(r,i,t.v,s,n,t.t));break;case"s":case"str":if(n.bookSST){var o=yT(n.Strings,t.v,n.revStrings);Ut(e,253,lK(r,i,o,s))}else Ut(e,516,cK(r,i,(t.v||"").slice(0,255),s,n));break;default:Ut(e,513,ed(r,i,s))}}function CJ(e,t,r){var i=xo(),n=r.SheetNames[e],s=r.Sheets[n]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[e]||{},u=Array.isArray(s),d=t.biff==8,p,v="",y=[],_=Di(s["!ref"]||"A1"),P=d?65536:16384;if(_.e.c>255||_.e.r>=P){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");_.e.c=Math.min(_.e.c,255),_.e.r=Math.min(_.e.c,P-1)}Ut(i,2057,fT(r,16,t)),Ut(i,13,la(1)),Ut(i,12,la(100)),Ut(i,15,Ks(!0)),Ut(i,17,Ks(!1)),Ut(i,16,Jh(.001)),Ut(i,95,Ks(!0)),Ut(i,42,Ks(!1)),Ut(i,43,Ks(!1)),Ut(i,130,la(1)),Ut(i,128,dK()),Ut(i,131,Ks(!1)),Ut(i,132,Ks(!1)),d&&wJ(i,s["!cols"]),Ut(i,512,hK(_,t)),d&&(s["!links"]=[]);for(var R=_.s.r;R<=_.e.r;++R){v=ls(R);for(var M=_.s.c;M<=_.e.c;++M){R===_.s.r&&(y[M]=Fs(M)),p=y[M]+v;var F=u?(s[R]||[])[M]:s[p];F&&(xJ(i,F,R,M,t),d&&F.l&&s["!links"].push([p,F.l]))}}var k=o.CodeName||o.name||n;return d&&Ut(i,574,oK((a.Views||[])[0])),d&&(s["!merges"]||[]).length&&Ut(i,229,vK(s["!merges"])),d&&yJ(i,s),Ut(i,442,dN(k)),d&&mJ(i,s),Ut(i,10),i.end()}function _J(e,t,r){var i=xo(),n=(e||{}).Workbook||{},s=n.Sheets||[],a=n.WBProps||{},o=r.biff==8,u=r.biff==5;if(Ut(i,2057,fT(e,5,r)),r.bookType=="xla"&&Ut(i,135),Ut(i,225,o?la(1200):null),Ut(i,193,qq(2)),u&&Ut(i,191),u&&Ut(i,192),Ut(i,226),Ut(i,92,rK("SheetJS",r)),Ut(i,66,la(o?1200:1252)),o&&Ut(i,353,la(0)),o&&Ut(i,448),Ut(i,317,bK(e.SheetNames.length)),o&&e.vbaraw&&Ut(i,211),o&&e.vbaraw){var d=a.CodeName||"ThisWorkbook";Ut(i,442,dN(d))}Ut(i,156,la(17)),Ut(i,25,Ks(!1)),Ut(i,18,Ks(!1)),Ut(i,19,la(0)),o&&Ut(i,431,Ks(!1)),o&&Ut(i,444,la(0)),Ut(i,61,sK()),Ut(i,64,Ks(!1)),Ut(i,141,la(0)),Ut(i,34,Ks(TQ(e)=="true")),Ut(i,14,Ks(!0)),o&&Ut(i,439,Ks(!1)),Ut(i,218,la(0)),pJ(i,e,r),gJ(i,e.SSF,r),vJ(i,r),o&&Ut(i,352,Ks(!1));var p=i.end(),v=xo();o&&Ut(v,140,xK()),o&&r.Strings&&lJ(v,252,nK(r.Strings)),Ut(v,10);var y=v.end(),_=xo(),P=0,R=0;for(R=0;R<e.SheetNames.length;++R)P+=(o?12:11)+(o?2:1)*e.SheetNames[R].length;var M=p.length+P+y.length;for(R=0;R<e.SheetNames.length;++R){var F=s[R]||{};Ut(_,133,iK({pos:M,hs:F.Hidden||0,dt:0,name:e.SheetNames[R]},r)),M+=t[R].length}var k=_.end();if(P!=k.length)throw new Error("BS8 "+P+" != "+k.length);var N=[];return p.length&&N.push(p),k.length&&N.push(k),y.length&&N.push(y),is(N)}function bJ(e,t){var r=t||{},i=[];e&&!e.SSF&&(e.SSF=_o(on)),e&&e.SSF&&(_1(),C1(e.SSF),r.revssf=b1(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,wT(r),r.cellXfs=[],$u(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var n=0;n<e.SheetNames.length;++n)i[i.length]=CJ(n,r,e);return i.unshift(_J(e,i,r)),is(i)}function zN(e,t){for(var r=0;r<=e.SheetNames.length;++r){var i=e.Sheets[e.SheetNames[r]];if(!(!i||!i["!ref"])){var n=Wo(i["!ref"]);n.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return bJ(e,t);case 4:case 3:case 2:return fJ(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function SJ(e,t,r,i){for(var n=e["!merges"]||[],s=[],a=t.s.c;a<=t.e.c;++a){for(var o=0,u=0,d=0;d<n.length;++d)if(!(n[d].s.r>r||n[d].s.c>a)&&!(n[d].e.r<r||n[d].e.c<a)){if(n[d].s.r<r||n[d].s.c<a){o=-1;break}o=n[d].e.r-n[d].s.r+1,u=n[d].e.c-n[d].s.c+1;break}if(!(o<0)){var p=ci({r,c:a}),v=i.dense?(e[r]||[])[a]:e[p],y=v&&v.v!=null&&(v.h||tq(v.w||(_c(v),v.w)||""))||"",_={};o>1&&(_.rowspan=o),u>1&&(_.colspan=u),i.editable?y='<span contenteditable="true">'+y+"</span>":v&&(_["data-t"]=v&&v.t||"z",v.v!=null&&(_["data-v"]=v.v),v.z!=null&&(_["data-z"]=v.z),v.l&&(v.l.Target||"#").charAt(0)!="#"&&(y='<a href="'+v.l.Target+'">'+y+"</a>")),_.id=(i.id||"sjs")+"-"+p,s.push(Gt("td",y,_))}}var P="<tr>";return P+s.join("")+"</tr>"}var EJ='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',RJ="</body></html>";function TJ(e,t,r){var i=[];return i.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function GN(e,t){var r=t||{},i=r.header!=null?r.header:EJ,n=r.footer!=null?r.footer:RJ,s=[i],a=Wo(e["!ref"]);r.dense=Array.isArray(e),s.push(TJ(e,a,r));for(var o=a.s.r;o<=a.e.r;++o)s.push(SJ(e,a,o,r));return s.push("</table>"+n),s.join("")}function VN(e,t,r){var i=r||{},n=0,s=0;if(i.origin!=null)if(typeof i.origin=="number")n=i.origin;else{var a=typeof i.origin=="string"?Un(i.origin):i.origin;n=a.r,s=a.c}var o=t.getElementsByTagName("tr"),u=Math.min(i.sheetRows||1e7,o.length),d={s:{r:0,c:0},e:{r:n,c:s}};if(e["!ref"]){var p=Wo(e["!ref"]);d.s.r=Math.min(d.s.r,p.s.r),d.s.c=Math.min(d.s.c,p.s.c),d.e.r=Math.max(d.e.r,p.e.r),d.e.c=Math.max(d.e.c,p.e.c),n==-1&&(d.e.r=n=p.e.r+1)}var v=[],y=0,_=e["!rows"]||(e["!rows"]=[]),P=0,R=0,M=0,F=0,k=0,N=0;for(e["!cols"]||(e["!cols"]=[]);P<o.length&&R<u;++P){var G=o[P];if(YI(G)){if(i.display)continue;_[R]={hidden:!0}}var j=G.children;for(M=F=0;M<j.length;++M){var ee=j[M];if(!(i.display&&YI(ee))){var q=ee.hasAttribute("data-v")?ee.getAttribute("data-v"):ee.hasAttribute("v")?ee.getAttribute("v"):sq(ee.innerHTML),oe=ee.getAttribute("data-z")||ee.getAttribute("z");for(y=0;y<v.length;++y){var ue=v[y];ue.s.c==F+s&&ue.s.r<R+n&&R+n<=ue.e.r&&(F=ue.e.c+1-s,y=-1)}N=+ee.getAttribute("colspan")||1,((k=+ee.getAttribute("rowspan")||1)>1||N>1)&&v.push({s:{r:R+n,c:F+s},e:{r:R+n+(k||1)-1,c:F+s+(N||1)-1}});var me={t:"s",v:q},ie=ee.getAttribute("data-t")||ee.getAttribute("t")||"";q!=null&&(q.length==0?me.t=ie||"z":i.raw||q.trim().length==0||ie=="s"||(q==="TRUE"?me={t:"b",v:!0}:q==="FALSE"?me={t:"b",v:!1}:isNaN(dc(q))?isNaN(O0(q).getDate())||(me={t:"d",v:Qs(q)},i.cellDates||(me={t:"n",v:Co(me.v)}),me.z=i.dateNF||on[14]):me={t:"n",v:dc(q)})),me.z===void 0&&oe!=null&&(me.z=oe);var fe="",ke=ee.getElementsByTagName("A");if(ke&&ke.length)for(var et=0;et<ke.length&&!(ke[et].hasAttribute("href")&&(fe=ke[et].getAttribute("href"),fe.charAt(0)!="#"));++et);fe&&fe.charAt(0)!="#"&&(me.l={Target:fe}),i.dense?(e[R+n]||(e[R+n]=[]),e[R+n][F+s]=me):e[ci({c:F+s,r:R+n})]=me,d.e.c<F+s&&(d.e.c=F+s),F+=N}}++R}return v.length&&(e["!merges"]=(e["!merges"]||[]).concat(v)),d.e.r=Math.max(d.e.r,R-1+n),e["!ref"]=_n(d),R>=u&&(e["!fullref"]=_n((d.e.r=o.length-P+R-1+n,d))),e}function HN(e,t){var r=t||{},i=r.dense?[]:{};return VN(i,e,t)}function PJ(e,t){return md(HN(e,t),t)}function YI(e){var t="",r=MJ(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function MJ(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var FJ=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+B0({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return bn+t}}(),QI=function(){var e=function(s){return oi(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,i=function(s,a,o){var u=[];u.push('      <table:table table:name="'+oi(a.SheetNames[o])+`" table:style-name="ta1">
`);var d=0,p=0,v=Wo(s["!ref"]||"A1"),y=s["!merges"]||[],_=0,P=Array.isArray(s);if(s["!cols"])for(p=0;p<=v.e.c;++p)u.push("        <table:table-column"+(s["!cols"][p]?' table:style-name="co'+s["!cols"][p].ods+'"':"")+`></table:table-column>
`);var R="",M=s["!rows"]||[];for(d=0;d<v.s.r;++d)R=M[d]?' table:style-name="ro'+M[d].ods+'"':"",u.push("        <table:table-row"+R+`></table:table-row>
`);for(;d<=v.e.r;++d){for(R=M[d]?' table:style-name="ro'+M[d].ods+'"':"",u.push("        <table:table-row"+R+`>
`),p=0;p<v.s.c;++p)u.push(t);for(;p<=v.e.c;++p){var F=!1,k={},N="";for(_=0;_!=y.length;++_)if(!(y[_].s.c>p)&&!(y[_].s.r>d)&&!(y[_].e.c<p)&&!(y[_].e.r<d)){(y[_].s.c!=p||y[_].s.r!=d)&&(F=!0),k["table:number-columns-spanned"]=y[_].e.c-y[_].s.c+1,k["table:number-rows-spanned"]=y[_].e.r-y[_].s.r+1;break}if(F){u.push(r);continue}var G=ci({r:d,c:p}),j=P?(s[d]||[])[p]:s[G];if(j&&j.f&&(k["table:formula"]=oi(XX(j.f)),j.F&&j.F.slice(0,G.length)==G)){var ee=Wo(j.F);k["table:number-matrix-columns-spanned"]=ee.e.c-ee.s.c+1,k["table:number-matrix-rows-spanned"]=ee.e.r-ee.s.r+1}if(!j){u.push(t);continue}switch(j.t){case"b":N=j.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=j.v?"true":"false";break;case"n":N=j.w||String(j.v||0),k["office:value-type"]="float",k["office:value"]=j.v||0;break;case"s":case"str":N=j.v==null?"":j.v,k["office:value-type"]="string";break;case"d":N=j.w||Qs(j.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=Qs(j.v).toISOString(),k["table:style-name"]="ce1";break;default:u.push(t);continue}var q=e(N);if(j.l&&j.l.Target){var oe=j.l.Target;oe=oe.charAt(0)=="#"?"#"+YX(oe.slice(1)):oe,oe.charAt(0)!="#"&&!oe.match(/^\w+:/)&&(oe="../"+oe),q=Gt("text:a",q,{"xlink:href":oe.replace(/&/g,"&amp;")})}u.push("          "+Gt("table:table-cell",Gt("text:p",q,{}),k)+`
`)}u.push(`        </table:table-row>
`)}return u.push(`      </table:table>
`),u.join("")},n=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(d){return a.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var p=0;p<d["!cols"].length;++p)if(d["!cols"][p]){var v=d["!cols"][p];if(v.width==null&&v.wpx==null&&v.wch==null)continue;pT(v),v.ods=o;var y=d["!cols"][p].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+y+`"/>
`),s.push(`  </style:style>
`),++o}}});var u=0;a.SheetNames.map(function(d){return a.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var p=0;p<d["!rows"].length;++p)if(d["!rows"][p]){d["!rows"][p].ods=u;var v=d["!rows"][p].hpx+"px";s.push('  <style:style style:name="ro'+u+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+v+`"/>
`),s.push(`  </style:style>
`),++u}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var u=[bn],d=B0({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=B0({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(u.push("<office:document"+d+p+`>
`),u.push(iN().replace(/office:document-meta/g,"office:meta"))):u.push("<office:document-content"+d+`>
`),n(u,a),u.push(`  <office:body>
`),u.push(`    <office:spreadsheet>
`);for(var v=0;v!=a.SheetNames.length;++v)u.push(i(a.Sheets[a.SheetNames[v]],a,v));return u.push(`    </office:spreadsheet>
`),u.push(`  </office:body>
`),o.bookType=="fods"?u.push("</office:document>"):u.push("</office:document-content>"),u.join("")}}();function UN(e,t){if(t.bookType=="fods")return QI(e,t);var r=iT(),i="",n=[],s=[];return i="mimetype",Lr(r,i,"application/vnd.oasis.opendocument.spreadsheet"),i="content.xml",Lr(r,i,QI(e,t)),n.push([i,"text/xml"]),s.push([i,"ContentFile"]),i="styles.xml",Lr(r,i,FJ(e,t)),n.push([i,"text/xml"]),s.push([i,"StylesFile"]),i="meta.xml",Lr(r,i,bn+iN()),n.push([i,"text/xml"]),s.push([i,"MetadataFile"]),i="manifest.rdf",Lr(r,i,Hq(s)),n.push([i,"application/rdf+xml"]),i="META-INF/manifest.xml",Lr(r,i,Gq(n)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function pC(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function AJ(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):za(N0(e))}function IJ(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var i=0;i<t.length;++i)if(e[r+i]!=t[i])continue e;return!0}return!1}function Iu(e){var t=e.reduce(function(n,s){return n+s.length},0),r=new Uint8Array(t),i=0;return e.forEach(function(n){r.set(n,i),i+=n.length}),r}function DJ(e,t,r){var i=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,n=r/Math.pow(10,i-6176);e[t+15]|=i>>7,e[t+14]|=(i&127)<<1;for(var s=0;n>=1;++s,n/=256)e[t+s]=n&255;e[t+15]|=r>=0?0:128}function z0(e,t){var r=t?t[0]:0,i=e[r]&127;e:if(e[r++]>=128&&(i|=(e[r]&127)<<7,e[r++]<128||(i|=(e[r]&127)<<14,e[r++]<128)||(i|=(e[r]&127)<<21,e[r++]<128)||(i+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(i+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(i+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),i}function ii(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ap(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Pn(e){for(var t=[],r=[0];r[0]<e.length;){var i=r[0],n=z0(e,r),s=n&7;n=Math.floor(n/8);var a=0,o;if(n==0)break;switch(s){case 0:{for(var u=r[0];e[r[0]++]>=128;);o=e.slice(u,r[0])}break;case 5:a=4,o=e.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=e.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=z0(e,r),o=e.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(n," at offset ").concat(i))}var d={data:o,type:s};t[n]==null?t[n]=[d]:t[n].push(d)}return t}function Jn(e){var t=[];return e.forEach(function(r,i){r.forEach(function(n){n.data&&(t.push(ii(i*8+n.type)),n.type==2&&t.push(ii(n.data.length)),t.push(n.data))})}),Iu(t)}function Da(e){for(var t,r=[],i=[0];i[0]<e.length;){var n=z0(e,i),s=Pn(e.slice(i[0],i[0]+n));i[0]+=n;var a={id:ap(s[1][0].data),messages:[]};s[2].forEach(function(o){var u=Pn(o.data),d=ap(u[3][0].data);a.messages.push({meta:u,data:e.slice(i[0],i[0]+d)}),i[0]+=d}),(t=s[3])!=null&&t[0]&&(a.merge=ap(s[3][0].data)>>>0>0),r.push(a)}return r}function mf(e){var t=[];return e.forEach(function(r){var i=[];i[1]=[{data:ii(r.id),type:0}],i[2]=[],r.merge!=null&&(i[3]=[{data:ii(+!!r.merge),type:0}]);var n=[];r.messages.forEach(function(a){n.push(a.data),a.meta[3]=[{type:0,data:ii(a.data.length)}],i[2].push({data:Jn(a.meta),type:2})});var s=Jn(i);t.push(ii(s.length)),t.push(s),n.forEach(function(a){return t.push(a)})}),Iu(t)}function kJ(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],i=z0(t,r),n=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var a=t[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=t[r[0]],o>1&&(a|=t[r[0]+1]<<8),o>2&&(a|=t[r[0]+2]<<16),o>3&&(a|=t[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}n.push(t.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var u=0,d=0;if(s==1?(d=(t[r[0]]>>2&7)+4,u=(t[r[0]++]&224)<<3,u|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,s==2?(u=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(u=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),n=[Iu(n)],u==0)throw new Error("Invalid offset 0");if(u>n[0].length)throw new Error("Invalid offset beyond length");if(d>=u)for(n.push(n[0].slice(-u)),d-=u;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-u,-u+d))}}var p=Iu(n);if(p.length!=i)throw new Error("Unexpected length: ".concat(p.length," != ").concat(i));return p}function ka(e){for(var t=[],r=0;r<e.length;){var i=e[r++],n=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(kJ(i,e.slice(r,r+n))),r+=n}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Iu(t)}function vf(e){for(var t=[],r=0;r<e.length;){var i=Math.min(e.length-r,268435455),n=new Uint8Array(4);t.push(n);var s=ii(i),a=s.length;t.push(s),i<=60?(a++,t.push(new Uint8Array([i-1<<2]))):i<=256?(a+=2,t.push(new Uint8Array([240,i-1&255]))):i<=65536?(a+=3,t.push(new Uint8Array([244,i-1&255,i-1>>8&255]))):i<=16777216?(a+=4,t.push(new Uint8Array([248,i-1&255,i-1>>8&255,i-1>>16&255]))):i<=4294967296&&(a+=5,t.push(new Uint8Array([252,i-1&255,i-1>>8&255,i-1>>16&255,i-1>>>24&255]))),t.push(e.slice(r,r+i)),a+=i,n[0]=0,n[1]=a&255,n[2]=a>>8&255,n[3]=a>>16&255,r+=i}return Iu(t)}function tS(e,t){var r=new Uint8Array(32),i=pC(r),n=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,DJ(r,n,e.v),s|=1,n+=16;break;case"b":r[1]=6,i.setFloat64(n,e.v?1:0,!0),s|=2,n+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,i.setUint32(n,t.indexOf(e.v),!0),s|=8,n+=4;break;default:throw"unsupported cell type "+e.t}return i.setUint32(8,s,!0),r.slice(0,n)}function rS(e,t){var r=new Uint8Array(32),i=pC(r),n=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,i.setFloat64(n,e.v,!0),s|=32,n+=8;break;case"b":r[2]=6,i.setFloat64(n,e.v?1:0,!0),s|=32,n+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,i.setUint32(n,t.indexOf(e.v),!0),s|=16,n+=4;break;default:throw"unsupported cell type "+e.t}return i.setUint32(4,s,!0),r.slice(0,n)}function eu(e){var t=Pn(e);return z0(t[1][0].data)}function LJ(e,t,r){var i,n,s,a;if(!((i=e[6])!=null&&i[0])||!((n=e[7])!=null&&n[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=e[8])==null?void 0:s[0])==null?void 0:a.data)&&ap(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var u=0,d=pC(e[7][0].data),p=0,v=[],y=pC(e[4][0].data),_=0,P=[],R=0;R<t.length;++R){if(t[R]==null){d.setUint16(R*2,65535,!0),y.setUint16(R*2,65535);continue}d.setUint16(R*2,p,!0),y.setUint16(R*2,_,!0);var M,F;switch(typeof t[R]){case"string":M=tS({t:"s",v:t[R]},r),F=rS({t:"s",v:t[R]},r);break;case"number":M=tS({t:"n",v:t[R]},r),F=rS({t:"n",v:t[R]},r);break;case"boolean":M=tS({t:"b",v:t[R]},r),F=rS({t:"b",v:t[R]},r);break;default:throw new Error("Unsupported value "+t[R])}v.push(M),p+=M.length,P.push(F),_+=F.length,++u}for(e[2][0].data=ii(u);R<e[7][0].data.length/2;++R)d.setUint16(R*2,65535,!0),y.setUint16(R*2,65535,!0);return e[6][0].data=Iu(v),e[3][0].data=Iu(P),u}function OJ(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var i=Wo(r["!ref"]);i.s.r=i.s.c=0;var n=!1;i.e.c>9&&(n=!0,i.e.c=9),i.e.r>49&&(n=!0,i.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(_n(i)));var s=gC(r,{range:i,header:1}),a=["~Sh33tJ5~"];s.forEach(function(he){return he.forEach(function(ve){typeof ve=="string"&&a.push(ve)})});var o={},u=[],d=pi.read(t.numbers,{type:"base64"});d.FileIndex.map(function(he,ve){return[he,d.FullPaths[ve]]}).forEach(function(he){var ve=he[0],_e=he[1];if(ve.type==2&&ve.name.match(/\.iwa/)){var Fe=ve.content,qe=ka(Fe),at=Da(qe);at.forEach(function(ot){u.push(ot.id),o[ot.id]={deps:[],location:_e,type:ap(ot.messages[0].meta[1][0].data)}})}}),u.sort(function(he,ve){return he-ve});var p=u.filter(function(he){return he>1}).map(function(he){return[he,ii(he)]});d.FileIndex.map(function(he,ve){return[he,d.FullPaths[ve]]}).forEach(function(he){var ve=he[0];if(he[1],!!ve.name.match(/\.iwa/)){var _e=Da(ka(ve.content));_e.forEach(function(Fe){Fe.messages.forEach(function(qe){p.forEach(function(at){Fe.messages.some(function(ot){return ap(ot.meta[1][0].data)!=11006&&IJ(ot.data,at[1])})&&o[at[0]].deps.push(Fe.id)})})})}});for(var v=pi.find(d,o[1].location),y=Da(ka(v.content)),_,P=0;P<y.length;++P){var R=y[P];R.id==1&&(_=R)}var M=eu(Pn(_.messages[0].data)[1][0].data);for(v=pi.find(d,o[M].location),y=Da(ka(v.content)),P=0;P<y.length;++P)R=y[P],R.id==M&&(_=R);for(M=eu(Pn(_.messages[0].data)[2][0].data),v=pi.find(d,o[M].location),y=Da(ka(v.content)),P=0;P<y.length;++P)R=y[P],R.id==M&&(_=R);for(M=eu(Pn(_.messages[0].data)[2][0].data),v=pi.find(d,o[M].location),y=Da(ka(v.content)),P=0;P<y.length;++P)R=y[P],R.id==M&&(_=R);var F=Pn(_.messages[0].data);{F[6][0].data=ii(i.e.r+1),F[7][0].data=ii(i.e.c+1);var k=eu(F[46][0].data),N=pi.find(d,o[k].location),G=Da(ka(N.content));{for(var j=0;j<G.length&&G[j].id!=k;++j);if(G[j].id!=k)throw"Bad ColumnRowUIDMapArchive";var ee=Pn(G[j].messages[0].data);ee[1]=[],ee[2]=[],ee[3]=[];for(var q=0;q<=i.e.c;++q){var oe=[];oe[1]=oe[2]=[{type:0,data:ii(q+420690)}],ee[1].push({type:2,data:Jn(oe)}),ee[2].push({type:0,data:ii(q)}),ee[3].push({type:0,data:ii(q)})}ee[4]=[],ee[5]=[],ee[6]=[];for(var ue=0;ue<=i.e.r;++ue)oe=[],oe[1]=oe[2]=[{type:0,data:ii(ue+726270)}],ee[4].push({type:2,data:Jn(oe)}),ee[5].push({type:0,data:ii(ue)}),ee[6].push({type:0,data:ii(ue)});G[j].messages[0].data=Jn(ee)}N.content=vf(mf(G)),N.size=N.content.length,delete F[46];var me=Pn(F[4][0].data);{me[7][0].data=ii(i.e.r+1);var ie=Pn(me[1][0].data),fe=eu(ie[2][0].data);N=pi.find(d,o[fe].location),G=Da(ka(N.content));{if(G[0].id!=fe)throw"Bad HeaderStorageBucket";var ke=Pn(G[0].messages[0].data);for(ue=0;ue<s.length;++ue){var et=Pn(ke[2][0].data);et[1][0].data=ii(ue),et[4][0].data=ii(s[ue].length),ke[2][ue]={type:ke[2][0].type,data:Jn(et)}}G[0].messages[0].data=Jn(ke)}N.content=vf(mf(G)),N.size=N.content.length;var Xe=eu(me[2][0].data);N=pi.find(d,o[Xe].location),G=Da(ka(N.content));{if(G[0].id!=Xe)throw"Bad HeaderStorageBucket";for(ke=Pn(G[0].messages[0].data),q=0;q<=i.e.c;++q)et=Pn(ke[2][0].data),et[1][0].data=ii(q),et[4][0].data=ii(i.e.r+1),ke[2][q]={type:ke[2][0].type,data:Jn(et)};G[0].messages[0].data=Jn(ke)}N.content=vf(mf(G)),N.size=N.content.length;var ct=eu(me[4][0].data);(function(){for(var he=pi.find(d,o[ct].location),ve=Da(ka(he.content)),_e,Fe=0;Fe<ve.length;++Fe){var qe=ve[Fe];qe.id==ct&&(_e=qe)}var at=Pn(_e.messages[0].data);{at[3]=[];var ot=[];a.forEach(function(Ot,er){ot[1]=[{type:0,data:ii(er)}],ot[2]=[{type:0,data:ii(1)}],ot[3]=[{type:2,data:AJ(Ot)}],at[3].push({type:2,data:Jn(ot)})})}_e.messages[0].data=Jn(at);var Qe=mf(ve),Lt=vf(Qe);he.content=Lt,he.size=he.content.length})();var pt=Pn(me[3][0].data);{var Ge=pt[1][0];delete pt[2];var Ye=Pn(Ge.data);{var ht=eu(Ye[2][0].data);(function(){for(var he=pi.find(d,o[ht].location),ve=Da(ka(he.content)),_e,Fe=0;Fe<ve.length;++Fe){var qe=ve[Fe];qe.id==ht&&(_e=qe)}var at=Pn(_e.messages[0].data);{delete at[6],delete pt[7];var ot=new Uint8Array(at[5][0].data);at[5]=[];for(var Qe=0,Lt=0;Lt<=i.e.r;++Lt){var Ot=Pn(ot);Qe+=LJ(Ot,s[Lt],a),Ot[1][0].data=ii(Lt),at[5].push({data:Jn(Ot),type:2})}at[1]=[{type:0,data:ii(i.e.c+1)}],at[2]=[{type:0,data:ii(i.e.r+1)}],at[3]=[{type:0,data:ii(Qe)}],at[4]=[{type:0,data:ii(i.e.r+1)}]}_e.messages[0].data=Jn(at);var er=mf(ve),Yt=vf(er);he.content=Yt,he.size=he.content.length})()}Ge.data=Jn(Ye)}me[3][0].data=Jn(pt)}F[4][0].data=Jn(me)}_.messages[0].data=Jn(F);var Be=mf(y),ce=vf(Be);return v.content=ce,v.size=v.content.length,d}function NJ(e){return function(r){for(var i=0;i!=e.length;++i){var n=e[i];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function wT(e){NJ([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function BJ(e,t){return t.bookType=="ods"?UN(e,t):t.bookType=="numbers"?OJ(e,t):t.bookType=="xlsb"?zJ(e,t):GJ(e,t)}function zJ(e,t){Hf=1024,e&&!e.SSF&&(e.SSF=_o(on)),e&&e.SSF&&(_1(),C1(e.SSF),t.revssf=b1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,r0?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",i=EN.indexOf(t.bookType)>-1,n=eN();wT(t=t||{});var s=iT(),a="",o=0;if(t.cellXfs=[],$u(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),a="docProps/core.xml",Lr(s,a,nN(e.Props,t)),n.coreprops.push(a),ni(t.rels,2,a,qr.CORE_PROPS),a="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var u=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&u.push(e.SheetNames[d]);e.Props.SheetNames=u}for(e.Props.Worksheets=e.Props.SheetNames.length,Lr(s,a,oN(e.Props)),n.extprops.push(a),ni(t.rels,3,a,qr.EXT_PROPS),e.Custprops!==e.Props&&hs(e.Custprops||{}).length>0&&(a="docProps/custom.xml",Lr(s,a,aN(e.Custprops)),n.custprops.push(a),ni(t.rels,4,a,qr.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var p={"!id":{}},v=e.Sheets[e.SheetNames[o-1]],y=(v||{})["!type"]||"sheet";switch(y){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Lr(s,a,HQ(o-1,a,t,e,p)),n.sheets.push(a),ni(t.wbrels,-1,"worksheets/sheet"+o+"."+r,qr.WS[0])}if(v){var _=v["!comments"],P=!1,R="";_&&_.length>0&&(R="xl/comments"+o+"."+r,Lr(s,R,jQ(_,R)),n.comments.push(R),ni(p,-1,"../comments"+o+"."+r,qr.CMNT),P=!0),v["!legacy"]&&P&&Lr(s,"xl/drawings/vmlDrawing"+o+".vml",bN(o,v["!comments"])),delete v["!comments"],delete v["!legacy"]}p["!id"].rId1&&Lr(s,rN(a),sp(p))}return t.Strings!=null&&t.Strings.length>0&&(a="xl/sharedStrings."+r,Lr(s,a,WQ(t.Strings,a,t)),n.strs.push(a),ni(t.wbrels,-1,"sharedStrings."+r,qr.SST)),a="xl/workbook."+r,Lr(s,a,VQ(e,a)),n.workbooks.push(a),ni(t.rels,1,a,qr.WB),a="xl/theme/theme1.xml",Lr(s,a,CN(e.Themes,t)),n.themes.push(a),ni(t.wbrels,-1,"theme/theme1.xml",qr.THEME),a="xl/styles."+r,Lr(s,a,UQ(e,a,t)),n.styles.push(a),ni(t.wbrels,-1,"styles."+r,qr.STY),e.vbaraw&&i&&(a="xl/vbaProject.bin",Lr(s,a,e.vbaraw),n.vba.push(a),ni(t.wbrels,-1,"vbaProject.bin",qr.VBA)),a="xl/metadata."+r,Lr(s,a,$Q(a)),n.metadata.push(a),ni(t.wbrels,-1,"metadata."+r,qr.XLMETA),Lr(s,"[Content_Types].xml",tN(n,t)),Lr(s,"_rels/.rels",sp(t.rels)),Lr(s,"xl/_rels/workbook."+r+".rels",sp(t.wbrels)),delete t.revssf,delete t.ssf,s}function GJ(e,t){Hf=1024,e&&!e.SSF&&(e.SSF=_o(on)),e&&e.SSF&&(_1(),C1(e.SSF),t.revssf=b1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,r0?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",i=EN.indexOf(t.bookType)>-1,n=eN();wT(t=t||{});var s=iT(),a="",o=0;if(t.cellXfs=[],$u(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),a="docProps/core.xml",Lr(s,a,nN(e.Props,t)),n.coreprops.push(a),ni(t.rels,2,a,qr.CORE_PROPS),a="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var u=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&u.push(e.SheetNames[d]);e.Props.SheetNames=u}e.Props.Worksheets=e.Props.SheetNames.length,Lr(s,a,oN(e.Props)),n.extprops.push(a),ni(t.rels,3,a,qr.EXT_PROPS),e.Custprops!==e.Props&&hs(e.Custprops||{}).length>0&&(a="docProps/custom.xml",Lr(s,a,aN(e.Custprops)),n.custprops.push(a),ni(t.rels,4,a,qr.CUST_PROPS));var p=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var v={"!id":{}},y=e.Sheets[e.SheetNames[o-1]],_=(y||{})["!type"]||"sheet";switch(_){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,Lr(s,a,kN(o-1,t,e,v)),n.sheets.push(a),ni(t.wbrels,-1,"worksheets/sheet"+o+"."+r,qr.WS[0])}if(y){var P=y["!comments"],R=!1,M="";if(P&&P.length>0){var F=!1;P.forEach(function(k){k[1].forEach(function(N){N.T==!0&&(F=!0)})}),F&&(M="xl/threadedComments/threadedComment"+o+"."+r,Lr(s,M,vZ(P,p,t)),n.threadedcomments.push(M),ni(v,-1,"../threadedComments/threadedComment"+o+"."+r,qr.TCMNT)),M="xl/comments"+o+"."+r,Lr(s,M,SN(P)),n.comments.push(M),ni(v,-1,"../comments"+o+"."+r,qr.CMNT),R=!0}y["!legacy"]&&R&&Lr(s,"xl/drawings/vmlDrawing"+o+".vml",bN(o,y["!comments"])),delete y["!comments"],delete y["!legacy"]}v["!id"].rId1&&Lr(s,rN(a),sp(v))}return t.Strings!=null&&t.Strings.length>0&&(a="xl/sharedStrings."+r,Lr(s,a,gN(t.Strings,t)),n.strs.push(a),ni(t.wbrels,-1,"sharedStrings."+r,qr.SST)),a="xl/workbook."+r,Lr(s,a,NN(e)),n.workbooks.push(a),ni(t.rels,1,a,qr.WB),a="xl/theme/theme1.xml",Lr(s,a,CN(e.Themes,t)),n.themes.push(a),ni(t.wbrels,-1,"theme/theme1.xml",qr.THEME),a="xl/styles."+r,Lr(s,a,wN(e,t)),n.styles.push(a),ni(t.wbrels,-1,"styles."+r,qr.STY),e.vbaraw&&i&&(a="xl/vbaProject.bin",Lr(s,a,e.vbaraw),n.vba.push(a),ni(t.wbrels,-1,"vbaProject.bin",qr.VBA)),a="xl/metadata."+r,Lr(s,a,_N()),n.metadata.push(a),ni(t.wbrels,-1,"metadata."+r,qr.XLMETA),p.length>1&&(a="xl/persons/person.xml",Lr(s,a,yZ(p)),n.people.push(a),ni(t.wbrels,-1,"persons/person.xml",qr.PEOPLE)),Lr(s,"[Content_Types].xml",tN(n,t)),Lr(s,"_rels/.rels",sp(t.rels)),Lr(s,"xl/_rels/workbook."+r+".rels",sp(t.wbrels)),delete t.revssf,delete t.ssf,s}function VJ(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Cc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function WN(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return vv(t.file,pi.write(e,{type:Xr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return pi.write(e,t)}function HJ(e,t){var r=_o(t||{}),i=BJ(e,r);return UJ(i,r)}function UJ(e,t){var r={},i=Xr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=i;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=i;break;default:throw new Error("Unrecognized type "+t.type)}var n=e.FullPaths?pi.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof n=="string"){if(t.type=="binary"||t.type=="base64")return n;n=new Uint8Array(x1(n))}return t.password&&typeof encrypt_agile<"u"?WN(encrypt_agile(n,t.password),t):t.type==="file"?vv(t.file,n):t.type=="string"?Qm(n):n}function WJ(e,t){var r=t||{},i=oJ(e,r);return WN(i,r)}function gl(e,t,r){r||(r="");var i=r+e;switch(t.type){case"base64":return L0(N0(i));case"binary":return N0(i);case"string":return e;case"file":return vv(t.file,i,"utf8");case"buffer":return Xr?Tc(i,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(i):gl(i,{type:"binary"}).split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function jJ(e,t){switch(t.type){case"base64":return L0(e);case"binary":return e;case"string":return e;case"file":return vv(t.file,e,"binary");case"buffer":return Xr?Tc(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function yw(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",i=0;i<e.length;++i)r+=String.fromCharCode(e[i]);return t.type=="base64"?L0(r):t.type=="string"?Qm(r):r;case"file":return vv(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function jN(e,t){w$(),FQ(e);var r=_o(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var i=jN(e,r);return r.type="array",x1(i)}var n=0;if(r.sheet&&(typeof r.sheet=="number"?n=r.sheet:n=e.SheetNames.indexOf(r.sheet),!e.SheetNames[n]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return gl(nJ(e,r),r);case"slk":case"sylk":return gl(TK.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"htm":case"html":return gl(GN(e.Sheets[e.SheetNames[n]],r),r);case"txt":return jJ($N(e.Sheets[e.SheetNames[n]],r),r);case"csv":return gl(CT(e.Sheets[e.SheetNames[n]],r),r,"\uFEFF");case"dif":return gl(PK.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"dbf":return yw(RK.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"prn":return gl(MK.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"rtf":return gl(OK.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"eth":return gl(pN.from_sheet(e.Sheets[e.SheetNames[n]],r),r);case"fods":return gl(UN(e,r),r);case"wk1":return yw(jI.sheet_to_wk1(e.Sheets[e.SheetNames[n]],r),r);case"wk3":return yw(jI.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),yw(zN(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),WJ(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return HJ(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function $J(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function xT(e,t,r){var i={};return i.type="file",i.file=t,$J(i),jN(e,i)}function qJ(e,t,r,i,n,s,a,o){var u=ls(r),d=o.defval,p=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),v=!0,y=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(y,"__rowNum__",{value:r,enumerable:!1})}catch{y.__rowNum__=r}else y.__rowNum__=r;if(!a||e[r])for(var _=t.s.c;_<=t.e.c;++_){var P=a?e[r][_]:e[i[_]+u];if(P===void 0||P.t===void 0){if(d===void 0)continue;s[_]!=null&&(y[s[_]]=d);continue}var R=P.v;switch(P.t){case"z":if(R==null)break;continue;case"e":R=R==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+P.t)}if(s[_]!=null){if(R==null)if(P.t=="e"&&R===null)y[s[_]]=null;else if(d!==void 0)y[s[_]]=d;else if(p&&R===null)y[s[_]]=null;else continue;else y[s[_]]=p&&(P.t!=="n"||P.t==="n"&&o.rawNumbers!==!1)?R:_c(P,R,o);R!=null&&(v=!1)}}return{row:y,isempty:v}}function gC(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},i=0,n=1,s=[],a=0,o="",u={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},p=d.range!=null?d.range:e["!ref"];switch(d.header===1?i=1:d.header==="A"?i=2:Array.isArray(d.header)?i=3:d.header==null&&(i=0),typeof p){case"string":u=Di(p);break;case"number":u=Di(e["!ref"]),u.s.r=p;break;default:u=p}i>0&&(n=0);var v=ls(u.s.r),y=[],_=[],P=0,R=0,M=Array.isArray(e),F=u.s.r,k=0,N={};M&&!e[F]&&(e[F]=[]);var G=d.skipHidden&&e["!cols"]||[],j=d.skipHidden&&e["!rows"]||[];for(k=u.s.c;k<=u.e.c;++k)if(!(G[k]||{}).hidden)switch(y[k]=Fs(k),r=M?e[F][k]:e[y[k]+v],i){case 1:s[k]=k-u.s.c;break;case 2:s[k]=y[k];break;case 3:s[k]=d.header[k-u.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=_c(r,null,d),R=N[a]||0,!R)N[a]=1;else{do o=a+"_"+R++;while(N[o]);N[a]=R,N[o]=1}s[k]=o}for(F=u.s.r+n;F<=u.e.r;++F)if(!(j[F]||{}).hidden){var ee=qJ(e,u,F,y,i,s,M,d);(ee.isempty===!1||(i===1?d.blankrows!==!1:d.blankrows))&&(_[P++]=ee.row)}return _.length=P,_}var JI=/"/g;function KJ(e,t,r,i,n,s,a,o){for(var u=!0,d=[],p="",v=ls(r),y=t.s.c;y<=t.e.c;++y)if(i[y]){var _=o.dense?(e[r]||[])[y]:e[i[y]+v];if(_==null)p="";else if(_.v!=null){u=!1,p=""+(o.rawNumbers&&_.t=="n"?_.v:_c(_,null,o));for(var P=0,R=0;P!==p.length;++P)if((R=p.charCodeAt(P))===n||R===s||R===34||o.forceQuotes){p='"'+p.replace(JI,'""')+'"';break}p=="ID"&&(p='"ID"')}else _.f!=null&&!_.F?(u=!1,p="="+_.f,p.indexOf(",")>=0&&(p='"'+p.replace(JI,'""')+'"')):p="";d.push(p)}return o.blankrows===!1&&u?null:d.join(a)}function CT(e,t){var r=[],i=t??{};if(e==null||e["!ref"]==null)return"";var n=Di(e["!ref"]),s=i.FS!==void 0?i.FS:",",a=s.charCodeAt(0),o=i.RS!==void 0?i.RS:`
`,u=o.charCodeAt(0),d=new RegExp((s=="|"?"\\|":s)+"+$"),p="",v=[];i.dense=Array.isArray(e);for(var y=i.skipHidden&&e["!cols"]||[],_=i.skipHidden&&e["!rows"]||[],P=n.s.c;P<=n.e.c;++P)(y[P]||{}).hidden||(v[P]=Fs(P));for(var R=0,M=n.s.r;M<=n.e.r;++M)(_[M]||{}).hidden||(p=KJ(e,n,M,v,a,u,s,i),p!=null&&(i.strip&&(p=p.replace(d,"")),(p||i.blankrows!==!1)&&r.push((R++?o:"")+p)));return delete i.dense,r.join("")}function $N(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=CT(e,t);return r}function ZJ(e){var t="",r,i="";if(e==null||e["!ref"]==null)return[];var n=Di(e["!ref"]),s="",a=[],o,u=[],d=Array.isArray(e);for(o=n.s.c;o<=n.e.c;++o)a[o]=Fs(o);for(var p=n.s.r;p<=n.e.r;++p)for(s=ls(p),o=n.s.c;o<=n.e.c;++o)if(t=a[o]+s,r=d?(e[p]||[])[o]:e[t],i="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;i=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)i=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)i=""+r.v;else if(r.t=="b")i=r.v?"TRUE":"FALSE";else if(r.w!==void 0)i="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?i="'"+r.v:i=""+r.v}}u[u.length]=t+"="+i}return u}function qN(e,t,r){var i=r||{},n=+!i.skipHeader,s=e||{},a=0,o=0;if(s&&i.origin!=null)if(typeof i.origin=="number")a=i.origin;else{var u=typeof i.origin=="string"?Un(i.origin):i.origin;a=u.r,o=u.c}var d,p={s:{c:0,r:0},e:{c:o,r:a+t.length-1+n}};if(s["!ref"]){var v=Di(s["!ref"]);p.e.c=Math.max(p.e.c,v.e.c),p.e.r=Math.max(p.e.r,v.e.r),a==-1&&(a=v.e.r+1,p.e.r=a+t.length-1+n)}else a==-1&&(a=0,p.e.r=t.length-1+n);var y=i.header||[],_=0;t.forEach(function(R,M){hs(R).forEach(function(F){(_=y.indexOf(F))==-1&&(y[_=y.length]=F);var k=R[F],N="z",G="",j=ci({c:o+_,r:a+M+n});d=G0(s,j),k&&typeof k=="object"&&!(k instanceof Date)?s[j]=k:(typeof k=="number"?N="n":typeof k=="boolean"?N="b":typeof k=="string"?N="s":k instanceof Date?(N="d",i.cellDates||(N="n",k=Co(k)),G=i.dateNF||on[14]):k===null&&i.nullError&&(N="e",k=0),d?(d.t=N,d.v=k,delete d.w,delete d.R,G&&(d.z=G)):s[j]=d={t:N,v:k},G&&(d.z=G))})}),p.e.c=Math.max(p.e.c,o+y.length-1);var P=ls(a);if(n)for(_=0;_<y.length;++_)s[Fs(_+o)+P]={t:"s",v:y[_]};return s["!ref"]=_n(p),s}function XJ(e,t){return qN(null,e,t)}function G0(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var i=Un(t);return e[i.r]||(e[i.r]=[]),e[i.r][i.c]||(e[i.r][i.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?G0(e,ci(t)):G0(e,ci({r:t,c:r||0}))}function YJ(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function QJ(){return{SheetNames:[],Sheets:{}}}function JJ(e,t,r,i){var n=1;if(!r)for(;n<=65535&&e.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(i&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);n=s&&+s[2]||0;var a=s&&s[1]||r;for(++n;n<=65535&&e.SheetNames.indexOf(r=a+n)!=-1;++n);}if(ON(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function eee(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var i=YJ(e,t);switch(e.Workbook.Sheets[i]||(e.Workbook.Sheets[i]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[i].Hidden=r}function tee(e,t){return e.z=t,e}function KN(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function ree(e,t,r){return KN(e,"#"+t,r)}function iee(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function nee(e,t,r,i){for(var n=typeof t!="string"?t:Di(t),s=typeof t=="string"?t:_n(t),a=n.s.r;a<=n.e.r;++a)for(var o=n.s.c;o<=n.e.c;++o){var u=G0(e,a,o);u.t="n",u.F=s,delete u.v,a==n.s.r&&o==n.s.c&&(u.f=r,i&&(u.D=!0))}return e}var Mn={encode_col:Fs,encode_row:ls,encode_cell:ci,encode_range:_n,decode_col:cT,decode_row:lT,split_cell:wq,decode_cell:Un,decode_range:Wo,format_cell:_c,sheet_add_aoa:KO,sheet_add_json:qN,sheet_add_dom:VN,aoa_to_sheet:Kp,json_to_sheet:XJ,table_to_sheet:HN,table_to_book:PJ,sheet_to_csv:CT,sheet_to_txt:$N,sheet_to_json:gC,sheet_to_html:GN,sheet_to_formulae:ZJ,sheet_to_row_object_array:gC,sheet_get_cell:G0,book_new:QJ,book_append_sheet:JJ,book_set_sheet_visibility:eee,cell_set_number_format:tee,cell_set_hyperlink:KN,cell_set_internal_link:ree,cell_add_comment:iee,sheet_set_array_formula:nee,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function xr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function see(e,t){const r=D.createContext(t),i=s=>{const{children:a,...o}=s,u=D.useMemo(()=>o,Object.values(o));return V.jsx(r.Provider,{value:u,children:a})};i.displayName=e+"Provider";function n(s){const a=D.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[i,n]}function Ya(e,t=[]){let r=[];function i(s,a){const o=D.createContext(a),u=r.length;r=[...r,a];const d=v=>{var F;const{scope:y,children:_,...P}=v,R=((F=y==null?void 0:y[e])==null?void 0:F[u])||o,M=D.useMemo(()=>P,Object.values(P));return V.jsx(R.Provider,{value:M,children:_})};d.displayName=s+"Provider";function p(v,y){var R;const _=((R=y==null?void 0:y[e])==null?void 0:R[u])||o,P=D.useContext(_);if(P)return P;if(a!==void 0)return a;throw new Error(`\`${v}\` must be used within \`${s}\``)}return[d,p]}const n=()=>{const s=r.map(a=>D.createContext(a));return function(o){const u=(o==null?void 0:o[e])||s;return D.useMemo(()=>({[`__scope${e}`]:{...o,[e]:u}}),[o,u])}};return n.scopeName=e,[i,oee(n,...t)]}function oee(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const i=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(s){const a=i.reduce((o,{useScope:u,scopeName:d})=>{const v=u(s)[`__scope${d}`];return{...o,...v}},{});return D.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var aee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Wr=aee.reduce((e,t)=>{const r=Ap(`Primitive.${t}`),i=D.forwardRef((n,s)=>{const{asChild:a,...o}=n,u=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),V.jsx(u,{...o,ref:s})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function ZN(e,t){e&&ju.flushSync(()=>e.dispatchEvent(t))}function Al(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...r)=>{var i;return(i=t.current)==null?void 0:i.call(t,...r)},[])}function lee(e,t=globalThis==null?void 0:globalThis.document){const r=Al(e);D.useEffect(()=>{const i=n=>{n.key==="Escape"&&r(n)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[r,t])}var cee="DismissableLayer",QE="dismissableLayer.update",uee="dismissableLayer.pointerDownOutside",hee="dismissableLayer.focusOutside",eD,XN=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),P1=D.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:n,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...u}=e,d=D.useContext(XN),[p,v]=D.useState(null),y=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,_]=D.useState({}),P=Vi(t,q=>v(q)),R=Array.from(d.layers),[M]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),F=R.indexOf(M),k=p?R.indexOf(p):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,G=k>=F,j=pee(q=>{const oe=q.target,ue=[...d.branches].some(me=>me.contains(oe));!G||ue||(n==null||n(q),a==null||a(q),q.defaultPrevented||o==null||o())},y),ee=gee(q=>{const oe=q.target;[...d.branches].some(me=>me.contains(oe))||(s==null||s(q),a==null||a(q),q.defaultPrevented||o==null||o())},y);return lee(q=>{k===d.layers.size-1&&(i==null||i(q),!q.defaultPrevented&&o&&(q.preventDefault(),o()))},y),D.useEffect(()=>{if(p)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(eD=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),tD(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=eD)}},[p,y,r,d]),D.useEffect(()=>()=>{p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),tD())},[p,d]),D.useEffect(()=>{const q=()=>_({});return document.addEventListener(QE,q),()=>document.removeEventListener(QE,q)},[]),V.jsx(Wr.div,{...u,ref:P,style:{pointerEvents:N?G?"auto":"none":void 0,...e.style},onFocusCapture:xr(e.onFocusCapture,ee.onFocusCapture),onBlurCapture:xr(e.onBlurCapture,ee.onBlurCapture),onPointerDownCapture:xr(e.onPointerDownCapture,j.onPointerDownCapture)})});P1.displayName=cee;var dee="DismissableLayerBranch",fee=D.forwardRef((e,t)=>{const r=D.useContext(XN),i=D.useRef(null),n=Vi(t,i);return D.useEffect(()=>{const s=i.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),V.jsx(Wr.div,{...e,ref:n})});fee.displayName=dee;function pee(e,t=globalThis==null?void 0:globalThis.document){const r=Al(e),i=D.useRef(!1),n=D.useRef(()=>{});return D.useEffect(()=>{const s=o=>{if(o.target&&!i.current){let u=function(){YN(uee,r,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=u,t.addEventListener("click",n.current,{once:!0})):u()}else t.removeEventListener("click",n.current);i.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>i.current=!0}}function gee(e,t=globalThis==null?void 0:globalThis.document){const r=Al(e),i=D.useRef(!1);return D.useEffect(()=>{const n=s=>{s.target&&!i.current&&YN(hee,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function tD(){const e=new CustomEvent(QE);document.dispatchEvent(e)}function YN(e,t,r,{discrete:i}){const n=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(e,t,{once:!0}),i?ZN(n,s):n.dispatchEvent(s)}var Du=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},mee=rR[" useId ".trim().toString()]||(()=>{}),vee=0;function lp(e){const[t,r]=D.useState(mee());return Du(()=>{r(i=>i??String(vee++))},[e]),t?`radix-${t}`:""}const yee=["top","right","bottom","left"],ku=Math.min,Oo=Math.max,mC=Math.round,ww=Math.floor,Tl=e=>({x:e,y:e}),wee={left:"right",right:"left",bottom:"top",top:"bottom"},xee={start:"end",end:"start"};function JE(e,t,r){return Oo(e,ku(t,r))}function bc(e,t){return typeof e=="function"?e(t):e}function Sc(e){return e.split("-")[0]}function Yp(e){return e.split("-")[1]}function _T(e){return e==="x"?"y":"x"}function bT(e){return e==="y"?"height":"width"}const Cee=new Set(["top","bottom"]);function _l(e){return Cee.has(Sc(e))?"y":"x"}function ST(e){return _T(_l(e))}function _ee(e,t,r){r===void 0&&(r=!1);const i=Yp(e),n=ST(e),s=bT(n);let a=n==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=vC(a)),[a,vC(a)]}function bee(e){const t=vC(e);return[e2(e),t,e2(t)]}function e2(e){return e.replace(/start|end/g,t=>xee[t])}const rD=["left","right"],iD=["right","left"],See=["top","bottom"],Eee=["bottom","top"];function Ree(e,t,r){switch(e){case"top":case"bottom":return r?t?iD:rD:t?rD:iD;case"left":case"right":return t?See:Eee;default:return[]}}function Tee(e,t,r,i){const n=Yp(e);let s=Ree(Sc(e),r==="start",i);return n&&(s=s.map(a=>a+"-"+n),t&&(s=s.concat(s.map(e2)))),s}function vC(e){return e.replace(/left|right|bottom|top/g,t=>wee[t])}function Pee(e){return{top:0,right:0,bottom:0,left:0,...e}}function QN(e){return typeof e!="number"?Pee(e):{top:e,right:e,bottom:e,left:e}}function yC(e){const{x:t,y:r,width:i,height:n}=e;return{width:i,height:n,top:r,left:t,right:t+i,bottom:r+n,x:t,y:r}}function nD(e,t,r){let{reference:i,floating:n}=e;const s=_l(t),a=ST(t),o=bT(a),u=Sc(t),d=s==="y",p=i.x+i.width/2-n.width/2,v=i.y+i.height/2-n.height/2,y=i[o]/2-n[o]/2;let _;switch(u){case"top":_={x:p,y:i.y-n.height};break;case"bottom":_={x:p,y:i.y+i.height};break;case"right":_={x:i.x+i.width,y:v};break;case"left":_={x:i.x-n.width,y:v};break;default:_={x:i.x,y:i.y}}switch(Yp(t)){case"start":_[a]-=y*(r&&d?-1:1);break;case"end":_[a]+=y*(r&&d?-1:1);break}return _}const Mee=async(e,t,r)=>{const{placement:i="bottom",strategy:n="absolute",middleware:s=[],platform:a}=r,o=s.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:n}),{x:p,y:v}=nD(d,i,u),y=i,_={},P=0;for(let R=0;R<o.length;R++){const{name:M,fn:F}=o[R],{x:k,y:N,data:G,reset:j}=await F({x:p,y:v,initialPlacement:i,placement:y,strategy:n,middlewareData:_,rects:d,platform:a,elements:{reference:e,floating:t}});p=k??p,v=N??v,_={..._,[M]:{..._[M],...G}},j&&P<=50&&(P++,typeof j=="object"&&(j.placement&&(y=j.placement),j.rects&&(d=j.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:n}):j.rects),{x:p,y:v}=nD(d,y,u)),R=-1)}return{x:p,y:v,placement:y,strategy:n,middlewareData:_}};async function V0(e,t){var r;t===void 0&&(t={});const{x:i,y:n,platform:s,rects:a,elements:o,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:v="floating",altBoundary:y=!1,padding:_=0}=bc(t,e),P=QN(_),M=o[y?v==="floating"?"reference":"floating":v],F=yC(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(M)))==null||r?M:M.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:d,rootBoundary:p,strategy:u})),k=v==="floating"?{x:i,y:n,width:a.floating.width,height:a.floating.height}:a.reference,N=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),G=await(s.isElement==null?void 0:s.isElement(N))?await(s.getScale==null?void 0:s.getScale(N))||{x:1,y:1}:{x:1,y:1},j=yC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:k,offsetParent:N,strategy:u}):k);return{top:(F.top-j.top+P.top)/G.y,bottom:(j.bottom-F.bottom+P.bottom)/G.y,left:(F.left-j.left+P.left)/G.x,right:(j.right-F.right+P.right)/G.x}}const Fee=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:i,placement:n,rects:s,platform:a,elements:o,middlewareData:u}=t,{element:d,padding:p=0}=bc(e,t)||{};if(d==null)return{};const v=QN(p),y={x:r,y:i},_=ST(n),P=bT(_),R=await a.getDimensions(d),M=_==="y",F=M?"top":"left",k=M?"bottom":"right",N=M?"clientHeight":"clientWidth",G=s.reference[P]+s.reference[_]-y[_]-s.floating[P],j=y[_]-s.reference[_],ee=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let q=ee?ee[N]:0;(!q||!await(a.isElement==null?void 0:a.isElement(ee)))&&(q=o.floating[N]||s.floating[P]);const oe=G/2-j/2,ue=q/2-R[P]/2-1,me=ku(v[F],ue),ie=ku(v[k],ue),fe=me,ke=q-R[P]-ie,et=q/2-R[P]/2+oe,Xe=JE(fe,et,ke),ct=!u.arrow&&Yp(n)!=null&&et!==Xe&&s.reference[P]/2-(et<fe?me:ie)-R[P]/2<0,pt=ct?et<fe?et-fe:et-ke:0;return{[_]:y[_]+pt,data:{[_]:Xe,centerOffset:et-Xe-pt,...ct&&{alignmentOffset:pt}},reset:ct}}}),Aee=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,i;const{placement:n,middlewareData:s,rects:a,initialPlacement:o,platform:u,elements:d}=t,{mainAxis:p=!0,crossAxis:v=!0,fallbackPlacements:y,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:P="none",flipAlignment:R=!0,...M}=bc(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const F=Sc(n),k=_l(o),N=Sc(o)===o,G=await(u.isRTL==null?void 0:u.isRTL(d.floating)),j=y||(N||!R?[vC(o)]:bee(o)),ee=P!=="none";!y&&ee&&j.push(...Tee(o,R,P,G));const q=[o,...j],oe=await V0(t,M),ue=[];let me=((i=s.flip)==null?void 0:i.overflows)||[];if(p&&ue.push(oe[F]),v){const et=_ee(n,a,G);ue.push(oe[et[0]],oe[et[1]])}if(me=[...me,{placement:n,overflows:ue}],!ue.every(et=>et<=0)){var ie,fe;const et=(((ie=s.flip)==null?void 0:ie.index)||0)+1,Xe=q[et];if(Xe&&(!(v==="alignment"?k!==_l(Xe):!1)||me.every(Ge=>_l(Ge.placement)===k?Ge.overflows[0]>0:!0)))return{data:{index:et,overflows:me},reset:{placement:Xe}};let ct=(fe=me.filter(pt=>pt.overflows[0]<=0).sort((pt,Ge)=>pt.overflows[1]-Ge.overflows[1])[0])==null?void 0:fe.placement;if(!ct)switch(_){case"bestFit":{var ke;const pt=(ke=me.filter(Ge=>{if(ee){const Ye=_l(Ge.placement);return Ye===k||Ye==="y"}return!0}).map(Ge=>[Ge.placement,Ge.overflows.filter(Ye=>Ye>0).reduce((Ye,ht)=>Ye+ht,0)]).sort((Ge,Ye)=>Ge[1]-Ye[1])[0])==null?void 0:ke[0];pt&&(ct=pt);break}case"initialPlacement":ct=o;break}if(n!==ct)return{reset:{placement:ct}}}return{}}}};function sD(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function oD(e){return yee.some(t=>e[t]>=0)}const Iee=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:i="referenceHidden",...n}=bc(e,t);switch(i){case"referenceHidden":{const s=await V0(t,{...n,elementContext:"reference"}),a=sD(s,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:oD(a)}}}case"escaped":{const s=await V0(t,{...n,altBoundary:!0}),a=sD(s,r.floating);return{data:{escapedOffsets:a,escaped:oD(a)}}}default:return{}}}}},JN=new Set(["left","top"]);async function Dee(e,t){const{placement:r,platform:i,elements:n}=e,s=await(i.isRTL==null?void 0:i.isRTL(n.floating)),a=Sc(r),o=Yp(r),u=_l(r)==="y",d=JN.has(a)?-1:1,p=s&&u?-1:1,v=bc(t,e);let{mainAxis:y,crossAxis:_,alignmentAxis:P}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return o&&typeof P=="number"&&(_=o==="end"?P*-1:P),u?{x:_*p,y:y*d}:{x:y*d,y:_*p}}const kee=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,i;const{x:n,y:s,placement:a,middlewareData:o}=t,u=await Dee(t,e);return a===((r=o.offset)==null?void 0:r.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:n+u.x,y:s+u.y,data:{...u,placement:a}}}}},Lee=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:i,placement:n}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:M=>{let{x:F,y:k}=M;return{x:F,y:k}}},...u}=bc(e,t),d={x:r,y:i},p=await V0(t,u),v=_l(Sc(n)),y=_T(v);let _=d[y],P=d[v];if(s){const M=y==="y"?"top":"left",F=y==="y"?"bottom":"right",k=_+p[M],N=_-p[F];_=JE(k,_,N)}if(a){const M=v==="y"?"top":"left",F=v==="y"?"bottom":"right",k=P+p[M],N=P-p[F];P=JE(k,P,N)}const R=o.fn({...t,[y]:_,[v]:P});return{...R,data:{x:R.x-r,y:R.y-i,enabled:{[y]:s,[v]:a}}}}}},Oee=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:i,placement:n,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:u=!0,crossAxis:d=!0}=bc(e,t),p={x:r,y:i},v=_l(n),y=_T(v);let _=p[y],P=p[v];const R=bc(o,t),M=typeof R=="number"?{mainAxis:R,crossAxis:0}:{mainAxis:0,crossAxis:0,...R};if(u){const N=y==="y"?"height":"width",G=s.reference[y]-s.floating[N]+M.mainAxis,j=s.reference[y]+s.reference[N]-M.mainAxis;_<G?_=G:_>j&&(_=j)}if(d){var F,k;const N=y==="y"?"width":"height",G=JN.has(Sc(n)),j=s.reference[v]-s.floating[N]+(G&&((F=a.offset)==null?void 0:F[v])||0)+(G?0:M.crossAxis),ee=s.reference[v]+s.reference[N]+(G?0:((k=a.offset)==null?void 0:k[v])||0)-(G?M.crossAxis:0);P<j?P=j:P>ee&&(P=ee)}return{[y]:_,[v]:P}}}},Nee=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,i;const{placement:n,rects:s,platform:a,elements:o}=t,{apply:u=()=>{},...d}=bc(e,t),p=await V0(t,d),v=Sc(n),y=Yp(n),_=_l(n)==="y",{width:P,height:R}=s.floating;let M,F;v==="top"||v==="bottom"?(M=v,F=y===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(F=v,M=y==="end"?"top":"bottom");const k=R-p.top-p.bottom,N=P-p.left-p.right,G=ku(R-p[M],k),j=ku(P-p[F],N),ee=!t.middlewareData.shift;let q=G,oe=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(oe=N),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(q=k),ee&&!y){const me=Oo(p.left,0),ie=Oo(p.right,0),fe=Oo(p.top,0),ke=Oo(p.bottom,0);_?oe=P-2*(me!==0||ie!==0?me+ie:Oo(p.left,p.right)):q=R-2*(fe!==0||ke!==0?fe+ke:Oo(p.top,p.bottom))}await u({...t,availableWidth:oe,availableHeight:q});const ue=await a.getDimensions(o.floating);return P!==ue.width||R!==ue.height?{reset:{rects:!0}}:{}}}};function M1(){return typeof window<"u"}function Qp(e){return e5(e)?(e.nodeName||"").toLowerCase():"#document"}function Vo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ol(e){var t;return(t=(e5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function e5(e){return M1()?e instanceof Node||e instanceof Vo(e).Node:!1}function Za(e){return M1()?e instanceof Element||e instanceof Vo(e).Element:!1}function Il(e){return M1()?e instanceof HTMLElement||e instanceof Vo(e).HTMLElement:!1}function aD(e){return!M1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vo(e).ShadowRoot}const Bee=new Set(["inline","contents"]);function _v(e){const{overflow:t,overflowX:r,overflowY:i,display:n}=Xa(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!Bee.has(n)}const zee=new Set(["table","td","th"]);function Gee(e){return zee.has(Qp(e))}const Vee=[":popover-open",":modal"];function F1(e){return Vee.some(t=>{try{return e.matches(t)}catch{return!1}})}const Hee=["transform","translate","scale","rotate","perspective"],Uee=["transform","translate","scale","rotate","perspective","filter"],Wee=["paint","layout","strict","content"];function ET(e){const t=RT(),r=Za(e)?Xa(e):e;return Hee.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Uee.some(i=>(r.willChange||"").includes(i))||Wee.some(i=>(r.contain||"").includes(i))}function jee(e){let t=Lu(e);for(;Il(t)&&!kp(t);){if(ET(t))return t;if(F1(t))return null;t=Lu(t)}return null}function RT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $ee=new Set(["html","body","#document"]);function kp(e){return $ee.has(Qp(e))}function Xa(e){return Vo(e).getComputedStyle(e)}function A1(e){return Za(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Lu(e){if(Qp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||aD(e)&&e.host||Ol(e);return aD(t)?t.host:t}function t5(e){const t=Lu(e);return kp(t)?e.ownerDocument?e.ownerDocument.body:e.body:Il(t)&&_v(t)?t:t5(t)}function H0(e,t,r){var i;t===void 0&&(t=[]),r===void 0&&(r=!0);const n=t5(e),s=n===((i=e.ownerDocument)==null?void 0:i.body),a=Vo(n);if(s){const o=t2(a);return t.concat(a,a.visualViewport||[],_v(n)?n:[],o&&r?H0(o):[])}return t.concat(n,H0(n,[],r))}function t2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function r5(e){const t=Xa(e);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const n=Il(e),s=n?e.offsetWidth:r,a=n?e.offsetHeight:i,o=mC(r)!==s||mC(i)!==a;return o&&(r=s,i=a),{width:r,height:i,$:o}}function TT(e){return Za(e)?e:e.contextElement}function cp(e){const t=TT(e);if(!Il(t))return Tl(1);const r=t.getBoundingClientRect(),{width:i,height:n,$:s}=r5(t);let a=(s?mC(r.width):r.width)/i,o=(s?mC(r.height):r.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const qee=Tl(0);function i5(e){const t=Vo(e);return!RT()||!t.visualViewport?qee:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Kee(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Vo(e)?!1:t}function td(e,t,r,i){t===void 0&&(t=!1),r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=TT(e);let a=Tl(1);t&&(i?Za(i)&&(a=cp(i)):a=cp(e));const o=Kee(s,r,i)?i5(s):Tl(0);let u=(n.left+o.x)/a.x,d=(n.top+o.y)/a.y,p=n.width/a.x,v=n.height/a.y;if(s){const y=Vo(s),_=i&&Za(i)?Vo(i):i;let P=y,R=t2(P);for(;R&&i&&_!==P;){const M=cp(R),F=R.getBoundingClientRect(),k=Xa(R),N=F.left+(R.clientLeft+parseFloat(k.paddingLeft))*M.x,G=F.top+(R.clientTop+parseFloat(k.paddingTop))*M.y;u*=M.x,d*=M.y,p*=M.x,v*=M.y,u+=N,d+=G,P=Vo(R),R=t2(P)}}return yC({width:p,height:v,x:u,y:d})}function I1(e,t){const r=A1(e).scrollLeft;return t?t.left+r:td(Ol(e)).left+r}function n5(e,t){const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-I1(e,r),n=r.top+t.scrollTop;return{x:i,y:n}}function Zee(e){let{elements:t,rect:r,offsetParent:i,strategy:n}=e;const s=n==="fixed",a=Ol(i),o=t?F1(t.floating):!1;if(i===a||o&&s)return r;let u={scrollLeft:0,scrollTop:0},d=Tl(1);const p=Tl(0),v=Il(i);if((v||!v&&!s)&&((Qp(i)!=="body"||_v(a))&&(u=A1(i)),Il(i))){const _=td(i);d=cp(i),p.x=_.x+i.clientLeft,p.y=_.y+i.clientTop}const y=a&&!v&&!s?n5(a,u):Tl(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-u.scrollLeft*d.x+p.x+y.x,y:r.y*d.y-u.scrollTop*d.y+p.y+y.y}}function Xee(e){return Array.from(e.getClientRects())}function Yee(e){const t=Ol(e),r=A1(e),i=e.ownerDocument.body,n=Oo(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=Oo(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let a=-r.scrollLeft+I1(e);const o=-r.scrollTop;return Xa(i).direction==="rtl"&&(a+=Oo(t.clientWidth,i.clientWidth)-n),{width:n,height:s,x:a,y:o}}const lD=25;function Qee(e,t){const r=Vo(e),i=Ol(e),n=r.visualViewport;let s=i.clientWidth,a=i.clientHeight,o=0,u=0;if(n){s=n.width,a=n.height;const p=RT();(!p||p&&t==="fixed")&&(o=n.offsetLeft,u=n.offsetTop)}const d=I1(i);if(d<=0){const p=i.ownerDocument,v=p.body,y=getComputedStyle(v),_=p.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,P=Math.abs(i.clientWidth-v.clientWidth-_);P<=lD&&(s-=P)}else d<=lD&&(s+=d);return{width:s,height:a,x:o,y:u}}const Jee=new Set(["absolute","fixed"]);function ete(e,t){const r=td(e,!0,t==="fixed"),i=r.top+e.clientTop,n=r.left+e.clientLeft,s=Il(e)?cp(e):Tl(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,u=n*s.x,d=i*s.y;return{width:a,height:o,x:u,y:d}}function cD(e,t,r){let i;if(t==="viewport")i=Qee(e,r);else if(t==="document")i=Yee(Ol(e));else if(Za(t))i=ete(t,r);else{const n=i5(e);i={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return yC(i)}function s5(e,t){const r=Lu(e);return r===t||!Za(r)||kp(r)?!1:Xa(r).position==="fixed"||s5(r,t)}function tte(e,t){const r=t.get(e);if(r)return r;let i=H0(e,[],!1).filter(o=>Za(o)&&Qp(o)!=="body"),n=null;const s=Xa(e).position==="fixed";let a=s?Lu(e):e;for(;Za(a)&&!kp(a);){const o=Xa(a),u=ET(a);!u&&o.position==="fixed"&&(n=null),(s?!u&&!n:!u&&o.position==="static"&&!!n&&Jee.has(n.position)||_v(a)&&!u&&s5(e,a))?i=i.filter(p=>p!==a):n=o,a=Lu(a)}return t.set(e,i),i}function rte(e){let{element:t,boundary:r,rootBoundary:i,strategy:n}=e;const a=[...r==="clippingAncestors"?F1(t)?[]:tte(t,this._c):[].concat(r),i],o=a[0],u=a.reduce((d,p)=>{const v=cD(t,p,n);return d.top=Oo(v.top,d.top),d.right=ku(v.right,d.right),d.bottom=ku(v.bottom,d.bottom),d.left=Oo(v.left,d.left),d},cD(t,o,n));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function ite(e){const{width:t,height:r}=r5(e);return{width:t,height:r}}function nte(e,t,r){const i=Il(t),n=Ol(t),s=r==="fixed",a=td(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const u=Tl(0);function d(){u.x=I1(n)}if(i||!i&&!s)if((Qp(t)!=="body"||_v(n))&&(o=A1(t)),i){const _=td(t,!0,s,t);u.x=_.x+t.clientLeft,u.y=_.y+t.clientTop}else n&&d();s&&!i&&n&&d();const p=n&&!i&&!s?n5(n,o):Tl(0),v=a.left+o.scrollLeft-u.x-p.x,y=a.top+o.scrollTop-u.y-p.y;return{x:v,y,width:a.width,height:a.height}}function iS(e){return Xa(e).position==="static"}function uD(e,t){if(!Il(e)||Xa(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Ol(e)===r&&(r=r.ownerDocument.body),r}function o5(e,t){const r=Vo(e);if(F1(e))return r;if(!Il(e)){let n=Lu(e);for(;n&&!kp(n);){if(Za(n)&&!iS(n))return n;n=Lu(n)}return r}let i=uD(e,t);for(;i&&Gee(i)&&iS(i);)i=uD(i,t);return i&&kp(i)&&iS(i)&&!ET(i)?r:i||jee(e)||r}const ste=async function(e){const t=this.getOffsetParent||o5,r=this.getDimensions,i=await r(e.floating);return{reference:nte(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function ote(e){return Xa(e).direction==="rtl"}const ate={convertOffsetParentRelativeRectToViewportRelativeRect:Zee,getDocumentElement:Ol,getClippingRect:rte,getOffsetParent:o5,getElementRects:ste,getClientRects:Xee,getDimensions:ite,getScale:cp,isElement:Za,isRTL:ote};function a5(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function lte(e,t){let r=null,i;const n=Ol(e);function s(){var o;clearTimeout(i),(o=r)==null||o.disconnect(),r=null}function a(o,u){o===void 0&&(o=!1),u===void 0&&(u=1),s();const d=e.getBoundingClientRect(),{left:p,top:v,width:y,height:_}=d;if(o||t(),!y||!_)return;const P=ww(v),R=ww(n.clientWidth-(p+y)),M=ww(n.clientHeight-(v+_)),F=ww(p),N={rootMargin:-P+"px "+-R+"px "+-M+"px "+-F+"px",threshold:Oo(0,ku(1,u))||1};let G=!0;function j(ee){const q=ee[0].intersectionRatio;if(q!==u){if(!G)return a();q?a(!1,q):i=setTimeout(()=>{a(!1,1e-7)},1e3)}q===1&&!a5(d,e.getBoundingClientRect())&&a(),G=!1}try{r=new IntersectionObserver(j,{...N,root:n.ownerDocument})}catch{r=new IntersectionObserver(j,N)}r.observe(e)}return a(!0),s}function cte(e,t,r,i){i===void 0&&(i={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:u=!1}=i,d=TT(e),p=n||s?[...d?H0(d):[],...H0(t)]:[];p.forEach(F=>{n&&F.addEventListener("scroll",r,{passive:!0}),s&&F.addEventListener("resize",r)});const v=d&&o?lte(d,r):null;let y=-1,_=null;a&&(_=new ResizeObserver(F=>{let[k]=F;k&&k.target===d&&_&&(_.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var N;(N=_)==null||N.observe(t)})),r()}),d&&!u&&_.observe(d),_.observe(t));let P,R=u?td(e):null;u&&M();function M(){const F=td(e);R&&!a5(R,F)&&r(),R=F,P=requestAnimationFrame(M)}return r(),()=>{var F;p.forEach(k=>{n&&k.removeEventListener("scroll",r),s&&k.removeEventListener("resize",r)}),v==null||v(),(F=_)==null||F.disconnect(),_=null,u&&cancelAnimationFrame(P)}}const ute=kee,hte=Lee,dte=Aee,fte=Nee,pte=Iee,hD=Fee,gte=Oee,mte=(e,t,r)=>{const i=new Map,n={platform:ate,...r},s={...n.platform,_c:i};return Mee(e,t,{...n,platform:s})};var vte=typeof document<"u",yte=function(){},nx=vte?D.useLayoutEffect:yte;function wC(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,i,n;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(i=r;i--!==0;)if(!wC(e[i],t[i]))return!1;return!0}if(n=Object.keys(e),r=n.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(t,n[i]))return!1;for(i=r;i--!==0;){const s=n[i];if(!(s==="_owner"&&e.$$typeof)&&!wC(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function l5(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function dD(e,t){const r=l5(e);return Math.round(t*r)/r}function nS(e){const t=D.useRef(e);return nx(()=>{t.current=e}),t}function wte(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:i=[],platform:n,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:u,open:d}=e,[p,v]=D.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[y,_]=D.useState(i);wC(y,i)||_(i);const[P,R]=D.useState(null),[M,F]=D.useState(null),k=D.useCallback(Ge=>{Ge!==ee.current&&(ee.current=Ge,R(Ge))},[]),N=D.useCallback(Ge=>{Ge!==q.current&&(q.current=Ge,F(Ge))},[]),G=s||P,j=a||M,ee=D.useRef(null),q=D.useRef(null),oe=D.useRef(p),ue=u!=null,me=nS(u),ie=nS(n),fe=nS(d),ke=D.useCallback(()=>{if(!ee.current||!q.current)return;const Ge={placement:t,strategy:r,middleware:y};ie.current&&(Ge.platform=ie.current),mte(ee.current,q.current,Ge).then(Ye=>{const ht={...Ye,isPositioned:fe.current!==!1};et.current&&!wC(oe.current,ht)&&(oe.current=ht,ju.flushSync(()=>{v(ht)}))})},[y,t,r,ie,fe]);nx(()=>{d===!1&&oe.current.isPositioned&&(oe.current.isPositioned=!1,v(Ge=>({...Ge,isPositioned:!1})))},[d]);const et=D.useRef(!1);nx(()=>(et.current=!0,()=>{et.current=!1}),[]),nx(()=>{if(G&&(ee.current=G),j&&(q.current=j),G&&j){if(me.current)return me.current(G,j,ke);ke()}},[G,j,ke,me,ue]);const Xe=D.useMemo(()=>({reference:ee,floating:q,setReference:k,setFloating:N}),[k,N]),ct=D.useMemo(()=>({reference:G,floating:j}),[G,j]),pt=D.useMemo(()=>{const Ge={position:r,left:0,top:0};if(!ct.floating)return Ge;const Ye=dD(ct.floating,p.x),ht=dD(ct.floating,p.y);return o?{...Ge,transform:"translate("+Ye+"px, "+ht+"px)",...l5(ct.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Ye,top:ht}},[r,o,ct.floating,p.x,p.y]);return D.useMemo(()=>({...p,update:ke,refs:Xe,elements:ct,floatingStyles:pt}),[p,ke,Xe,ct,pt])}const xte=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:i,padding:n}=typeof e=="function"?e(r):e;return i&&t(i)?i.current!=null?hD({element:i.current,padding:n}).fn(r):{}:i?hD({element:i,padding:n}).fn(r):{}}}},Cte=(e,t)=>({...ute(e),options:[e,t]}),_te=(e,t)=>({...hte(e),options:[e,t]}),bte=(e,t)=>({...gte(e),options:[e,t]}),Ste=(e,t)=>({...dte(e),options:[e,t]}),Ete=(e,t)=>({...fte(e),options:[e,t]}),Rte=(e,t)=>({...pte(e),options:[e,t]}),Tte=(e,t)=>({...xte(e),options:[e,t]});var Pte="Arrow",c5=D.forwardRef((e,t)=>{const{children:r,width:i=10,height:n=5,...s}=e;return V.jsx(Wr.svg,{...s,ref:t,width:i,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:V.jsx("polygon",{points:"0,0 30,0 15,10"})})});c5.displayName=Pte;var Mte=c5;function PT(e){const[t,r]=D.useState(void 0);return Du(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const s=n[0];let a,o;if("borderBoxSize"in s){const u=s.borderBoxSize,d=Array.isArray(u)?u[0]:u;a=d.inlineSize,o=d.blockSize}else a=e.offsetWidth,o=e.offsetHeight;r({width:a,height:o})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else r(void 0)},[e]),t}var MT="Popper",[u5,D1]=Ya(MT),[Fte,h5]=u5(MT),d5=e=>{const{__scopePopper:t,children:r}=e,[i,n]=D.useState(null);return V.jsx(Fte,{scope:t,anchor:i,onAnchorChange:n,children:r})};d5.displayName=MT;var f5="PopperAnchor",p5=D.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:i,...n}=e,s=h5(f5,r),a=D.useRef(null),o=Vi(t,a),u=D.useRef(null);return D.useEffect(()=>{const d=u.current;u.current=(i==null?void 0:i.current)||a.current,d!==u.current&&s.onAnchorChange(u.current)}),i?null:V.jsx(Wr.div,{...n,ref:o})});p5.displayName=f5;var FT="PopperContent",[Ate,Ite]=u5(FT),g5=D.forwardRef((e,t)=>{var qe,at,ot,Qe,Lt,Ot;const{__scopePopper:r,side:i="bottom",sideOffset:n=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:p=0,sticky:v="partial",hideWhenDetached:y=!1,updatePositionStrategy:_="optimized",onPlaced:P,...R}=e,M=h5(FT,r),[F,k]=D.useState(null),N=Vi(t,er=>k(er)),[G,j]=D.useState(null),ee=PT(G),q=(ee==null?void 0:ee.width)??0,oe=(ee==null?void 0:ee.height)??0,ue=i+(s!=="center"?"-"+s:""),me=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},ie=Array.isArray(d)?d:[d],fe=ie.length>0,ke={padding:me,boundary:ie.filter(kte),altBoundary:fe},{refs:et,floatingStyles:Xe,placement:ct,isPositioned:pt,middlewareData:Ge}=wte({strategy:"fixed",placement:ue,whileElementsMounted:(...er)=>cte(...er,{animationFrame:_==="always"}),elements:{reference:M.anchor},middleware:[Cte({mainAxis:n+oe,alignmentAxis:a}),u&&_te({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?bte():void 0,...ke}),u&&Ste({...ke}),Ete({...ke,apply:({elements:er,rects:Yt,availableWidth:Qt,availableHeight:qt})=>{const{width:Et,height:hr}=Yt.reference,rr=er.floating.style;rr.setProperty("--radix-popper-available-width",`${Qt}px`),rr.setProperty("--radix-popper-available-height",`${qt}px`),rr.setProperty("--radix-popper-anchor-width",`${Et}px`),rr.setProperty("--radix-popper-anchor-height",`${hr}px`)}}),G&&Tte({element:G,padding:o}),Lte({arrowWidth:q,arrowHeight:oe}),y&&Rte({strategy:"referenceHidden",...ke})]}),[Ye,ht]=y5(ct),Be=Al(P);Du(()=>{pt&&(Be==null||Be())},[pt,Be]);const ce=(qe=Ge.arrow)==null?void 0:qe.x,he=(at=Ge.arrow)==null?void 0:at.y,ve=((ot=Ge.arrow)==null?void 0:ot.centerOffset)!==0,[_e,Fe]=D.useState();return Du(()=>{F&&Fe(window.getComputedStyle(F).zIndex)},[F]),V.jsx("div",{ref:et.setFloating,"data-radix-popper-content-wrapper":"",style:{...Xe,transform:pt?Xe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(Qe=Ge.transformOrigin)==null?void 0:Qe.x,(Lt=Ge.transformOrigin)==null?void 0:Lt.y].join(" "),...((Ot=Ge.hide)==null?void 0:Ot.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:V.jsx(Ate,{scope:r,placedSide:Ye,onArrowChange:j,arrowX:ce,arrowY:he,shouldHideArrow:ve,children:V.jsx(Wr.div,{"data-side":Ye,"data-align":ht,...R,ref:N,style:{...R.style,animation:pt?void 0:"none"}})})})});g5.displayName=FT;var m5="PopperArrow",Dte={top:"bottom",right:"left",bottom:"top",left:"right"},v5=D.forwardRef(function(t,r){const{__scopePopper:i,...n}=t,s=Ite(m5,i),a=Dte[s.placedSide];return V.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:V.jsx(Mte,{...n,ref:r,style:{...n.style,display:"block"}})})});v5.displayName=m5;function kte(e){return e!==null}var Lte=e=>({name:"transformOrigin",options:e,fn(t){var M,F,k;const{placement:r,rects:i,middlewareData:n}=t,a=((M=n.arrow)==null?void 0:M.centerOffset)!==0,o=a?0:e.arrowWidth,u=a?0:e.arrowHeight,[d,p]=y5(r),v={start:"0%",center:"50%",end:"100%"}[p],y=(((F=n.arrow)==null?void 0:F.x)??0)+o/2,_=(((k=n.arrow)==null?void 0:k.y)??0)+u/2;let P="",R="";return d==="bottom"?(P=a?v:`${y}px`,R=`${-u}px`):d==="top"?(P=a?v:`${y}px`,R=`${i.floating.height+u}px`):d==="right"?(P=`${-u}px`,R=a?v:`${_}px`):d==="left"&&(P=`${i.floating.width+u}px`,R=a?v:`${_}px`),{data:{x:P,y:R}}}});function y5(e){const[t,r="center"]=e.split("-");return[t,r]}var w5=d5,x5=p5,C5=g5,_5=v5,Ote="Portal",k1=D.forwardRef((e,t)=>{var o;const{container:r,...i}=e,[n,s]=D.useState(!1);Du(()=>s(!0),[]);const a=r||n&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?D3.createPortal(V.jsx(Wr.div,{...i,ref:t}),a):null});k1.displayName=Ote;function Nte(e,t){return D.useReducer((r,i)=>t[r][i]??r,e)}var qo=e=>{const{present:t,children:r}=e,i=Bte(t),n=typeof r=="function"?r({present:i.isPresent}):D.Children.only(r),s=Vi(i.ref,zte(n));return typeof r=="function"||i.isPresent?D.cloneElement(n,{ref:s}):null};qo.displayName="Presence";function Bte(e){const[t,r]=D.useState(),i=D.useRef(null),n=D.useRef(e),s=D.useRef("none"),a=e?"mounted":"unmounted",[o,u]=Nte(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const d=xw(i.current);s.current=o==="mounted"?d:"none"},[o]),Du(()=>{const d=i.current,p=n.current;if(p!==e){const y=s.current,_=xw(d);e?u("MOUNT"):_==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(p&&y!==_?"ANIMATION_OUT":"UNMOUNT"),n.current=e}},[e,u]),Du(()=>{if(t){let d;const p=t.ownerDocument.defaultView??window,v=_=>{const R=xw(i.current).includes(CSS.escape(_.animationName));if(_.target===t&&R&&(u("ANIMATION_END"),!n.current)){const M=t.style.animationFillMode;t.style.animationFillMode="forwards",d=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=M)})}},y=_=>{_.target===t&&(s.current=xw(i.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",v),t.addEventListener("animationend",v),()=>{p.clearTimeout(d),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",v),t.removeEventListener("animationend",v)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:D.useCallback(d=>{i.current=d?getComputedStyle(d):null,r(d)},[])}}function xw(e){return(e==null?void 0:e.animationName)||"none"}function zte(e){var i,n;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Gte=rR[" useInsertionEffect ".trim().toString()]||Du;function Jp({prop:e,defaultProp:t,onChange:r=()=>{},caller:i}){const[n,s,a]=Vte({defaultProp:t,onChange:r}),o=e!==void 0,u=o?e:n;{const p=D.useRef(e!==void 0);D.useEffect(()=>{const v=p.current;v!==o&&console.warn(`${i} is changing from ${v?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=o},[o,i])}const d=D.useCallback(p=>{var v;if(o){const y=Hte(p)?p(e):p;y!==e&&((v=a.current)==null||v.call(a,y))}else s(p)},[o,e,s,a]);return[u,d]}function Vte({defaultProp:e,onChange:t}){const[r,i]=D.useState(e),n=D.useRef(r),s=D.useRef(t);return Gte(()=>{s.current=t},[t]),D.useEffect(()=>{var a;n.current!==r&&((a=s.current)==null||a.call(s,r),n.current=r)},[r,n]),[r,i,s]}function Hte(e){return typeof e=="function"}var Ute=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Wte="VisuallyHidden",b5=D.forwardRef((e,t)=>V.jsx(Wr.span,{...e,ref:t,style:{...Ute,...e.style}}));b5.displayName=Wte;var jte=b5,[L1]=Ya("Tooltip",[D1]),O1=D1(),S5="TooltipProvider",$te=700,r2="tooltip.open",[qte,AT]=L1(S5),E5=e=>{const{__scopeTooltip:t,delayDuration:r=$te,skipDelayDuration:i=300,disableHoverableContent:n=!1,children:s}=e,a=D.useRef(!0),o=D.useRef(!1),u=D.useRef(0);return D.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),V.jsx(qte,{scope:t,isOpenDelayedRef:a,delayDuration:r,onOpen:D.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:D.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,i)},[i]),isPointerInTransitRef:o,onPointerInTransitChange:D.useCallback(d=>{o.current=d},[]),disableHoverableContent:n,children:s})};E5.displayName=S5;var U0="Tooltip",[Kte,bv]=L1(U0),R5=e=>{const{__scopeTooltip:t,children:r,open:i,defaultOpen:n,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=e,u=AT(U0,e.__scopeTooltip),d=O1(t),[p,v]=D.useState(null),y=lp(),_=D.useRef(0),P=a??u.disableHoverableContent,R=o??u.delayDuration,M=D.useRef(!1),[F,k]=Jp({prop:i,defaultProp:n??!1,onChange:q=>{q?(u.onOpen(),document.dispatchEvent(new CustomEvent(r2))):u.onClose(),s==null||s(q)},caller:U0}),N=D.useMemo(()=>F?M.current?"delayed-open":"instant-open":"closed",[F]),G=D.useCallback(()=>{window.clearTimeout(_.current),_.current=0,M.current=!1,k(!0)},[k]),j=D.useCallback(()=>{window.clearTimeout(_.current),_.current=0,k(!1)},[k]),ee=D.useCallback(()=>{window.clearTimeout(_.current),_.current=window.setTimeout(()=>{M.current=!0,k(!0),_.current=0},R)},[R,k]);return D.useEffect(()=>()=>{_.current&&(window.clearTimeout(_.current),_.current=0)},[]),V.jsx(w5,{...d,children:V.jsx(Kte,{scope:t,contentId:y,open:F,stateAttribute:N,trigger:p,onTriggerChange:v,onTriggerEnter:D.useCallback(()=>{u.isOpenDelayedRef.current?ee():G()},[u.isOpenDelayedRef,ee,G]),onTriggerLeave:D.useCallback(()=>{P?j():(window.clearTimeout(_.current),_.current=0)},[j,P]),onOpen:G,onClose:j,disableHoverableContent:P,children:r})})};R5.displayName=U0;var i2="TooltipTrigger",T5=D.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,n=bv(i2,r),s=AT(i2,r),a=O1(r),o=D.useRef(null),u=Vi(t,o,n.onTriggerChange),d=D.useRef(!1),p=D.useRef(!1),v=D.useCallback(()=>d.current=!1,[]);return D.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),V.jsx(x5,{asChild:!0,...a,children:V.jsx(Wr.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...i,ref:u,onPointerMove:xr(e.onPointerMove,y=>{y.pointerType!=="touch"&&!p.current&&!s.isPointerInTransitRef.current&&(n.onTriggerEnter(),p.current=!0)}),onPointerLeave:xr(e.onPointerLeave,()=>{n.onTriggerLeave(),p.current=!1}),onPointerDown:xr(e.onPointerDown,()=>{n.open&&n.onClose(),d.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:xr(e.onFocus,()=>{d.current||n.onOpen()}),onBlur:xr(e.onBlur,n.onClose),onClick:xr(e.onClick,n.onClose)})})});T5.displayName=i2;var IT="TooltipPortal",[Zte,Xte]=L1(IT,{forceMount:void 0}),P5=e=>{const{__scopeTooltip:t,forceMount:r,children:i,container:n}=e,s=bv(IT,t);return V.jsx(Zte,{scope:t,forceMount:r,children:V.jsx(qo,{present:r||s.open,children:V.jsx(k1,{asChild:!0,container:n,children:i})})})};P5.displayName=IT;var Lp="TooltipContent",M5=D.forwardRef((e,t)=>{const r=Xte(Lp,e.__scopeTooltip),{forceMount:i=r.forceMount,side:n="top",...s}=e,a=bv(Lp,e.__scopeTooltip);return V.jsx(qo,{present:i||a.open,children:a.disableHoverableContent?V.jsx(F5,{side:n,...s,ref:t}):V.jsx(Yte,{side:n,...s,ref:t})})}),Yte=D.forwardRef((e,t)=>{const r=bv(Lp,e.__scopeTooltip),i=AT(Lp,e.__scopeTooltip),n=D.useRef(null),s=Vi(t,n),[a,o]=D.useState(null),{trigger:u,onClose:d}=r,p=n.current,{onPointerInTransitChange:v}=i,y=D.useCallback(()=>{o(null),v(!1)},[v]),_=D.useCallback((P,R)=>{const M=P.currentTarget,F={x:P.clientX,y:P.clientY},k=rre(F,M.getBoundingClientRect()),N=ire(F,k),G=nre(R.getBoundingClientRect()),j=ore([...N,...G]);o(j),v(!0)},[v]);return D.useEffect(()=>()=>y(),[y]),D.useEffect(()=>{if(u&&p){const P=M=>_(M,p),R=M=>_(M,u);return u.addEventListener("pointerleave",P),p.addEventListener("pointerleave",R),()=>{u.removeEventListener("pointerleave",P),p.removeEventListener("pointerleave",R)}}},[u,p,_,y]),D.useEffect(()=>{if(a){const P=R=>{const M=R.target,F={x:R.clientX,y:R.clientY},k=(u==null?void 0:u.contains(M))||(p==null?void 0:p.contains(M)),N=!sre(F,a);k?y():N&&(y(),d())};return document.addEventListener("pointermove",P),()=>document.removeEventListener("pointermove",P)}},[u,p,a,d,y]),V.jsx(F5,{...e,ref:s})}),[Qte,Jte]=L1(U0,{isInside:!1}),ere=SW("TooltipContent"),F5=D.forwardRef((e,t)=>{const{__scopeTooltip:r,children:i,"aria-label":n,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=e,u=bv(Lp,r),d=O1(r),{onClose:p}=u;return D.useEffect(()=>(document.addEventListener(r2,p),()=>document.removeEventListener(r2,p)),[p]),D.useEffect(()=>{if(u.trigger){const v=y=>{const _=y.target;_!=null&&_.contains(u.trigger)&&p()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[u.trigger,p]),V.jsx(P1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:v=>v.preventDefault(),onDismiss:p,children:V.jsxs(C5,{"data-state":u.stateAttribute,...d,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[V.jsx(ere,{children:i}),V.jsx(Qte,{scope:r,isInside:!0,children:V.jsx(jte,{id:u.contentId,role:"tooltip",children:n||i})})]})})});M5.displayName=Lp;var A5="TooltipArrow",tre=D.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,n=O1(r);return Jte(A5,r).isInside?null:V.jsx(_5,{...n,...i,ref:t})});tre.displayName=A5;function rre(e,t){const r=Math.abs(t.top-e.y),i=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,i,n,s)){case s:return"left";case n:return"right";case r:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function ire(e,t,r=5){const i=[];switch(t){case"top":i.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":i.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":i.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":i.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return i}function nre(e){const{top:t,right:r,bottom:i,left:n}=e;return[{x:n,y:t},{x:r,y:t},{x:r,y:i},{x:n,y:i}]}function sre(e,t){const{x:r,y:i}=e;let n=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s],u=t[a],d=o.x,p=o.y,v=u.x,y=u.y;p>i!=y>i&&r<(v-d)*(i-p)/(y-p)+d&&(n=!n)}return n}function ore(e){const t=e.slice();return t.sort((r,i)=>r.x<i.x?-1:r.x>i.x?1:r.y<i.y?-1:r.y>i.y?1:0),are(t)}function are(e){if(e.length<=1)return e.slice();const t=[];for(let i=0;i<e.length;i++){const n=e[i];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(n.y-a.y)>=(s.y-a.y)*(n.x-a.x))t.pop();else break}t.push(n)}t.pop();const r=[];for(let i=e.length-1;i>=0;i--){const n=e[i];for(;r.length>=2;){const s=r[r.length-1],a=r[r.length-2];if((s.x-a.x)*(n.y-a.y)>=(s.y-a.y)*(n.x-a.x))r.pop();else break}r.push(n)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var lre=E5,cre=R5,ure=T5,hre=P5,I5=M5;const Fn=lre,Si=cre,Ei=ure,yi=D.forwardRef(({className:e,sideOffset:t=4,...r},i)=>V.jsx(hre,{children:V.jsx(I5,{ref:i,sideOffset:t,className:Xi("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r})}));yi.displayName=I5.displayName;const fD=({feature:e,index:t,selectedFeature:r,onFeatureSelect:i,onFeatureHover:n})=>{const s=e.properties||{},a=e.layer.id.split(".")[1],o=a==="stp"?"":a==="stl"?"":"",u=[{label:"",key:"avts"},{label:"",key:"name_otch"},{label:"",key:"org_isp"},{label:" ",key:"god_nach"},{label:" ",key:"god_end"},{label:"",key:"method"},{label:"",key:"nom_1000"},{label:"",key:"scale"},{label:"",key:"tgf"},{label:".  ",key:"in_n_rosg"},{label:".  ",key:"in_n_tgf"},{label:" ",key:"n_uk_rosg"},{label:" ",key:"n_uk_tgf"},{label:"",key:"web_uk_id"},{label:"",key:"vid_iz"},{label:"",key:"id"}],d=r&&r.properties.id===e.properties.id;return V.jsxs("div",{className:"overflow-x-auto mb-6",children:[V.jsxs("h3",{className:`font-medium mb-2 dark:text-slate-200 cursor-pointer transition-colors duration-200 ${d?"bg-blue-200 dark:bg-blue-800 p-1 rounded":"hover:bg-gray-100 dark:hover:bg-slate-700 p-1 rounded"}`,onClick:()=>i(d?null:e),onMouseEnter:()=>n(e),onMouseLeave:()=>n(null),children:[" ",t+1," (",o,")"]}),V.jsxs("table",{className:"min-w-full border-collapse mb-4",children:[V.jsx("thead",{children:V.jsxs("tr",{children:[V.jsx("th",{className:"border border-gray-300 p-2 dark:bg-slate-800 dark:text-slate-200",children:""}),V.jsx("th",{className:"border border-gray-300 p-2 dark:bg-slate-800 dark:text-slate-200",children:""})]})}),V.jsx("tbody",{children:u.map((p,v)=>V.jsxs("tr",{className:v%2===0?"bg-white dark:bg-slate-800":"bg-gray-50 dark:bg-slate-700",children:[V.jsx("td",{className:"border border-gray-300 p-2 dark:text-slate-200",children:p.label}),V.jsx("td",{className:"border border-gray-300 p-2 dark:text-slate-200",children:s[p.key]||"-"})]},p.key))})]})]})};function dre({selectedLu:e,onMarkerPlace:t,onExportToExcel:r}){return V.jsxs("div",{className:"sticky top-0 bg-background z-10 pb-3",children:[V.jsx("h3",{className:"text-sm font-medium mb-3 bg-purple-100 p-2 rounded",children:"  "}),V.jsx("div",{className:"flex gap-2 px-3 pb-2",children:V.jsxs(Fn,{children:[V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:"outline",size:"icon",className:"w-10 h-10",onClick:()=>e&&t(e,!1),disabled:!e,children:V.jsx(Xm,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"left",children:V.jsx("p",{children:" "})})]}),V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:"outline",size:"icon",className:"w-10 h-10",onClick:()=>e&&r(e),disabled:!e,children:V.jsx(qE,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"left",children:V.jsx("p",{children:"  Excel"})})]})]})})]})}function fre({luFeatures:e,selectedLu:t,onLuSelect:r,onExportLuToExcel:i,visibleLayers:n,onFeatureSelect:s,onFeatureHover:a}){return D.useEffect(()=>{},[t]),V.jsx("div",{className:"h-full flex flex-col",children:V.jsxs("div",{className:"flex-1 flex flex-col px-3 pb-3 overflow-hidden",children:[V.jsx(dre,{selectedLu:t,onMarkerPlace:(o,u=!0)=>r(o,u),onExportToExcel:i}),V.jsxs("div",{className:"mb-4 flex-1 flex flex-col",children:[V.jsxs("label",{className:"text-sm font-medium mb-2 block",children:[" : (",e.length,")"]}),V.jsx("div",{className:"space-y-1 flex-1 overflow-y-auto border rounded p-2 max-h-96    ",children:e.slice().sort((o,u)=>{const d=o.properties.name_rus||o.properties.name||` ${o.properties.id}`,p=u.properties.name_rus||u.properties.name||` ${u.properties.id}`;return d.localeCompare(p)}).map((o,u)=>V.jsx("div",{className:`p-2 rounded cursor-pointer hover:bg-gray-100 ${(t==null?void 0:t.properties.id)===o.properties.id?"bg-blue-100 border-blue-30":""}`,onClick:()=>{(t==null?void 0:t.properties.id)===o.properties.id?r(null,!1):r(o,!1)},children:V.jsx("span",{className:"text-sm",children:o.properties.name_rus||o.properties.name||` ${o.properties.id}`})},u))})]})]})})}function pD(e){if(e.length===0)return;const t=Mn.book_new(),r={avts:"",name_otch:"",org_isp:"",god_nach:" ",god_end:" ",method:"",nom_1000:"",scale:"",tgf:"",in_n_rosg:".  ",in_n_tgf:".  ",n_uk_rosg:" ",n_uk_tgf:" ",web_uk_id:"",vid_iz:"",id:"",name_otch1:" ()"},i=Array.from(new Set(e.flatMap(p=>Object.keys(p.properties)))),n=e.reduce((p,v)=>{const y=v.layer.id.split(".")[1];return p[y]||(p[y]=[]),p[y].push(v),p},{});Object.entries(n).forEach(([p,v])=>{const y=p==="stp"?"":p==="stl"?"":"",P=[i.map(M=>r[M]||M),...v.map(M=>i.map(F=>M.properties[F]||""))],R=Mn.aoa_to_sheet(P);Mn.book_append_sheet(t,R,y)});const a=[[...i.map(p=>r[p]||p),""],...e.map(p=>[...i.map(v=>p.properties[v]||""),p.layer.id.split(".")[1]==="stp"?"":p.layer.id.split(".")[1]==="stl"?"":""])],o=Mn.aoa_to_sheet(a);Mn.book_append_sheet(t,o,"");const u=[[" ",""],...i.map(p=>[p,r[p]||""])],d=Mn.aoa_to_sheet(u);Mn.book_append_sheet(t,d,""),xT(t,"export.xlsx")}function pre({hoveredFeatures:e,clickedFeatures:t,children:r,showFeatureTable:i,onToggleFeatureTable:n,activeInfoMode:s,onSetActiveInfoMode:a,showMarkerInfo:o,onToggleMarkerInfo:u,showMarkerAttributes:d,showLuSelect:p,onToggleLuSelect:v,luFeatures:y,selectedLu:_,onLuSelect:P,onExportLuToExcel:R,showAttributes:M,onToggleAttributes:F,selectedFeature:k,onFeatureSelect:N,onFeatureHover:G,onMarkerAttributesClick:j,showRectangleSelection:ee,onSetRectangleSelection:q,visibleLayers:oe}){const ue=s!==null||o&&t.length>0||p;return V.jsxs(YR,{direction:"horizontal",children:[V.jsx(Oh,{minSize:40,defaultSize:40,children:r}),V.jsx(eC,{className:"w-1 bg-border"}),V.jsx(Oh,{minSize:0,defaultSize:ue?20:0,className:"bg-background",children:V.jsxs("div",{className:"h-full flex flex-col",children:[o&&V.jsxs("div",{className:"flex-1 flex flex-col",children:[V.jsxs("div",{className:"sticky top-0 bg-background z-10 pb-3",children:[V.jsx("h3",{className:"text-sm font-medium mb-3 bg-blue-100 p-2 rounded",children:"  "}),V.jsx("div",{className:"flex gap-2 px-3",children:V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:"outline",size:"sm",onClick:()=>pD(t),className:"h-8",disabled:t.length===0,children:V.jsx(qE,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:"  Excel"})})]})})})]}),V.jsx("div",{className:"flex-1 overflow-auto px-3 pb-3",children:t.length>0?t.map((me,ie)=>V.jsx(fD,{feature:me,index:ie,selectedFeature:k,onFeatureSelect:N,onFeatureHover:G},`clicked-${ie}`)):V.jsx("p",{className:"text-muted-foreground",children:"        "})})]}),s&&V.jsxs("div",{className:"flex-1 flex flex-col",children:[V.jsxs("div",{className:"sticky top-0 bg-background z-10 pb-3",children:[V.jsxs("h3",{className:"text-sm font-medium mb-3 bg-gray-100 p-2 rounded",children:["   - ",s==="points"?"":s==="lines"?"":""]}),V.jsx("div",{className:"flex gap-2 px-3",children:V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:"outline",size:"sm",onClick:()=>pD(e),className:"h-8",disabled:e.length===0,children:V.jsx(qE,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:"  Excel"})})]})})})]}),V.jsx("div",{className:"flex-1 overflow-auto px-3 pb-3",children:e.length>0?e.map((me,ie)=>V.jsx(fD,{feature:me,index:ie,selectedFeature:k,onFeatureSelect:N,onFeatureHover:G},`hovered-${ie}`)):V.jsx("p",{className:"text-muted-foreground",children:"       "})})]}),p&&V.jsx("div",{className:"h-full flex flex-col",children:V.jsx(fre,{luFeatures:y,selectedLu:_,onLuSelect:P,onExportLuToExcel:R,visibleLayers:oe,onFeatureSelect:N,onFeatureHover:G})})]})}),V.jsx(eC,{className:"w-1 bg-border"}),V.jsx(Oh,{minSize:4,maxSize:4,defaultSize:4,className:"bg-background border-l border-border",children:V.jsx("div",{className:"h-full flex flex-col items-center justify-start gap-2 p-2",children:V.jsxs(Fn,{children:[V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:s==="points"?"default":"outline",size:"icon",onClick:()=>{s==="points"?a(null):(a("points"),u(!1),q(!1))},className:"w-10 h-10",children:V.jsx(Xm,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"left",children:V.jsx("p",{children:"   - "})})]}),V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:s==="lines"?"default":"outline",size:"icon",onClick:()=>{s==="lines"?a(null):(a("lines"),u(!1),q(!1))},className:"w-10 h-10",children:V.jsx(Cj,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"left",children:V.jsx("p",{children:"   - "})})]}),V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:s==="polygons"?"default":"outline",size:"icon",onClick:()=>{s==="polygons"?a(null):(a("polygons"),u(!1),q(!1))},className:"w-10 h-10",children:V.jsx(Qw,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"left",children:V.jsx("p",{children:"   - "})})]}),V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:o?"default":"outline",size:"icon",onClick:()=>{o?u(!1):(u(!0),a(null),q(!1))},className:"w-10 h-10",children:V.jsx(pj,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"left",children:V.jsx("p",{children:"  "})})]}),V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:d?"default":"outline",size:"icon",onClick:()=>{j(),a(null),u(!1),q(!1)},className:"w-10 h-10",children:V.jsx(Sj,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"left",children:V.jsx("p",{children:"  "})})]}),V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:ee?"default":"outline",size:"icon",onClick:()=>{ee?q(!1):(q(!0),a(null),u(!1))},className:"w-10 h-10",children:V.jsx(xj,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"left",children:V.jsx("p",{children:" "})})]}),V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:p?"default":"outline",size:"icon",onClick:()=>{p?v(!1):(v(!0),a(null),u(!1),q(!1))},className:"w-10 h-10",children:V.jsx(hj,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"left",children:V.jsx("p",{children:"  "})})]})]})})})]},ue?"show":"hide")}function gre(){return V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:"outline",size:"icon",className:"w-10 h-10",children:V.jsx(gj,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"right",children:V.jsx("p",{children:"Home"})})]})})}function mre({onClick:e,isActive:t}){return V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:t?"default":"outline",size:"icon",className:"w-10 h-10",onClick:e,children:V.jsx(mj,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"right",children:V.jsx("p",{children:""})})]})})}function vre({onClick:e,isActive:t}){return V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:t?"default":"outline",size:"icon",className:"w-10 h-10",onClick:e,children:V.jsx(vj,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"right",children:V.jsx("p",{children:" "})})]})})}function yre({onClick:e,isActive:t}){return V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:t?"default":"outline",size:"icon",onClick:e,className:"w-10 h-10",children:V.jsx(yj,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"right",children:""})]})}function wre({onClick:e,isActive:t}){return V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:t?"default":"outline",size:"icon",className:"w-10 h-10",onClick:e,children:V.jsx(bj,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"right",children:V.jsx("p",{children:""})})]})})}function xre(){return V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsx(gi,{variant:"outline",size:"icon",className:"w-10 h-10",children:V.jsx(Ej,{className:"w-4 h-4"})})}),V.jsx(yi,{side:"right",children:V.jsx("p",{children:"User"})})]})})}function Cre({onLayersClick:e,onBaseMapsClick:t,onLegendClick:r,onAttributesClick:i,isLayersActive:n,isBaseMapsActive:s,isLegendActive:a,isAttributesActive:o}){return V.jsxs("div",{className:"flex flex-col items-center justify-between gap-2 p-2 bg-background border-r border-border h-full",children:[V.jsxs("div",{className:"flex flex-col items-center gap-2",children:[V.jsx(gre,{}),V.jsx(mre,{onClick:e,isActive:n}),V.jsx(vre,{onClick:t,isActive:s}),V.jsx(yre,{onClick:r,isActive:a}),V.jsx(wre,{onClick:i,isActive:o})]}),V.jsx(xre,{})]})}function D5(e){const t=e+"CollectionProvider",[r,i]=Ya(t),[n,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=R=>{const{scope:M,children:F}=R,k=Rt.useRef(null),N=Rt.useRef(new Map).current;return V.jsx(n,{scope:M,itemMap:N,collectionRef:k,children:F})};a.displayName=t;const o=e+"CollectionSlot",u=Ap(o),d=Rt.forwardRef((R,M)=>{const{scope:F,children:k}=R,N=s(o,F),G=Vi(M,N.collectionRef);return V.jsx(u,{ref:G,children:k})});d.displayName=o;const p=e+"CollectionItemSlot",v="data-radix-collection-item",y=Ap(p),_=Rt.forwardRef((R,M)=>{const{scope:F,children:k,...N}=R,G=Rt.useRef(null),j=Vi(M,G),ee=s(p,F);return Rt.useEffect(()=>(ee.itemMap.set(G,{ref:G,...N}),()=>void ee.itemMap.delete(G))),V.jsx(y,{[v]:"",ref:j,children:k})});_.displayName=p;function P(R){const M=s(e+"CollectionConsumer",R);return Rt.useCallback(()=>{const k=M.collectionRef.current;if(!k)return[];const N=Array.from(k.querySelectorAll(`[${v}]`));return Array.from(M.itemMap.values()).sort((ee,q)=>N.indexOf(ee.ref.current)-N.indexOf(q.ref.current))},[M.collectionRef,M.itemMap])}return[{Provider:a,Slot:d,ItemSlot:_},P,i]}var _re=D.createContext(void 0);function N1(e){const t=D.useContext(_re);return e||t||"ltr"}var sS="rovingFocusGroup.onEntryFocus",bre={bubbles:!1,cancelable:!0},Sv="RovingFocusGroup",[n2,k5,Sre]=D5(Sv),[Ere,eg]=Ya(Sv,[Sre]),[Rre,Tre]=Ere(Sv),L5=D.forwardRef((e,t)=>V.jsx(n2.Provider,{scope:e.__scopeRovingFocusGroup,children:V.jsx(n2.Slot,{scope:e.__scopeRovingFocusGroup,children:V.jsx(Pre,{...e,ref:t})})}));L5.displayName=Sv;var Pre=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:n=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:p=!1,...v}=e,y=D.useRef(null),_=Vi(t,y),P=N1(s),[R,M]=Jp({prop:a,defaultProp:o??null,onChange:u,caller:Sv}),[F,k]=D.useState(!1),N=Al(d),G=k5(r),j=D.useRef(!1),[ee,q]=D.useState(0);return D.useEffect(()=>{const oe=y.current;if(oe)return oe.addEventListener(sS,N),()=>oe.removeEventListener(sS,N)},[N]),V.jsx(Rre,{scope:r,orientation:i,dir:P,loop:n,currentTabStopId:R,onItemFocus:D.useCallback(oe=>M(oe),[M]),onItemShiftTab:D.useCallback(()=>k(!0),[]),onFocusableItemAdd:D.useCallback(()=>q(oe=>oe+1),[]),onFocusableItemRemove:D.useCallback(()=>q(oe=>oe-1),[]),children:V.jsx(Wr.div,{tabIndex:F||ee===0?-1:0,"data-orientation":i,...v,ref:_,style:{outline:"none",...e.style},onMouseDown:xr(e.onMouseDown,()=>{j.current=!0}),onFocus:xr(e.onFocus,oe=>{const ue=!j.current;if(oe.target===oe.currentTarget&&ue&&!F){const me=new CustomEvent(sS,bre);if(oe.currentTarget.dispatchEvent(me),!me.defaultPrevented){const ie=G().filter(ct=>ct.focusable),fe=ie.find(ct=>ct.active),ke=ie.find(ct=>ct.id===R),Xe=[fe,ke,...ie].filter(Boolean).map(ct=>ct.ref.current);B5(Xe,p)}}j.current=!1}),onBlur:xr(e.onBlur,()=>k(!1))})})}),O5="RovingFocusGroupItem",N5=D.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:n=!1,tabStopId:s,children:a,...o}=e,u=lp(),d=s||u,p=Tre(O5,r),v=p.currentTabStopId===d,y=k5(r),{onFocusableItemAdd:_,onFocusableItemRemove:P,currentTabStopId:R}=p;return D.useEffect(()=>{if(i)return _(),()=>P()},[i,_,P]),V.jsx(n2.ItemSlot,{scope:r,id:d,focusable:i,active:n,children:V.jsx(Wr.span,{tabIndex:v?0:-1,"data-orientation":p.orientation,...o,ref:t,onMouseDown:xr(e.onMouseDown,M=>{i?p.onItemFocus(d):M.preventDefault()}),onFocus:xr(e.onFocus,()=>p.onItemFocus(d)),onKeyDown:xr(e.onKeyDown,M=>{if(M.key==="Tab"&&M.shiftKey){p.onItemShiftTab();return}if(M.target!==M.currentTarget)return;const F=Are(M,p.orientation,p.dir);if(F!==void 0){if(M.metaKey||M.ctrlKey||M.altKey||M.shiftKey)return;M.preventDefault();let N=y().filter(G=>G.focusable).map(G=>G.ref.current);if(F==="last")N.reverse();else if(F==="prev"||F==="next"){F==="prev"&&N.reverse();const G=N.indexOf(M.currentTarget);N=p.loop?Ire(N,G+1):N.slice(G+1)}setTimeout(()=>B5(N))}}),children:typeof a=="function"?a({isCurrentTabStop:v,hasTabStop:R!=null}):a})})});N5.displayName=O5;var Mre={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Fre(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Are(e,t,r){const i=Fre(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return Mre[i]}function B5(e,t=!1){const r=document.activeElement;for(const i of e)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}function Ire(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var DT=L5,kT=N5,B1="Tabs",[Dre]=Ya(B1,[eg]),z5=eg(),[kre,LT]=Dre(B1),G5=D.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,onValueChange:n,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:u="automatic",...d}=e,p=N1(o),[v,y]=Jp({prop:i,onChange:n,defaultProp:s??"",caller:B1});return V.jsx(kre,{scope:r,baseId:lp(),value:v,onValueChange:y,orientation:a,dir:p,activationMode:u,children:V.jsx(Wr.div,{dir:p,"data-orientation":a,...d,ref:t})})});G5.displayName=B1;var V5="TabsList",H5=D.forwardRef((e,t)=>{const{__scopeTabs:r,loop:i=!0,...n}=e,s=LT(V5,r),a=z5(r);return V.jsx(DT,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:i,children:V.jsx(Wr.div,{role:"tablist","aria-orientation":s.orientation,...n,ref:t})})});H5.displayName=V5;var U5="TabsTrigger",W5=D.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,disabled:n=!1,...s}=e,a=LT(U5,r),o=z5(r),u=q5(a.baseId,i),d=K5(a.baseId,i),p=i===a.value;return V.jsx(kT,{asChild:!0,...o,focusable:!n,active:p,children:V.jsx(Wr.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":d,"data-state":p?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...s,ref:t,onMouseDown:xr(e.onMouseDown,v=>{!n&&v.button===0&&v.ctrlKey===!1?a.onValueChange(i):v.preventDefault()}),onKeyDown:xr(e.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&a.onValueChange(i)}),onFocus:xr(e.onFocus,()=>{const v=a.activationMode!=="manual";!p&&!n&&v&&a.onValueChange(i)})})})});W5.displayName=U5;var j5="TabsContent",$5=D.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,forceMount:n,children:s,...a}=e,o=LT(j5,r),u=q5(o.baseId,i),d=K5(o.baseId,i),p=i===o.value,v=D.useRef(p);return D.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),V.jsx(qo,{present:n||p,children:({present:y})=>V.jsx(Wr.div,{"data-state":p?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":u,hidden:!y,id:d,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:v.current?"0s":void 0},children:y&&s})})});$5.displayName=j5;function q5(e,t){return`${e}-trigger-${t}`}function K5(e,t){return`${e}-content-${t}`}var Lre=G5,Z5=H5,X5=W5,Y5=$5;const Ore=Lre,Q5=D.forwardRef(({className:e,...t},r)=>V.jsx(Z5,{ref:r,className:Xi("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Q5.displayName=Z5.displayName;const sx=D.forwardRef(({className:e,...t},r)=>V.jsx(X5,{ref:r,className:Xi("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));sx.displayName=X5.displayName;const ox=D.forwardRef(({className:e,...t},r)=>V.jsx(Y5,{ref:r,className:Xi("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ox.displayName=Y5.displayName;var rd=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,r){const i=t?this.allAsyncListeners:this.allSyncListeners;let n=i.get(e);return!n&&r&&(n=new Set,i.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,r=!1){this.getListeners(e,r,!0).add(t)}removeEventListener(e,t,r=!1){const i=this.getListeners(e,r,!1);i&&(i.delete(t),i.size===0&&(r?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const r=e.type;if(t&&"event"in e){const o=e.event;o instanceof Event&&(e.eventPath=o.composedPath())}const{frameworkOverrides:i}=this,n=o=>{const u=i?()=>i.wrapIncoming(o):o;t?this.dispatchAsync(u):u()},s=this.getListeners(r,t,!1);if(((s==null?void 0:s.size)??0)>0){const o=new Set(s);for(const u of o)s!=null&&s.has(u)&&n(()=>u(e))}const a=this.getGlobalListeners(t);if(a.size>0){const o=new Set(a);for(const u of o)n(()=>u(r,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};function pc(e){return e==null||e===""?null:e}function Wt(e){return e!=null&&e!==""}function Gi(e){return!Wt(e)}function s2(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function W0(e,t){const r=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return r===i}function Nre(e,t,r=!1){const i=e==null,n=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&n)return 0;if(i)return-1;if(n)return 1;function s(a,o){return a>o?1:a<o?-1:0}if(typeof e!="string"||!r)return s(e,t);try{return e.localeCompare(t)}catch{return s(e,t)}}var Bre=/[&<>"']/g,zre={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function tg(e){return(e==null?void 0:e.toString().toString())??null}function i0(e){var t;return((t=tg(e))==null?void 0:t.replace(Bre,r=>zre[r]))??null}function j0(e){return e.eRootDiv.getRootNode()}function Yi(e){return j0(e).activeElement}function ss(e){const{gos:t,eRootDiv:r}=e;let i=null;const n=t.get("getDocument");return n&&Wt(n)?i=n():r&&(i=r.ownerDocument),i&&Wt(i)?i:document}function J5(e){const t=Yi(e);return t===null||t===ss(e).body}function eB(e){return ss(e).defaultView||window}function OT(e){let t=null,r=null;try{t=ss(e).fullscreenElement}catch{}finally{t||(t=j0(e));const i=t.querySelector("body");i?r=i:t instanceof ShadowRoot?r=t:t instanceof Document?r=t==null?void 0:t.documentElement:r=t}return r}function Gre(e){const t=OT(e);return(t==null?void 0:t.clientWidth)??(window.innerWidth||-1)}function Vre(e){const t=OT(e);return(t==null?void 0:t.clientHeight)??(window.innerHeight||-1)}function Qa(e,t,r){r==null||typeof r=="string"&&r==""?tB(e,t):Ja(e,t,r)}function Ja(e,t,r){e.setAttribute(rB(t),r.toString())}function tB(e,t){e.removeAttribute(rB(t))}function rB(e){return`aria-${e}`}function id(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function Hre(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function Ure(e){return e.getAttribute("aria-label")}function Op(e,t){Qa(e,"label",t)}function $0(e,t){Qa(e,"labelledby",t)}function iB(e,t){Qa(e,"live",t)}function Wre(e,t){Qa(e,"atomic",t)}function jre(e,t){Qa(e,"relevant",t)}function $re(e,t){Qa(e,"invalid",t)}function qre(e,t){Qa(e,"disabled",t)}function nB(e,t){Qa(e,"hidden",t)}function o2(e,t){Ja(e,"expanded",t)}function Kre(e,t){Ja(e,"setsize",t)}function Zre(e,t){Ja(e,"posinset",t)}function Xre(e,t){Ja(e,"rowcount",t)}function sB(e,t){Ja(e,"rowindex",t)}function Yre(e,t){Ja(e,"rowspan",t)}function Qre(e,t){Ja(e,"colcount",t)}function oB(e,t){Ja(e,"colindex",t)}function Jre(e,t){Ja(e,"colspan",t)}function eie(e,t){Ja(e,"sort",t)}function tie(e){tB(e,"sort")}function aB(e,t){Qa(e,"selected",t)}function rie(e,t){Qa(e,"controls",t)}function iie(e,t){rie(e,t.id),$0(t,e.id)}function gD(e,t){Qa(e,"owns",t)}function z1(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var nie="[tabindex], input, select, button, textarea, [href]",lB="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function NT(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),n=t.call(e,lB),s=Pc(e);return i&&!n&&s}function qi(e,t,r={}){const{skipAriaHidden:i}=r;e.classList.toggle("ag-hidden",!t),i||nB(e,!t)}function sie(e,t,r={}){const{skipAriaHidden:i}=r;e.classList.toggle("ag-invisible",!t),i||nB(e,!t)}function q0(e,t){const r="disabled",i=t?s=>s.setAttribute(r,""):s=>s.removeAttribute(r);i(e);const n=e.querySelectorAll("input")??[];for(const s of n)i(s)}function Bh(e,t,r){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof r=="number"){if(++i>r)break}else if(e===r)break}return!1}function Cd(e){const{height:t,width:r,borderTopWidth:i,borderRightWidth:n,borderBottomWidth:s,borderLeftWidth:a,paddingTop:o,paddingRight:u,paddingBottom:d,paddingLeft:p,marginTop:v,marginRight:y,marginBottom:_,marginLeft:P,boxSizing:R}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(r||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(a||"0"),paddingTop:parseFloat(o||"0"),paddingRight:parseFloat(u||"0"),paddingBottom:parseFloat(d||"0"),paddingLeft:parseFloat(p||"0"),marginTop:parseFloat(v||"0"),marginRight:parseFloat(y||"0"),marginBottom:parseFloat(_||"0"),marginLeft:parseFloat(P||"0"),boxSizing:R}}function BT(e){const t=Cd(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function K0(e){const t=Cd(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function cB(e){const{height:t,marginBottom:r,marginTop:i}=Cd(e);return Math.floor(t+r+i)}function xC(e){const{width:t,marginLeft:r,marginRight:i}=Cd(e);return Math.floor(t+r+i)}function uB(e){const t=e.getBoundingClientRect(),{borderTopWidth:r,borderLeftWidth:i,borderRightWidth:n,borderBottomWidth:s}=Cd(e);return{top:t.top+(r||0),left:t.left+(i||0),right:t.right+(n||0),bottom:t.bottom+(s||0)}}function CC(e,t){let r=e.scrollLeft;return t&&(r=Math.abs(r)),r}function _C(e,t,r){r&&(t*=-1),e.scrollLeft=t}function bo(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function Ou(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function hB(e){return!!e.offsetParent}function Pc(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!hB(e)||window.getComputedStyle(e).visibility!=="visible")}function zT(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function ax(e){return()=>{const t=e();return t?GT(t)||dB(t):!0}}function GT(e){return e.clientWidth<e.scrollWidth}function dB(e){return e.clientHeight<e.scrollHeight}function bC(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Pl(e,t)}function Pl(e,t){t=VT(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function n0(e,t){t=VT(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function VT(e){return typeof e=="number"?`${e}px`:e}function HT(e){return e instanceof Node||e instanceof HTMLElement}function Bo(e,t,r){r==null||r===""?e.removeAttribute(t):e.setAttribute(t,r.toString())}function Mc(e,t,r){const n=eB(e).ResizeObserver,s=n?new n(r):null;return s==null||s.observe(t),()=>s==null?void 0:s.disconnect()}function Fc(e,t){const r=eB(e);r.requestAnimationFrame?r.requestAnimationFrame(t):r.webkitRequestAnimationFrame?r.webkitRequestAnimationFrame(t):r.setTimeout(t,0)}var fB="data-ref",oS;function mD(){return oS??(oS=document.createTextNode(" ")),oS.cloneNode()}function Ev(e){const{attrs:t,children:r,cls:i,ref:n,role:s,tag:a}=e,o=document.createElement(a);if(i&&(o.className=i),n&&o.setAttribute(fB,n),s&&o.setAttribute("role",s),t)for(const u of Object.keys(t))o.setAttribute(u,t[u]);if(r)if(typeof r=="string")o.textContent=r;else{let u=!0;for(const d of r)d&&(typeof d=="string"?(o.appendChild(document.createTextNode(d)),u=!1):typeof d=="function"?o.appendChild(d()):(u&&(o.appendChild(mD()),u=!1),o.append(Ev(d)),o.appendChild(mD())))}return o}var oie=["touchstart","touchend","touchmove","touchcancel","scroll"],aie=["wheel"],aS={},pB=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r=>{if(typeof aS[r]=="boolean")return aS[r];const i=document.createElement(e[r]||"div");return r="on"+r,aS[r]=r in i}})();function lie(e,t){return!t||!e?!1:uie(t).indexOf(e)>=0}function cie(e){const t=[];let r=e.target;for(;r;)t.push(r),r=r.parentElement;return t}function uie(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():cie(t)}function hie(e,t,r){const i=die(t);let n;i!=null&&(n={passive:i}),e.addEventListener(t,r,n)}var die=e=>{const t=oie.includes(e),r=aie.includes(e);if(t)return!0;if(r)return!1};function gB(e,t,r){if(r===0)return!1;const i=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(i,n)<=r}function Z0(e,t){return e.gos.isElementInThisInstance(t.target)}function fie(e,t,r){const n=e.getBoundingClientRect().height,s=Gre(r)-2,a=Vre(r)-2;if(!e.offsetParent)return;const u=uB(e.offsetParent),{clientY:d,clientX:p}=t;let v=d-u.top-n/2,y=p-u.left-10;const _=ss(r),P=_.defaultView||window,R=P.pageYOffset||_.documentElement.scrollTop,M=P.pageXOffset||_.documentElement.scrollLeft;s>0&&y+e.clientWidth>s+M&&(y=s+M-e.clientWidth),y<0&&(y=0),a>0&&v+e.clientHeight>a+R&&(v=a+R-e.clientHeight),v<0&&(v=0),e.style.left=`${y}px`,e.style.top=`${v}px`}function pie(e,t){return t}function mB(e){return(e==null?void 0:e.getLocaleTextFunc())??pie}function gie(e,t,r,i){const n=t[r];return e.getLocaleTextFunc()(r,typeof n=="function"?n(i):n,i)}function mie(e){return(t,r,i)=>e({key:t,defaultValue:r,variableValues:i})}function vie(e){return(t,r,i)=>{let n=e&&e[t];if(n&&i&&i.length){let s=0;for(;!(s>=i.length||n.indexOf("${variable}")===-1);)n=n.replace("${variable}",i[s++])}return n??r}}var Nl=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,r){this.localEventService||(this.localEventService=new rd),this.localEventService.addEventListener(e,t,r)}removeEventListener(e,t,r){var i;(i=this.localEventService)==null||i.removeEventListener(e,t,r)}dispatchLocalEvent(e){var t;(t=this.localEventService)==null||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const r=[];for(const i of Object.keys(t)){const n=t[i];n&&r.push(this._setupListener(e,i,n))}return r}_setupListener(e,t,r){if(this.destroyed)return()=>null;let i;if(yie(e))e.__addEventListener(t,r),i=()=>(e.__removeEventListener(t,r),null);else{const n=wie(e);e instanceof HTMLElement?hie(e,t,r):n?e.addListener(t,r):e.addEventListener(t,r),i=n?()=>(e.removeListener(t,r),null):()=>(e.removeEventListener(t,r),null)}return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==i),null)}setupPropertyListener(e,t){const{gos:r}=this;r.addPropertyEventListener(e,t);const i=()=>(r.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const r=e.join("-")+this.propertyListenerId++,i=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[r])return;this.lastChangeSetIdLookup[r]=n.changeSet.id}const s={type:"propertyChanged",changeSet:n.changeSet,source:n.source};t(s)};e.forEach(n=>this.setupPropertyListener(n,i))}getLocaleTextFunc(){return mB(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const r=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),r}createBean(e,t,r){return(t||this.stubContext).createBean(e,r)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function yie(e){return e.__addEventListener!==void 0}function wie(e){return e.eventServiceType==="global"}var ft=class extends Nl{},vD={};function UT(e,t){vD[t]||(e(),vD[t]=!0)}var xie={pending:!1,funcs:[]},Cie={pending:!1,funcs:[]};function a2(e,t="setTimeout",r){const i=t==="raf"?Cie:xie;if(i.funcs.push(e),i.pending)return;i.pending=!0;const n=()=>{const s=i.funcs.slice();i.funcs.length=0,i.pending=!1,s.forEach(a=>a())};t==="raf"?Fc(r,n):window.setTimeout(n,0)}function os(e,t,r){let i;return function(...n){const s=this;window.clearTimeout(i),i=window.setTimeout(function(){e.isAlive()&&t.apply(s,n)},r)}}function yD(e,t){let r=0;return function(...i){const n=this,s=Date.now();s-r<t||(r=s,e.apply(n,i))}}function _ie(e,t,r,i=100){const n=Date.now();let s=null,a=!1;const o=()=>{s!=null&&(window.clearInterval(s),s=null)};e.addDestroyFunc(o);const u=()=>{const d=Date.now()-n>i;(t()||d)&&(r(),a=!0,o())};u(),a||(s=window.setInterval(u,10))}var vB=new Set(["__proto__","constructor","prototype"]);function bie(e,t){if(e!=null){if(Array.isArray(e)){for(let r=0;r<e.length;r++)t(r.toString(),e[r]);return}for(const r of Object.keys(e).filter(i=>!vB.has(i)))t(r,e[r])}}function Js(e,t,r=!0,i=!1){Wt(t)&&bie(t,(n,s)=>{let a=e[n];a!==s&&(i&&a==null&&s!=null&&typeof s=="object"&&s.constructor===Object&&(a={},e[n]=a),wD(s)&&wD(a)&&!Array.isArray(a)?Js(a,s,r,i):(r||s!==void 0)&&(e[n]=s))})}function wD(e){return typeof e=="object"&&e!==null}var WT=class _h{static applyGlobalGridOptions(t){if(!_h.gridOptions)return{...t};let r={};return Js(r,_h.gridOptions,!0,!0),_h.mergeStrategy==="deep"?Js(r,t,!0,!0):r={...r,...t},_h.gridOptions.context&&(r.context=_h.gridOptions.context),t.context&&(_h.mergeStrategy==="deep"&&r.context&&Js(t.context,r.context,!0,!0),r.context=t.context),r}};WT.gridOptions=void 0;WT.mergeStrategy="shallow";var yB=WT;function Sie(e){var t;return(t=yB.gridOptions)==null?void 0:t[e]}var wB={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1},xB="https://www.ag-grid.com";function nd(e,t,...r){e.get("debug")&&console.log("AG Grid: "+t,...r)}function s0(e,...t){UT(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function up(e,...t){UT(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}var jt="34.2.0",xD=2e3,CD=100,CB="_version_",lx=null,hp=`${xB}/javascript-data-grid`;function Eie(e){lx=e}function Rie(e){hp=e}function _B(e,t,r){return(lx==null?void 0:lx(e,t))??[Fie(e,t,r)]}function jT(e,t,r,i,n){e(`${i?"warning":"error"} #${t}`,..._B(t,r,n))}function Tie(e){if(!e)return String(e);const t={};for(const r of Object.keys(e))typeof e[r]!="object"&&typeof e[r]!="function"&&(t[r]=e[r]);return JSON.stringify(t)}function Pie(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=Tie(e)),t}function SC(e){return e===void 0?"undefined":e===null?"null":e}function l2(e,t){return`${e}?${t.toString()}`}function Mie(e,t,r){const i=Array.from(t.entries()).sort((s,a)=>a[1].length-s[1].length);let n=l2(e,t);for(const[s,a]of i){if(s===CB)continue;const o=n.length-r;if(o<=0)break;const u="...",d=o+u.length,p=a.length-d>CD?a.slice(0,a.length-d)+u:a.slice(0,CD)+u;t.set(s,p),n=l2(e,t)}return n}function bB(e,t){const r=new URLSearchParams;if(r.append(CB,jt),t)for(const s of Object.keys(t))r.append(s,Pie(t[s]));const i=`${hp}/errors/${e}`,n=l2(i,r);return n.length<=xD?n:Mie(i,r,xD)}var Fie=(e,t,r)=>{const i=bB(e,t);return`${r?r+` 
`:""}Visit ${i}${r?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function St(...e){jT(s0,e[0],e[1],!0)}function ai(...e){jT(up,e[0],e[1],!1)}function Lm(e,t,r){jT(up,e,t,!1,r)}function Aie(e,t){const r=t[0];return`error #${r} `+_B(r,t[1],e).join(" ")}function Ml(...e){return Aie(void 0,e)}function SB(e,t){return e.get("rowModelType")===t}function In(e,t){return SB(e,"clientSide")}function _d(e,t){return SB(e,"serverSide")}function cs(e,t){return e.get("domLayout")===t}function zh(e){return RC(e)!==void 0}function EB(e){return typeof e.get("getRowHeight")=="function"}function Iie(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Nu(e,t,r=!1,i){const{gos:n,environment:s}=e;if(i==null&&(i=s.getDefaultRowHeight()),EB(n)){if(r)return{height:i,estimated:!0};const u={node:t,data:t.data},d=n.getCallback("getRowHeight")(u);if(c2(d))return d===0&&St(23),{height:Math.max(1,d),estimated:!1}}if(t.detail&&n.get("masterDetail"))return Die(n);const a=n.get("rowHeight");return{height:a&&c2(a)?a:i,estimated:!1}}function Die(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return c2(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function Gh(e){const{environment:t,gos:r}=e,i=r.get("rowHeight");if(!i||Gi(i))return t.getDefaultRowHeight();const n=t.refreshRowHeightVariable();return n!==-1?n:(St(24),t.getDefaultRowHeight())}function c2(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function RB(e,t,r){const i=t[e.getDomDataKey()];return i?i[r]:void 0}function sd(e,t,r,i){const n=e.getDomDataKey();let s=t[n];Gi(s)&&(s={},t[n]=s),s[r]=i}function dp(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function TB(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||cs(e,"print"))}function wl(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function u2(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function PB(e){return e.get("grandTotalRow")}function MB(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function FB(e,t,r){return!!t.group&&!t.footer&&MB(e,r)}function Np(e){const t=e.getCallback("getRowId");return t===void 0?t:r=>{let i=t(r);return typeof i!="string"&&(UT(()=>St(25,{id:i}),"getRowIdString"),i=String(i)),i}}function kie(e,t){const r=e.get("groupHideParentOfSingleChild");return!!(r===!0||r==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function Lie(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function fp(e){return(e==null?void 0:e.checkboxes)??!0}function cx(e){return(e==null?void 0:e.mode)==="multiRow"&&(e.headerCheckbox??!0)}function EC(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function lS(e){return(e==null?void 0:e.hideDisabledCheckboxes)??!1}function Oie(e){return typeof e.get("rowSelection")!="string"}function Bu(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function AB(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const r=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return r&&i?!1:r?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function Nie(e){const t=AB(e);return t===!0||t==="enableSelection"}function Bie(e){const t=AB(e);return t===!0||t==="enableDeselection"}function h2(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t==null?void 0:t.isRowSelectable}function RC(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t==null?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function TC(e){return RC(e)==="multiRow"}function zie(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):(t==null?void 0:t.enableSelectionWithoutKeys)??!1}function PC(e){const t=e.get("rowSelection");if(typeof t=="string"){const r=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return r&&i?"filteredDescendants":r?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function IB(e,t=!0){const r=e.get("rowSelection");return typeof r!="object"?t?"all":void 0:r.mode==="multiRow"?r.selectAll:"all"}function X0(e){const t=PC(e);return t==="descendants"||t==="filteredDescendants"}function _D(e){const t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function Gie(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function zo(e){return e.get("columnMenu")==="legacy"}function Vie(e){return!zo(e)}function Hie(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function Uie(e,t,r){typeof e!="object"&&(e={});const i={...e};return r.forEach(n=>{const s=t[n];typeof s<"u"&&(i[n]=s)}),i}function Wie(e,t){if(!e)return;const r={};let i=!1;if(Object.keys(e).forEach(a=>{r[a]=e[a],i=!0}),!i)return;const n={type:"gridOptionsChanged",options:r};t.dispatchEvent(n);const s={type:"componentStateChanged",...r};t.dispatchEvent(s)}function Cr(e,t){return e.addCommon(t)}function DB(e){return e.get("treeData")?e.get("treeDataParentIdField")?"treeSelfRef":e.get("treeDataChildrenField")?"treeNested":"treePath":"group"}function ux(e,t){var r;return e[t]??((r=e.gridOptions)==null?void 0:r[t])??Sie(t)??wB[t]}function bD({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var jie={resizable:!0,sortable:!0},$ie=0;function kB(){return $ie++}function zu(e){return e instanceof bd}var bd=class extends ft{constructor(e,t,r,i){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=r,this.primary=i,this.isColumn=!0,this.instanceId=kB(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new rd,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=i0(r)}destroy(){var e;super.destroy(),(e=this.beans.rowSpanSvc)==null||e.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:r,colFlex:i}}=this;t==null||t.initCol(this);const n=e.hide;n!==void 0?this.visible=!n:this.visible=!e.initialHide,r==null||r.initCol(this),i==null||i.initCol(this)}setColDef(e,t,r){var n;const i=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),i&&((n=this.beans.rowSpanSvc)==null||n.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",r)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:r}}=this,i=e.get("suppressFieldDotNotation");this.fieldContainsDots=Wt(t)&&t.indexOf(".")>=0&&!i,this.tooltipFieldContainsDots=Wt(r)&&r.indexOf(".")>=0&&!i}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){var e;(e=this.beans.tooltipSvc)==null||e.initCol(this)}initRowSpan(){var e;this.colDef.spanRows&&((e=this.beans.rowSpanSvc)==null||e.register(this))}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:r=>{const i=e.recreateColDef(this.colDef);this.setColDef(i,i,r.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const r=e.width,i=e.initialWidth;return r!=null?t=r:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t;return((t=this.beans.showRowGroupCols)==null?void 0:t.isRowGroupDisplayed(this,e))??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){var i,n,s;this.frameworkEventListenerService=(n=(i=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:n.call(i,this.frameworkEventListenerService,this.colEventSvc);const r=((s=this.frameworkEventListenerService)==null?void 0:s.wrap(e,t))??t;this.colEventSvc.addEventListener(e,r)}removeEventListener(e,t){var i;const r=((i=this.frameworkEventListenerService)==null?void 0:i.unwrap(e,t))??t;this.colEventSvc.removeEventListener(e,r)}createColumnFunctionCallbackParams(e){return Cr(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t;return((t=this.beans.cellNavigation)==null?void 0:t.isSuppressNavigable(this,e))??!1}isCellEditable(e){var t;return((t=this.beans.editSvc)==null?void 0:t.isCellEditable({rowNode:e,column:this}))??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t;return((t=this.beans.selectionSvc)==null?void 0:t.isCellCheckboxSelection(this,e))??!1}isSuppressPaste(e){var t;return this.isColumnFunc(e,((t=this.colDef)==null?void 0:t.suppressPaste)??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??jie[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const r=this.createColumnFunctionCallbackParams(e);return t(r)}return!1}createColumnEvent(e,t){return Cr(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Gi(this.sort)}isSorting(){return Wt(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return St(261),!!((e=this.beans.colHover)!=null&&e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const r=e===!0;this.visible!==r&&(this.visible=r,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e&&e.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let r=!0;for(;e;){if(!e.isPadding()){r=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:r}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return Cr(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Gi(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),r=this.colDef.colSpan(t);return Math.max(r,1)}getRowSpan(e){if(Gi(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),r=this.colDef.rowSpan(t);return Math.max(r,1)}setActualWidth(e,t,r=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),r||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,r){const i=this.createColumnEvent(e,t);r&&Js(i,r),this.colEventSvc.dispatchEvent(i)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Ts(e){return e instanceof hx}var hx=class extends ft{constructor(e,t,r,i){super(),this.colGroupDef=e,this.groupId=t,this.padding=r,this.level=i,this.isColumn=!1,this.expandable=!1,this.instanceId=kB(),this.expandableListenerRemoveCallback=null,this.expanded=!!(e!=null&&e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)zu(t)?e(t):Ts(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){this.children&&this.children.forEach(t=>{zu(t)?e.push(t):Ts(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.__addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.__removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,r=!1;const i=this.findChildrenRemovingPadding();for(let s=0,a=i.length;s<a;s++){const o=i[s];if(!o.isVisible())continue;const u=o.getColumnGroupShow();u==="open"?(e=!0,r=!0):u==="closed"?(t=!0,r=!0):(e=!0,t=!0)}const n=e&&t&&r;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=r=>{r.forEach(i=>{Ts(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},qie={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function SD(e,t,r){const i={},n=e.gos;return Object.assign(i,n.get("defaultColGroupDef")),Object.assign(i,t),n.validateColDef(i,r),i}var Kie=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=s2(e);let r=0;for(;;){let i=e??t;if(i?r!==0&&(i+="_"+r):i=r,!this.existingKeys[i]){const n=String(i);return e&&r>0&&St(273,{providedId:e,usedId:n}),this.existingKeys[n]=!0,n}r++}}},ED=Object.freeze([]);function si(e){if(e!=null&&e.length)return e[e.length-1]}function qu(e,t,r){if(e===t)return!0;if(!e||!t)return e==null&&t==null;const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n]&&!(r!=null&&r(e[n],t[n])))return!1;return!0}function _m(e,t){if(e)for(const r of e)t(r)}function xa(e,t){const r=e.indexOf(t);r>=0&&e.splice(r,1)}function RD(e,t,r){for(let i=0;i<t.length;i++)xa(e,t[i]);for(let i=t.length-1;i>=0;i--)e.splice(r,0,t[i])}var G1="ag-Grid-AutoColumn",LB="ag-Grid-SelectionColumn",OB="ag-Grid-RowNumbersColumn";function NB(e){const t=[],r=i=>{for(let n=0;n<i.length;n++){const s=i[n];zu(s)?t.push(s):Ts(s)&&r(s.getChildren())}};return r(e),t}function ic(e){return e.reduce((t,r)=>t+r.getActualWidth(),0)}function MC(e,t,r){const i={};if(!t)return;gc(null,t,s=>{i[s.getInstanceId()]=s}),r&&gc(null,r,s=>{i[s.getInstanceId()]=null});const n=Object.values(i).filter(s=>s!=null);e.context.destroyBeans(n)}function $T(e){return e.getId().startsWith(G1)}function Ku(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(LB))??!1}function Eu(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(OB))??!1}function Zie(e){return Ku(e)||Eu(e)}function FC(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function Xie(e,t){return qu(e,t,(r,i)=>r.getColId()===i.getColId())}function Yie(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function pp(e){return e==="optionsUpdated"?"gridOptionsChanged":e}function BB(e,t){const r=e===t,i=e.getColDef()===t,n=e.getColId()==t;return r||i||n}var Qie=(e,t)=>(r,i)=>{const n={value1:void 0,value2:void 0};let s=!1;return e&&(e[r]!==void 0&&(n.value1=e[r],s=!0),Wt(i)&&e[i]!==void 0&&(n.value2=e[i],s=!0)),!s&&t&&(t[r]!==void 0&&(n.value1=t[r]),Wt(i)&&t[i]!==void 0&&(n.value2=t[i])),n};function Jie(e,t=null,r,i,n){const s=new Kie,{existingCols:a,existingGroups:o,existingColKeys:u}=ene(i);s.addExistingKeys(u);const d=zB(e,t,0,r,a,s,o,n),{colGroupSvc:p}=e,v=(p==null?void 0:p.findMaxDepth(d,0))??0,y=p?p.balanceColumnTree(d,0,v,s):d;return gc(null,y,(P,R)=>{Ts(P)&&P.setupExpandable(),P.originalParent=R}),{columnTree:y,treeDepth:v}}function ene(e){const t=[],r=[],i=[];return e&&gc(null,e,n=>{if(Ts(n)){const s=n;r.push(s)}else{const s=n;i.push(s.getId()),t.push(s)}}),{existingCols:t,existingGroups:r,existingColKeys:i}}function zB(e,t,r,i,n,s,a,o){if(!t)return[];const{colGroupSvc:u}=e,d=new Array(t.length);for(let p=0;p<d.length;p++){const v=t[p];u&&one(v)?d[p]=u.createProvidedColumnGroup(i,v,r,n,s,a,o):d[p]=tne(e,i,v,n,s,o)}return d}function tne(e,t,r,i,n,s){var u;const a=ine(r,i);a&&(i==null||i.splice(a.idx,1));let o=a==null?void 0:a.column;if(o){const d=d2(e,r,o.getColId());o.setColDef(d,r,s),rne(e,o,d,s)}else{const d=n.getUniqueKey(r.colId,r.field),p=d2(e,r,d);o=new bd(p,r,d,t),e.context.createBean(o)}return(u=e.dataTypeSvc)==null||u.addColumnListeners(o),o}function GB(e,t,r,i,n,s,a,o){const{sortSvc:u,pinnedCols:d,colFlex:p}=e;r!==void 0&&t.setVisible(!r,o),u&&(u.updateColSort(t,i,o),n!==void 0&&u.setColSortIndex(t,n)),s!==void 0&&(d==null||d.setColPinned(t,s)),a!==void 0&&(p==null||p.setColFlex(t,a))}function rne(e,t,r,i){GB(e,t,r.hide,r.sort,r.sortIndex,r.pinned,r.flex,i);const n=t.getFlex();if(!(n!=null&&n>0))if(r.width!=null)t.setActualWidth(r.width,i);else{const s=t.getActualWidth();t.setActualWidth(s,i)}}function ine(e,t){if(t)for(let r=0;r<t.length;r++){const i=t[r].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[r].getId()===e.colId)return{idx:r,column:t[r]};continue}if(e.field!=null){if(i.field===e.field)return{idx:r,column:t[r]};continue}if(i===e)return{idx:r,column:t[r]}}}function d2(e,t,r,i){const{gos:n,dataTypeSvc:s}=e,a={},o=n.get("defaultColDef");Js(a,o,!1,!0);const u=nne(e,a,t,r);u&&sne(e,u,a);const d=a.cellDataType;Js(a,t,!1,!0),d!==void 0&&(a.cellDataType=d);const p=n.get("autoGroupColumnDef"),v=wl(n);return t.rowGroup&&p&&v&&Js(a,{sort:p.sort,initialSort:p.initialSort},!1,!0),s&&(s.postProcess(a),s.validateColDef(a)),n.validateColDef(a,r,i),a}function nne(e,t,r,i){var a;const n=(a=e.dataTypeSvc)==null?void 0:a.updateColDefAndGetColumnType(t,r,i),s=r.type??n??t.type;return t.type=s,s?FC(s):void 0}function sne(e,t,r){if(!t.length)return;const i=Object.assign({},qie),n=e.gos.get("columnTypes")||{};for(const s of Object.keys(n)){const a=n[s];s in i?St(34,{key:s}):(a.type&&St(35),i[s]=a)}t.forEach(s=>{const a=i[s.trim()];a?Js(r,a,!1,!0):St(36,{t:s})})}function one(e){return e.children!==void 0}function gc(e,t,r){if(t)for(let i=0;i<t.length;i++){const n=t[i];Ts(n)&&gc(n,n.getChildren(),r),r(n,e)}}function VB(e,t){const r=[],i=[],n=[];return e.forEach(a=>{const o=a.getColDef().lockPosition;o==="right"?n.push(a):o==="left"||o===!0?r.push(a):i.push(a)}),t.get("enableRtl")?[...n,...i,...r]:[...r,...i,...n]}function HB(e,t){let r=!0;return gc(null,t,i=>{if(!Ts(i))return;const n=i,s=n.getColGroupDef();if(!(s&&s.marryChildren))return;const o=[];n.getLeafColumns().forEach(y=>{const _=e.indexOf(y);o.push(_)});const u=Math.max.apply(Math,o),d=Math.min.apply(Math,o),p=u-d,v=n.getLeafColumns().length-1;p>v&&(r=!1)}),r}function UB(e,t){if(!e||e.length==0)return;const r=t(e[0]);for(let i=1;i<e.length;i++)if(r!==t(e[i]))return;return r}function WB(e,t,r){if(!t.length)return;const i=t.length===1?t[0]:null,n=UB(t,s=>s.getPinned());e.dispatchEvent({type:"columnPinned",pinned:n??null,columns:t,column:i,source:r})}function ane(e,t,r){if(!t.length)return;const i=t.length===1?t[0]:null,n=UB(t,s=>s.isVisible());e.dispatchEvent({type:"columnVisible",visible:n,columns:t,column:i,source:r})}function lne(e,t,r,i){e.dispatchEvent({type:t,columns:r,column:r&&r.length==1?r[0]:null,source:i})}function Bp(e,t,r,i,n=null){t!=null&&t.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:n,finished:r,source:i})}function ja(e,t,r){var j;const{colModel:i,rowGroupColsSvc:n,pivotColsSvc:s,autoColSvc:a,selectionColSvc:o,colAnimation:u,visibleCols:d,pivotResultCols:p,environment:v,valueColsSvc:y,eventSvc:_,gos:P}=e,R=i.getColDefCols()??[],M=o==null?void 0:o.getColumns();if(!R.length&&!(M!=null&&M.length))return!1;if(t!=null&&t.state&&!t.state.forEach)return St(32),!1;const F=(ee,q,oe,ue,me)=>{if(!ee)return;const ie=Qie(q,t.defaultState),fe=ie("flex").value1;if(GB(e,ee,ie("hide").value1,ie("sort").value1,ie("sortIndex").value1,ie("pinned").value1,fe,r),fe==null){const ke=ie("width").value1;if(ke!=null){const et=ee.getColDef().minWidth??v.getDefaultColumnMinWidth();et!=null&&ke>=et&&ee.setActualWidth(ke,r)}}me||!ee.isPrimary()||(y==null||y.syncColumnWithState(ee,r,ie),n==null||n.syncColumnWithState(ee,r,ie,oe),s==null||s.syncColumnWithState(ee,r,ie,ue))},k=(ee,q,oe)=>{var Be,ce;const ue=jB(e,r),me=q.slice(),ie={},fe={},ke=[],et=[],Xe=[];let ct=0;const pt=(n==null?void 0:n.columns.slice())??[],Ge=(s==null?void 0:s.columns.slice())??[];ee.forEach(he=>{const ve=he.colId;if(ve.startsWith(G1)){ke.push(he),Xe.push(he);return}if(Ku(ve)){et.push(he),Xe.push(he);return}const Fe=oe(ve);Fe?(F(Fe,he,ie,fe,!1),xa(me,Fe)):(Xe.push(he),ct+=1)});const Ye=he=>F(he,null,ie,fe,!1);me.forEach(Ye),n==null||n.sortColumns(TD.bind(n,ie,pt)),s==null||s.sortColumns(TD.bind(s,fe,Ge)),i.refreshCols(!1);const ht=(he,ve,_e=[])=>{ve.forEach(Fe=>{const qe=he(Fe.colId);xa(_e,qe),F(qe,Fe,null,null,!0)}),_e.forEach(Ye)};return ht(he=>(a==null?void 0:a.getColumn(he))??null,ke,(Be=a==null?void 0:a.getColumns())==null?void 0:Be.slice()),ht(he=>(o==null?void 0:o.getColumn(he))??null,et,(ce=o==null?void 0:o.getColumns())==null?void 0:ce.slice()),une(t,i,P),d.refresh(r),_.dispatchEvent({type:"columnEverythingChanged",source:r}),ue(),{unmatchedAndAutoStates:Xe,unmatchedCount:ct}};u==null||u.start();let{unmatchedAndAutoStates:N,unmatchedCount:G}=k(t.state||[],R,ee=>i.getColDefCol(ee));if(N.length>0||Wt(t.defaultState)){const ee=((j=p==null?void 0:p.getPivotResultCols())==null?void 0:j.list)??[];G=k(N,ee,q=>(p==null?void 0:p.getPivotResultCol(q))??null).unmatchedCount}return u==null||u.finish(),G===0}function cne(e,t){var k,N;const{colModel:r,autoColSvc:i,selectionColSvc:n,eventSvc:s,gos:a}=e,o=r.getColDefCols();if(!(o!=null&&o.length))return;const u=r.getColDefColTree(),d=NB(u),p=[];let v=1e3,y=1e3;const _=G=>{const j=$B(G);Gi(j.rowGroupIndex)&&j.rowGroup&&(j.rowGroupIndex=v++),Gi(j.pivotIndex)&&j.pivot&&(j.pivotIndex=y++),p.push(j)};(k=i==null?void 0:i.getColumns())==null||k.forEach(_),(N=n==null?void 0:n.getColumns())==null||N.forEach(_),d==null||d.forEach(_),ja(e,{state:p},t);const P=(i==null?void 0:i.getColumns())??[],F=[...(n==null?void 0:n.getColumns())??[],...P,...o].map(G=>({colId:G.colId}));ja(e,{state:F,applyOrder:!0},t),s.dispatchEvent(Cr(a,{type:"columnsReset",source:t}))}function jB(e,t){const{rowGroupColsSvc:r,pivotColsSvc:i,valueColsSvc:n,colModel:s,sortSvc:a,eventSvc:o}=e,u={rowGroupColumns:(r==null?void 0:r.columns.slice())??[],pivotColumns:(i==null?void 0:i.columns.slice())??[],valueColumns:(n==null?void 0:n.columns.slice())??[]},d=AC(e),p={};return d.forEach(v=>{p[v.colId]=v}),()=>{const v=(ee,q,oe,ue)=>{const me=q.map(ue),ie=oe.map(ue);if(qu(me,ie))return;const ke=new Set(q);oe.forEach(Xe=>{ke.delete(Xe)||ke.add(Xe)});const et=[...ke];o.dispatchEvent({type:ee,columns:et,column:et.length===1?et[0]:null,source:t})},y=ee=>{const q=[];return s.forAllCols(oe=>{const ue=p[oe.getColId()];ue&&ee(ue,oe)&&q.push(oe)}),q},_=ee=>ee.getColId();v("columnRowGroupChanged",u.rowGroupColumns,(r==null?void 0:r.columns)??[],_),v("columnPivotChanged",u.pivotColumns,(i==null?void 0:i.columns)??[],_);const R=y((ee,q)=>{const oe=ee.aggFunc!=null,ue=oe!=q.isValueActive(),me=oe&&ee.aggFunc!=q.getAggFunc();return ue||me});R.length>0&&lne(o,"columnValueChanged",R,t),Bp(o,y((ee,q)=>ee.width!=q.getActualWidth()),!0,t),WB(o,y((ee,q)=>ee.pinned!=q.getPinned()),t),ane(o,y((ee,q)=>ee.hide==q.isVisible()),t);const G=y((ee,q)=>ee.sort!=q.getSort()||ee.sortIndex!=q.getSortIndex());G.length>0&&(a==null||a.dispatchSortChangedEvents(t,G));const j=AC(e);dne(d,j,t,s,o)}}function AC(e){const{colModel:t,rowGroupColsSvc:r,pivotColsSvc:i}=e,n=t.getColDefCols();if(Gi(n)||!t.isAlive())return[];const s=r==null?void 0:r.columns,a=i==null?void 0:i.columns,o=[],u=p=>{const v=p.isRowGroupActive()&&s?s.indexOf(p):null,y=p.isPivotActive()&&a?a.indexOf(p):null,_=p.isValueActive()?p.getAggFunc():null,P=p.getSort()!=null?p.getSort():null,R=p.getSortIndex()!=null?p.getSortIndex():null;o.push({colId:p.getColId(),width:p.getActualWidth(),hide:!p.isVisible(),pinned:p.getPinned(),sort:P,sortIndex:R,aggFunc:_,rowGroup:p.isRowGroupActive(),rowGroupIndex:v,pivot:p.isPivotActive(),pivotIndex:y,flex:p.getFlex()??null})};t.forAllCols(p=>u(p));const d=new Map(t.getCols().map((p,v)=>[p.getColId(),v]));return o.sort((p,v)=>{const y=d.has(p.colId)?d.get(p.colId):-1,_=d.has(v.colId)?d.get(v.colId):-1;return y-_}),o}function $B(e){const t=(P,R)=>P??R??null,r=e.getColDef(),i=t(r.sort,r.initialSort),n=t(r.sortIndex,r.initialSortIndex),s=t(r.hide,r.initialHide),a=t(r.pinned,r.initialPinned),o=t(r.width,r.initialWidth),u=t(r.flex,r.initialFlex);let d=t(r.rowGroupIndex,r.initialRowGroupIndex),p=t(r.rowGroup,r.initialRowGroup);d==null&&(p==null||p==!1)&&(d=null,p=null);let v=t(r.pivotIndex,r.initialPivotIndex),y=t(r.pivot,r.initialPivot);v==null&&(y==null||y==!1)&&(v=null,y=null);const _=t(r.aggFunc,r.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:n,hide:s,pinned:a,width:o,flex:u,rowGroup:p,rowGroupIndex:d,pivot:y,pivotIndex:v,aggFunc:_}}function une(e,t,r){if(!e.applyOrder||!e.state)return;const i=[];e.state.forEach(n=>{n.colId!=null&&i.push(n.colId)}),hne(t.cols,i,t,r)}function hne(e,t,r,i){if(e==null)return;let n=[];const s={};t.forEach(o=>{if(s[o])return;const u=e.map[o];u&&(n.push(u),s[o]=!0)});let a=0;if(e.list.forEach(o=>{const u=o.getColId();if(s[u]!=null)return;u.startsWith(G1)?n.splice(a++,0,o):n.push(o)}),n=VB(n,i),!HB(n,r.getColTree())){St(39);return}e.list=n}function dne(e,t,r,i,n){const s={};t.forEach(p=>s[p.colId]=p);const a={};e.forEach(p=>{s[p.colId]&&(a[p.colId]=!0)});const o=e.filter(p=>a[p.colId]),u=t.filter(p=>a[p.colId]),d=[];u.forEach((p,v)=>{const y=o&&o[v];if(y&&y.colId!==p.colId){const _=i.getCol(y.colId);_&&d.push(_)}}),d.length&&n.dispatchEvent({type:"columnMoved",columns:d,column:d.length===1?d[0]:null,finished:!0,source:r})}var TD=(e,t,r,i)=>{const n=e[r.getId()],s=e[i.getId()],a=n!=null,o=s!=null;if(a&&o)return n-s;if(a)return-1;if(o)return 1;const u=t.indexOf(r),d=t.indexOf(i),p=u>=0,v=d>=0;return p&&v?u-d:p?-1:1},fne=class extends ft{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(pp(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),pp(e.source)))}createColsFromColDefs(e){var k,N,G;const{beans:t}=this,{valueCache:r,colAutosize:i,rowGroupColsSvc:n,pivotColsSvc:s,valueColsSvc:a,visibleCols:o,eventSvc:u,groupHierarchyColSvc:d}=t,p=this.colDefs?jB(t,e):void 0;r==null||r.expire();const v=(k=this.colDefCols)==null?void 0:k.list,y=(N=this.colDefCols)==null?void 0:N.tree,_=Jie(t,this.colDefs,!0,y,e);MC(t,(G=this.colDefCols)==null?void 0:G.tree,_.columnTree);const P=_.columnTree,R=_.treeDepth,M=NB(P),F={};M.forEach(j=>F[j.getId()]=j),this.colDefCols={tree:P,treeDepth:R,list:M,map:F},this.createColumnsForService([d],this.colDefCols),n==null||n.extractCols(e,v),s==null||s.extractCols(e,v),a==null||a.extractCols(e,v),this.ready=!0,this.refreshCols(!0),o.refresh(e),u.dispatchEvent({type:"columnEverythingChanged",source:e}),p&&(this.changeEventsDispatching=!0,p(),this.changeEventsDispatching=!1),u.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&(i==null||i.applyAutosizeStrategy())}refreshCols(e){var R;if(!this.colDefCols)return;const t=(R=this.cols)==null?void 0:R.tree;this.saveColOrder();const{autoColSvc:r,selectionColSvc:i,rowNumbersSvc:n,quickFilter:s,pivotResultCols:a,showRowGroupCols:o,rowAutoHeight:u,visibleCols:d,colViewport:p,eventSvc:v}=this.beans,y=this.selectCols(a,this.colDefCols);this.createColumnsForService([r,i,n],y);const _=Iie(this.gos,this.showingPivotResult);(!e||_)&&this.restoreColOrder(y),this.positionLockedCols(y),o==null||o.refresh(),s==null||s.refreshCols(),this.setColSpanActive(),u==null||u.setAutoHeightActive(y),d.clear(),p.clear(),!qu(t,this.cols.tree)&&v.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t){for(const r of e)r&&(r.createColumns(t,i=>{this.lastOrder=i(this.lastOrder),this.lastPivotOrder=i(this.lastPivotOrder)}),r.addColumns(t))}selectCols(e,t){const r=(e==null?void 0:e.getPivotResultCols())??null;this.showingPivotResult=r!=null;const{map:i,list:n,tree:s,treeDepth:a}=r??t;return this.cols={list:n.slice(),map:{...i},tree:s.slice(),treeDepth:a},r&&(r.list.some(u=>{var d;return((d=this.cols)==null?void 0:d.map[u.getColId()])!==void 0})||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{valueColsSvc:e,selectionColSvc:t,gos:r}=this.beans,i=this.isPivotMode()&&!this.showingPivotResult,n=t==null?void 0:t.isSelectionColumnEnabled(),s=r.get("rowNumbers"),a=e==null?void 0:e.columns;return this.cols.list.filter(u=>{const d=$T(u);if(i){const p=a==null?void 0:a.includes(u);return d||p||n&&Ku(u)||s&&Eu(u)}else return d||u.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,r){ja(this.beans,{state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},r)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const r=t.filter(v=>e.map[v.getId()]!=null);if(r.length===0)return;if(r.length===e.list.length){e.list=r;return}const i=v=>{const y=v.getOriginalParent();return y?y.getChildren().length>1?!0:i(y):!1};if(!r.some(v=>i(v))){const v=new Set(r);for(const y of e.list)v.has(y)||r.push(y);e.list=r;return}const n=new Map;for(let v=0;v<r.length;v++){const y=r[v];n.set(y,v)}const s=e.list.filter(v=>!n.has(v));if(s.length===0){e.list=r;return}const a=(v,y)=>{const _=y?y.getOriginalParent():v.getOriginalParent();if(!_)return null;let P=null,R=null;for(const M of _.getChildren())if(!(M===y||M===v)){if(M instanceof bd){const F=n.get(M);if(F==null)continue;(P==null||P<F)&&(P=F,R=M);continue}M.forEachLeafColumn(F=>{const k=n.get(F);k!=null&&(P==null||P<k)&&(P=k,R=F)})}return R??a(v,_)},o=[],u=new Map;for(const v of s){const y=a(v,null);if(y==null){o.push(v);continue}const _=u.get(y);_===void 0?u.set(y,v):Array.isArray(_)?_.push(v):u.set(y,[_,v])}const d=new Array(e.list.length);let p=d.length-1;for(let v=o.length-1;v>=0;v--)d[p--]=o[v];for(let v=r.length-1;v>=0;v--){const y=r[v],_=u.get(y);if(_)if(Array.isArray(_))for(let P=_.length-1;P>=0;P--){const R=_[P];d[p--]=R}else d[p--]=_;d[p--]=y}e.list=d}positionLockedCols(e){e.list=VB(e.list,this.gos)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=((e=this.cols)==null?void 0:e.list)??null:this.lastOrder=((t=this.cols)==null?void 0:t.list)??null}getColumnDefs(){var e,t;return this.colDefCols?(t=this.beans.colDefFactory)==null?void 0:t.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,((e=this.cols)==null?void 0:e.list)??[]):void 0}setColSpanActive(){var e;this.colSpanActive=!!((e=this.cols)!=null&&e.list.some(t=>t.getColDef().colSpan!=null))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1);const{visibleCols:r,eventSvc:i}=this.beans;r.refresh(t),i.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var t;const e=(t=this.beans.pivotColsSvc)==null?void 0:t.columns;return this.pivotMode&&!!(e!=null&&e.length)}recreateColumnDefs(e){var r;if(!this.cols)return;(r=this.beans.autoColSvc)==null||r.updateColumns(e);const t=pp(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;MC(this.beans,(e=this.colDefCols)==null?void 0:e.tree),super.destroy()}getColTree(){var e;return((e=this.cols)==null?void 0:e.tree)??[]}getColDefColTree(){var e;return((e=this.colDefCols)==null?void 0:e.tree)??[]}getColDefCols(){var e;return((e=this.colDefCols)==null?void 0:e.list)??null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}forAllCols(e){var s,a,o,u,d;const{pivotResultCols:t,autoColSvc:r,selectionColSvc:i,groupHierarchyColSvc:n}=this.beans;_m((s=this.colDefCols)==null?void 0:s.list,e),_m((a=r==null?void 0:r.columns)==null?void 0:a.list,e),_m((o=i==null?void 0:i.columns)==null?void 0:o.list,e),_m((u=n==null?void 0:n.columns)==null?void 0:u.list,e),_m((d=t==null?void 0:t.getPivotResultCols())==null?void 0:d.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){var t;return((t=this.cols)==null?void 0:t.map[e])??null}getColFromCollection(e,t){if(t==null)return null;const{map:r,list:i}=t;if(typeof e=="string"&&r[e])return r[e];for(let o=0;o<i.length;o++)if(BB(i[o],e))return i[o];const{autoColSvc:n,selectionColSvc:s,groupHierarchyColSvc:a}=this.beans;return(n==null?void 0:n.getColumn(e))??(s==null?void 0:s.getColumn(e))??(a==null?void 0:a.getColumn(e))??null}},qB=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let r;return typeof t!="number"?r=0:r=t+1,this.existingIds[e]=r,r}},rg=class extends ft{};function Rv(e,t,r){return r&&e.addDestroyFunc(()=>t.destroyBean(r)),r??e}var fr=null;function PD(e){return typeof(e==null?void 0:e.getGui)=="function"}var Tv=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){var i;if(!e)return;if(e.indexOf(" ")>=0){const n=(e||"").split(" ");if(n.length>1){n.forEach(s=>this.toggleCss(s,t));return}}this.cssClassStates[e]!==t&&e.length&&((i=this.getGui())==null||i.classList.toggle(e,t),this.cssClassStates[e]=t)}},pne=0,Pv=class extends Nl{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=pne++,this.cssManager=new Tv(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(r=>[r.selector,r])),e&&this.setTemplate(e)}preConstruct(){var t,r,i;this.wireTemplate(this.getGui());const e="component-"+((r=(t=Object.getPrototypeOf(this))==null?void 0:t.constructor)==null?void 0:r.name);(i=this.css)==null||i.forEach(n=>this.beans.environment.addGlobalCSS(n,e))}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(fB):null}applyElementsToComponent(e,t,r,i=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const n=this[t];if(n===fr)this[t]=i??e;else{const s=r&&r[t];if(!this.suppressDataRefValidation&&!s)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${n}`)}}}createChildComponentsFromTags(e,t){const r=[];for(const i of e.childNodes??[])r.push(i);r.forEach(i=>{if(!(i instanceof HTMLElement))return;const n=this.createComponentFromElement(i,s=>{const a=s.getGui();if(a)for(const o of i.attributes??[])a.setAttribute(o.name,o.value)},t);if(n){if(n.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const s=Array.prototype.slice.call(i.children);n.addItems(s)}this.swapComponentForNode(n,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)})}createComponentFromElement(e,t,r){const i=e.nodeName,n=this.getDataRefAttribute(e),s=i.indexOf("AG-")===0,a=s?this.componentSelectors.get(i):null;let o=null;if(a){const u=r&&n?r[n]:void 0;o=new a.component(u),o.setParentComponent(this),this.createBean(o,null,t)}else if(s)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(e,n,r,o),o}swapComponentForNode(e,t,r){const i=e.getGui();t.replaceChild(i,r),t.insertBefore(document.createComment(r.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(r=>r.setAttribute("tabindex",t.toString()))}setTemplate(e,t,r){let i;typeof e=="string"||e==null?i=zT(e):i=Ev(e),this.setTemplateFromElement(i,t,r)}setTemplateFromElement(e,t,r,i=!1){if(this.eGui=e,this.suppressDataRefValidation=i,t)for(let n=0;n<t.length;n++){const s=t[n];this.componentSelectors.set(s.selector,s)}this.wireTemplate(e,r)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let r=t;return e==null?null:(r||(r=this.eGui),HT(e)?{element:e,parent:r}:{element:e.getGui(),parent:r})}prependChild(e,t){const{element:r,parent:i}=this.getContainerAndElement(e,t)||{};!r||!i||i.insertAdjacentElement("afterbegin",r)}appendChild(e,t){const{element:r,parent:i}=this.getContainerAndElement(e,t)||{};!r||!i||i.appendChild(r)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:r}=t;sie(this.eGui,e,{skipAriaHidden:r})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:r}=t;qi(this.eGui,e,{skipAriaHidden:r});const i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,r){this.eGui.addEventListener(e,t,r),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},Qi=class extends Pv{};function KB(e){return typeof e=="object"&&!!e.component}function gne(e,t){return new Hr(r=>{r(window.setInterval(e,t))})}var Hr=class Om{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(r=>this.onDone(r),r=>this.onReject(r))}static all(t){return t.length?new Om(r=>{let i=t.length;const n=new Array(i);t.forEach((s,a)=>{s.then(o=>{n[a]=o,i--,i===0&&r(n)})})}):Om.resolve()}static resolve(t=null){return new Om(r=>r(t))}then(t){return new Om(r=>{this.status===1?r(t(this.resolution)):this.waiters.push(i=>r(t(i)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(r=>r(t))}onReject(t){}};function mne(e){return e?e.prototype&&"getGui"in e.prototype:!1}function ZB(e,t,r,i){const{name:n}=r;let s,a,o,u,d,p;if(t){const v=t,y=v[n+"Selector"],_=y?y(i):null,P=R=>{typeof R=="string"?s=R:R!=null&&R!==!0&&(e.isFrameworkComponent(R)?o=R:a=R)};_?(P(_.component),u=_.params,d=_.popup,p=_.popupPosition):P(v[n])}return{compName:s,jsComp:a,fwComp:o,paramsFromSelector:u,popupFromSelector:d,popupPositionFromSelector:p}}var vne=class extends ft{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,r,i=!1){return this.getCompDetails(this.gridOptions,e,t,r,i)}getCompDetails(e,t,r,i,n=!1){var N;const{name:s,cellRenderer:a}=t;let{compName:o,jsComp:u,fwComp:d,paramsFromSelector:p,popupFromSelector:v,popupPositionFromSelector:y}=ZB(this.beans.frameworkOverrides,e,t,i),_,P;const R=G=>{const j=this.registry.getUserComponent(s,G);j&&(u=j.componentFromFramework?void 0:j.component,d=j.componentFromFramework?j.component:void 0,_=j.params,P=j.processParams)};if(o!=null&&R(o),u==null&&d==null&&r!=null&&R(r),u&&a&&!mne(u)&&(u=(N=this.agCompUtils)==null?void 0:N.adaptFunction(t,u)),!u&&!d){const{validation:G}=this.beans;n&&(o!==r||!r)?o?G!=null&&G.isProvidedUserComp(o)||ai(50,{compName:o}):r?G||ai(260,{...this.gos.getModuleErrorParams(),propName:s,compName:r}):ai(216,{name:s}):r&&!G&&ai(146,{comp:r});return}const M=this.mergeParams(e,t,i,p,_,P),F=u==null,k=u??d;return{componentFromFramework:F,componentClass:k,params:M,type:t,popupFromSelector:v,popupPositionFromSelector:y,newAgStackInstance:()=>this.newAgStackInstance(k,F,M,t)}}newAgStackInstance(e,t,r,i){var o;const n=!t;let s;n?s=new e:s=this.frameworkCompWrapper.wrap(e,i.mandatoryMethods,i.optionalMethods,i),this.createBean(s);const a=(o=s.init)==null?void 0:o.call(s,r);return a==null?Hr.resolve(s):a.then(()=>s)}mergeParams(e,t,r,i=null,n,s){const a={...r,...n},o=e,u=o&&o[t.name+"Params"];if(typeof u=="function"){const d=u(r);Js(a,d)}else typeof u=="object"&&Js(a,u);return Js(a,i),s?s(a):a}},yne={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},wne={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},xne={name:"headerComponent",optionalMethods:["refresh"]},Cne={name:"innerHeaderComponent"},_ne={name:"innerHeaderGroupComponent"},bne={name:"headerGroupComponent"},Sne={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},Ene={name:"loadingCellRenderer",cellRenderer:!0},Rne={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},Tne={name:"loadingOverlayComponent",optionalMethods:["refresh"]},Pne={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},Mne={name:"tooltipComponent"},qT={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},Fne={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},Ane={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},Ine={name:"loadingCellRenderer",cellRenderer:!0},Dne={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},kne={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function Lne(e,t){return e.getCompDetailsFromGridOptions(wne,"agDragAndDropImage",t,!0)}function One(e,t,r){return e.getCompDetails(t,xne,"agColumnHeader",r)}function Nne(e,t,r){return e.getCompDetails(t,Cne,void 0,r)}function Bne(e,t){const r=t.columnGroup.getColGroupDef();return e.getCompDetails(r,bne,"agColumnGroupHeader",t)}function zne(e,t,r){return e.getCompDetails(t,_ne,void 0,r)}function Gne(e,t){return e.getCompDetailsFromGridOptions(Ane,void 0,t,!0)}function Vne(e,t){return e.getCompDetailsFromGridOptions(Ine,"agLoadingCellRenderer",t,!0)}function Hne(e,t){return e.getCompDetailsFromGridOptions(Dne,"agGroupRowRenderer",t,!0)}function Une(e,t){return e.getCompDetailsFromGridOptions(kne,"agDetailCellRenderer",t,!0)}function MD(e,t,r){return e.getCompDetails(t,Sne,void 0,r)}function FD(e,t,r){return e.getCompDetails(t,Ene,"agSkeletonCellRenderer",r,!0)}function XB(e,t,r){return e.getCompDetails(t,Rne,"agCellEditor",r,!0)}function Wne(e,t,r,i){const n=t.filter;return KB(n)&&(t={filter:n.component,filterParams:t.filterParams}),e.getCompDetails(t,qT,i,r,!0)}function jne(e,t,r){return e.getCompDetails(t,yne,"agDateInput",r,!0)}function $ne(e,t){return e.getCompDetailsFromGridOptions(Tne,"agLoadingOverlay",t,!0)}function qne(e,t){return e.getCompDetailsFromGridOptions(Pne,"agNoRowsOverlay",t,!0)}function Kne(e,t){return e.getCompDetails(t.colDef,Mne,"agTooltipComponent",t,!0)}function Zne(e,t,r,i){return e.getCompDetails(t,Fne,i,r)}function YB(e,t){return ZB(e,t,qT)}function cS(e,t,r){return e.mergeParams(t,qT,r)}function Y0(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}function Xne(e){return typeof e=="object"&&!!e.getComp}var st={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},KT=class extends Pv{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},uS,hS,dS,fS,f2,p2,pS;function Zu(){return uS===void 0&&(uS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),uS}function QB(){return hS===void 0&&(hS=/(firefox)/i.test(navigator.userAgent)),hS}function JB(){return dS===void 0&&(dS=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),dS}function Vh(){return fS===void 0&&(fS=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),fS}function g2(e){if(!e)return null;const t=e.tabIndex,r=e.getAttribute("tabIndex");return t===-1&&(r===null||r===""&&!QB())?null:t.toString()}function Yne(){if(pS!==void 0)return pS;if(!document.body)return-1;let e=1e6;const t=QB()?6e6:1e9,r=document.createElement("div");for(document.body.appendChild(r);;){const i=e*2;if(r.style.height=i+"px",i>t||r.clientHeight!==i)break;e=i}return document.body.removeChild(r),pS=e,e}function Qne(){return p2==null&&e6(),p2}function e6(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let r=t.offsetWidth-t.clientWidth;r===0&&t.clientWidth===0&&(r=null),t.parentNode&&t.parentNode.removeChild(t),r!=null&&(p2=r,f2=r===0)}function t6(){return f2==null&&e6(),f2}var ZT="T",Jne=new RegExp(`[${ZT} ]`),ese=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${ZT}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function xl(e,t){return e.toString().padStart(t,"0")}function Ho(e,t=!0,r=ZT){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(n=>xl(n,2)).join("-");return t&&(i+=r+[e.getHours(),e.getMinutes(),e.getSeconds()].map(n=>xl(n,2)).join(":")),i}function Cw(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),xl(e.getDate(),2),xl(e.getHours(),2),`:${xl(e.getMinutes(),2)}`,`:${xl(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,xl(e.getDate(),2)].map(String):null}var gS=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},AD=["January","February","March","April","May","June","July","August","September","October","November","December"],mS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function m2(e,t){if(t==null)return Ho(e,!1);const r=xl(e.getFullYear(),4),i={YYYY:()=>r.slice(r.length-4,r.length),YY:()=>r.slice(r.length-2,r.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>AD[e.getMonth()],MMM:()=>AD[e.getMonth()].slice(0,3),MM:()=>xl(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${gS(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${gS(e.getDate())}`,DD:()=>xl(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>mS[e.getDay()],ddd:()=>mS[e.getDay()].slice(0,3),dd:()=>mS[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${gS(e.getDay())}`,d:()=>`${e.getDay()}`},n=new RegExp(Object.keys(i).join("|"),"g");return t.replace(n,s=>s in i?i[s]():s)}function dx(e,t=!1){return!!So(e,t)}function tse(e){return dx(e,!0)}function So(e,t=!1,r){if(!e||!r&&!ese.test(e))return null;const[i,n]=e.split(Jne);if(!i)return null;const s=i.split("-").map(_=>parseInt(_,10));if(s.filter(_=>!isNaN(_)).length!==3)return null;const[a,o,u]=s,d=new Date(a,o-1,u);if(d.getFullYear()!==a||d.getMonth()!==o-1||d.getDate()!==u||!n&&t)return null;if(!n||n==="00:00:00")return d;const[p,v,y]=n.split(":").map(_=>parseInt(_,10));if(p>=0&&p<24)d.setHours(p);else if(t)return null;if(v>=0&&v<60)d.setMinutes(v);else if(t)return null;if(y>=0&&y<60)d.setSeconds(y);else if(t)return null;return d}function v2(e){const{inputValue:t,allSuggestions:r,hideIrrelevant:i,filterByPercentageOfBestMatch:n}=e;let s=(r??[]).map((u,d)=>({value:u,relevance:rse(t,u),idx:d}));if(s.sort((u,d)=>u.relevance-d.relevance),i&&(s=s.filter(u=>u.relevance<Math.max(u.value.length,t.length))),s.length>0&&n&&n>0){const d=s[0].relevance*n;s=s.filter(p=>d-p.relevance<0)}const a=[],o=[];for(const u of s)a.push(u.value),o.push(u.idx);return{values:a,indices:o}}function rse(e,t){e.length<t.length&&([e,t]=[t,e]);let r=[],i=[];const n=e.length,s=t.length;for(let o=0;o<=s;o++)r[o]=o;let a=0;for(let o=1;o<=n;o++){i[0]=o;for(let u=1;u<=s;u++){const d=e[o-1],p=t[u-1];if(d.toLocaleLowerCase()===p.toLocaleLowerCase())++a,d===p&&++a,o>1&&u>1&&e[o-2].toLocaleLowerCase()===t[u-2].toLocaleLowerCase()&&(++a,e[o-2]===t[u-2]&&++a),o<n/2-10&&++a,i[u]=r[u-1];else{const v=i[u-1],y=r[u],_=r[u-1];i[u]=1+Math.min(v,y,_)}}[r,i]=[i,r]}return r[s]/(a+1)}function r6(e){var r;return e.altKey||e.ctrlKey||e.metaKey?!1:((r=e.key)==null?void 0:r.length)===1}var y2=!1,IC=0;function ise(e){IC>0||(e.addEventListener("keydown",DC),e.addEventListener("mousedown",DC))}function nse(e){IC>0||(e.removeEventListener("keydown",DC),e.removeEventListener("mousedown",DC))}function DC(e){const t=y2,r=e.type==="keydown";r&&(e.ctrlKey||e.metaKey||e.altKey)||t!==r&&(y2=r)}function sse(e){const t=ss(e);return ise(t),IC++,()=>{IC--,nse(t)}}function ose(){return y2}function gp(e,t,r=!1){const i=nie;let n=lB;t&&(n+=", "+t),r&&(n+=', [tabindex="-1"]');const s=Array.prototype.slice.apply(e.querySelectorAll(i)).filter(u=>Pc(u)),a=Array.prototype.slice.apply(e.querySelectorAll(n));return a.length?((u,d)=>u.filter(p=>d.indexOf(p)===-1))(s,a):s}function od(e,t=!1,r=!1,i=!1){const n=gp(e,i?".ag-tab-guard":null,r),s=t?si(n):n[0];return s?(s.focus({preventScroll:!0}),!0):!1}function Sd(e,t,r,i){const n=gp(t,r?':not([tabindex="-1"])':null),s=Yi(e);let a;r?a=n.findIndex(u=>u.contains(s)):a=n.indexOf(s);const o=a+(i?-1:1);return o<0||o>=n.length?null:n[o]}function i6(e,t=5){let r=0;for(;e&&g2(e)===null&&++r<=t;)e=e.parentElement;return g2(e)===null?null:e}var ase=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",lse=class extends Pv{constructor(e,t,r){super(t,r),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(ase)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:r,labelAlignment:i,disabled:n}=this.config;n!=null&&this.setDisabled(n),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),r!=null&&this.setLabelWidth(r),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;bo(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(qi(t,!1),id(t,"presentation")):(qi(t,!0),id(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const r=this.getGui().classList;return r.toggle("ag-label-align-left",e==="left"),r.toggle("ag-label-align-right",e==="right"),r.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(bC(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return q0(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},n6=class extends lse{constructor(e,t,r,i){super(e,t,r),this.className=i}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:r}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),r!=null&&this.onValueChange(r),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),r=this.getLabel();r==null||r==""||Ure(e)!==null?$0(e,""):$0(e,t??"")}setAriaLabel(e){return Op(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Pl(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function cse(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var Ah=class extends n6{constructor(e,t,r="text",i="input"){super(e,(e==null?void 0:e.template)??cse(i),[],t),this.inputType=r,this.displayFieldTag=i,this.eLabel=fr,this.eWrapper=fr,this.eInput=fr}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:r,className:i}=this;e.classList.add(`${i}-label`),t.classList.add(`${i}-input-wrapper`),r.classList.add(`${i}-input`),this.addCss("ag-input-field"),r.id=r.id||`ag-${this.getCompId()}-input`;const{inputName:n,inputWidth:s}=this.config;n!=null&&this.setInputName(n),s!=null&&this.setInputWidth(s),this.addInputListeners(),this.activateTabIndex([r])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,Bo(this.eInput,"type",e))}getInputElement(){return this.eInput}setInputWidth(e){return bC(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Bo(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Op(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return q0(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Bo(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Bo(this.eInput,"autocomplete",t)}return this}},XT=class extends Ah{constructor(e,t="ag-checkbox",r="checkbox"){super(e,t,r),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const r=this.eInput;r.checked=e,r.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,r){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:r});const i=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),r=this.selected=e.target.checked;this.refreshSelectedClass(r),this.dispatchChange(r,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},YT={selector:"AG-CHECKBOX",component:XT},use=class extends XT{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},Ed=class extends Ah{constructor(e,t="ag-text-field",r="text"){super(e,t,r)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const r=this.eInput;return r.value!==e&&(r.value=Wt(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=r=>{r6(r)&&r.key&&!e.test(r.key)&&r.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:r=>{var n;const i=(n=r.clipboardData)==null?void 0:n.getData("text");i&&i.split("").some(s=>!e.test(s))&&r.preventDefault()}})}},V1={selector:"AG-INPUT-TEXT-FIELD",component:Ed},hse=class extends Ah{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const r=super.setValue(e,t);return this.eInput.value=e,r}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},dse={selector:"AG-INPUT-TEXT-AREA",component:hse},QT=class extends Ed{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const s=parseFloat(e.value),a=isNaN(s)?"":this.normalizeValue(s.toString());this.value!==a&&this.setValue(a)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:r,max:i,step:n}=this.config;typeof t=="number"&&this.setPrecision(t),typeof r=="number"&&this.setMin(r),typeof i=="number"&&this.setMax(i),typeof n=="number"&&this.setStep(n)}onWheel(e){Yi(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const r=this.precision;if(r==null)return e;if(t){const n=parseFloat(e).toFixed(r);return parseFloat(n).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=r)return e;if(r>0)return`${i[0]}.${i[1].slice(0,r)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,Bo(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Bo(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Bo(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(r=>super.setValue(r,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,r){if(Wt(r)){let i=this.isScientificNotation(r);if(i&&this.eInput.validity.valid)return e(r);if(!i){r=this.adjustPrecision(r);const n=this.normalizeValue(r);i=r!=n}if(i)return t(r)}return e(r)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},fse={selector:"AG-INPUT-NUMBER-FIELD",component:QT},pse=class extends Ed{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Zu();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Yi(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Ho(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,Bo(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?Ho(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,Bo(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,Bo(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return So(this.getValue())??void 0}setDate(e,t){this.setValue(Ho(e??null,this.includeTime),t)}},s6={selector:"AG-INPUT-DATE-FIELD",component:pse},gse=".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}",mse="ag-active-item",vse=(e,t)=>({tag:"div",cls:`ag-list-item ag-${e}-list-item`,attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:t}]}),yse=class extends Pv{constructor(e,t,r){super(vse(e,t)),this.label=t,this.value=r,this.eText=fr}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){const t=this.getGui();t.classList.toggle(mse,e),aB(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){const r=this.getGui();Zre(r,e),Kre(r,t)}createTooltip(){const e={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>GT(this.eText)},t=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,e,this));t&&(this.tooltipFeature=t)}addEventListeners(){const e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},wse=class extends Pv{constructor(e="default"){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS(gse)}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){const t=e.key;switch(t){case st.ENTER:if(!this.highlightedItem)this.setValue(this.getValue());else{const r=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(r)}break;case st.DOWN:case st.UP:e.preventDefault(),this.navigate(t);break;case st.PAGE_DOWN:case st.PAGE_UP:case st.PAGE_HOME:case st.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:r}=e,i=r??t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.listItems.forEach(e=>{e.destroy()}),bo(this.getGui()),this.listItems=[],this.refreshAriaRole()}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const r=this.options.findIndex(i=>i.value===e);if(r!==-1){const i=this.options[r];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.listItems[r]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.listItems[e])}highlightItem(e){const t=e.getGui();if(!Pc(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;const r=this.getGui(),{scrollTop:i,clientHeight:n}=r,{offsetTop:s,offsetHeight:a}=t;(s+a>i+n||s<i)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){var e,t;(t=(e=this.highlightedItem)==null?void 0:e.tooltipFeature)==null||t.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){var e;(e=this.highlightedItem)==null||e.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){const r=new yse(this.cssIdentifier,t,e);r.setParentComponent(this);const i=this.createManagedBean(r);this.listItems.push(i),this.getGui().appendChild(i.getGui())}navigate(e){const t=e===st.DOWN;let r;const{listItems:i,highlightedItem:n}=this;if(!n)r=t?i[0]:si(i);else{let a=i.indexOf(n)+(t?1:-1);a=Math.min(Math.max(a,0),i.length-1),r=i[a]}this.highlightItem(r)}navigateToPage(e){const{listItems:t,highlightedItem:r}=this;if(!r||t.length===0)return;const i=t.indexOf(r),n=this.options.length-1,s=t[0].getHeight(),a=Math.floor(this.getGui().clientHeight/s);let o=-1;e===st.PAGE_HOME?o=0:e===st.PAGE_END?o=n:e===st.PAGE_DOWN?o=Math.min(i+a,n):e===st.PAGE_UP&&(o=Math.max(i-a,0)),o!==-1&&this.highlightItem(t[o])}refreshAriaRole(){id(this.getGui(),this.options.length===0?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();const e=this.listItems,t=e.length;e.forEach((r,i)=>{r.setIndex(i+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},xse=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}",Cse={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},_se=class extends n6{constructor(e){if(super(e,(e==null?void 0:e.template)||Cse,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=fr,this.eWrapper=fr,this.eDisplayField=fr,this.eIcon=fr,this.registerCSS(xse),this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:r,variableWidth:i,minPickerWidth:n,maxPickerWidth:s}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,r!=null&&this.setPickerMaxHeight(r),n!=null&&this.setPickerMinWidth(n),s!=null&&this.setPickerMaxWidth(s)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:r,inputWidth:i}=this.config;if(r){const n=this.beans.iconSvc.createIconNoSpan(r);n&&this.eIcon.appendChild(n)}i!=null&&this.setInputWidth(i)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),o2(e,!1),this.ariaRole&&id(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case st.UP:case st.DOWN:case st.ENTER:case st.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case st.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:r,pickerAriaLabelValue:i,modalPicker:n=!0},maxPickerHeight:s,minPickerWidth:a,maxPickerWidth:o,variableWidth:u,beans:d,eWrapper:p}=this,v={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const R=J5(d);this.beforeHidePicker(),R&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(r,i),anchorToElement:p};e.style.position="absolute";const y=d.popupSvc,_=y.addPopup(v);u?(a&&(e.style.minWidth=a),e.style.width=VT(xC(p)),o&&(e.style.maxWidth=o)):bC(e,o??xC(p));const P=s??`${BT(y.getPopupParent())}px`;return e.style.setProperty("max-height",P),this.alignPickerToComponent(),_.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:r,gos:i},eWrapper:n,pickerComponent:s}=this,a=i.get("enableRtl")?"right":"left";r.positionPopupByComponent({type:t,eventSource:n,ePopup:s.getGui(),position:"under",alignSide:a,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();o2(t,e);const r=this.eWrapper.classList;r.toggle("ag-picker-expanded",e),r.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return bC(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},bse=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}",JT=class extends _se{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(bse)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:ax(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:r}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),r&&t==null&&(this.eDisplayField.textContent=r),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new wse("select"));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),r=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",r),iie(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:i=>{i==null||i.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){var e;(e=this.listComponent)==null||e.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){var r;const{key:t}=e;switch(t===st.TAB&&this.hidePicker(),t){case st.ENTER:case st.UP:case st.DOWN:case st.PAGE_UP:case st.PAGE_DOWN:case st.PAGE_HOME:case st.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(r=this.listComponent)==null||r.handleKeyDown(e):super.onKeyDown(e);break;case st.ESCAPE:super.onKeyDown(e);break;case st.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,r){const{listComponent:i,config:{placeholder:n},eDisplayField:s,tooltipFeature:a}=this;if(this.value===e||!i)return this;if(r||i.setValue(e,!0),i.getValue()===this.getValue())return this;let u=i.getDisplayValue();return u==null&&n&&(u=n),s.textContent=u,a==null||a.setTooltipAndRefresh(u??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},Sse={selector:"AG-SELECT",component:JT},Ese=':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',vL,yL,eP=typeof window!="object"||!((yL=(vL=window==null?void 0:window.document)==null?void 0:vL.fonts)!=null&&yL.forEach),zp=(e,t,r,i,n,s)=>{if(eP)return;i&&(e=`@layer ${CSS.escape(i)} { ${e} }`);let a=mp.map.get(t);if(a||(a=[],mp.map.set(t,a)),a.find(p=>p.css===e))return;const o=document.createElement("style");s&&o.setAttribute("nonce",s),o.dataset.agGlobalCss=r,o.textContent=e;const u={css:e,el:o,priority:n};let d;for(const p of a){if(p.priority>n)break;d=p}if(d){d.el.insertAdjacentElement("afterend",o);const p=a.indexOf(d);a.splice(p+1,0,u)}else t.insertBefore(o,t.querySelector(":not(title, meta)")),a.push(u)},o6=(e,t,r,i)=>{zp(Ese,e,"shared",t,0,r),i==null||i.forEach((n,s)=>n.forEach(a=>zp(a,e,s,t,0,r)))},Rse=e=>{mp.grids.add(e)},Tse=e=>{if(mp.grids.delete(e),mp.grids.size===0){mp.map=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},ID,mp=(ID=typeof window=="object"?window:{}).agStyleInjectionState??(ID.agStyleInjectionState={map:new WeakMap,grids:new Set}),Dl=e=>new a6(e),au="$default",Pse=0,a6=class{constructor({feature:e,params:t,modeParams:r={},css:i,cssImports:n}){this.feature=e,this.css=i,this.cssImports=n,this.modeParams={[au]:{...r[au]??{},...t??{}},...r}}use(e,t,r){let i=this._inject;if(i==null){let{css:n}=this;if(n){const s=`ag-theme-${this.feature??"part"}-${++Pse}`;typeof n=="function"&&(n=n()),n=`:where(.${s}) {
${n}
}
`;for(const a of this.cssImports??[])n=`@import url(${JSON.stringify(a)});
${n}`;i={css:n,class:s}}else i=!1;this._inject=i}return i&&e&&zp(i.css,e,i.class,t,1,r),i?i.class:!1}},Mse=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),l6=e=>`--ag-${Mse(e)}`,kl=e=>`var(${l6(e)})`,Fse=(e,t,r)=>Math.max(t,Math.min(r,e)),Ase=e=>{const t=new Map;return r=>{const i=r;return t.has(i)||t.set(i,e(r)),t.get(i)}},vl=e=>({ref:"accentColor",mix:e}),sa=e=>({ref:"foregroundColor",mix:e}),da=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),Ise=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),mo={ref:"backgroundColor"},Uf={ref:"foregroundColor"},oc={ref:"accentColor"},kC={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:sa(.15),chromeBackgroundColor:da(.02),browserColorScheme:"light"},Dse={...kC,textColor:Uf,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:vl(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:mo,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:oc,toggleButtonOffBackgroundColor:da(.3),toggleButtonSwitchBackgroundColor:mo,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}},kse=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],Lse=Ase(e=>(e=e.toLowerCase(),kse.find(t=>e.endsWith(t.toLowerCase()))??"length")),H1=e=>typeof e=="object"&&(e!=null&&e.ref)?kl(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,tP=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){const t=kl(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?kl(e.onto):"transparent"}, ${t} ${Fse(e.mix*100,0,100)}%)`}return!1},Ose=H1,Wf=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,r=>r[0]==="-"?r:` ${kl(r)} `)})`:e&&"ref"in e?kl(e.ref):!1,Nse=H1,w2=(e,t)=>typeof e=="string"?e:e===!0?w2({},t):e===!1?t==="columnBorder"?w2({color:"transparent"},t):"none":e&&"ref"in e?kl(e.ref):c6(e.style??"solid")+" "+Wf(e.width??{ref:"borderWidth"})+" "+tP(e.color??{ref:"borderColor"}),Bse=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?kl(e.ref):[Wf(e.offsetX??0),Wf(e.offsetY??0),Wf(e.radius??0),Wf(e.spread??0),tP(e.color??{ref:"foregroundColor"})].join(" "),c6=H1,u6=e=>typeof e=="string"?e.includes(",")?e:DD(e):e&&"googleFont"in e?u6(e.googleFont):e&&"ref"in e?kl(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),DD(t))).join(", "):!1,DD=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),zse=H1,h6=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?h6({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?kl(e.ref):!1,Gse=(e,t,r)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&r.warn(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?kl(e.ref):!1,Vse={color:tP,colorScheme:Ose,length:Wf,scale:Nse,border:w2,borderStyle:c6,shadow:Bse,image:h6,fontFamily:u6,fontWeight:zse,duration:Gse},Hse=(e,t,r)=>{const i=Lse(e);return Vse[i](t,e,r)},Use=e=>new d6(e),d6=class f6{constructor(t,r=[]){this.themeLogger=t,this.parts=r}withPart(t){return typeof t=="function"&&(t=t()),t instanceof a6?new f6(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(t){return this.withPart(Dl({feature:t}))}withParams(t,r=au){return this.withPart(Dl({modeParams:{[r]:t}}))}_startUse({styleContainer:t,cssLayer:r,nonce:i,loadThemeGoogleFonts:n,moduleCss:s}){if(eP)return;jse(),o6(t,r,i,s);const a=Wse(this);if(a.length>0)for(const o of a)n&&qse(o,i);for(const o of this.parts)o.use(t,r,i)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=kD(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const r={[au]:{...Dse}};for(const i of kD(this.parts))for(const n of Object.keys(i.modeParams)){const s=i.modeParams[n];if(s){const a=r[n]??(r[n]={}),o=new Set;for(const u of Object.keys(s)){const d=s[u];d!==void 0&&(a[u]=d,o.add(u))}if(n===au)for(const u of Object.keys(r)){const d=r[u];if(u!==au)for(const p of o)delete d[p]}}}this._paramsCache=t=r}return t}_getPerInstanceCss(t){const r="##SELECTOR##";let i=this._paramsCssCache;if(!i){let n="",s="";const a=this._getModeParams();for(const u of Object.keys(a)){const d=a[u];if(u!==au){const v=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(u):u}"]) & {
`;n+=v,s+=v}for(const p of Object.keys(d).sort()){const v=d[p],y=Hse(p,v,this.themeLogger);if(y===!1)this.themeLogger.error(107,{key:p,value:v});else{const _=l6(p),P=_.replace("--ag-","--ag-inherited-");n+=`	${_}: var(${P}, ${y});
`,s+=`	${P}: var(${_});
`}}u!==au&&(n+=`}
`,s+=`}
`)}let o=`${r} {
${n}}
`;o+=`:has(> ${r}):not(${r}) {
${s}}
`,this._paramsCssCache=i=o}return i.replaceAll(r,`:where(.${t})`)}},kD=e=>{const t=new Map;for(const i of e)t.set(i.feature,i);const r=[];for(const i of e)(!i.feature||t.get(i.feature)===i)&&r.push(i);return r},Wse=e=>{const t=new Set,r=s=>{if(Array.isArray(s))s.forEach(r);else{const a=s==null?void 0:s.googleFont;typeof a=="string"&&t.add(a)}};return Object.values(e._getModeParams()).flatMap(s=>Object.values(s)).forEach(r),Array.from(t).sort()},LD=!1,jse=()=>{if(!LD){LD=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},$se=new Set,qse=async(e,t)=>{$se.add(e);const r=`@import url('https://${Kse}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;zp(r,document.head,`googleFont:${e}`,void 0,0,t)},Kse="fonts.googleapis.com",Zse=1,Xse=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=Zse++,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const r of Object.keys(e.providedBeanInstances))this.beans[r]=e.providedBeanInstances[r];e.beanClasses.forEach(r=>{const i=new r;i.beanName?this.beans[i.beanName]=i:console.error(`Bean ${r.name} is missing beanName`),this.createdBeans.push(i)}),(t=e.derivedBeans)==null||t.forEach(r=>{const{beanName:i,bean:n}=r(this);this.beans[i]=n,this.createdBeans.push(n)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){const r=this.beans;e.forEach(i=>{var n,s;(n=i.preWireBeans)==null||n.call(i,r),(s=i.wireBeans)==null||s.call(i,r)}),e.forEach(i=>{var n;return(n=i.preConstruct)==null?void 0:n.call(i)}),t&&e.forEach(t),e.forEach(i=>{var n;return(n=i.postConstruct)==null?void 0:n.call(i)})}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){var t;if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],(t=this.destroyCallback)==null||t.call(this)}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},Yse=0,Qse=class extends Nl{constructor(){super(...arguments),this.beanName="environment",this.paramsClass=`ag-theme-params-${++Yse}`,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){const{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t),this.eStyleContainer=e.get("themeStyleContainer")??(t.getRootNode()===document?document.head:t),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.initVariables(),this.addDestroyFunc(()=>Tse(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){const{theme:r}=this;let i;r?i=`${this.paramsClass} ${r._getCssClass()}`:i=this.applyLegacyThemeClasses();for(const n of Array.from(e.classList))n.startsWith("ag-theme-")&&e.classList.remove(n);if(i){const n=e.className;e.className=`${n}${n?" ":""}${i}${t!=null&&t.length?` ${t.join(" ")}`:""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let r=!1;for(const i of Array.from(t.classList))i.startsWith("ag-theme-")&&(r=!0,e=e?`${e} ${i}`:i);r&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?zp(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}handleThemeChange(){const{gos:e,theme:t}=this,r=e.get("theme");let i;if(r==="legacy")i=void 0;else{const n=r??this.getDefaultTheme();n instanceof d6?i=n:this.themeError(n)}i!==t&&this.handleNewTheme(i),this.postProcessThemeChange(i,r)}handleNewTheme(e){const{gos:t,eRootDiv:r,globalCSS:i}=this,n=this.getAdditionalCss();if(e){Rse(this),o6(this.eStyleContainer,this.cssLayer,this.styleNonce,n);for(const[a,o]of i)zp(a,this.eStyleContainer,o,this.cssLayer,0,this.styleNonce);i.length=0}this.theme=e,e==null||e._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:n});let s=this.eParamsStyle;if(!s){s=this.eParamsStyle=Ev({tag:"style"});const a=t.get("styleNonce");a&&s.setAttribute("nonce",a),r.appendChild(s)}eP||(s.textContent=(e==null?void 0:e._getPerInstanceCss(this.paramsClass))||""),this.applyThemeClasses(r),this.fireStylesChangedEvent("themeChanged")}},Jse=class extends Nl{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...r){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const i=this.dynamicBeans[e];if(i==null){if(t)throw new Error(this.getDynamicError(e,!1));return}return new i(...r)}},eoe=class extends Nl{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new rd}addListener(e,t,r){this.globalSvc.addEventListener(e,t,r)}removeListener(e,t,r){this.globalSvc.removeEventListener(e,t,r)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},p6=class extends Nl{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const r="title",i=this.ctrl.getGui();i&&(e!=null&&(e!=""||t)?i.setAttribute(r,e):i.removeAttribute(r))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(this.tooltipManager==null){const e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){var e;(e=this.tooltipManager)==null||e.prepareToShowTooltip()}attemptToHideTooltip(){var e;(e=this.tooltipManager)==null||e.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},toe=1e3,roe=1e3,OD=100,ND,_w=!1,ioe=class extends Nl{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){var t,r,i,n;return e==="show"?((r=(t=this.tooltipCtrl).getTooltipShowDelayOverride)==null?void 0:r.call(t))??this.getGridOptionsTooltipDelay("tooltipShowDelay"):((n=(i=this.tooltipCtrl).getTooltipHideDelayOverride)==null?void 0:n.call(i))??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Vh()&&(_w?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},OD):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var n;const t=e.relatedTarget,r=this.tooltipCtrl.getGui(),i=(n=this.tooltipComp)==null?void 0:n.getGui();this.isInteractingWithTooltip||r.contains(t)||this.interactionEnabled&&(i!=null&&i.contains(t))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||_w)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-ND<toe}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){var n,s;const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!Wt(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}const r=this.gos.addCommon({location:((n=t.getLocation)==null?void 0:n.call(t))??"UNKNOWN",value:e,hideTooltipCallback:()=>this.hideTooltip(!0),...(s=t.getAdditionalParams)==null?void 0:s.call(t)});this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(r,i)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),ND=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){var a;if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const n=this.getLocaleTextFunc(),s=(a=this.popupSvc)==null?void 0:a.addPopup({eChild:i,ariaLabel:n("ariaLabelTooltip","Tooltip")});if(s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const o=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:o}),this.setEventHandlers(o)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(ss(this.beans),{keydown:o=>{i.contains(o==null?void 0:o.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var r;const e=(r=this.tooltipComp)==null?void 0:r.getGui(),t=Yi(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){var t,r;const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?(t=this.popupSvc)==null||t.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):(r=this.popupSvc)==null||r.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,r=this.tooltipTrigger===0?roe:0;window.setTimeout(()=>{e(),this.destroyBean(t)},r),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){_w=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},OD)}unlockService(){_w=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},noe=class extends p6{constructor(e,t,r){super(e,r),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",({currentValue:e})=>{this.setTooltipMode(e)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){this.tooltipMode===1&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(e="focus"){this.tooltipMode=e==="focus"?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},bw=0,soe=200,ooe=class extends Nl{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}getPopupParent(){const e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:r,nudgeY:i,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:r,nudgeY:i,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:r,nudgeY:i,keepWithinBounds:n,eventSource:s,alignSide:a="left",position:o="over",type:u}=e,d=s.getBoundingClientRect(),p=this.getParentRect();this.setAlignedTo(s,t);const v=()=>{let y=d.left-p.left;a==="right"&&(y-=t.offsetWidth-d.width);let _;return o==="over"?(_=d.top-p.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,d,p,e.nudgeY||0)==="under"?_=d.top-p.top+d.height:_=d.top-t.offsetHeight-(i||0)*2-p.top),{x:y,y:_}};this.positionPopup({ePopup:t,nudgeX:r,nudgeY:i,keepWithinBounds:n,updatePosition:v,postProcessCallback:()=>this.callPostProcessPopup(e,u,t,s,null)})}shouldRenderUnderOrAbove(e,t,r,i){const n=r.bottom-t.bottom,s=t.top-r.top,a=e.offsetHeight+i;return n>a?"under":s>a||s>n?"above":"under"}setAlignedStyles(e,t){const r=this.getPopupIndex(e);if(r===-1)return;const i=this.popupList[r],{alignedToElement:n}=i;!n||(["right","left","over","above","under"].forEach(a=>{n.classList.remove(`ag-has-popup-positioned-${a}`),e.classList.remove(`ag-popup-positioned-${a}`)}),!t)||(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const r=this.getPopupIndex(t);if(r!==-1){const i=this.popupList[r];i.alignedToElement=e}}positionPopup(e){const{ePopup:t,keepWithinBounds:r,nudgeX:i,nudgeY:n,skipObserver:s,updatePosition:a}=e,o={width:0,height:0},u=(d=!1)=>{let{x:p,y:v}=a();d&&t.clientWidth===o.width&&t.clientHeight===o.height||(o.width=t.clientWidth,o.height=t.clientHeight,i&&(p+=i),n&&(v+=n),r&&(p=this.keepXYWithinBounds(t,p,1),v=this.keepXYWithinBounds(t,v,0)),t.style.left=`${p}px`,t.style.top=`${v}px`,e.postProcessCallback&&e.postProcessCallback())};if(u(),!s){const d=Mc(this.beans,t,()=>u(!0));setTimeout(()=>d(),soe)}}getParentRect(){const e=ss(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),uB(t)}keepXYWithinBounds(e,t,r){const i=r===0,n=i?"clientHeight":"clientWidth",s=i?"top":"left",a=i?"height":"width",o=i?"scrollTop":"scrollLeft",u=ss(this.beans),d=u.documentElement,p=this.getPopupParent(),v=e.getBoundingClientRect(),y=p.getBoundingClientRect(),_=u.documentElement.getBoundingClientRect(),P=p===u.body,R=Math.ceil(v[a]);let F=P?(i?cB:xC)(d)+d[o]:p[n];P&&(F-=Math.abs(_[s]-y[s]));const k=F-R;return Math.min(Math.max(t,0),Math.abs(k))}addPopup(e){const{eChild:t,ariaLabel:r,ariaOwns:i,alwaysOnTop:n,positionCallback:s,anchorToElement:a}=e,o=this.getPopupIndex(t);if(o!==-1)return{hideFunc:this.popupList[o].hideFunc};this.initialisePopupPosition(t);const u=this.createPopupWrapper(t,!!n,r,i),d=this.addEventListenersToPopup({...e,wrapperEl:u});return s&&s(),this.addPopupToPopupList(t,u,d,a),{hideFunc:d}}initialisePopupPosition(e){const r=this.getPopupParent().getBoundingClientRect();Wt(e.style.top)||(e.style.top=`${r.top*-1}px`),Wt(e.style.left)||(e.style.left=`${r.left*-1}px`)}createPopupWrapper(e,t,r,i){const n=this.getPopupParent(),{environment:s,gos:a}=this.beans,o=Ev({tag:"div"});return s.applyThemeClasses(o),o.classList.add("ag-popup"),e.classList.add(a.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||id(e,"dialog"),r?Op(e,r):i&&(e.id||(e.id=`popup-component-${bw}`),gD(i,e.id)),o.appendChild(e),n.appendChild(o),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),o}addEventListenersToPopup(e){const t=this.beans,r=ss(t),i=this.getPopupParent(),{wrapperEl:n,eChild:s,closedCallback:a,afterGuiAttached:o,closeOnEsc:u,modal:d,ariaOwns:p}=e;let v=!1;const y=M=>{if(!n.contains(Yi(t)))return;M.key===st.ESCAPE&&!this.isStopPropagation(M)&&R({keyboardEvent:M})},_=M=>R({mouseEvent:M}),P=M=>R({touchEvent:M}),R=(M={})=>{const{mouseEvent:F,touchEvent:k,keyboardEvent:N,forceHide:G}=M;!G&&(this.isEventFromCurrentPopup({mouseEvent:F,touchEvent:k},s)||v)||(v=!0,i.removeChild(n),r.removeEventListener("keydown",y),r.removeEventListener("mousedown",_),r.removeEventListener("touchstart",P),r.removeEventListener("contextmenu",_),this.eventSvc.removeListener("dragStarted",_),a&&a(F||k||N),this.removePopupFromPopupList(s,p))};return o&&o({hidePopup:R}),window.setTimeout(()=>{u&&r.addEventListener("keydown",y),d&&(r.addEventListener("mousedown",_),this.eventSvc.addListener("dragStarted",_),r.addEventListener("touchstart",P),r.addEventListener("contextmenu",_))},0),R}addPopupToPopupList(e,t,r,i){this.popupList.push({element:e,wrapper:t,hideFunc:r,instanceId:bw,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i),bw=bw+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const r=this.getPopupIndex(e);if(r===-1)return;const i=this.popupList[r];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(s=>s&&s()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=n,i.isAnchored=!0,n}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&gD(t,null),this.popupList=this.popupList.filter(r=>r.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),r=t.getBoundingClientRect(),{element:i,ePopup:n}=e,s=i.getBoundingClientRect(),a=v=>parseInt(v.substring(0,v.length-1),10),o=(v,y)=>{const _=r[v]-s[v],P=a(n.style[v]);return{initialDiff:_,lastDiff:_,initial:P,last:P,direction:y}},u=o("top",0),d=o("left",1),p=this.beans.frameworkOverrides;return new Hr(v=>{p.wrapIncoming(()=>{gne(()=>{const y=t.getBoundingClientRect(),_=i.getBoundingClientRect();if(_.top==0&&_.left==0&&_.height==0&&_.width==0){e.hidePopup();return}const R=(M,F)=>{const k=a(n.style[F]);M.last!==k&&(M.initial=k,M.last=k);const N=y[F]-_[F];if(N!=M.lastDiff){const G=this.keepXYWithinBounds(n,M.initial+M.initialDiff-N,M.direction);n.style[F]=`${G}px`,M.last=G}M.lastDiff=N};R(u,"top"),R(d,"left")},200).then(y=>{v(()=>{y!=null&&window.clearInterval(y)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){const{mouseEvent:r,touchEvent:i}=e,n=r||i;if(!n)return!1;const s=this.getPopupIndex(t);if(s===-1)return!1;for(let a=s;a<this.popupList.length;a++){const o=this.popupList[a];if(lie(o.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=ss(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const r=this.getWrapper(e);r&&(r.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(r))}bringPopupToFront(e){const t=this.getPopupParent(),r=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=r.length,n=this.getWrapper(e);if(!n||i<=1||!t.contains(e))return;const s=[],a=[];for(const y of r)y!==n&&(y.classList.contains("ag-always-on-top")?a.push(y):s.push(y));const o=[],u=a.length,v=n.classList.contains("ag-always-on-top")||!u?[...s,...a,n]:[...s,n,...a];for(let y=0;y<=i;y++){const _=v[y];if(r[y]===v[y]||_===n)continue;_.querySelectorAll("div").forEach(R=>{R.scrollTop!==0&&o.push([R,R.scrollTop])}),y===0?t.insertAdjacentElement("afterbegin",_):v[y-1].insertAdjacentElement("afterend",_)}for(;o.length;){const y=o.pop();y[0].scrollTop=y[1]}}},aoe=class extends KT{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){const{value:t}=e,r=this.getGui();r.textContent=tg(t);const i=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();r.classList.add(`ag-${i}-tooltip`)}},loe=class extends Nl{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){const{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,r=e.mouseDownListener;if(t.removeEventListener("mousedown",r),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const{dragSources:t}=this,r=t.find(i=>i.dragSource===e);r&&(this.removeListener(r),xa(t,r))}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:r,includeTouch:i,stopPropagationForTouch:n}=e;r.addEventListener("mousedown",t);let s=null;const a=this.gos.get("suppressTouch");i&&!a&&(s=o=>{NT(o.target)||(n&&o.stopPropagation(),this.onTouchStart(e,o))},r.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:s,touchEnabled:!!i})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const r=t.touches[0];this.touchLastTime=r,this.touchStart=r;const i=u=>this.onTouchMove(u,e.eElement),n=u=>this.onTouchUp(u,e.eElement),s=u=>{u.cancelable&&u.preventDefault()},a=t.target,o=[{target:j0(this.beans),type:"touchmove",listener:s,options:{passive:!1}},{target:a,type:"touchmove",listener:i,options:{passive:!0}},{target:a,type:"touchend",listener:n,options:{passive:!0}},{target:a,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(o),e.dragStartPixels===0&&this.onCommonMove(r,this.touchStart,e.eElement)}onMouseDown(e,t){const r=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||r._alreadyProcessedByDragService||(r._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const i=d=>this.onMouseMove(d,e.eElement),n=d=>this.onMouseUp(d,e.eElement),s=d=>d.preventDefault(),a=d=>{d.key===st.ESCAPE&&this.cancelDrag(e.eElement)},o=j0(this.beans),u=[{target:o,type:"mousemove",listener:i},{target:o,type:"mouseup",listener:n},{target:o,type:"contextmenu",listener:s},{target:o,type:"keydown",listener:a}];this.addTemporaryEvents(u),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:r,type:i,listener:n,options:s}=t;r.addEventListener(i,n,s)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:r,type:i,listener:n,options:s}=t;r.removeEventListener(i,n,s)})})}isEventNearStartEvent(e,t){const{dragStartPixels:r}=this.currentDragParams,i=Wt(r)?r:4;return gB(e,t,i)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,r){var i;if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:r}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}(i=this.currentDragParams)==null||i.onDragging(e)}onTouchMove(e,t){const r=this.getFirstActiveTouch(e.touches);r&&this.onCommonMove(r,this.touchStart,t)}onMouseMove(e,t){var r;Zu()&&((r=ss(this.beans).getSelection())==null||r.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=e.type==="mousemove",r=i=>{const n=i.target,s=n==null?void 0:n.tagName.toLocaleLowerCase();return!!(s!=null&&s.match("^a$|textarea|input|select|button"))};return t&&e.cancelable&&Z0(this.beans,e)&&!r(e)}onTouchUp(e,t){let r=this.getFirstActiveTouch(e.changedTouches);r||(r=this.touchLastTime),this.onUpCommon(r,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){var t,r;this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),(r=(t=this.currentDragParams)==null?void 0:t.onDragCancel)==null||r.call(t),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;const{dragEndFunctions:e}=this;e.forEach(t=>t()),e.length=0}},coe=class extends Nl{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageParent=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.lastDropTarget=null}addDragSource(e,t=!1){const r={dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:i=>this.onDragStart(e,i),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(r),this.beans.dragSvc.addDragSource(r)}setDragImageCompIcon(e,t=!1){const r=this.dragImageComp;r&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,r.setIcon(e,t))}removeDragSource(e){var n;const{dragSourceAndParamsList:t,beans:r}=this,i=t.find(s=>s.dragSource===e);i&&((n=r.dragSvc)==null||n.removeDragSource(i),xa(t,i))}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:r}=this,i=r.dragSvc;for(const n of e)i==null||i.removeDragSource(n);e.length=0,t.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){var r;this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem(),(r=e.onDragStarted)==null||r.call(e),this.createAndUpdateDragImageComp(e)}onDragStop(e){var i,n;const{dragSource:t,lastDropTarget:r}=this;if((i=t==null?void 0:t.onDragStopped)==null||i.call(t),r){const s=this.dropTargetEvent(r,e,!1);(n=r.onDragStop)==null||n.call(r,s)}this.clearDragAndDropProperties()}onDragCancel(){var i,n;const{dragSource:e,lastDropTarget:t,lastMouseEvent:r}=this;if((i=e==null?void 0:e.onDragCancelled)==null||i.call(e),t&&r){const s=this.dropTargetEvent(t,r,!1);(n=t.onDragCancel)==null||n.call(t,s)}this.clearDragAndDropProperties()}onDragging(e,t=!1){var o,u,d;this.positionDragImageComp(e);const r=this.findCurrentDropTarget(e),{lastDropTarget:i,dragSource:n,dragItem:s}=this;let a=!1;if(r!==i){if(a=!0,i){const p=this.dropTargetEvent(i,e,t);(o=i.onDragLeave)==null||o.call(i,p)}if(i!==null&&!r?this.handleExit(n,s):i===null&&r&&this.handleEnter(n,s),r){const p=this.dropTargetEvent(r,e,t);(u=r.onDragEnter)==null||u.call(r,p)}this.lastDropTarget=r}else if(r){const p=this.dropTargetEvent(r,e,t);(d=r.onDragging)==null||d.call(r,p),p!=null&&p.changed&&(a=!0)}this.lastMouseEvent=e,a&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageParent=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragSource=null}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,r=[[e.getContainer()]];return t?r.concat(t):r}isMouseOnDropTarget(e,t){const r=this.getAllContainersFromDropTarget(t);let i=!1;const n=(o,u)=>{for(const d of u){const{width:p,height:v,left:y,right:_,top:P,bottom:R}=d.getBoundingClientRect();if(p===0||v===0)return!1;const M=o.clientX>=y&&o.clientX<_,F=o.clientY>=P&&o.clientY<R;if(!M||!F)return!1}return!0};for(const o of r)if(n(e,o)){i=!0;break}const{eElement:s,type:a}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(s)?!1:i&&t.isInterestedIn(a,s)}findCurrentDropTarget(e){const t=this.dropTargets.filter(s=>this.isMouseOnDropTarget(e,s)),r=t.length;if(r===0)return null;if(r===1)return t[0];const n=j0(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const s of n)for(const a of t)if(this.getAllContainersFromDropTarget(a).flatMap(u=>u).indexOf(s)!==-1)return a;return null}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.find(t=>t.external&&t.getContainer()===e)||null}dropTargetEvent(e,t,r){const{dragSource:i,dragItem:n,lastDraggingEvent:s,lastMouseEvent:a}=this,o=e.getContainer(),u=o.getBoundingClientRect(),{clientX:d,clientY:p}=t,v=d-((a==null?void 0:a.clientX)||0),y=p-((a==null?void 0:a.clientY)||0),_=this.createEvent({event:t,x:d-u.left,y:p-u.top,vDirection:y>0?"down":y<0?"up":null,hDirection:v<0?"left":v>0?"right":null,dragSource:i,fromNudge:r,dragItem:n,dropZoneTarget:o,dropTarget:(s==null?void 0:s.dropTarget)??null,changed:!!(s!=null&&s.changed)});return this.lastDraggingEvent=_,_}positionDragImageComp(e){var r;const t=(r=this.dragImageComp)==null?void 0:r.getGui();t&&fie(t,e,this.beans)}removeDragImageComp(e){var t;if(this.dragImageComp===e&&(this.dragImageComp=null),e){const r=e.getGui();(t=this.dragImageParent)==null||t.removeChild(r),this.destroyBean(e)}}createAndUpdateDragImageComp(e){const t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t==null||t.then(r=>{if(t!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive()){this.destroyBean(r);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const i=this.dragImageComp;i!==r&&(this.dragImageComp=r,this.removeDragImageComp(i)),r&&(this.appendDragImageComp(r),this.updateDragImageComp())})}appendDragImageComp(e){const t=e.getGui(),r=t.style;r.setProperty("position","absolute"),r.setProperty("z-index","9999"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),r.top="20px",r.left="20px";const i=OT(this.beans);this.dragImageParent=i,i?i.appendChild(t):this.warnNoBody()}updateDragImageComp(){var a;const{dragImageComp:e,dragSource:t,lastDropTarget:r,lastDraggingEvent:i,dragImageLastLabel:n}=this;if(!e)return;this.setDragImageCompIcon(((a=r==null?void 0:r.getIconName)==null?void 0:a.call(r,i))??null);let s=t==null?void 0:t.dragItemName;typeof s=="function"&&(s=s(i)),s||(s=""),n!==s&&(this.dragImageLastLabel=s,e.setLabel(s))}},uoe=class extends coe{createEvent(e){return Cr(this.gos,e)}createDragImageComp(e){const{gos:t,beans:r}=this,i=Lne(r.userCompFactory,Cr(t,{dragSource:e}));return i==null?void 0:i.newAgStackInstance()}handleEnter(e,t){var r;(r=e==null?void 0:e.onGridEnter)==null||r.call(e,t)}handleExit(e,t){var r;(r=e==null?void 0:e.onGridExit)==null||r.call(e,t)}warnNoBody(){St(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const r={getContainer:e,isInterestedIn:i=>i===1||i===0,getIconName:()=>"notAllowed"};this.addDropTarget(r),t.addDestroyFunc(()=>this.removeDropTarget(r))}};function g6(e,t){return e+"_"+t}function vn(e){return e instanceof Q0}var Q0=class extends ft{constructor(e,t,r,i){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=r,this.pinned=i,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=i0(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return g6(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{vn(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=si(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){var t;let e=0;return(t=this.displayedChildren)==null||t.forEach(r=>{e+=r.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{zu(t)?e.push(t):vn(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{zu(t)?e.push(t):vn(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(r=>{var s;if(vn(r)&&!((s=r.displayedChildren)!=null&&s.length))return;switch(r.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(r);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(r);break;default:this.displayedChildren.push(r);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},x2="row-group-",rP="t-",iP="b-",hoe=0,ad=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=hoe++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var o,u,d;const{valueCache:r,eventSvc:i}=this.beans,n=this.data;this.data=e,r==null||r.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const s=this.createDataChangedEvent(e,n,t);if((o=this.__localEventService)==null||o.dispatchEvent(s),this.sibling){this.sibling.data=e;const p=this.sibling.createDataChangedEvent(e,n,t);(u=this.sibling.__localEventService)==null||u.dispatchEvent(p)}i.dispatchEvent({type:"rowNodeDataChanged",node:this});const a=this.pinnedSibling;a&&(a.data=e,(d=a.__localEventService)==null||d.dispatchEvent(a.createDataChangedEvent(e,n,t)),i.dispatchEvent({type:"rowNodeDataChanged",node:a}))}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,r){return{type:"dataChanged",node:this,oldData:t,newData:e,update:r}}getRowIndexString(){return this.rowIndex==null?(ai(13),null):this.rowPinned==="top"?rP+this.rowIndex:this.rowPinned==="bottom"?iP+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){var a,o;const{selectionSvc:r}=this.beans,i=(a=r==null?void 0:r.createDaemonNode)==null?void 0:a.call(r,this),n=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),r&&(r.updateRowSelectable(this),r.syncInRowNode(this,i));const s=this.createDataChangedEvent(e,n,!1);(o=this.__localEventService)==null||o.dispatchEvent(s)}setId(e){var r;const t=Np(this.beans.gos);if(t)if(this.data){const i=((r=this.parent)==null?void 0:r.getRoute())??[];this.id=t({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(x2)&&ai(14,{groupPrefix:x2})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,r){var i;(i=this.beans.expansionSvc)==null||i.setExpanded(this,e,t,r)}setDataValue(e,t,r){const{colModel:i,valueSvc:n,gos:s,editSvc:a}=this.beans,o=typeof e!="string"?e:i.getCol(e)??i.getColDefCol(e);if(!o)return!1;const u=n.getValueForDisplay(o,this,void 0,void 0,"api").value;if(s.get("readOnlyEdit")){const{beans:{eventSvc:v},data:y,rowIndex:_,rowPinned:P}=this;return v.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:_,rowPinned:P,column:o,colDef:o.colDef,data:y,node:this,oldValue:u,newValue:t,value:t,source:r}),!1}if(a&&!a.committing){const v=a.setDataValue({rowNode:this,column:o},t,r);if(v!=null)return v}const d=n.setValue(this,o,t,r);this.dispatchCellChangedEvent(o,t,u);const p=this.pinnedSibling;return p&&d&&p.dispatchCellChangedEvent(o,t,u),d}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,r){var n;const i={type:"cellChanged",node:this,column:e,newValue:t,oldValue:r};(n=this.__localEventService)==null||n.dispatchEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var e;return((e=this.beans.expansionSvc)==null?void 0:e.isExpandable(this))??!1}isSelected(){return this.footer?this.sibling.isSelected():this.rowPinned&&this.pinnedSibling?this.pinnedSibling.isSelected():this.__selected}depthFirstSearch(e){var t;(t=this.childrenAfterGroup)==null||t.forEach(r=>r.depthFirstSearch(e)),e(this)}dispatchRowEvent(e){var t;(t=this.__localEventService)==null||t.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,r="api"){var i;(i=this.beans.selectionSvc)==null||i.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:r})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){this.__localEventService||(this.__localEventService=new rd),this.__localEventService.addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){var i,n,s,a;(i=this.beans.validation)==null||i.checkRowEvents(e),this.__localEventService||(this.__localEventService=new rd),this.frameworkEventListenerService=(s=(n=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:s.call(n,this.frameworkEventListenerService,this.__localEventService);const r=((a=this.frameworkEventListenerService)==null?void 0:a.wrap(e,t))??t;this.__localEventService.addEventListener(e,r)}removeEventListener(e,t){var i;const r=((i=this.frameworkEventListenerService)==null?void 0:i.unwrap(e,t))??t;this.removeLocalListener(e,r)}removeLocalListener(e,t){var r,i;(r=this.__localEventService)==null||r.removeEventListener(e,t),(i=this.__localEventService)!=null&&i.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(St(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;t&&t.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){var e;return this.childStore?this.childStore.getFirstNode():((e=this.childrenAfterSort)==null?void 0:e[0])??null}};function doe(e,t,r){return Cr(t,{type:r,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var foe=new Set(["__localEventService","__objectId","sticky","__autoHeights","__checkAutoHeightsDebounced","childStore"]);function poe(e,t){const r=new ad(t);return Object.keys(e).forEach(i=>{foe.has(i)||(r[i]=e[i])}),r.oldRowTop=null,r}var m6={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},goe=new Set(Object.values(m6));function tu(e,t){const r=e.filterUi;if(!r)return null;if(r.created)return r.promise;if(t)return null;const i=r.create(r.refreshed),n=r;return n.created=!0,n.promise=i,i}function moe(e,t,r,i,n,s){var a;return(a=t.refresh)==null||a.call(t,{...r,model:i,source:s}),e().then(o=>{if(o){const{filter:u,filterParams:d}=o;v6(u,d,i,n,s)}})}function v6(e,t,r,i,n){var s;(s=e==null?void 0:e.refresh)==null||s.call(e,{...t,model:r,state:i,source:n})}function y6(e,t,r){const i=e();i!=null&&i.created&&i.promise.then(n=>{const s=t();v6(n,i.filterParams,s,r()??{model:s},"ui")})}function BD(e,t,r,i,n,s,a){let o,u=!1,d;switch(e){case"apply":{const p=i();d=(p==null?void 0:p.model)??null,a&&(d=a(d)),o={state:p==null?void 0:p.state,model:d},u=!0;break}case"clear":{o={model:null};break}case"reset":{o={model:null},u=!0,d=null;break}case"cancel":{o={model:r()};break}}n(o),u?s(d):y6(t,r,i)}function Gn(e,t){return e[t]??null}function eo(e){return Ev(e)}function voe(e){return{tag:"div",cls:e}}var yoe=class extends Qi{constructor(e){const{className:t="ag-filter-apply-panel"}=e??{};super(voe(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const r=this.buttons;if(this.buttons=e,r===e)return;const i=this.getGui();bo(i);let n;this.destroyListeners();const s=document.createDocumentFragment(),a=this.className,o=({type:d,label:p})=>{const v=F=>{this.dispatchLocalEvent({type:d,event:F})};["apply","clear","reset","cancel"].includes(d)||St(75);const y=d==="apply",P=eo({tag:"button",attrs:{type:y&&t?"submit":"button"},ref:`${d}FilterButton`,cls:`ag-button ag-standard-button ${a}-button${y?" "+a+"-apply-button":""}`,children:p});this.activateTabIndex([P]),y&&(n=P);const R=F=>{F.key===st.ENTER&&(F.preventDefault(),v(F))},M=this.listeners;P.addEventListener("click",v),M.push(()=>P.removeEventListener("click",v)),P.addEventListener("keydown",R),M.push(()=>P.removeEventListener("keydown",R)),s.append(P)};e.forEach(d=>o(d)),this.eApply=n;const u=this.validationTooltipFeature;n&&!u?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!n&&u&&(this.validationTooltipFeature=this.destroyBean(u)),i.append(s)}getApplyButton(){return this.eApply}updateValidity(e,t=null){var i;const r=this.eApply;r&&(q0(r,e===!1),this.validationMessage=t??null,(i=this.validationTooltipFeature)==null||i.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){this.listeners.forEach(e=>e()),this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},woe={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`};function hu(e,t,r){return gie(e,woe,t,r)}function nP(e,t){const{debounceMs:r}=e;return U1(e)?(r!=null&&St(71),0):r??t}function U1(e){var t;return(((t=e.buttons)==null?void 0:t.indexOf("apply"))??-1)>=0}var xoe=class extends Qi{constructor(e,t,r,i,n,s){super(),this.column=e,this.wrapper=t,this.eventParent=r,this.updateModel=i,this.isGlobalButtons=n,this.enableGlobalButtonCheck=s,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,r=t,i=r.useForm,n=i?"form":"div";this.setTemplate({tag:n,cls:"ag-filter-wrapper"}),i&&this.addManagedElementListeners(this.getGui(),{submit:s=>{s==null||s.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=r,this.resetButtonsPanel(r),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:s,params:a})=>{s===this.column&&this.resetButtonsPanel(a,this.params)},filterStateChanged:({column:s,state:a})=>{var o;s===this.column&&((o=this.eButtons)==null||o.updateValidity(a.valid!==!1))},filterAction:({column:s,action:a,event:o})=>{s===this.column&&this.afterAction(a,o)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:s})=>{if(s!==this.isGlobalButtons){this.isGlobalButtons=s;const a=this.params;this.resetButtonsPanel(a,a,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,r){const{buttons:i,readOnly:n}=t??{},{buttons:s,readOnly:a,useForm:o}=e;if(!r&&n===a&&W0(i,s))return;const u=s&&s.length>0&&!e.readOnly&&!this.isGlobalButtons;let d=this.eButtons;if(u){const p=s.map(v=>{const y=`${v}Filter`;return{type:v,label:hu(this,y)}});if(this.applyActive=U1(this.params),!d){d=this.createBean(new yoe),this.appendChild(d.getGui());const v=this.column,y=_=>({event:P})=>{this.updateModel(v,_),this.afterAction(_,P)};d==null||d.addManagedListeners(d,{apply:y("apply"),clear:y("clear"),reset:y("reset"),cancel:y("cancel")}),this.eButtons=d}d.updateButtons(p,o)}else this.applyActive=!1,d&&(Ou(d.getGui()),this.eButtons=this.destroyBean(d))}close(e){const t=this.hidePopup;if(!t)return;const r=e,i=r&&r.key;let n;(i===st.ENTER||i===st.SPACE)&&(n={keyboardEvent:r}),t(n),this.hidePopup=null}afterAction(e,t){const{params:r,applyActive:i}=this,n=r==null?void 0:r.closeOnApply;switch(e){case"apply":{t==null||t.preventDefault(),n&&i&&this.close(t);break}case"reset":{n&&i&&this.close();break}case"cancel":{n&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===st.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply"),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},Coe={tag:"div",cls:"ag-filter"},_oe=class extends Qi{constructor(e,t,r){super(Coe),this.column=e,this.source=t,this.enableGlobalButtonCheck=r,this.wrapper=null}postConstruct(){var e;(e=this.beans.colFilter)==null||e.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){var e;return((e=this.wrapper)==null?void 0:e.then(t=>t.comp))??null}afterInit(){var e;return((e=this.wrapper)==null?void 0:e.then(()=>{}))??Hr.resolve()}afterGuiAttached(e){var t;this.afterGuiAttachedParams=e,(t=this.wrapper)==null||t.then(r=>{var i,n,s;(i=this.comp)==null||i.afterGuiAttached(e),(s=(n=r==null?void 0:r.comp)==null?void 0:n.afterGuiAttached)==null||s.call(n,e)})}afterGuiDetached(){var e;(e=this.wrapper)==null||e.then(t=>{var r,i;(i=(r=t==null?void 0:t.comp)==null?void 0:r.afterGuiDetached)==null||i.call(r)})}createFilter(e){const{column:t,source:r,beans:{colFilter:i}}=this,n=i.getFilterUiForDisplay(t)??null;this.wrapper=n,n==null||n.then(s=>{var d;if(!s)return;const{isHandler:a,comp:o}=s;let u;if(a){const p=!!this.enableGlobalButtonCheck,v=this.createBean(new xoe(t,s,i,i.updateModel.bind(i),p&&i.isGlobalButtons,p));this.comp=v,u=v.getGui()}else u=o.getGui(),Wt(u)||St(69,{guiFromFilter:u});this.appendChild(u),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:r,eGui:this.getGui()}):(d=o.afterGuiAttached)==null||d.call(o,this.afterGuiAttachedParams)})}onFilterDestroyed(e){const{source:t,column:r}=e;(t==="api"||t==="paramsUpdated")&&r.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(bo(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){var e;(e=this.beans.colFilter)==null||e.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},zD={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},GD=["january","february","march","april","may","june","july","august","september","october","november","december"];function boe(e,t){return e==null?-1:t==null?1:parseFloat(e)-parseFloat(t)}function VD(e){return e instanceof Date&&!isNaN(e.getTime())}var C2={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:VD}),dateString:({dataTypeDefinition:e})=>({comparator:(t,r)=>{const i=e.dateParser(r);return r==null||i<t?-1:i>t?1:0},isValidDate:t=>typeof t=="string"&&VD(e.dateParser(t))}),dateTime:e=>C2.date(e),dateTimeString:e=>C2.dateString(e),object:()=>{},text:()=>{}},_2={number:()=>({comparator:boe}),boolean:({t:e})=>({valueFormatter:t=>Wt(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:r=>{const i=e(r);return Wt(i)?i:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(r,i)=>{if(r==="NaN")return t("invalidDate","Invalid Date");if(i===1&&r!=null){const n=GD[Number(r)-1];return t(n,zD[n])}return r??t("blanks","(Blanks)")},treeListPathGetter:r=>Cw(r,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:r})=>({valueFormatter:i=>{const n=e(i);return Wt(n)?n:r("blanks","(Blanks)")},treeList:!0,treeListPathGetter:i=>Cw(t.dateParser(i??void 0),!1),treeListFormatter:(i,n)=>{if(n===1&&i!=null){const s=GD[Number(i)-1];return r(s,zD[s])}return i??r("blanks","(Blanks)")}}),dateTime:e=>{const t=_2.date(e);return t.treeListPathGetter=Cw,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,r=_2.dateString(e);return r.treeListPathGetter=i=>Cw(t(i??void 0)),r},object:({formatValue:e,t})=>({valueFormatter:r=>{const i=e(r);return Wt(i)?i:t("blanks","(Blanks)")}}),text:()=>{}};function Soe(e,t,r,i,n,s,a){let o=t,u=r;const d=e==="agSetColumnFilter";!u&&i.baseDataType==="object"&&!d&&(u=({column:_,node:P})=>n({column:_,node:P,value:s.valueSvc.getValue(_,P)}));const v=(d?_2:C2)[i.baseDataType],y=v({dataTypeDefinition:i,formatValue:n,t:a});return o=typeof t=="object"?{...y,...t}:y,{filterParams:o,filterValueGetter:u}}var Eoe={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},Roe={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function Toe(e,t=!1){return(t?Roe:Eoe)[e??"text"]}var w6="ag-resizer-wrapper",ru=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),Poe={tag:"div",cls:w6,children:[ru("eTopLeft","topLeft"),ru("eTop","top"),ru("eTopRight","topRight"),ru("eRight","right"),ru("eBottomRight","bottomRight"),ru("eBottom","bottom"),ru("eBottomLeft","bottomLeft"),ru("eLeft","left")]},Moe=class extends ft{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:r}=this.offsetParent,i=r/2-this.getWidth()/2,n=t/2-this.getHeight()/2;this.offsetElement(i,n,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:r,minWidth:i,width:n,minHeight:s,height:a,x:o,y:u}=this.config;this.offsetParent||this.setOffsetParent();let d=0,p=0;const v=Pc(this.element);if(v){const y=this.findBoundaryElement(),_=window.getComputedStyle(y);if(_.minWidth!=null){const P=y.offsetWidth-this.element.offsetWidth;p=parseInt(_.minWidth,10)-P}if(_.minHeight!=null){const P=y.offsetHeight-this.element.offsetHeight;d=parseInt(_.minHeight,10)-P}}if(this.minHeight=s||d,this.minWidth=i||p,n&&this.setWidth(n),a&&this.setHeight(a),(!n||!a)&&this.refreshSize(),t)this.center(e);else if(o||u)this.offsetElement(o,u,e);else if(v&&r){let y=this.boundaryEl,_=!0;if(y||(y=this.findBoundaryElement(),_=!1),y){const P=parseFloat(y.style.top),R=parseFloat(y.style.left);_?this.offsetElement(isNaN(R)?0:R,isNaN(P)?0:P,e):this.setPosition(R,P)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){var i,n;if(!this.config.popup||e===this.movable)return;this.movable=e;const r=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?((i=this.dragSvc)==null||i.addDragSource(r),this.moveElementDragListener=r):((n=this.dragSvc)==null||n.removeDragSource(r),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{var a;const i=!!e[t],n=this.getResizerElement(t),s={dragStartPixels:0,eElement:n,onDragStart:o=>this.onResizeStart(o,t),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,t)};(i||!this.isAlive()&&!i)&&(i?((a=this.dragSvc)==null||a.addDragSource(s),this.resizeListeners.push(s),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,r=this.element;let i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)n0(r,e),e=cB(r),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(i?(r.style.maxHeight="unset",r.style.minHeight="unset"):t?n0(r,e):(r.style.height=`${e}px`,r.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:r}=this.offsetParent;if(!r)return null;const i=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:i.top,a=e?0:n.top;let o=0;if(t){const d=this.element.parentElement;if(d){const{bottom:p}=d.getBoundingClientRect();o=p-i.bottom}}return r+a-s-o}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:r}=this.config;let i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Pl(t,e),e=xC(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:n}=this.offsetParent,s=r?this.position.x:this.element.getBoundingClientRect().left;n&&e+s>n&&(e=n-s)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Pl(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0,r){var s;const{forcePopupParentAsOffsetParent:i}=this.config,n=i?this.boundaryEl:this.element;n&&((s=this.popupSvc)==null||s.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:r}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){var r,i;if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e&&this.popupSvc?((r=this.resizeObserverSubscriber)==null||r.call(this),this.resizeObserverSubscriber=Mc(this.beans,(i=this.popupSvc)==null?void 0:i.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:r,isTop:i,anywhereWithin:n,topBuffer:s}=e,a=t.clientX-this.dragStartPosition.x,o=t.clientY-this.dragStartPosition.y,u=this.shouldSkipX(t,!!r,!!n,a)?0:a,d=this.shouldSkipY(t,!!i,s,o)?0:o;return{movementX:u,movementY:d}}shouldSkipX(e,t,r,i){const n=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),o=this.config.popup?this.position.x:n.left;let u=o<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=a.right;return u?!0:(t?u=i<0&&e.clientX>o+s.left||i>0&&e.clientX<o+s.left:r?u=i<0&&e.clientX>a.right||i>0&&e.clientX<o+s.left:u=i<0&&e.clientX>a.right||i>0&&e.clientX<a.right,u)}shouldSkipY(e,t,r=0,i){const n=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),o=this.config.popup?this.position.y:n.top;let u=o<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=a.bottom;return u?!0:(t?u=i<0&&e.clientY>o+s.top+r||i>0&&e.clientY<o+s.top:u=i<0&&e.clientY>a.bottom||i>0&&e.clientY<a.bottom,u)}createResizeMap(){const e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(eo(Poe)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${w6}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:r,forcePopupParentAsOffsetParent:i}=this.config;!r&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(r=>!r.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,r=0;for(let i=0;i<e.length;i++){const n=e[i],s=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let a=this.minHeight||0,o=this.minWidth||0;if(s){const u=window.getComputedStyle(n);u.minHeight&&(a=parseInt(u.minHeight,10)),u.minWidth&&(o=parseInt(u.minWidth,10))}else a=n.offsetHeight,o=n.offsetWidth;t+=a,r+=o}return{height:t,width:r}}applySizeToSiblings(e){let t=null;const r=this.getSiblings();if(r){for(let i=0;i<r.length;i++){const n=r[i];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=r[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:r}=this.config,{isTop:i,isRight:n,isBottom:s,isLeft:a}=this.currentResizer,o=n||a,u=s||i,{movementX:d,movementY:p}=this.calculateMouseMovement({e,isLeft:a,isTop:i}),v=this.position.x,y=this.position.y;let _=0,P=0;if(o&&d){const R=a?-1:1,M=this.getWidth(),F=M+d*R;let k=!1;a&&(_=M-F,(v+_<=0||F<=this.minWidth)&&(k=!0,_=0)),k||this.setWidth(F)}if(u&&p){const R=i?-1:1,M=this.getHeight(),F=M+p*R;let k=!1;i?(P=M-F,(y+P<=0||F<=this.minHeight)&&(k=!0,P=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&M<F&&this.getMinSizeOfSiblings().height+F>this.element.parentElement.offsetHeight&&(k=!0),k||this.setHeight(F)}this.updateDragStartPosition(e.clientX,e.clientY),((t||r)&&_||P)&&this.offsetElement(v+_,y+P)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:r}=this.position;let i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());const{movementX:n,movementY:s}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+n,r+s),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){var e;for(;this.resizeListeners.length;){const t=this.resizeListeners.pop();(e=this.dragSvc)==null||e.removeDragSource(t)}}destroy(){var e;super.destroy(),this.moveElementDragListener&&((e=this.dragSvc)==null||e.removeDragSource(this.moveElementDragListener)),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},x6="__ag_Grid_Stop_Propagation";function ld(e){e[x6]=!0}function mc(e){return e[x6]===!0}var Foe="ag-focus-managed",ig=class extends ft{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:r=>{if(r.defaultPrevented)return;const i=Sd(this.beans,this.eFocusable,!1,r.shiftKey);i&&(i.focus(),r.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:r}}=this;e.classList.add(Foe),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),r&&this.addManagedElementListeners(e,{focusout:r})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||mc(t))return;const{callbacks:r}=this;if(r.shouldStopEventPropagation(t)){ld(t);return}t.key===st.TAB?r.onTabKeyDown(t):r.handleKeyDown&&r.handleKeyDown(t)}})}},Aoe=class extends Qi{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new ig(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new Moe(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}refresh(e){const t=e,r=this.params;this.params=t,t.source==="colDef"&&this.updateParams(t,r);const n=t.state,s=this.state;return this.state=n,(n.model!==s.model||n.state!==s.state)&&this.setModelIntoUi(n.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=U1(e),this.setupApplyDebounced()}doesFilterPass(e){St(283);const{getHandler:t,model:r,column:i}=this.params;return t().doesFilterPass({...e,model:r,handlerParams:this.beans.colFilter.getHandlerParams(i)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return St(284),this.params.model!=null}setupApplyDebounced(){const e=nP(this.params,this.defaultDebounceMs),t=os(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return St(285),this.params.model}setModel(e){St(286);const{beans:t,params:r}=this;return t.colFilter.setModelForColumnLegacy(r.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:r}=this,i=!this.areModelsEqual(t.model,r.model);return i&&t.onAction("apply",e),i}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();const r=this.getModelFromUi(),i={model:r,state:this.getState(),valid:this.canApply(r)};this.state=i;const n=this.params;n.onStateChange(i),n.onUiChange(this.getUiChangeEventParams()),this.gos.get("enableFilterHandlers")||this.eventSvc.dispatchEvent({type:"filterModified",column:n.column,filterInstance:this}),e??(e=this.applyActive?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e==null?void 0:e.container,this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:r}=this;if(!t)return;const i=e==="floatingFilter"||e==="columnFilter";i?(t.restoreLastSize(),t.setResizable(r.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(i)}afterGuiDetached(){var e;this.checkApplyDebounce(),(e=this.positionableFeature)==null||e.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e){return hu(this,e)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function C6(e){return!!e.operator}function Ioe(e,t,r){if(t==null)return null;let i=null;const{compName:n,jsComp:s,fwComp:a}=YB(e,t);return n?i={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:s==null&&a==null&&t.filter===!0&&(i=r()),i}var fx={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},sP=class extends ft{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},r=t.autoHeight?fx.AUTO_HEIGHT:t.print?fx.PRINT:fx.NORMAL;this.view.updateLayoutClasses(r,t)}},iu="Viewport",HD="fakeVScrollComp",vS=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],UD=100,yS=150,Doe=class extends ft{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=os(this,()=>this.lastScrollSource[1]=null,yS),this.resetLastVScrollDebounced=os(this,()=>this.lastScrollSource[0]=null,yS)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,r=>{this.centerRowsCtrl=r.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,iu)});for(const e of vS){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),r=t?os(this,this.onVScroll.bind(this,iu),UD):this.onVScroll.bind(this,iu),i=t?os(this,this.onVScroll.bind(this,HD),UD):this.onVScroll.bind(this,HD);this.addManagedElementListeners(this.eBodyViewport,{scroll:r}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...vS,iu]){if(this.lastScrollSource[1]===t)continue;const r=this.getViewportForSource(t);_C(r,e,this.enableRtl)}}getViewportForSource(e){return e===iu?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:r}=t;if(this.shouldBlockScrollUpdate(1,r,!0))return;const i=CC(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===iu?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:r}=this;r==null||r.setScrollTop(t),this.nextScrollTop=t,e===iu?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,r!=null&&r.active?r.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},yS)}shouldBlockScrollUpdate(e,t,r=!1){return r&&!Vh()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=BT(this.eBodyViewport),{scrollHeight:r}=this.eBodyViewport;return e<0||e+t>r}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:r}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>r}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const r of vS)if(this.getViewportForSource(r).scrollLeft!==e){t=!0;break}t&&this.onHScroll(iu)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),_C(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:r,lastScrollTop:i}=this;return{top:i,bottom:i+r}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:r}=this.beans,i=r.getRowCount();let n=-1;for(let s=0;s<i;s++){const a=r.getRow(s);if(typeof e=="function"){if(a&&e(a)){n=s;break}}else if(e===a||e===a.data){n=s;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t,r=0){if(cs(this.gos,"print"))return;const{rowModel:i}=this.beans,n=i.getRowCount();if(typeof e!="number"||e<0||e>=n){St(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:s,pageBounds:a,rowContainerHeight:o,rowRenderer:u}=this.beans;s.wrapIncoming(()=>{var P,R;const d=this.ctrlsSvc.getGridBodyCtrl(),p=i.getRow(e);let v,y,_=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:M,stickyBottomHeight:F}=d,k=p.rowTop,N=p.rowHeight,G=a.getPixelOffset(),j=p.rowTop-G,ee=j+p.rowHeight,q=this.getVScrollPosition(),oe=o.divStretchOffset,ue=q.top+oe,me=q.bottom+oe,ie=me-ue,fe=o.getScrollPositionForPixel(j),ke=o.getScrollPositionForPixel(ee-ie),et=Math.min((fe+ke)/2,j),Xe=ue+M>j,ct=me-F<ee;let pt=null;t==="top"?pt=fe-M:t==="bottom"?pt=ke+F:t==="middle"?pt=et:Xe?pt=fe-M:ct&&(ke-fe>ie?pt=fe-M:pt=ke+F),pt!==null&&(this.setVerticalScrollPosition(pt),u.redraw({afterScroll:!0})),v=k!==p.rowTop||N!==p.rowHeight,y=M!==d.stickyTopHeight||F!==d.stickyBottomHeight,_++}while((v||y)&&_<10);if((P=this.animationFrameSvc)==null||P.flushAllFrames(),r<10&&(p!=null&&p.stub||!((R=this.beans.rowAutoHeight)!=null&&R.areRowsMeasured()))){const M=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const F=this.getVScrollPosition().top;M!==F&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=i.getRowCount())&&this.ensureIndexVisible(e,t,r+1)}})}})}clearRetryListeners(){this.clearRetryListenerFncs.forEach(e=>e()),this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:r,frameworkOverrides:i}=this.beans,n=r.getCol(e);if(!n||n.isPinned()||!this.visibleCols.isColDisplayed(n))return;const s=this.getPositionedHorizontalScroll(n,t);i.wrapIncoming(()=>{var a;s!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),(a=this.animationFrameSvc)==null||a.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:r,columnAfterEnd:i}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),a=this.enableRtl;let o=(a?r:i)||n,u=a?i:r;t!=="auto"&&(o=t==="start",u=t==="end");const d=t==="middle";if(o||u||d){const{colLeft:p,colMiddle:v,colRight:y}=this.getColumnBounds(e);return d?v-s/2:o?a?y:p:a?p-s:y-s}return null}isColumnOutsideViewport(e){const{start:t,end:r}=this.getViewportBounds(),{colLeft:i,colRight:n}=this.getColumnBounds(e),s=this.enableRtl,a=s?t>n:r<n,o=s?r<i:t>i;return{columnBeforeStart:a,columnAfterEnd:o}}getColumnBounds(e){const t=this.enableRtl,r=this.visibleCols.bodyWidth,i=e.getActualWidth(),n=e.getLeft(),s=t?-1:1,a=t?r-n:n,o=a+i*s,u=a+i/2*s;return{colLeft:a,colMiddle:u,colRight:o}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),r=t,i=e+t;return{start:r,end:i,width:e}}},oP=class extends ft{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=cs(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:r}=this.beans,i=t.bodyWidth,n=t.getColsLeftWidth(),s=t.getDisplayedColumnsRightWidth();let a;e?a=i+n+s:(a=i,this.addSpacer&&(this.gos.get("enableRtl")?n:s)===0&&r.verticalScrollShowing&&(a+=r.getScrollbarWidth())),this.callback(a)}},koe=class extends ft{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:r}=this,i=()=>{Fc(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(i),r.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e==null||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const r=this.centerContainerCtrl.getCenterWidth();r!==this.centerWidth&&(this.centerWidth=r,t==null||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=BT(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function px(e,t,r,i){var s;const n=(s=t.getColDef().cellRendererParams)==null?void 0:s.suppressMouseEventHandling;return _6(e,t,r,i,n)}function Loe(e,t,r,i){const n=t==null?void 0:t.suppressMouseEventHandling;return _6(e,void 0,r,i,n)}function _6(e,t,r,i,n){return n?n(Cr(e,{column:t,node:r,event:i})):!1}function b6(e,t,r){let i=t;for(;i;){const n=RB(e,i,r);if(n)return n;i=i.parentElement}return null}var LC="cellCtrl";function aP(e,t){return b6(e,t,LC)}var OC="renderedRow";function Ooe(e,t){return b6(e,t,OC)}function b2(e,t,r,i,n){const s=i?i.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const a=Cr(e,{event:t,editing:n,column:i,node:r,data:r.data,colDef:i.getColDef()});return!!(s&&s(a))}function Noe(e){const{pinnedRowModel:t,rowModel:r}=e,[i,n]=[(t==null?void 0:t.isEmpty("top"))??!0,(t==null?void 0:t.isEmpty("bottom"))??!0],s=i?null:"top";let a,o;n?(a=null,o=r.getRowCount()-1):(a="bottom",o=(t==null?void 0:t.getPinnedBottomRowCount())??-1);const{visibleCols:u,rangeSvc:d}=e,p=u.allCols;!d||!(p!=null&&p.length)||d.setCellRange({rowStartIndex:0,rowStartPinned:s,rowEndIndex:o,rowEndPinned:a})}var Boe=65,zoe=67,Goe=86,Voe=68,Hoe=90,Uoe=89;function Woe(e){const{keyCode:t}=e;let r;switch(t){case Boe:r=st.A;break;case zoe:r=st.C;break;case Goe:r=st.V;break;case Voe:r=st.D;break;case Hoe:r=st.Z;break;case Uoe:r=st.Y;break;default:r=e.code}return r}var joe=class extends ft{constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),(e=this.beans.touchSvc)==null||e.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",pB("touchstart")?"touchstart":"mousedown"].forEach(r=>{const i=this.processMouseEvent.bind(this,r);this.addManagedElementListeners(this.element,{[r]:i})})}processMouseEvent(e,t){var n;if(!Z0(this.beans,t)||mc(t))return;const{cellCtrl:r,rowCtrl:i}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(r!=null&&r.column&&r.dispatchCellContextMenuEvent(t),(n=this.beans.contextMenuSvc)==null||n.handleContextMenuMouseEvent(t,void 0,i,r)):(r&&r.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:aP(t,e),rowCtrl:Ooe(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:r,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(r?this.processCellKeyboardEvent(r,e,t):i!=null&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,r){var s,a;const i=((s=this.editSvc)==null?void 0:s.isEditing(e,{withOpenEditor:!0}))??!1;!b2(this.gos,r,e.rowNode,e.column,i)&&t==="keydown"&&(!i&&((a=this.beans.navigation)!=null&&a.handlePageScrollingKey(r))||e.onKeyDown(r),this.doGridOperations(r,i),r6(r)&&e.processCharacter(r)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(r,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,r){const{rowNode:i}=e,{focusSvc:n,navigation:s}=this.beans,a=n.getFocusedCell(),o=a==null?void 0:a.column;if(!b2(this.gos,r,i,o,!1)){const d=r.key;if(t==="keydown")switch(d){case st.PAGE_HOME:case st.PAGE_END:case st.PAGE_UP:case st.PAGE_DOWN:s==null||s.handlePageScrollingKey(r,!0);break;case st.LEFT:case st.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case st.UP:case st.DOWN:e.onKeyboardNavigate(r);break;case st.TAB:e.onTabKeyDown(r);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",r))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!Z0(this.beans,e))return;const r=Woe(e),{clipboardSvc:i,undoRedo:n}=this.beans;if(r===st.A)return this.onCtrlAndA(e);if(r===st.C)return this.onCtrlAndC(i,e);if(r===st.D)return this.onCtrlAndD(i,e);if(r===st.V)return this.onCtrlAndV(i,e);if(r===st.X)return this.onCtrlAndX(i,e);if(r===st.Y)return this.onCtrlAndY(n);if(r===st.Z)return this.onCtrlAndZ(n,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:r,selectionSvc:i},gos:n}=this;r&&Bu(n)&&t.isRowsToRender()?Noe(this.beans):i&&(i==null||i.selectAllRowNodes({source:"keyboardSelectAll",selectAll:IB(n)})),e.preventDefault()}onCtrlAndC(e,t){var i;if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:r}=this.getControlsForEventTarget(t.target);(i=this.editSvc)!=null&&i.isEditing(r,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){var i;if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:r}=this.getControlsForEventTarget(t.target);(i=this.editSvc)!=null&&i.isEditing(r,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){var i;const{cellCtrl:r}=this.getControlsForEventTarget(t.target);(i=this.editSvc)!=null&&i.isEditing(r,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e==null||e.redo("ui")}},S6=class extends ft{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,r=t!=null?`${t}px`:"";this.eContainer.style.height=r,this.eViewport&&(this.eViewport.style.height=r)}},Sw=e=>e.topRowCtrls,Ew=e=>e.getStickyTopRowCtrls(),Rw=e=>e.getStickyBottomRowCtrls(),Tw=e=>e.bottomRowCtrls,Pw=e=>e.allRowCtrls,wS=e=>e.getCtrls("top"),xS=e=>e.getCtrls("center"),CS=e=>e.getCtrls("bottom"),$oe={center:{type:"center",name:"center-cols",getRowCtrls:Pw,getSpannedRowCtrls:xS},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:Pw,getSpannedRowCtrls:xS},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:Pw,getSpannedRowCtrls:xS},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:Pw},topCenter:{type:"center",name:"floating-top",getRowCtrls:Sw,getSpannedRowCtrls:wS},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Sw,getSpannedRowCtrls:wS},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Sw,getSpannedRowCtrls:wS},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:Sw},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:Ew},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Ew},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Ew},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:Ew},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:Rw},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Rw},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Rw},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:Rw},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:Tw,getSpannedRowCtrls:CS},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Tw,getSpannedRowCtrls:CS},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Tw,getSpannedRowCtrls:CS},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:Tw}};function E6(e){return`ag-${Mv(e).name}-viewport`}function gx(e){const t=Mv(e);return t.container??`ag-${t.name}-container`}function qoe(e){return`ag-${Mv(e).name}-spanned-cells-container`}function Mv(e){return $oe[e]}var Koe=["topCenter","topLeft","topRight"],Zoe=["bottomCenter","bottomLeft","bottomRight"],Xoe=["center","left","right"],Yoe=["center","left","right","fullWidth"],Qoe=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],Joe=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],eae=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],R6=["stickyTopCenter","stickyTopLeft","stickyTopRight"],T6=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],tae=[...R6,"stickyTopFullWidth",...T6,"stickyBottomFullWidth"],rae=[...Koe,...Zoe,...Xoe,...R6,...T6],iae=class extends ft{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=Mv(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new koe(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,r,i){this.comp=e,this.eContainer=t,this.eSpannedContainer=r,this.eViewport=i,this.createManagedBean(new joe(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:n,rangeSvc:s}=this.beans,a=()=>this.onPinnedWidthChanged();this.forContainers(Joe,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(n==null?void 0:n.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:a})}),this.forContainers(eae,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(n==null?void 0:n.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:a})}),this.forContainers(Yoe,()=>this.createManagedBean(new S6(this.eContainer,this.name==="center"?i:void 0))),s&&this.forContainers(rae,()=>this.createManagedBean(s.createDragListenerFeature(this.eContainer))),this.forContainers(Qoe,()=>this.createManagedBean(new oP(o=>this.comp.setContainerWidth(`${o}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,r=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:r,displayedColumnsWidthChanged:r,displayedRowsChanged:i=>this.onDisplayedRowsChanged(i.afterScroll)}),r(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const i=this.options.getSpannedRowCtrls(e);i&&this.comp.setSpannedRowCtrls(i,!1)}})}listenOnDomOrder(){if(tae.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const r=this.gos.get("ensureDomOrder"),i=cs(this.gos,"print");this.comp.setDomOrder(r||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=r=>{e.dragging&&r.cancelable&&r.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),r=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,r,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return K0(this.eViewport)}getCenterViewportScrollLeft(){return CC(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Mc(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return hB(this.eViewport)}getViewportScrollLeft(){return CC(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||GT(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){_C(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const r=cs(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||r,s=t.filter(a=>{const o=a.isFullWidth();return this.options.fullWidth?!n&&o:n||!o});this.comp.setRowCtrls({rowCtrls:s,useFlushSync:e})}},nae="ag-force-vertical-scroll",sae="ag-selectable",oae="ag-column-moving",aae=class extends ft{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,r,i,n,s,a){var o,u;this.comp=e,this.eGridBody=t,this.eBodyViewport=r,this.eTop=i,this.eBottom=n,this.eStickyTop=s,this.eStickyBottom=a,this.eCenterColsViewport=r.querySelector(`.${E6("center")}`),this.eFullWidthContainer=r.querySelector(`.${gx("fullWidth")}`),this.eStickyTopFullWidthContainer=s.querySelector(`.${gx("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=a.querySelector(`.${gx("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",d=>this.setCellTextSelection(d.currentValue)),this.createManagedBean(new sP(this.comp)),this.scrollFeature=this.createManagedBean(new Doe(r)),(o=this.beans.rowDragSvc)==null||o.setupRowDrag(r,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,r,n,s,a]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(u=this.filterManager)==null||u.setupAdvFilterHeaderComp(i),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),r=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:r,rowResizeEnded:r}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const r=t&&e.getScrollbarWidth()||0,i=t6()?16:0,n=`calc(100% + ${r+i}px)`;Fc(this.beans,()=>this.comp.setBodyViewportWidth(n)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let r=this.gos.get("treeData");if(!r){const i=t.isPivotMode();r=(e?e.columns.length:0)>=(i?2:1)}this.comp.setGridRootRole(r?"treegrid":"grid")}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:r=>{const{target:i}=r,n=Bh(i,"ag-root",t);t.classList.toggle("ag-has-focus",!n)},focusout:r=>{const{target:i,relatedTarget:n}=r,s=t.contains(n),a=Bh(n,"ag-root",t);Bh(i,"ag-root",t)||(!s||a)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(oae,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(sae,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;(e=this.beans.editSvc)==null||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var n,s;const e=(((n=this.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:n.getRowCount())??0)+(((s=this.filterManager)==null?void 0:s.getHeaderRowCount())??0),{rowModel:t}=this.beans,r=t.isLastRowIndexKnown()?t.getRowCount():-1,i=r===-1?-1:e+r;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?nae:null,r=cs(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||r&&dB(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let r=t.sizesMeasured;const i=()=>{const n=r&&dp(this.gos)&&!e.stretching,s=n?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(s,n)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({gridStylesChanged:()=>{!r&&t.sizesMeasured&&(r=!0,i())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:r,eTop:i,eBottom:n,beans:{popupSvc:s,touchSvc:a}}=this,o=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:o}),a==null||a.mockBodyContextMenu(this,o),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,s)});const u=this.onStickyWheel.bind(this);for(const p of[t,r,i,n])this.addManagedElementListeners(p,{wheel:u});const d=this.onHorizontalWheel.bind(this);for(const p of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(p).eContainer,{wheel:d});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:r,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(r))&&Z0(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:r,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(r))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:r}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||r})}onBodyViewportContextMenu(e,t,r){var n;if(!e&&!r)return;this.gos.get("preventDefaultOnContextMenu")&&(e||r).preventDefault();const{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsSvc.get("center").eViewport)&&((n=this.beans.contextMenuSvc)==null||n.showContextMenu({mouseEvent:e,touchEvent:r,value:null,anchorToElement:this.eGridBody,source:"ui"}))}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e!=null&&e.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,r=e==null?void 0:e.getPinnedTopTotalHeight(),i=e==null?void 0:e.getPinnedBottomTotalHeight(),n=t.getPinnedRowBorderWidth(),s=t.getRowBorderWidth(),a=n-s,o=r?a+r:0,u=i?a+i:0;this.comp.setTopHeight(o),this.comp.setBottomHeight(u),this.comp.setTopInvisible(o<=0),this.comp.setBottomInvisible(u<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){var n,s;const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(((n=this.filterManager)==null?void 0:n.getHeaderHeight())??0),r=((s=this.pinnedRowModel)==null?void 0:s.getPinnedTopTotalHeight())??0;let i=0;t>0&&(i+=t),r>0&&(i+=r),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:r}=this,i=(e==null?void 0:e.getPinnedBottomTotalHeight())??0,s=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,a=i+s;r.setStickyBottomBottom(`${a}px`)}};function lae(e,t){var r;return((r=aP(e,t.target))==null?void 0:r.getFocusedCellPosition())??null}function WD(e,t){const r=cs(e.gos,"normal"),i=t;let n,s;i.clientX!=null||i.clientY!=null?(n=i.clientX,s=i.clientY):(n=i.x,s=i.y);const{pageFirstPixel:a}=e.pageBounds.getCurrentPagePixelRange();if(s+=a,r){const o=e.ctrlsSvc.getScrollFeature(),u=o.getVScrollPosition(),d=o.getHScrollPosition();n+=d.left,s+=u.top}return{x:n,y:s}}var P6=class extends Qi{constructor(e,t){super(),this.direction=t,this.eViewport=fr,this.eContainer=fr,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",JB()||Vh())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=t6(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),r=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:r,touchend:r})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),Fc(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;_ie(this,()=>Pc(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},cae={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},uae=class extends P6{constructor(){super(cae,"horizontal"),this.eLeftSpacer=fr,this.eRightSpacer=fr,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new oP(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var t;if(!this.invisibleScrollbar)return;const e=((t=this.beans.pinnedRowModel)==null?void 0:t.getPinnedBottomTotalHeight())??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const r=!this.enableRtl&&e,i=this.scrollVisibleSvc.getScrollbarWidth();r&&(t+=i),Pl(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let n=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(n+=i),Pl(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=i)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,r=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,s=r?0:i===0&&t?16:i,a=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),n0(this.getGui(),s),n0(this.eViewport,s),n0(this.eContainer,s),s||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(a,100):a()}getScrollPosition(){return CC(this.eViewport,this.enableRtl)}setScrollPosition(e){Pc(this.eViewport)||this.attemptSettingScrollPosition(e),_C(this.eViewport,e,this.enableRtl)}},hae={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},dae=class extends P6{constructor(){super(hae,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new S6(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,r=this.invisibleScrollbar,i=t&&e.getScrollbarWidth()||0,n=i===0&&r?16:i;this.toggleCss("ag-scrollbar-invisible",r),Pl(this.getGui(),n),Pl(this.eViewport,n),Pl(this.eContainer,n),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const r=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),n=r.scrollTop;i!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Pc(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},fae="ag-column-first",pae="ag-column-last";function M6(e,t,r,i){return Gi(e)?[]:mae(e.headerClass,e,t,r,i)}function F6(e,t,r){e.toggleCss(fae,r.isColAtEdge(t,"first")),e.toggleCss(pae,r.isColAtEdge(t,"last"))}function gae(e,t,r,i){return Cr(t,{colDef:e,column:r,columnGroup:i})}function mae(e,t,r,i,n){if(Gi(e))return[];let s;if(typeof e=="function"){const a=gae(t,r,i,n);s=e(a)}else s=e;return typeof s=="string"?[s]:Array.isArray(s)?[...s]:[]}function vae(e,t,r){t.addManagedElementListeners(r,{keydown:i=>{if(!i.defaultPrevented&&i.key===st.TAB){const n=i.shiftKey;Sd(e,r,!1,n)||Gp(e,n)&&i.preventDefault()}}})}function yae(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function Hh(e){var t;return e.gos.get("suppressHeaderFocus")||!!((t=e.overlays)!=null&&t.isExclusive())}function W1(e){var t;return e.gos.get("suppressCellFocus")||!!((t=e.overlays)!=null&&t.isExclusive())}function Gp(e,t,r=!1){const i=e.ctrlsSvc.get("gridCtrl");return!r&&i.focusNextInnerContainer(t)?!0:((r||!t&&!i.isDetailGrid())&&i.forceFocusOutOfContainer(t),!1)}function bl(e){var t;return((t=e.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:t.getRowCount())??0}function lP(e){const t=[],r=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const i of r){if(!i)continue;const n=i.getGroupRowCount()||0;for(let s=0;s<n;s++){const a=i.getGroupRowCtrlAtIndex(s),o=t[s];if(a){const u=wae(e,a);(o==null||u>o)&&(t[s]=u)}}}return t}function wae(e,t){let i=e.colModel.isPivotMode()?Cae(e):I6(e);const n=t.getHeaderCellCtrls();for(const s of n){const{column:a}=s,o=a.getAutoHeaderHeight();o!=null&&o>i&&a.isAutoHeaderHeight()&&(i=o)}return i}function cP(e){let r=e.colModel.isPivotMode()?xae(e):Fv(e);return e.colModel.forAllCols(i=>{const n=i.getAutoHeaderHeight();n!=null&&n>r&&i.isAutoHeaderHeight()&&(r=n)}),r}function Fv(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function A6(e){return e.gos.get("floatingFiltersHeight")??Fv(e)}function I6(e){return e.gos.get("groupHeaderHeight")??Fv(e)}function xae(e){return e.gos.get("pivotHeaderHeight")??Fv(e)}function Cae(e){return e.gos.get("pivotGroupHeaderHeight")??I6(e)}var _ae=class extends ft{setComp(e,t,r){this.comp=e,this.eGui=t;const{beans:i}=this,{headerNavigation:n,touchSvc:s,ctrlsSvc:a}=i;n&&this.createManagedBean(new ig(r,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,i),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,i)}),this.onPivotModeChanged(i),this.setupHeaderHeight();const o=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:o}),s==null||s.mockHeaderContextMenu(this,o),a.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>Fc(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var s;const{beans:e}=this;let t=0;const r=lP(e).reduce((a,o)=>a+o,0),i=cP(e);if((s=e.filterManager)!=null&&s.hasFloatingFilters()&&(t+=A6(e)),t+=r,t+=i,this.headerHeight===t)return;this.headerHeight=t;const n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const r=e.visibleCols.allCols.some(i=>i.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",r)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),r=e.shiftKey,i=r!==t?"LEFT":"RIGHT",{beans:n}=this,{headerNavigation:s,focusSvc:a}=n;(s.navigateHorizontally(i,!0,e)||!r&&a.focusOverlay(!1)||Gp(n,r,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:r}=this.beans;switch(e.key){case st.LEFT:t="LEFT";case st.RIGHT:{Wt(t)||(t="RIGHT"),r.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case st.UP:t="UP";case st.DOWN:{Wt(t)||(t="DOWN"),r.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:r,beans:i}=this;!t&&r.contains(Yi(i))||r.contains(t)||(i.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,r){var a;const{menuSvc:i,ctrlsSvc:n}=this.beans;if(!e&&!r||!(i!=null&&i.isHeaderContextMenuEnabled()))return;const{target:s}=e??t;(s===this.eGui||s===((a=n.getHeaderRowContainerCtrl())==null?void 0:a.eViewport))&&i.showHeaderContextMenu(void 0,e,r)}},uP=class extends ft{constructor(e,t,r,i){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=i,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=r}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?si(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,r=e.get("suppressColumnMoveAnimation"),i=Wt(this.columnOrGroup.getOldLeft());(t==null?void 0:t.isActive())&&i&&!r?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),r=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=r,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===r&&this.setLeft(r)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:r,visibleCols:i}=this.beans;if(!cs(r,"print")||e.getPinned()==="left")return t;const s=i.getColsLeftWidth();if(e.getPinned()==="right"){const a=i.bodyWidth;return s+a+t}return s+t}setLeft(e){if(Wt(e)&&(this.eCell.style.left=`${e}px`),vn(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&Jre(this.ariaEl,t.length)}}},bae=0,D6="headerCtrl",hP=class extends ft{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+bae++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,r,i,n){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,r,i,n),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:r}=this.beans.focusSvc.focusedHeader,i=r.getDefinition(),n=i&&i.suppressHeaderKeyboardEvent;if(!Wt(n))return!1;const s=Cr(this.gos,{colDef:i,column:r,headerRowIndex:t,event:e});return!!n(s)}getWrapperHasFocus(){return Yi(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let r;if(typeof t=="function"){const i=this.getHeaderClassParams();r=t(i)}else r=t;r&&this.comp.setUserStyles(r)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:r,compBean:i}=e,{beans:n}=this,s=v=>{if(!this.isAlive()||!i.isAlive())return;const{paddingTop:y,paddingBottom:_,borderBottomWidth:P,borderTopWidth:R}=Cd(this.eGui),M=y+_+P+R,k=t.offsetHeight+M;if(v<5){const N=ss(n),G=!N||!N.contains(t),j=k==0;if(G||j){a2(()=>s(v+1),"raf",n);return}}this.setColHeaderHeight(this.column,k)};let a=!1,o;const u=()=>{const v=this.column.isAutoHeaderHeight();v&&!a&&d(),!v&&a&&p()},d=()=>{a=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),s(0),o=Mc(this.beans,t,()=>s(0))},p=()=>{a=!1,o&&o(),this.comp.toggleCss("ag-header-cell-auto-height",!1),o=void 0};u(),i.addDestroyFunc(()=>p()),i.addManagedListeners(this.column,{widthChanged:()=>a&&s(0)}),i.addManagedEventListeners({sortChanged:()=>{a&&window.setTimeout(()=>s(0))}}),r&&r(u)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:r,eGui:i}=this;!e||!t||!i||(F6(e,t,r.visibleCols),oB(i,r.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=Hh(this.beans);this.eGui&&Bo(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){var s;const t=Yi(this.beans),r=e.key===st.LEFT||e.key===st.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||r)&&(e.preventDefault(),e.stopImmediatePropagation()),!r))return;const n=e.key===st.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(a,e.shiftKey),(s=this.resizeFeature)==null||s.toggleColumnResizing(!0)}else this.moveHeader(n)}moveHeader(e){var t;(t=this.beans.colMoves)==null||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:r}=this.beans;return r?r.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:r}=this;let i=e.key===st.LEFT!==t.get("enableRtl");const n=r.getPinned(),s=t.get("enableRtl");return n&&s!==(n==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case st.PAGE_DOWN:case st.PAGE_UP:case st.PAGE_HOME:case st.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=D6,{eGui:r,gos:i}=this;sd(i,r,t,this),e.addDestroyFunc(()=>sd(i,r,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(t.focus(),this.lastFocusEvent=e||null):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&((e=this.beans.dragAndDrop)==null||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,r){const i=e??t,{menuSvc:n,gos:s}=this.beans;s.get("preventDefaultOnContextMenu")&&i.preventDefault(),n!=null&&n.isHeaderContextMenuEnabled(r)&&n.showHeaderContextMenu(r,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",r)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:r}=this;e.isColumn?r.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):r.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Sae=class extends hP{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,r,i,n){this.comp=e;const{rowCtrl:s,column:a,beans:o}=this,{colResize:u,context:d,colHover:p,rangeSvc:v}=o,y=Rv(this,d,n);this.setGui(t,y),this.updateState(),this.setupWidth(y),this.setupMovingCss(y),this.setupMenuClass(y),this.setupSortableClass(y),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:P=>this.setRefreshFunction("measuring",P),compBean:y}),this.addColumnHoverListener(y),this.setupFilterClass(y),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(y),this.setupSelectAll(y),this.setupUserComp(),this.refreshAria(),u?this.resizeFeature=y.createManagedBean(u.createResizeFeature(s.pinned,a,r,e,this)):qi(r,!1),p==null||p.createHoverFeature(y,[a],t),v==null||v.createRangeHighlightFeature(y,a,e),y.createManagedBean(new uP(a,t,o)),y.createManagedBean(new ig(t,{shouldStopEventPropagation:P=>this.shouldStopEventPropagation(P),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(y),y.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),y.addManagedListeners(a,{colDefChanged:()=>this.refresh()}),y.addManagedListeners(a,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const _=()=>this.checkDisplayName();y.addManagedEventListeners({columnValueChanged:_,columnRowGroupChanged:_,columnPivotChanged:_,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),y.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){var r;(r=this.beans.colResize)==null||r.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,r=e.colDef;return Cr(t.gos,{colDef:r,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return One(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:r,gos:i}=this.beans;return Cr(i,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!(e!=null&&e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!r&&(!this.openFilterEnabled||zo(this.gos)),showColumnMenu:(s,a)=>{e==null||e.showColumnMenu({column:this.column,buttonElement:s,positionBy:"button",onClosedCallback:a})},showColumnMenuAfterMouseClick:(s,a)=>{e==null||e.showColumnMenu({column:this.column,mouseEvent:s,positionBy:"mouse",onClosedCallback:a})},showFilter:s=>{e==null||e.showFilterMenu({column:this.column,buttonElement:s,containerType:"columnFilter",positionBy:"button"})},progressSort:s=>{t==null||t.progressSort(this.column,!!s,"uiColumnSorted")},setSort:(s,a)=>{t==null||t.setSortForColumn(this.column,s,!!a,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(s,a)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(s,a)}})}setupSelectAll(e){var r;const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),(r=this.selectAllFeature)==null||r.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{var n;const i=t.createSelectAllFeature(this.column);i&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(i),(n=this.selectAllFeature)==null||n.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!i&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){var e;return(e=this.selectAllFeature)==null?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;super.handleKeyDown(e),e.key===st.SPACE&&((t=this.selectAllFeature)==null||t.onSpaceKeyDown(e)),e.key===st.ENTER&&this.onEnterKeyDown(e),e.key===st.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){var t;e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&((t=this.beans.sortSvc)==null||t.progressSort(this.column,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,t){const r=this.comp.getUserCompInstance();jD(r)&&r.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),ose()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var r;this.tooltipFeature=(r=this.beans.tooltipSvc)==null?void 0:r.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),r=M6(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(r),r.forEach(n=>{i.has(n)?i.delete(n):this.comp.toggleCss(n,!0)}),i.forEach(n=>this.comp.toggleCss(n,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t;this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!(e!=null&&e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!!(e!=null&&e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const r=this.column.getActualWidth();this.comp.setWidth(`${r}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{var r;(r=this.comp)==null||r.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const r=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",r),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,r=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",r)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){var y;const{eGui:e,column:t,comp:r,beans:i}=this,n=lP(this.beans),s=n.reduce((_,P)=>_+=P,0)===0;if(r.toggleCss("ag-header-parent-hidden",s),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),r.toggleCss("ag-header-span-height",!1),r.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:a,isSpanningTotal:o}=this.column.getColumnGroupPaddingInfo();r.toggleCss("ag-header-span-height",a>0);const u=cP(i);if(a===0){r.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${u}px`);return}r.toggleCss("ag-header-span-total",o);const d=(((y=this.column.getFirstRealParent())==null?void 0:y.getLevel())??-1)+1,p=n.length-d;let v=0;for(let _=0;_<p;_++)v+=n[n.length-1-_];e.style.setProperty("top",`${-v}px`),e.style.setProperty("height",`${u+v}px`)}refreshAriaSort(){var e;if(this.sortable){const t=this.getLocaleTextFunc(),r=((e=this.beans.sortSvc)==null?void 0:e.getDisplaySortForColumn(this.column))||null;this.comp.setAriaSort(Hre(r)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!zo(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){var t;if(!this.eGui.contains(Yi(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((r,i)=>r==="filter"?-1:i.charCodeAt(0)-r.charCodeAt(0)).map(r=>this.ariaDescriptionProperties.get(r)).join(". ");(t=this.beans.ariaAnnounce)==null||t.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){var t;(t=this.beans.colHover)==null||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),r=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},i=n=>this.handleContextMenuMouseEvent(n,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:r,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return jD(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function jD(e){return typeof(e==null?void 0:e.getAnchorElementForMenu)=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var Eae=0,_S=class extends ft{constructor(e,t,r){super(),this.rowIndex=e,this.pinned=t,this.type=r,this.instanceId=Eae++,this.comp=null,this.allCtrls=[];let i="ag-header-row-column";r==="group"?i="ag-header-row-group":r==="filter"&&(i="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${i}`}setRowIndex(e){var t;this.rowIndex=e,(t=this.comp)==null||t.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=cs(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,r=!0){this.comp=e,t=Rv(this,this.beans.context,t),r&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),r=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:r,virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",r),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=cs(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=lP(this.beans);for(let n=0;n<t.length;n++){if(n===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[n]};e+=t[n]}const r=cP(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:r};e+=r;const i=A6(this.beans);return{topOffset:e,rowHeight:i}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),r=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,r,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,this.ctrlsById,e);const r=i=>{const{focusSvc:n,visibleCols:s}=this.beans;return n.isHeaderWrapperFocused(i)?s.isVisible(i.column):!1};if(e)for(const[i,n]of e)r(n)?this.ctrlsById.set(i,n):this.destroyBean(n);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,r){if(e.isEmptyGroup())return;const i=e.getUniqueId();let n;if(r&&(n=r.get(i),r.delete(i)),n&&n.column!=e&&(this.destroyBean(n),n=void 0),n==null)switch(this.type){case"filter":{n=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":n=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:n=this.createBean(new Sae(e,this));break}t.set(i,n)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];return["left",null,"right"].forEach(t=>{e.push(...this.getComponentsToRender(t))}),e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const r=this.allCtrls.find(n=>n.column==e);return r?r.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},Rae=class extends ft{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:r,ctrlsSvc:i,colModel:n,colMoves:s}=this.beans;this.setupCenterWidth(),r==null||r.setupHeaderPinnedWidth(this),this.setupDragAndDrop(s,this.eViewport);const a=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:a,advancedFilterEnabledChanged:a});const o=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;i.register(o,this),n.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:r,visibleCols:i}=this.beans;let n=0;const s=t.getFocusHeaderToUseAfterRefresh(),a=()=>{const v=i.headerGroupRowCount;n=v;const y=this.groupsRowCtrls.length;if(y!==v){if(y>v){for(let _=v;_<y;_++)this.destroyBean(this.groupsRowCtrls[_]);this.groupsRowCtrls.length=v;return}for(let _=y;_<v;_++){const P=this.createBean(new _S(_,this.pinned,"group"));this.groupsRowCtrls.push(P)}}},o=()=>{const v=n++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new _S(v,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==v&&this.columnsRowCtrl.setRowIndex(v)},u=()=>{this.includeFloatingFilter=!!(r!=null&&r.hasFloatingFilters())&&!this.hidden;const v=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){v();return}e||v();const y=n++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==y&&this.filtersRowCtrl.setRowIndex(y):this.filtersRowCtrl=this.createBean(new _S(y,this.pinned,"filter"))},d=this.getAllCtrls();a(),o(),u();const p=this.getAllCtrls();this.comp.setCtrls(p),this.restoreFocusOnHeader(t,s),d.length!==p.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=r=>r==null?void 0:r.getHeaderCellCtrls().find(i=>i.column===e);if(zu(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let r=0;r<this.groupsRowCtrls.length;r++){const i=t(this.groupsRowCtrls[r]);if(i)return i}}getHtmlElementForColumnHeader(e){var t;return((t=this.getHeaderCtrlForColumn(e))==null?void 0:t.eGui)??null}getRowType(e){var t;return(t=this.getAllCtrls()[e])==null?void 0:t.type}focusHeader(e,t,r){const n=this.getAllCtrls()[e];return n?n.focusHeader(t,r):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const r=e==null?void 0:e.createBodyDropTarget(this.pinned,t);r&&this.createManagedBean(r)}restoreFocusOnHeader(e,t){if(!t)return;const{column:r}=t;r.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new oP(e=>this.comp.setCenterWidth(`${e}px`),!0))}},Tae=class extends ft{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(qD(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,r){var i;(i=this.activeMenuFactory)==null||i.showMenuAfterContextMenuEvent(e,t,r)}hidePopupMenu(){var e,t;(e=this.beans.contextMenuSvc)==null||e.hideActiveMenu(),(t=this.activeMenuFactory)==null||t.hideActiveMenu()}hideFilterMenu(){var e;(e=qD(this.beans))==null||e.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){var r;const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!((r=this.activeMenuFactory)!=null&&r.isMenuEnabled(e))&&(zo(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&zu(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Vh()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!zo(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))&&!zo(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return zo(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,r,i){const{positionBy:n,onClosedCallback:s}=t,a=t.column;if(n==="button"){const{buttonElement:o}=t;e==null||e.showMenuAfterButtonClick(a,o,r,s,i)}else if(n==="mouse"){const{mouseEvent:o}=t;e==null||e.showMenuAfterMouseEvent(a,o,r,s,i)}else if(a){const o=this.beans,u=o.ctrlsSvc;u.getScrollFeature().ensureColumnVisible(a,"auto"),Fc(o,()=>{var p;const d=(p=u.getHeaderRowContainerCtrl(a.getPinned()))==null?void 0:p.getHeaderCtrlForColumn(a);d&&(e==null||e.showMenuAfterButtonClick(a,d.getAnchorElementForMenu(i),r,s,i))})}}};function $D(e,t,r){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",r))}function qD(e){const{enterpriseMenuFactory:t,filterMenuFactory:r,gos:i}=e;return t&&zo(i)?t:r}var j1=class extends KT{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},k6=class extends Qi{constructor(){super()}},Pae={tag:"span",cls:"ag-overlay-loading-center"},Mae=class extends k6{init(){var t;const e=pc((t=this.gos.get("overlayLoadingTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??Pae),!e){const i=this.getLocaleTextFunc()("loadingOoo","Loading...");this.getGui().textContent=i,this.beans.ariaAnnounce.announceValue(i,"overlay")}}},Fae={tag:"span",cls:"ag-overlay-no-rows-center"},Aae=class extends k6{init(){var t;const e=pc((t=this.gos.get("overlayNoRowsTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??Fae),!e){const i=this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=i,this.beans.ariaAnnounce.announceValue(i,"overlay")}}};function Iae(e,t,r){const i=pa(e,t,r);if(i){const{className:s}=i;if(typeof s=="string"&&s.indexOf("ag-icon")>-1||typeof s=="object"&&s["ag-icon"])return i}const n=eo({tag:"span"});return n.appendChild(i),n}function pa(e,t,r){var s;let i=null;e==="smallDown"?St(262):e==="smallLeft"?St(263):e==="smallRight"&&St(264);const n=r&&r.getColDef().icons;if(n&&(i=n[e]),t.gos&&!i){const a=t.gos.get("icons");a&&(i=a[e])}if(i){let a;if(typeof i=="function")a=i();else if(typeof i=="string")a=i;else{St(38,{iconName:e});return}if(typeof a=="string")return zT(a);if(HT(a))return a;St(133,{iconName:e});return}else{const a=t.registry.getIcon(e);return a||(s=t.validation)==null||s.validateIcon(e),eo({tag:"span",cls:`ag-icon ag-icon-${a??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var Dae=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",kae={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},Lae=class extends Qi{constructor(){super(),this.dragSource=null,this.eIcon=fr,this.eLabel=fr,this.eGhost=fr,this.registerCSS(Dae)}postConstruct(){const e=t=>Iae(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(kae),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:r,eIcon:i,dragSource:n,dropIconMap:s,gos:a}=this;bo(i);let o=null;e||(e=n!=null&&n.getDefaultIconName?n.getDefaultIconName():"notAllowed"),o=s[e],r.classList.toggle("ag-dnd-ghost-not-allowed",e==="notAllowed"),i.classList.toggle("ag-shake-left-to-right",t),!(o===s.hide&&a.get("suppressDragLeaveHidesColumns"))&&o&&i.appendChild(o)}setLabel(e){this.eLabel.textContent=e}},Oae=".ag-checkbox-cell{height:100%}",Nae={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},Bae=class extends Qi{constructor(){super(Nae,[YT]),this.eCheckbox=fr,this.registerCSS(Oae)}init(e){this.refresh(e);const{eCheckbox:t,beans:r}=this,i=t.getInputElement();i.setAttribute("tabindex","-1"),iB(i,"polite"),this.addManagedListeners(i,{click:n=>{if(ld(n),t.isDisabled())return;const s=t.getValue();this.onCheckboxChanged(s)},dblclick:n=>{ld(n)}}),this.addManagedElementListeners(e.eGridCell,{keydown:n=>{if(n.key===st.SPACE&&!t.isDisabled()){e.eGridCell===Yi(r)&&t.toggle();const s=t.getValue();this.onCheckboxChanged(s),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,r=!0;const{value:i,column:n,node:s}=e;if(s.group&&n)if(typeof i=="boolean")t=i;else{const v=n.getColId();v.startsWith(G1)?t=i==null||i===""?void 0:i==="true":s.aggData&&s.aggData[v]!==void 0||s.sourceRowIndex>=0?t=i??void 0:r=!1}else t=i??void 0;const{eCheckbox:a}=this;if(!r){a.setDisplayed(!1);return}a.setValue(t);const o=e.disabled??!(n!=null&&n.isCellEditable(s));a.setDisabled(o);const u=this.getLocaleTextFunc(),d=z1(u,t),p=o?d:`${u("ariaToggleCellValue","Press SPACE to toggle cell value")} (${d})`;a.setInputAriaLabel(p)}onCheckboxChanged(e){var a,o,u,d;const{params:t}=this,{column:r,node:i,value:n}=t;(o=(a=this.beans)==null?void 0:a.editSvc)==null||o.setEditingCells([{column:r,colId:r.getColId(),rowIndex:i.rowIndex,rowPinned:i.rowPinned,state:"changed",oldValue:n,newValue:n}],{update:!0,forceRefreshOfEditCellsOnly:!0});const s=i.setDataValue(r,e,"renderer");(d=this.beans.editSvc)==null||d.stopEditing({rowNode:i,column:r},{source:(u=this.beans.editSvc)!=null&&u.isBatchEditing()?"ui":"api"}),s||this.updateCheckbox(t)}},KD=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:r,order:i}=this;t.has(e)||(t.add(e),r.add(e),i.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),xa(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:r,queued:i}=this;e.clear(),i.clear(),t.clear(),r.length=0}sort(){const{sortSvc:e,rowNodeSorter:t,gos:r}=this.beans,i=(e==null?void 0:e.getSortOptions())??[],n=Vae(this.order);if(this.order.sort((a,o)=>{var u,d;return(((u=a.pinnedSibling)==null?void 0:u.rowIndex)??0)-(((d=o.pinnedSibling)==null?void 0:d.rowIndex)??0)}),this.order=(t==null?void 0:t.doFullSort(this.order,i))??this.order,!n)return;const s=PB(r);s==="bottom"||s==="pinnedBottom"?this.order.push(n):this.order.unshift(n)}hide(e){const{all:t,visible:r}=this;t.forEach(i=>e(i)?r.delete(i):r.add(i)),this.order=Array.from(r),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function L6(e){var r;if(e.level===-1)return!0;const t=e.parent;return(r=t==null?void 0:t.childrenAfterSort)!=null&&r.some(i=>i==e)?L6(t):!1}function bS(e,t){const{gos:r,rowModel:i,filterManager:n}=e;return _d(r)?!i.getRowNode(t.id):n!=null&&n.isAnyFilterPresent()?!L6(t):r.get("pivotMode")?!t.group:!1}function zae(e){return!!e.footer&&e.level===-1}function Gae(e){return!!e.pinnedSibling&&zae(e.pinnedSibling)}function Vae(e){var r;const t=e.findIndex(Gae);if(t>-1)return(r=e.splice(t,1))==null?void 0:r[0]}var ZD=class extends ft{postConstruct(){const{gos:e,beans:t}=this;this.top=new KD(t,"top"),this.bottom=new KD(t,"bottom");const r=n=>bS(t,n.pinnedSibling),i=()=>{const n=e.get("isRowPinned");n&&e.get("enableRowPinning")&&t.rowModel.forEachNode(s=>this.pinRow(s,n(s)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:n})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(a=>a.hide(r));const s=this.refreshRowPositions();(!n||s)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(Uae),this.refreshRowPositions()},rowNodeDataChanged:({node:n})=>{const s=e.get("isRowPinnable");((s==null?void 0:s(n))??!0)||this.pinRow(n,null)},firstDataRendered:i}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(n=>n.hide(r)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:n})=>{this._grandTotalPinned=n==="pinnedBottom"?"bottom":n==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",i)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{const r=[];t.forEach(i=>r.push(i)),r.forEach(i=>this.pinRow(i,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,r){var a;if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,jae(this.beans);return}const i=e.rowPinned??((a=e.pinnedSibling)==null?void 0:a.rowPinned);if(i!=null&&t!=null&&t!=i){const o=e.rowPinned?e:e.pinnedSibling,u=e.rowPinned?e.pinnedSibling:e;this.pinRow(o,null,r),this.pinRow(u,t,r);return}const s=r&&Wae(this.beans,e,r);if(s){s.forEach(o=>this.pinRow(o,t));return}if(t==null){const o=e.rowPinned?e:e.pinnedSibling,u=this.findPinnedRowNode(o);if(!u)return;u.delete(o);const d=o.pinnedSibling;SS(o),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(d)}else{const o=XD(this.beans,e,t),u=this.getContainer(t);u.add(o),bS(this.beans,e)&&u.hide(d=>bS(this.beans,d.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const r=i=>{if(i.rowHeightEstimated){const n=Nu(this.beans,i);i.setRowTop(t),i.setRowHeight(n.height),t+=n.height,e=!0}};return this.bottom.forEach(r),t=0,this.top.forEach(r),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return YD(this.top)}getPinnedBottomTotalHeight(){return YD(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=t=>{const r=[];return this.forEachPinnedRow(t,i=>r.push(i.pinnedSibling.id)),r};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,r)=>{for(const i of e[r]){const n=this.beans.rowModel.getRowNode(i);n?this.pinRow(n,r):t.queue(i)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const r=new Set;e.forEachQueued(i=>{const n=this.beans.rowModel.getRowNode(i);n&&r.add(n)});for(const i of r)e.unqueue(i.id),this.pinRow(i,t)})}pinGrandTotalRow(){var o;const{gos:e,beans:t,_grandTotalPinned:r}=this,i=t.rowModel;if(!In(e))return;const n=(o=i.rootNode)==null?void 0:o.sibling;if(!n)return;const s=n.pinnedSibling,a=s&&this.findPinnedRowNode(s);if(r){if(a&&a.floating!==r&&(a.delete(s),SS(s)),!a||a.floating!==r){const u=XD(t,n,r);this.getContainer(r).add(u)}}else{if(!a)return;a.delete(s),SS(s)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(r=>r.setRowHeight(r.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){const t=i=>Hae(this.beans,i);if(e)return t(this.getContainer(e));let r=!1;return this.forContainers(i=>{const n=t(i);r||(r=n)}),r}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e==null||e.dispatchRowEvent("rowPinned")}};function Hae(e,t){let r=0,i=!1;return t.forEach((n,s)=>{if(i||(i=n.rowTop!==r),n.setRowTop(r),n.rowHeightEstimated||n.rowHeight==null){const a=Nu(e,n).height;i||(i=n.rowHeight!==a),n.setRowHeight(a)}n.setRowIndex(s),r+=n.rowHeight}),i}function XD(e,t,r){if(t.pinnedSibling)return t.pinnedSibling;const i=poe(t,e);i.setRowTop(null),i.setRowIndex(null),i.rowPinned=r;const n=r==="top"?rP:iP;return i.id=`${n}${r}-${t.id}`,i.pinnedSibling=t,t.pinnedSibling=i,i}function SS(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function Uae(e){const t=new Set;e.forEach(r=>{r.group&&t.add(r)}),t.forEach(r=>e.delete(r))}function Wae(e,t,r){var s;const{rowSpanSvc:i}=e,n=(r&&(i==null?void 0:i.isCellSpanning(r,t)))??!1;if(r&&n)return(s=i==null?void 0:i.getCellSpan(r,t))==null?void 0:s.spannedNodes}function YD(e){const t=e.size();if(t===0)return 0;const r=e.getByIndex(t-1);return r===void 0?0:r.rowTop+r.rowHeight}function jae({gos:e,rowModel:t}){In(e)&&t.refreshModel({step:"map"})}var QD=class extends ft{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const t=r=>{r.setRowHeight(r.rowHeight,!0)};bm(this.pinnedBottomRows,t),bm(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0;const r=i=>{if(i.rowHeightEstimated){const n=Nu(this.beans,i);i.setRowTop(t),i.setRowHeight(n.height),t+=n.height,e=!0}};return bm(this.pinnedBottomRows,r),t=0,bm(this.pinnedTopRows,r),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const r=this.getCache(t);if(e===void 0){r.order.length=0,r.cache={};return}const i=Np(this.gos),n=t==="top"?rP:iP,s=new Set(r.order),a=[],o=new Set;let u=0,d=-1;for(const p of e){const v=(i==null?void 0:i({data:p,level:0,rowPinned:t}))??n+this.nextId++;if(o.has(v)){St(96,{id:v,data:p});continue}d++,o.add(v),a.push(v);const y=o0(r,v);if(y!==void 0)y.data!==p&&y.updateData(p),u+=this.setRowTopAndRowIndex(y,u,d),s.delete(v);else{const _=new ad(this.beans);_.id=v,_.data=p,_.rowPinned=t,u+=this.setRowTopAndRowIndex(_,u,d),r.cache[v]=_,r.order.push(v)}}s.forEach(p=>{var v;(v=o0(r,p))==null||v.clearRowTopAndRowIndex(),delete r.cache[p]}),r.order=a}setRowTopAndRowIndex(e,t,r){return e.setRowTop(t),e.setRowHeight(Nu(this.beans,e).height),e.setRowIndex(r),e.rowHeight}getPinnedTopTotalHeight(){return JD(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return JD(this.pinnedBottomRows)}getPinnedTopRowCount(){return E2(this.pinnedTopRows)}getPinnedBottomRowCount(){return E2(this.pinnedBottomRows)}getPinnedTopRow(e){return S2(this.pinnedTopRows,e)}getPinnedBottomRow(e){return S2(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return o0(this.getCache(t),e)}forEachPinnedRow(e,t){return bm(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function JD(e){const t=E2(e);if(t===0)return 0;const r=S2(e,t-1);return r===void 0?0:r.rowTop+r.rowHeight}function o0(e,t){return e.cache[t]}function S2(e,t){return o0(e,e.order[t])}function bm(e,t){e.order.forEach((r,i)=>{const n=o0(e,r);n&&t(n,i)})}function E2(e){return e.order.length}var $ae=class extends ft{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const r=e.get("enableRowPinning"),i=PB(e),s=!!r||(i==="pinnedBottom"||i==="pinnedTop"),a=s?this.inner instanceof QD:this.inner instanceof ZD;this.inner&&a&&this.destroyBean(this.inner),(a||!this.inner)&&(this.inner=this.createManagedBean(s?new ZD:new QD))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,r){return this.inner.pinRow(e,t,r)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}},qae="ROOT_NODE_ID",Kae=class extends ft{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}getRowNode(e){return this.allNodesMap[e]}extractRowData(){var e,t;return(t=(e=this.rootNode)==null?void 0:e.allLeafChildren)==null?void 0:t.map(r=>r.data)}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id=qae,e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){const t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){this.rootNode.allLeafChildren=(e==null?void 0:e.map((t,r)=>this.createRowNode(t,r)))??[]}setImmutableRowData(e,t){var P;const r=Np(this.gos),i=!this.gos.get("suppressMaintainUnsortedOrder"),n=e.changedRowNodes,s=new Set,a=this.rootNode,o=a.allLeafChildren,u=o.length;let d=!1,p=!1,v=!1,y=!1;for(let R=0,M=-1,F=t.length;R<F;R++){const k=t[R];let N=this.getRowNode(r({data:k,level:0}));if(!N)d=!0,N=this.createRowNode(k,-1),n.add(N);else{if(i){const G=N.sourceRowIndex;y||(y=G<=M||d),M=G}N.data!==k&&(v=!0,N.updateData(k),n.update(N))}s.add(N)}const _=[];for(let R=0;R<u;R++){const M=o[R];s.has(M)||(p=!0,M.isSelected()&&_.push(M),M.pinnedSibling&&((P=this.beans.pinnedRowModel)==null||P.pinRow(M.pinnedSibling,null)),this.rowNodeDeleted(M),n.remove(M))}if(d||p||y){const R=new Array(s.size);let M=0;if(!i)for(let k=0;k<u;++k){const N=o[k];s.delete(N)&&(N.sourceRowIndex=M,R[M++]=N)}for(const k of s)k.sourceRowIndex=M,R[M++]=k;a.allLeafChildren=R;const F=a.sibling;F&&(F.allLeafChildren=R),e.rowNodesOrderChanged||(e.rowNodesOrderChanged=y)}(d||p||y||v)&&(this.deselectNodes(_),e.rowDataUpdated=!0)}rowNodeDeleted(e){e.clearRowTopAndRowIndex();const t=e.id,r=this.allNodesMap;r[t]===e&&delete r[t]}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);const r={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[],n=Np(this.gos);return this.executeRemove(n,e,r,i),this.executeUpdate(n,e,r,i),this.executeAdd(e,r),this.deselectNodes(i),r}executeAdd(e,t){const r=e.add;if(!(r!=null&&r.length))return;let i=this.rootNode.allLeafChildren,n=i.length;if(typeof e.addIndex=="number"&&(n=this.sanitizeAddIndex(e.addIndex),n>0&&this.gos.get("treeData")&&this.gos.get("getDataPath")))for(let v=0;v<i.length;v++){const y=i[v];if((y==null?void 0:y.rowIndex)==n-1){n=v+1;break}}const s=r.length,a=t.changedRowNodes,o=new Array(s);for(let p=0;p<s;p++){const v=this.createRowNode(r[p],n+p);a.add(v),o[p]=v}const u=this.rootNode;if(n<i.length){const p=i.slice(0,n),v=i.slice(n,i.length),y=p.length+o.length;for(let _=0,P=v.length;_<P;++_)v[_].sourceRowIndex=y+_;i=[...p,...o,...v],t.rowsInserted=!0}else i=i.concat(o);u.allLeafChildren=i;const d=u.sibling;d&&(d.allLeafChildren=i),t.rowNodeTransaction.add=o}executeRemove(e,t,{changedRowNodes:r,rowNodeTransaction:i},n){var d,p;const{remove:s}=t;if(!(s!=null&&s.length))return;const a={};s.forEach(v=>{var _;const y=this.lookupRowNode(e,v);y&&(y.isSelected()&&n.push(y),y.pinnedSibling&&((_=this.beans.pinnedRowModel)==null||_.pinRow(y.pinnedSibling,null)),y.clearRowTopAndRowIndex(),a[y.id]=!0,delete this.allNodesMap[y.id],i.remove.push(y),r.remove(y))});const o=this.rootNode;o.allLeafChildren=((d=o.allLeafChildren)==null?void 0:d.filter(v=>!a[v.id]))??null,(p=o.allLeafChildren)==null||p.forEach((v,y)=>{v.sourceRowIndex=y});const u=o.sibling;u&&(u.allLeafChildren=o.allLeafChildren)}executeUpdate(e,t,{changedRowNodes:r,rowNodeTransaction:i},n){const{update:s}=t;s!=null&&s.length&&s.forEach(a=>{const o=this.lookupRowNode(e,a);o&&(o.updateData(a),!o.selectable&&o.isSelected()&&n.push(o),i.update.push(o),r.update(o))})}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}deselectNodes(e){var n;const t="rowDataChanged",r=this.beans.selectionSvc,i=e.length>0;i&&(r==null||r.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t})),(n=r==null?void 0:r.updateGroupsFromChildrenSelections)==null||n.call(r,t),i&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:(r==null?void 0:r.getSelectedNodes())??null,serverSideState:null})}sanitizeAddIndex(e){var r;const t=((r=this.rootNode.allLeafChildren)==null?void 0:r.length)??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}createRowNode(e,t){const r=new ad(this.beans);return r.parent=this.rootNode,r.level=0,r.group=!1,r.expanded=!1,r.sourceRowIndex=t,r.setDataAndId(e,String(this.nextId)),this.allNodesMap[r.id]&&St(2,{nodeId:r.id}),this.allNodesMap[r.id]=r,this.nextId++,r}lookupRowNode(e,t){var i,n;let r;if(e){const s=e({data:t,level:0});if(r=this.allNodesMap[s],!r)return ai(4,{id:s}),null}else if(r=(n=(i=this.rootNode)==null?void 0:i.allLeafChildren)==null?void 0:n.find(s=>s.data===t),!r)return ai(5,{data:t}),null;return r||null}};function Av(e){return!!(e.rowPinned&&e.pinnedSibling)}function oa(e,t,r,i){const n=t==="top";if(!r)return oa(e,t,n?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),i);if(!i){const u=n?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return oa(e,t,r,n?e.getPinnedTopRow(u-1):e.getPinnedBottomRow(u-1))}let s=!1,a=!1;const o=[];return e.forEachPinnedRow(t,u=>{if(u===r&&!s){s=!0,o.push(u);return}if(s&&u===i){a=!0,o.push(u);return}s&&!a&&o.push(u)}),o}var Zae={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},Xae=class extends Qi{constructor(){super(Zae,[YT]),this.eCheckbox=fr}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:r}=this,i=t.isSelected(),n=z1(e,i),[s,a]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],o=e(s,a);r.setValue(i,!0),r.setInputAriaLabel(`${o} (${n})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:ld,click:i=>{var n;ld(i),(n=this.beans.selectionSvc)==null||n.handleSelectionEvent(i,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:n})=>{const s=typeof i=="object"?lS(i):void 0,a=typeof n=="object"?lS(n):void 0;s!==a&&this.onSelectableChanged()}),h2(this.gos)||typeof this.getIsVisible()=="function"){const i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:r,gos:i}=this,n=t.selectable,s=this.getIsVisible();let a;if(typeof s=="function"){const v=r==null?void 0:r.callbackParams;if(!e)a=s({...v,node:t,data:t.data});else{const y=e.createColumnFunctionCallbackParams(t);a=s({...v,...y})}}else a=s??!1;const o=n&&!a||!n&&a,u=n||a,d=i.get("rowSelection"),p=d&&typeof d!="string"?!lS(d):!!(e!=null&&e.getColDef().showDisabledCheckboxes);if(this.setVisible(u&&(o?p:!0)),this.setDisplayed(u&&(o?p:!0)),u&&this.eCheckbox.setDisabled(o),r!=null&&r.removeHidden){this.setDisplayed(u);return}}getIsVisible(){var r,i;const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&typeof t!="string"?fp(t):(i=(r=this.column)==null?void 0:r.getColDef())==null?void 0:i.checkboxSelection}},Yae=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:r,pinnedRowModel:i}=this;return t??(t=r.getRowNode(e)),i!=null&&i.isManual()&&(t??(t=i.getPinnedRowById(e,"top")),t??(t=i.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const r=t[0].id===this.rootId,i=t.findIndex(n=>n.id===e.id);if(i>-1){const n=t.slice(0,i),s=t.slice(i+1);return this.setEndRange(e),r?{keep:n,discard:s}:{keep:s,discard:n}}else return{keep:t,discard:[]}}extend(e,t=!1){const r=this.getRoot();if(r==null){const n=this.getRange().slice();return t&&e.depthFirstSearch(s=>!s.group&&n.push(s)),n.push(e),this.setRoot(e),{keep:n,discard:[]}}const i=this.getNodesInRange(r,e);if(!i)return this.setRoot(e),{keep:[e],discard:[]};if(i.find(n=>n.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const n=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:n}}}getNodesInRange(e,t){const{pinnedRowModel:r,rowModel:i}=this;if(!(r!=null&&r.isManual()))return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return oa(r,"top",e,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){const n=oa(r,"bottom",void 0,e),s=i.getRowCount(),a=i.getRow(s-1);return(i.getNodesInRangeForSelection(t,a)??[]).concat(n)}if(!e.rowPinned&&!t.rowPinned)return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return oa(r,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){const n=oa(r,"top",t,void 0),s=oa(r,"bottom",void 0,e),a=i.getRow(0),o=i.getRow(i.getRowCount()-1);return n.concat(i.getNodesInRangeForSelection(a,o)??[]).concat(s)}if(!e.rowPinned&&t.rowPinned==="top")return oa(r,"top",t,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){const n=oa(r,"top",e,void 0),s=oa(r,"bottom",void 0,t),a=i.getRow(0),o=i.getRow(i.getRowCount()-1);return n.concat(i.getNodesInRangeForSelection(a,o)??[]).concat(s)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return oa(r,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){const n=oa(r,"bottom",void 0,t),s=i.getRow(i.getRowCount());return(i.getNodesInRangeForSelection(e,s)??[]).concat(n)}return null}},Qae=class extends ft{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Yi(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new XT);this.cbSelectAll=t,t.addCss("ag-header-select-all"),id(t.getGui(),"presentation"),this.showOrHideSelectAll();const r=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:r,paginationChanged:r,modelUpdated:r}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:n})=>{const s=a=>typeof a=="string"||!a||a.mode==="singleRow"?void 0:a.selectAll;s(i)!==s(n)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,r=this.cbSelectAll,i=t.getSelectAllState(e);r.setValue(i);const n=t.hasNodesToSelect(e);r.setDisabled(!n),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:r,cbSelectAll:i,cbSelectAllVisible:n}=this,s=i.getValue(),a=z1(t,s),o=t("ariaRowSelectAll","Press Space to toggle all rows selection");r.setAriaDescriptionProperty("selectAll",n?`${o} (${a})`:null),i.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||r.announceAriaDescription()}checkSelectionType(e){return TC(this.gos)?!0:(St(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:r}=this.beans;return In(t)||_d(t)?!0:(St(129,{feature:e,rowModel:r.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let r="uiSelectAll";t==="currentPage"?r="uiSelectAllCurrentPage":t==="filtered"&&(r="uiSelectAllFiltered");const i={source:r,selectAll:t},n=this.beans.selectionSvc;e?n.selectAllRowNodes(i):n.deselectAllRowNodes(i)}isCheckboxSelection(){const{column:e,gos:t,beans:r}=this,s=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return O6(r,e)&&this.checkRightRowModelType(s)&&this.checkSelectionType(s)}getSelectAllMode(){const e=IB(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:r}=this.column.getColDef();return t?"currentPage":r?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function O6({gos:e,selectionColSvc:t},r){const i=e.get("rowSelection"),n=r.getColDef(),{headerCheckboxSelection:s}=n;let a=!1;if(typeof i=="object"){const u=Ku(r),d=$T(r);(EC(i)==="autoGroupColumn"&&d||u&&(t!=null&&t.isSelectionColumnEnabled()))&&(a=cx(i))}else typeof s=="function"?a=s(Cr(e,{column:r,colDef:n})):a=!!s;return a}var Jae=class extends ft{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new Yae(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const r=h2(e);r!==this.isRowSelectable&&(this.isRowSelectable=r,this.updateSelectable())}),this.isRowSelectable=h2(e),this.addManagedEventListeners({cellValueChanged:r=>this.updateRowSelectable(r.node),rowNodeDataChanged:r=>this.updateRowSelectable(r.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new Xae}createSelectAllFeature(e){if(O6(this.beans,e))return new Qae(e)}isMultiSelect(){return TC(this.gos)}onRowCtrlSelected(e,t,r){const i=!!e.rowNode.isSelected();e.forEachGui(r,n=>{n.rowComp.toggleCss("ag-row-selected",i);const s=n.element;aB(s,i),s.contains(Yi(this.beans))&&t(n)})}announceAriaRowSelection(e){var n;if(this.isRowSelectionBlocked(e))return;const t=e.isSelected();if(!e.selectable)return;const i=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);(n=this.beans.ariaAnnounce)==null||n.announceValue(i,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!Av(e)||!zh(this.gos)}updateRowSelectable(e,t){var i;const r=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:((i=this.isRowSelectable)==null?void 0:i.call(this,e))??!0;return this.setRowSelectable(e,r,t),r}setRowSelectable(e,t,r){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),r)return;if(X0(this.gos)){const n=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:n??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){var i;let t=!1,r=!1;if(!((i=e.childrenAfterGroup)!=null&&i.length))return e.selectable?e.__selected:null;for(let n=0;n<e.childrenAfterGroup.length;n++){const s=e.childrenAfterGroup[n];let a=s.isSelected();if(!s.selectable){const o=this.calculateSelectedFromChildren(s);if(o===null)continue;a=o}switch(a){case!0:t=!0;break;case!1:r=!0;break;default:return}}if(!(t&&r))return t?!0:r?!1:e.selectable?e.__selected:null}selectRowNode(e,t,r,i="api"){const n=!e.selectable&&t,s=e.__selected===t;if(n||s)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const a=e.sibling;a&&a.footer&&a.__localEventService&&a.dispatchRowEvent("rowSelected");const o=e.pinnedSibling;return o&&o.rowPinned&&o.__localEventService&&o.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...doe(e,this.gos,"rowSelected"),event:r||null,source:i}),!0}isCellCheckboxSelection(e,t){const r=this.gos.get("rowSelection");if(r&&typeof r!="string"){const i=Ku(e)&&fp(r);return e.isColumnFunc(t,i)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,r,i){const{gos:n,selectionCtx:s}=this,a=e.isSelected(),o=X0(n),u=Nie(n),d=Bie(n),p=this.isMultiSelect(),v=i==="rowClicked";if(v&&!(u||d))return null;if(t&&r&&p){const y=s.getRoot();if(y)if(y.isSelected()){const _=s.isInRange(e)?s.truncate(e):s.extend(e,o);return{deselect:_.discard,select:_.keep,reset:!1}}else{const _=s.extend(e,o);return{select:[],deselect:_.keep,reset:!1}}else return null}else if(t&&p){const y=s.selectAll?this.beans.rowModel.getRow(0):void 0,_=s.getRoot(y),P=s.isInRange(e)?s.truncate(e):s.extend(e,o);return{select:P.keep,deselect:P.discard,reset:s.selectAll||!!(_&&!_.isSelected())}}else if(r){if(v){const y=!a;return y&&!u||!y&&!d?null:(s.setRoot(e),{node:e,newValue:y,clearSelection:!1})}return s.setRoot(e),{node:e,newValue:!a,clearSelection:!p}}else{s.setRoot(e);const y=zie(n),_=PC(n)==="filteredDescendants",P=v&&(!y||!u);if(_&&a===void 0&&In(n))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!p||P};if(v){const R=a?!y:u;return R===a&&!P||R&&!u||!R&&!d?null:{node:e,newValue:R,clearSelection:!p||P,keepDescendants:e.group&&o}}return{node:e,newValue:!a,clearSelection:!p||P}}}},vp={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},N6=class extends ft{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:r,eBottomGuard:i,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:s,isFocusableContainer:a,focusInnerElement:o,onFocusIn:u,onFocusOut:d,shouldStopEventPropagation:p,onTabKeyDown:v,handleKeyDown:y,isEmpty:_,eFocusableElement:P}=e;this.comp=t,this.eTopGuard=r,this.eBottomGuard=i,this.providedFocusInnerElement=o,this.eFocusableElement=P,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.isFocusableContainer=!!a,this.providedFocusIn=u,this.providedFocusOut=d,this.providedShouldStopEventPropagation=p,this.providedOnTabKeyDown=v,this.providedHandleKeyDown=y,this.providedIsEmpty=_}postConstruct(){this.createManagedBean(new ig(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():gp(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){var u;const t=ss(this.beans),r=gp(t.body,null,!0),i=r.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let n,s;e?(n=0,s=i):(n=i+1,s=r.length);const a=r.slice(n,s),o=this.gos.get("tabIndex");a.sort((d,p)=>{const v=parseInt(d.getAttribute("tabindex")||"0"),y=parseInt(p.getAttribute("tabindex")||"0");return y===o?1:v===o?-1:v===0?1:y===0?-1:v-y}),(u=a[e?a.length-1:0])==null||u.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const r=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),r&&(r.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=gp(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return Sd(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},ele=class extends ft{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:r,eFocusableElement:i}=this,n=[t,r],s={setTabIndex:M=>{n.forEach(F=>M!=null?F.setAttribute("tabindex",M):F.removeAttribute("tabindex"))}};this.addTabGuards(t,r);const{focusTrapActive:a=!1,onFocusIn:o,onFocusOut:u,focusInnerElement:d,handleKeyDown:p,onTabKeyDown:v,shouldStopEventPropagation:y,isEmpty:_,forceFocusOutWhenTabGuardsAreEmpty:P,isFocusableContainer:R}=e;this.tabGuardCtrl=this.createManagedBean(new N6({comp:s,focusTrapActive:a,eTopGuard:t,eBottomGuard:r,eFocusableElement:i,onFocusIn:o,onFocusOut:u,focusInnerElement:d,handleKeyDown:p,onTabKeyDown:v,shouldStopEventPropagation:y,isEmpty:_,forceFocusOutWhenTabGuardsAreEmpty:P,isFocusableContainer:R}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=ss(this.beans).createElement("div"),r=e==="top"?vp.TAB_GUARD_TOP:vp.TAB_GUARD_BOTTOM;return t.classList.add(vp.TAB_GUARD,r),id(t,"presentation"),t}addTabGuards(e,t){const r=this.eFocusableElement;r.insertAdjacentElement("afterbegin",e),r.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];bo(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,r){HT(t)||(t=t.getGui());const{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,r)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;Ou(e),Ou(t),super.destroy()}},tle=class extends Qi{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new ele(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,r){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,r)}},bh=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new rd,this.preventMouseClick=t;const r=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);e.addEventListener("touchstart",r,{passive:!0}),e.addEventListener("touchmove",i,{passive:!0}),e.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{e.removeEventListener("touchstart",r,{passive:!0}),e.removeEventListener("touchmove",i,{passive:!0}),e.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const r=this.touchStart===t;if(this.touching&&r&&!this.moved){this.moved=!0;const i={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!gB(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=Date.now();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const r={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(r),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}},rle=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const r=t||this.shouldSkipVerticalScroll();if(r&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<i.left+n,this.tickRight=e.clientX>i.right-n,this.tickUp=e.clientY<i.top+n&&!r,this.tickDown=e.clientY>i.bottom-n&&!r,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},B6=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${xB}/${this.frameworkName}-data-grid`,Rie(this.baseDocLink)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`${this.baseDocLink}${e?`/${e}`:""}`}};function ile(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var nle=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],ek=Object.fromEntries(nle.map((e,t)=>[e,t]));function sle(e,t){const r=(e.beanName?ek[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?ek[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return r-i}function ole(e,t){return(e==null?void 0:e.beanName)==="gridDestroySvc"?-1:(t==null?void 0:t.beanName)==="gridDestroySvc"?1:0}var ale=class extends ft{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,r){this.view=e,this.eGridHostDiv=t,this.eGui=r,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:i,ctrlsSvc:n}=this.beans;i==null||i.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new sP(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const s=Mc(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>s()),n.register("gridCtrl",this)}isDetailGrid(){var t;const e=i6(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,r,i,n,s;const e=this.beans;return{paginationSelector:(t=e.pagination)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:(r=e.registry)==null?void 0:r.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:(i=e.sideBar)==null?void 0:i.getSelector(),statusBarSelector:(n=e.registry)==null?void 0:n.getSelector("AG-STATUS-BAR"),watermarkSelector:(s=e.licenseManager)==null?void 0:s.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(e===!1)t.setCursor(null);else{const r=e===1?"ew-resize":"ns-resize";t.setCursor(r)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:r,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(r>0){const{visibleCols:n,focusSvc:s}=this.beans,a=n.allCols,o=si(a);if(s.focusGridView({column:o,backwards:!0}))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const r=this.getFocusableContainers(),{focusSvc:i,visibleCols:n}=this.beans,s=n.allCols;if(e){if(r.length>1)return this.focusContainer(si(r),e);const a=si(s);if(i.focusGridView({column:a,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||Hh(this.beans)){if(i.focusGridView({column:s[0],backwards:e}))return!0;for(let a=1;a<r.length;a++)if(od(r[a].getGui(),e))return!0;return!1}return i.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var s;const t=this.view.getFocusableContainers(),{nextIndex:r,indexWithFocus:i}=this.getNextFocusableIndex(t,e);if(i===-1||r<0||r>=t.length)return;const n=t[r];(s=n.setAllowFocus)==null||s.call(n,!0),setTimeout(()=>{var a;(a=n.setAllowFocus)==null||a.call(n,!1)})}isFocusable(){var t,r;const e=this.beans;return!W1(e)||!Hh(e)||!!((r=(t=e.sideBar)==null?void 0:t.comp)!=null&&r.isDisplayed())}getNextFocusableIndex(e,t){const r=Yi(this.beans),i=e.findIndex(s=>s.getGui().contains(r)),n=i+(t?-1:1);return{indexWithFocus:i,nextIndex:n}}focusContainer(e,t){var i,n;(i=e.setAllowFocus)==null||i.call(e,!0);const r=od(e.getGui(),t,!1,!0);return(n=e.setAllowFocus)==null||n.call(e,!1),r}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},_r=(e,t)=>{for(const r of Object.keys(t))t[r]=e;return t},tk={dispatchEvent:"CommunityCore",..._r("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),..._r("GridState",{getState:0,setState:0}),..._r("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),..._r("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),..._r("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),..._r("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),..._r("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),..._r("ValueCache",{expireValueCache:0}),..._r("CellApi",{getCellValue:0}),..._r("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),..._r("Sort",{onSortChanged:0}),..._r("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),..._r("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),..._r("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),..._r("HighlightChanges",{flashCells:0}),..._r("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),..._r("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),..._r("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),..._r("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),..._r("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),..._r("ColumnResize",{setColumnWidths:0}),..._r("ColumnHover",{isColumnHovered:0}),..._r("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),..._r("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),..._r("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),..._r("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),..._r("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),..._r("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),..._r("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),..._r("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),..._r("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),..._r("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),..._r("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),..._r("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),..._r("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),..._r("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),..._r("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),..._r("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),..._r("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),..._r("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),..._r("ContextMenu",{showContextMenu:0}),..._r("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),..._r("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),..._r("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),..._r("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),..._r("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),..._r("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),..._r("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),..._r("StatusBar",{getStatusPanel:0})},ES={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},lle=(e,t)=>e.eventSvc.dispatchEvent(t),z6=class{};Reflect.defineProperty(z6,"name",{value:"GridApi"});var cle=class extends ft{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new z6,this.fns={...ES,dispatchEvent:lle},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(tk))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var n;const{fns:r,beans:i}=this;r!==ES&&(r[e]=((n=i==null?void 0:i.validation)==null?void 0:n.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:r,fns:{[e]:i}}=this;return i?i(r,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:r,preDestroyLink:i}=this;if(!t)St(26,{fnName:e,preDestroyLink:i});else{const n=tk[e];r.assertModuleRegistered(n,`api.${e}`)&&St(27,{fnName:e,module:n})}}destroy(){super.destroy(),this.fns=ES,this.beans=null}};function ule(e){return e.context.getId()}function hle(e){e.gridDestroySvc.destroy()}function dle(e){return e.gridDestroySvc.destroyCalled}function fle(e,t){return e.gos.get(t)}function ple(e,t,r){G6(e,{[t]:r})}function G6(e,t){e.gos.updateGridOptions({options:t})}function gle(e,t){const r=t.replace(/Module$/,"");return e.gos.isModuleRegistered(r)}var mle={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},vle=class extends Qi{constructor(e,t,r){super(mle),this.rowNode=e,this.column=t,this.eCell=r}postConstruct(){this.getGui().appendChild(pa("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:r,eCell:i,gos:n}=this,s=r.getColDef().dndSourceOnRowDrag,a=e.dataTransfer;if(a.setDragImage(i,0,0),s){const o=Cr(n,{rowNode:t,dragEvent:e});s(o)}else try{const o=JSON.stringify(t.data);a.setData("application/json",o),a.setData("text/plain",o)}catch{}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function yle(e,t){var r,i;(i=(r=e.rowDragSvc)==null?void 0:r.rowDragFeature)==null||i.addRowDropZone(t)}function wle(e,t){var i,n;const r=(i=e.dragAndDrop)==null?void 0:i.findExternalZone(t.getContainer());r&&((n=e.dragAndDrop)==null||n.removeDropTarget(r))}function xle(e,t){var r,i;return(i=(r=e.rowDragSvc)==null?void 0:r.rowDragFeature)==null?void 0:i.getRowDropZone(t)}function Cle(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function _le(e,t){const r=e.rowDropHighlightSvc;if(!r)return;const i=t==null?void 0:t.row;let n=t==null?void 0:t.dropIndicatorPosition;n!=="above"&&n!=="below"&&n!=="inside"&&(n="none");const s=i==null?void 0:i.rowIndex;s==null||n==="none"?r.clear():r.set(i,n)}var ble=class extends loe{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},Sle=class extends ft{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:r}=this.beans;return r.addDragSource(t),()=>r.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const r=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(r)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},Ele={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},Rle=class extends Qi{constructor(e,t,r,i,n,s=!1){super(),this.cellValueFn=e,this.rowNode=t,this.column=r,this.customGui=i,this.dragStartPixels=n,this.alwaysVisible=s,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(Ele),this.getGui().appendChild(pa("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){const{beans:e,gos:t,rowNode:r}=this,i=this.refreshVisibility.bind(this);this.addManagedPropertyListener("suppressRowDrag",i),this.addManagedListeners(r,{dataChanged:i,cellChanged:i}),this.addManagedListeners(e.eventSvc,t.get("rowDragManaged")?{sortChanged:i,filterChanged:i,columnRowGroupChanged:i,newColumnsLoaded:i}:{newColumnsLoaded:i})}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;const e={skipAriaHidden:!0};if(this.isNeverDisplayed()){this.setDisplayed(!1,e);return}const t=this.column;let r=typeof(t==null?void 0:t.getColDef().rowDrag)=="function",i=!t||this.isCustomGui()||t.isRowDrag(this.rowNode);i&&this.rowNode.footer&&this.gos.get("rowDragManaged")&&(i=!1,r=!0),this.setDisplayed(r||i,e),this.setVisible(i,e)}isNeverDisplayed(){var r,i;const{gos:e,beans:t}=this;return!!(e.get("suppressRowDrag")||e.get("rowDragManaged")&&((r=t.rowDragSvc.rowDragFeature)!=null&&r.shouldPreventRowMove())&&!((i=t.dragAndDrop)!=null&&i.hasExternalDropZones()))}getSelectedNodes(){var i;const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const r=((i=this.beans.selectionSvc)==null?void 0:i.getSelectedNodes())??[];return r.indexOf(e)!==-1?r:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i==null||i.preventDefault()}})[0]);const r=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:i=>{var o,u;const n=(i==null?void 0:i.dragItem)||this.getDragItem(),s=(((o=i==null?void 0:i.dropTarget)==null?void 0:o.rows.length)??((u=n.rowNodes)==null?void 0:u.length))||1,a=this.getRowDragText(this.column);return a?a(n,s):s===1?this.cellValueFn():`${s} ${r("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}};function Ac(e){const t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function $1(e){const t=e.rowModel;return t.getType()==="infinite"?t:void 0}function Tle(e){const t=e.rowModel;return t.getType()==="serverSide"?t:void 0}function Ple(e){const{rowIndex:t,rowPinned:r,column:i}=e;return`${t}.${r??"null"}.${i.getId()}`}function V6(e,t){const r=e.column===t.column,i=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return r&&i&&n}function Mle(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(Wt(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function Fle(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function Ale(e){let t=0,r;const{pinnedRowModel:i,rowModel:n,pageBounds:s}=e;return i!=null&&i.getPinnedTopRowCount()?r="top":n.getRowCount()?(r=null,t=s.getFirstRow()):i!=null&&i.getPinnedBottomRowCount()&&(r="bottom"),r===void 0?null:{rowIndex:t,rowPinned:r}}function Ile(e){let t,r=null;const{pinnedRowModel:i,pageBounds:n}=e,s=i==null?void 0:i.getPinnedBottomRowCount(),a=i==null?void 0:i.getPinnedTopRowCount();return s?(r="bottom",t=s-1):e.rowModel.getRowCount()?(r=null,t=n.getLastRow()):a&&(r="top",t=a-1),t===void 0?null:{rowIndex:t,rowPinned:r}}function Ec(e,t){var r,i;switch(t.rowPinned){case"top":return(r=e.pinnedRowModel)==null?void 0:r.getPinnedTopRow(t.rowIndex);case"bottom":return(i=e.pinnedRowModel)==null?void 0:i.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function jf(e,t){var n;const r=(n=e.spannedRowRenderer)==null?void 0:n.getCellByPosition(t);if(r)return r;const i=e.rowRenderer.getRowByPosition(t);return i?i.getCellCtrl(t.column):null}function Dle(e,t,r){const{rowModel:i,pinnedRowModel:n}=e;let s;return s??(s=i==null?void 0:i.getRowNode(t)),r?s??(s=n==null?void 0:n.getPinnedRowById(t,r)):(s??(s=n==null?void 0:n.getPinnedRowById(t,"top")),s??(s=n==null?void 0:n.getPinnedRowById(t,"bottom"))),s}function NC(e,t,r=!1){const{rowIndex:i,rowPinned:n}=t,{pageBounds:s,pinnedRowModel:a,rowModel:o}=e;if(i===0)return n==="top"?null:n==="bottom"&&o.isRowsToRender()?{rowIndex:s.getLastRow(),rowPinned:null}:a!=null&&a.isRowsToRender("top")?{rowIndex:a.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(r){const u=n?void 0:o.getRow(i);return H6(e,u,!0)??{rowIndex:i-1,rowPinned:n}}return{rowIndex:i-1,rowPinned:n}}function rk(e,t,r=!1){const{rowIndex:i,rowPinned:n}=t,{pageBounds:s,pinnedRowModel:a,rowModel:o}=e;if(kle(e,t))return n==="bottom"?null:n==="top"&&o.isRowsToRender()?{rowIndex:s.getFirstRow(),rowPinned:null}:a!=null&&a.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(r){const u=n?void 0:o.getRow(i);return H6(e,u)??{rowIndex:i+1,rowPinned:n}}return{rowIndex:i+1,rowPinned:n}}function H6(e,t,r=!1){const{gos:i,rowRenderer:n}=e;if(!(t!=null&&t.sticky)||!TB(i))return;const s=n.getStickyTopRowCtrls(),a=n.getStickyBottomRowCtrls(),o=!a.some(v=>v.rowNode.rowIndex===t.rowIndex),u=o?s:a,d=(r?-1:1)*(o?-1:1);let p;for(let v=0;v<u.length;v++)if(u[v].rowNode.rowIndex===t.rowIndex){p=u[v+d];break}return p?{rowIndex:p.rowNode.rowIndex,rowPinned:null}:void 0}function kle(e,t){const{rowPinned:r,rowIndex:i}=t,{pinnedRowModel:n,pageBounds:s}=e;return r==="top"?((n==null?void 0:n.getPinnedTopRowCount())??0)-1<=i:r==="bottom"?((n==null?void 0:n.getPinnedBottomRowCount())??0)-1<=i:s.getLastRow()<=i}var J0=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:r,children:i}=e;if(i)for(let n=0;n<i.length;++n)this.depthFirstSearchChangedPath(i[n],t);t(r)}depthFirstSearchEverything(e,t,r){const i=e.childrenAfterGroup;if(i)for(let n=0,s=i.length;n<s;++n){const a=i[n];a.childrenAfterGroup?this.depthFirstSearchEverything(a,t,r):r&&t(a)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,r=!1){this.active&&!r?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,r=0;for(;!this.mapToItems[t.id];){const i={rowNode:t,children:null};this.mapToItems[t.id]=i,r++,t=t.parent}return r}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let r=e;for(;r;)this.nodeIdsToColumns[r.id]||(this.nodeIdsToColumns[r.id]={}),t.forEach(i=>this.nodeIdsToColumns[r.id][i.getId()]=!0),r=r.parent}linkPathItems(e,t){let r=e;for(let i=0;i<t;i++){const n=this.mapToItems[r.id],s=this.mapToItems[r.parent.id];s.children||(s.children=[]),s.children.push(n),r=r.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const r=this.createPathItems(e);this.linkPathItems(e,r),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const r=this.nodeIdsToColumns[e.id];return t.filter(n=>r[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const r=this.nodeIdsToColumns[e.id];return t.filter(n=>!r[n.getId()])}},Lle=class{constructor(e,t){this.beans=e,this.groupThrottled=!1,this.oldVScroll=null,this.groupTimer=null,this.groupTarget=null,this.onGroupThrottle=()=>{var i;this.groupTimer=null,this.groupThrottled=!0,(i=this.beans.dragAndDrop)==null||i.nudge()};const r=()=>t.scrollFeature.getVScrollPosition().top;this.autoScroll=new rle({scrollContainer:t.eBodyViewport,scrollAxis:"y",getVerticalPosition:r,setVerticalPosition:i=>t.scrollFeature.setVerticalScrollPosition(i),onScrollCallback:()=>{var s;const i=r(),n=this.oldVScroll;this.oldVScroll=i,n!==null&&n!==i&&((s=this.beans.dragAndDrop)==null||s.nudge())}})}updateGroup(e,t){var r,i;this.groupTarget&&this.groupTarget!==e&&this.clearGroup(),e&&(t&&this.groupThrottled&&!e.expanded&&((r=e.childrenAfterSort)!=null&&r.length)&&e.isExpandable()&&e.setExpanded(!0,void 0,!0),e.expanded&&((i=e.childrenAfterSort)!=null&&i.length)&&(this.groupThrottled=!0,this.groupTarget=e))}startGroup(e){this.groupTarget=e,this.groupTimer===null&&(this.groupTimer=window.setTimeout(this.onGroupThrottle,this.beans.gos.get("rowDragInsertDelay")))}clearGroup(){this.groupThrottled=!1,this.groupTarget=null;const e=this.groupTimer;e!==null&&(this.groupTimer=null,window.clearTimeout(e))}clear(){this.clearGroup(),this.autoScroll.ensureCleared(),this.oldVScroll=null}},Ole=class extends ft{constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.nudger=null}postConstruct(){const e=this.beans;this.clientSideRowModel=Ac(e),e.ctrlsSvc.whenReady(this,t=>{this.nudger=new Lle(e,t.gridBodyCtrl)})}destroy(){var e;super.destroy(),(e=this.nudger)==null||e.clear(),this.nudger=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(e){var t;return((t=e==null?void 0:e.dropTarget)==null?void 0:t.allowed)===!1||this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc:e,filterManager:t,sortSvc:r}=this.beans;return!!(((e==null?void 0:e.columns)??[]).length||(t==null?void 0:t.isAnyFilterPresent())||(r==null?void 0:r.isSortActive()))}getRowNodes(e){var r;if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const i=(r=this.beans.selectionSvc)==null?void 0:r.getSelectedNodes();if(i&&i.indexOf(t)>=0)return i.slice().sort(zle)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){var a,o;const{lastDraggingEvent:r,beans:i}=this;if(t){const u=this.getRowNodes(e);e.dragItem.rowNodes=u,sk(u,!0)}this.lastDraggingEvent=e;const n=e.fromNudge,s=this.makeRowsDrop(r,e,n,!1);(a=i.rowDropHighlightSvc)==null||a.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e),!n&&(s!=null&&s.rowDragManaged)&&s.moved&&s.allowed&&s.sameGrid&&!s.suppressMoveWhenRowDragging&&this.dropRows(s),(o=this.nudger)==null||o.autoScroll.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,r,i){var G;const{beans:n,gos:s,clientSideRowModel:a}=this,o=this.newRowsDrop(t,i);if(t.dropTarget=o,t.changed=!1,!o)return null;let{sameGrid:u,rootNode:d,source:p,target:v,rows:y}=o;v??(v=a.getRow(a.getRowCount()-1)??null);const P=DB(s)!=="group"&&u;let R=null;if(v!=null&&v.footer){const j=mx(a,-1,v)??mx(a,1,v);R=v.sibling??d,v=j??null}v!=null&&v.detail&&(v=v.parent),o.moved&&(o.moved=p!==v);let M=.5;if(v&&(u&&o.moved&&(R||!P)?M=p.rowIndex>v.rowIndex?-.5:.5:M=(o.y-v.rowTop-v.rowHeight/2)/v.rowHeight||0),!P&&u&&v&&o.moved){const j=Gle(a,o);j&&(M=p.rowIndex>j.rowIndex?-.5:.5,v=j,o.moved&&(o.moved=p!==v))}const F=this.nudger;F==null||F.updateGroup(v,r),P&&!R&&F&&(!v||M>=.5&&v.rowIndex===n.pageBounds.getLastRow()?R=d:o.moved&&this.targetShouldBeParent(v,M,y)&&(F.groupThrottled&&(R=v),!r&&(!R||v&&!v.expanded&&((G=v.childrenAfterSort)!=null&&G.length))&&F.startGroup(v)),R??(R=(v==null?void 0:v.parent)??d));let k=!1;if(R){if(R===v&&R!==d){const j=R.expanded?mx(a,1,v):null;(j==null?void 0:j.parent)===R?(v=j,M=-.5):k=!0}if(v&&!k){let j=v;for(;j&&j!==d&&j!==R;)v=j,j=j.parent}}o.target=v,o.newParent=R,o.moved&&(o.moved=p!==v);const N=M<0?"above":"below";return o.position=o.moved?k?"inside":N:"none",this.validateRowsDrop(o,P,N,i),t.changed||(t.changed=Ble(e==null?void 0:e.dropTarget,o)),o}newRowsDrop(e,t){const{beans:r,gos:i,clientSideRowModel:n}=this,s=n.rootNode,a=i.get("rowDragManaged"),o=i.get("suppressMoveWhenRowDragging"),u=this.isFromThisGrid(e);let{rowNode:d,rowNodes:p}=e.dragItem;if(p||(p=d?[d]:[]),d||(d=p[0]),!d||!s)return null;const v=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e);let y=!0;a&&(!p.length||this.shouldPreventRowMove()||(o||!u)&&!v)&&(y=!1);const _=WD(r,e).y,P=this.getOverNode(_);return{api:r.gridApi,context:r.gridOptions.context,draggingEvent:e,rowDragManaged:a,suppressMoveWhenRowDragging:o,sameGrid:u,withinGrid:v,rootNode:s,moved:d!==P,y:_,overNode:P,overIndex:(P==null?void 0:P.rowIndex)??-1,position:"none",source:d,target:P??null,newParent:null,rows:p,allowed:y,highlight:!t&&a&&o&&(v||!u)}}validateRowsDrop(e,t,r,i){const{rowDragManaged:n,suppressMoveWhenRowDragging:s}=e;t||(e.newParent=null),s&&!e.moved&&(e.allowed=!1);const a=(!n||e.allowed)&&this.gos.get("isRowValidDropPosition");if(a){t&&e.newParent&&ik(e.rows,e.newParent)&&(e.newParent=null);const o=a(e);if(!o)e.allowed=!1;else if(typeof o=="object"){o.rows!==void 0&&(e.rows=o.rows??[]),t&&o.newParent!==void 0&&(e.newParent=o.newParent),o.target!==void 0&&(e.target=o.target),o.position&&(e.position=o.position),o.allowed!==void 0?e.allowed=o.allowed:n||(e.allowed=!0);const u=e.draggingEvent;o.changed&&u&&(u.changed=!0),!i&&o.highlight!==void 0&&(e.highlight=o.highlight)}}n&&(e.rows=this.filterRows(e)),t&&e.newParent&&ik(e.rows,e.newParent)&&(e.newParent=null),s&&(!e.rows.length||e.position==="none")&&(e.allowed=!1),(!e.allowed||!e.newParent)&&e.position==="inside"&&(e.position=r)}targetShouldBeParent(e,t,r){const i=e.rowIndex,n=.25;if(t<-.5+n)return!1;if(t<.5-n)return!0;let s,a=i+1;const o=this.clientSideRowModel;do s=o.getRow(a++);while(s&&s.footer);const u=e.childrenAfterGroup;if(s&&s.parent===e&&(u!=null&&u.length)){const d=new Set(r);for(const p of u)if(p.rowIndex!==null&&!d.has(p))return!0}return!1}addRowDropZone(e){if(!e.getContainer()){St(55);return}const t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer())){St(56);return}const r=e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(n=>e.onDragEnter(this.rowDragEvent("rowDragEnter",n))),onDragLeave:e.onDragLeave&&(n=>e.onDragLeave(this.rowDragEvent("rowDragLeave",n))),onDragging:e.onDragging&&(n=>e.onDragging(this.rowDragEvent("rowDragMove",n))),onDragStop:e.onDragStop&&(n=>e.onDragStop(this.rowDragEvent("rowDragEnd",n))),onDragCancel:e.onDragCancel&&(n=>e.onDragCancel(this.rowDragEvent("rowDragCancel",n)))},i={isInterestedIn:n=>n===2,getIconName:()=>"move",external:!0,...r};t.addDropTarget(i),this.addDestroyFunc(()=>t.removeDropTarget(i))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:r=>{var i;this.onDragEnter(r),(i=e==null?void 0:e.onDragEnter)==null||i.call(e,this.rowDragEvent("rowDragEnter",r))},onDragLeave:r=>{var i;this.onDragLeave(r),(i=e==null?void 0:e.onDragLeave)==null||i.call(e,this.rowDragEvent("rowDragLeave",r))},onDragging:r=>{var i;this.onDragging(r),(i=e==null?void 0:e.onDragging)==null||i.call(e,this.rowDragEvent("rowDragMove",r))},onDragStop:r=>{var i;this.onDragStop(r),(i=e==null?void 0:e.onDragStop)==null||i.call(e,this.rowDragEvent("rowDragEnd",r))},onDragCancel:r=>{var i;this.onDragCancel(r),(i=e==null?void 0:e.onDragCancel)==null||i.call(e,this.rowDragEvent("rowDragCancel",r))},fromGrid:!0}}getOverNode(e){const{pageBounds:t,rowModel:r}=this.beans,n=e>t.getCurrentPagePixelRange().pageLastPixel?-1:r.getRowIndexAtPixel(e);return n>=0?r.getRow(n):void 0}rowDragEvent(e,t){const r=this.beans,{dragItem:i,dropTarget:n,event:s,vDirection:a}=t,o=(n==null?void 0:n.rootNode)===this.clientSideRowModel.rootNode,u=o?n.y:WD(r,t).y,d=o?n.overNode:this.getOverNode(u),p=o?n.overIndex:(d==null?void 0:d.rowIndex)??-1;return{api:r.gridApi,context:r.gridOptions.context,type:e,event:s,node:i.rowNode,nodes:i.rowNodes,overIndex:p,overNode:d,y:u,vDirection:a,rowsDrop:n}}dispatchGridEvent(e,t){const r=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(r)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e)}onDragStop(e){const t=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),t!=null&&t.allowed&&t.rowDragManaged&&(t.suppressMoveWhenRowDragging||!t.sameGrid)&&this.dropRows(t),this.stopDragging(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e)}stopDragging(e){var t,r;(t=this.nudger)==null||t.clear(),(r=this.beans.rowDropHighlightSvc)==null||r.fromDrag(null),sk(e.dragItem.rowNodes,!1)}dropRows(e){return e.sameGrid?this.moveRows(e):this.addRows(e)}addRows({position:e,target:t,rows:r}){const i=Np(this.gos),n=this.clientSideRowModel,s=r.filter(({data:o,rowPinned:u})=>!n.getRowNode((i==null?void 0:i({data:o,level:0,rowPinned:u}))??o.id)).map(({data:o})=>o);if(s.length===0)return!1;const a=t?nk(t)+(e==="above"?0:1):void 0;return n.updateRowData({add:s,addIndex:a}),!0}filterRows({newParent:e,rows:t}){const r=this.clientSideRowModel;let i;for(let n=0,s=t.length;n<s;++n){let a=!0;const o=t[n];!o||o.footer||o.rowTop===null&&o!==r.getRowNode(o.id)||e&&o.parent!==e&&Nle(o,e)?a=!1:R2(o)||(a=!1),a?i==null||i.push(o):i??(i=t.slice(0,n))}return i??t}moveRows({position:e,target:t,rows:r,newParent:i,rootNode:n}){let s=!1;const a=new Set;for(const p of r){i&&p.parent!==i&&(p.treeParent=i,s=!0);const v=R2(p);v&&a.add(v)}if(!s&&a.size===0)return!1;const o=this.beans.focusSvc,u=o.getFocusedCell(),d=u&&jf(this.beans,u);return a.size&&this.reorderLeafChildren(a,...this.getMoveRowsBounds(a,t,e==="above"))&&(s=!0),s?(this.clientSideRowModel.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new J0(!1,n),rowNodesOrderChanged:!0}),d?d.focusCell():o.clearFocusedCell(),!0):!1}getMoveRowsBounds(e,t,r){var o;const i=((o=this.clientSideRowModel.rootNode)==null?void 0:o.allLeafChildren.length)??0;let n=nk(t);n<0||n>=i?n=i:r||++n;let s=n,a=Math.min(n,i-1);for(const u of e){const d=u.sourceRowIndex;d<s&&(s=d),d>a&&(a=d)}return[s,n,a]}reorderLeafChildren(e,t,r,i){var u;let n=!1;const s=(u=this.clientSideRowModel.rootNode)==null?void 0:u.allLeafChildren;if(!e.size||!s)return!1;let a=t;for(let d=t;d<r;++d){const p=s[d];e.has(p)||(p.sourceRowIndex!==a&&(p.sourceRowIndex=a,s[a]=p,n=!0),++a)}let o=i;for(let d=i;d>=r;--d){const p=s[d];e.has(p)||(p.sourceRowIndex!==o&&(p.sourceRowIndex=o,s[o]=p,n=!0),--o)}for(const d of e)d.sourceRowIndex!==a&&(d.sourceRowIndex=a,s[a]=d,n=!0),++a;return n}},mx=(e,t,r)=>{if(r){const i=e.getRowCount();let n=r.rowIndex+t;for(;n>=0&&n<i;){const s=e.getRow(n);if(!s||!s.footer&&!s.detail)return s;n+=t}}},Nle=(e,t)=>{let r=t;for(;r;){if(r===e)return!0;r=r.parent}return!1},ik=(e,t)=>{for(let r=0,i=e.length;r<i;++r)if(e[r].parent!==t)return!1;return!0},nk=e=>{const t=R2(e);return t!==void 0?t.sourceRowIndex:-1},R2=e=>{for(;e;){if(e.sourceRowIndex>=0)return e;const t=e.childrenAfterGroup;if(!(t!=null&&t.length))return;e=t[0]}},Ble=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!qu(e.rows,t.rows)),zle=({rowIndex:e},{rowIndex:t})=>e!==null&&t!==null?e-t:0,sk=(e,t)=>{for(let r=0,i=(e==null?void 0:e.length)||0;r<i;++r){const n=e[r];n.dragging!==t&&(n.dragging=t,n.dispatchRowEvent("draggingChanged"))}},Gle=(e,t)=>{let r=null,i=t.target;if(i&&t.rows.indexOf(i)<0)return null;const n=t.source;if(!i||!n)return null;let s=i.rowIndex-n.rowIndex;const a=s<0?-1:1;s=t.suppressMoveWhenRowDragging?Math.abs(s):1;const o=new Set(t.rows);do{const u=mx(e,a,i);if(!u)break;o.has(u)||(r=u,--s),i=u}while(s>0);return r},Vle=class extends ft{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const r=t.createManagedBean(new Ole(e)),i=this.beans.dragAndDrop;i.addDropTarget(r),t.addDestroyFunc(()=>i.removeDropTarget(r)),this.rowDragFeature=r}createRowDragComp(e,t,r,i,n,s){return new Rle(e,t,r,i,n,s)}createRowDragCompForRow(e,t){if(Bu(this.gos))return;const r=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${r("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,r,i,n,s){const a=this.gos;return a.get("rowDragManaged")&&(!In(a)||a.get("pagination"))?void 0:this.createRowDragComp(r,e,t,i,n,s)}},Hle=class extends ft{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row,t=this.dragging;!e||e.rowIndex===null||this.position==="none"?this.clear():this.set(e,this.position),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const r=e!==this.row,i=e.uiLevel,n=t!==this.position,s=i!==this.uiLevel;this.dragging=!1,(r||n||s)&&(r&&this.clear(),this.uiLevel=i,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){const t=e==null?void 0:e.dropTarget;if(t){const{highlight:r,target:i,position:n}=t;if(r&&i&&n!=="none"){this.set(i,n),this.dragging=!0;return}}this.dragging&&this.clear()}},U6={moduleName:"Drag",version:jt,beans:[ble]},Ule={moduleName:"DragAndDrop",version:jt,dynamicBeans:{dndSourceComp:vle},icons:{rowDrag:"grip"}},W6={moduleName:"SharedDragAndDrop",version:jt,beans:[uoe],dependsOn:[U6],userComponents:{agDragAndDropImage:Lae},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},Wle={moduleName:"RowDrag",version:jt,beans:[Hle,Vle],apiFunctions:{addRowDropZone:yle,removeRowDropZone:wle,getRowDropZoneParams:xle,getRowDropPositionIndicator:Cle,setRowDropPositionIndicator:_le},dependsOn:[W6]},jle={moduleName:"HorizontalResize",version:jt,beans:[Sle],dependsOn:[U6]},$le=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",qle=class extends ft{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:r,executeLaterFuncs:i}=this;if(r.length===0&&i.length===0){e(),t();return}const n=s=>{for(;s.length;){const a=s.pop();a&&a()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),n(r)},0),window.setTimeout(()=>{t(),n(i)},200)})}};function Kle(e,t,r){var i;(i=e.colMoves)==null||i.moveColumnByIndex(t,r,"api")}function Zle(e,t,r){var i;(i=e.colMoves)==null||i.moveColumns(t,r,"api")}var Xle=class extends ft{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(r=>{r.isPrimary()&&(r.isAnyFunctionActive()||(r.isAllowValue()?this.columnsToAggregate.push(r):r.isAllowRowGroup()?this.columnsToGroup.push(r):r.isAllowPivot()&&this.columnsToPivot.push(r)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:r,pivotColsSvc:i}=this.beans;this.columnsToAggregate.length>0&&(t==null||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(r==null||r.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(i==null||i.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function Yle(e,t){!t||t.length<=1||t.filter(i=>e.indexOf(i)<0).length>0||t.sort((i,n)=>{const s=e.indexOf(i),a=e.indexOf(n);return s-a})}function Qle(e){const t=[...e];return e.forEach(r=>{var s;let i=null,n=r.getParent();for(;n!=null&&n.getDisplayedLeafColumns().length===1;)i=n,n=n.getParent();i!=null&&(!!((s=i.getColGroupDef())!=null&&s.marryChildren)?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach(u=>{t.includes(u)||t.push(u)})}),t}function Jle(e,t,r,i){const n=i.allCols;let s=null,a=null;for(let o=0;o<e.length;o++){const u=e[o],d=r.getProposedColumnOrder(t,u);if(!r.doesOrderPassRules(d))continue;const p=d.filter(y=>n.includes(y));if(a===null)a=p;else if(!qu(p,a))break;const v=tce(d);(s===null||v<s.fragCount)&&(s={move:u,fragCount:v})}return s}function j6(e){const{isFromHeader:t,fromLeft:r,xPosition:i,fromEnter:n,fakeEvent:s,pinned:a,gos:o,colModel:u,colMoves:d,visibleCols:p}=e;let{allMovingColumns:v}=e;t&&(v=Qle(v));const y=v.slice();Yle(u.getCols(),y);const _=ice({movingCols:y,draggingRight:r,xPosition:i,pinned:a,gos:o,colModel:u,visibleCols:p}),P=ece(y,u);if(_.length===0)return;const R=_[0];if(P!==null&&(t||!n)&&!s&&(!r&&R>=P||r&&R<=P))return;const F=Jle(_,y,d,p);if(!F)return;const k=F.move;if(!(k>u.getCols().length-y.length))return{columns:y,toIndex:k}}function $6(e){const{columns:t,toIndex:r}=j6(e)||{},{finished:i,colMoves:n}=e;return!t||r==null?null:(n.moveColumns(t,r,"uiColumnMoved",i),i?null:{columns:t,toIndex:r})}function ece(e,t){const r=t.getCols(),i=e.map(u=>r.indexOf(u)).sort((u,d)=>u-d),n=i[0];return si(i)-n!==i.length-1?null:n}function tce(e){function t(i){const n=[];let s=i.getOriginalParent();for(;s!=null;)n.push(s),s=s.getOriginalParent();return n}let r=0;for(let i=0;i<e.length-1;i++){let n=t(e[i]),s=t(e[i+1]);[n,s]=n.length>s.length?[n,s]:[s,n],n.forEach(a=>{s.indexOf(a)===-1&&r++})}return r}function rce(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function ice(e){const{movingCols:t,draggingRight:r,xPosition:i,pinned:n,gos:s,colModel:a,visibleCols:o}=e;if(s.get("suppressMovableColumns")||t.some(N=>N.getColDef().suppressMovable))return[];const d=rce(o,n),p=a.getCols(),v=d.filter(N=>t.includes(N)),y=d.filter(N=>!t.includes(N)),_=p.filter(N=>!t.includes(N));let P=0,R=i;if(r){let N=0;v.forEach(G=>N+=G.getActualWidth()),R-=N}if(R>0){for(let N=0;N<y.length;N++){const G=y[N];if(R-=G.getActualWidth(),R<0)break;P++}r&&P++}let M;if(P>0){const N=y[P-1];M=_.indexOf(N)+1}else M=_.indexOf(y[0]),M===-1&&(M=0);const F=[M],k=(N,G)=>N-G;if(r){let N=M+1;const G=p.length-1;for(;N<=G;)F.push(N),N++;F.sort(k)}else{let N=M;const G=p.length-1;let j=p[N];for(;N<=G&&d.indexOf(j)<0;)N++,F.push(N),j=p[N];N=M-1;const ee=0;for(;N>=ee;)F.push(N),N--;F.sort(k).reverse()}return F}function T2(e){var d;const{pinned:t,fromKeyboard:r,gos:i,ctrlsSvc:n,useHeaderRow:s,skipScrollPadding:a}=e;let o=(d=n.getHeaderRowContainerCtrl(t))==null?void 0:d.eViewport,{x:u}=e;return o?(r&&(u-=o.getBoundingClientRect().left),i.get("enableRtl")&&(s&&(o=o.querySelector(".ag-header-row")),u=o.clientWidth-u),t==null&&!a&&(u+=n.get("center").getCenterViewportScrollLeft()),u):0}function RS(e,t){for(const r of e)r.moving=t,r.dispatchColEvent("movingChanged","uiColumnMoved")}var ok=7,P2=100,Mw=P2/2,nce=5,sce=100,oce=class extends ft{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Wt(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:r}=t||{},i=(r==null?void 0:r.columns)??[];for(const n of i){const s=n.getPinned();if(n.getColDef().lockPinned){if(s==e)return"move";continue}const a=r==null?void 0:r.containerType;if(a===e||!e)return"move";if(e&&(!s||a!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,r=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(r,!0,"uiColumnDragged");else{const n=t.visibleState,s=(r||[]).filter(a=>n[a.getId()]&&!a.isVisible());this.setColumnsVisible(s,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(r,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,r=!1,i=!1){const{gos:n,ctrlsSvc:s}=this.beans,a=n.get("suppressMoveWhenColumnDragging");if(i&&!a){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&Gi(e.hDirection))return;const o=T2({x:e.x,pinned:this.pinned,gos:n,ctrlsSvc:s});t||this.checkCenterForScrolling(o),a?this.handleColumnDragWhileSuppressingMovement(e,t,r,o,i):this.handleColumnDragWhileAllowingMovement(e,t,r,o,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,r){if(!(e!=null&&e.length))return;const i=e.filter(n=>!n.getColDef().lockVisible);i.length&&this.beans.colModel.setColsVisible(i,t,r)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:r}=e;this.beans.colMoves.moveColumns(t,r,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,r,i,n){const s=this.getAllMovingColumns(e,!0);if(n){const a=this.isAttemptingToPin(s);a&&this.attemptToPinColumns(s,void 0,!0);const{fromLeft:o,xPosition:u}=this.getNormalisedXPositionInfo(s,a)||{};if(o==null||u==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:s,xPosition:u,fromEnter:t,fakeEvent:r,fromLeft:o})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(s,i)}}handleColumnDragWhileAllowingMovement(e,t,r,i,n){const s=this.getAllMovingColumns(e),a=this.normaliseDirection(e.hDirection)==="right",o=e.dragSource.type===1,u=this.getMoveColumnParams({allMovingColumns:s,isFromHeader:o,xPosition:i,fromLeft:a,fromEnter:t,fakeEvent:r}),d=$6({...u,finished:n});d&&(this.lastMovedInfo=d)}getAllMovingColumns(e,t=!1){const r=e.dragSource.getDragItem();let i=null;t?(i=r.columnsInSplit,i||(i=r.columns)):i=r.columns;const n=s=>s.getColDef().lockPinned?s.getPinned()==this.pinned:!0;return i?i.filter(n):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:r,xPosition:i,fromLeft:n,fromEnter:s,fakeEvent:a}=e,{gos:o,colModel:u,colMoves:d,visibleCols:p}=this.beans;return{allMovingColumns:t,isFromHeader:r,fromLeft:n,xPosition:i,pinned:this.pinned,fromEnter:s,fakeEvent:a,gos:o,colModel:u,colMoves:d,visibleCols:p}}highlightHoveredColumn(e,t){var p;const{gos:r,colModel:i}=this.beans,n=r.get("enableRtl"),s=i.getCols().filter(v=>v.isVisible()&&v.getPinned()===this.pinned);let a=null,o=null,u=null;for(const v of s){if(o=v.getActualWidth(),a=this.getNormalisedColumnLeft(v,0,n),a!=null){const y=a+o;if(a<=t&&y>=t){u=v;break}}a=null,o=null}if(u)e.indexOf(u)!==-1&&(u=null);else{for(let v=s.length-1;v>=0;v--){const y=s[v],_=s[v].getParent();if(!_){u=y;break}const P=_==null?void 0:_.getDisplayedLeafColumns();if(P.length){u=si(P);break}}if(!u)return;a=this.getNormalisedColumnLeft(u,0,n),o=u.getActualWidth()}if(((p=this.lastHighlightedColumn)==null?void 0:p.column)!==u&&this.clearHighlighted(),u==null||a==null||o==null)return;let d;t-a<o/2!==n?d=0:d=1,ak(u,d),this.lastHighlightedColumn={column:u,position:d}}getNormalisedXPositionInfo(e,t){const{gos:r,visibleCols:i}=this.beans,n=r.get("enableRtl"),{firstMovingCol:s,column:a,position:o}=this.getColumnMoveAndTargetInfo(e,t,n);if(!s||!a||o==null)return;const u=i.allCols,d=u.indexOf(s),p=u.indexOf(a),v=o===0!==n,y=d<p||d===p&&!v;let _=0;if(v?y&&(_-=1):y||(_+=1),p+_===d)return;const P=u[p+_];if(!P)return;const R=this.getNormalisedColumnLeft(P,20,n);return{fromLeft:y,xPosition:R}}getColumnMoveAndTargetInfo(e,t,r){const i=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:s}=ace(e);if(!n||!s||i.column||!t)return{firstMovingCol:n,...i};const o=this.getPinDirection()==="left";return{firstMovingCol:n,position:o?1:0,column:o!==r?n:s}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,r){const{gos:i,ctrlsSvc:n}=this.beans,s=e.getLeft();if(s==null)return null;const a=e.getActualWidth();return T2({x:r?s+a-t:s+t,pinned:e.getPinned(),useHeaderRow:r,skipScrollPadding:!0,gos:i,ctrlsSvc:n})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,r=this.failedMoveAttempts>ok;return t&&r||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:r,fromEnter:i,fakeEvent:n,fromLeft:s}=e,a=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:r,fromLeft:s,fromEnter:i,fakeEvent:n}),{columns:o,toIndex:u}=j6(a)||{};o&&u!=null&&(this.lastMovedInfo={columns:o,toIndex:u}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(ak(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),r=t.getCenterViewportScrollLeft(),i=r+t.getCenterWidth();let n,s;this.gos.get("enableRtl")?(n=e<r+Mw,s=e>i-Mw):(s=e<r+Mw,n=e>i-Mw),this.needToMoveRight=n,this.needToMoveLeft=s,s||n?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),sce),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){var i;let e;this.intervalCount++,e=10+this.intervalCount*nce,e>P2&&(e=P2);let t=null;const r=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=r.scrollHorizontally(-e):this.needToMoveRight&&(t=r.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:n,dragAndDrop:s,gos:a}=this.beans;if(this.failedMoveAttempts<=ok+1||!n)return;if(s.setDragImageCompIcon("pinned"),!a.get("suppressMoveWhenColumnDragging")){const o=(i=this.lastDraggingEvent)==null?void 0:i.dragItem.columns;this.attemptToPinColumns(o,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,r=!1){const i=(e||[]).filter(a=>!a.getColDef().lockPinned);if(!i.length)return 0;r&&(t=this.getPinDirection());const{pinnedCols:n,dragAndDrop:s}=this.beans;return n==null||n.setColsPinned(i,t,"uiColumnDragged"),r&&s.nudge(),i.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function ak(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function ace(e){const t=e.length;let r,i;for(let n=0;n<t;n++){if(!r){const s=e[n];s.getLeft()!=null&&(r=s)}if(!i){const s=e[t-1-n];s.getLeft()!=null&&(i=s)}if(r&&i)break}return{firstMovingCol:r,lastMovingCol:i}}var lce=class extends ft{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,r=this.pinned;e.whenReady(this,i=>{let n;const s=i.gridBodyCtrl.eBodyViewport;switch(r){case"left":n=[[s,i.left.eContainer],[i.bottomLeft.eContainer],[i.topLeft.eContainer]];break;case"right":n=[[s,i.right.eContainer],[i.bottomRight.eContainer],[i.topRight.eContainer]];break;default:n=[[s,i.center.eViewport],[i.bottomCenter.eViewport],[i.topCenter.eViewport]];break}this.eSecondaryContainers=n}),this.moveColumnFeature=this.createManagedBean(new oce(r)),this.bodyDropPivotTarget=this.createManagedBean(new Xle(r)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},cce=class extends ft{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,r){const i=this.beans.colModel.getCols();if(!i)return;const n=i[e];this.moveColumns([n],t,r)}moveColumns(e,t,r,i=!0){const{colModel:n,colAnimation:s,visibleCols:a,eventSvc:o}=this.beans,u=n.getCols();if(!u)return;if(t>u.length-e.length){St(30,{toIndex:t});return}s==null||s.start();const d=n.getColsForKeys(e);this.doesMovePassRules(d,t)&&(RD(n.getCols(),d,t),a.refresh(r),o.dispatchEvent({type:"columnMoved",columns:d,column:d.length===1?d[0]:null,toIndex:t,finished:i,source:r})),s==null||s.finish()}doesMovePassRules(e,t){const r=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(r)}doesOrderPassRules(e){const{colModel:t,gos:r}=this.beans;return!(!HB(e,t.getColTree())||!(n=>{const s=d=>d?d==="left"||d===!0?-1:1:0,a=r.get("enableRtl");let o=a?1:-1,u=!0;return n.forEach(d=>{const p=s(d.getColDef().lockPosition);a?p>o&&(u=!1):p<o&&(u=!1),o=p}),u})(e))}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return RD(i,e,t),i}createBodyDropTarget(e,t){return new lce(e,t)}moveHeader(e,t,r,i,n){const{ctrlsSvc:s,gos:a,colModel:o,visibleCols:u,focusSvc:d}=this.beans,p=t.getBoundingClientRect(),v=p.left,y=vn(r),_=y?p.width:r.getActualWidth(),P=e==="left"!==a.get("enableRtl"),R=T2({x:P?v-20:v+_+20,pinned:i,fromKeyboard:!0,gos:a,ctrlsSvc:s}),M=d.focusedHeader;$6({allMovingColumns:y?r.getLeafColumns():[r],isFromHeader:!0,fromLeft:e==="right",xPosition:R,pinned:i,fromEnter:!1,fakeEvent:!1,gos:a,colModel:o,colMoves:this,visibleCols:u,finished:!0});let F;if(y){const k=r.getDisplayedLeafColumns();F=P?k[0]:si(k)}else F=r;if(s.getScrollFeature().ensureColumnVisible(F,"auto"),(!n.isAlive()||a.get("ensureDomOrder"))&&M){let k;if(y){const N=r.getGroupId(),G=r.getLeafColumns();if(!G.length)return;const j=G[0].getParent();if(!j)return;k=uce(j,N)}else k=r;k&&d.focusHeaderPosition({headerPosition:{...M,column:k}})}}setDragSourceForHeader(e,t,r){const{gos:i,colModel:n,dragAndDrop:s,visibleCols:a}=this.beans;let o=!i.get("suppressDragLeaveHidesColumns");const u=vn(t),d=u?t.getProvidedColumnGroup().getLeafColumns():[t],v={type:1,eElement:e,getDefaultIconName:()=>o?"hide":"notAllowed",getDragItem:u?()=>dce(t,a.allCols):()=>hce(t),dragItemName:r,onDragStarted:()=>{o=!i.get("suppressDragLeaveHidesColumns"),RS(d,!0)},onDragStopped:()=>RS(d,!1),onDragCancelled:()=>RS(d,!1),onGridEnter:y=>{if(o){const{columns:_=[],visibleState:P}=y??{},R=u?F=>!P||P[F.getColId()]:()=>!0,M=_.filter(F=>!F.getColDef().lockVisible&&R(F));n.setColsVisible(M,!0,"uiColumnMoved")}},onGridExit:y=>{var _;if(o){const P=((_=y==null?void 0:y.columns)==null?void 0:_.filter(R=>!R.getColDef().lockVisible))||[];n.setColsVisible(P,!1,"uiColumnMoved")}}};return s.addDragSource(v,!0),v}};function uce(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function hce(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function dce(e,t){var o;const r=e.getProvidedColumnGroup().getLeafColumns(),i={};r.forEach(u=>i[u.getId()]=u.isVisible());const n=[];t.forEach(u=>{r.indexOf(u)>=0&&(n.push(u),xa(r,u))}),r.forEach(u=>n.push(u));const s=[],a=e.getLeafColumns();for(const u of n)a.indexOf(u)!==-1&&s.push(u);return{columns:n,columnsInSplit:s,visibleState:i,containerType:(o=s[0])==null?void 0:o.pinned}}var fce={moduleName:"ColumnMove",version:jt,beans:[cce,qle],apiFunctions:{moveColumnByIndex:Kle,moveColumns:Zle},dependsOn:[W6],css:[$le]},pce=class extends ft{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const r=this.getHeaderCellForColumn(e);if(!r)return-1;const i=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||i.push(r),this.getPreferredWidthForElements(i)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const r=document.createElement("form");r.style.position="fixed";const i=this.centerRowContainerCtrl.eContainer;e.forEach(s=>this.cloneItemIntoDummy(s,r)),i.appendChild(r);const n=r.offsetWidth;return i.removeChild(r),t=t??this.gos.get("autoSizePadding"),n+t}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(r=>{const i=r.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}),t}cloneItemIntoDummy(e,t){const r=e.cloneNode(!0);r.style.width="",r.style.position="static",r.style.left="";const i=document.createElement("div"),n=i.classList;["ag-header-cell","ag-header-group-cell"].some(o=>r.classList.contains(o))?(n.add("ag-header","ag-header-row"),i.style.position="static"):n.add("ag-row");let a=e.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(u=>a.classList.contains(u))){for(let u=0;u<a.classList.length;u++){const d=a.classList[u];d!="ag-row-position-absolute"&&n.add(d)}break}a=a.parentElement}i.appendChild(r),t.appendChild(i)}},q6={moduleName:"AutoWidth",version:jt,beans:[pce]};function gce(e,t,r=!0,i="api"){var n;(n=e.colResize)==null||n.setColumnWidths(t,!1,r,i)}var mce=class extends ft{constructor(e,t,r,i){super(),this.comp=e,this.eResize=t,this.pinned=r,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:r}=this.beans,i=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(i),!t.get("suppressAutoSize")&&r&&this.addDestroyFunc(r.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:r,resizeRatios:i,groupAfterColumns:n,groupAfterStartWidth:s,groupAfterRatios:a}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=r,this.resizeRatios=i,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=a,this.toggleColumnResizing(!0)}onResizing(e,t,r="uiColumnResized"){const i=this.normaliseDragChange(t),n=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(n,r,e)}getInitialValues(e){var u;const t=d=>d.reduce((p,v)=>p+v.getActualWidth(),0),r=(d,p)=>d.map(v=>v.getActualWidth()/p),i=this.getColumnsToResize(),n=t(i),s=r(i,n),a={columnsToResize:i,resizeStartWidth:n,resizeRatios:s};let o=null;if(e&&(o=((u=this.beans.colGroupSvc)==null?void 0:u.getGroupAtDirection(this.columnGroup,"After"))??null),o){const d=o.getDisplayedLeafColumns(),p=a.groupAfterColumns=d.filter(y=>y.isResizable()),v=a.groupAfterStartWidth=t(p);a.groupAfterRatios=r(p,v)}else a.groupAfterColumns=void 0,a.groupAfterStartWidth=void 0,a.groupAfterRatios=void 0;return a}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),r=this.getInitialValues();t>r.resizeStartWidth&&this.resizeColumns(r,t,e,!0)}resizeColumnsFromLocalValues(e,t,r=!0){if(!this.resizeCols||!this.resizeRatios)return;const i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(i,e,t,r)}resizeColumns(e,t,r,i=!0){var v;const{columnsToResize:n,resizeStartWidth:s,resizeRatios:a,groupAfterColumns:o,groupAfterStartWidth:u,groupAfterRatios:d}=e,p=[];if(p.push({columns:n,ratios:a,width:t}),o){const y=t-s;p.push({columns:o,ratios:d,width:u-y})}(v=this.beans.colResize)==null||v.resizeColumnSets({resizeSets:p,finished:i,source:r}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},vce=class extends ft{constructor(e,t,r,i,n){super(),this.pinned=e,this.column=t,this.eResize=r,this.comp=i,this.ctrl=n}postConstruct(){const e=[];let t,r;const i=()=>{if(qi(this.eResize,t),!t)return;const{horizontalResizeSvc:a,colAutosize:o}=this.beans,u=a.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(u),r&&o&&e.push(o.addColumnAutosize(this.eResize,this.column))},n=()=>{e.forEach(a=>a()),e.length=0},s=()=>{const a=this.column.isResizable(),o=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(a!==t||o!==r)&&(t=a,r=o,n(),i())};s(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",s)}onResizing(e,t){const{column:r,lastResizeAmount:i,resizeStartWidth:n,beans:s}=this,a=this.normaliseResizeAmount(t),o=n+a,u=[{key:r,newWidth:o}],{pinnedCols:d,ctrlsSvc:p,colResize:v}=s;if(this.column.getPinned()){const y=(d==null?void 0:d.leftWidth)??0,_=(d==null?void 0:d.rightWidth)??0,P=K0(p.getGridBodyCtrl().eBodyViewport)-50;if(y+_+(a-i)>P)return}this.lastResizeAmount=a,v==null||v.setColumnWidths(u,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const r=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?r&&(t*=-1):i&&(t*=-1),t}},yce=class extends ft{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,r,i){const n=[],{colModel:s,gos:a,visibleCols:o}=this.beans;e.forEach(u=>{const d=s.getColDefCol(u.key)||s.getCol(u.key);if(!d)return;if(n.push({width:u.newWidth,ratios:[1],columns:[d]}),a.get("colResizeDefault")==="shift"&&(t=!t),t){const v=o.getColAfter(d);if(!v)return;const y=d.getActualWidth()-u.newWidth,_=v.getActualWidth()+y;n.push({width:_,ratios:[1],columns:[v]})}}),n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:r,source:i})}resizeColumnSets(e){const{resizeSets:t,finished:r,source:i}=e;if(!(!t||t.every(p=>wce(p)))){if(r){const p=t&&t.length>0?t[0].columns:null;Bp(this.eventSvc,p,r,i)}return}const s=[],a=[];t.forEach(p=>{const{width:v,columns:y,ratios:_}=p,P={},R={};y.forEach(k=>a.push(k));let M=!0,F=0;for(;M;){if(F++,F>1e3){ai(31);break}M=!1;const k=[];let N=0,G=v;y.forEach((ee,q)=>{if(R[ee.getId()])G-=P[ee.getId()];else{k.push(ee);const ue=_[q];N+=ue}});const j=1/N;k.forEach((ee,q)=>{const oe=q===k.length-1;let ue;oe?ue=G:(ue=Math.round(_[q]*v*j),G-=ue);const me=ee.getMinWidth(),ie=ee.getMaxWidth();ue<me?(ue=me,R[ee.getId()]=!0,M=!0):ie>0&&ue>ie&&(ue=ie,R[ee.getId()]=!0,M=!0),P[ee.getId()]=ue})}y.forEach(k=>{const N=P[k.getId()];k.getActualWidth()!==N&&(k.setActualWidth(N,i),s.push(k))})});const o=s.length>0;let u=[];if(o){const{colFlex:p,visibleCols:v,colViewport:y}=this.beans;u=(p==null?void 0:p.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0}))??[],v.setLeftValues(i),v.updateBodyWidths(),y.checkViewportColumns()}const d=a.concat(u);(o||r)&&Bp(this.eventSvc,d,r,i,u)}resizeHeader(e,t,r){if(!e.isResizable())return;const i=e.getActualWidth(),n=e.getMinWidth(),s=e.getMaxWidth(),a=Math.min(Math.max(i+t,n),s);this.setColumnWidths([{key:e,newWidth:a}],r,!0,"uiColumnResized")}createResizeFeature(e,t,r,i,n){return new vce(e,t,r,i,n)}createGroupResizeFeature(e,t,r,i){return new mce(e,t,r,i)}};function wce(e){const{columns:t,width:r}=e;let i=0,n=0,s=!0;t.forEach(u=>{const d=u.getMinWidth();i+=d||0;const p=u.getMaxWidth();p>0?n+=p:s=!1});const a=r>=i,o=!s||r<=n;return a&&o}var xce={moduleName:"ColumnResize",version:jt,beans:[yce],apiFunctions:{setColumnWidths:gce},dependsOn:[jle,q6]},Cce=class extends ft{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},_ce=class extends hP{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,r,i,n){const{column:s,beans:a}=this,{context:o,colNames:u,colHover:d,rangeSvc:p,colResize:v}=a;this.comp=e,n=Rv(this,o,n),this.setGui(t,n),this.displayName=u.getDisplayNameForColumnGroup(s,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(),this.setupAutoHeight({wrapperElement:i,compBean:n}),this.setupUserComp(),this.addHeaderMouseListeners(n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const y=this.rowCtrl.pinned,_=s.getProvidedColumnGroup().getLeafColumns();d==null||d.createHoverFeature(n,_,t),p==null||p.createRangeHighlightFeature(n,s,e),n.createManagedBean(new uP(s,t,a)),n.createManagedBean(new Cce(e,s)),v?this.resizeFeature=n.createManagedBean(v.createGroupResizeFeature(e,r,y,s)):e.setResizableDisplayed(!1),n.createManagedBean(new ig(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,_),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,r=e.getDefinition();return Cr(t.gos,{colDef:r,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,r=e.get("groupHeaderHeight");r!=null?r===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(r):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const r of t)e.addManagedListeners(r,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,r)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),r=t[0]===e,i=si(t)===e;if(!r&&!i)return;const n=e.getHighlighted(),s=!!this.rowCtrl.getHeaderCellCtrls().find(u=>u.column.isMoving());let a=!1,o=!1;if(s){const u=this.beans.gos.get("enableRtl"),d=n===1,p=n===0;r&&(u?o=d:a=p),i&&(u?a=p:o=d)}this.comp.toggleCss("ag-header-highlight-before",a),this.comp.toggleCss("ag-header-highlight-after",o)}resizeHeader(e,t){const{resizeFeature:r}=this;if(!r)return;const i=r.getInitialValues(t);r.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;(t=this.resizeFeature)==null||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:r,enterpriseMenuFactory:i}=this.beans,n=this.column,s=n.getProvidedColumnGroup(),a=Cr(r,{displayName:this.displayName,columnGroup:n,setExpanded:u=>{e.setColumnGroupOpened(s,u,"gridInitializing")},setTooltip:(u,d)=>{r.assertModuleRegistered("Tooltip",3),this.setupTooltip(u,d)},showColumnMenu:(u,d)=>i==null?void 0:i.showMenuAfterButtonClick(s,u,"columnMenu",d),showColumnMenuAfterMouseClick:(u,d)=>i==null?void 0:i.showMenuAfterMouseEvent(s,u,"columnMenu",d),eGridHeader:this.eGui}),o=Bne(t,a);o&&this.comp.setUserCompDetails(o)}addHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),r=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=n=>this.handleContextMenuMouseEvent(n,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:r,contextmenu:i})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var r;this.tooltipFeature=(r=this.beans.tooltipSvc)==null?void 0:r.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const r=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:r,expandableChanged:r})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),r=M6(t,this.gos,null,e);e.isPadding()?(r.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(n=>n.isSpanHeaderHeight())&&r.push("ag-header-span-height")):(r.push("ag-header-group-cell-with-group"),t!=null&&t.wrapHeaderText&&r.push("ag-header-cell-wrap-text")),r.forEach(i=>this.comp.toggleCss(i,!0))}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());i.forEach(s=>{e.addManagedListeners(s,{movingChanged:n})}),n()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===st.ENTER){const r=this.column,i=!r.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(r.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){var t;!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function bce(e,t,r){var i;(i=e.colGroupSvc)==null||i.setColumnGroupOpened(t,r,"api")}function Sce(e,t,r){var i;return((i=e.colGroupSvc)==null?void 0:i.getColumnGroup(t,r))??null}function Ece(e,t){var r;return((r=e.colGroupSvc)==null?void 0:r.getProvidedColGroup(t))??null}function Rce(e,t,r){return e.colNames.getDisplayNameForColumnGroup(t,r)||""}function Tce(e){var t;return((t=e.colGroupSvc)==null?void 0:t.getColumnGroupState())??[]}function Pce(e,t){var r;(r=e.colGroupSvc)==null||r.setColumnGroupState(t,"api")}function Mce(e){var t;(t=e.colGroupSvc)==null||t.resetColumnGroupState("api")}function Fce(e){return e.visibleCols.treeLeft}function Ace(e){return e.visibleCols.treeCenter}function Ice(e){return e.visibleCols.treeRight}function Dce(e){return e.visibleCols.getAllTrees()}function kce(e,t){for(let r=0;r<t.length;r++){const i=e.indexOf(t[r]);i>=0&&(e[i]=e[e.length-1],e.pop())}}var Lce=class extends ft{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:r,colModel:i,colGroupSvc:n,colViewport:s,selectionColSvc:a}=this.beans;t||this.buildTrees(i,n),n==null||n.updateOpenClosedVisibility(),this.leftCols=TS(this.treeLeft),this.centerCols=TS(this.treeCenter),this.rightCols=TS(this.treeRight),a==null||a.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(i),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(o=>o.isAutoHeight()),r==null||r.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(i,this.leftCols,this.rightCols,e),s.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let r=t.getParent();for(;r;){if(!r.isPadding()){const i=r.getProvidedColumnGroup().getLevel()+1;i>e&&(e=i);break}r=r.getParent()}}return e}updateBodyWidths(){const e=ic(this.centerCols),t=ic(this.leftCols),r=ic(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==r)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=r,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,r,i){let n,s;this.gos.get("enableRtl")?(n=t?t[0]:null,s=r?si(r):null):(n=t?si(t):null,s=r?r[0]:null),e.getCols().forEach(a=>{a.setLastLeftPinned(a===n,i),a.setFirstRightPinned(a===s,i)})}buildTrees(e,t){const r=e.getColsToShow(),i=r.filter(u=>u.getPinned()=="left"),n=r.filter(u=>u.getPinned()=="right"),s=r.filter(u=>u.getPinned()!="left"&&u.getPinned()!="right"),a=new qB,o=u=>t?t.createColumnGroups(u):u.columns;this.treeLeft=o({columns:i,idCreator:a,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=o({columns:n,idCreator:a,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=o({columns:s,idCreator:a,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),r=[],i=[],n=[];for(const s of t){const a=s.getPinned();a?a===!0||a==="left"?r.push(s):n.push(s):i.push(s)}this.ariaOrderColumns=r.concat(i).concat(n)}getAriaColIndex(e){let t;return vn(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{vn(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),n=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach(s=>{if(n){let a=ic(s);s.forEach(o=>{a-=o.getActualWidth(),o.setLeft(a,e)})}else{let a=0;s.forEach(o=>{o.setLeft(a,e),a+=o.getActualWidth()})}kce(i,s)}),i.forEach(s=>{s.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:r}}=this;return r.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:r}}=this;return r.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,r,i){const n=[];let s=null;for(let a=0;a<t.length;a++){const o=t[a],u=t.length-a,d=Math.min(o.getColSpan(e),u),p=[o];if(d>1){const y=d-1;for(let _=1;_<=y;_++)p.push(t[a+_]);a+=y}let v;r?(v=!1,p.forEach(y=>{r(y)&&(v=!0)})):v=!0,v&&(n.length===0&&s&&(i&&i(o))&&n.push(s),n.push(o)),s=o}return n}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,r=t.indexOf(e);return r>0?t[r-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};Uh(this.treeCenter,!1,e),Uh(this.treeLeft,!1,e),Uh(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let r=0;r<t.length;r++){const i=this[t[r]];if(i.length)return e?si(i):i[0]}return null}getColAfter(e){const t=this.allCols,r=t.indexOf(e);return r<t.length-1?t[r+1]:null}getColsLeftWidth(){return ic(this.leftCols)}getDisplayedColumnsRightWidth(){return ic(this.rightCols)}isColAtEdge(e,t){const r=this.allCols;if(!r.length)return!1;const i=t==="first";let n;if(vn(e)){const s=e.getDisplayedLeafColumns();if(!s.length)return!1;n=i?s[0]:si(s)}else n=e;return(i?r[0]:si(r))===n}};function Uh(e,t,r){if(e)for(let i=0;i<e.length;i++){const n=e[i];if(vn(n)){const s=t?n.getDisplayedChildren():n.getChildren();Uh(s,t,r)}r(n)}}function TS(e){const t=[];return Uh(e,!0,r=>{zu(r)&&t.push(r)}),t}var Oce=class extends ft{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return gc(null,t,r=>{Ts(r)&&e.push({groupId:r.getGroupId(),open:r.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const r=[];gc(null,t,i=>{if(Ts(i)){const n=i.getColGroupDef(),s={groupId:i.getGroupId(),open:n?n.openByDefault:void 0};r.push(s)}}),this.setColumnGroupState(r,e)}setColumnGroupState(e,t){const{colModel:r,colAnimation:i,visibleCols:n,eventSvc:s}=this.beans;if(!r.getColTree().length)return;i==null||i.start();const o=[];e.forEach(u=>{const d=u.groupId,p=u.open,v=this.getProvidedColGroup(d);v&&v.isExpanded()!==p&&(v.setExpanded(p),o.push(v))}),n.refresh(t,!0),o.length&&s.dispatchEvent({type:"columnGroupOpened",columnGroup:o.length===1?o[0]:void 0,columnGroups:o}),i==null||i.finish()}setColumnGroupOpened(e,t,r){let i;Ts(e)?i=e.getId():i=e||"",this.setColumnGroupState([{groupId:i,open:t}],r)}getProvidedColGroup(e){let t=null;return gc(null,this.beans.colModel.getColTree(),r=>{Ts(r)&&r.getId()===e&&(t=r)}),t}getGroupAtDirection(e,t){const r=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),n=t==="After"?si(i):i[0],s=`getCol${t}`;for(;;){const a=this.beans.visibleCols[s](n);if(!a)return null;const o=this.getColGroupAtLevel(a,r);if(o!==e)return o}}getColGroupAtLevel(e,t){let r=e.getParent(),i,n;for(;i=r.getProvidedColumnGroup().getLevel(),n=r.getPaddingLevel(),!(i+n<=t);)r=r.getParent();return r}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();Uh(e,!1,t=>{vn(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(vn(e))return e;const r=this.beans.visibleCols.getAllTrees(),i=typeof t=="number";let n=null;return Uh(r,!1,s=>{if(vn(s)){const a=s;let o;i?o=e===a.getGroupId()&&t===a.getPartId():o=e===a.getGroupId(),o&&(n=a)}}),n}createColumnGroups(e){const{columns:t,idCreator:r,pinned:i,oldDisplayedGroups:n,isStandaloneStructure:s}=e,a=this.mapOldGroupsById(n),o=[];let u=t;for(;u.length;){const d=u;u=[];let p=0;const v=y=>{const _=p;p=y;const P=d[_],M=(vn(P)?P.getProvidedColumnGroup():P).getOriginalParent();if(M==null){for(let k=_;k<y;k++)o.push(d[k]);return}const F=this.createColumnGroup(M,r,a,i,s);for(let k=_;k<y;k++)F.addChild(d[k]);u.push(F)};for(let y=1;y<d.length;y++){const _=d[y],R=(vn(_)?_.getProvidedColumnGroup():_).getOriginalParent(),M=d[p],k=(vn(M)?M.getProvidedColumnGroup():M).getOriginalParent();R!==k&&v(y)}p<d.length&&v(d.length)}return s||this.setupParentsIntoCols(o,null),o}createProvidedColumnGroup(e,t,r,i,n,s,a){const o=n.getUniqueKey(t.groupId||null,null),u=SD(this.beans,t,o),d=new hx(u,o,!1,r);this.createBean(d);const p=this.findExistingGroup(t,s);p&&s.splice(p.idx,1);const v=p==null?void 0:p.group;v&&d.setExpanded(v.isExpanded());const y=zB(this.beans,u.children,r+1,e,i,n,s,a);return d.setChildren(y),d}balanceColumnTree(e,t,r,i){const n=[];for(let s=0;s<e.length;s++){const a=e[s];if(Ts(a)){const o=a,u=this.balanceColumnTree(o.getChildren(),t+1,r,i);o.setChildren(u),n.push(o)}else{let o,u;for(let d=t;d<r;d++){const p=i.getUniqueKey(null,null),v=SD(this.beans,null,p),y=new hx(v,p,!0,d);this.createBean(y),u&&u.setChildren([y]),u=y,o||(o=u)}if(o&&u)if(n.push(o),e.some(p=>Ts(p))){u.setChildren([a]);continue}else{u.setChildren(e);break}n.push(a)}}return n}findDepth(e){let t=0,r=e;for(;r&&r[0]&&Ts(r[0]);)t++,r=r[0].getChildren();return t}findMaxDepth(e,t){let r=t;for(let i=0;i<e.length;i++){const n=e[i];if(Ts(n)){const s=n,a=this.findMaxDepth(s.getChildren(),t+1);r<a&&(r=a)}}return r}balanceTreeForAutoCols(e,t){const r=[];return e.forEach(i=>{let n=i;for(let s=t-1;s>=0;s--){const a=new hx(null,`FAKE_PATH_${i.getId()}}_${s}`,!0,s);this.createBean(a),a.setChildren([n]),n.originalParent=a,n=a}t===0&&(i.originalParent=null),r.push(n)}),r}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){const n=t[i];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:i,group:n}}}createColumnGroup(e,t,r,i,n){const s=e.getGroupId(),a=t.getInstanceIdForKey(s),o=g6(s,a);let u=r[o];return u&&u.getProvidedColumnGroup()!==e&&(u=null),Wt(u)?u.reset():(u=new Q0(e,s,a,i),n||this.createBean(u)),u}mapOldGroupsById(e){const t={},r=i=>{i.forEach(n=>{if(vn(n)){const s=n;t[n.getUniqueId()]=s,r(s.getChildren())}})};return e&&r(e),t}setupParentsIntoCols(e,t){e.forEach(r=>{if(r.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),r.parent=t,vn(r)){const i=r;this.setupParentsIntoCols(i.getChildren(),i)}})}},Nce={moduleName:"ColumnGroup",version:jt,dynamicBeans:{headerGroupCellCtrl:_ce},beans:[Oce],apiFunctions:{getAllDisplayedColumnGroups:Dce,getCenterDisplayedColumnGroups:Ace,getColumnGroup:Sce,getColumnGroupState:Tce,getDisplayNameForColumnGroup:Rce,getLeftDisplayedColumnGroups:Fce,getProvidedColumnGroup:Ece,getRightDisplayedColumnGroups:Ice,resetColumnGroupState:Mce,setColumnGroupOpened:bce,setColumnGroupState:Pce}},Bce={tag:"div",cls:"ag-skeleton-container"},zce=class extends Qi{constructor(){super(Bce)}init(t){const r=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",r),this.addDestroyFunc(()=>$0(t.eParentOfValue)),$0(t.eParentOfValue,r),t.deferRender?this.setupLoading(t):t.node.failedLoad?this.setupFailed():this.setupLoading(t)}setupFailed(){const t=this.getLocaleTextFunc();this.getGui().textContent=t("loadingError","ERR");const r=t("ariaSkeletonCellLoadingFailed","Row failed to load");Op(this.getGui(),r)}setupLoading(t){const r=eo({tag:"div",cls:"ag-skeleton-effect"}),i=t.node.rowIndex;if(i!=null){const a=75+25*(i%2===0?Math.sin(i):Math.cos(i));r.style.width=`${a}%`}this.getGui().appendChild(r);const n=this.getLocaleTextFunc(),s=t.deferRender?n("ariaDeferSkeletonCellLoading","Cell is loading"):n("ariaSkeletonCellLoading","Row data is loading");Op(this.getGui(),s)}refresh(t){return!1}},Gce={moduleName:"CheckboxCellRenderer",version:jt,userComponents:{agCheckboxCellRenderer:Bae}},Vce={moduleName:"SkeletonCellRenderer",version:jt,userComponents:{agSkeletonCellRenderer:zce}};function Hce(e,t){const r=e.colModel.getColDefCol(t);return r?r.getColDef():null}function Uce(e){return e.colModel.getColumnDefs()}function Wce(e,t,r){return e.colNames.getDisplayNameForColumn(t,r)||""}function jce(e,t){return e.colModel.getColDefCol(t)}function $ce(e){return e.colModel.getColDefCols()}function qce(e,t){return ja(e,t,"api")}function Kce(e){return AC(e)}function Zce(e){cne(e,"api")}function Xce(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function Yce(e){return e.visibleCols.isPinningLeft()}function Qce(e){return e.visibleCols.isPinningRight()}function Jce(e,t){return e.visibleCols.getColAfter(t)}function eue(e,t){return e.visibleCols.getColBefore(t)}function tue(e,t,r){e.colModel.setColsVisible(t,r,"api")}function rue(e,t,r){var i;(i=e.pinnedCols)==null||i.setColsPinned(t,r,"api")}function iue(e){return e.colModel.getCols()}function nue(e){return e.visibleCols.leftCols}function sue(e){return e.visibleCols.centerCols}function oue(e){return e.visibleCols.rightCols}function aue(e){return e.visibleCols.allCols}function lue(e){return e.colViewport.getViewportColumns()}function M2(e,t){if(!e)return;const r=e,i={};return Object.keys(r).forEach(n=>{if(t&&t.indexOf(n)>=0||vB.has(n))return;const s=r[n];typeof s=="object"&&s!==null&&s.constructor===Object?i[n]=M2(s):i[n]=s}),i}var cue=class extends ft{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,r,i){var o,u;const n=e.slice();t?n.sort((d,p)=>r.indexOf(d)-r.indexOf(p)):r&&n.sort((d,p)=>i.indexOf(d)-i.indexOf(p));const s=(o=this.rowGroupColsSvc)==null?void 0:o.columns,a=(u=this.pivotColsSvc)==null?void 0:u.columns;return this.buildColumnDefs(n,s,a)}buildColumnDefs(e,t=[],r=[]){const i=[],n={};return e.forEach(s=>{const a=this.createDefFromColumn(s,t,r);let o=!0,u=a,d=s.getOriginalParent(),p=null;for(;d;){let v=null;if(d.isPadding()){d=d.getOriginalParent();continue}const y=n[d.getGroupId()];if(y){y.children.push(u),o=!1;break}if(v=this.createDefFromGroup(d),v&&(v.children=[u],n[v.groupId]=v,u=v,d=d.getOriginalParent()),d!=null&&p===d){o=!1;break}p=d}o&&i.push(u)}),i}createDefFromGroup(e){const t=M2(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,r){const i=M2(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?r.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},uue=class extends ft{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const r=this.flexViewportWidth,{visibleCols:i,colDelayRenderSvc:n}=this.beans,s=i.centerCols;let a=-1;if(e.resizingCols){const R=new Set(e.resizingCols);for(let M=s.length-1;M>=0;M--)if(R.has(s[M])){a=M;break}}let o=!1;const u=s.map((R,M)=>{const F=R.getFlex(),k=F!=null&&F>0&&M>a;return o||(o=k),{col:R,isFlex:k,flex:Math.max(0,F??0),initialSize:R.getActualWidth(),min:R.getMinWidth(),max:R.getMaxWidth(),targetSize:0}});if(o&&(n==null||n.hideColumns("colFlex")),!r||!o)return[];let d=u.length,p=u.reduce((R,M)=>R+M.flex,0),v=r;const y=(R,M)=>{R.frozenSize=M,R.col.setActualWidth(M,t),v-=M,p-=R.flex,d-=1},_=R=>R.frozenSize!=null;for(const R of u)R.isFlex||y(R,R.initialSize);for(;d>0;){const R=Math.round(p<1?v*p:v);let M,F=0,k=0;for(const j of u){if(_(j))continue;M=j,k+=R*(j.flex/p);const ee=k-F,q=Math.round(ee);j.targetSize=q,F+=q}M&&(M.targetSize+=R-F);let N=0;for(const j of u){if(_(j))continue;const ee=j.targetSize,q=Math.min(Math.max(ee,j.min),j.max);N+=q-ee,j.violationType=q===ee?void 0:q<ee?"max":"min",j.targetSize=q}const G=N===0?"all":N>0?"min":"max";for(const j of u)_(j)||(G==="all"||j.violationType===G)&&y(j,j.targetSize)}e.skipSetLeft||i.setLeftValues(t),e.updateBodyWidths&&i.updateBodyWidths();const P=u.filter(R=>R.isFlex&&!R.violationType).map(R=>R.col);if(e.fireResizedEvent){const R=u.filter(F=>F.initialSize!==F.frozenSize).map(F=>F.col),M=u.filter(F=>F.flex).map(F=>F.col);Bp(this.eventSvc,R,!0,t,M)}return n==null||n.revealColumns("colFlex"),P}initCol(e){const{flex:t,initialFlex:r}=e.colDef;t!==void 0?e.flex=t:r!==void 0&&(e.flex=r)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}};function a0(e,t,r){if(!t||!e)return;if(!r)return e[t];const i=t.split(".");let n=e;for(let s=0;s<i.length;s++){if(n==null)return;n=n[i[s]]}return n}var hue=["dateTimeString","dateString","text","number","boolean","date"],due=class extends ft{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===st.SPACE}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:r}){return{cellEditorParams:{useFormatter:!0},comparator:(i,n)=>{const s=t.getColDefCol(r),a=s==null?void 0:s.getColDef();if(!s||!a)return 0;const o=i==null?"":e({column:s,node:null,value:i}),u=n==null?"":e({column:s,node:null,value:n});return o===u?0:o>u?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},r={},i=p=>v=>{const{column:y,node:_,value:P}=v;let R=y.getColDef().valueFormatter;return R===p.groupSafeValueFormatter&&(R=p.valueFormatter),this.beans.valueSvc.formatValue(y,_,P,R)};for(const p of Object.keys(e)){const v=e[p],y={...v,groupSafeValueFormatter:uk(v,this.gos)};t[p]=y,r[p]=i(y)}const n=this.gos.get("dataTypeDefinitions")??{},s={};for(const p of Object.keys(n)){const v=n[p],y=this.processDataTypeDefinition(v,n,[p],e);y&&(t[p]=y,v.dataTypeMatcher&&(s[p]=v.dataTypeMatcher),r[p]=i(y))}const{valueParser:a,valueFormatter:o}=e.object,{valueParser:u,valueFormatter:d}=t.object;this.hasObjectValueParser=u!==a,this.hasObjectValueFormatter=d!==o,this.formatValueFuncs=r,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(s,e)}sortKeysInMatchers(e,t){const r={...e};for(const i of hue)delete r[i],r[i]=e[i]??t[i].dataTypeMatcher;return r}processDataTypeDefinition(e,t,r,i){let n;const s=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let a=i[s];const o=t[s];if(a&&o&&(a=o),!ck(e,a,s))return;n=lk(a,e)}else{if(r.includes(s)){St(44);return}const a=t[s];if(!ck(e,a,s))return;const o=this.processDataTypeDefinition(a,t,[...r,s],i);if(!o)return;n=lk(o,e)}return{...n,groupSafeValueFormatter:uk(n,this.gos)}}updateColDefAndGetColumnType(e,t,r){let{cellDataType:i}=t;const{field:n}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(n,r):!1),!i){e.cellDataType=!1;return}const s=this.dataTypeDefinitions[i];if(!s){St(47,{cellDataType:i});return}return e.cellDataType=i,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,s,r),s.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const r=i=>{t.add(i.key)};e.__addEventListener("columnStateUpdated",r),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",r))}canInferCellDataType(e,t){const{gos:r}=this;if(!In(r))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(PS(t,i))return!1;const n=t.type===null?e.type:t.type;if(n){const s=r.get("columnTypes")??{};if(FC(n).some(o=>{const u=s[o.trim()];return u&&PS(u,i)}))return!1}return!PS(e,i)}inferCellDataType(e,t){if(!e)return;let r;const i=this.getInitialData();if(i){const s=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");r=a0(i,e,s)}else this.initWaitForRowData(t);return r==null?void 0:Object.keys(this.dataTypeMatchers).find(s=>this.dataTypeMatchers[s](r))??"object"}getInitialData(){var t;const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const r=(t=this.beans.rowModel.rootNode)==null?void 0:t.allLeafChildren;if(r!=null&&r.length)return r[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:r,eventSvc:i}=this.beans;t&&r&&(r.shouldQueueResizeOperations=!0);const[n]=this.addManagedEventListeners({rowDataUpdateStarted:s=>{const{firstRowData:a}=s;a&&(n==null||n(),this.isPendingInference=!1,this.processColumnsPendingInference(a,t),this.columnStateUpdatesPendingInference={},t&&(r==null||r.processResizeOperations()),i.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const r=[];this.destroyColumnStateUpdateListeners();const i={},n={};for(const s of Object.keys(this.columnStateUpdatesPendingInference)){const a=this.columnStateUpdatesPendingInference[s],o=this.colModel.getCol(s);if(!o)return;const u=o.getColDef();if(!this.resetColDefIntoCol(o,"cellDataTypeInferred"))return;const d=o.getColDef();if(t&&d.type&&d.type!==u.type){const p=pue(o,a);p.rowGroup&&p.rowGroupIndex==null&&(i[s]=p),p.pivot&&p.pivotIndex==null&&(n[s]=p),r.push(p)}}t&&r.push(...this.generateColumnStateForRowGroupAndPivotIndexes(i,n)),r.length&&ja(this.beans,{state:r},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const r={},{rowGroupColsSvc:i,pivotColsSvc:n}=this.beans;return i==null||i.restoreColumnOrder(r,e),n==null||n.restoreColumnOrder(r,t),Object.values(r)}resetColDefIntoCol(e,t){const r=e.getUserProvidedColDef();if(!r)return!1;const i=d2(this.beans,r,e.getColId());return e.setColDef(i,r,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var i;if(t==null)return!0;const r=(i=this.getDataTypeDefinition(e))==null?void 0:i.dataTypeMatcher;return r?r(t):!0}validateColDef(e){const t=r=>St(48,{property:r});if(e.cellDataType==="object"){const{object:r}=this.dataTypeDefinitions;e.valueFormatter===r.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===r.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){var a;const t=e.cellDataType;if(!t||typeof t!="string")return;const{dataTypeDefinitions:r,beans:i,formatValueFuncs:n}=this,s=r[t];s&&((a=i.colFilter)==null||a.setColDefPropsForDataType(e,s,n[t]))}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,r,i){const n=this.formatValueFuncs[t],s=this.columnDefinitionPropsPerDataType[r.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:r,colId:i,formatValue:n});Object.assign(e,s)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),r=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:i=>So(i.newValue&&String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):Ho(i.value,r)??"",dataTypeMatcher:i=>i instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:r=>So(r)??void 0,dateFormatter:r=>Ho(r??null,t)??void 0,valueParser:r=>dx(String(r.newValue))?r.newValue:null,valueFormatter:r=>dx(String(r.value))?String(r.value):"",dataTypeMatcher:r=>typeof r=="string"&&dx(r)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>{var r,i;return((i=(r=t.newValue)==null?void 0:r.trim)==null?void 0:i.call(r))===""?null:Number(t.newValue)},valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:s2(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>{var r,i;return t.newValue==null?t.newValue:((i=(r=t.newValue)==null?void 0:r.trim)==null?void 0:i.call(r))===""?null:String(t.newValue).toLowerCase()==="true"},valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t=="string"&&tse(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>s2(t.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function lk(e,t){const r={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(r.columnTypes=[...FC(e.columnTypes),...FC(t.columnTypes)]),r}function ck(e,t,r){return t?t.baseDataType!==e.baseDataType?(St(46),!1):!0:(St(45,{parentCellDataType:r}),!1)}function uk(e,t){if(e.valueFormatter)return r=>{var i,n;if((i=r.node)!=null&&i.group){const s=(r.colDef.pivotValueColumn??r.column).getAggFunc();if(s){if(s==="first"||s==="last")return e.valueFormatter(r);if(e.baseDataType==="number"&&s!=="count"){if(typeof r.value=="number")return e.valueFormatter(r);if(typeof r.value=="object"){if(!r.value)return;if("toNumber"in r.value)return e.valueFormatter({...r,value:r.value.toNumber()});if("value"in r.value)return e.valueFormatter({...r,value:r.value.value})}}return}}else if(t.get("groupHideOpenParents")&&r.column.isRowGroupActive()&&typeof r.value=="string"&&!((n=e.dataTypeMatcher)!=null&&n.call(e,r.value)))return;return e.valueFormatter(r)}}function fue(e,t,r,i){if(!t[r])return!1;const n=e[r];return n===null?(t[r]=!1,!1):i===void 0?!!n:n===i}function PS(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([r,i])=>fue(e,t,r,i))}function pue(e,t){const r=$B(e);return t.forEach(i=>{delete r[i],i==="rowGroup"?delete r.rowGroupIndex:i==="pivot"&&delete r.pivotIndex}),r}var gue={moduleName:"DataType",version:jt,beans:[due],dependsOn:[Gce]},mue={moduleName:"ColumnFlex",version:jt,beans:[uue]},K6={moduleName:"ColumnApi",version:jt,beans:[cue],apiFunctions:{getColumnDef:Hce,getDisplayNameForColumn:Wce,getColumn:jce,getColumns:$ce,applyColumnState:qce,getColumnState:Kce,resetColumnState:Zce,isPinning:Xce,isPinningLeft:Yce,isPinningRight:Qce,getDisplayedColAfter:Jce,getDisplayedColBefore:eue,setColumnsVisible:tue,setColumnsPinned:rue,getAllGridColumns:iue,getDisplayedLeftColumns:nue,getDisplayedCenterColumns:sue,getDisplayedRightColumns:oue,getAllDisplayedColumns:aue,getAllDisplayedVirtualColumns:lue,getColumnDefs:Uce}};function vue(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,r=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(r,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}var yue=class extends ft{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,r=!1){if(!e)return null;const i=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:n}=this.beans;return r&&n?n.getHeaderName(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,r){const i=t==null?void 0:t.getColGroupDef();return i?this.getHeaderName(i,null,e,t,r):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,r,i,n){var a;const s=e.headerValueGetter;if(s){const o=Cr(this.gos,{colDef:e,column:t,columnGroup:r,providedColumnGroup:i,location:n});return typeof s=="function"?s(o):typeof s=="string"?((a=this.beans.expressionSvc)==null?void 0:a.evaluate(s,o))??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return vue(e.field)}return""}},wue=class extends ft{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,r=!1){const{visibleCols:i}=this,n=i.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!n)){if(this.scrollWidth=e,this.scrollPosition=t,i.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const a=i.bodyWidth;this.viewportLeft=a-t-e,this.viewportRight=a-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(r)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let r;switch(e){case"left":r=this.rowsOfHeadersToRenderLeft[t];break;case"right":r=this.rowsOfHeadersToRenderRight[t];break;default:r=this.rowsOfHeadersToRenderCenter[t];break}return r??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||xue(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,r=t+e.getActualWidth(),i=this.viewportLeft-200,n=this.viewportRight+200,s=t<i&&r<i,a=t>n&&r>n;return!s&&!a}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=s=>{const a=s.getLeft();return Wt(a)&&a>this.viewportLeft},r=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,n=i.centerCols;return i.getColsForRow(e,n,r,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const r=i=>{const n=new Set,s={};for(const a of i){let o=a.getParent();const u=a.isSpanHeaderHeight();for(;o&&!n.has(o);){if(u&&o.isPadding()){o=o.getParent();continue}const p=o.getProvidedColumnGroup().getLevel();s[p]??(s[p]=[]),s[p].push(o),n.add(o),o=o.getParent()}}return s};this.rowsOfHeadersToRenderLeft=r(e),this.rowsOfHeadersToRenderRight=r(t),this.rowsOfHeadersToRenderCenter=r(this.headerColsWithinViewport)}extractViewport(){const e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),r=this.colsWithinViewportHash!==t;return r&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),r}};function xue(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var Cue=class extends ft{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class r{refresh(){return!1}getGui(){return this.eGui}init(n){const s=t(n),a=typeof s;if(a==="string"||a==="number"||a==="boolean"){this.eGui=zT("<span>"+s+"</span>");return}if(s==null){this.eGui=eo({tag:"span"});return}this.eGui=s}}return r}},_ue={moduleName:"CellRendererFunction",version:jt,beans:[Cue]},bue=class extends Jse{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:r,dynamicBeans:i,selectors:n}=e;if(r){const s=(a,o,u,d)=>{this.agGridDefaults[a]=o,(u||d)&&(this.agGridDefaultOverrides[a]={params:u,processParams:d})};for(const a of Object.keys(r)){let o=r[a];if(Xne(o)&&(o=o.getComp(this.beans)),typeof o=="object"){const{classImp:u,params:d,processParams:p}=o;s(a,u,d,p)}else s(a,o)}}if(this.registerDynamicBeans(i),n==null||n.forEach(s=>{this.selectors[s.selector]=s}),t)for(const s of Object.keys(t))this.icons[s]=t[s]}getUserComponent(e,t){var o;const r=(u,d,p,v)=>({componentFromFramework:d,component:u,params:p,processParams:v}),{frameworkOverrides:i}=this.beans,n=i.frameworkComponent(t,this.gos.get("components"));if(n!=null)return r(n,!0);const s=this.jsComps[t];if(s){const u=i.isFrameworkComponent(s);return r(s,u)}const a=this.agGridDefaults[t];if(a){const u=this.agGridDefaultOverrides[t];return r(a,!1,u==null?void 0:u.params,u==null?void 0:u.processParams)}return(o=this.beans.validation)==null||o.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){var r;return t?Ml(279,{name:e}):((r=this.beans.validation)==null?void 0:r.missingDynamicBean(e))??Ml(256)}},Sue=23,Eue=class extends ft{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t;this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(r=>r(this.params)),this.readyCallbacks.length=0)},((t=(e=this.beans.frameworkOverrides).runWhenReadyAsync)==null?void 0:t.call(e))??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===Sue&&e.every(t=>(t==null?void 0:t.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const r=this.readyCallbacks.indexOf(t);r>=0&&this.readyCallbacks.splice(r,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:r}=this.params;return[e,r,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},Z6=new Set,BC={},Wh={},vx,X6=!1,Y6=!1,Rue=!1;function Tue(e){const[t,r]=e.version.split(".")||[],[i,n]=vx.split(".")||[];return t===i&&r===n}function Pue(e){vx||(vx=e.version);const t=r=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${r} Please update all modules to the same version.`;if(e.version?Tue(e)||up(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${vx}.`)):up(t(`'${e.moduleName}' is incompatible.`)),e.validate){const r=e.validate();r.isValid||up(`${r.message}`)}}function ev(e,t,r=!1){r||(X6=!0),Pue(e);const i=e.rowModels??["all"];Z6.add(e);let n;t!==void 0?(Y6=!0,Wh[t]===void 0&&(Wh[t]={}),n=Wh[t]):n=BC,i.forEach(s=>{n[s]===void 0&&(n[s]={}),n[s][e.moduleName]=e}),e.dependsOn&&e.dependsOn.forEach(s=>ev(s,t,r))}function Mue(e){delete Wh[e]}function F2(e,t,r){const i=n=>{var s,a,o;return!!((s=BC[n])!=null&&s[e])||!!((o=(a=Wh[t])==null?void 0:a[n])!=null&&o[e])};return i(r)||i("all")}function dP(){return Y6}function Fue(e,t){const r=Wh[e]??{};return[...Object.values(BC.all??{}),...Object.values(r.all??{}),...Object.values(BC[t]??{}),...Object.values(r[t]??{})]}function Aue(){return new Set(Z6)}function Iue(e,t){const r=Wh[e]??{};return[...Object.values(r.all??{}),...Object.values(r[t]??{})]}function Due(){return X6}function kue(){return Rue}var Lue=class{static register(e){ev(e,void 0)}static registerModules(e){e.forEach(t=>ev(t,void 0))}},Oue='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',Nue={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:mo,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:oc,rangeSelectionBackgroundColor:vl(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:vl(.5),rangeHeaderHighlightColor:Ise(.08),rowNumbersSelectedColor:vl(.5),rowHoverColor:vl(.08),columnHoverColor:vl(.05),selectedRowBackgroundColor:vl(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:mo,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:sa(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:sa(.1),iconButtonActiveColor:oc,iconButtonActiveBackgroundColor:vl(.28),iconButtonActiveIndicatorColor:oc,menuBorder:{color:sa(.2)},menuBackgroundColor:da(.03),menuTextColor:da(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:sa(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:oc},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:sa(.2)},panelBackgroundColor:mo,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:sa(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:sa(.13)},selectCellBackgroundColor:sa(.07),selectCellBorder:{color:sa(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:mo,filterPanelApplyButtonBackgroundColor:oc,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Uf,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Uf,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:sa(.15),statusBarLabelColor:Uf,statusBarLabelFontWeight:500,statusBarValueColor:Uf,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"backgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"backgroundColor"},pinnedRowTextColor:{ref:"textColor"}},Bue=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",Q6={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},zue={...Q6,cellBatchEditTextColor:"#f3d0b3"},Gue=()=>Dl({feature:"batchEditStyle",params:Q6,css:Bue}),Vue=Gue(),Hue=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",Uue={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},Wue=()=>Dl({feature:"buttonStyle",params:{...Uue,buttonBackgroundColor:mo,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:oc}},css:Hue}),jue=Wue(),$ue=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",que=()=>Dl({feature:"columnDropStyle",css:$ue}),J6=que(),Kue={warn:(...e)=>{St(e[0],e[1])},error:(...e)=>{ai(e[0],e[1])},preInitErr:(...e)=>{Lm(e[0],e[2],e[1])}},Zue=()=>Use(Kue).withParams(Nue).withPart(jue).withPart(J6).withPart(Vue),Xue='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',Yue=()=>Dl({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:mo,checkboxUncheckedBorderColor:da(.3),checkboxCheckedBackgroundColor:oc,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:mo,checkboxIndeterminateBackgroundColor:da(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:mo,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:Xue}),Que=Yue(),e8=()=>({...kC,...zue,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:da(.05),rowHoverColor:vl(.15),selectedRowBackgroundColor:vl(.2),menuBackgroundColor:da(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Uf,findMatchColor:mo,findActiveMatchColor:mo,checkboxUncheckedBorderColor:da(.4),toggleButtonOffBackgroundColor:da(.4),rowBatchEditBackgroundColor:da(.1)}),Jue=()=>({...e8(),backgroundColor:"#1f2836"}),ehe=()=>Dl({feature:"colorScheme",params:kC,modeParams:{light:kC,dark:e8(),"dark-blue":Jue()}}),the=ehe(),t8={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},r8={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},rhe=(e={})=>{let t="";for(const r of[...Object.keys(t8),...Object.keys(r8)]){const i=ihe(r,e.strokeWidth);t+=`.ag-icon-${r}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return t},ihe=(e,t=1.5)=>{const r=r8[e];if(r)return r;const i=t8[e];if(!i)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+i+"</svg>"},nhe=(e={})=>Dl({feature:"iconSet",css:()=>rhe(e)}),she=nhe(),ohe=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',ahe=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",lhe={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},che=()=>Dl({feature:"inputStyle",params:{...lhe,inputBackgroundColor:mo,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:oc},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:da(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>ohe+ahe}),uhe=che(),hhe='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',dhe={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},fhe=()=>Dl({feature:"tabStyle",params:{...dhe,tabBarBorder:!0,tabBarBackgroundColor:sa(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:mo},css:hhe}),phe=fhe(),ghe=()=>Zue().withPart(Que).withPart(the).withPart(she).withPart(phe).withPart(uhe).withPart(J6).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),mhe=ghe(),vhe={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},yhe={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},whe={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},hk={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},dk={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},fk={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},MS={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},pk={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};function xhe(e,t){t.sort((r,i)=>r.moduleName.localeCompare(i.moduleName)).forEach(r=>{const i=r.css;i&&e.set(`module-${r.moduleName}`,i)})}var Che=class extends Qse{constructor(){super(...arguments),this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1}initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(hk),this.getSizeEl(dk),this.getSizeEl(fk),this.getSizeEl(MS),this.getSizeEl(pk),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(pk)}getRowBorderWidth(){return this.getCSSVariablePixelValue(MS)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(hk)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(dk)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(vhe)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(yhe),r=this.getCSSVariablePixelValue(whe);return e-1+r*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(fk)}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),r=this.gos.get("rowHeight");if(r==null||isNaN(r)||!isFinite(r))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const i=`${r}px`;return t!=i?(e.style.setProperty("--ag-line-height",i),r):t!=""?parseFloat(t):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const r=this.measureSizeEl(e);return r==="detached"||r==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,r),r)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const r=t.offsetWidth;return r===FS?"no-styles":(this.sizesMeasured=!0,r)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=eo({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const r=this.getMeasurementContainer();t=eo({tag:"div"});const{border:i,noWarn:n}=e;i?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${FS}px)`)):t.style.width=`var(${e.cssName}, ${FS}px)`,r.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);s==="no-styles"&&!n&&St(9,{variable:e});const a=Mc(this.beans,t,()=>{const o=this.measureSizeEl(e);o==="detached"||o==="no-styles"||(this.lastKnownValues.set(e,o),o!==s&&(s=o,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>a()),t}fireStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(MS);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&ai(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",[Oue]),xhe(e,Array.from(Aue())),e}getDefaultTheme(){return mhe}themeError(e){ai(240,{theme:e})}},FS=15538,_he=class extends eoe{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function i8(e,t,r){const i=e.visibleCols.headerGroupRowCount;if(r>=i)return{column:t,headerRowIndex:r};let n=t.getParent();for(;n&&n.getProvidedColumnGroup().getLevel()>r;)n=n.getParent();const s=t.isSpanHeaderHeight();return!n||s&&n.isPadding()?{column:t,headerRowIndex:i}:{column:n,headerRowIndex:n.getProvidedColumnGroup().getLevel()}}var bhe=class extends ft{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,r=>{this.gridBodyCon=r.gridBodyCtrl});const t=ss(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let r;const{colModel:i,colGroupSvc:n,ctrlsSvc:s}=this.beans;if(typeof e=="string"?(r=i.getCol(e),r||(r=(n==null?void 0:n.getColumnGroup(e))??null)):r=e,!r)return null;const a=s.getHeaderRowContainerCtrl(),o=a==null?void 0:a.getAllCtrls(),u=si(o||[]).type==="filter",d=bl(this.beans)-1;let p=-1,v=r;for(;v;)p++,v=v.getParent();let y=p;return t&&u&&y===d-1&&y++,y===-1?null:{headerRowIndex:y,column:r}}navigateVertically(e,t){const{focusSvc:r,visibleCols:i}=this.beans,{focusedHeader:n}=r;if(!n)return!1;const{headerRowIndex:s}=n,a=n.column,o=bl(this.beans),u=this.getHeaderRowType(s),d=i.headerGroupRowCount;let{headerRowIndex:p,column:v,headerRowIndexWithoutSpan:y}=e==="UP"?She(u,a,s):Ehe(a,s,d),_=!1;return p<0&&(p=0,v=a,_=!0),p>=o?(p=-1,this.currentHeaderRowWithoutSpan=-1):y!==void 0&&(this.currentHeaderRowWithoutSpan=y),!_&&!v?!1:r.focusHeaderPosition({headerPosition:{headerRowIndex:p,column:v},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,r){const{focusSvc:i,gos:n}=this.beans,s={...i.focusedHeader};let a,o;this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,e==="LEFT"!==n.get("enableRtl")?(o="Before",a=this.findHeader(s,o)):(o="After",a=this.findHeader(s,o));const u=n.getCallback("tabToNextHeader");if(t&&u){const d=i.focusHeaderPositionFromUserFunc({userFunc:u,headerPosition:a,direction:o});if(d){const{headerRowIndex:p}=i.focusedHeader||{};p!=null&&p!=s.headerRowIndex&&(this.currentHeaderRowWithoutSpan=p)}return d}return a||!t?i.focusHeaderPosition({headerPosition:a,direction:o,fromTab:t,allowUserOverride:!0,event:r}):this.focusNextHeaderRow(s,o,r)}focusNextHeaderRow(e,t,r){const i=this.beans,n=e.headerRowIndex;let s=null,a;const o=bl(i),u=this.beans.visibleCols.allCols;if(t==="Before"){if(n<=0)return!1;s=si(u),a=n-1,this.currentHeaderRowWithoutSpan-=1}else s=u[0],a=n+1,this.currentHeaderRowWithoutSpan<o?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:d,headerRowIndex:p}=i8(this.beans,s,a);return p>=o&&(p=-1),i.focusSvc.focusHeaderPosition({headerPosition:{column:d,headerRowIndex:p},direction:t,fromTab:!0,allowUserOverride:!0,event:r})}scrollToColumn(e,t="After"){if(e.getPinned())return;let r;if(vn(e)){const i=e.getDisplayedLeafColumns();r=t==="Before"?si(i):i[0]}else r=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(r)}findHeader(e,t){const{colGroupSvc:r,visibleCols:i}=this.beans;let n=e.column;if(n instanceof Q0){const u=n.getDisplayedLeafColumns();n=t==="Before"?u[0]:u[u.length-1]}const s=t==="Before"?i.getColBefore(n):i.getColAfter(n);if(!s)return;const a=i.headerGroupRowCount;if(e.headerRowIndex>=a)return{headerRowIndex:e.headerRowIndex,column:s};const o=r==null?void 0:r.getColGroupAtLevel(s,e.headerRowIndex);return o?o.isPadding()&&s.isSpanHeaderHeight()?{headerRowIndex:i.headerGroupRowCount,column:s}:{headerRowIndex:e.headerRowIndex,column:o??s}:{headerRowIndex:s instanceof bd&&s.isSpanHeaderHeight()?i.headerGroupRowCount:e.headerRowIndex,column:s}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function She(e,t,r){const i=r-1;if(e!=="filter"){const n=t instanceof bd&&t.isSpanHeaderHeight();let s=t.getParent();for(;s&&(s.getProvidedColumnGroup().getLevel()>i||n&&s.isPadding());)s=s.getParent();if(s)return n?{column:s,headerRowIndex:s.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:i}:{column:s,headerRowIndex:i,headerRowIndexWithoutSpan:i}}return{column:t,headerRowIndex:i,headerRowIndexWithoutSpan:i}}function Ehe(e,t,r){const i=t+1,n={column:e,headerRowIndex:i,headerRowIndexWithoutSpan:i};if(e instanceof Q0){if(i>=r)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:r,headerRowIndexWithoutSpan:i};let a=e.getDisplayedChildren()[0];if(a instanceof Q0&&a.isPadding()){const u=a.getDisplayedLeafColumns()[0];u.isSpanHeaderHeight()&&(a=u)}n.column=a,a instanceof bd&&a.isSpanHeaderHeight()&&(n.headerRowIndex=r,n.headerRowIndexWithoutSpan=i)}return n}var Rhe=class extends ft{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(sse(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(Yi(this.beans),D6)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=Yi(this.beans);return this.isDomDataPresentInHierarchy(e,LC)?!0:this.isDomDataPresentInHierarchy(e,OC)}isDomDataPresentInHierarchy(e,t){let r=e;for(;r;){if(RB(this.gos,r,t))return!0;r=r.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:r,column:i}=e,n={rowIndex:t,rowPinned:r,column:i,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:r});return s&&(n.isFullWidthCell=s.isFullWidth()),n}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:r,rowPinned:i,forceBrowserFocus:n=!1,preventScrollOnBrowserFocus:s=!1,sourceEvent:a}=e,o=this.colModel.getCol(t);if(!o){this.focusedCell=null;return}this.focusedCell={rowIndex:r,rowPinned:pc(i),column:o};const u=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...u,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:n,preventScrollOnBrowserFocus:s,sourceEvent:a}),this.previousCellFocusParams=u}isCellFocused(e){return this.focusedCell==null?!1:V6(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:r,pinned:i}}=e,{column:n,headerRowIndex:s}=this.focusedHeader;return t===n&&r===s&&i==n.getPinned()}focusHeaderPosition(e){var u;if(this.setFocusRecovered(),Hh(this.beans))return!1;const{direction:t,fromTab:r,allowUserOverride:i,event:n,fromCell:s,rowWithoutSpanValue:a}=e;let{headerPosition:o}=e;if(s&&((u=this.filterManager)!=null&&u.isAdvFilterHeaderActive()))return this.focusAdvancedFilter(o);if(i){const d=this.focusedHeader,p=bl(this.beans);if(r){const v=this.gos.getCallback("tabToNextHeader");v&&(o=this.getHeaderPositionFromUserFunc({userFunc:v,direction:t,currentPosition:d,headerPosition:o,headerRowCount:p}))}else{const v=this.gos.getCallback("navigateToNextHeader");if(v&&n){const y={key:n.key,previousHeaderPosition:d,nextHeaderPosition:o,headerRowCount:p,event:n};o=v(y)}}}return o?this.focusProvidedHeaderPosition({headerPosition:o,direction:t,event:n,fromCell:s,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(e){if(Hh(this.beans))return!1;const{userFunc:t,headerPosition:r,direction:i,event:n}=e,s=this.focusedHeader,a=bl(this.beans),o=this.getHeaderPositionFromUserFunc({userFunc:t,direction:i,currentPosition:s,headerPosition:r,headerRowCount:a});return!!o&&this.focusProvidedHeaderPosition({headerPosition:o,direction:i,event:n})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:r,currentPosition:i,headerPosition:n,headerRowCount:s}=e,o=t({backwards:r==="Before",previousHeaderPosition:i,nextHeaderPosition:n,headerRowCount:s});return o===!0?i:o===!1?null:o}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:r,fromCell:i,rowWithoutSpanValue:n,event:s}=e,{column:a,headerRowIndex:o}=t,{filterManager:u,ctrlsSvc:d,headerNavigation:p}=this.beans;if(o===-1)return u!=null&&u.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:s});p==null||p.scrollToColumn(a,r);const v=d.getHeaderRowContainerCtrl(a.getPinned()),y=(v==null?void 0:v.focusHeader(t.headerRowIndex,a,s))||!1;return p&&y&&(n!=null||i)&&(p.currentHeaderRowWithoutSpan=n??-1),y}focusFirstHeader(){var r;if((r=this.overlays)!=null&&r.isExclusive()&&this.focusOverlay())return!0;const e=this.visibleCols.allCols[0];if(!e)return!1;const t=i8(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){var i;if((i=this.overlays)!=null&&i.isExclusive()&&this.focusOverlay(!0))return!0;const t=bl(this.beans)-1,r=si(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:r},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return(t=this.filterManager)!=null&&t.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===pc(t)}focusOverlay(e){var r,i;const t=((r=this.overlays)==null?void 0:r.isVisible())&&((i=this.overlays.eWrapper)==null?void 0:i.getGui());return!!t&&od(t,e)}focusGridView(e){var s,a,o,u,d,p;const{backwards:t=!1,canFocusOverlay:r=!0,event:i}=e;if((s=this.overlays)!=null&&s.isExclusive())return r&&this.focusOverlay(t);if(W1(this.beans))return t&&!Hh(this.beans)?this.focusLastHeader():r&&this.focusOverlay(t)?!0:t?!1:Gp(this.beans,t);const n=t?Ile(this.beans):Ale(this.beans);if(n){const v=e.column??((a=this.focusedHeader)==null?void 0:a.column),{rowIndex:y,rowPinned:_}=n,P=Ec(this.beans,n);if(!v||!P||y==null)return!1;if(v.isSuppressNavigable(P)){const R=this.gos.get("enableRtl");let M;return!i||i.key===st.TAB?M=R?st.LEFT:st.RIGHT:M=i.key,(o=this.beans.navigation)==null||o.navigateToNextCell(null,M,{rowIndex:y,column:v,rowPinned:_||null},!0),!0}if((u=this.navigation)==null||u.ensureCellVisible({rowIndex:y,column:v,rowPinned:_}),t){const R=this.rowRenderer.getRowByPosition(n);if(R!=null&&R.isFullWidth()&&((d=this.navigation)!=null&&d.tryToFocusFullWidthRow(n,t)))return!0}return this.setFocusedCell({rowIndex:y,column:v,rowPinned:pc(_),forceBrowserFocus:!0}),(p=this.beans.rangeSvc)==null||p.setRangeToCell({rowIndex:y,rowPinned:_,column:v}),!0}return!!(r&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){var t;return this.advFilterFocusColumn=e==null?void 0:e.column,((t=this.beans.advancedFilter)==null?void 0:t.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(e,t){var i;const r=(t?void 0:this.advFilterFocusColumn)??((i=this.visibleCols.allCols)==null?void 0:i[0]);return e?this.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:bl(this.beans)-1}}):this.focusGridView({column:r})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},The=class extends ft{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=this.gos.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=this.gos.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e!=null&&e.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var r;const e=this.ctrlsSvc.get("center");if(!e||(r=this.colAnimation)!=null&&r.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),r=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==r)&&(this.horizontalScrollGap=t,this.verticalScrollGap=r,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),r=typeof e=="number"&&e>=0?e:Qne();r!=null&&(this.scrollbarWidth=r,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},Phe=class extends ft{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var i;if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:r}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:(e==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(i=t.get("gridCtrl"))==null||i.destroyGridUi(),r.destroy(),super.destroy()}},yx=new Set(["gridPreDestroyed","fillStart","pasteStart"]),Mhe=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],fP=Mhe.reduce((e,t)=>(e[t]=Hie(t),e),{}),Sm=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),Fhe={tag:"span",cls:"ag-sort-indicator-container",children:[Sm("Order","order"),Sm("Asc","ascending-icon"),Sm("Desc","descending-icon"),Sm("Mixed","mixed-icon"),Sm("None","none-icon")]},pP=class extends Qi{constructor(e){super(),this.eSortOrder=fr,this.eSortAsc=fr,this.eSortDesc=fr,this.eSortMixed=fr,this.eSortNone=fr,e||this.setTemplate(Fhe)}attachCustomElements(e,t,r,i,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=r,this.eSortMixed=i,this.eSortNone=n}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const r=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",r),this.addManagedEventListeners({newColumnsLoaded:r,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,r){if(t==null)return;const i=pa(e,this.beans,r);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:r,column:i,gos:n,beans:s}=this,a=s.sortSvc.getDisplaySortForColumn(i);if(e&&qi(e,a==="asc",{skipAriaHidden:!0}),t&&qi(t,a==="desc",{skipAriaHidden:!0}),r){const o=!i.getColDef().unSortIcon&&!n.get("unSortIcon"),u=a==null;qi(r,!o&&u,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:r}=this;this.addInIcon("sortUnSort",e,t);const i=t.getColDef().showRowGroup;wl(r)&&i&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:r}=this;if(e){const i=t.sortSvc.getDisplaySortForColumn(r)==="mixed";qi(e,i,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:r}}=this;if(!e)return;const i=r.getColumnsWithSortingOrdered(),n=r.getDisplaySortIndexForColumn(t)??-1,s=i.some(o=>r.getDisplaySortIndexForColumn(o)??!1),a=n>=0&&s;qi(e,a,{skipAriaHidden:!0}),n>=0?e.textContent=(n+1).toString():bo(e)}},Ahe={selector:"AG-SORT-INDICATOR",component:pP},tv=["asc","desc",null],Ihe=class extends ft{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,r){const i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,r)}progressSortFromEvent(e,t){const i=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,r,i){var p;t!=="asc"&&t!=="desc"&&(t=null);const{gos:n,showRowGroupCols:s}=this.beans,a=wl(n);let o=[e];if(a&&e.getColDef().showRowGroup){const v=(p=s==null?void 0:s.getSourceColumnsForGroupColumn)==null?void 0:p.call(s,e),y=v==null?void 0:v.filter(_=>_.isSortable());y&&(o=[e,...y])}o.forEach(v=>this.setColSort(v,t,i));const u=(r||n.get("alwaysMultiSort"))&&!n.get("suppressMultiSort"),d=[];if(!u){const v=this.clearSortBarTheseColumns(o,i);d.push(...v)}this.updateSortIndex(e),d.push(...o),this.dispatchSortChangedEvents(i,d)}updateSortIndex(e){const{gos:t,colModel:r,showRowGroupCols:i}=this.beans,n=wl(t),s=i==null?void 0:i.getShowRowGroupCol(e.getId()),a=n&&s||e,o=this.getColumnsWithSortingOrdered();r.forAllCols(p=>this.setColSortIndex(p,null));const u=o.filter(p=>n&&p.getColDef().showRowGroup?!1:p!==a);(a.getSort()?[...u,a]:u).forEach((p,v)=>this.setColSortIndex(p,v))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){const r={type:"sortChanged",source:e};t&&(r.columns=t),this.eventSvc.dispatchEvent(r)}clearSortBarTheseColumns(e,t){const r=[];return this.beans.colModel.forAllCols(i=>{e.includes(i)||(i.getSort()&&r.push(i),this.setColSort(i,void 0,t))}),r}getNextSortDirection(e){const t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??tv,r=t.indexOf(e.getSort()),i=r<0,n=r==t.length-1;return i||n?t[0]:t[r+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:r,rowGroupColsSvc:i}=this.beans;let n=[];if(t.forAllCols(d=>{d.getSort()&&n.push(d)}),t.isPivotMode()){const d=wl(e);n=n.filter(p=>{const v=!!p.getAggFunc(),y=!p.isPrimary(),_=d?r==null?void 0:r.getShowRowGroupCol(p.getId()):p.getColDef().showRowGroup;return v||y||_})}const s=(i==null?void 0:i.columns.filter(d=>!!d.getSort()))??[],a={};n.forEach((d,p)=>a[d.getId()]=p),n.sort((d,p)=>{const v=d.getSortIndex(),y=p.getSortIndex();if(v!=null&&y!=null)return v-y;if(v==null&&y==null){const _=a[d.getId()],P=a[p.getId()];return _>P?1:-1}else return y==null?-1:1});const o=wl(e)&&!!s.length;o&&(n=[...new Set(n.map(d=>(r==null?void 0:r.getShowRowGroupCol(d.getId()))??d))]);const u=new Map;return n.forEach((d,p)=>u.set(d,p)),o&&s.forEach(d=>{const p=r.getShowRowGroupCol(d.getId());u.set(d,u.get(p))}),u}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=wl(this.gos),r=!!e.getColDef().showRowGroup;return t&&r}getDisplaySortForColumn(e){var a;const t=(a=this.beans.showRowGroupCols)==null?void 0:a.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,n=i[0].getSort();return i.every(o=>o.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,r){let i=0;e.addManagedListeners(t,{movingChanged:()=>{i=Date.now()}}),r&&e.addManagedElementListeners(r,{click:s=>{const a=t.isMoving(),u=Date.now()-i<50;a||u||this.progressSortFromEvent(t,s)}});const n=()=>{var a;const s=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc",s==="asc"),e.toggleCss("ag-header-cell-sorted-desc",s==="desc"),e.toggleCss("ag-header-cell-sorted-none",!s),t.getColDef().showRowGroup){const o=(a=this.beans.showRowGroupCols)==null?void 0:a.getSourceColumnsForGroupColumn(t),d=!(o==null?void 0:o.every(p=>t.getSort()==p.getSort()));e.toggleCss("ag-header-cell-sorted-mixed",d)}};e.addManagedEventListeners({sortChanged:n,columnRowGroupChanged:n})}initCol(e){const{sort:t,initialSort:r,sortIndex:i,initialSortIndex:n}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(r==="asc"||r==="desc")&&(e.sort=r),i!==void 0?i!==null&&(e.sortIndex=i):n!==null&&(e.sortIndex=n)}updateColSort(e,t,r){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,r):this.setColSort(e,void 0,r))}setColSort(e,t,r){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",r)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new pP(e)}getSortIndicatorSelector(){return Ahe}},yp={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"},Dhe=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}}),khe={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?yp[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:yp[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?yp[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{var r;const t=["columnsMenuTab","generalMenuTab"];return(r=e.menuTabs)!=null&&r.some(i=>t.includes(i))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",spanRows:"CellSpan",rowGroupingHierarchy:"SharedRowGrouping"},Lhe=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:r})=>r?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,r)=>r.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:r})=>r==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:r})=>r==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:r})=>r==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const r=t.headerValueGetter;return typeof r=="function"||typeof r=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return Ml(262);if(t.smallLeft)return Ml(263);if(t.smallRight)return Ml(264)}return null}},sortingOrder:{validate:t=>{const r=t.sortingOrder;if(Array.isArray(r)&&r.length>0){const i=r.filter(n=>!tv.includes(n));if(i.length>0)return`sortingOrder must be an array with elements from [${tv.map(SC).join()}], currently it includes [${i.map(SC).join()}]`}else if(!Array.isArray(r)||r.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${r}`;return null}},type:{validate:t=>{const r=t.type;return r instanceof Array?r.some(n=>typeof n!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof r=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:r})=>r?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:r,cellSelection:i,suppressRowTransform:n,enableCellSpan:s,rowDragEntireRow:a,enableCellTextSelection:o})=>typeof r=="object"&&(r==null?void 0:r.mode)==="singleRow"&&r!=null&&r.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":i?"colDef.spanRows is not supported with cellSelection.":n?"colDef.spanRows is not supported with suppressRowTransform.":s?a?"colDef.spanRows is not supported with rowDragEntireRow.":o?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."},rowGroupingHierarchy:{validate(t,{groupHierarchyConfig:r={}},i){var a;const n=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),s=[];if((a=t.rowGroupingHierarchy)==null||a.forEach(o=>{var u;if(typeof o=="object")return(u=i.validation)==null||u.validateColDef(o),null;!n.has(o)&&!(o in r)&&s.push(o)}),s.length>0){const o=`The following parts of colDef.rowGroupingHierarchy are not recognised: ${s.map(d=>`"${d}"`).join(", ")}.`,u=`Choose one of ${[...n].map(d=>`"${d}"`).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${o}
${u}`}return null}}}),Ohe={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0},Nhe=()=>Object.keys(Ohe),Bhe=()=>({objectName:"colDef",allProperties:Nhe(),docsUrl:"column-properties/",deprecations:Dhe(),validations:Lhe()}),zhe=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],Ghe=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],Vhe=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],n8=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],Hhe=["theme","rowSelection"],Uhe=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],s8=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows"],Whe=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],jhe=()=>[...Vhe,...Ghe,...zhe,...n8,...Whe,...s8,...Uhe,...Hhe],$he=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function dl(e,t,r){return typeof t=="number"||t==null?t==null||t>=r?null:`${e}: value should be greater than or equal to ${r}`:`${e}: value should be a number`}var qhe={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"SharedRowGrouping",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},Khe=()=>{const e={autoSizePadding:{validate({autoSizePadding:r}){return dl("autoSizePadding",r,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:r}){return dl("cacheBlockSize",r,1)}},cacheOverflowSize:{validate({cacheOverflowSize:r}){return dl("cacheOverflowSize",r,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:r=>{const i=r.domLayout,n=["autoHeight","normal","print"];return i&&!n.includes(i)?`domLayout must be one of [${n.join()}], currently it's ${i}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:r,pinnedTopRowData:i,pinnedBottomRowData:n}){return r&&(i||n)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:r,isRowPinnable:i,pinnedTopRowData:n,pinnedBottomRowData:s}){return i&&(n||s)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!r&&i?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:r,isRowPinned:i,pinnedTopRowData:n,pinnedBottomRowData:s}){return i&&(n||s)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!r&&i?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:r={}},i,n){var s;for(const a of Object.keys(r))(s=n.validation)==null||s.validateColDef(r[a]);return null}},icons:{validate:({icons:r})=>{if(r){if(r.smallDown)return Ml(262);if(r.smallLeft)return Ml(263);if(r.smallRight)return Ml(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:r}){return dl("infiniteInitialRowCount",r,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:r=>{if(typeof r.ssrmExpandAllAffectsAllRows=="boolean"){if(r.rowModelType!=="serverSide")return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(r.ssrmExpandAllAffectsAllRows&&typeof r.getRowId!="function")return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate({keepDetailRowsCount:r}){return dl("keepDetailRowsCount",r,1)}},paginationPageSize:{validate({paginationPageSize:r}){return dl("paginationPageSize",r,1)}},paginationPageSizeSelector:{validate:r=>{const i=r.paginationPageSizeSelector;return typeof i=="boolean"||i==null||i.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:r}){return dl("rowBuffer",r,0)}},rowClass:{validate:r=>typeof r.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:r}){return r&&typeof r=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':r&&typeof r!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":r&&r.mode!=="multiRow"&&r.mode!=="singleRow"?`Selection mode "${r.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:r=>{const i=r.rowStyle;return i&&typeof i=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:r}){return dl("serverSideInitialRowCount",r,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:r=>{const i=r.sortingOrder;if(Array.isArray(i)&&i.length>0){const n=i.filter(s=>!tv.includes(s));if(n.length>0)return`sortingOrder must be an array with elements from [${tv.map(SC).join()}], currently it includes [${n.map(SC).join()}]`}else if(!Array.isArray(i)||i.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},tooltipHideDelay:{validate:r=>r.tooltipHideDelay&&r.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:r=>r.tooltipShowDelay&&r.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:r=>{const i=r.rowModelType??"clientSide";switch(i){case"clientSide":{const{treeDataChildrenField:n,treeDataParentIdField:s,getDataPath:a,getRowId:o}=r;if(!n&&!s&&!a)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(n){if(a)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(s)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(s){if(!o)return"getRowId callback not provided, tree data with parent id cannot be built.";if(a)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return r.isServerSideGroup&&r.getServerSideGroupKey?null:n}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:r}){return dl("viewportRowModelBufferSize",r,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:r}){return dl("viewportRowModelPageSize",r,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:r,showOpenedGroup:i}){return r!=null&&r.field&&i?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":r!=null&&r.valueGetter&&i?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:r=>{const i=r.renderingMode,n=["default","legacy"];return i&&!n.includes(i)?`renderingMode must be one of [${n.join()}], currently it's ${i}`:null}}},t={};return s8.forEach(r=>{t[r]={expectedType:"boolean"}}),n8.forEach(r=>{t[r]={expectedType:"number"}}),Js(t,e),t},Zhe=()=>({objectName:"gridOptions",allProperties:[...jhe(),...Object.values(fP)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:$he(),validations:Khe()}),Xhe=0,Yhe=0,gk="__ag_grid_instance",Qhe=class extends ft{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=Yhe++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new rd,this.globalEventHandlerFactory=e=>(t,r)=>{if(!this.isAlive())return;const i=yx.has(t);if(i&&!e||!i&&e||!Jhe(t))return;const n=(s,a)=>{const o=fP[s],u=this.gridOptions[o];typeof u=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>u(a))};if(this.gridReadyFired)n(t,r);else if(t==="gridReady"){n(t,r),this.gridReadyFired=!0;for(const s of this.queueEvents)n(s.eventName,s.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:r})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??wB[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Wt(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(r=>e(this.addCommon(r)))}updateGridOptions({options:e,force:t,source:r="api"}){const i={id:Xhe++,properties:[]},n=[],{gridOptions:s,validation:a}=this;for(const o of Object.keys(e)){const u=e[o];a==null||a.warnOnInitialPropertyUpdate(r,o);const d=t||typeof u=="object"&&r==="api",p=s[o];if(d||p!==u){s[o]=u;const v={type:o,currentValue:u,previousValue:p,changeSet:i,source:r};n.push(v)}}this.validateGridOptions(this.gridOptions),i.properties=n.map(o=>o.type),n.forEach(o=>{nd(this,`Updated property ${o.type} from`,o.previousValue," to ",o.currentValue),this.propEventSvc.dispatchEvent(o)})}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const r of Object.keys(e)){const i=e[r];if(i==null||i===!1)continue;let n=t[r];typeof n=="function"&&(n=n(e,this.gridOptions,this.beans)),n&&this.assertModuleRegistered(n,r)}}validateGridOptions(e){var t;this.validateOptions(e,qhe),(t=this.validation)==null||t.processGridOptions(e)}validateColDef(e,t,r){var i,n;(r||!((i=this.beans.dataTypeSvc)!=null&&i.isColPendingInference(t)))&&(this.validateOptions(e,khe),(n=this.validation)==null||n.validateColDef(e))}assertModuleRegistered(e,t){const r=Array.isArray(e)?e.some(i=>this.isModuleRegistered(i)):this.isModuleRegistered(e);return r||ai(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),r}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:dP(),rowModelType:this.get("rowModelType"),isUmd:kue()}}isModuleRegistered(e){return F2(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[gk]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const r=t[gk];if(Wt(r))return r===this.instanceId;t=t.parentElement}return!1}};function Jhe(e){return!!fP[e]}function o8(e){const t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var ede=o8(!0),tde=o8(!1),rde=class extends Qi{constructor(){super(...arguments),this.eFilter=fr,this.eFilterButton=fr,this.eSortIndicator=fr,this.eMenu=fr,this.eLabel=fr,this.eText=fr,this.eSortOrder=fr,this.eSortAsc=fr,this.eSortDesc=fr,this.eSortMixed=fr,this.eSortNone=fr,this.isLoadingInnerComponent=!1}refresh(e){var r,i,n;const t=this.params;if(this.params=e,this.workOutTemplate(e,!!((r=this.beans)!=null&&r.sortSvc))!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const s={...e};Js(s,e.innerHeaderComponentParams),(n=(i=this.innerHeaderComponent).refresh)==null||n.call(i,s)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const r=e.template;return r?r!=null&&r.trim?r.trim():r:t?ede:tde}init(e){this.params=e;const{sortSvc:t,touchSvc:r,rowNumbersSvc:i,userCompFactory:n}=this.beans,s=t==null?void 0:t.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!s),this.setTemplate(this.currentTemplate,s?[s]:void 0),r==null||r.setupForHeader(this),this.setMenu(),this.setupSort(),i==null||i.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(n,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const r=Nne(e,t,t);r&&(this.isLoadingInnerComponent=!0,r.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderComponent=i,this.eText&&this.eText.appendChild(i.getGui())):this.destroyBean(i))}))}setDisplayName(e){const{displayName:t}=e,r=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||r===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=tg(t))}addInIcon(e,t,r){const i=pa(e,this.beans,r);i&&t.appendChild(i)}workOutShowMenu(){var e;return this.params.enableMenu&&!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Ou(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:r}=this,i=zo(e);this.addInIcon(i?"menu":"menuAlt",t,r.column),t.classList.toggle("ag-header-menu-icon",!i);const n=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=n,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(n)}toggleMenuAlwaysShow(e){var t;(t=this.eMenu)==null||t.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:r}=this;t||this.toggleMenuAlwaysShow(!0),r.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){var u;const{params:t,gos:r,beans:i,eMenu:n,eFilterButton:s}=this,a=t.column,o=zo(r);if(e&&!o){if((u=i.menuSvc)!=null&&u.isFilterMenuInHeaderEnabled(a))return t.showFilter(s??n??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(n??s??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:r}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:i,eSortOrder:n,eSortAsc:s,eSortDesc:a,eSortMixed:o,eSortNone:u}=this;i.attachCustomElements(n,s,a,o,u)}this.eSortIndicator.setupSort(r),this.currentSort&&e.setupHeader(this,r,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const r=()=>{const i=t.column.isFilterActive();qi(e,i,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,r,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,r,i){if(!e)return Ou(t),!1;const n=this.params.column;return this.addInIcon(i,t,n),this.addManagedListeners(n,{filterChanged:r}),r(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:r}=this;return e?t??r??this.getGui():r??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},ide={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},nde=class extends Qi{constructor(){super(ide),this.agOpened=fr,this.agClosed=fr,this.agLabel=fr,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:r}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),r==null||r.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&St(89)}workOutInnerHeaderGroupComponent(e,t){const r=zne(e,t,t);r&&(this.isLoadingInnerComponent=!0,r.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderGroupComponent=i,this.agLabel.appendChild(i.getGui())):this.destroyBean(i))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:r},beans:i}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const n=u=>{if(mc(u))return;const d=!r.isExpanded();i.colGroupSvc.setColumnGroupOpened(r.getProvidedColumnGroup(),d,"uiColumnExpanded")};this.addTouchAndClickListeners(i,t,n),this.addTouchAndClickListeners(i,e,n);const s=u=>{ld(u)};this.addManagedElementListeners(t,{dblclick:s}),this.addManagedElementListeners(e,{dblclick:s}),this.addManagedElementListeners(this.getGui(),{dblclick:n}),this.updateIconVisibility();const a=r.getProvidedColumnGroup(),o=this.updateIconVisibility.bind(this);this.addManagedListeners(a,{expandedChanged:o,expandableChanged:o})}addTouchAndClickListeners(e,t,r){var i;(i=e.touchSvc)==null||i.setupForHeaderGroupElement(this,t,r),this.addManagedElementListeners(t,{click:r})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:r}}=this;if(r.isExpandable()){const i=r.isExpanded();qi(e,i),qi(t,!i)}else qi(e,!1),qi(t,!1)}addInIcon(e,t){const r=pa(e,this.beans,null);r&&t.appendChild(r)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:r}=this;qi(t,!1),qi(r,!1);return}}setupLabel(e){var n;const{displayName:t,columnGroup:r}=e,i=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;Wt(t)&&!i&&(this.agLabel.textContent=tg(t)),this.toggleCss("ag-sticky-label",!((n=r.getColGroupDef())!=null&&n.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},sde={moduleName:"ColumnHeaderComp",version:jt,userComponents:{agColumnHeader:rde},icons:{menu:"menu",menuAlt:"menu-alt"}},ode={moduleName:"ColumnGroupHeaderComp",version:jt,userComponents:{agColumnGroupHeader:nde},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},ade=class extends ft{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&St(92)}createTask(e,t,r,i,n=!1){this.verify();let s=r;i&&this.batchFrameworkComps&&(s="f1");const a={task:e,index:t,createOrder:++this.taskCount,deferred:n};this.addTaskToList(this[s],a),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((r,i)=>r.deferred!==i.deferred?r.deferred?-1:1:r.index!==i.index?t*(i.index-r.index):i.createOrder-r.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:r,f1:i,destroyTasks:n,beans:s}=this,{ctrlsSvc:a,frameworkOverrides:o}=s,u=t.list,d=r.list,p=i.list,v=Date.now();let y=0;const _=e<=0,P=a.getScrollFeature();for(;_||y<e;){if(!P.scrollGridIfNeeded()){let M;if(u.length)this.sortTaskList(t),M=u.pop().task;else if(d.length)this.sortTaskList(r),M=d.pop().task;else if(p.length)o.wrapOutgoing(()=>{for(;(_||y<e)&&!P.scrollGridIfNeeded();){if(p.length)this.sortTaskList(i),M=p.pop().task,M();else break;y=Date.now()-v}}),M=()=>{};else if(n.length)M=n.pop();else break;M()}y=Date.now()-v}u.length||d.length||p.length||n.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);Fc(this.beans,e)}isQueueEmpty(){return!this.ticking}},lde={moduleName:"AnimationFrame",version:jt,beans:[ade]},cde=class extends ft{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return pa(e,this.beans,t==null?void 0:t.column)}},ude=class extends ft{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!Vh())return;const t=(r,i,n)=>{var o;const{rowCtrl:s,cellCtrl:a}=e.getControlsForEventTarget((n==null?void 0:n.target)??null);a!=null&&a.column&&a.dispatchCellContextMenuEvent(n??null),(o=this.beans.contextMenuSvc)==null||o.handleContextMenuMouseEvent(void 0,n,s,a)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!Vh()||pB("dblclick"))return!1;const i=Date.now(),n=i-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=i,n})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:r,menuSvc:i}=this.beans;if(t.get("suppressTouch"))return;const{params:n,eMenu:s,eFilterButton:a}=e,o=new bh(e.getGui(),!0),u=e.shouldSuppressMenuHide(),d=u&&Wt(s)&&n.enableMenu,p=d?new bh(s,!0):o;if(n.enableMenu||i!=null&&i.isHeaderContextMenuEnabled(n.column)){const v=d?"tap":"longTap",y=_=>n.showColumnMenuAfterMouseClick(_.touchStart);e.addManagedListeners(p,{[v]:y})}if(n.enableSorting){const v=y=>{const _=y.touchStart.target;u&&(s!=null&&s.contains(_)||a!=null&&a.contains(_))||r==null||r.progressSort(n.column,!1,"uiColumnSorted")};e.addManagedListeners(o,{tap:v})}if(n.enableFilterButton&&a){const v=new bh(a,!0);e.addManagedListeners(v,{tap:()=>n.showFilter(a)}),e.addDestroyFunc(()=>v.destroy())}e.addDestroyFunc(()=>o.destroy()),d&&e.addDestroyFunc(()=>p.destroy())}setupForHeaderGroup(e){var r;const t=e.params;if((r=this.beans.menuSvc)!=null&&r.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const i=new bh(t.eGridHeader,!0),n=s=>t.showColumnMenuAfterMouseClick(s.touchStart);e.addManagedListeners(i,{longTap:n}),e.addDestroyFunc(()=>i.destroy())}}setupForHeaderGroupElement(e,t,r){const i=new bh(t,!0);e.addManagedListeners(i,{tap:r}),e.addDestroyFunc(()=>i.destroy())}mockContextMenu(e,t,r){if(!Vh())return;const i=new bh(t),n=s=>{Z0(this.beans,s.touchEvent)&&r(void 0,s.touchStart,s.touchEvent)};e.addManagedListeners(i,{longTap:n}),e.addDestroyFunc(()=>i.destroy())}},hde={moduleName:"Touch",version:jt,beans:[ude]},dde=class extends ft{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,r=!1){return r?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const r=e===st.UP,i=e===st.DOWN,n=e===st.LEFT;let s,a;const{pageBounds:o,gos:u,visibleCols:d,pinnedRowModel:p}=this.beans,{rowPinned:v}=t;if(r||i)v&&p?r?a=0:a=v==="top"?p.getPinnedTopRowCount()-1:p.getPinnedBottomRowCount()-1:a=r?o.getFirstRow():o.getLastRow(),s=t.column;else{const y=u.get("enableRtl");a=t.rowIndex,s=(n!==y?d.allCols:[...d.allCols].reverse()).find(P=>this.isCellGoodToFocusOn({rowIndex:a,rowPinned:null,column:P}))}return s?{rowIndex:a,rowPinned:v,column:s}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let r=t,i=!1;for(;!i;){switch(e){case st.UP:r=this.getCellAbove(r);break;case st.DOWN:r=this.getCellBelow(r);break;case st.RIGHT:r=this.gos.get("enableRtl")?this.getCellToLeft(r):this.getCellToRight(r);break;case st.LEFT:r=this.gos.get("enableRtl")?this.getCellToRight(r):this.getCellToLeft(r);break;default:r=null,St(8,{key:e});break}r?i=this.isCellGoodToFocusOn(r):i=!0}return r}isCellGoodToFocusOn(e){const t=e.column;let r;const{pinnedRowModel:i,rowModel:n}=this.beans;switch(e.rowPinned){case"top":r=i==null?void 0:i.getPinnedTopRow(e.rowIndex);break;case"bottom":r=i==null?void 0:i.getPinnedBottomRow(e.rowIndex);break;default:r=n.getRow(e.rowIndex);break}return r?!this.isSuppressNavigable(t,r):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){var i;if(!e)return null;const t=((i=this.rowSpanSvc)==null?void 0:i.getCellEnd(e))??e,r=rk(this.beans,t,!0);return r?{rowIndex:r.rowIndex,column:e.column,rowPinned:r.rowPinned}:null}getCellAbove(e){var i;if(!e)return null;const t=((i=this.rowSpanSvc)==null?void 0:i.getCellStart(e))??e,r=NC(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return r?{rowIndex:r.rowIndex,column:e.column,rowPinned:r.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:r}=this.beans,i=t.allCols;let n=e.rowIndex,s=e.rowPinned,a=t.getColAfter(e.column);if(!a){a=i[0];const o=rk(this.beans,e,!0);if(Gi(o)||!o.rowPinned&&!((r==null?void 0:r.isRowInPage(o.rowIndex))??!0))return null;n=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:n,column:a,rowPinned:s}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:r,pagination:i}=t,n=r.allCols;let s=e.rowIndex,a=e.rowPinned,o=r.getColBefore(e.column);if(!o){o=si(n);const u=NC(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(Gi(u)||!u.rowPinned&&!((i==null?void 0:i.isRowInPage(u.rowIndex))??!0))return null;s=u?u.rowIndex:null,a=u?u.rowPinned:null}return{rowIndex:s,column:o,rowPinned:a}}isSuppressNavigable(e,t){const{suppressNavigable:r}=e.colDef;if(typeof r=="boolean")return r;if(typeof r=="function"){const i=e.createColumnFunctionCallbackParams(t);return r(i)}return!1}};function fde(e){return e.focusSvc.getFocusedCell()}function pde(e){return e.focusSvc.clearFocusedCell()}function gde(e,t,r,i){e.focusSvc.setFocusedCell({rowIndex:t,column:r,rowPinned:i,forceBrowserFocus:!0})}function mde(e,t){var r;return((r=e.navigation)==null?void 0:r.tabToNextCell(!1,t))??!1}function vde(e,t){var r;return((r=e.navigation)==null?void 0:r.tabToNextCell(!0,t))??!1}function yde(e,t,r=!1){var n;const i=(n=e.headerNavigation)==null?void 0:n.getHeaderPositionForColumn(t,r);i&&e.focusSvc.focusHeaderPosition({headerPosition:i})}var wde=class extends ft{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new a8,this.rowValidations=new l8,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;const r=this.getEditRow(e);t?r.delete(t):r.clear(),r.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;const r=e&&this.edits.get(e);if(r)return r;if(t.checkSiblings){const i=e.pinnedSibling;if(i)return this.getEditRow(i)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(!e||this.edits.size===0)return;const r=this.getEditRow(e),i=e.pinnedSibling,n=t&&i&&this.getEditRow(i);if(!r&&!n)return;const s=Object.assign({},e.data),a=(o,u)=>o.forEach(({pendingValue:d},p)=>{d!==Ca&&(u[p.getColId()]=d)});return r&&a(r,s),n&&a(n,s),s}getEdit(e,t){const r=this._getEdit(e);return t&&r?{...r}:r}_getEdit(e){var t;if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&((t=this.getEditRow(e.rowNode))==null?void 0:t.get(e.column))}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach((r,i)=>{const n=new Map;r.forEach(({editorState:s,...a},o)=>n.set(o,{...a})),t.set(i,n)}),t}setEditMap(e){this.edits.clear(),e.forEach((t,r)=>{const i=new Map;t.forEach((n,s)=>i.set(s,{...n})),this.edits.set(r,i)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);const r=this._getEdit(e),i=Object.assign({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0},...r,...t});return this.getEditRow(e.rowNode).set(e.column,i),i}clearEditValue(e){var i;const{rowNode:t,column:r}=e;if(t)if(r){const n=this._getEdit(e);n&&(n.editorValue=void 0,n.pendingValue=n.sourceValue,n.state="changed")}else(i=this.getEditRow(t))==null||i.forEach(n=>{n.editorValue=void 0,n.pendingValue=n.sourceValue,n.state="changed"})}getState(e){var t;if(!this.suspendEdits)return(t=this.getEdit(e))==null?void 0:t.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];const t=[];return(e??this.edits).forEach((r,i)=>{for(const n of r.keys()){const{editorState:s,...a}=r.get(n);t.push({rowNode:i,column:n,...a})}}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){var s;if(this.suspendEdits||this.edits.size===0)return!1;const{rowNode:r,column:i}=e,{withOpenEditor:n}=t;if(r){const a=this.getEditRow(r,t);return a?i?n?((s=this.getEdit(e))==null?void 0:s.state)==="editing":a.has(i)??!1:a.size!==0?n?Array.from(a.values()).some(({state:o})=>o==="editing"):!0:!1:!1}return n?this.getEditPositions().some(({state:a})=>a==="editing"):this.edits.size>0}start(e){const t=this.getEditRow(e.rowNode)??new Map,{rowNode:r,column:i}=e;i&&!t.has(i)&&t.set(i,{editorValue:void 0,pendingValue:Ca,sourceValue:this.beans.valueSvc.getValue(i,r,!1,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(r,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},a8=class{constructor(){this.cellValidations=new Map}getCellValidation(e){var i,n;const{rowNode:t,column:r}=e||{};return(n=(i=this.cellValidations)==null?void 0:i.get(t))==null?void 0:n.get(r)}hasCellValidation(e){return!e||!e.rowNode||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){const{rowNode:r,column:i}=e;this.cellValidations.has(r)||this.cellValidations.set(r,new Map),this.cellValidations.get(r).set(i,t)}clearCellValidation(e){var i;const{rowNode:t,column:r}=e;(i=this.cellValidations.get(t))==null||i.delete(r)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},l8=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return!e||!e.rowNode?this.rowValidations.size>0:!!this.getRowValidation(e)}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function gP(e,t={}){var d;const{rowIndex:r,rowId:i,rowCtrl:n,rowPinned:s}=t;if(n)return n;const{rowModel:a,rowRenderer:o}=e;let{rowNode:u}=t;return u||(i?u=Dle(e,i,s):r!=null&&(u=a.getRow(r))),(d=o.getRowCtrls(u?[u]:[]))==null?void 0:d[0]}function Bi(e,t={}){var p;const{cellCtrl:r,colId:i,columnId:n,column:s}=t;if(r)return r;const a=e.colModel.getCol(i??n??A2(s)),o=t.rowCtrl??gP(e,t),u=(o==null?void 0:o.getCellCtrl(a))??void 0;if(u)return u;const d=t.rowNode??(o==null?void 0:o.rowNode);if(d)return(p=e.rowRenderer.getCellCtrls([d],[a]))==null?void 0:p[0]}function mk(e){const{editSvc:t}=e;t!=null&&t.isBatchEditing()?wp(e):t==null||t.stopEditing(void 0,{source:"api"})}function xde(e,t,r){const{gos:i,popupSvc:n}=t;if(!i.get("stopEditingWhenCellsLoseFocus"))return;const s=a=>{const o=a.relatedTarget;if(g2(o)===null){mk(t);return}let u=r.some(d=>d.contains(o))&&i.isElementInThisInstance(o);u||(u=!!n&&(n.getActivePopups().some(d=>d.contains(o))||n.isElementWithinCustomPopup(o))),u||mk(t)};r.forEach(a=>e.addManagedElementListeners(a,{focusout:s}))}function A2(e){if(e)return typeof e=="string"?e:e.getColId()}var Ca=Symbol("unedited");function c8(e,t={}){var n;const r=[],i=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const s of i){const a=(n=s.comp)==null?void 0:n.getCellEditor();a&&r.push({ctrl:s,editor:Y0(a)})}return r}var Cde=(e,t={})=>c8(e,t).map(r=>r.editor);function _de(e,t,r,i,n,s){var v;t.length===0&&(r!=null&&r.rowNode)&&(r!=null&&r.column)&&Vp(e,r,{key:i,event:n,cellStartedEdit:s});const{valueSvc:a,editSvc:o,editModelSvc:u}=e,{rowNode:d,column:p}=r??{};for(const y of t){const{rowNode:_,column:P}=y,R=Bi(e,y);if(!R){if(_&&P){const F=a.getValue(P,_,void 0,"api"),G=((r==null?void 0:r.rowNode)===_&&(r==null?void 0:r.column)===P&&i||void 0)??(o==null?void 0:o.getCellDataValue(y,!1))??((v=a.getValueForDisplay(P,_))==null?void 0:v.value)??F??Ca;u==null||u.setEdit(y,{pendingValue:G,sourceValue:F,state:"editing"})}continue}const M=s&&d===R.rowNode&&R.column===p;Vp(e,{rowNode:d,column:R.column},{key:M?i:null,event:M?n:null,cellStartedEdit:M&&s})}}function cc({pendingValue:e,sourceValue:t}){return e===Ca&&(e=t),e!==t}function Vp(e,t,r){var F,k,N,G,j,ee,q,oe,ue,me;const i=e.gos.get("enableGroupEdit"),{key:n,event:s,cellStartedEdit:a,silent:o}=r??{},u=Bi(e,t),d=(F=u==null?void 0:u.comp)==null?void 0:F.getCellEditor(),p=h8(e,t,n,a&&!o),v=(k=e.editModelSvc)==null?void 0:k.getEdit(t);let y=p.value;if(y===void 0&&(y=v==null?void 0:v.sourceValue),(N=e.editModelSvc)==null||N.setEdit(t,{editorValue:y,state:"editing"}),d){(G=d.refresh)==null||G.call(d,p);return}const _=t.column.getColDef(),P=XB(e.userCompFactory,_,p),R=(P==null?void 0:P.popupFromSelector)!=null?P.popupFromSelector:!!_.cellEditorPopup,M=(P==null?void 0:P.popupPositionFromSelector)!=null?P.popupPositionFromSelector:_.cellEditorPopupPosition;if(d8(P.params,s),u){u.editCompDetails=P,(j=u.comp)==null||j.setEditDetails(P,R,M,e.gos.get("reactiveCustomComponents")),(ee=u==null?void 0:u.rowCtrl)==null||ee.refreshRow({suppressFlash:!0});const ie=(q=e.editModelSvc)==null?void 0:q.getEdit(t,!0);!o&&!((oe=ie==null?void 0:ie.editorState)!=null&&oe.cellStartedEditing)&&((ue=e.editSvc)==null||ue.dispatchCellEvent(t,s,"cellEditingStarted",i?{value:y}:{}),(me=e.editModelSvc)==null||me.setEdit(t,{editorState:{cellStartedEditing:!0}}))}}function u8(e,t,r){var s,a;const i={editorValueExists:!1};if(mP(e)){const o=(s=t.getValidationErrors)==null?void 0:s.call(t);if(((o==null?void 0:o.length)??0)>0)return i}if(r!=null&&r.isCancelling)return i;if(r!=null&&r.isStopping){const o=(a=t==null?void 0:t.isCancelAfterEnd)==null?void 0:a.call(t);if(o)return{...i,isCancelAfterEnd:o}}return{editorValue:t.getValue(),editorValueExists:!0}}function h8(e,t,r,i){var F,k,N,G;const{valueSvc:n,gos:s,editSvc:a}=e,o=e.gos.get("enableGroupEdit"),u=Bi(e,t),d=((F=t.rowNode)==null?void 0:F.rowIndex)??void 0,p=a==null?void 0:a.isBatchEditing(),v=e.colModel.getCol(t.column.getId()),{rowNode:y,column:_}=t,P=(k=u.comp)==null?void 0:k.getCellEditor(),R=(a==null?void 0:a.getCellDataValue(t,!1))??(P?(N=u8(e,P))==null?void 0:N.editorValue:void 0),M=R===Ca?(G=n.getValueForDisplay(v,y))==null?void 0:G.value:R;return Cr(s,{value:o?R:M,eventKey:r??null,column:_,colDef:_.getColDef(),rowIndex:d,node:y,data:y.data,cellStartedEdit:i??!1,onKeyDown:u==null?void 0:u.onKeyDown.bind(u),stopEditing:j=>{a.stopEditing(t,{source:p?"ui":"api",suppressNavigateAfterEdit:j}),zC(e,t)},eGridCell:u==null?void 0:u.eGui,parseValue:j=>n.parseValue(v,y,j,u==null?void 0:u.value),formatValue:u==null?void 0:u.formatValue.bind(u),validate:()=>{a==null||a.validateEdit()}})}function I2(e,t){const{editModelSvc:r}=e;r==null||r.getEditMap().forEach((i,n)=>{i.forEach((s,a)=>{!t&&(s.state==="editing"||s.pendingValue===Ca)||!cc(s)&&(s.state!=="editing"||t)&&(r==null||r.removeEdits({rowNode:n,column:a}))})})}function bde(e,t){var d;const r=(d=t.comp)==null?void 0:d.getCellEditor();if(!(r!=null&&r.refresh))return;const{eventKey:i,cellStartedEdit:n}=t.editCompDetails.params,{column:s}=t,a=h8(e,t,i,n),o=s.getColDef(),u=XB(e.userCompFactory,o,a);r.refresh(d8(u.params,i))}function d8(e,t){var r;return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes((t==null?void 0:t.key)??"")||e.suppressPreventDefault:(r=t==null?void 0:t.preventDefault)==null||r.call(t),e}function Ih(e,t){var r;(r=e.editModelSvc)==null||r.getEditPositions().forEach(i=>{var d,p;const n=Bi(e,i);if(!n)return;const s=(d=n.comp)==null?void 0:d.getCellEditor();if(!s)return;const{editorValue:a,editorValueExists:o,isCancelAfterEnd:u}=u8(e,s,t);u&&((p=e.editModelSvc)==null||p.setEdit(i,{editorState:{isCancelAfterEnd:u}})),wx(e,i,a,void 0,!o,t)})}function wx(e,t,r,i,n,s){const{editModelSvc:a,valueSvc:o}=e;if(!a)return;const{rowNode:u,column:d}=t;if(!(u&&d))return;let p=a.getEdit(t,!0);p!=null&&p.sourceValue||(p=a.setEdit(t,{sourceValue:o.getValue(d,u,void 0,"api"),pendingValue:p?p.editorValue:Ca})),a.setEdit(t,{editorValue:n?p.sourceValue:r}),s!=null&&s.persist&&Sde(e,t)}function Sde(e,t){const{editModelSvc:r}=e,i=r==null?void 0:r.getEdit(t,!0);r==null||r.setEdit(t,{pendingValue:i==null?void 0:i.editorValue})}function wp(e,t,r){var i;t||(t=(i=e.editModelSvc)==null?void 0:i.getEditPositions()),t.forEach(n=>zC(e,n,r))}function zC(e,t,r){var d,p;const i=e.gos.get("enableGroupEdit"),{editModelSvc:n}=e,s=Bi(e,t),a=n==null?void 0:n.getEdit(t,!0);if(!s){a&&(n==null||n.setEdit(t,{state:"changed"}));return}const{comp:o}=s;if(o&&!o.getCellEditor()){if(s==null||s.refreshCell(),a){n==null||n.setEdit(t,{state:"changed"});const v=i?vk(r,a):{valueChanged:!1,newValue:void 0,oldValue:a.sourceValue};yk(e,t,v,r)}return}if(mP(e)){const v=(p=(d=o==null?void 0:o.getCellEditor())==null?void 0:d.getValidationErrors)==null?void 0:p.call(d),y=n==null?void 0:n.getCellValidationModel();v!=null&&v.length?y==null||y.setCellValidation(t,{errorMessages:v}):y==null||y.clearCellValidation(t)}n==null||n.setEdit(t,{state:"changed"}),o==null||o.setEditDetails(),o==null||o.refreshEditStyles(!1,!1),s==null||s.refreshCell({force:!0,suppressFlash:!0});const u=n==null?void 0:n.getEdit(t);if(u&&u.state==="changed"){const v=i?vk(r,u):{valueChanged:cc(u)&&!(r!=null&&r.cancel),newValue:r!=null&&r.cancel||u.editorState.isCancelAfterEnd?void 0:(u==null?void 0:u.editorValue)??(a==null?void 0:a.pendingValue),oldValue:u==null?void 0:u.sourceValue};yk(e,t,v,r)}}function vk(e,t){return e!=null&&e.cancel?{valueChanged:!1,oldValue:t.sourceValue,newValue:void 0,value:t.sourceValue}:{valueChanged:!1,oldValue:t.sourceValue,newValue:t.pendingValue,value:t.sourceValue}}function yk(e,t,r,{silent:i,event:n}={}){const{editSvc:s,editModelSvc:a}=e,o=a==null?void 0:a.getEdit(t),{editorState:u}=o||{},{isCancelBeforeStart:d}=u||{};!i&&!d&&(s==null||s.dispatchCellEvent(t,n,"cellEditingStopped",r),a==null||a.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function mP(e){var a;const{gos:t,colModel:r}=e,i=!!t.get("getFullRowEditValidationErrors"),n=(a=r.getColumnDefs())==null?void 0:a.filter(o=>o.editable).some(({cellEditorParams:o})=>{const{minLength:u,maxLength:d,getValidationErrors:p,min:v,max:y}=o||{};return u!==void 0||d!==void 0||p!==void 0||v!==void 0||y!==void 0}),s=e.gridApi.getCellEditorInstances().some(o=>o.getValidationElement||o.getValidationErrors);return n||i||s}function cd(e,t){var y,_,P,R,M,F,k,N;if(!(t||mP(e)))return;const r=c8(e),i=new a8,{ariaAnnounce:n,localeSvc:s,editModelSvc:a,gos:o}=e,u=o.get("editType")==="fullRow",p=mB(s)("ariaValidationErrorPrefix","Cell Editor Validation");for(const G of r){const{ctrl:j,editor:ee}=G,{rowNode:q,column:oe}=j,ue=((y=ee.getValidationErrors)==null?void 0:y.call(ee))??[],me=((_=ee.getValidationElement)==null?void 0:_.call(ee,!1))||!((P=ee.isPopup)!=null&&P.call(ee))&&j.eGui;if(me){const ie=ue!=null&&ue.length>0,fe=ie?ue.join(". "):"";$re(me,ie),ie&&n.announceValue(`${p} ${ue}`,"editorValidation"),me instanceof HTMLInputElement?me.setCustomValidity(fe):me.classList.toggle("invalid",ie)}(ue==null?void 0:ue.length)>0&&i.setCellValidation({rowNode:q,column:oe},{errorMessages:ue})}Ih(e,{persist:!1}),a==null||a.setCellValidationModel(i);const v=new Set;for(const{ctrl:G}of r)v.add(G.rowCtrl);if(u){const G=Ede(e);a==null||a.setRowValidationModel(G)}for(const G of v.values()){(R=G.rowEditStyleFeature)==null||R.applyRowStyles();for(const j of G.getAllCellCtrls())(M=j.tooltipFeature)==null||M.refreshTooltip(!0),(F=j.editorTooltipFeature)==null||F.refreshTooltip(!0),(N=(k=j.editStyleFeature)==null?void 0:k.applyCellStyles)==null||N.call(k)}}var Ede=e=>{var n;const t=new l8,r=e.gos.get("getFullRowEditValidationErrors"),i=(n=e.editModelSvc)==null?void 0:n.getEditMap();if(!i)return t;for(const s of i.keys()){const a=i.get(s);if(!a)continue;const o=[],{rowIndex:u,rowPinned:d}=s;for(const v of a.keys()){const y=a.get(v);if(!y)continue;const{editorValue:_,pendingValue:P,sourceValue:R}=y,M=_??(P===Ca?void 0:P)??R;o.push({column:v,colId:v.getColId(),rowIndex:u,rowPinned:d,oldValue:R,newValue:M})}const p=(r==null?void 0:r({editorsState:o}))??[];p.length>0&&t.setRowValidation({rowNode:s},{errorMessages:p})}return t};function Rde(e){var i;cd(e,!0);const t=(i=e.editModelSvc)==null?void 0:i.getCellValidationModel().getCellValidationMap();if(!t)return null;const r=[];return t.forEach((n,s)=>{n.forEach(({errorMessages:a},o)=>{r.push({column:o,rowIndex:s.rowIndex,rowPinned:s.rowPinned,messages:a??null})})}),r}function Tde(e,t,r,{rowNode:i,column:n},s){return Cr(e.gos,{type:r,node:i,data:i.data,value:s,column:n,colDef:n.getColDef(),rowPinned:i.rowPinned,event:t,rowIndex:i.rowIndex})}function Pde(e,t=!1){return e===st.DELETE?!0:!t&&e===st.BACKSPACE?JB():!1}var Mde=class extends ft{constructor(e,t,r,i){super(),this.cellCtrl=e,this.rowNode=r,this.rowCtrl=i,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case st.ENTER:this.onEnterKeyDown(e);break;case st.F2:this.onF2KeyDown(e);break;case st.ESCAPE:this.onEscapeKeyDown(e);break;case st.TAB:this.onTabKeyDown(e);break;case st.BACKSPACE:case st.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case st.DOWN:case st.UP:case st.RIGHT:case st.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){var n,s;const{cellCtrl:r,beans:i}=this;if(!((n=i.editSvc)!=null&&n.isEditing(r,{withOpenEditor:!0}))){if(e.shiftKey&&r.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const a=r.getFocusedCellPosition();(s=i.navigation)==null||s.navigateToNextCell(e,t,a,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:r}=this.beans;if(!t)return;const i=t.extendLatestRangeInDirection(e);i&&(e.key===st.LEFT||e.key===st.RIGHT?r==null||r.ensureColumnVisible(i.column):r==null||r.ensureRowVisible(i.rowIndex))}onTabKeyDown(e){var t;(t=this.beans.navigation)==null||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){var d;const{cellCtrl:r,beans:i,rowNode:n}=this,{gos:s,rangeSvc:a,eventSvc:o,editSvc:u}=i;if(o.dispatchEvent({type:"keyShortcutChangedCellStart"}),Pde(e,s.get("enableCellEditingOnBackspace"))&&!(u!=null&&u.isEditing(r,{withOpenEditor:!0}))){if(a&&Bu(s))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(r.isCellEditable()){const{column:p}=r,v=this.beans.valueSvc.getDeleteValue(p,n);n.setDataValue(p,v,"cellClear")}}else u!=null&&u.isEditing(r,{withOpenEditor:!0})||(d=i.editSvc)==null||d.startEditing(r,{startedEdit:!0,event:t});o.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){var d;const{cellCtrl:t,beans:r}=this,{editSvc:i,navigation:n}=r,s=i==null?void 0:i.isEditing(t,{withOpenEditor:!0}),a=t.rowNode,o=i==null?void 0:i.isRowEditing(a,{withOpenEditor:!0}),u=p=>{(i==null?void 0:i.startEditing(p,{startedEdit:!0,event:e,source:"edit"}))&&e.preventDefault()};if(s||o){if(this.isCtrlEnter(e)){i==null||i.applyBulkEdit(t,((d=r==null?void 0:r.rangeSvc)==null?void 0:d.getCellRanges())||[]);return}if(cd(r),(i==null?void 0:i.checkNavWithValidation(void 0,e))==="block-stop")return;i!=null&&i.isEditing(t,{withOpenEditor:!0})?i==null||i.stopEditing(t,{event:e,source:"edit"}):o&&!t.isCellEditable()?i==null||i.stopEditing({rowNode:a},{event:e,source:"edit"}):u(t)}else if(r.gos.get("enterNavigatesVertically")){const p=e.shiftKey?st.UP:st.DOWN;n==null||n.navigateToNextCell(null,p,t.cellPosition,!1)}else{if(i!=null&&i.hasValidationErrors())return;i!=null&&i.hasValidationErrors(t)&&i.revertSingleCellEdit(t,!0),u(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===st.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:r}}=this;r!=null&&r.isEditing()&&(cd(this.beans),(r==null?void 0:r.checkNavWithValidation(void 0,e))==="block-stop")||r==null||r.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:r}}=this;(r==null?void 0:r.checkNavWithValidation(t,e))==="block-stop"&&r.revertSingleCellEdit(t),r==null||r.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){var a;const r=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:n}=this;if(r||i!=null&&i.isEditing(n,{withOpenEditor:!0}))return;if(e.key===st.SPACE)this.onSpaceKeyDown(e);else if(i!=null&&i.isCellEditable(n,"ui")){if(i!=null&&i.hasValidationErrors()&&!(i!=null&&i.hasValidationErrors(n)))return;i==null||i.startEditing(n,{startedEdit:!0,event:e,source:"api"});const o=n.editCompDetails;!((a=o==null?void 0:o.params)!=null&&a.suppressPreventDefault)&&e.preventDefault()}}onSpaceKeyDown(e){var n;const{gos:t,editSvc:r}=this.beans,{rowNode:i}=this.cellCtrl;!(r!=null&&r.isEditing(this.cellCtrl,{withOpenEditor:!0}))&&zh(t)&&((n=this.beans.selectionSvc)==null||n.handleSelectionEvent(e,i,"spaceKey")),e.preventDefault()}},Fde=class extends ft{constructor(e,t,r){super(),this.cellCtrl=e,this.column=r,this.beans=t}onMouseEvent(e,t){if(!mc(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){var R;if((R=this.beans.touchSvc)!=null&&R.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:r,editSvc:i,editModelSvc:n,frameworkOverrides:s,gos:a}=this.beans,o=e.ctrlKey||e.metaKey,{cellCtrl:u}=this,{column:d,cellPosition:p,rowNode:v}=u,y=px(a,d,v,e);r&&o&&!y&&r.getCellRangeCount(p)>1&&r.intersectLastRange(!0);const _=u.createEvent(e,"cellClicked");_.isEventHandlingSuppressed=y,t.dispatchEvent(_);const P=d.getColDef();if(P.onCellClicked&&window.setTimeout(()=>{s.wrapOutgoing(()=>{P.onCellClicked(_)})},0),!y&&(n==null?void 0:n.getState(u))!=="editing"){const M=i==null?void 0:i.isEditing(),F=(n==null?void 0:n.getCellValidationModel().getCellValidationMap().size)??0,k=(n==null?void 0:n.getRowValidationModel().getRowValidationMap().size)??0;if(M&&(F>0||k>0))return;i!=null&&i.shouldStartEditing(u,e)?i==null||i.startEditing(u,{event:e}):i!=null&&i.shouldStopEditing(u,e)&&(this.beans.gos.get("editType")==="fullRow"?i==null||i.stopEditing(u,{event:e,source:"edit"}):i==null||i.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:r,cellCtrl:i}=this,{eventSvc:n,frameworkOverrides:s,editSvc:a,editModelSvc:o,gos:u}=r,d=px(u,i.column,i.rowNode,e),p=t.getColDef(),v=i.createEvent(e,"cellDoubleClicked");if(v.isEventHandlingSuppressed=d,n.dispatchEvent(v),typeof p.onCellDoubleClicked=="function"&&window.setTimeout(()=>{s.wrapOutgoing(()=>{p.onCellDoubleClicked(v)})},0),!d&&a!=null&&a.shouldStartEditing(i,e)&&(o==null?void 0:o.getState(i))!=="editing"){const y=a==null?void 0:a.isEditing(),_=(o==null?void 0:o.getCellValidationModel().getCellValidationMap().size)??0,P=(o==null?void 0:o.getRowValidationModel().getRowValidationMap().size)??0;if(y&&(_>0||P>0))return;a==null||a.startEditing(i,{event:e})}}onMouseDown(e){const{ctrlKey:t,metaKey:r,shiftKey:i}=e,n=e.target,{cellCtrl:s,beans:a}=this,{eventSvc:o,rangeSvc:u,rowNumbersSvc:d,focusSvc:p,gos:v,editSvc:y}=a,{column:_,rowNode:P,cellPosition:R}=s,M=px(v,_,P,e),F=()=>{const j=s.createEvent(e,"cellMouseDown");j.isEventHandlingSuppressed=M,o.dispatchEvent(j)};if(M){F();return}if(this.isRightClickInExistingRange(e))return;const k=u&&!u.isEmpty(),N=this.containsWidget(n),G=Eu(_);if(d&&G&&!d.handleMouseDownOnCell(R,e)){u&&e.preventDefault(),e.stopImmediatePropagation();return}if(!i||!k){const j=y==null?void 0:y.isEditing(s),q=v.get("enableCellTextSelection")&&e.defaultPrevented,oe=(Zu()||q)&&!j&&!NT(n)&&!N;s.focusCell(oe,e)}if(i&&k&&!p.isCellFocused(R)){e.preventDefault();const j=p.getFocusedCell();if(j){const{column:ee,rowIndex:q,rowPinned:oe}=j;y!=null&&y.isEditing(j)&&(y==null||y.stopEditing(j)),p.setFocusedCell({column:ee,rowIndex:q,rowPinned:oe,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!N){if(u){G&&e.preventDefault();const j=bD(a,e)&&G;if(i)u.extendLatestRangeToCell(R);else if(!j){const ee=t||r;u.setRangeToCell(R,ee)}}F()}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const r=t.isCellInAnyRange(this.cellCtrl.cellPosition),i=bD(this.beans,e);if(r&&i)return!0}return!1}containsWidget(e){return Bh(e,"ag-selection-checkbox",3)||Bh(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:r}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),r==null||r.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:r}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),r==null||r.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,r=t.contains(e.target),i=t.contains(e.relatedTarget);return r&&i}},Ade=class extends ft{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();qu(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,r=e.getColSpan(t),i=[];if(r===1)i.push(e);else{let n=e;const s=e.getPinned();for(let a=0;n&&a<r&&(i.push(n),n=this.beans.visibleCols.getColAfter(n),!(!n||Gi(n)||s!==n.getPinned()));a++);}return i}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=si(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,r=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=t.bodyWidth;return r+i+(e||0)}return r+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const r=Gh(this.beans)*this.rowSpan;this.eContent.style.height=`${r}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},Ide="ag-cell",Dde="ag-cell-auto-height",kde="ag-cell-normal-height",Lde="ag-cell-focus",Ode="ag-cell-first-right-pinned",Nde="ag-cell-last-left-pinned",Bde="ag-cell-not-inline-editing",zde="ag-cell-wrap-text",Gde=0,xp=class extends ft{constructor(e,t,r,i){super(),this.column=e,this.rowNode=t,this.rowCtrl=i,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=r,this.gos=r.gos,this.editSvc=r.editSvc,this.hasEdit=!!r.editSvc;const{colId:n}=e;this.instanceId=n+"-"+Gde++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){var i,n;const{beans:e}=this;this.positionFeature=new Ade(this,e),this.customStyleFeature=(i=e.cellStyles)==null?void 0:i.createCellCustomStyleFeature(this,e),this.editStyleFeature=(n=e.editSvc)==null?void 0:n.createCellStyleFeature(this,e),this.mouseListener=new Fde(this,e,this.column),this.keyboardListener=new Mde(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:t}=e;t&&Bu(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this)),Eu(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){var r;this.tooltipFeature=(r=this.beans.tooltipSvc)==null?void 0:r.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){var t;this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=(t=this.beans.tooltipSvc)==null?void 0:t.setupCellEditorTooltip(this,e),cd(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,r,i,n,s,a){var o,u,d,p,v,y,_,P,R;this.comp=e,this.eGui=t,this.printLayout=n,a??(a=this),this.addDomData(a),this.addFeatures(),a.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,a),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(o=this.positionFeature)==null||o.init(),(u=this.customStyleFeature)==null||u.setComp(e),(d=this.editStyleFeature)==null||d.setComp(e),(p=this.tooltipFeature)==null||p.refreshTooltip(),(v=this.keyboardListener)==null||v.init(),(y=this.rangeFeature)==null||y.setComp(e),(_=this.rowResizeFeature)==null||_.refreshRowResizer(),s&&this.isCellEditable()||this.hasEdit&&((P=this.editSvc)!=null&&P.isEditing(this,{withOpenEditor:!0}))?(R=this.editSvc)==null||R.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach(M=>M()),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){var r;this.isAutoHeight=((r=this.beans.rowAutoHeight)==null?void 0:r.setupCellAutoHeight(this,e,t))??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){var u,d;const{beans:e,column:t}=this,{userCompFactory:r,ctrlsSvc:i,eventSvc:n}=e,s=t.getColDef(),a=this.createCellRendererParams();a.deferRender=!0;const o=FD(r,s,a);if((d=(u=i.getGridBodyCtrl())==null?void 0:u.scrollFeature)!=null&&d.isScrolling()){let p;const v=new Hr(y=>{p=y});return this.addManagedListeners(n,{bodyScrollEnd:()=>p()}),{loadingComp:o,onReady:v}}return{loadingComp:o,onReady:Hr.resolve()}}showValue(e,t){var v,y,_,P;const{beans:r,column:i,rowNode:n,rangeFeature:s}=this,{userCompFactory:a}=r;let o=this.getValueToDisplay(),u;const d=n.stub&&((v=n.groupData)==null?void 0:v[i.getId()])==null,p=i.getColDef();if(d||this.isCellRenderer()){const R=this.createCellRendererParams();!d||Eu(i)?u=MD(a,p,R):u=FD(a,p,R)}if(!u&&!d&&((y=r.findSvc)!=null&&y.isMatch(n,i))){const R=this.createCellRendererParams();u=MD(a,{...i.getColDef(),cellRenderer:"agFindCellRenderer"},R)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(n,{checkSiblings:!0})){const R=this.editSvc.prepDetailsDuringBatch(this,{compDetails:u,valueToDisplay:o});R&&(R.compDetails?u=R.compDetails:R.valueToDisplay&&(o=R.valueToDisplay))}this.comp.setRenderDetails(u,o,e),(_=this.customRowDragComp)==null||_.refreshVisibility(),!t&&s&&Fc(r,()=>s==null?void 0:s.refreshHandle()),(P=this.rowResizeFeature)==null||P.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&Av(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:r}=this.beans.gridOptions,i=EC(t),n=Ku(this.column);return r==="custom"&&i!=="selectionColumn"&&n?!1:e.checkboxSelection||n&&typeof t=="object"&&fp(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),r=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return t||r||i||n}onPopupEditorClosed(){const{editSvc:e}=this.beans;e!=null&&e.isEditing(this,{withOpenEditor:!0})&&(e==null||e.stopEditing(this,{source:e!=null&&e.isBatchEditing()?"ui":"api"}))}stopEditing(e=!1){const{editSvc:t}=this.beans;return(t==null?void 0:t.stopEditing(this,{cancel:e,source:t!=null&&t.isBatchEditing()?"ui":"api"}))??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:r,rowNode:i,comp:n,eGui:s,beans:{valueSvc:a,gos:o,editSvc:u}}=this;return Cr(o,{value:e,valueFormatted:t,getValue:()=>a.getValueForDisplay(r,i).value,setValue:p=>(u==null?void 0:u.setDataValue({rowNode:i,column:r},p))||i.setDataValue(r,p),formatValue:this.formatValue.bind(this),data:i.data,node:i,pinned:r.getPinned(),colDef:r.getColDef(),column:r,refreshCell:this.refreshCell.bind(this),eGridCell:s,eParentOfValue:n.getParentOfValue(),registerRowDragger:(p,v,y,_)=>this.registerRowDragger(p,v,_),setTooltip:(p,v)=>{var y;o.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(p,v),(y=this.tooltipFeature)==null||y.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;if(this.refreshShouldDestroy()?(t=this.rowCtrl)==null||t.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){const{editSvc:r,comp:i}=this;!(i!=null&&i.getCellEditor())&&r.isEditing(this,{withOpenEditor:!0})&&r.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:r}={}){var d,p,v,y,_,P,R,M;if(this.suppressRefreshCell)return;const i=this.column.getColDef(),n=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,s=e||n||r,a=!!this.comp,o=this.updateAndFormatValue(a),u=s||o;if(a){if(u){this.showValue(!!r,!1);const F=(d=this.beans.filterManager)==null?void 0:d.isSuppressFlashingCellsBecauseFiltering();!t&&!F&&i.enableCellChangeFlash&&((p=this.beans.cellFlashSvc)==null||p.flashCell(this)),(y=(v=this.editStyleFeature)==null?void 0:v.applyCellStyles)==null||y.call(v),(_=this.customStyleFeature)==null||_.applyUserStyles(),(P=this.customStyleFeature)==null||P.applyClassesFromColDef()}(R=this.tooltipFeature)==null||R.refreshTooltip(),(M=this.customStyleFeature)==null||M.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,r=this.valueFormatted,{value:i,valueFormatted:n}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=i,this.valueFormatted=n,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=r:!0}valuesAreEqual(e,t){const r=this.column.getColDef();return r.equals?r.equals(e,t):e===t}addDomData(e){const t=this.eGui;sd(this.beans.gos,t,LC,this),e.addDestroyFunc(()=>sd(this.beans.gos,t,LC,null))}createEvent(e,t){const{rowNode:r,column:i,value:n,beans:s}=this;return Tde(s,e,t,{rowNode:r,column:i},n)}processCharacter(e){var t;(t=this.keyboardListener)==null||t.processCharacter(e)}onKeyDown(e){var t;(t=this.keyboardListener)==null||t.onKeyDown(e)}onMouseEvent(e,t){var r;(r=this.mouseListener)==null||r.onMouseEvent(e,t)}getColSpanningList(){var e;return((e=this.positionFeature)==null?void 0:e.getColSpanningList())??[]}onLeftChanged(){var e;this.comp&&((e=this.positionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:r}=this;F6(e,t,r.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);oB(this.eGui,e)}onWidthChanged(){var e;return(e=this.positionFeature)==null?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&((e=this.rangeFeature)==null||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&((e=this.rangeFeature)==null||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){var i;const r=(i=this.editSvc)==null?void 0:i.allowedFocusTargetOnValidation(this);r&&r!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:r},comp:i}=this;if(!i||t!=null&&t.isEditing(this)||!this.isCellFocused()||!r.shouldTakeFocus())return;const n=()=>{if(!this.isAlive())return;const s=i.getFocusableElement();this.isCellFocused()&&s.focus({preventScroll:!0})};if(e){setTimeout(n,0);return}n()}onRowIndexChanged(){var e,t;this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),(e=this.rangeFeature)==null||e.onCellSelectionChanged(),(t=this.rowResizeFeature)==null||t.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(Eu(this.column)&&(e=!0),Bo(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(Ode,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(Nde,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){var n;const{beans:t}=this;if(W1(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const r=this.isCellFocused(),i=((n=t.editSvc)==null?void 0:n.isEditing(this))??!1;if(this.comp.toggleCss(Lde,r),r&&e&&e.forceBrowserFocus){let s=this.comp.getFocusableElement();if(i){const a=gp(s,null,!0);a.length&&(s=a[0])}s.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}r&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:pc(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(Ide,!0),e.toggleCss(Bde,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(Dde,t),e.toggleCss(kde,!t)}onColumnHover(){var e;(e=this.beans.colHover)==null||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e,t;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),(e=this.editSvc)!=null&&e.isEditing(this)?(t=this.editSvc)==null||t.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(zde,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),r=this.createEvent(e,"cellContextMenu"),{beans:i}=this;i.eventSvc.dispatchEvent(r),t.onCellContextMenu&&window.setTimeout(()=>{i.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(r)})},0)}getCellRenderer(){var e;return((e=this.comp)==null?void 0:e.getCellRenderer())??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){var e;return((e=this.eGui)==null?void 0:e.contains(Yi(this.beans)))??!1}createSelectionCheckbox(){var t;const e=(t=this.beans.selectionSvc)==null?void 0:t.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,r){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const i=this.createRowDragComp(e,t,r);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}),i.refreshVisibility())}createRowDragComp(e,t,r){var n;const i=(n=this.beans.rowDragSvc)==null?void 0:n.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,r);if(i)return this.beans.context.createBean(i),i}cellEditorAttached(){this.onEditorAttachedFuncs.forEach(e=>e()),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function vP(e,t,r,i,n,s){if(r==null&&t==null)return;const a={},o={},u=(d,p)=>{d.split(" ").forEach(v=>{v.trim()!=""&&p(v)})};if(r){const d=Object.keys(r);for(let p=0;p<d.length;p++){const v=d[p],y=r[v];let _;typeof y=="string"?_=e?e.evaluate(y,i):!0:typeof y=="function"&&(_=y(i)),u(v,P=>{_?a[P]=!0:o[P]=!0})}}t&&s&&Object.keys(t).forEach(d=>u(d,p=>{a[p]||(o[p]=!0)})),s&&Object.keys(o).forEach(s),Object.keys(a).forEach(n)}function wk(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var Vde=class extends ft{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const r=this.gos,i=a=>{typeof a=="string"?e.push(a):Array.isArray(a)&&a.forEach(o=>e.push(o))},n=r.get("rowClass");n&&i(n);const s=r.getCallback("getRowClass");if(s){const a={data:t.data,node:t,rowIndex:t.rowIndex},o=s(a);i(o)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,r=>{e.push(r)},()=>{})}processRowClassRules(e,t,r){const{gos:i,expressionSvc:n}=this.beans,s=Cr(i,{data:e.data,node:e,rowIndex:e.rowIndex});vP(n,void 0,i.get("rowClassRules"),s,t,r)}processStylesFromGridOptions(e){const t=this.gos,r=t.get("rowStyle"),i=t.getCallback("getRowStyle");let n;if(i){const s={data:e.data,node:e,rowIndex:e.rowIndex};n=i(s)}if(n||r)return Object.assign({},r,n)}},Hde=0,GC=class extends ft{constructor(e,t,r,i,n){var s,a;super(),this.rowNode=e,this.useAnimationFrameForCreate=i,this.printLayout=n,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=((s=t.pagination)==null?void 0:s.getCurrentPage())??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+Hde++,this.rowId=i0(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=wk(this.rowNode),this.setRowType(),this.setAnimateFlags(r),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=(a=t.editSvc)==null?void 0:a.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=i0(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,r,i){var v,y;const{context:n,focusSvc:s}=this.beans;i=Rv(this,n,i);const a={rowComp:e,element:t,containerType:r,compBean:i};this.allRowGuis.push(a),this.updateGui(r,a),this.initialiseRowComp(a);const o=this.rowNode,u=this.rowType==="FullWidthLoading"||o.stub,d=!o.data&&this.beans.rowModel.getType()==="infinite";!u&&!d&&!o.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const p=(v=this.fullWidthGui)==null?void 0:v.element;p&&!((y=this.beans.editSvc)!=null&&y.isEditing(this))&&s.isRowFocused(o.rowIndex,o.rowPinned)&&s.shouldTakeFocus()&&setTimeout(()=>p.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach(r=>r.element.style.display=t)}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),zh(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const r=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(n=>r.toggleCss(n,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&o2(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(r),this.setRowCompRowBusinessKey(r),sd(t,e.element,OC,this),e.compBean.addDestroyFunc(()=>sd(t,e.element,OC,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=i0(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(a2(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(a2(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var i;const t=(i=this.beans.rowDragSvc)==null?void 0:i.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const r=this.createBean(t,this.beans.context);this.rowDragComps.push(r),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(n=>n!==r),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(r,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),r=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(r)}getFullWidthCellRenderers(){var e,t;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(r=>{var i;return(i=r==null?void 0:r.rowComp)==null?void 0:i.getFullWidthCellRenderer()}):[(t=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:t.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:r,beans:{visibleCols:i}}=this,n=!!e||!i.isPinningLeft(),s=!!t,a=!!r||!i.isPinningRight();return n&&s&&a}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),r=this.gos.get("masterDetail")&&this.rowNode.detail,i=this.beans.colModel.isPivotMode(),n=FB(this.gos,this.rowNode,i);e?this.rowType="FullWidthLoading":r?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":n?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:r}=this.beans;if(!(r!=null&&r.active)||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(r.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){var r;if(!((r=this.beans.rowSpanSvc)!=null&&r.isCellSpanning(e,this.rowNode)))return new xp(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){var t;return!((t=this.beans.rowSpanSvc)!=null&&t.isCellSpanning(e.column,this.rowNode))}createCellCtrls(e,t,r=null){const i={list:[],map:{}},n=(d,p,v)=>{v!=null?i.list.splice(v,0,p):i.list.push(p),i.map[d]=p},s=[];for(const d of t){const p=d.getInstanceId();let v=e.map[p];v&&!this.isCorrectCtrlForSpan(v)&&(v.destroy(),v=void 0),v||(v=this.getNewCellCtrl(d)),v&&n(p,v)}for(const d of e.list){const p=d.column.getInstanceId();if(i.map[p]!=null)continue;!this.isCellEligibleToBeRemoved(d,r)?s.push([p,d]):d.destroy()}if(s.length)for(const[d,p]of s){const v=i.list.findIndex(_=>_.column.getLeft()>p.column.getLeft()),y=v===-1?void 0:Math.max(v-1,0);n(d,p,y)}const{focusSvc:a,visibleCols:o}=this.beans,u=a.getFocusedCell();if(u&&u.column.getPinned()==r){const d=u.column.getInstanceId();if(!i.map[d]&&o.allCols.includes(u.column)){const v=this.createFocusedCellCtrl();if(v){const y=i.list.findIndex(P=>P.column.getLeft()>v.column.getLeft()),_=y===-1?void 0:Math.max(y-1,0);n(d,v,_)}}}return i}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,r=e.getFocusedCell();if(!r)return;const i=t==null?void 0:t.getCellSpan(r.column,this.rowNode);if(i){if(i.firstNode!==this.rowNode||!i.doesSpanContain(r))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(r.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(t=>{const r=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(r,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const r=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,r);const i=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");const n=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}}isCellEligibleToBeRemoved(e,t){const{column:n}=e;if(n.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{visibleCols:s,editSvc:a}=this.beans,o=a==null?void 0:a.isEditing(e),u=e.isCellFocused();return o||u?!(s.allCols.indexOf(n)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||cs(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=Wt(this.rowNode.oldRowTop),{visibleCols:r}=this.beans,i=r.isPinningLeft(),n=r.isPinningRight();if(t){const{slideInAnimation:s}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){s.fullWidth=!0;return}s.center=!0,s.left=i,s.right=n}else{const{fadeInAnimation:s}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){s.fullWidth=!0;return}s.center=!0,s.left=i,s.right=n}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(a,o)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,o).params):!0,t=e(this.fullWidthGui,null),r=e(this.centerGui,null),i=e(this.leftGui,"left"),n=e(this.rightGui,"right");return t&&r&&i&&n}addListeners(){const{beans:e,gos:t,rowNode:r}=this,{expansionSvc:i,eventSvc:n,context:s,rowSpanSvc:a}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...(i==null?void 0:i.getRowExpandedListeners(this))??{}}),r.detail&&this.addManagedListeners(r.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(r,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(n,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),a&&this.addManagedListeners(a,{spannedCellsUpdated:({pinned:o})=>{o&&!r.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,s),this.tooltipFeature=this.destroyBean(this.tooltipFeature,s),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,s)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){this.allRowGuis.forEach(u=>{this.addRowDraggerToRow(u)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,s)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged()),cellChanged:e=>this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(r=>r.refreshCell(e)),this.allRowGuis.forEach(r=>{this.setRowCompRowId(r.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(r.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){var e;this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),(e=this.rowEditStyleFeature)==null||e.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=(e==null?void 0:e.row)===this.rowNode?e.position:"none",r=t==="above",i=t==="inside",n=t==="below",a=this.gos.get("treeData")&&(n||r),o=this.rowNode.uiLevel.toString();this.allRowGuis.forEach(u=>{const d=u.rowComp;d.toggleCss("ag-row-highlight-above",r),d.toggleCss("ag-row-highlight-inside",i),d.toggleCss("ag-row-highlight-below",n),d.toggleCss("ag-row-highlight-indent",a),a?u.element.style.setProperty("--ag-row-highlight-level",o):u.element.style.removeProperty("--ag-row-highlight-level")})}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.toggleCss("ag-row-dragging",e))}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),(e=this.beans.rowAutoHeight)==null||e.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:pc(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:r,column:i}=t;if(!(r.element===e.target))return;const a=this.rowNode,{focusSvc:o,navigation:u}=this.beans,d=o.getFocusedCell(),p={rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:(d==null?void 0:d.column)??i};u==null||u.navigateToNextCell(e,e.key,p,!0),e.preventDefault()}onTabKeyDown(e){var o;if(e.defaultPrevented||mc(e))return;const t=this.allRowGuis.find(u=>u.element.contains(e.target)),r=t?t.element:null,i=r===e.target,n=Yi(this.beans);let s=!1;r&&n&&(s=r.contains(n)&&n.classList.contains("ag-cell"));let a=null;!i&&!s&&(a=Sd(this.beans,r,!1,e.shiftKey)),(this.isFullWidth()&&i||!a)&&((o=this.beans.navigation)==null||o.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var t;const e=(t=this.allRowGuis.find(r=>Pc(r.element)))==null?void 0:t.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");this.allRowGuis.forEach(r=>{Bo(r.element,"tabindex",t)})}onFullWidthRowFocused(e){var n,s,a;const t=this.rowNode,r=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1;let i;if(this.fullWidthGui)i=this.fullWidthGui.element;else{const o=this.beans.colModel.getCol(e==null?void 0:e.column),u=o==null?void 0:o.pinned;u?i=u==="right"?(n=this.rightGui)==null?void 0:n.element:(s=this.leftGui)==null?void 0:s.element:i=(a=this.centerGui)==null?void 0:a.element}i&&(i.classList.toggle("ag-full-width-focus",r),r&&(e!=null&&e.forceBrowserFocus)&&i.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const r={list:[],map:{}};return e.list.forEach(i=>{i!==t&&(r.list.push(i),r.map[i.column.getInstanceId()]=i)}),r}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:r}=this;return Cr(this.gos,{type:e,node:r,data:r.data,rowIndex:r.rowIndex,rowPinned:r.rowPinned,event:t})}createRowEventWithSource(e,t){const r=this.createRowEvent(e,t);return r.source=this,r}onRowDblClick(e){if(mc(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),r=this.getColumnForFullWidth(t);if(!(!t||!r))return{rowGui:t,column:r}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e==null?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Bh(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:r}=this.beans;t==null||t.removeAllCellRanges();const i=this.findFullWidthInfoForEvent(e);if(!i)return;const{rowGui:n,column:s}=i,a=n.element,o=e.target,u=this.rowNode;let d=e.defaultPrevented||Zu();a&&a.contains(o)&&NT(o)&&(d=!1),r.setFocusedCell({rowIndex:u.rowIndex,column:s,rowPinned:u.rowPinned,forceBrowserFocus:d})}isSuppressMouseEvent(e){const{gos:t,rowNode:r}=this;if(this.isFullWidth()){const n=this.findFullWidthRowGui(e.target);return Loe(t,n==null?void 0:n.rowComp.getFullWidthCellRendererParams(),r,e)}const i=aP(t,e.target);return i!=null&&px(t,i.column,r,e)}onRowClick(e){if(mc(e)||this.lastMouseDownOnDragger)return;const r=this.isSuppressMouseEvent(e),{eventSvc:i,selectionSvc:n}=this.beans,s=this.createRowEventWithSource("rowClicked",e);s.isEventHandlingSuppressed=r,i.dispatchEvent(s),!r&&(n==null||n.handleSelectionEvent(e,this.rowNode,"rowClicked"))}setupDetailRowAutoHeight(e){var t;this.rowType==="FullWidthDetail"&&((t=this.beans.masterDetailSvc)==null||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:r,rowNode:i}=this,n=Cr(r,{fullWidth:!0,data:i.data,node:i,value:i.key,valueFormatted:i.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,o,u,d)=>this.addFullWidthRowDragging(a,o,u,d),setTooltip:(a,o)=>{r.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(a,o)}}),s=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return Une(s,n);case"FullWidthGroup":{const{value:a,valueFormatted:o}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return n.value=a,n.valueFormatted=o,Hne(s,n)}case"FullWidthLoading":return Vne(s,n);default:return Gne(s,n)}}setupFullWidthRowTooltip(e,t){var r;this.fullWidthGui&&(this.tooltipFeature=(r=this.beans.tooltipSvc)==null?void 0:r.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,r="",i){const{rowDragSvc:n,context:s}=this.beans;if(!n||!this.isFullWidth())return;const a=n.createRowDragComp(()=>r,this.rowNode,void 0,e,t,i);this.createBean(a,s),this.addDestroyFunc(()=>{this.destroyBean(a,s)})}onUiLevelChanged(){const e=wk(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,r="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(i=>{i.rowComp.toggleCss(t,!0),i.rowComp.toggleCss(r,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(r=>r.rowComp.toggleCss("ag-row-first",e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(r=>r.rowComp.toggleCss("ag-row-last",t)))}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var t;const e=[];(t=this.beans.rowStyleSvc)==null||t.processClassesFromGridOptions(e,this.rowNode),e.length&&e.forEach(r=>{this.allRowGuis.forEach(i=>i.rowComp.toggleCss(r,!0))})}postProcessRowClassRules(){var e;(e=this.beans.rowStyleSvc)==null||e.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(r=>r.rowComp.toggleCss(t,!0))},t=>{this.allRowGuis.forEach(r=>r.rowComp.toggleCss(t,!1))})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,r=>r.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){var o,u;const t=this.getPinnedForContainer(e),r=this.isFullWidth(),{rowNode:i,beans:n}=this,s=[];s.push("ag-row"),s.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&s.push("ag-opacity-zero"),s.push(i.rowIndex%2===0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&(s.push("ag-row-pinned"),(o=n.pinnedRowModel)!=null&&o.isManual()&&s.push("ag-row-pinned-manual")),!i.isRowPinned()&&i.pinnedSibling&&s.push("ag-row-pinned-source"),i.isSelected()&&s.push("ag-row-selected"),i.footer&&s.push("ag-row-footer"),s.push("ag-row-level-"+this.rowLevel),i.stub&&s.push("ag-row-loading"),r&&s.push("ag-full-width-row"),(u=n.expansionSvc)==null||u.addExpandedCss(s,i),i.dragging&&s.push("ag-row-dragging");const{rowStyleSvc:a}=n;return a&&(a.processClassesFromGridOptions(s,i),a.preProcessRowClassRules(s,i)),s.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&s.push("ag-row-first"),this.isLastRowOnPage()&&s.push("ag-row-last"),r&&(t==="left"&&s.push("ag-cell-last-left-pinned"),t==="right"&&s.push("ag-cell-first-right-pinned")),s}processStylesFromGridOptions(){var e;return((e=this.beans.rowStyleSvc)==null?void 0:e.processStylesFromGridOptions(this.rowNode))??this.emptyStyle}onRowSelected(e){var t;(t=this.beans.selectionSvc)==null||t.onRowCtrlSelected(this,r=>{(r===this.centerGui||r===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){var e;(e=this.beans.selectionSvc)==null||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:r}=e,{rowNode:i,beans:n,gos:s}=this;r.addManagedListeners(t,{pointerenter:a=>{a.pointerType==="mouse"&&i.dispatchRowEvent("mouseEnter")},pointerleave:a=>{a.pointerType==="mouse"&&i.dispatchRowEvent("mouseLeave")}}),r.addManagedListeners(i,{mouseEnter:()=>{var a;!((a=n.dragSvc)!=null&&a.dragging)&&!s.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(r=>r.element);for(const r of t)r.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),r=this.applyPaginationOffset(t.top,!0)-100,i=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(r,e),i)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,r=this.beans.environment.getDefaultRowHeight(),n=EB(this.gos)?Nu(this.beans,this.rowNode).height:void 0,s=n?`${Math.min(r,n)-2}px`:void 0;this.forEachGui(e,a=>{a.element.style.height=`${t}px`,s&&a.element.style.setProperty("--ag-line-height",s)})}destroyFirstPass(e=!1){var i;this.active=!1;const{rowNode:t}=this;if(!e&&dp(this.gos)&&!t.sticky)if(t.rowTop!=null){const s=this.roundRowTopToBounds(t.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.toggleCss("ag-opacity-zero",!0));(i=this.fullWidthGui)!=null&&i.element.contains(Yi(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const r=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(r),this.beans.eventSvc.dispatchEvent(r),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=t=>(t.list.forEach(r=>r.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){var t;const e=((t=this.beans.pagination)==null?void 0:t.getCurrentPage())??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const r=this.beans.pageBounds.getPixelOffset();return e+r*(t?1:-1)}setRowTop(e){if(!this.printLayout&&Wt(e)){const t=this.applyPaginationOffset(e),n=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let r;if(t.sticky)r=t.stickyRowTop;else{const i=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,n=this.applyPaginationOffset(i);r=t.isRowPinned()?n:this.beans.rowContainerHeight.getRealPixelPosition(n)}return r+"px"}setRowTopStyle(e){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`))}getCellCtrl(e,t=!1){let r=null;return this.getAllCellCtrls().forEach(i=>{i.column==e&&(r=i)}),r!=null||t||this.getAllCellCtrls().forEach(i=>{(i==null?void 0:i.getColSpanningList().indexOf(e))>=0&&(r=i)}),r}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var s,a;const t=this.rowNode.getRowIndexString();if(t===null)return;const r=(((s=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:s.getRowCount())??0)+(((a=this.beans.filterManager)==null?void 0:a.getHeaderRowCount())??0),i=this.rowNode.rowIndex%2===0,n=r+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(t),o.rowComp.toggleCss("ag-row-even",i),o.rowComp.toggleCss("ag-row-odd",!i),sB(o.element,n)})}},Ude=class extends ft{constructor(){super(),this.beanName="navigation",this.onPageDown=yD(this.onPageDown,100),this.onPageUp=yD(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const r=e.key,i=e.altKey,n=e.ctrlKey||e.metaKey,s=!!this.beans.rangeSvc&&e.shiftKey,a=lae(this.gos,e);let o=!1;switch(r){case st.PAGE_HOME:case st.PAGE_END:!n&&!i&&(this.onHomeOrEndKey(r),o=!0);break;case st.LEFT:case st.RIGHT:case st.UP:case st.DOWN:if(!a)return!1;n&&!i&&!s&&(this.onCtrlUpDownLeftRight(r,a),o=!0);break;case st.PAGE_DOWN:case st.PAGE_UP:!n&&!i&&(o=this.handlePageUpDown(r,a,t));break}return o&&e.preventDefault(),o}handlePageUpDown(e,t,r){return r&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===st.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:r,focusIndex:i,focusColumn:n,isAsync:s,rowPinned:a}){const{scrollFeature:o}=this.gridBodyCon;Wt(r)&&!r.isPinned()&&o.ensureColumnVisible(r),Wt(e)&&o.ensureIndexVisible(e,t),s||o.ensureIndexVisible(i);const{focusSvc:u,rangeSvc:d}=this.beans;u.setFocusedCell({rowIndex:i,column:n,rowPinned:a,forceBrowserFocus:!0}),d==null||d.setRangeToCell({rowIndex:i,rowPinned:a,column:n})}onPageDown(e){const t=this.beans,r=AS(t),i=this.getViewportHeight(),{pageBounds:n,rowModel:s,rowAutoHeight:a}=t,o=n.getPixelOffset(),u=r.top+i,d=s.getRowIndexAtPixel(u+o);a!=null&&a.active?this.navigateToNextPageWithAutoHeight(e,d):this.navigateToNextPage(e,d)}onPageUp(e){const t=this.beans,r=AS(t),{pageBounds:i,rowModel:n,rowAutoHeight:s}=t,a=i.getPixelOffset(),o=r.top,u=n.getRowIndexAtPixel(o+a);s!=null&&s.active?this.navigateToNextPageWithAutoHeight(e,u,!0):this.navigateToNextPage(e,u,!0)}navigateToNextPage(e,t,r=!1){const{pageBounds:i,rowModel:n}=this.beans,s=this.getViewportHeight(),a=i.getFirstRow(),o=i.getLastRow(),u=i.getPixelOffset(),d=n.getRow(e.rowIndex),p=r?(d==null?void 0:d.rowHeight)-s-u:s-u,v=(d==null?void 0:d.rowTop)+p;let y=n.getRowIndexAtPixel(v+u);if(y===e.rowIndex){const P=r?-1:1;t=y=e.rowIndex+P}let _;r?(_="bottom",y<a&&(y=a),t<a&&(t=a)):(_="top",y>o&&(y=o),t>o&&(t=o)),this.isRowTallerThanView(n.getRow(y))&&(t=y,_="top"),this.navigateTo({scrollIndex:t,scrollType:_,scrollColumn:null,focusIndex:y,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,r=!1){this.navigateTo({scrollIndex:t,scrollType:r?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const i=this.getNextFocusIndexForAutoHeight(e,r);this.navigateTo({scrollIndex:t,scrollType:r?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const r=t?-1:1,i=this.getViewportHeight(),{pageBounds:n,rowModel:s}=this.beans,a=n.getLastRow();let o=0,u=e.rowIndex;for(;u>=0&&u<=a;){const d=s.getRow(u);if(d){const p=d.rowHeight??0;if(o+p>i)break;o+=p}u+=r}return Math.max(0,Math.min(u,a))}getViewportHeight(){const e=this.beans,t=AS(e),r=this.beans.scrollVisibleSvc.getScrollbarWidth();let i=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(i-=r),i}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const r=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),i=this.getNormalisedPosition(r),{rowIndex:n,rowPinned:s,column:a}=i??r,o=a;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:o,focusIndex:n,focusColumn:o,rowPinned:s})}onHomeOrEndKey(e){const t=e===st.PAGE_HOME,{visibleCols:r,pageBounds:i,rowModel:n}=this.beans,s=r.allCols,a=t?i.getFirstRow():i.getLastRow(),o=n.getRow(a);if(!o)return;const u=(t?s:[...s].reverse()).find(d=>!d.isSuppressNavigable(o));u&&this.navigateTo({scrollIndex:a,scrollType:null,scrollColumn:u,focusIndex:a,focusColumn:u})}onTabKeyDown(e,t){const r=t.shiftKey,i=this.tabToNextCellCommon(e,r,t),n=this.beans,{ctrlsSvc:s,pageBounds:a,focusSvc:o,gos:u}=n;if(i!==!1){i?t.preventDefault():i===null&&s.get("gridCtrl").allowFocusForNextCoreContainer(r);return}if(r){const{rowIndex:d,rowPinned:p}=e.getRowPosition();(p?d===0:d===a.getFirstRow())&&(u.get("headerHeight")===0||Hh(n)?Gp(n,!0,!0):(t.preventDefault(),o.focusPreviousFromFirstCell(t)))}else e instanceof xp&&e.focusCell(!0),(!r&&o.focusOverlay(!1)||Gp(n,r))&&t.preventDefault()}tabToNextCell(e,t){const r=this.beans,{focusSvc:i,rowRenderer:n}=r,s=i.getFocusedCell();if(!s)return!1;let a=jf(r,s);return!a&&(a=n.getRowByPosition(s),!a||!a.isFullWidth())?!1:!!this.tabToNextCellCommon(a,e,t,"api")}tabToNextCellCommon(e,t,r,i="ui"){var u;const{editSvc:n,focusSvc:s}=this.beans;let a;const o=e instanceof xp?e:(u=e.getAllCellCtrls())==null?void 0:u[0];return n!=null&&n.isEditing()?a=n==null?void 0:n.moveToNextCell(o,t,r,i):a=this.moveToNextCellNotEditing(e,t,r),a===null?a:a||!!s.focusedHeader}moveToNextCellNotEditing(e,t,r){const i=this.beans.visibleCols.allCols;let n;if(e instanceof GC){if(n={...e.getRowPosition(),column:t?i[0]:si(i)},this.gos.get("embedFullWidthRows")&&r){const a=e.findFullWidthInfoForEvent(r);a&&(n.column=a.column)}}else n=e.getFocusedCellPosition();const s=this.findNextCellToFocusOn(n,{backwards:t,startEditing:!1});if(s===!1)return null;if(s instanceof xp)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s,t);return Wt(s)}findNextCellToFocusOn(e,{backwards:t,startEditing:r,skipToNextEditableCell:i}){let n=e;const s=this.beans,{cellNavigation:a,gos:o,focusSvc:u,rowRenderer:d,rangeSvc:p}=s;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=a.getNextTabbedCell(n,t);const v=o.getCallback("tabToNextCell");if(Wt(v)){const R=v({backwards:t,editing:r,previousCellPosition:e,nextCellPosition:n||null});if(R===!0)n=e;else{if(R===!1)return!1;n={rowIndex:R.rowIndex,column:R.column,rowPinned:R.rowPinned}}}if(!n)return null;if(n.rowIndex<0){const P=bl(s);return u.focusHeaderPosition({headerPosition:{headerRowIndex:P+n.rowIndex,column:n.column},fromCell:!0}),null}const y=o.get("editType")==="fullRow";if(r&&(!y||i)&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);const _=jf(s,n);if(!_){const P=d.getRowByPosition(n);if(!P||!P.isFullWidth()||r)continue;return{...P.getRowPosition(),column:n==null?void 0:n.column}}if(!a.isSuppressNavigable(_.column,_.rowNode))return _.setFocusedCellPosition(n),p==null||p.setRangeToCell(n),_}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:r,rowModel:i}=this.beans;return t==="top"?r==null?void 0:r.getPinnedTopRow(e):t==="bottom"?r==null?void 0:r.getPinnedBottomRow(e):i.getRow(e)}navigateToNextCell(e,t,r,i){let n=r,s=!1;const a=this.beans,{cellNavigation:o,focusSvc:u,gos:d}=a;for(;n&&(n===r||!this.isValidNavigateCell(n));)d.get("enableRtl")?t===st.LEFT&&(n=this.getLastCellOfColSpan(n)):t===st.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=o.getNextCellToFocus(t,n),s=Gi(n);if(s&&e&&e.key===st.UP&&(n={rowIndex:-1,rowPinned:null,column:r.column}),i){const v=d.getCallback("navigateToNextCell");if(Wt(v)){const _=v({key:t,previousCellPosition:r,nextCellPosition:n||null,event:e});Wt(_)?n={rowPinned:_.rowPinned,rowIndex:_.rowIndex,column:_.column}:n=null}}if(!n)return;if(n.rowIndex<0){const v=bl(a);u.focusHeaderPosition({headerPosition:{headerRowIndex:v+n.rowIndex,column:r.column},event:e||void 0,fromCell:!0});return}const p=this.getNormalisedPosition(n);p?this.focusPosition(p):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){var i;if(!!((i=this.beans.spannedRowRenderer)!=null&&i.getCellByPosition(e)))return e;this.ensureCellVisible(e);const r=jf(this.beans,e);return r?(e=r.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:r,rowRenderer:i,focusSvc:n,eventSvc:s}=this.beans,a=r.allCols,o=i.getRowByPosition(e);if(!o||!o.isFullWidth())return!1;const u=n.getFocusedCell(),d={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?si(a):a[0])};this.focusPosition(d);const p=t??(u!=null&&Mle(d,u));return s.dispatchEvent({type:"fullWidthRowFocused",rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:d.column,isFullWidthCell:!0,fromBelow:p}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:r}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),r==null||r.setRangeToCell(e)}isValidNavigateCell(e){return!!Ec(this.beans,e)}getLastCellOfColSpan(e){const t=jf(this.beans,e);if(!t)return e;const r=t.getColSpanningList();return r.length===1?e:{rowIndex:e.rowIndex,column:si(r),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=TB(this.gos),r=this.beans.rowModel.getRow(e.rowIndex),i=t&&(r==null?void 0:r.sticky),{scrollFeature:n}=this.gridBodyCon;!i&&Gi(e.rowPinned)&&n.ensureIndexVisible(e.rowIndex),e.column.isPinned()||n.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function AS(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var Wde={moduleName:"KeyboardNavigation",version:jt,beans:[Ude,dde,bhe],apiFunctions:{getFocusedCell:fde,clearFocusedCell:pde,setFocusedCell:gde,setFocusedHeader:yde,tabToNextCell:mde,tabToPreviousCell:vde}},jde=class extends ft{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:r}=this.beans;t?t.calculatePages():e.calculateBounds(0,r.getRowCount()-1)}},$de=class extends ft{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e;return((e=this.topRowBounds)==null?void 0:e.rowIndex)??-1}getLastRow(){var e;return((e=this.bottomRowBounds)==null?void 0:e.rowIndex)??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,r=(e==null?void 0:e.rowTop)??0,i=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:r,pageLastPixel:i}}calculateBounds(e,t){const{rowModel:r}=this.beans,i=r.getRowBounds(e);i&&(i.rowIndex=e),this.topRowBounds=i;const n=r.getRowBounds(t);n&&(n.rowIndex=t),this.bottomRowBounds=n,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var t;const e=((t=this.topRowBounds)==null?void 0:t.rowTop)??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},qde=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",Kde=class extends ft{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const r of this.elements)r&&(qi(r,t),Pl(r,e))}},Zde=class extends ft{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:r}=this.beans,i=cs(e,"print"),n=i?0:t.getColsLeftWidth(),s=i?0:t.getDisplayedColumnsRightWidth();n!=this.leftWidth&&(this.leftWidth=n,r.dispatchEvent({type:"leftPinnedWidthChanged"})),s!=this.rightWidth&&(this.rightWidth=s,r.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=K0(e);if(t<=50)return;const r=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:n,hasLockedPinned:s}=r;let a=n;!a.length&&!s||(i&&(a=i({columns:a,viewportWidth:t})),!(!a||!a.length)&&(a=a.filter(o=>!Eu(o)),this.setColsPinned(a,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new Kde(e,t)}setColsPinned(e,t,r){const{colModel:i,colAnimation:n,visibleCols:s,gos:a}=this.beans;if(!i.cols||!(e!=null&&e.length))return;if(cs(a,"print")){St(37);return}n==null||n.start();let o;t===!0||t==="left"?o="left":t==="right"?o="right":o=null;const u=[];e.forEach(d=>{if(!d)return;const p=i.getCol(d);p&&p.getPinned()!==o&&(this.setColPinned(p,o),u.push(p))}),u.length&&(s.refresh(r),WB(this.eventSvc,u,r)),n==null||n.finish()}initCol(e){const{pinned:t,initialPinned:r}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,r)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const r=e.pinned==="left",i=e.pinned==="right";e.hidden=!0;const n=()=>{const s=r?this.leftWidth:this.rightWidth;if(s==null)return;const a=s==0,o=e.hidden!==a,u=this.gos.get("enableRtl"),d=t.getScrollbarWidth(),v=t.verticalScrollShowing&&(u&&r||!u&&i)?s+d:s;e.comp.setPinnedContainerWidth(`${v}px`),e.comp.setDisplayed(!a),o&&(e.hidden=a,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:i,rightWidth:n}=this,s=K0(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(i+n+e>s)if(s>i+n)e=s-i-n;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,r=this.leftWidth??0,i=t+r;let n=!1;if(i<e)return{columns:[],hasLockedPinned:n};const{visibleCols:s}=this.beans,a=[...s.leftCols],o=[...s.rightCols];let u=0,d=0;const p=0,v=[];let y=i-p-e;for(;(d<a.length||u<o.length)&&y>0;){if(u<o.length){const _=o[u++];if(_.colDef.lockPinned){n=!0;continue}y-=_.getActualWidth(),v.push(_)}if(d<a.length&&y>0){const _=a[d++];if(_.colDef.lockPinned){n=!0;continue}y-=_.getActualWidth(),v.push(_)}}return{columns:v,hasLockedPinned:n}}},Xde={moduleName:"PinnedColumn",version:jt,beans:[Zde],css:[qde]},Yde=class extends ft{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=os(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=ss(e),r=this.descriptionContainer=t.createElement("div");r.classList.add("ag-aria-description-container"),iB(r,"polite"),jre(r,"additions text"),Wre(r,!0),e.eGridDiv.appendChild(r)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){var t;super.destroy();const{descriptionContainer:e}=this;e&&(bo(e),(t=e.parentElement)==null||t.removeChild(e)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},Qde={moduleName:"Aria",version:jt,beans:[Yde]},Jde=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",xk="ag-delay-render",efe=class extends ft{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,t=>{t.gridBodyCtrl.eGridBody.classList.add(xk)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;const{renderStatus:t,ctrlsSvc:r}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}r.getGridBodyCtrl().eGridBody.classList.remove(xk),this.alreadyRevealed=!0}},tfe={moduleName:"ColumnDelayRender",version:jt,beans:[efe],css:[Jde]};function rfe(e){var t;(t=e.overlays)==null||t.showLoadingOverlay()}function ife(e){var t;(t=e.overlays)==null||t.showNoRowsOverlay()}function nfe(e){var t;(t=e.overlays)==null||t.hideOverlay()}var sfe=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",ofe={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},f8=class extends Qi{constructor(){super(ofe),this.eOverlayWrapper=fr,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(sfe)}handleKeyDown(e){if(e.key!==st.TAB||e.defaultPrevented||mc(e))return;const t=this.beans;if(Sd(t,this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=t.focusSvc.focusGridView({column:si(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):i=Gp(t,!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const r=this.eOverlayWrapper.classList,{AUTO_HEIGHT:i,NORMAL:n,PRINT:s}=fx;r.toggle(i,t.autoHeight),r.toggle(n,t.normal),r.toggle(s,t.print)}postConstruct(){this.createManagedBean(new sP(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,r,i){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),r&&this.isGridFocused()){const n=Yi(this.beans);n&&!J5(this.beans)&&(this.elToFocusAfter=n)}e.then(n=>{if(this.activePromise!==e){this.activeOverlay!==n&&(this.destroyBean(n),n=null);return}if(this.activePromise=null,!!n){if(this.activeOverlay!==n&&(this.eOverlayWrapper.appendChild(n.getGui()),this.activeOverlay=n,i)){const s=n;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:a})=>{var o;(o=s.refresh)==null||o.call(s,Cr(this.gos,{...a??{}}))})}r&&this.isGridFocused()&&od(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var i;this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const r=this.updateListenerDestroyFunc;r&&(r(),this.updateListenerDestroyFunc=null),this.destroyBean(e),bo(this.eOverlayWrapper),(i=t==null?void 0:t.focus)==null||i.call(t,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=Yi(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},afe={selector:"AG-OVERLAY-WRAPPER",component:f8},lfe=class extends ft{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=In(this.gos),this.isServerSide=!this.isClientSide&&_d(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){St(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return afe}getOverlayWrapperCompClass(){return f8}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state:e,isClientSide:t,isServerSide:r,beans:{gos:i,colModel:n,rowModel:s}}=this;let a=this.gos.get("loading");a!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&a===void 0&&!i.get("suppressLoadingOverlay")&&(a=!i.get("columnDefs")||!n.ready||!i.get("rowData")&&t),a?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&s.isEmpty()&&!i.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!r&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay($ne(this.beans.userCompFactory,Cr(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(qne(this.beans.userCompFactory,Cr(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,r){var n;const i=(e==null?void 0:e.newAgStackInstance())??null;(n=this.eWrapper)==null||n.showOverlay(i,t,this.isExclusive(),r),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;if(this.state===2){const r=this.beans.ctrlsSvc.get("gridHeaderCtrl");t=(r==null?void 0:r.headerHeight)||0}else this.wrapperPadding!==0&&(t=0);this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},cfe={moduleName:"Overlay",version:jt,userComponents:{agLoadingOverlay:Mae,agNoRowsOverlay:Aae},apiFunctions:{showLoadingOverlay:rfe,showNoRowsOverlay:ife,hideOverlay:nfe},beans:[lfe]},ufe=class extends ft{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=Yne(),nd(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;nd(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),r=e/t;return this.maxScrollY*r}},hfe=400,dfe=class extends ft{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(s=>s.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(s=>s.updateRangeBordersIfRangeCount())},r=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},i=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Bu(this.gos)?r():i()}),Bu(this.gos)&&r()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",i=>this.onSuppressCellFocusChanged(i.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:i,previousValue:n})=>{(!n&&i||n&&!i)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:r}=this.beans;if(r&&this.addManagedPropertyListener("showOpenedGroup",()=>{const i=r.getShowRowGroupCols();i.length&&this.refreshCells({columns:i,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const i=this.gridBodyCtrl;i.setStickyTopHeight(0),i.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=cs(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new ffe(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyTopRowCtrls)??[]}getStickyBottomRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyBottomRowCtrls)??[]}updateAllRowCtrls(){var i;const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),r=((i=this.cachedRowCtrls)==null?void 0:i.getEntries())??[];t.length>0||r.length>0?this.allRowCtrls=[...e,...t,...r]:this.allRowCtrls=e}isCellBeingRendered(e,t){var n;const r=this.rowCtrlsByRowIndex[e];return!t||!r?!!r:r.isFullWidth()?!0:!!((n=this.beans.spannedRowRenderer)==null?void 0:n.getCellByPosition({rowIndex:e,column:t,rowPinned:null}))||!!r.getCellCtrl(t)||!r.isRowRendered()}updateCellFocus(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onCellFocusChanged(e){if(e&&e.rowIndex!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach(r=>t.onFlashCells(r,e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.colModel.getCols().forEach(t=>{const r=u=>{this.getAllCellCtrls().forEach(d=>{d.column===t&&u(d)})},i=()=>{r(u=>u.onLeftChanged())},n=()=>{r(u=>u.onWidthChanged())},s=()=>{r(u=>u.onFirstRightPinnedChanged())},a=()=>{r(u=>u.onLastLeftPinnedChanged())},o=()=>{r(u=>u.onColDefChanged())};t.__addEventListener("leftChanged",i),t.__addEventListener("widthChanged",n),t.__addEventListener("firstRightPinnedChanged",s),t.__addEventListener("lastLeftPinnedChanged",a),t.__addEventListener("colDefChanged",o),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("widthChanged",n),t.__removeEventListener("firstRightPinnedChanged",s),t.__removeEventListener("lastLeftPinnedChanged",a),t.__removeEventListener("colDefChanged",o)})})}onDomLayoutChanged(){const e=cs(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),r=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,r&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];return this.getAllRowCtrls().forEach(r=>{var n;const i=(n=r.getCellCtrl(e,!0))==null?void 0:n.eGui;i&&t.push(i)}),t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,r){const{pinnedRowModel:i,beans:n,printLayout:s}=this,a=Object.fromEntries(e.map(u=>[u.rowNode.id,u]));i==null||i.forEachPinnedRow(t,(u,d)=>{const p=e[d];p&&i.getPinnedRowById(p.rowNode.id,t)===void 0&&(p.destroyFirstPass(),p.destroySecondPass()),u.id in a&&r?(e[d]=a[u.id],delete a[u.id]):e[d]=new GC(u,n,!1,!1,s)});const o=(t==="top"?i==null?void 0:i.getPinnedTopRowCount():i==null?void 0:i.getPinnedBottomRowCount())??0;e.length=o}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){var r,i;if(e.sticky)(r=this.stickyRowFeature)==null||r.refreshStickyNode(e);else if((i=this.cachedRowCtrls)!=null&&i.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const n=s=>{const a=s[e.rowIndex];a&&a.rowNode===e&&(a.destroyFirstPass(),a.destroySecondPass(),s[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;if(t!=null&&t.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){e==null||e.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){var o;this.getLockOnRefresh();const t=(o=this.beans.focusSvc)==null?void 0:o.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const r=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&dp(this.gos),n=r?this.getRowsToRecycle():null;r||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:s,gos:a}=this;if(s){s.checkStickyRows();const u=s.extraTopHeight+s.extraBottomHeight;u&&this.updateContainerHeights(u)}this.recycleRows(n,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(a.get("enableRowPinning")?r:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var i;const t=e.newData||e.newPage,r=this.gos.get("suppressScrollOnNewData");t&&!r&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),(i=this.stickyRowFeature)==null||i.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let r=this.pageBounds.getCurrentPageHeight();r===0&&(r=1),t.setModelHeight(r+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(Ml(252));this.refreshInProgress=!0,(t=(e=this.beans.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.beans.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,r=this.findPositionToFocus(e);if(!r){t.focusHeaderPosition({headerPosition:{headerRowIndex:bl(this.beans)-1,column:e.column}});return}if(e.rowIndex!==r.rowIndex||e.rowPinned!=r.rowPinned){t.setFocusedCell({...r,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(Cr(this.gos,{...r,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:r}=this.beans;let i=e;for(i.rowPinned==null&&t&&r&&!t.isRowInPage(i.rowIndex)&&(i={rowPinned:null,rowIndex:r.getFirstRow()});i;){if(i.rowPinned==null&&r)if(i.rowIndex<r.getFirstRow()){if(i=NC(this.beans,{rowPinned:null,rowIndex:0}),!i)return null}else i.rowIndex>r.getLastRow()&&(i={rowPinned:null,rowIndex:r.getLastRow()});const n=this.getRowByPosition(i);if(n!=null&&n.isAlive())return{...n.getRowPosition(),column:e.column};i=NC(this.beans,i)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),r=t.length;for(let i=0;i<r;i++){const n=t[i].getAllCellCtrls(),s=n.length;for(let a=0;a<s;a++)e.push(n[a])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),r=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...r,...(e==null?void 0:e.getCtrls("top"))??[],...(e==null?void 0:e.getCtrls("bottom"))??[],...(e==null?void 0:e.getCtrls("center"))??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,r){const i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,r)}refreshCells({rowNodes:e,columns:t,force:r,suppressFlash:i}={}){const n={force:r,newData:!1,suppressFlash:i};for(const s of this.getCellCtrls(e,t))s.refreshOrDestroyCell(n);this.refreshFullWidth(e)}refreshRows(e={}){this.getRowCtrls(e.rowNodes).forEach(t=>t.refreshRow(e)),this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const r of this.getRowCtrls(e)){if(!r.isFullWidth())continue;r.refreshFullWidth()||(t=!0,this.redrawRow(r.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=D2(e),r=this.getAllRowCtrls();return!e||!t?r:r.filter(i=>{const n=i.rowNode;return k2(n,t)})}getCellCtrls(e,t){let r;Wt(t)&&(r={},t.forEach(n=>{const s=this.colModel.getCol(n);Wt(s)&&(r[s.getId()]=!0)}));const i=[];return this.getRowCtrls(e).forEach(n=>{n.getAllCellCtrls().forEach(s=>{const a=s.column.getId();r&&!r[a]||i.push(s)})}),i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){var r;const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),(r=this.stickyRowFeature)==null||r.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const r of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[r].rowNode.id==null&&e.push(r);this.removeRowCtrls(e);const t={};for(const r of Object.values(this.rowCtrlsByRowIndex)){const i=r.rowNode;t[i.id]=r}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(r=>{const i=this.rowCtrlsByRowIndex[r];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[r]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:r}=this.beans,{afterScroll:i}=e;let n;const s=this.stickyRowFeature;s&&(n=(t==null?void 0:t.getFocusCellToUseAfterRefresh())||void 0);const a=this.firstRenderedRow,o=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let u=!1;if(s){u=s.checkStickyRows();const p=s.extraTopHeight+s.extraBottomHeight;p&&this.updateContainerHeights(p)}const d=this.firstRenderedRow!==a||this.lastRenderedRow!==o;if(!(i&&!u&&!d)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i&&!u),n!=null)){const p=t==null?void 0:t.getFocusCellToUseAfterRefresh();n!=null&&p==null&&(r==null||r.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){const r={};e.forEach(s=>r[s]=!0);const n=Object.keys(this.rowCtrlsByRowIndex).filter(s=>!r[s]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){var a,o;const t=[];for(let u=this.firstRenderedRow;u<=this.lastRenderedRow;u++)t.push(u);const r=this.beans.pagination,i=(o=(a=this.beans.focusSvc)==null?void 0:a.getFocusedCell())==null?void 0:o.rowIndex;i!=null&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&(!r||r.isRowInPage(i))&&i<this.rowModel.getRowCount()&&t.push(i);const n=u=>{const d=u.rowNode.rowIndex;d==null||d===i||(d<this.firstRenderedRow||d>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(u)&&t.push(d)};for(const u of Object.values(this.rowCtrlsByRowIndex))n(u);if(e)for(const u of Object.values(e))n(u);t.sort((u,d)=>u-d);const s=[];for(let u=0;u<t.length;u++){const d=t[u],p=this.rowModel.getRow(d);p&&!p.sticky&&s.push(d)}return s}recycleRows(e,t=!1,r=!1){const i=this.calculateIndexesToDraw(e);if((this.printLayout||r)&&(t=!1),this.removeRowCompsNotToDraw(i,!t),i.forEach(n=>{this.createOrUpdateRowCtrl(n,e,t,r)}),e){const{animationFrameSvc:n}=this.beans;(n==null?void 0:n.active)&&r&&!this.printLayout?n.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),r=e.isPinningRight();(this.pinningLeft!==t||r!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=r,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const r=t.rowNode.rowIndex;e.push(r.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=D2(e);return this.getAllRowCtrls().filter(r=>{if(!r.isFullWidth())return!1;const i=r.rowNode;return!(t!=null&&!k2(i,t))})}createOrUpdateRowCtrl(e,t,r,i){let n,s=this.rowCtrlsByRowIndex[e];if(s||(n=this.rowModel.getRow(e),Wt(n)&&Wt(t)&&t[n.id]&&n.alreadyRendered&&(s=t[n.id],t[n.id]=null)),!s)if(n||(n=this.rowModel.getRow(e)),Wt(n))s=this.createRowCon(n,r,i);else return;return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s,s}destroyRowCtrls(e,t){const r=[];if(e){for(const i of Object.values(e))if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);continue}if(i.destroyFirstPass(!t),t){const n=i.instanceId;this.zombieRowCtrls[n]=i,r.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[n]})}else i.destroySecondPass()}}t&&(r.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>r.forEach(i=>i()),hfe))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=Gh(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:r}=this;e.updateOffset();let i,n;if(!r.isRowsToRender())i=0,n=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),i=t.getFirstRow(),n=t.getLastRow();else{const p=this.getRowBufferInPixels(),v=this.ctrlsSvc.getScrollFeature(),y=this.gos.get("suppressRowVirtualisation");let _=!1,P,R;do{const G=t.getPixelOffset(),{pageFirstPixel:j,pageLastPixel:ee}=t.getCurrentPagePixelRange(),q=e.divStretchOffset,oe=v.getVScrollPosition(),ue=oe.top,me=oe.bottom;y?(P=j+q,R=ee+q):(P=Math.max(ue+G-p,j)+q,R=Math.min(me+G+p,ee)+q),this.firstVisibleVPixel=Math.max(ue+G,j)+q,this.lastVisibleVPixel=Math.min(me+G,ee)+q,_=this.ensureAllRowsInRangeHaveHeightsCalculated(P,R)}while(_);let M=r.getRowIndexAtPixel(P),F=r.getRowIndexAtPixel(R);const k=t.getFirstRow(),N=t.getLastRow();M<k&&(M=k),F>N&&(F=N),i=M,n=F}const s=cs(this.gos,"normal"),a=this.gos.get("suppressMaxRenderedRowRestriction"),o=Math.max(this.getRowBuffer(),500);s&&!a&&n-i>o&&(n=i+o);const u=i!==this.firstRenderedRow,d=n!==this.lastRenderedRow;(u||d)&&(this.firstRenderedRow=i,this.lastRenderedRow=n,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:i,lastRow:n}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,Fc(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var o,u;const r=(o=this.pinnedRowModel)==null?void 0:o.ensureRowHeightsValid(),i=(u=this.stickyRowFeature)==null?void 0:u.ensureRowHeightsValid(),{pageBounds:n,rowModel:s}=this,a=s.ensureRowHeightsValid(e,t,n.getFirstRow(),n.getLastRow());return(a||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),i||a||r?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){var d;const i=e.rowNode,n=this.focusSvc.isRowFocused(i.rowIndex,i.rowPinned),s=(d=this.editSvc)==null?void 0:d.isEditing(e),a=i.detail;return n||s||a?!!this.isRowPresent(i):!1}isRowPresent(e){var t;return this.rowModel.isRowPresent(e)?((t=this.beans.pagination)==null?void 0:t.isRowInPage(e.rowIndex))??!0:!1}createRowCon(e,t,r){var a,o;const i=((a=this.cachedRowCtrls)==null?void 0:a.getRow(e))??null;if(i)return i;const n=r&&!this.printLayout&&!!((o=this.beans.animationFrameSvc)!=null&&o.active);return new GC(e,this.beans,t,n,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(i=>i.rowNode),t=this.getStickyTopRowCtrls().map(i=>i.rowNode),r=this.getStickyBottomRowCtrls().map(i=>i.rowNode);return[...t,...e,...r]}getRowByPosition(e){let t;const{rowIndex:r}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[r];break;case"bottom":t=this.bottomRowCtrls[r];break;default:t=this.rowCtrlsByRowIndex[r],t||(t=this.getStickyTopRowCtrls().find(i=>i.rowNode.rowIndex===r)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.rowNode.rowIndex===r)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},ffe=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,r=this.entriesMap[t];delete this.entriesMap[t],xa(this.entriesList,r)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],xa(this.entriesList,e)}getEntries(){return this.entriesList}};function D2(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(r=>{const i=r.id;switch(r.rowPinned){case"top":t.top[i]=r;break;case"bottom":t.bottom[i]=r;break;default:t.normal[i]=r;break}}),t}function k2(e,t){const r=e.id;switch(e.rowPinned){case"top":return t.top[r]!=null;case"bottom":return t.bottom[r]!=null;default:return t.normal[r]!=null}}var pfe=class extends ft{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=wl(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=wl(e))}doFullSort(e,t){const r=e.map((i,n)=>({currentPos:n,rowNode:i}));return r.sort(this.compareRowNodes.bind(this,t)),r.map(i=>i.rowNode)}compareRowNodes(e,t,r){const i=t.rowNode,n=r.rowNode;for(let s=0,a=e.length;s<a;s++){const o=e[s],u=o.sort==="desc",d=this.getValue(i,o.column),p=this.getValue(n,o.column);let v;const y=this.getComparator(o,i);if(y?v=y(d,p,i,n,u):v=Nre(d,p,this.isAccentedSort),!isNaN(v)&&v!==0)return o.sort==="asc"?v:v*-1}return t.currentPos-r.currentPos}getComparator(e,t){const r=e.column,i=r.getColDef().comparator;if(i!=null)return i;if(!r.getColDef().showRowGroup)return;const n=!t.group&&r.getColDef().field;if(!n)return;const s=this.beans.colModel.getColDefCol(n);if(s)return s.getColDef().comparator}getValue(e,t){var o,u;const{valueSvc:r,colModel:i,showRowGroupCols:n,gos:s}=this.beans;if(!this.primaryColumnsSortGroups)return r.getValue(t,e,!1);if(e.rowGroupColumn===t){if(MB(s,i.isPivotActive())){const v=(o=e.allLeafChildren)==null?void 0:o[0];return v?r.getValue(t,v,!1):void 0}const p=n==null?void 0:n.getShowRowGroupCol(t.getId());return p?(u=e.groupData)==null?void 0:u[p.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return r.getValue(t,e,!1)}};function gfe(e){var t;(t=e.sortSvc)==null||t.onSortChanged("api")}var p8={moduleName:"Sort",version:jt,beans:[Ihe,pfe],apiFunctions:{onSortChanged:gfe},userComponents:{agSortIndicator:pP},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},mfe=class extends ft{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:r}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),r.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),nd(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,pp(e.source))}}};function vfe(e){var t;(t=e.valueCache)==null||t.expire()}function yfe(e,t){const{colKey:r,rowNode:i,useFormatter:n}=t,s=e.colModel.getColDefCol(r)??e.colModel.getCol(r);if(Gi(s))return null;const a=e.valueSvc.getValueForDisplay(s,i,n);return n?a.valueFormatted??tg(a.value):a.value}var wfe="paste",xfe=class extends ft{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;In(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:r}=this.beans;if(e.source===wfe||t.get("suppressChangeDetection"))return;const i=e.node,n=[i],s=this.clientSideRowModel,a=s==null?void 0:s.rootNode;if(a&&!i.isRowPinned()){const o=t.get("aggregateOnlyChangedColumns"),u=new J0(o,a);u.addParentNode(i.parent,[e.column]),s.doAggregate(u),u.forEachChangedNodeDepthFirst(d=>{n.push(d),d.sibling&&n.push(d.sibling)})}r.refreshCells({rowNodes:n})}},Cfe=class extends ft{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);ai(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(r){return ai(16,{expression:e,params:t,e:r}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const r=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",r);return t[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},_fe=class extends ft{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,r){if(this.active){const i=this.cacheVersion;e.__cacheVersion!==i&&(e.__cacheVersion=i,e.__cacheData={}),e.__cacheData[t]=r}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},bfe={moduleName:"ValueCache",version:jt,beans:[_fe],apiFunctions:{expireValueCache:vfe}},Sfe={moduleName:"Expression",version:jt,beans:[Cfe]},Efe={moduleName:"ChangeDetection",version:jt,beans:[xfe]},Rfe={moduleName:"CellApi",version:jt,apiFunctions:{getCellValue:yfe}},Tfe=class extends ft{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=_d(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t,r=!1,i=!1,n="ui"){const{showRowGroupColValueSvc:s}=this.beans,a=!e&&t.group,o=e==null?void 0:e.colDef.showRowGroup,u=!this.isTreeData||t.footer;if(s&&u&&(a||o)){const R=s.getGroupValue(t,e);if(R==null)return{value:null,valueFormatted:null};if(!r)return{value:R.value,valueFormatted:null};const M=s.formatAndPrefixGroupColValue(R,e,i);return{value:R.value,valueFormatted:M}}if(!e)return{value:t.key,valueFormatted:null};const d=t.leafGroup&&this.colModel.isPivotMode(),p=t.group&&t.expanded&&!t.footer&&!d,v=this.gos.get("groupSuppressBlankHeader")||!t.sibling,y=p&&!v,_=this.getValue(e,t,y,n),P=r&&!(i&&e.colDef.useValueFormatterForExport===!1);return{value:_,valueFormatted:P?this.formatValue(e,t,_):null}}getValue(e,t,r=!1,i="ui"){var R;if(this.initialised||this.init(),!t)return;const n=e.getColDef(),s=n.field,a=e.getColId(),o=t.data;if(this.hasEditSvc&&i==="ui"){const M=this.editSvc;if(M.isEditing()){const F=M.getCellDataValue({rowNode:t,column:e},!0);if(F!==void 0)return F}}let u;const d=n.showRowGroup;if(typeof d=="string"&&(((R=this.beans.rowGroupColsSvc)==null?void 0:R.getColumnIndex(d))??-1)>t.level)return null;const p=typeof d!="string"||!t.group,v=t.groupData&&a in t.groupData,y=!r&&t.aggData&&t.aggData[a]!==void 0,_=this.isSsrm&&r&&!!n.aggFunc,P=this.isSsrm&&t.footer&&t.field&&(n.showRowGroup===!0||n.showRowGroup===t.field);if(this.isTreeData&&y)u=t.aggData[a];else if(this.isTreeData&&n.valueGetter)u=this.executeValueGetter(n.valueGetter,o,e,t);else if(this.isTreeData&&s&&o)u=a0(o,s,e.isFieldContainsDots());else if(v)u=t.groupData[a];else if(y)u=t.aggData[a];else if(n.valueGetter&&!_){if(!p)return u;u=this.executeValueGetter(n.valueGetter,o,e,t)}else if(P)u=a0(o,t.field,e.isFieldContainsDots());else if(s&&o&&!_){if(!p)return u;u=a0(o,s,e.isFieldContainsDots())}if(this.cellExpressions&&typeof u=="string"&&u.indexOf("=")===0){const M=u.substring(1);u=this.executeValueGetter(M,o,e,t)}return u}parseValue(e,t,r,i){var a;const n=e.getColDef(),s=n.valueParser;if(Wt(s)){const o=Cr(this.gos,{node:t,data:t==null?void 0:t.data,oldValue:i,newValue:r,colDef:n,column:e});return typeof s=="function"?s(o):(a=this.expressionSvc)==null?void 0:a.evaluate(s,o)}return r}getDeleteValue(e,t){return Wt(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,r,i,n=!0){const{expressionSvc:s}=this.beans;let a=null,o;const u=e.getColDef();if(i?o=i:n&&(o=u.valueFormatter),o){const d=t?t.data:null,p=Cr(this.gos,{value:r,node:t,data:d,colDef:u,column:e});typeof o=="function"?a=o(p):a=s?s.evaluate(o,p):null}else if(u.refData)return u.refData[r]||"";return a==null&&Array.isArray(r)&&(a=r.join(", ")),a}setValue(e,t,r,i){var p,v;const n=this.colModel.getColDefCol(t);if(!e||!n)return!1;Gi(e.data)&&(e.data={});const{field:s,valueSetter:a}=n.getColDef();if(Gi(s)&&Gi(a))return St(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(n,r))return St(135),!1;const o=Cr(this.gos,{node:e,data:e.data,oldValue:this.getValue(n,e,void 0,i),newValue:r,colDef:n.getColDef(),column:n});o.newValue=r;let u;if(Wt(a)?typeof a=="function"?u=a(o):u=(p=this.expressionSvc)==null?void 0:p.evaluate(a,o):u=this.setValueUsingField(e.data,s,r,n.isFieldContainsDots()),u===void 0&&(u=!0),!u)return!1;e.resetQuickFilterAggregateText(),(v=this.valueCache)==null||v.onDataChanged();const d=this.getValue(n,e);return this.dispatchCellValueChangedEvent(e,o,d,i),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,o,d,i),!0}dispatchCellValueChangedEvent(e,t,r,i){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:r,value:r,source:i})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,r,i){if(!t)return!1;let n=!1;if(!i)n=e[t]===r,n||(e[t]=r);else{const s=t.split(".");let a=e;for(;s.length>0&&a;){const o=s.shift();s.length===0?(n=a[o]===r,n||(a[o]=r)):a=a[o]}}return!n}executeValueGetterWithValueCache(e,t,r,i){const n=r.getColId(),s=this.valueCache.getValue(i,n);if(s!==void 0)return s;const a=this.executeValueGetterWithoutValueCache(e,t,r,i);return this.valueCache.setValue(i,n,a),a}executeValueGetterWithoutValueCache(e,t,r,i){var a;const n=Cr(this.gos,{data:t,node:i,column:r,colDef:r.getColDef(),getValue:this.getValueCallback.bind(this,i)});let s;return typeof e=="function"?s=e(n):s=(a=this.expressionSvc)==null?void 0:a.evaluate(e,n),s}getValueCallback(e,t){const r=this.colModel.getColDefCol(t);return r?this.getValue(r,e):null}getKeyForNode(e,t){const r=this.getValue(e,t),i=e.getColDef().keyCreator;let n=r;if(i){const s=Cr(this.gos,{value:r,colDef:e.getColDef(),column:e,node:t,data:t.data});n=i(s)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&St(121)),n}},Pfe={moduleName:"CommunityCore",version:jt,beans:[Phe,cle,bue,vne,ufe,Lce,_he,Qhe,fne,$de,jde,dfe,Tfe,Rhe,Che,The,Eue,mfe,yue,wue,cde],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:ule,destroy:hle,isDestroyed:dle,getGridOption:fle,setGridOption:ple,updateGridOptions:G6,isModuleRegistered:gle},dependsOn:[gue,fce,xce,p8,sde,Nce,ode,cfe,Efe,lde,Wde,Xde,Qde,hde,_ue,mue,Sfe,Vce,tfe]},g8={AdvancedFilter:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},IS=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],Mfe={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:IS,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...IS,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...IS,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},Ffe={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function Afe(e,t){const r=[];return(Array.isArray(e)?e:[e]).forEach(i=>{const n=Mfe[i];n?n.forEach(s=>{const a=Ffe[s];(!a||a===t)&&r.push(s)}):r.push(i)}),r}var m8=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,Ife=e=>{const t=e.map(i=>`import { ${l0(i)} } from '${g8[i]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(i=>i==="IntegratedCharts"||i==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(i=>l0(i,!0)).join(", ")} ]); 

For more info see: ${hp}/modules/`};function l0(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function Dfe(e,t){const r=t.filter(s=>s==="IntegratedCharts"||s==="Sparklines");let i="";return!(globalThis==null?void 0:globalThis.agCharts)&&r.length>0?i=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(s=>g8[s])&&(i=i+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),i}function v8({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var Ck=({reasonOrId:e,moduleName:t,gridScoped:r,gridId:i,rowModelType:n,additionalText:s,isUmd:a})=>{const o=Afe(t,n),u=typeof e=="string"?e:Nfe[e];if(a)return Dfe(u,o);const d=o.filter(y=>y==="IntegratedCharts"||y==="Sparklines"),p=d.length>0?`${d.map(y=>l0(y)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${u} as ${o.length>1?"one of "+o.map(y=>l0(y)).join(", "):l0(o[0])} is not registered${r?" for gridId: "+i:""}. ${p} Check if you have registered the module:
`}
${Ife(o)}`+(s?` 

${s}`:"")},_k=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,kfe=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,Lfe={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e==null?void 0:e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e==null?void 0:e.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:r})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",r],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${kfe(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:r,pageSizeOptions:i})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${r?"":" the default"} paginationPageSizeSelector=[${i==null?void 0:i.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:r,jsComps:i})=>{const n=[],s=[...Object.keys(r??[]).filter(o=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(o)),...Object.keys(i??[]).filter(o=>!!i[o])],a=v2({inputValue:t,allSuggestions:s,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return n.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),a.length>0&&n.push(`         Did you mean: [${a.slice(0,3)}]?
`),n.push("If using a custom component check it has been registered correctly."),n},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${hp}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{const r=v2({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,r.length>0?`         Did you mean: [${r.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:r})=>["duplicate group keys for row data, keys should be unique",e,t,...r??[]],187:({rowId:e,firstData:t,secondData:r})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",r],188:e=>`getRowId callback must be provided for Server Side Row Model ${(e==null?void 0:e.feature)||"selection"} to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:Ck,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${hp}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e==null?void 0:e.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>_k("IntegratedChartsModule"),258:()=>_k("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:r,gridId:i,rowModelType:n})=>Ck({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:yp[t],gridId:i,gridScoped:r,rowModelType:n}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${hp}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>m8(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:v8,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`};function Ofe(e,t){const r=Lfe[e];if(!r)return[`Missing error text for error id ${e}!`];const i=r(t),s=`
See ${bB(e,t)}`;return Array.isArray(i)?i.concat(s):[i,s]}var Nfe={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},bk=new WeakMap,Sk=new WeakMap,Bfe=1,zfe=class{create(e,t,r,i,n,s){const a=yB.applyGlobalGridOptions(t),o=a.gridId??String(Bfe++),u=this.getRegisteredModules(n,o,a.rowModelType),d=this.createBeansList(a.rowModelType,u,o),p=this.createProvidedBeans(e,a,n);if(!d)return;const y={providedBeanInstances:p,beanClasses:d,id:o,beanInitComparator:sle,beanDestroyComparator:ole,derivedBeans:[ile],destroyCallback:()=>{Sk.delete(P),bk.delete(e),Mue(o),s==null||s()}},_=new Xse(y);this.registerModuleFeatures(_,u),r(_),_.getBean("syncSvc").start(),i==null||i(_);const P=_.getBean("gridApi");return bk.set(e,P),Sk.set(P,e),P}getRegisteredModules(e,t,r){var i;return ev(Pfe,void 0,!0),(i=e==null?void 0:e.modules)==null||i.forEach(n=>ev(n,t)),Fue(t,Ek(r))}registerModuleFeatures(e,t){const r=e.getBean("registry"),i=e.getBean("apiFunctionSvc");t.forEach(n=>{r.registerModule(n);const s=n.apiFunctions;s&&Object.keys(s).forEach(o=>{i==null||i.addFunction(o,s[o])})})}createProvidedBeans(e,t,r){let i=r?r.frameworkOverrides:null;Gi(i)&&(i=new B6);const n={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:r?r.globalListener:null,globalSyncListener:r?r.globalSyncListener:null,frameworkOverrides:i};return r&&r.providedBeanInstances&&Object.assign(n,r.providedBeanInstances),n}createBeansList(e,t,r){const i={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},n=Ek(e),s=i[n];if(!s){Lm(201,{rowModelType:n},`Unknown rowModelType ${n}.`);return}if(!Due()){Lm(272,void 0,m8());return}if(!e){const o=Object.entries(i).filter(([u,d])=>F2(d,r,u));if(o.length==1){const[u,d]=o[0];if(u!==n){const p={moduleName:d,rowModelType:u};Lm(275,p,v8(p));return}}}if(!F2(s,r,n)){Lm(200,{reasonOrId:`rowModelType = '${n}'`,moduleName:s,gridScoped:dP(),gridId:r,rowModelType:n},`Missing module ${s}Module for rowModelType ${n}.`);return}const a=new Set;return t.forEach(o=>{var u;return(u=o.beans)==null?void 0:u.forEach(d=>a.add(d))}),Array.from(a)}};function Ek(e){return e??"clientSide"}var Gfe=class extends ft{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");return t?mie(t):vie(e.get("localeText"))}};function Vfe(e,t=!1){const r=[],i=[],n=[],s=[],a=[],o=[],u=[],d=[],p=[];let v=0;for(let y=0;y<e.length;y++){const{colId:_,sort:P,sortIndex:R,rowGroup:M,rowGroupIndex:F,aggFunc:k,pivot:N,pivotIndex:G,pinned:j,hide:ee,width:q,flex:oe}=e[y];p.push(_),P&&(r[R??v++]={colId:_,sort:P}),M&&(i[F??0]=_),typeof k=="string"&&n.push({colId:_,aggFunc:k}),N&&(s[G??0]=_),j&&(j==="right"?o:a).push(_),ee&&u.push(_),(oe!=null||q)&&d.push({colId:_,flex:oe??void 0,width:q})}return{sort:r.length?{sortModel:r}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:s.length||t?{pivotMode:t,pivotColIds:s}:void 0,columnPinning:a.length||o.length?{leftColIds:a,rightColIds:o}:void 0,columnVisibility:u.length?{hiddenColIds:u}:void 0,columnSizing:d.length?{columnSizingModel:d}:void 0,columnOrder:p.length?{orderedColIds:p}:void 0}}function Hfe(e){const t=[];return e.forEach(({groupId:r,open:i})=>{i&&t.push(r)}),t.length?{openColumnGroupIds:t}:void 0}var Ufe=class{wrap(e,t,r,i){const n=this.createWrapper(e,i);return t==null||t.forEach(s=>{this.createMethod(n,s,!0)}),r==null||r.forEach(s=>{this.createMethod(n,s,!1)}),n}createMethod(e,t,r){e.addMethod(t,this.createMethodProxy(e,t,r))}createMethodProxy(e,t,r){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(r&&St(49,{methodName:t}),null)}}};function DS(e){return e.get("tooltipShowMode")==="whenTruncated"}function Wfe(e,t){if(typeof e!="number")return"";const r=t(),i=r("thousandSeparator",","),n=r("decimalSeparator",".");return e.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`)}var jfe=class extends ft{getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},$fe=class{constructor(e){const{colModel:t,rowGroupColsSvc:r,colNames:i,valueSvc:n,gos:s,processCellCallback:a,processHeaderCallback:o,processGroupHeaderCallback:u,processRowGroupCallback:d}=e;this.colModel=t,this.rowGroupColsSvc=r,this.colNames=i,this.valueSvc=n,this.gos=s,this.processCellCallback=a,this.processHeaderCallback=o,this.processGroupHeaderCallback=u,this.processRowGroupCallback=d}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,r,i,n){var y;const s=t===0&&FB(this.gos,n,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||n.group)&&(e.isRowGroupDisplayed(((y=n.rowGroupColumn)==null?void 0:y.getColId())??"")||s))return{value:this.processRowGroupCallback(Cr(this.gos,{column:e,node:n}))??""};if(this.processCellCallback)return{value:this.processCellCallback(Cr(this.gos,{accumulatedRowIndex:r,column:e,node:n,value:this.valueSvc.getValueForDisplay(e,n,void 0,void 0).value,type:i,parseValue:_=>this.valueSvc.parseValue(e,n,_,this.valueSvc.getValue(e,n,void 0)),formatValue:_=>this.valueSvc.formatValue(e,n,_)??_}))??""};const a=this.gos.get("treeData"),o=this.valueSvc,u=n.level===-1&&n.footer,d=e.colDef.showRowGroup===!0&&(n.group||a);if(!u&&(s||d)){let _="",P=n;for(;P&&P.level!==-1;){const{value:R,valueFormatted:M}=o.getValueForDisplay(s?void 0:e,P,!0,!0);_=` -> ${M??R??""}${_}`,P=P.parent}return{value:_,valueFormatted:_}}const{value:p,valueFormatted:v}=o.getValueForDisplay(e,n,!0,!0);return{value:p??"",valueFormatted:v}}getHeaderName(e,t){return e?e(Cr(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function qfe(e,t){const r=document.defaultView||window;if(!r){St(52);return}const i=document.createElement("a"),n=r.URL.createObjectURL(t);i.setAttribute("href",n),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:r})),document.body.removeChild(i),r.setTimeout(()=>{r.URL.revokeObjectURL(n)},0)}var Kfe={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},uo="clientSide",Es="serverSide",yf="infinite",Zfe={onGroupExpandedOrCollapsed:[uo],refreshClientSideRowModel:[uo],isRowDataEmpty:[uo],forEachLeafNode:[uo],forEachNodeAfterFilter:[uo],forEachNodeAfterFilterAndSort:[uo],resetRowHeights:[uo,Es],applyTransaction:[uo],applyTransactionAsync:[uo],flushAsyncTransactions:[uo],getBestCostNodeSelection:[uo],getServerSideSelectionState:[Es],setServerSideSelectionState:[Es],applyServerSideTransaction:[Es],applyServerSideTransactionAsync:[Es],applyServerSideRowData:[Es],retryServerSideLoads:[Es],flushServerSideAsyncTransactions:[Es],refreshServerSide:[Es],getServerSideGroupLevelState:[Es],refreshInfiniteCache:[yf],purgeInfiniteCache:[yf],getInfiniteRowCount:[yf],isLastRowIndexKnown:[yf,Es],expandAll:[uo,Es],collapseAll:[uo,Es],onRowHeightChanged:[uo,Es],setRowCount:[yf,Es],getCacheBlockState:[yf,Es]},Xfe={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function Yfe(e,t,r){const i=Xfe[e];if(i){const{version:s,new:a,old:o,message:u}=i,d=o??e;return(...p)=>{const v=a?`Please use ${a} instead. `:"";return s0(`Since ${s} api.${d} is deprecated. ${v}${u??""}`),t.apply(t,p)}}const n=Zfe[e];return n?(...s)=>{const a=r.rowModel.getType();if(!n.includes(a)){up(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`);return}return t.apply(t,s)}:t}var Qfe={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},Jfe={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},epe={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},tpe=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),rpe=class extends ft{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,Eie(Ofe)}warnOnInitialPropertyUpdate(e,t){e==="api"&&Kfe[t]&&St(22,{key:t})}processGridOptions(e){this.processOptions(e,Zhe())}validateApiFunction(e,t){return Yfe(e,t,this.beans)}missingUserComponent(e,t,r,i){const n=yp[t];n?this.gos.assertModuleRegistered(n,`AG Grid '${e}' component: ${t}`):St(101,{propertyName:e,componentName:t,agGridDefaults:r,jsComps:i})}missingDynamicBean(e){const t=Qfe[e];return t?Ml(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){npe.has(e)&&St(10,{eventType:e})}validateIcon(e){if(tpe.has(e)&&St(43,{iconName:e}),Jfe[e])return;const t=epe[e];if(t){ai(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:dP(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}St(134,{iconName:e})}isProvidedUserComp(e){return!!yp[e]}validateColDef(e){this.processOptions(e,Bhe())}processOptions(e,t){const{validations:r,deprecations:i,allProperties:n,propertyExceptions:s,objectName:a,docsUrl:o}=t;n&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...s??[],...Object.keys(i)],n,a,o);const u=new Set;Object.keys(e).forEach(p=>{const v=i[p];if(v){const{message:k,version:N}=v;u.add(`As of v${N}, ${String(p)} is deprecated. ${k??""}`)}const y=e[p];if(y==null||y===!1)return;const _=r[p];if(!_)return;const{dependencies:P,validate:R,supportedRowModels:M,expectedType:F}=_;if(F){const k=typeof y;if(k!==F){u.add(`${String(p)} should be of type '${F}' but received '${k}' (${y}).`);return}}if(M){const k=this.gridOptions.rowModelType??"clientSide";if(!M.includes(k)){u.add(`${String(p)} is not supported with the '${k}' row model. It is only valid with: ${M.join(", ")}.`);return}}if(P){const k=this.checkForRequiredDependencies(p,P,e);if(k){u.add(k);return}}if(R){const k=R(e,this.gridOptions,this.beans);if(k){u.add(k);return}}}),u.size>0&&u.forEach(p=>{s0(p)})}checkForRequiredDependencies(e,t,r){const n=Object.entries(t).filter(([s,a])=>{const o=r[s];return!a.required.includes(o)});return n.length===0?null:n.map(([s,a])=>`'${String(e)}' requires '${s}' to be one of [${a.required.map(o=>o===null?"null":o===void 0?"undefined":o).join(", ")}]. ${a.reason??""}`).join(`
           `)}checkProperties(e,t,r,i,n){const s=["__ob__","__v_skip","__metadata__"],a=ipe(Object.getOwnPropertyNames(e),[...s,...t,...r],r),o=Object.keys(a);for(const u of o){const d=a[u];let p=`invalid ${i} property '${u}' did you mean any of these: ${d.slice(0,8).join(", ")}.`;r.includes("context")&&(p+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),s0(p)}if(o.length>0&&n){const u=this.beans.frameworkOverrides.getDocLink(n);s0(`to see all the valid ${i} properties please check: ${u}`)}}};function ipe(e,t,r){const i={},n=e.filter(s=>!t.some(a=>a===s));return n.length>0&&n.forEach(s=>i[s]=v2({inputValue:s,allSuggestions:r}).values),i}var npe=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),spe={moduleName:"Validation",version:jt,beans:[rpe]};function y8(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}var ope=class extends ft{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var r;const t=!!((r=this.filterManager)!=null&&r.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const r=(i,n)=>{i.hasChildren()&&e&&!n?i.childrenAfterFilter=i.childrenAfterGroup.filter(s=>{const a=s.childrenAfterFilter&&s.childrenAfterFilter.length>0,o=s.data&&this.filterManager.doesRowPassFilter({rowNode:s});return a||o}):i.childrenAfterFilter=i.childrenAfterGroup,y8(i)};if(this.doingTreeDataFiltering()){const i=(s,a)=>{if(s.childrenAfterGroup)for(let o=0;o<s.childrenAfterGroup.length;o++){const u=s.childrenAfterGroup[o],d=a||this.filterManager.doesRowPassFilter({rowNode:u});u.childrenAfterGroup?i(s.childrenAfterGroup[o],d):r(u,d)}r(s,a)},n=s=>i(s,!1);t.executeFromRootNode(n)}else{const i=n=>r(n,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},ape=class extends hP{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,r,i,n){this.comp=e;const s=Rv(this,this.beans.context,n);this.eButtonShowMainFilter=r,this.eFloatingFilterBody=i,this.setGui(t,s),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(s),this.setupLeft(s),this.setupHover(s),this.setupFocus(s),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(s),this.setupUi(),s.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(s);const a=()=>this.onColDefChanged(s);s.addManagedListeners(this.column,{colDefChanged:a}),s.addManagedEventListeners({filterSwitched:({column:o})=>{o===this.column&&a()}}),s.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,r=e.colDef;return Cr(t.gos,{colDef:r,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,r=!!e.floatingFilter;this.active=t&&r}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=pa("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new ig(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();Op(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){var a;const{beans:t}=this;if(Yi(t)===this.eGui)return;const n=Sd(t,this.eGui,null,e.shiftKey);if(n){(a=t.headerNavigation)==null||a.scrollToColumn(this.column),e.preventDefault(),n.focus();return}const s=this.findNextColumnWithFloatingFilter(e.shiftKey);s&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:s},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let r=this.column;do if(r=e?t.getColBefore(r):t.getColAfter(r),!r)break;while(!r.getColDef().filter||!r.getColDef().floatingFilter);return r}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case st.UP:case st.DOWN:case st.LEFT:case st.RIGHT:if(t)return;ld(e);case st.ENTER:t&&od(this.eGui)&&e.preventDefault();break;case st.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const r=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&Bh(e.relatedTarget,"ag-floating-filter");if(r&&i&&e.target===this.eGui){const n=this.lastFocusEvent,s=!!(n&&n.key===st.TAB);if(n&&s){const a=n.shiftKey;od(this.eGui,a)}}this.focusThis()}setupHover(e){var t;(t=this.beans.colHover)==null||t.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new uP(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){var e;this.suppressFilterButton=!((e=this.beans.menuSvc)!=null&&e.isFloatingFilterButtonEnabled(this.column)),this.highlightFilterButtonWhenActive=!zo(this.gos)}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.colFilter)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){var t;const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;(t=this.beans.menuSvc)==null||t.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:r,gos:i}=this,n=s=>{if((s==null?void 0:s.source)==="filterDestroyed"&&(!this.isAlive()||!(t!=null&&t.isAlive())))return;const a=this.comp.getFloatingFilterComp();a&&a.then(o=>{if(o){if(i.get("enableFilterHandlers")){const p=s;let v="filter";p!=null&&p.afterFloatingFilter?v="ui":p!=null&&p.afterDataChange?v="dataChanged":(s==null?void 0:s.source)==="api"&&(v="api"),this.updateFloatingFilterParams(this.userCompDetails,v);return}const u=t==null?void 0:t.getCurrentFloatingFilterParentModel(r),d=s?{...s,columns:s.columns??[],source:s.source==="api"?"api":"columnFilter"}:null;o.onParentModelChanged(u,d)}})};[this.destroySyncListener]=e.addManagedListeners(r,{filterChanged:n}),t!=null&&t.isFilterActive(r)&&n(null)}setupWidth(e){const t=()=>{const r=`${this.column.getActualWidth()}px`;this.comp.setWidth(r)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const r=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const i=this.beans.colFilter,n=this.active?i==null?void 0:i.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,s=this.comp.getFloatingFilterComp();!s||!n?this.updateCompDetails(e,n,r):s.then(a=>{!a||i!=null&&i.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(e,n,r):this.updateFloatingFilterParams(n,"colDef")})}updateCompDetails(e,t,r){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),r&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){var i;if(!e)return;let r=e.params;(i=this.comp.getFloatingFilterComp())==null||i.then(n=>{var s;typeof(n==null?void 0:n.refresh)=="function"&&(this.gos.get("enableFilterHandlers")&&(r={...r,model:Gn(((s=this.beans.colFilter)==null?void 0:s.model)??{},this.column.getColId()),source:t}),n.refresh(r))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function lpe(e,t){var i;const r=e.colModel.getCol(t);if(!r){ai(12,{colKey:t});return}(i=e.menuSvc)==null||i.showColumnMenu({column:r,positionBy:"auto"})}function cpe(e){var t;(t=e.menuSvc)==null||t.hidePopupMenu()}var upe={moduleName:"SharedMenu",version:jt,beans:[Tae],apiFunctions:{showColumnMenu:lpe,hidePopupMenu:cpe}},hpe=class extends ooe{postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getDefaultPopupParent(){return this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:r,event:i}=e,n=t.getBoundingClientRect(),s=this.getParentRect();this.setAlignedTo(t,r);let a=!1;const o=()=>{const u=this.keepXYWithinBounds(r,n.top-s.top,0),d=r.clientWidth>0?r.clientWidth:200;a||(r.style.minWidth=`${d}px`,a=!0);const v=s.right-s.left-d;let y;return this.gos.get("enableRtl")?(y=P(),y<0&&(y=_(),this.setAlignedStyles(r,"left")),y>v&&(y=0,this.setAlignedStyles(r,"right"))):(y=_(),y>v&&(y=P(),this.setAlignedStyles(r,"right")),y<0&&(y=0,this.setAlignedStyles(r,"left"))),{x:y,y:u};function _(){return n.right-s.left-2}function P(){return n.left-s.left-d}};this.positionPopup({ePopup:r,keepWithinBounds:!0,updatePosition:o,postProcessCallback:()=>this.callPostProcessPopup(e,"subMenu",r,t,i instanceof MouseEvent?i:void 0)})}callPostProcessPopup(e,t,r,i,n){const s=this.gos.getCallback("postProcessPopup");if(s){const{column:a,rowNode:o}=e;s({column:a,rowNode:o,ePopup:r,type:t,eventSource:i,mouseEvent:n})}}getActivePopups(){return this.popupList.map(e=>e.element)}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const r of this.popupList)t.applyThemeClasses(r.wrapper)}}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return mc(e)}},q1={moduleName:"Popup",version:jt,beans:[hpe]},dpe=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function fpe(e){const t=e.filterManager;return!!(t!=null&&t.isColumnFilterPresent())||!!(t!=null&&t.isAggregateFilterPresent())}function ppe(e,t){var r;return((r=e.filterManager)==null?void 0:r.getColumnFilterInstance(t))??Promise.resolve(void 0)}function gpe(e,t){var i;const r=e.colModel.getColDefCol(t);if(r)return(i=e.colFilter)==null?void 0:i.destroyFilter(r,"api")}function mpe(e,t){e.frameworkOverrides.wrapIncoming(()=>{var r;return(r=e.filterManager)==null?void 0:r.setFilterModel(t)})}function vpe(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function ype(e,t,r){const{gos:i,colModel:n,colFilter:s}=e;r&&!i.get("enableFilterHandlers")&&(St(288),r=!1);const a=n.getColDefCol(t);return a?(s==null?void 0:s.getModelForColumn(a,r))??null:null}function wpe(e,t,r){var i;return((i=e.filterManager)==null?void 0:i.setColumnFilterModel(t,r))??Promise.resolve()}function xpe(e,t){var i;const r=e.colModel.getCol(t);if(!r){ai(12,{colKey:t});return}(i=e.menuSvc)==null||i.showFilterMenu({column:r,containerType:"columnFilter",positionBy:"auto"})}function Cpe(e){var t;(t=e.menuSvc)==null||t.hideFilterMenu()}function _pe(e,t){var i;const r=e.colModel.getCol(t);if(!r){ai(12,{colKey:t});return}return(i=e.colFilter)==null?void 0:i.getHandler(r,!0)}function bpe(e,t){const{colModel:r,colFilter:i,gos:n}=e;if(!n.get("enableFilterHandlers")){St(287);return}const{colId:s,action:a}=t;if(s){const o=r.getColById(s);o&&(i==null||i.updateModel(o,a))}else i==null||i.updateAllModels(a)}var Spe={filterHandler:()=>({doesFilterPass:()=>!0})},Epe=class extends ft{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={...m6},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){var r,i;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const e=this.gos,t={...((i=(r=e.get("initialState"))==null?void 0:r.filter)==null?void 0:i.filterModel)??{}};this.initialModel=t,this.model={...t},e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api",r){const{colModel:i,dataTypeSvc:n,filterManager:s}=this.beans;if(n!=null&&n.isPendingInference){this.modelUpdates.push({model:e,source:t});return}const a=[],o=this.getModel(!0);if(e){const u=new Set(Object.keys(e));this.allColumnFilters.forEach((d,p)=>{const v=e[p];a.push(this.setModelOnFilterWrapper(d,v)),u.delete(p)}),u.forEach(d=>{const p=i.getColDefCol(d)||i.getCol(d);if(!p){St(62,{colId:d});return}if(!p.isFilterAllowed()){St(63,{colId:d});return}const v=this.getOrCreateFilterWrapper(p,!0);if(!v){St(64,{colId:d});return}a.push(this.setModelOnFilterWrapper(v,e[d],!0))})}else this.model={},this.allColumnFilters.forEach(u=>{a.push(this.setModelOnFilterWrapper(u,null))});Hr.all(a).then(()=>{const u=this.getModel(!0),d=[];this.allColumnFilters.forEach((p,v)=>{const y=o?o[v]:null,_=u?u[v]:null;W0(y,_)||d.push(p.column)}),d.length>0?s==null||s.onFilterChanged({columns:d,source:t}):r&&this.updateActive("filterChanged")})}getModel(e){var s;const t={},{allColumnFilters:r,initialModel:i,beans:{colModel:n}}=this;if(r.forEach((a,o)=>{const u=this.getModelFromFilterWrapper(a);Wt(u)&&(t[o]=u)}),!e)for(const a of Object.keys(i)){const o=i[a];Wt(o)&&!r.has(a)&&((s=n.getCol(a))!=null&&s.isFilterAllowed())&&(t[a]=o)}return t}setState(e,t,r="api"){if(this.state.clear(),t)for(const i of Object.keys(t)){const n=t[i];this.state.set(i,{model:Gn(this.model,i),state:n})}this.setModel(e,r,!0)}getState(){const e=this.state;if(!e.size)return;const t={};let r=!1;return e.forEach((i,n)=>{const s=i.state;s!=null&&(r=!0,t[n]=s)}),r?t:void 0}getModelFromFilterWrapper(e){const r=e.column.getColId();if(e.isHandler)return Gn(this.model,r);const i=e.filter;return i?typeof i.getModel!="function"?(St(66),null):i.getModel():Gn(this.initialModel,r)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){const e=d=>d?d.isFilterActive?d.isFilterActive():(St(67),!1):!1,{colModel:t,gos:r}=this.beans,i=!!u2(r),n=d=>{if(!d.isPrimary())return!0;const v=!t.isPivotActive();return!d.isValueActive()||!v?!1:t.isPivotMode()?!0:i},s=[],a=[],o=(d,p,v)=>{p&&(n(d)?s.push(v):a.push(v))},u=[];return this.allColumnFilters.forEach(d=>{const p=d.column,v=p.getColId();if(d.isHandler)u.push(Hr.resolve().then(()=>{o(p,this.isHandlerActive(p),{colId:v,isHandler:!0,handler:d.handler,handlerParams:d.handlerParams})}));else{const y=tu(d);y&&u.push(y.then(_=>{o(p,e(_),{colId:v,isHandler:!1,comp:_})}))}}),Hr.all(u).then(()=>{this.activeAggregateFilters=s,this.activeColumnFilters=a})}updateFilterFlagInColumns(e,t){var i;const r=[];return this.allColumnFilters.forEach(n=>{const s=n.column;if(n.isHandler)r.push(Hr.resolve().then(()=>{this.setColFilterActive(s,this.isHandlerActive(s),e,t)}));else{const a=tu(n);a&&r.push(a.then(o=>{this.setColFilterActive(s,o.isFilterActive(),e,t)}))}}),(i=this.beans.groupFilter)==null||i.updateFilterFlags(e,t),Hr.all(r)}doFiltersPass(e,t,r){const{data:i,aggData:n}=e,s=r?this.activeAggregateFilters:this.activeColumnFilters,a=r?n:i,o=this.model;for(let u=0;u<s.length;u++){const d=s[u],{colId:p,isHandler:v}=d;if(p!==t)if(v){const{handler:y,handlerParams:_}=d;if(!y.doesFilterPass({node:e,data:a,model:Gn(o,p),handlerParams:_}))return!1}else{const y=d.comp;if(typeof y.doesFilterPass!="function"){ai(91);continue}if(!y.doesFilterPass({node:e,data:a}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return t!=null&&t.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:r}=this.beans,i=()=>{this.isAlive()&&(r==null||r.onFilterChanged(e))};t.isRefreshInProgress()?setTimeout(i,0):i()}updateBeforeFilterChanged(e={}){const{column:t,additionalEventAttributes:r}=e,i=t==null?void 0:t.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",r).then(()=>{this.allColumnFilters.forEach(n=>{var o,u,d;const{column:s,isHandler:a}=n;i!==s.getColId()&&(a&&((u=(o=n.handler).onAnyFilterChanged)==null||u.call(o)),(d=tu(n,a))==null||d.then(p=>{typeof(p==null?void 0:p.onAnyFilterChanged)=="function"&&p.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach(r=>{var s,a;const i=r.isHandler;i&&((a=(s=r.handler).onNewRowsLoaded)==null||a.call(s));const n=tu(r,i);n&&t.push(n.then(o=>{var u;(u=o.onNewRowsLoaded)==null||u.call(o)}))}),Hr.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){const{filterValueSvc:r,colModel:i}=this.beans;return(n,s)=>{const a=s?i.getCol(s):e;return a?r.getValue(a,n,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(t!=null&&t.isHandler)return this.isHandlerActive(e);const r=t==null?void 0:t.filter;return r?r.isFilterActive():Gn(this.initialModel,e.getColId())!=null}isHandlerActive(e){const t=Wt(Gn(this.model,e.getColId()));if(t)return t;const r=this.beans.groupFilter;return r!=null&&r.isGroupFilter(e)?r.isFilterActive(e):!1}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?tu(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const r=tu(t);return r?r.then(i=>({comp:i,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){const r=this.getOrCreateFilterWrapper(e,t);return r!=null&&r.isHandler?r.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let r=this.cachedFilter(e);return!r&&t&&(r=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,r)),r}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>{var r;return(r=this.beans.dataTypeSvc)==null?void 0:r.getBaseDataType(e)},t)}getDefaultFilterFromDataType(e,t=!1){return Gie(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":Toe(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,r,i,n,s){const a=()=>{const d=this.createFilterCompParams(e,n,s),p=i(d,n);return Wne(this.beans.userCompFactory,t,p,r)},o=a();return o?{compDetails:o,createFilterUi:d=>(d?a():o).newAgStackInstance()}:null}createFilterInstance(e,t,r,i){var v,y;const n=this.beans.selectableFilter;n!=null&&n.isSelectable(t)&&(t=n.getFilterDef(e,t));const{handler:s,handlerParams:a,handlerGenerator:o}=this.createHandler(e,t,r)??{},u=this.createFilterComp(e,t,r,i,!!s,"init");if(!u)return{compDetails:null,createFilterUi:null,handler:s,handlerGenerator:o,handlerParams:a};const{compDetails:d,createFilterUi:p}=u;return this.isGlobalButtons&&((y=(v=d.params)==null?void 0:v.buttons)!=null&&y.length||St(281,{colId:e.getColId()})),{compDetails:d,handler:s,handlerGenerator:o,handlerParams:a,createFilterUi:p}}createBaseFilterParams(e,t){const{filterManager:r,rowModel:i}=this.beans;return Cr(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:n=>(r==null?void 0:r.doesRowPassOtherFilters(e.getColId(),n))??!0,rowModel:i})}createFilterCompParams(e,t,r,i){const n=this.filterChangedCallbackFactory(e),s=this.createBaseFilterParams(e,i);if(s.filterChangedCallback=n,s.filterModifiedCallback=i?()=>{}:a=>this.filterModified(e,a),t){const a=s,o=e.getColId(),u=Gn(this.model,o);a.model=u,a.state=this.state.get(o)??{model:u},a.onModelChange=(d,p)=>{this.updateStoredModel(o,d),this.refreshHandlerAndUi(e,d,"ui").then(()=>{n({...p,source:"columnFilter"})})},a.onStateChange=d=>{this.updateState(e,d),this.updateOrRefreshFilterUi(e)},a.onAction=(d,p,v)=>{this.updateModel(e,d,p),this.dispatchLocalEvent({type:"filterAction",column:e,action:d,event:v})},a.getHandler=()=>this.getHandler(e,!0),a.onUiChange=d=>this.filterUiChanged(e,d),a.source=r}return s}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,r){const i=t(),n={created:!0,create:t,filterParams:e.params,compDetails:e,promise:i};return i.then(r),n}createFilterWrapper(e){var o;const{compDetails:t,handler:r,handlerGenerator:i,handlerParams:n,createFilterUi:s}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),u=>u),a=e.getColId();if(r)return delete this.initialModel[a],(o=r.init)==null||o.call(r,{...n,source:"init",model:Gn(this.model,a)}),{column:e,isHandler:!0,handler:r,handlerGenerator:i,handlerParams:n,filterUi:this.createFilterUiForHandler(t,s)};if(s){const u={column:e,filterUi:null,isHandler:!1};return u.filterUi=this.createFilterUiLegacy(t,s,d=>{u.filter=d??void 0}),u}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,r){var _;const{gos:i,frameworkOverrides:n,registry:s}=this.beans;let a;const o=P=>{const R=P.filter;if(KB(R)){const M=R.handler;return M||(a=R.doesFilterPass,a?()=>({doesFilterPass:a}):void 0)}return typeof R=="string"?R:void 0},u=i.get("enableFilterHandlers"),d=u?o(t):void 0,p=P=>()=>this.createBean(s.createDynamicBean(P,!0));let v,y;if(typeof d=="string"){const P=(_=i.get("filterHandlers"))==null?void 0:_[d];P!=null?v=P:goe.has(d)&&(v=p(d),y=d)}else v=d;if(!v){let P;const{compName:R,jsComp:M,fwComp:F}=YB(n,t);R?P=R:M==null&&F==null&&t.filter===!0&&(P=r),y=this.handlerMap[P],y&&(v=p(y))}return v?{filterHandler:v,handlerNameOrCallback:a??y}:u?(In(i)&&St(277,{colId:e.getColId()}),Spe):void 0}createHandler(e,t,r){const i=this.createHandlerFunc(e,t,r);if(!i)return;const n=cS(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:s,filterHandler:a}=i,{handler:o,handlerParams:u}=this.createHandlerFromFunc(e,a,n);return{handler:o,handlerParams:u,handlerGenerator:s??a}}createHandlerFromFunc(e,t,r){const i=e.getColDef(),n=t(Cr(this.gos,{column:e,colDef:i})),s=this.createHandlerParams(e,r);return{handler:n,handlerParams:s}}createHandlerParams(e,t){const r=e.getColDef(),i=e.getColId(),n=this.filterChangedCallbackFactory(e);return Cr(this.gos,{colDef:r,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:s=>{var a;return((a=this.beans.filterManager)==null?void 0:a.doesRowPassOtherFilters(i,s))??!0},onModelChange:(s,a)=>{this.updateStoredModel(i,s),this.refreshHandlerAndUi(e,s,"handler").then(()=>{n({...a,source:"columnFilter"})})},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:r,groupFilter:i}=this.beans;this.allColumnFilters.forEach((s,a)=>{let o;s.column.isPrimary()?o=t.getColDefCol(a):o=t.getCol(a),!(o&&o===s.column)&&(e.push(s.column),this.disposeFilterWrapper(s,"columnChanged"),this.disposeColumnListener(a))});const n=i&&e.every(s=>i.isGroupFilter(s));e.length>0&&!n&&(r==null||r.onFilterChanged({columns:e,source:"api"}))}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const r=this.beans.groupFilter;return r!=null&&r.isGroupFilter(e)?r.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){const{userCompFactory:r,frameworkOverrides:i,selectableFilter:n}=this.beans,s=y=>{const _=this.getOrCreateFilterUi(e);_!=null&&_.then(P=>{y(Y0(P))})},a=e.getColDef(),o=n!=null&&n.isSelectable(a)?n.getFilterDef(e,a):a,u=Ioe(i,o,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",d=this.gos.get("enableFilterHandlers"),p=cS(r,o,this.createFilterCompParams(e,d,"init",!0)),v=Cr(this.gos,{column:e,filterParams:p,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:s,showParentFilter:t});if(d){const y=v,_=e.getColId(),P=this.filterChangedCallbackFactory(e);y.onUiChange=R=>this.floatingFilterUiChanged(e,R),y.model=Gn(this.model,_),y.onModelChange=(R,M)=>{this.updateStoredModel(_,R),this.refreshHandlerAndUi(e,R,"floating",!0).then(()=>{P({...M,source:"columnFilter"})})},y.getHandler=()=>this.getHandler(e,!0),y.source="init"}return Zne(r,a,v,u)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,r,i){if(e.isHandler){const n=t.getColId();delete this.initialModel[n],this.state.delete(n);const s=e.filterUi,a=this.createFilterUiForHandler(r,i);e.filterUi=a,s!=null&&s.created&&s.promise.then(o=>{this.destroyBean(o),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:"paramsUpdated",column:e.column})})}else this.destroyFilter(t,"paramsUpdated")}destroyFilter(e,t="api"){const r=e.getColId(),i=this.allColumnFilters.get(r);this.disposeColumnListener(r),delete this.initialModel[r],i&&this.disposeFilterWrapper(i,t).then(n=>{var s;n&&this.isAlive()&&((s=this.beans.filterManager)==null||s.onFilterChanged({columns:[e],source:"api"}))})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let r=!1;const{column:i,isHandler:n,filterUi:s}=e,a=i.getColId();n&&(r=this.isHandlerActive(i),this.destroyBean(e.handler),delete this.model[a],this.state.delete(a));const o=()=>{this.setColFilterActive(i,!1,"filterDestroyed"),this.allColumnFilters.delete(a),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:i})};if(s){if(s.created)return s.promise.then(u=>(r=n?r:!!(u!=null&&u.isFilterActive()),this.destroyBean(u),o(),r));o()}return Hr.resolve(r)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:(t==null?void 0:t.source)??"columnFilter"})}}filterParamsChanged(e,t="api"){var M,F,k,N,G,j;const r=this.allColumnFilters.get(e);if(!r)return;const i=this.beans,n=r.column,s=n.getColDef(),a=n.isFilterAllowed(),o=this.getDefaultFilter(n),u=i.selectableFilter,d=u!=null&&u.isSelectable(s)?u.getFilterDef(n,s):s,p=a?this.createHandlerFunc(n,d,this.getDefaultFilter(n)):void 0,v=!!p,y=r.isHandler;if(y!=v){this.destroyFilter(n,"paramsUpdated");return}const{compDetails:_,createFilterUi:P}=(a?this.createFilterComp(n,d,o,ee=>ee,v,"colDef"):null)??{compDetails:null,createFilterUi:null},R=(_==null?void 0:_.params)??cS(i.userCompFactory,d,this.createFilterCompParams(n,v,"colDef"));if(y){const ee=(p==null?void 0:p.handlerNameOrCallback)??(p==null?void 0:p.filterHandler),q=Gn(this.model,e);if(r.handlerGenerator!=ee){const oe=r.handler,{handler:ue,handlerParams:me}=this.createHandlerFromFunc(n,p.filterHandler,R);r.handler=ue,r.handlerParams=me,r.handlerGenerator=ee,delete this.model[e],(M=ue.init)==null||M.call(ue,{...me,source:"init",model:null}),this.destroyBean(oe),q!=null&&((F=this.beans.filterManager)==null||F.onFilterChanged({columns:[n],source:t}))}else{const oe=this.createHandlerParams(n,_==null?void 0:_.params);r.handlerParams=oe,(N=(k=r.handler).refresh)==null||N.call(k,{...oe,source:"colDef",model:q})}}if(this.areFilterCompsDifferent(((G=r.filterUi)==null?void 0:G.compDetails)??null,_)||!r.filterUi||!_){this.destroyFilterUi(r,n,_,P);return}r.filterUi.filterParams=R,(j=tu(r,y))==null||j.then(ee=>{(ee!=null&&ee.refresh?ee.refresh(R):!0)===!1?this.destroyFilterUi(r,n,_,P):this.dispatchLocalEvent({type:"filterParamsChanged",column:n,params:R})})}refreshHandlerAndUi(e,t,r,i){const n=this.cachedFilter(e);if(!n)return i&&this.getOrCreateFilterWrapper(e,!0),Hr.resolve();if(!n.isHandler)return Hr.resolve();const{filterUi:s,handler:a,handlerParams:o}=n;return moe(()=>{if(s){const{created:u,filterParams:d}=s;if(u)return s.promise.then(p=>p?{filter:p,filterParams:d}:void 0);s.refreshed=!0}return Hr.resolve(void 0)},a,o,t,this.state.get(e.getColId())??{model:t},r)}setColumnFilterWrapper(e,t){const r=e.getColId();this.allColumnFilters.set(r,t),this.allColumnListeners.set(r,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(r)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:r}=e,{componentClass:i}=t;return!(r===i||(r==null?void 0:r.render)&&(i==null?void 0:i.render)&&r.render===i.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const r=this.getOrCreateFilterUi(t);return r?new Promise(i=>{r.then(n=>{i(Y0(n))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:r})=>{this.setModelForColumn(e,t).then(()=>r())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:i,model:n}=this,s=e.getColId(),a=i.get(s);return a?a.model??null:Gn(n,s)}const r=this.cachedFilter(e);return r?this.getModelFromFilterWrapper(r):null}setModelForColumn(e,t){var r;if((r=this.beans.dataTypeSvc)!=null&&r.isPendingInference){let i=()=>{};const n=new Promise(s=>{i=s});return this.columnModelUpdates.push({key:e,model:t,resolve:i}),n}return new Promise(i=>{this.setModelForColumnLegacy(e,t).then(n=>i(n))})}getStateForColumn(e){return this.state.get(e)??{model:Gn(this.model,e)}}setModelForColumnLegacy(e,t){const r=this.beans.colModel.getColDefCol(e),i=r?this.getOrCreateFilterWrapper(r,!0):null;return i?this.setModelOnFilterWrapper(i,t):Hr.resolve()}setColDefPropsForDataType(e,t,r){var p;const i=e.filter,n=i===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):i;if(typeof n!="string")return;let s,a;const o=this.beans,{filterParams:u,filterValueGetter:d}=e;n==="agMultiColumnFilter"?{filterParams:s,filterValueGetter:a}=((p=o.multiFilter)==null?void 0:p.getParamsForDataType(u,d,t,r))??{}:{filterParams:s,filterValueGetter:a}=Soe(n,u,d,t,r,o,this.getLocaleTextFunc()),e.filterParams=s,a&&(e.filterValueGetter=a)}setColFilterActive(e,t,r,i){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",r)),e.dispatchColEvent("filterChanged",r,i)}setModelOnFilterWrapper(e,t,r){return new Hr(i=>{if(e.isHandler){const s=e.column,a=s.getColId(),o=this.model[a];if(this.updateStoredModel(a,t),r&&t===o){i();return}this.refreshHandlerAndUi(s,t,"api").then(()=>i());return}const n=tu(e);if(n){n.then(s=>{if(typeof(s==null?void 0:s.setModel)!="function"){St(65),i();return}(s.setModel(t)||Hr.resolve()).then(()=>i())});return}i()})}updateStoredModel(e,t){Wt(t)?this.model[e]=t:delete this.model[e];const r=this.state.get(e),i={model:t,state:r==null?void 0:r.state};this.state.set(e,i)}filterModified(e,t){var r;(r=this.getOrCreateFilterUi(e))==null||r.then(i=>{this.eventSvc.dispatchEvent({type:"filterModified",column:e,filterInstance:i,...t})})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"filterUiChanged",column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:e,...t})}updateModel(e,t,r){var a;const i=e.getColId(),n=this.cachedFilter(e),s=()=>n==null?void 0:n.filterUi;BD(t,s,()=>Gn(this.model,i),()=>this.state.get(i),o=>this.updateState(e,o),o=>{var u,d;return(d=(u=s())==null?void 0:u.filterParams)==null?void 0:d.onModelChange(o,r)},n!=null&&n.isHandler?(a=n.handler.processModelToApply)==null?void 0:a.bind(n.handler):void 0)}updateAllModels(e,t){const r=[];this.allColumnFilters.forEach((i,n)=>{var a;const s=this.beans.colModel.getColDefCol(n);s&&BD(e,()=>i.filterUi,()=>Gn(this.model,n),()=>this.state.get(n),o=>this.updateState(s,o),o=>{this.updateStoredModel(n,o),this.dispatchLocalEvent({type:"filterAction",column:s,action:e}),r.push(this.refreshHandlerAndUi(s,o,"ui"))},i!=null&&i.isHandler?(a=i.handler.processModelToApply)==null?void 0:a.bind(i.handler):void 0)}),r.length&&Hr.all(r).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){const t=e.getColId();y6(()=>{var r;return(r=this.cachedFilter(e))==null?void 0:r.filterUi},()=>Gn(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:r}=this;for(const n of r)if(n.source==="COLUMN_MENU")return!1;let i=!1;for(const n of e.keys()){const s=e.get(n);if(s.valid===!1)return!1;(s.model??null)!==Gn(t,n)&&(i=!0)}return i}hasUnappliedModel(e){var i;const{model:t,state:r}=this;return(((i=r.get(e))==null?void 0:i.model)??null)!==Gn(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;const r=this.beans.filterPanelSvc;return r!=null&&r.isActive?!!r.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function Rpe(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function Tpe(e,t="api"){var r;(r=e.filterManager)==null||r.onFilterChanged({source:t})}var Ppe=class extends ft{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:r}=this;this.alwaysPassFilter=r.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=r.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,r="api"){var i;this.isAdvFilterEnabled()||(i=this.colFilter)==null||i.setState(e,t,r)}setFilterModel(e,t="api",r){var i;if(this.isAdvFilterEnabled()){r||this.warnAdvFilters();return}(i=this.colFilter)==null||i.setModel(e,t)}getFilterModel(){var e;return((e=this.colFilter)==null?void 0:e.getModel())??{}}getFilterState(){var e;return(e=this.colFilter)==null?void 0:e.getState()}isColumnFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isAggFilterPresent())}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){var t,r;e?(t=this.colFilter)!=null&&t.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):(r=this.advancedFilter)!=null&&r.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){var e;return!!((e=this.advancedFilter)!=null&&e.isEnabled())}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){u2(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:r,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):Hr.resolve()).then(()=>{var s;const n={source:t,type:"filterChanged",columns:i};r&&Js(n,r),this.eventSvc.dispatchEvent(n),(s=this.colFilter)==null||s.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.colFilter)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilter)!=null&&e.isFilterPresent())}updateAggFiltering(){this.aggFiltering=!!u2(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){var r;const{rowNode:t}=e;return(r=this.alwaysPassFilter)!=null&&r.call(this,t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){var r;const{rowNode:t}=e;return(r=this.alwaysPassFilter)!=null&&r.call(this,t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){var t;return this.isAdvFilterEnabled()?!1:!!((t=this.colFilter)!=null&&t.isFilterAllowed(e))}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){var r;if(this.isAdvFilterEnabled()){if((r=this.beans.dataTypeSvc)!=null&&r.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvFilterEnabled()?!1:!!((e=this.colFilter)!=null&&e.hasFloatingFilters())}getColumnFilterInstance(e){var t;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):((t=this.colFilter)==null?void 0:t.getFilterInstance(e))??Promise.resolve(void 0)}warnAdvFilters(){St(68)}setupAdvFilterHeaderComp(e){var t;(t=this.advancedFilter)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach(e=>this.setAdvFilterModel(e)),this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){var r;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):((r=this.colFilter)==null?void 0:r.setModelForColumn(e,t))??Promise.resolve()}},Mpe=class extends ft{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){var e;(e=this.hidePopup)==null||e.call(this)}showMenuAfterMouseEvent(e,t,r,i){e&&!e.isColumn||this.showPopup(e,n=>{var s;(s=this.popupSvc)==null||s.positionPopupUnderMouseEvent({column:e,type:r,mouseEvent:t,ePopup:n})},r,t.target,zo(this.gos),i)}showMenuAfterButtonClick(e,t,r,i){if(e&&!e.isColumn)return;let n=-1,s="left";const a=zo(this.gos);!a&&this.gos.get("enableRtl")&&(n=1,s="right");const o=a?void 0:4*n,u=a?void 0:4;this.showPopup(e,d=>{var p;(p=this.popupSvc)==null||p.positionPopupByComponent({type:r,eventSource:t,ePopup:d,nudgeX:o,nudgeY:u,alignSide:s,keepWithinBounds:!0,position:"under",column:e})},r,t,a,i)}showPopup(e,t,r,i,n,s){var R;const a=e?this.createBean(new _oe(e,"COLUMN_MENU")):void 0;if(this.activeMenu=a,!(a!=null&&a.hasFilter())||!e){ai(57);return}const o=eo({tag:"div",cls:`ag-menu${n?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(o,{keydown:M=>this.trapFocusWithin(M,o)}),o.appendChild(a==null?void 0:a.getGui());let u;const d=()=>a==null?void 0:a.afterGuiDetached(),p=Vie(this.gos)?i??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,v=M=>{$D(e,!1,"contextMenu");const F=M instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),F&&i&&Pc(i)){const k=i6(i);k==null||k.focus({preventScroll:!0})}d(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,r,e),s==null||s()},y=this.getLocaleTextFunc(),_=n&&r!=="columnFilter"?y("ariaLabelColumnMenu","Column Menu"):y("ariaLabelColumnFilter","Column Filter"),P=(R=this.popupSvc)==null?void 0:R.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:v,positionCallback:()=>t(o),anchorToElement:p,ariaLabel:_});P&&(this.hidePopup=u=P.hideFunc),a.afterInit().then(()=>{t(o),a.afterGuiAttached({container:r,hidePopup:u})}),$D(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,r,e)}trapFocusWithin(e,t){e.key!==st.TAB||e.defaultPrevented||Sd(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),od(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,r){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:r??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},Fpe=class extends ft{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,r){if(!t)return;const i=e.getColDef(),{selectableFilter:n,valueSvc:s}=this.beans,a=r??(n==null?void 0:n.getFilterValueGetter(e.getColId()))??i.filterValueGetter;return a?this.executeFilterValueGetter(a,t.data,e,t,i):s.getValue(e,t)}executeFilterValueGetter(e,t,r,i,n){const{expressionSvc:s,valueSvc:a}=this.beans,o=Cr(this.gos,{data:t,node:i,column:r,colDef:n,getValue:a.getValueCallback.bind(a,i)});return typeof e=="function"?e(o):s==null?void 0:s.evaluate(e,o)}},Ape={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},Ipe=class extends Qi{constructor(){super(Ape,[V1]),this.eFloatingFilterText=fr}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){const r=e,i=r.getHandler();if(i.getModelAsString){const n=i.getModelAsString(r.model);this.eFloatingFilterText.setValue(n)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const r=t.getModelAsString(e);this.eFloatingFilterText.setValue(r)}})}refresh(e){this.init(e)}},yP=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){const r=e.filterOptions??t;this.filterOptions!==r&&(this.filterOptions=r,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;e&&e.forEach(t=>{if(typeof t=="string")return;const r=[["displayKey"],["displayName"],["predicate","test"]],i=n=>n.some(s=>t[s]!=null)?!0:(St(72,{keys:n}),!1);if(!r.every(i)){this.filterOptions=e.filter(n=>n===t)||[];return}this.customFilterOptions[t.displayKey]=t})}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const r=t[0];if(typeof r=="string")return r;if(r.displayKey)return r.displayKey;St(73)}else St(74)}getCustomOption(e){return this.customFilterOptions[e]}};function c0(e,t,r){return r==null?e.splice(t):e.splice(t,r)}function VC(e){return e==null||typeof e=="string"&&e.trim().length===0}function Dpe(e){return e==="AND"||e==="OR"?e:"AND"}function kpe(e,t,r){if(e==null)return;const{predicate:i}=e;if(i!=null&&!t.some(n=>n==null))return i(t,r)}function Lpe(e,t){let r=e.length;return r>t&&(e.splice(t),St(78),r=t),r}function rv(e,t){const r=t.getCustomOption(e);if(r){const{numberOfInputs:n}=r;return n??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}var wP=class extends Aoe{constructor(e,t,r){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=r,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new yP;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=Dpe(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions();const t=this.getGui();this.isReadOnly()?t.setAttribute("tabindex","-1"):t.removeAttribute("tabindex")}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,r)=>{const i=r===0?e:this.optionsFactory.defaultOption;t.setValue(i,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){const r=!e.operator,i=!t.operator;if(!r&&i||r&&!i)return!1;let s;if(r){const a=e,o=t;s=this.areSimpleModelsEqual(a,o)}else{const a=e,o=t;s=a.operator===o.operator&&qu(a.conditions,o.conditions,(u,d)=>this.areSimpleModelsEqual(u,d))}return s}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),Hr.resolve();if(e.operator){const i=e;let n=i.conditions;n==null&&(n=[],St(77));const s=Lpe(n,this.maxNumConditions),a=this.getNumConditions();if(s<a)this.removeConditionsAndOperators(s);else if(s>a)for(let u=a;u<s;u++)this.createJoinOperatorPanel(),this.createOption();const o=i.operator==="OR";this.eJoinAnds.forEach(u=>u.setValue(!o,!0)),this.eJoinOrs.forEach(u=>u.setValue(o,!0)),n.forEach((u,d)=>{this.eTypes[d].setValue(u.type,!0),this.setConditionIntoUi(u,d)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),Hr.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(St(79),t=1),this.maxNumConditions=t;let r=e.numAlwaysVisibleConditions??1;r<1&&(St(80),r=1),r>t&&(St(81),r=t),this.numAlwaysVisibleConditions=r}createOption(){const e=this.getGui(),t=this.createManagedBean(new JT);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const r=this.createEValue();this.eConditionBodies.push(r),e.appendChild(r),this.putOptionsIntoDropdown(t),this.resetType(t);const i=this.getNumConditions()-1;this.forEachPositionInput(i,n=>this.resetInput(n)),this.addChangedListeners(t,i)}createJoinOperatorPanel(){const e=eo({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),r=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const i=this.eJoinPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,n),this.resetJoinOperatorOr(r,i,n),this.isReadOnly()||(t.onValueChange(this.listener),r.onValueChange(this.listener))}createJoinOperator(e,t,r){const i=this.createManagedBean(new use);e.push(i);const n="ag-filter-condition-operator";return i.addCss(n),i.addCss(`${n}-${r}`),t.appendChild(i.getGui()),i}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;t.forEach(r=>{e.addOption(r)}),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,r=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:r?this.getLocaleTextFunc()(r.displayKey,r.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let r=0;r<this.getNumConditions();r++)this.isConditionUiComplete(r)?e=r:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const r=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<r){this.removeConditionsAndOperators(r+1);const i=e+1,n=r-i;n>0&&this.removeConditionsAndOperators(i,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,n)=>{const s=this.isConditionDisabled(n,e);i.setDisabled(s||this.filterListOptions.length<=1),n===1&&(q0(this.eJoinPanels[0],s),this.eJoinAnds[0].setDisabled(s),this.eJoinOrs[0].setDisabled(s))}),this.eConditionBodies.forEach((i,n)=>{qi(i,this.isConditionBodyVisible(n))});const r=(t??this.getJoinOperator())==="OR";this.eJoinAnds.forEach(i=>{i.setValue(!r,!0)}),this.eJoinOrs.forEach(i=>{i.setValue(r,!0)}),this.forEachInput((i,n,s,a)=>{this.setElementDisplayed(i,n<a),this.setElementDisabled(i,this.isConditionDisabled(s,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:r,eConditionBodies:i,eJoinPanels:n,eJoinAnds:s,eJoinOrs:a}=this;this.removeComponents(r,e,t),this.removeElements(i,e,t),this.removeEValues(e,t);const o=Math.max(e-1,0);this.removeElements(n,o,t),this.removeComponents(s,o,t),this.removeComponents(a,o,t)}removeElements(e,t,r){c0(e,t,r).forEach(n=>Ou(n))}removeComponents(e,t,r){c0(e,t,r).forEach(n=>{Ou(n.getGui()),this.destroyBean(n)})}afterGuiAttached(e){var t;if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus)){let r;if(!this.isReadOnly()){const i=this.getInputs(0)[0];i instanceof Ah&&this.isConditionBodyVisible(0)?r=i.getInputElement():r=(t=this.eTypes[0])==null?void 0:t.getFocusableElement()}(r??this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){var a;super.afterGuiDetached();const e=this.params;if((a=this.beans.colFilter)!=null&&a.shouldKeepStateOnDetach(e.column))return;e.onStateChange({model:e.model});let t=-1,r=-1,i=!1;const n=this.getJoinOperator();for(let o=this.getNumConditions()-1;o>=0;o--)if(this.isConditionUiComplete(o))t===-1&&(t=o,r=o);else{const u=o>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(o-1),d=o<t;(u||d)&&(this.removeConditionsAndOperators(o,1),i=!0,d&&r--)}let s=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),s=!0),this.shouldAddNewConditionAtEnd(r===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),s=!0),s&&this.updateConditionStatusesAndValues(r,n),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=r}getModelAsString(e){var t,r;return((r=(t=this.params.getHandler())==null?void 0:t.getModelAsString)==null?void 0:r.call(t,e))??""}getPlaceholderText(e,t){let r=this.translate(e);if(typeof this.filterPlaceholder=="function"){const i=this.eTypes[t].getValue(),n=this.translate(i);r=this.filterPlaceholder({filterOptionKey:i,filterOption:n,placeholder:r})}else typeof this.filterPlaceholder=="string"&&(r=this.filterPlaceholder);return r}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput((t,r,i,n)=>{if(!(t instanceof Ah))return;const s=r===0&&n>1?"inRangeStart":r===0?"filterOoo":"inRangeEnd",a=r===0&&n>1?e("ariaFilterFromValue","Filter from value"):r===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(s,i)),t.setInputAriaLabel(a)})}setElementValue(e,t,r){e instanceof Ah&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){PD(e)&&qi(e.getGui(),t)}setElementDisabled(e,t){PD(e)&&q0(e.getGui(),t)}attachElementOnChange(e,t){e instanceof Ah&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,r)=>{this.forEachPositionTypeInput(r,t,e)})}forEachPositionInput(e,t){const r=this.getConditionType(e);this.forEachPositionTypeInput(e,r,t)}forEachPositionTypeInput(e,t,r){const i=rv(t,this.optionsFactory),n=this.getInputs(e);for(let s=0;s<n.length;s++){const a=n[s];a!=null&&r(a,s,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return rv(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(r=>r==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,r)=>this.resetJoinOperatorAnd(t,r,this.joinOperatorId+r)),this.eJoinOrs.forEach((t,r)=>this.resetJoinOperatorOr(t,r,this.joinOperatorId+r)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const r=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(r).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,r){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),r)}resetJoinOperatorOr(e,t,r){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),r)}resetJoinOperator(e,t,r,i,n){this.updateJoinOperatorDisabled(e.setValue(r,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(i),t)}updateJoinOperatorsDisabled(){const e=(t,r)=>this.updateJoinOperatorDisabled(t,r);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const r=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((i,n,s)=>{s===t&&this.setElementValue(i,r[n]!=null?r[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,r,i)=>{this.setElementValue(t,r===0&&i===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,r=>{this.attachElementOnChange(r,this.listener)}))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}},w8=class{constructor(e,t,r,i,n,s){this.alive=!0,this.context=e,this.eParent=n;const a=jne(t,r,i);a&&a.newAgStackInstance().then(o=>{var p,v;if(!this.alive){e.destroyBean(o);return}if(this.dateComp=o,!o)return;n.appendChild(o.getGui()),(p=o==null?void 0:o.afterGuiAttached)==null||p.call(o);const{tempValue:u,disabled:d}=this;u&&o.setDate(u),d!=null&&((v=o.setDisabled)==null||v.call(o,d)),s==null||s(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){var r;const t=this.dateComp;t?(r=t.setDisabled)==null||r.call(t,e):this.disabled=e}setDisplayed(e){qi(this.eParent,e)}setInputPlaceholder(e){var t,r;(r=(t=this.dateComp)==null?void 0:t.setInputPlaceholder)==null||r.call(t,e)}setInputAriaLabel(e){var t,r;(r=(t=this.dateComp)==null?void 0:t.setInputAriaLabel)==null||r.call(t,e)}afterGuiAttached(e){var t,r;(r=(t=this.dateComp)==null?void 0:t.afterGuiAttached)==null||r.call(t,e)}updateParams(e){var t,r;(r=(t=this.dateComp)==null?void 0:t.refresh)==null||r.call(t,e)}},xP=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function x8(e,t){const{dateFrom:r,dateTo:i,type:n}=e||{};return[r&&So(r,void 0,!0)||null,i&&So(i,void 0,!0)||null].slice(0,rv(n,t))}var Rk=1e3,Tk=1/0,Ope=class extends wP{constructor(){super("dateFilter",x8,xP),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=Rk,this.maxValidYear=Tk,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(u,d)=>{const p=e[u];if(p!=null)if(isNaN(p))St(82,{param:u});else return p==null?d:Number(p);return d},r=t("minValidYear",Rk),i=t("maxValidYear",Tk);this.minValidYear=r,this.maxValidYear=i,r>i&&St(83);const{minValidDate:n,maxValidDate:s}=e,a=n instanceof Date?n:So(n);this.minValidDate=a;const o=s instanceof Date?s:So(s);this.maxValidDate=o,a&&o&&a>o&&St(84)}createDateCompWrapper(e){const{beans:{userCompFactory:t,context:r,gos:i},params:n}=this,s=new w8(r,t,n.colDef,Cr(i,{onDateChanged:()=>this.onUiChanged(),filterParams:n,location:"filter"}),e);return this.addDestroyFunc(()=>s.destroy()),s}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=eo({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,r,i){const n=eo({tag:"div",cls:`ag-filter-${i} ag-filter-date-${i}`});t.push(n),e.appendChild(n),r.push(this.createDateCompWrapper(n))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),c0(this.eConditionPanelsFrom,e,t),c0(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,r){c0(e,t,r).forEach(n=>n.destroy())}isValidDateValue(e){if(e===null)return!1;const{minValidDate:t,maxValidDate:r,minValidYear:i,maxValidYear:n}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<i)return!1;if(r){if(e>r)return!1}else if(e.getUTCFullYear()>n)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((r,i,n,s)=>{n!==e||!t||i>=s||(t=t&&this.isValidDateValue(r.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),r={},i=this.getValues(e),n=this.params.useIsoSeparator?"T":" ";return i.length>0&&(r.dateFrom=Ho(i[0],!0,n)),i.length>1&&(r.dateTo=Ho(i[1],!0,n)),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...r}}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),r=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(r)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:r}=this;return e>=t.length?[null,null]:[t[e],r[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(r,i,n,s)=>{i<s&&t.push(r.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}},C8=class extends ft{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,r=new yP;this.optionsFactory=r,r.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(r,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){const t=e.filterParams,r=this.optionsFactory;r.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:r,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(t==null)return!0;const{operator:r}=t,i=[];if(r){const a=t;i.push(...a.conditions??[])}else i.push(t);const n=r&&r==="OR"?"some":"every",s=this.params.getValue(e.node);return i[n](a=>this.individualConditionPasses(e,a,s))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){const{model:t,filterParams:{filterOptions:r,maxNumConditions:i}}=e;if(t==null)return;let s=C6(t)?t.conditions:[t];const a=(r==null?void 0:r.map(p=>typeof p=="string"?p:p.displayKey))??this.defaultOptions;if(!(!s||s.every(p=>a.find(v=>v===p.type)!==void 0))){this.params={...e,model:null},e.onModelChange(null);return}let u=!1;const d=this.filterType;if((s&&!s.every(p=>p.filterType===d)||t.filterType!==d)&&(s=s.map(p=>({...p,filterType:d})),u=!0),typeof i=="number"&&s&&s.length>i&&(s=s.slice(0,i),u=!0),u){const p=s.length>1?{...t,filterType:d,conditions:s}:{...s[0],filterType:d};this.params={...e,model:p},e.onModelChange(p);return}}individualConditionPasses(e,t,r){const i=this.optionsFactory,n=this.mapValuesFromModel(t,i),s=i.getCustomOption(t.type),a=kpe(s,n,r);return a??(r==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,r,t,e))}},_8=class extends C8{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:r,includeBlanksInGreaterThan:i,includeBlanksInLessThan:n,includeBlanksInRange:s}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(r)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(i)return!0;break;case"lessThan":case"lessThanOrEqual":if(n)return!0;break;case"inRange":if(s)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,r){const i=r.type;if(!this.isValid(t))return i==="notEqual"||i==="notBlank";const n=this.comparator(),s=e[0]!=null?n(e[0],t):0;switch(i){case"equals":return s===0;case"notEqual":return s!==0;case"greaterThan":return s>0;case"greaterThanOrEqual":return s>=0;case"lessThan":return s<0;case"lessThanOrEqual":return s<=0;case"inRange":{const a=n(e[1],t);return this.params.filterParams.inRangeInclusive?s>=0&&a<=0:s>0&&a<0}case"blank":return VC(t);case"notBlank":return!VC(t);default:return St(76,{filterModelType:i}),!0}}},b8={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},Npe={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},CP=class extends ft{constructor(e,t,r){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=r}getModelAsString(e,t){const r=this.getLocaleTextFunc(),i=t==="filterToolPanel";if(!e)return i?hu(this,"filterSummaryInactive"):null;if(e.operator!=null){const s=e,o=(s.conditions??[]).map(d=>this.getModelAsString(d,t)),u=s.operator==="AND"?"andCondition":"orCondition";return o.join(` ${hu(this,u)} `)}else{if(e.type==="blank"||e.type==="notBlank")return i?hu(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):r(e.type,e.type);{const s=e,a=this.optionsFactory.getCustomOption(s.type),{displayKey:o,displayName:u,numberOfInputs:d}=a||{};return o&&u&&d===0?r(o,u):this.conditionToString(s,i,s.type==="inRange"||d===2,o,u)}}}updateParams(e){const{optionsFactory:t,filterParams:r}=e;this.optionsFactory=t,this.filterParams=r}conditionForToolPanel(e,t,r,i,n,s){let a;const o=this.getTypeKey(e);return o&&(a=hu(this,o)),n&&s&&(a=this.getLocaleTextFunc()(n,s)),a!=null?t?`${a} ${hu(this,"filterSummaryInRangeValues",[r(),i()])}`:`${a} ${r()}`:null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},S8=class extends CP{constructor(e,t){super(e,t,r=>{const{dataTypeSvc:i,valueSvc:n}=this.beans,s=t.column,a=i==null?void 0:i.getDateFormatterFunction(s),o=a==null?void 0:a(r??void 0);return n.formatValue(s,null,o)}),this.filterTypeKeys=b8}conditionToString(e,t,r,i,n){const{type:s}=e,a=So(e.dateFrom),o=So(e.dateTo),u=this.filterParams.inRangeFloatingFilterDateFormat,d=t?this.formatValue.bind(this):y=>m2(y,u),p=()=>a!==null?d(a):"null",v=()=>o!==null?d(o):"null";if(t){const y=this.conditionForToolPanel(s,r,p,v,i,n);if(y!=null)return y}return r?`${p()}-${v()}`:a!=null?d(a):`${s}`}};function Bpe(e,t){const r=t;return r<e?-1:r>e?1:0}var zpe=class extends _8{constructor(){super(x8,xP),this.filterType="date",this.FilterModelFormatterClass=S8}comparator(){return this.params.filterParams.comparator??Bpe}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}},E8=class extends Qi{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let r;t?r=e.conditions[0]:r=e,this.lastType=r.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const r=e;return this.isTypeEditable(r.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const r=e;this.onModelUpdated(r.model)}}setParams(e){const t=new yP;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const r=this.optionsFactory.defaultOption;t||(this.lastType=r),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(r);this.setEditable(i)}refresh(e){this.params=e;const t=e,r=this.reactive;if((!r||t.source==="colDef")&&this.updateParams(e),r){const{source:i,model:n}=t;if(i==="dataChanged"||i==="ui")return;this.onModelUpdated(n)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t!=null&&t.afterFloatingFilter||t!=null&&t.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){var r;const t=(r=this.optionsFactory.getCustomOption(e))==null?void 0:r.numberOfInputs;return t==null||t==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},Gpe={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},Vpe=class extends E8{constructor(){super(Gpe,[V1]),this.eReadOnlyText=fr,this.eDateWrapper=fr,this.FilterModelFormatterClass=S8,this.filterType="date",this.defaultOptions=xP}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const r=e?So(e.dateFrom):null;this.dateComp.setDate(r),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){qi(this.eDateWrapper,e),qi(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){const t=this.params;t.onUiChange();const r=t.model,i=Ho(e),n=i==null?null:{...r??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:i};t.onModelChange(n,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t==null||t.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){const{filterParams:e}=this.params,t=nP(e,this.defaultDebounceMs);return Cr(this.gos,{onDateChanged:os(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:r,params:i}=this;this.dateComp=new w8(e,t,i.column.getColDef(),this.getDateComponentParams(),r,n=>{n.setInputAriaLabel(this.getAriaLabel(i))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},Hpe={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},Upe=class extends Qi{constructor(){super(Hpe,[V1]),this.eDateInput=fr,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){var y;const t=this.eDateInput.getInputElement(),r=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=r&&Zu();const{minValidYear:i,maxValidYear:n,minValidDate:s,maxValidDate:a,buttons:o,includeTime:u,colDef:d}=e.filterParams||{},p=this.beans.dataTypeSvc,v=u??((y=p==null?void 0:p.getDateIncludesTimeFlag)==null?void 0:y.call(p,d.cellDataType))??!1;if(r?v?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",s&&i&&St(85),a&&n&&St(86),s&&a){const[_,P]=[s,a].map(R=>R instanceof Date?R:So(R));_&&P&&_.getTime()>P.getTime()&&St(87)}s?s instanceof Date?t.min=m2(s):t.min=s:i&&(t.min=`${i}-01-01`),a?a instanceof Date?t.max=m2(a):t.max=a:n&&(t.max=`${n}-12-31`),this.isApply=e.location==="floatingFilter"&&!!(o!=null&&o.includes("apply"))}refresh(e){this.params=e,this.setParams(e)}getDate(){return So(this.eDateInput.getValue())}setDate(e){var i;const t=this.params.filterParams.colDef.cellDataType,r=((i=this.beans.dataTypeSvc)==null?void 0:i.getDateIncludesTimeFlag(t))??!1;this.eDateInput.setValue(Ho(e,r))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){var t;return((t=e==null?void 0:e.filterParams)==null?void 0:t.browserDatePicker)??!0}},_P=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function L2(e){const{allowedCharPattern:t}=e??{};return t??null}function O2(e){return e==null||isNaN(e)?null:e}function R8(e,t){const{filter:r,filterTo:i,type:n}=e||{};return[O2(r),O2(i)].slice(0,rv(n,t))}var Wpe=class extends wP{constructor(){super("numberFilter",R8,_P),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}setElementValue(e,t,r){const{numberFormatter:i}=this.params,n=!r&&i?i(t??null):t;super.setElementValue(e,n)}createEValue(){const e=L2(this.params),t=eo({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,r,i){const n=this.createManagedBean(i?new Ed({allowedCharPattern:i}):new QT);n.addCss(`ag-filter-${r}`),n.addCss("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeEValues(e,t){const r=i=>this.removeComponents(i,e,t);r(this.eValuesFrom),r(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(r,i,n,s)=>{i<s&&t.push(O2(this.stringToFloat(r.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}stringToFloat(e){if(typeof e=="number")return e;let t=pc(e);t!=null&&t.trim()===""&&(t=null);const r=this.params.numberParser;return r?r(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),r={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(r.filter=i[0]),i.length>1&&(r.filterTo=i[1]),r}getInputs(e){const{eValuesFrom:t,eValuesTo:r}=this;return e>=t.length?[null,null]:[t[e],r[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},T8=class extends CP{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=b8}conditionToString(e,t,r,i,n){const{filter:s,filterTo:a,type:o}=e,u=this.formatValue.bind(this);if(t){const d=this.conditionForToolPanel(o,r,()=>u(s),()=>u(a),i,n);if(d!=null)return d}return r?`${u(s)}-${u(a)}`:s!=null?u(s):`${o}`}},jpe=class extends _8{constructor(){super(R8,_P),this.filterType="number",this.FilterModelFormatterClass=T8}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},P8=class extends ft{constructor(e){super(),this.params=e,this.eInput=fr,this.onValueChanged=()=>{}}setupGui(e){var i;this.eInput=this.createManagedBean(new Ed((i=this.params)==null?void 0:i.config));const t=this.eInput.getGui();e.appendChild(t);const r=n=>this.onValueChanged(n);this.addManagedListeners(t,{input:r,keydown:r})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:r}=this;r.setInputAriaLabel(e),t!==void 0&&r.setAutoComplete(t)}};function N2(e){const t=e==null?void 0:e.trim();return t===""?e:t}function M8(e,t){const{filter:r,filterTo:i,type:n}=e||{};return[r||null,i||null].slice(0,rv(n,t))}var $pe={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},F8=class extends E8{constructor(){super(...arguments),this.eFloatingFilterInputContainer=fr,this.defaultDebounceMs=500}postConstruct(){this.setTemplate($pe)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){const t=e.browserAutoComplete??!1,{inputSvc:r,defaultDebounceMs:i,readOnly:n}=this;if(r.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=U1(e.filterParams),!n){const s=nP(e.filterParams,i),a=os(this,this.syncUpWithParentFilter.bind(this),s);r.setValueChangedListener(a)}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,r=t.getValue();bo(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(r,!0)}syncUpWithParentFilter(e){const t=e.key===st.ENTER,r=this.reactive;if(r&&this.params.onUiChange(),this.applyActive&&!t)return;const{inputSvc:i,params:n,lastType:s}=this;let a=i.getValue();if(n.filterParams.trimInput&&(a=N2(a),i.setValue(a,!0)),r){const o=n,u=o.model,d=this.convertValue(a),p=d==null?null:{...u??{filterType:this.filterType,type:s??this.optionsFactory.defaultOption},filter:d};o.onModelChange(p,{afterFloatingFilter:!0})}else n.parentFilterInstance(o=>{o==null||o.onFloatingFilterChanged(s||null,a||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},qpe=class extends ft{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new QT),this.eTextInput=this.createManagedBean(new Ed),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),r=this.eTextInput.getGui();e.appendChild(t),e.appendChild(r),this.setupListeners(t,i=>this.onValueChanged(i)),this.setupListeners(r,i=>this.onValueChanged(i))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},Kpe=class extends F8{constructor(){super(...arguments),this.FilterModelFormatterClass=T8,this.filterType="number",this.defaultOptions=_P}updateParams(e){L2(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=L2(e.filterParams),this.allowedCharPattern?this.createManagedBean(new P8({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new qpe)}convertValue(e){return e?Number(e):null}},bP=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],Zpe=class extends wP{constructor(){super("textFilter",M8,bP),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),r={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(r.filter=i[0]),i.length>1&&(r.filterTo=i[1]),r}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:r}=this;return e>=t.length?[null,null]:[t[e],r[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(r,i,n,s)=>{i<s&&t.push(pc(r.getValue()))}),t}createEValue(){const e=eo({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:r}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,r,"to"),e}createFromToElement(e,t,r){const i=this.createManagedBean(new Ed);i.addCss(`ag-filter-${r}`),i.addCss("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeEValues(e,t){const r=s=>this.removeComponents(s,e,t),{eValuesFrom:i,eValuesTo:n}=this;r(i),r(n)}},A8=class extends CP{constructor(){super(...arguments),this.filterTypeKeys=Npe}conditionToString(e,t,r,i,n){const{filter:s,filterTo:a,type:o}=e;if(t){const u=p=>()=>hu(this,"filterSummaryTextQuote",[p]),d=this.conditionForToolPanel(o,r,u(s),u(a),i,n);if(d!=null)return d}return r?`${s}-${a}`:s!=null?`${s}`:`${o}`}},Xpe=({filterOption:e,value:t,filterText:r})=>{if(r==null)return!1;switch(e){case"contains":return t.indexOf(r)>=0;case"notContains":return t.indexOf(r)<0;case"equals":return t===r;case"notEqual":return t!=r;case"startsWith":return t.indexOf(r)===0;case"endsWith":{const i=t.lastIndexOf(r);return i>=0&&i===t.length-r.length}default:return!1}},Ype=e=>e,Qpe=e=>e==null?null:e.toString().toLowerCase(),Jpe=class extends C8{constructor(){super(M8,bP),this.filterType="text",this.FilterModelFormatterClass=A8}updateParams(e){super.updateParams(e);const t=e.filterParams;this.matcher=t.textMatcher??Xpe,this.formatter=t.textFormatter??(t.caseSensitive?Ype:Qpe)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,r,i){const n=e.map(y=>this.formatter(y))||[],s=this.formatter(t),{api:a,colDef:o,column:u,context:d,filterParams:{textFormatter:p}}=this.params;if(r.type==="blank")return VC(t);if(r.type==="notBlank")return!VC(t);const v={api:a,colDef:o,column:u,context:d,node:i.node,data:i.data,filterOption:r.type,value:s,textFormatter:p};return n.some(y=>this.matcher({...v,filterText:y}))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){const t=r=>{const i={...r},{filter:n,filterTo:s}=r;return n&&(i.filter=N2(n)??null),s&&(i.filterTo=N2(s)??null),i};return C6(e)?{...e,conditions:e.conditions.map(t)}:t(e)}return e}},ege=class extends F8{constructor(){super(...arguments),this.FilterModelFormatterClass=A8,this.filterType="text",this.defaultOptions=bP}createFloatingFilterInputService(){return this.createManagedBean(new P8)}};function tge(e){var t;return!!((t=e.quickFilter)!=null&&t.isFilterPresent())}function rge(e){var t;return(t=e.quickFilter)==null?void 0:t.getText()}function ige(e){var t;(t=e.quickFilter)==null||t.resetCache()}var nge=class extends ft{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",r=>this.setFilter(r.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){var u;const{autoColSvc:e,colModel:t,gos:r,pivotResultCols:i}=this.beans,n=t.isPivotMode(),s=e==null?void 0:e.getColumns(),a=t.getColDefCols();let o=(n&&!r.get("applyQuickFilterBeforePivotOrAgg")?(u=i==null?void 0:i.getPivotResultCols())==null?void 0:u.list:a)??[];s&&(o=o.concat(s)),this.colsToUse=r.get("includeHiddenColumnsInQuickFilter")?o:o.filter(d=>d.isVisible()||d.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(r=>t?this.doesRowPassCache(e,r):this.doesRowPassNoCache(e,r))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return Wt(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){St(70,{newFilter:e});return}const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),r=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,r&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(r=>{const i=this.getTextForColumn(r,e);return Wt(i)&&i.indexOf(t)>=0})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassMatcher(e,t){let r;e?(this.checkGenerateAggText(t),r=t.quickFilterAggregateText):r=this.getAggText(t);const{quickFilterParts:i,matcher:n}=this;return n(i,r)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let r=this.beans.filterValueSvc.getValue(e,t);const i=e.getColDef();if(i.getQuickFilterText){const n=Cr(this.gos,{value:r,node:t,data:t.data,column:e,colDef:i});r=i.getQuickFilterText(n)}return Wt(r)?r.toString().toUpperCase():null}getAggText(e){const t=[];return this.colsToUse.forEach(r=>{const i=this.getTextForColumn(r,e);Wt(i)&&t.push(i)}),t.join(`
`)}},sge={moduleName:"ClientSideRowModelFilter",version:jt,rowModels:["clientSide"],beans:[ope]},SP={moduleName:"FilterCore",version:jt,beans:[Ppe],apiFunctions:{isAnyFilterPresent:Rpe,onFilterChanged:Tpe},css:[dpe],dependsOn:[sge]},I8={moduleName:"FilterValue",version:jt,beans:[Fpe]},K1={moduleName:"ColumnFilter",version:jt,beans:[Epe,Mpe],dynamicBeans:{headerFilterCellCtrl:ape},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:fpe,getColumnFilterInstance:ppe,destroyFilter:gpe,setFilterModel:mpe,getFilterModel:vpe,getColumnFilterModel:ype,setColumnFilterModel:wpe,showColumnFilter:xpe,hideColumnFilter:Cpe,getColumnFilterHandler:_pe,doFilterAction:bpe},dependsOn:[SP,q1,I8,upe]},oge={moduleName:"CustomFilter",version:jt,userComponents:{agReadOnlyFloatingFilter:Ipe},dependsOn:[K1]},age={moduleName:"TextFilter",version:jt,dependsOn:[K1],userComponents:{agTextColumnFilter:{classImp:Zpe,params:{useForm:!0}},agTextColumnFloatingFilter:ege},dynamicBeans:{agTextColumnFilterHandler:Jpe}},lge={moduleName:"NumberFilter",version:jt,dependsOn:[K1],userComponents:{agNumberColumnFilter:{classImp:Wpe,params:{useForm:!0}},agNumberColumnFloatingFilter:Kpe},dynamicBeans:{agNumberColumnFilterHandler:jpe}},cge={moduleName:"DateFilter",version:jt,dependsOn:[K1],userComponents:{agDateColumnFilter:{classImp:Ope,params:{useForm:!0}},agDateInput:Upe,agDateColumnFloatingFilter:Vpe},dynamicBeans:{agDateColumnFilterHandler:zpe}},uge={moduleName:"QuickFilterCore",version:jt,rowModels:["clientSide"],beans:[nge],dependsOn:[SP,I8]},hge={moduleName:"QuickFilter",version:jt,apiFunctions:{isQuickFilterPresent:tge,getQuickFilter:rge,resetQuickFilter:ige},dependsOn:[uge]},dge={moduleName:"ExternalFilter",version:jt,dependsOn:[SP]},fge=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",kS=(e,t,r)=>{var o,u,d;const{editModelSvc:i}=e,n=(u=(o=i==null?void 0:i.getCellValidationModel())==null?void 0:o.getCellValidation(t))==null?void 0:u.errorMessages,s=(d=i==null?void 0:i.getRowValidationModel().getRowValidation(t))==null?void 0:d.errorMessages,a=n||s;return a&&a.length?a.join(r("tooltipValidationErrorSeparator",". ")):void 0},pge=class extends ft{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,r,i){e&&t.destroyBean(e);const n=DS(this.gos),{column:s,eGui:a}=t,o=s.getColDef();!i&&n&&!o.headerComponent&&(i=ax(()=>a.querySelector(".ag-header-cell-text")));const u={getGui:()=>a,getLocation:()=>"header",getTooltipValue:()=>r??s.getColDef().headerTooltip,shouldDisplayTooltip:i,getAdditionalParams:()=>({column:s,colDef:s.getColDef()})};let d=this.createTooltipFeature(u);return d&&(d=t.createBean(d),t.setRefreshFunction("tooltip",()=>d.refreshTooltip())),d}setupHeaderGroupTooltip(e,t,r,i){e&&t.destroyBean(e);const n=DS(this.gos),{column:s,eGui:a}=t,o=s.getColGroupDef();!i&&n&&!(o!=null&&o.headerGroupComponent)&&(i=ax(()=>a.querySelector(".ag-header-group-text")));const u={getGui:()=>a,getLocation:()=>"headerGroup",getTooltipValue:()=>r??(o&&o.headerTooltip),shouldDisplayTooltip:i,getAdditionalParams:()=>{const p={column:s};return o&&(p.colDef=o),p}},d=this.createTooltipFeature(u);return d&&t.createBean(d)}enableCellTooltipFeature(e,t,r){const{beans:i}=this,{gos:n,editSvc:s}=i,{column:a,rowNode:o}=e;let u="cell";const d=()=>{const _=!!!(s!=null&&s.isEditing(e))&&kS(i,e,this.getLocaleTextFunc());if(_)return u="cellEditor",_;u="cell";const P=a.getColDef(),R=o.data;if(P.tooltipField&&Wt(R))return a0(R,P.tooltipField,a.isTooltipFieldContainsDots());const M=P.tooltipValueGetter;return M?M(Cr(n,{location:"cell",colDef:a.getColDef(),column:a,rowIndex:e.cellPosition.rowIndex,node:o,data:o.data,value:e.value,valueFormatted:e.valueFormatted})):null},p=DS(n);r||(p&&!e.isCellRenderer()?r=()=>{const y=!!(s!=null&&s.isEditing(e));if(!y&&kS(i,e,this.getLocaleTextFunc()))return!0;if(!a.isTooltipEnabled())return!1;const R=ax(()=>{const M=e.eGui;return M.children.length===0?M:M.querySelector(".ag-cell-value")});return!y&&R()}:r=()=>!(s!=null&&s.isEditing(e)));const v={getGui:()=>e.eGui,getLocation:()=>u,getTooltipValue:t!=null?()=>t:d,shouldDisplayTooltip:r,getAdditionalParams:()=>({column:a,colDef:a.getColDef(),rowIndex:e.cellPosition.rowIndex,node:o,data:o.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(v,i)}setupFullWidthRowTooltip(e,t,r,i){const n={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>r,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i},s=this.beans,a=s.context;e&&t.destroyBean(e,a);const o=this.createTooltipFeature(n,s);if(o)return t.createBean(o,a)}setupCellEditorTooltip(e,t){var o,u;const{beans:r}=this,{context:i}=r,n=((o=t.getValidationElement)==null?void 0:o.call(t,!0))||!((u=t.isPopup)!=null&&u.call(t))&&e.eGui;if(!n)return;const s={getGui:()=>n,getTooltipValue:()=>kS(r,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{var P,R;const{editModelSvc:d}=r,p=(P=d==null?void 0:d.getRowValidationModel())==null?void 0:P.getRowValidationMap(),v=(R=d==null?void 0:d.getCellValidationModel())==null?void 0:R.getCellValidationMap(),y=!!p&&p.size>0,_=!!v&&v.size>0;return y||_}},a=this.createTooltipFeature(s,r);if(a)return e.createBean(a,i)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=Wt(t.tooltipField)||Wt(t.tooltipValueGetter)||Wt(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},gge=class extends ioe{createTooltipComp(e,t){const r=Kne(this.beans.userCompFactory,e);r==null||r.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){var e;(e=this.onColumnMovedEventCallback)==null||e.call(this),this.onColumnMovedEventCallback=void 0}},D8={moduleName:"Tooltip",version:jt,beans:[pge],dynamicBeans:{tooltipFeature:p6,highlightTooltipFeature:noe,tooltipStateManager:gge},userComponents:{agTooltipComponent:aoe},dependsOn:[q1],css:[fge]},Tf=class{constructor(e){this.cellValueChanges=e}},LS=class extends Tf{constructor(e,t,r,i){super(e),this.initialRange=t,this.finalRange=r,this.ranges=i}},mge=10,Pk=class{constructor(e){this.actionStack=[],this.maxStackSize=e||mge,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},vge=class extends ft{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},r=this.activeCellEdit!==null&&V6(this.activeCellEdit,t),i=this.activeRowEdit!==null&&Fle(this.activeRowEdit,t);if(!(r||i||this.isPasting||this.isRangeInAction))return;const{rowPinned:s,rowIndex:a,column:o,oldValue:u,value:d}=e,p={rowPinned:s,rowIndex:a,columnId:o.getColId(),newValue:d,oldValue:u};this.cellValueChanges.push(p)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const r=e.get("undoRedoCellEditingLimit");if(r<=0)return;this.undoStack=new Pk(r),this.redoStack=new Pk(r),this.addListeners();const i=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:n=>{n.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:i,newColumnsLoaded:i,columnGroupOpened:i,columnRowGroupChanged:i,columnMoved:i,columnPinned:i,columnVisible:i,rowDragEnd:i}),t.whenReady(this,n=>{this.gridBodyCtrl=n.gridBodyCtrl})}getCurrentUndoStackSize(){var e;return((e=this.undoStack)==null?void 0:e.getCurrentStackSize())??0}getCurrentRedoStackSize(){var e;return((e=this.redoStack)==null?void 0:e.getCurrentStackSize())??0}undo(e){const{eventSvc:t,undoStack:r,redoStack:i}=this;t.dispatchEvent({type:"undoStarted",source:e});const n=this.undoRedo(r,i,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:n})}redo(e){const{eventSvc:t,undoStack:r,redoStack:i}=this;t.dispatchEvent({type:"redoStarted",source:e});const n=this.undoRedo(i,r,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:n})}undoRedo(e,t,r,i,n){if(!e)return!1;const s=e.pop();return!s||!s.cellValueChanges?!1:(this.processAction(s,a=>a[i],n),s instanceof LS?this.processRange(s.ranges||[s[r]]):this.processCell(s.cellValueChanges),t.push(s),!0)}processAction(e,t,r){e.cellValueChanges.forEach(i=>{const{rowIndex:n,rowPinned:s,columnId:a}=i,o={rowIndex:n,rowPinned:s},u=Ec(this.beans,o);u.displayed&&u.setDataValue(a,t(i),r)})}processRange(e){let t;const r=this.beans.rangeSvc;r.removeAllCellRanges(!0),e.forEach((i,n)=>{if(!i)return;const s=i.startRow,a=i.endRow;n===e.length-1&&(t={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));const o={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:a.rowIndex,rowEndPinned:a.rowPinned,columnStart:i.startColumn,columns:i.columns};r.addCellRange(o)})}processCell(e){const t=e[0],{rowIndex:r,rowPinned:i}=t,n={rowIndex:r,rowPinned:i},s=Ec(this.beans,n),a={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(a)}setLastFocusedCell(e){const{rowIndex:t,columnId:r,rowPinned:i}=e,{colModel:n,focusSvc:s,rangeSvc:a}=this.beans,o=n.getCol(r);if(!o)return;const{scrollFeature:u}=this.gridBodyCtrl;u.ensureIndexVisible(t),u.ensureColumnVisible(o);const d={rowIndex:t,column:o,rowPinned:i};s.setFocusedCell({...d,forceBrowserFocus:!0}),a==null||a.setRangeToCell(d)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Tf(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const r=new Tf(this.cellValueChanges);this.pushActionsToUndoStack(r)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Tf(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new LS(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:r}=this.beans;t&&Bu(r)?e=new LS(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new Tf(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this[e]=!0}stopBigChange(e,t){if(!this[e]||(this[e]=!1,(t==null?void 0:t.length)===0))return;const r=new Tf(t??[]);this.pushActionsToUndoStack(r),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},yge=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}",wge={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},xge=class extends j1{constructor(){super(wge,[YT]),this.eEditor=fr}initialiseEditor(e){const t=e.value??void 0,r=this.eEditor;r.setValue(t),r.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(r,{fieldValueChanged:n=>this.setAriaLabel(n.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),r=z1(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${i} (${r})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,r=this.getValue();return t?t({value:r,internalErrors:null,cellEditorParams:e}):null}},Z1=class extends j1{constructor(e){super(),this.cellEditorInput=e,this.eEditor=fr}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:r}=this,{cellStartedEdit:i,eventKey:n,suppressPreventDefault:s}=e;r.getInputElement().setAttribute("title",""),t.init(r,e);let a,o=!0;i?(this.focusAfterAttached=!0,n===st.BACKSPACE||n===st.DELETE?a="":n&&n.length===1?s?o=!1:a=n:(a=t.getStartValue(),n!==st.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=t.getStartValue()),o&&a!=null&&r.setStartValue(a),this.addGuiEventListener("keydown",u=>{const{key:d}=u;(d===st.PAGE_UP||d===st.PAGE_DOWN)&&u.preventDefault()})}afterGuiAttached(){var i,n;const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Zu()||t.getFocusableElement().focus();const r=t.getInputElement();this.highlightAllOnFocus?r.select():(n=(i=this.cellEditorInput).setCaret)==null||n.call(i)}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),r=e.getInputElement();t.focus(),r.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},Cge={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},_ge=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return Cge}getAgComponents(){return[s6]}init(e,t){var a,o;this.eEditor=e,this.params=t;const{min:r,max:i,step:n,colDef:s}=t;r!=null&&e.setMin(r),i!=null&&e.setMax(i),n!=null&&e.setStep(n),this.includeTime=t.includeTime??((o=(a=this.getDataTypeService())==null?void 0:a.getDateIncludesTimeFlag)==null?void 0:o.call(a,s.cellDataType)),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const t=this.eEditor.getInputElement().valueAsDate,{params:r}=this,{min:i,max:n,getValidationErrors:s}=r;let a=[];const o=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(i){const u=i instanceof Date?i:new Date(i);if(t<u){const d=u.toLocaleDateString();a.push(o("minDateValidation",`Date must be after ${d}`,[d]))}}if(n){const u=n instanceof Date?n:new Date(n);if(t>u){const d=u.toLocaleDateString();a.push(o("maxDateValidation",`Date must be before ${d}`,[d]))}}}return a.length||(a=null),s?s({value:t,cellEditorParams:r,internalErrors:a}):a}getValue(){const{eEditor:e,params:t}=this,r=e.getDate();return!Wt(r)&&!Wt(t.value)?t.value:r??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Ho(e,this.includeTime??!1)}},bge=class extends Z1{constructor(){super(new _ge(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},Sge={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},Ege=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return Sge}getAgComponents(){return[s6]}init(e,t){var a,o;this.eEditor=e,this.params=t;const{min:r,max:i,step:n,colDef:s}=t;r!=null&&e.setMin(r),i!=null&&e.setMax(i),n!=null&&e.setStep(n),this.includeTime=t.includeTime??((o=(a=this.getDataTypeService())==null?void 0:a.getDateIncludesTimeFlag)==null?void 0:o.call(a,s.cellDataType)),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,r=e.getInputElement().value,i=this.formatDate(this.parseDate(r??void 0)),{min:n,max:s,getValidationErrors:a}=t;let o=[];if(i){const u=new Date(i),d=this.getLocaleTextFunc();if(n){const p=new Date(n);if(u<p){const v=p.toLocaleDateString();o.push(d("minDateValidation",`Date must be after ${v}`,[v]))}}if(s){const p=new Date(s);if(u>p){const v=p.toLocaleDateString();o.push(d("maxDateValidation",`Date must be before ${v}`,[v]))}}}return o.length||(o=null),a?a({value:this.getValue(),cellEditorParams:t,internalErrors:o}):o}getValue(){const{params:e,eEditor:t}=this,r=this.formatDate(t.getDate());return!Wt(r)&&!Wt(e.value)?e.value:e.parseValue(r??"")}getStartValue(){return Ho(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):So(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Ho(e??null,this.includeTime??!1)??void 0}},Rge=class extends Z1{constructor(){super(new Ege(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},Tge={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},Pge=class extends j1{constructor(){super(Tge,[dse]),this.eEditor=fr}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:r,eventKey:i,maxLength:n,cols:s,rows:a}=e;this.focusAfterAttached=r,t.getInputElement().setAttribute("title",""),t.setMaxLength(n||200).setCols(s||60).setRows(a||10);let o;r?(this.focusAfterAttached=!0,i===st.BACKSPACE||i===st.DELETE?o="":i&&i.length===1?o=i:(o=this.getStartValue(e),i!==st.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,o=this.getStartValue(e)),o!=null&&t.setValue(o,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){const{value:t}=e;return(t==null?void 0:t.toString())??t}onKeyDown(e){const t=e.key;(t===st.LEFT||t===st.UP||t===st.RIGHT||t===st.DOWN||e.shiftKey&&t===st.ENTER)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:r}=this,i=this.getLocaleTextFunc();e.setInputAriaLabel(i("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),r&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:r}=t,i=e.getValue();return!Wt(i)&&!Wt(r)?r:t.parseValue(i)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:r}=e,i=this.getLocaleTextFunc(),n=this.getValue();let s=[];return typeof n=="string"&&t!=null&&n.length>t&&s.push(i("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),s.length||(s=null),r?r({value:n,internalErrors:s,cellEditorParams:e}):s}},Mge={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},Fge=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return Mge}getAgComponents(){return[fse]}init(e,t){this.eEditor=e,this.params=t;const{max:r,min:i,precision:n,step:s}=t;r!=null&&e.setMax(r),i!=null&&e.setMin(i),n!=null&&e.setPrecision(n),s!=null&&e.setStep(s);const a=e.getInputElement();t.preventStepping?e.addManagedElementListeners(a,{keydown:this.preventStepping}):t.showStepperButtons&&a.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:r,getValidationErrors:i}=e,s=this.eEditor.getInputElement().valueAsNumber,a=this.getLocaleTextFunc();let o=[];return typeof s=="number"&&(t!=null&&s<t&&o.push(a("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),r!=null&&s>r&&o.push(a("maxValueValidation",`Must be less than or equal to ${r}.`,[String(r)]))),o.length||(o=null),i?i({value:s,cellEditorParams:e,internalErrors:o}):o}preventStepping(e){(e.key===st.UP||e.key===st.DOWN)&&e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,r=e.getValue();if(!Wt(r)&&!Wt(t.value))return t.value;let i=t.parseValue(r);if(i==null)return i;if(typeof i=="string"){if(i==="")return null;i=Number(i)}return isNaN(i)?null:i}getStartValue(){return this.params.value}setCaret(){Zu()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},Age=class extends Z1{constructor(){super(new Fge(()=>this.getLocaleTextFunc()))}},Ige={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},Dge=class extends j1{constructor(){super(Ige,[Sse]),this.eEditor=fr,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:r,gos:i}=this,{values:n,value:s,eventKey:a}=e;if(Gi(n)){St(58);return}this.startedByEnter=a!=null?a===st.ENTER:!1;let o=!1;n.forEach(v=>{const y={value:v},_=r.formatValue(e.column,null,v),P=_!=null;y.text=P?_:v,t.addOption(y),o=o||s===v}),o?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:u,valueListMaxWidth:d,valueListMaxHeight:p}=e;u!=null&&t.setPickerGap(u),p!=null&&t.setPickerMaxHeight(p),d!=null&&t.setPickerMaxWidth(d),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:r}=e,i=this.getValue();let n=[];if(t&&!t.includes(i)){const s=this.getLocaleTextFunc();n.push(s("invalidSelectionValidation","Invalid selection."))}else n=null;return r?r({value:i,internalErrors:n,cellEditorParams:e}):n}},kge={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},Lge=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return kge}getAgComponents(){return[V1]}init(e,t){this.eEditor=e,this.params=t;const r=t.maxLength;r!=null&&e.setMaxLength(r)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:r}=e,i=this.getValue(),n=this.getLocaleTextFunc();let s=[];return t!=null&&typeof i=="string"&&i.length>t&&s.push(n("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),s.length||(s=null),r?r({value:i,cellEditorParams:e,internalErrors:s}):s}getValue(){const{eEditor:e,params:t}=this,r=e.getValue();return!Wt(r)&&!Wt(t.value)?t.value:t.parseValue(r)}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){Zu()&&this.eEditor.getInputElement().focus({preventScroll:!0});const e=this.eEditor,t=e.getValue(),r=Wt(t)&&t.length||0;r&&e.getInputElement().setSelectionRange(r,r)}},Mk=class extends Z1{constructor(){super(new Lge(()=>this.getLocaleTextFunc()))}};function Oge(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function Nge(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function k8(e,t,r="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,r),"ensureVisible")}function L8(e,t,r){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,r),"ensureVisible")}function Bge(e,t,r=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,r),"ensureVisible")}function zge(e){var t;(t=e.undoRedo)==null||t.undo("api")}function Gge(e){var t;(t=e.undoRedo)==null||t.redo("api")}function Vge(e,t){var r;return(r=e.editModelSvc)==null?void 0:r.getEditRowDataValue(t,{checkSiblings:!0})}function Hge(e){var i;const t=(i=e.editModelSvc)==null?void 0:i.getEditMap(),r=[];return t==null||t.forEach((n,s)=>{const{rowIndex:a,rowPinned:o}=s;n.forEach((u,d)=>{const{editorValue:p,pendingValue:v,sourceValue:y,state:_}=u,P=cc(u);let R=p??v;R===Ca&&(R=void 0);const M={newValue:R,oldValue:y,state:_,column:d,colId:d.getColId(),colKey:d.getColId(),rowIndex:a,rowPinned:o};(_==="editing"||_==="changed"&&P)&&r.push(M)})}),r}function Uge(e,t=!1){var i;const{editSvc:r}=e;r!=null&&r.isBatchEditing()?(t?(i=e.editModelSvc)==null||i.getEditPositions().forEach(n=>{n.state==="editing"&&r.revertSingleCellEdit(n)}):Ih(e,{persist:!0}),wp(e,void 0,{cancel:t})):r==null||r.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})}function Wge(e,t){var i;const r=Bi(e,t);return((i=e.editSvc)==null?void 0:i.isEditing(r))??!1}function jge(e,t){const{key:r,colKey:i,rowIndex:n,rowPinned:s}=t,{editSvc:a,colModel:o}=e,u=o.getCol(i);if(!u){St(12,{colKey:i});return}const p=Ec(e,{rowIndex:n,rowPinned:s||null});if(!p){St(290,{rowIndex:n,rowPinned:s});return}if(!u.isCellEditable(p))return;s==null&&L8(e,n),k8(e,i),a==null||a.startEditing({rowNode:p,column:u},{event:r?new KeyboardEvent("keydown",{key:r}):void 0,source:"api"})}function $ge(e){var t;return((t=e.editSvc)==null?void 0:t.validateEdit())||null}function qge(e){var t;return((t=e.undoRedo)==null?void 0:t.getCurrentUndoStackSize())??0}function Kge(e){var t;return((t=e.undoRedo)==null?void 0:t.getCurrentRedoStackSize())??0}var Zge={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},Xge=class extends KT{constructor(e){super(Zge),this.params=e}postConstruct(){sd(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,r=i=>{b2(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:r})}};function Yge(e,{column:t},r,i,n="ui"){var d;if(r instanceof KeyboardEvent&&(r.key===st.TAB||r.key===st.ENTER||r.key===st.F2||r.key===st.BACKSPACE&&i))return!0;if((r==null?void 0:r.shiftKey)&&((d=e.rangeSvc)==null?void 0:d.getCellRanges().length)!=0)return!1;const a=t==null?void 0:t.getColDef(),o=Qge(e.gos,a),u=r==null?void 0:r.type;return u==="click"&&(r==null?void 0:r.detail)===1&&o===1||u==="dblclick"&&(r==null?void 0:r.detail)===2&&o===2?!0:n==="api"?i??!1:!1}function Qge(e,t){return e.get("suppressClickEdit")===!0?0:e.get("singleClickEdit")===!0||t!=null&&t.singleClickEdit?1:2}function B2(e,{rowNode:t,column:r},i="ui"){const n=r.getColDef().editable,s=e.editModelSvc;return r.isColumnFunc(t,n)||!!s&&s.hasEdits({rowNode:t,column:r},{withOpenEditor:!0})}function Jge(e,t,r="ui"){const i=B2(e,t,r);return i===!0||r==="ui"?i:e.colModel.getCols().some(s=>B2(e,{rowNode:t.rowNode,column:s},r))}var HC=(e,t=!1)=>{if(e!==void 0)return cc(e)||t&&e.state==="editing"};function O8(e,t,r=!1){var i;return HC((i=e.editModelSvc)==null?void 0:i.getEdit(t),r)}function N8(e,t){const{editModelSvc:r}=e,{column:i,rowNode:n}=t;if(e.gos.get("groupTotalRow")&&!(n!=null&&n.footer))return!1;for(const s of(n==null?void 0:n.allLeafChildren)??[])if(HC(r==null?void 0:r.getEdit({rowNode:s,column:i}))||HC(r==null?void 0:r.getEdit({rowNode:s.pinnedSibling,column:i})))return!0}function B8(e,{rowNode:t,column:r}){var i;if(t=t.pinnedSibling,!!t)return HC((i=e.editModelSvc)==null?void 0:i.getEdit({rowNode:t,column:r}))}var eme=class extends ft{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){var n;const{cellCtrl:e,editSvc:t,beans:r}=this;if(t!=null&&t.isBatchEditing()&&t.isEditing()){const s=O8(r,e)||N8(r,e)||B8(r,e);this.applyBatchingStyle(s)}else this.applyBatchingStyle(!1);const i=!!((n=this.editModelSvc)!=null&&n.getCellValidationModel().hasCellValidation(this.cellCtrl));this.cellComp.toggleCss("ag-cell-editing-error",i)}applyBatchingStyle(e){var t;this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&((t=this.editSvc)==null?void 0:t.isBatchEditing()))??!1)}},tme=class extends ft{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){var a;const{rowCtrl:e,editModelSvc:t,beans:r}=this;let i=e.rowNode,n=t==null?void 0:t.getEditRow(i);const s=(a=this.editModelSvc)==null?void 0:a.getRowValidationModel().hasRowValidation({rowNode:i});if(!n&&i.pinnedSibling&&(i=i.pinnedSibling,n=t==null?void 0:t.getEditRow(i)),n){const o=Array.from(n.keys()).some(u=>{const d={rowNode:i,column:u};return O8(r,d,!0)||N8(r,d)||B8(r,d)});this.applyStyle(s,o);return}this.applyStyle(s)}applyStyle(e=!1,t=!1){var n,s;const r=((n=this.editSvc)==null?void 0:n.isBatchEditing())??!1,i=this.gos.get("editType")==="fullRow";(s=this.rowCtrl)==null||s.forEachGui(void 0,({rowComp:a})=>{a.toggleCss("ag-row-editing",i&&t),a.toggleCss("ag-row-batch-edit",i&&t&&r),a.toggleCss("ag-row-inline-editing",t),a.toggleCss("ag-row-not-inline-editing",!t),a.toggleCss("ag-row-editing-invalid",i&&t&&e)})}},rme=({rowModel:e,pinnedRowModel:t,editModelSvc:r},i)=>{const n=new Set;return e.forEachNode(s=>i.has(s)&&n.add(s)),t==null||t.forEachPinnedRow("top",s=>i.has(s)&&n.add(s)),t==null||t.forEachPinnedRow("bottom",s=>i.has(s)&&n.add(s)),i.forEach(s=>{n.has(s)||r.removeEdits({rowNode:s})}),n},ime=({editModelSvc:e},t,r)=>{t.forEach(i=>{var n;return(n=e==null?void 0:e.getEditRow(i))==null?void 0:n.forEach((s,a)=>!r.has(a)&&e.removeEdits({rowNode:i,column:a}))})},nme=e=>()=>{const t=new Set(e.colModel.getCols()),r=e.editModelSvc.getEditMap(!0),i=new Set(r.keys());ime(e,rme(e,i),t)},sme=new Set(["undo","redo","paste","bulk","rangeSvc"]),ome=new Set(["ui","api"]),z8={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},ame=new Set(Object.keys(z8)),lme=new Set(["paste","rangeSvc","renderer","cellClear","redo","undo"]),Fw={cancel:!0,source:"api"},cme={cancel:!1,source:"api"},wf={checkSiblings:!0},Em={force:!0,suppressFlash:!0},ume=class extends ft{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:i})=>{this.stopEditing(void 0,Fw),this.createStrategy(i)});const t=nme(e),r=()=>{const i=this.model.getCellValidationModel().getCellValidationMap().size>0,n=this.model.getRowValidationModel().getRowValidationMap().size>0;return i||n?this.stopEditing(void 0,Fw):this.isEditing()&&(this.isBatchEditing()?wp(e,this.model.getEditPositions()):this.stopEditing(void 0,cme)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:r,filterChanged:r,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,Fw)):(this.stopEditing(void 0,Fw),this.batch=!1)}createStrategy(e){const{beans:t,gos:r,strategy:i}=this,n=Fk(r,e);if(i){if(i.beanName===n)return i;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(n,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,r,i="ui"){const n=Yge(this.beans,e,t,r,i);return n&&(this.strategy??(this.strategy=this.createStrategy())),n}shouldStopEditing(e,t,r="ui"){var i;return((i=this.strategy)==null?void 0:i.shouldStop(e,t,r))??null}shouldCancelEditing(e,t,r="ui"){var i;return((i=this.strategy)==null?void 0:i.shouldCancel(e,t,r))??null}validateEdit(){return Rde(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??wf)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){const{startedEdit:r=!0,event:i=null,source:n="ui",ignoreEventKey:s=!1,silent:a}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;const o=Bi(this.beans,e);if(o&&!o.comp){o.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}const u=this.shouldStartEditing(e,i,r,n);if(u===!1&&n!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,n)&&!t.continueEditing&&this.stopEditing(void 0,{source:n}),u&&this.isBatchEditing()&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:i,source:n,ignoreEventKey:s,startedEdit:r,silent:a})}stopEditing(e,t){var F,k,N;const{event:r,cancel:i,source:n="ui",suppressNavigateAfterEdit:s,forceCancel:a,forceStop:o}=t||{},{beans:u,model:d}=this;if(ame.has(n)&&this.isBatchEditing())return this.bulkRefresh(e),!1;const p=this.committing?z8[n]:n;if(!(this.committing||this.isEditing(e)||this.isBatchEditing()&&d.hasEdits(e,wf))||!this.strategy||this.stopping)return!1;this.stopping=!0;const y=Bi(u,e);y&&(y.onEditorAttachedFuncs=[]);let _=d.getEditMap(!0),P=!1;const R=!i&&(!!this.shouldStopEditing(e,r,p)||this.committing&&!this.batch)||(o??!1),M=i&&!!this.shouldCancelEditing(e,r,p)||(a??!1);if(R||M){Ih(u,{persist:!0,isCancelling:M||i,isStopping:R});const G=d.getEditMap(),j=this.processEdits(G,i,n);(F=this.strategy)==null||F.stop(i,r),j.forEach(ee=>{d.clearEditValue(ee)}),this.bulkRefresh(void 0,_),d.getEditPositions(G).forEach(ee=>{const q=Bi(u,ee),oe=cc(ee);q==null||q.refreshCell({force:!0,suppressFlash:!oe})}),_=G,P||(P=R)}else if(r instanceof KeyboardEvent&&this.batch&&((k=this.strategy)!=null&&k.midBatchInputsAllowed(e))&&this.isEditing(e,{withOpenEditor:!0})){const G=r.key,j=G===st.ENTER,ee=G===st.ESCAPE,q=G===st.TAB;(j||q||ee)&&(j||q?Ih(u,{persist:!0}):ee&&this.revertSingleCellEdit(y),this.isBatchEditing()?(N=this.strategy)==null||N.cleanupEditors():wp(u,d.getEditPositions(),{event:r,cancel:ee}),r.preventDefault(),this.bulkRefresh(e,_,{suppressFlash:!0}),_=d.getEditMap())}else Ih(u,{persist:!0}),_=d.getEditMap();return P&&e&&this.model.removeEdits(e),!s&&y&&this.navigateAfterEdit(r instanceof KeyboardEvent&&r.shiftKey,y.cellPosition),I2(u),this.model.hasEdits()||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap()),this.bulkRefresh(),M&&this.beans.rowRenderer.refreshRows({rowNodes:Array.from(_.keys())}),this.isBatchEditing()&&(this.beans.rowRenderer.refreshRows({suppressFlash:!0,force:!0}),P&&R&&this.dispatchBatchEvent("batchEditingStopped",_)),this.stopping=!1,P}navigateAfterEdit(e,t){var i;if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const n=e?st.UP:st.DOWN;(i=this.beans.navigation)==null||i.navigateToNextCell(null,n,t,!1)}}processEdits(e,t=!1,r){const i=Array.from(e.keys()),n=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,s=[];for(const a of i){const o=e.get(a);for(const u of o.keys()){const d=o.get(u),p={rowNode:a,column:u},v=cc(d);!t&&v&&!n&&(this.setNodeDataValue(a,u,d.pendingValue,void 0,r)||s.push(p))}}return s}setNodeDataValue(e,t,r,i,n="edit"){const{beans:s}=this,a=Bi(s,{rowNode:e,column:t}),o=ome.has(n)?"edit":n;a&&(a.suppressRefreshCell=!0),this.commitNextEdit();const u=e.setDataValue(t,r,o);return a&&(a.suppressRefreshCell=!1),i&&(a==null||a.refreshCell(Em)),u}setEditMap(e,t){var i;this.strategy??(this.strategy=this.createStrategy()),(i=this.strategy)==null||i.setEditMap(e,t),this.bulkRefresh();let r=Em;t!=null&&t.forceRefreshOfEditCellsOnly&&(r={...hme(e),...Em}),this.beans.rowRenderer.refreshCells(r)}dispatchEditValuesChanged({rowNode:e,column:t},r={}){if(!e||!t||!r)return;const{pendingValue:i,sourceValue:n}=r,{rowIndex:s,rowPinned:a,data:o}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:s,rowPinned:a,column:t,source:"api",data:o,newValue:i,oldValue:n,value:i,colDef:t.getColDef()})}bulkRefresh(e={},t,r={}){var o;const{beans:i,gos:n}=this,{editModelSvc:s,rowModel:a}=i;In(n)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),r):t&&((o=s==null?void 0:s.getEditMap(!1))==null||o.forEach((u,d)=>{for(const p of u.keys())this.refCell({rowNode:d,column:p},u.get(p),r)})))}refCell({rowNode:e,column:t},r,i={}){var v;const{beans:n,gos:s}=this,a=new Set([e]),o=new Set,u=e.pinnedSibling;u&&a.add(u);const d=e.sibling;d&&o.add(d);let p=e.parent;for(;p;)(v=p.sibling)!=null&&v.footer&&s.get("groupTotalRow")||!p.parent&&p.sibling&&s.get("grandTotalRow")?o.add(p.sibling):o.add(p),p=p.parent;a.forEach(y=>this.dispatchEditValuesChanged({rowNode:y,column:t},r)),a.forEach(y=>{var _;return(_=Bi(n,{rowNode:y,column:t}))==null?void 0:_.refreshCell(i)}),o.forEach(y=>{var _;return(_=Bi(n,{rowNode:y,column:t}))==null?void 0:_.refreshCell(i)})}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){const{rowNode:r}=e,{gos:i,beans:n}=this;if(r.group){if(i.get("treeData")){if(!r.data&&!i.get("enableGroupEdit"))return!1}else if(!i.get("enableGroupEdit"))return!1}const s=Fk(i)==="fullRow"?Jge(n,e,t):B2(n,e,t);return s&&(this.strategy??(this.strategy=this.createStrategy())),s}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,r=!0){var i,n,s,a;if(this.hasValidationErrors(e)){const o=Bi(this.beans,e);return this.cellEditingInvalidCommitBlocks()?((i=t==null?void 0:t.preventDefault)==null||i.call(t),r&&(!(o!=null&&o.hasBrowserFocus())&&(o==null||o.focusCell()),(a=(s=(n=o==null?void 0:o.comp)==null?void 0:n.getCellEditor())==null?void 0:s.focusIn)==null||a.call(s)),"block-stop"):(o&&this.revertSingleCellEdit(o),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){var i,n,s,a,o;const r=Bi(this.beans,e);(i=r==null?void 0:r.comp)!=null&&i.getCellEditor()&&(wp(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),Vp(this.beans,e,{silent:!0}),cd(this.beans),r==null||r.refreshCell(Em),(n=r.rowCtrl.rowEditStyleFeature)==null||n.applyRowStyles(),t&&(r==null||r.focusCell(),(o=(a=(s=r==null?void 0:r.comp)==null?void 0:s.getCellEditor())==null?void 0:a.focusIn)==null||o.call(a)))}hasValidationErrors(e){var i;cd(this.beans);const t=Bi(this.beans,e);t&&(t.refreshCell(Em),(i=t.rowCtrl.rowEditStyleFeature)==null||i.applyRowStyles());let r=!1;return e!=null&&e.rowNode?(r||(r=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(r||(r=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(r||(r=this.model.getCellValidationModel().getCellValidationMap().size>0),r||(r=this.model.getRowValidationModel().getRowValidationMap().size>0)),r}moveToNextCell(e,t,r,i="ui"){var o;let n;const s=this.isEditing(),a=s&&this.checkNavWithValidation(void 0,r)==="block-stop";return e instanceof xp&&s&&(n=(o=this.strategy)==null?void 0:o.moveToNextEditingCell(e,t,r,i,a)),n===null||(n=n||!!this.beans.focusSvc.focusedHeader,n===!1&&!a&&this.stopEditing()),n}getCellDataValue({rowNode:e,column:t},r=!0){if(!e||!t)return;let i=this.model.getEdit({rowNode:e,column:t});const n=e.pinnedSibling;if(n){const a=this.model.getEdit({rowNode:n,column:t});a&&(i=a)}const s=r?(i==null?void 0:i.editorValue)??(i==null?void 0:i.pendingValue):i==null?void 0:i.pendingValue;return s===Ca||!i?(i==null?void 0:i.sourceValue)??this.valueSvc.getValue(t,e,!1,"api"):s}addStopEditingWhenGridLosesFocus(e){xde(this,this.beans,e)}createPopupEditorWrapper(e){return new Xge(e)}commitNextEdit(){this.committing=!0}setDataValue(e,t,r){var i;try{if((!this.isEditing()||this.committing)&&!lme.has(r))return;const{beans:n}=this;this.strategy??(this.strategy=this.createStrategy());const s=this.isBatchEditing()?"ui":this.committing?r??"api":"api";if(!r||sme.has(r))return wx(n,e,t,r,void 0,{persist:!0}),this.setNodeDataValue(e.rowNode,e.column,t,!0,r);const a=this.model.getEdit(e);if(a){if(a.pendingValue===t)return!1;if(a.sourceValue!==t)return wx(n,e,t,r,void 0,{persist:!0}),this.stopEditing(e,{source:s,suppressNavigateAfterEdit:!0}),!0;if(a.sourceValue===t)return(i=n.editModelSvc)==null||i.removeEdits(e),this.dispatchEditValuesChanged(e,{...a,pendingValue:t}),!0}return wx(n,e,t,r,void 0,{persist:!0}),this.stopEditing(e,{source:s,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){bde(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){if(!this.batch||!this.model.hasRowEdits(e.rowNode,wf))return;const{rowNode:i,column:n}=e,{compDetails:s,valueToDisplay:a}=t;if(s){const{params:u}=s;return u.data=this.model.getEditRowDataValue(i,wf),{compDetails:s}}const o=this.model.getEditRow(e.rowNode,wf);if(a!==void 0&&(o!=null&&o.has(n)))return{valueToDisplay:this.valueSvc.getValue(n,i)}}cleanupEditors(){var e;(e=this.strategy)==null||e.cleanupEditors()}dispatchCellEvent(e,t,r,i){var n;(n=this.strategy)==null||n.dispatchCellEvent(e,t,r,i)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return Cr(this.gos,{type:e,...e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},r){var d,p;if(!r||r.length===0)return;const{beans:i,rangeSvc:n,valueSvc:s}=this;Ih(i,{persist:!0});const a=this.model.getEditMap(!0),o=(p=(d=a.get(e))==null?void 0:d.get(t))==null?void 0:p.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"}),r.forEach(v=>{if(n==null||n.forEachRowInRange(v,y=>{const _=Ec(i,y);if(_===void 0)return;const P=a.get(_)??new Map;for(const R of v.columns)if(R&&this.isCellEditable({rowNode:_,column:R},"api")){const M=s.getValue(R,_,!0,"api");let F=s.parseValue(R,_??null,o,M);Number.isNaN(F)&&(F=null),P.set(R,{editorValue:void 0,pendingValue:F,sourceValue:M,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}P.size>0&&a.set(_,P)}),this.setEditMap(a),this.batch){this.cleanupEditors(),I2(i),this.bulkRefresh();return}this.commitNextEdit(),this.stopEditing(void 0,{source:"bulk"}),this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(a)})}),this.bulkRefresh();const u=Bi(i,{rowNode:e,column:t});u&&u.focusCell(!0)}createCellStyleFeature(e,t){return new eme(e,t)}createRowStyleFeature(e,t){return new tme(e,t)}setEditingCells(e,t){const{beans:r}=this,{colModel:i,valueSvc:n}=r,s=new Map;e.forEach(({colId:a,column:o,colKey:u,rowIndex:d,rowPinned:p,newValue:v,state:y})=>{const _=a?i.getCol(a):u?i.getCol(u):o;if(!_)return;const P=Ec(r,{rowIndex:d,rowPinned:p});if(!P)return;const R=n.getValue(_,P,!0,"api");if(!(t!=null&&t.forceRefreshOfEditCellsOnly)&&!cc({pendingValue:v,sourceValue:R})&&y!=="editing")return;let M=s.get(P);M||(M=new Map,s.set(P,M)),v===void 0&&(v=Ca),M.set(_,{editorValue:void 0,pendingValue:v,sourceValue:R,state:y??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}),this.setEditMap(s,t)}onCellFocused(e){var s;const t=Bi(this.beans,e);if(!t||!this.isEditing(t,wf))return;const r=this.model.getEdit(t);if(!r||!cc(r))return;const n=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");(s=this.beans.ariaAnnounce)==null||s.announceValue(n,"pendingChange")}allowedFocusTargetOnValidation(e){return Bi(this.beans,e)}};function hme(e){return{rowNodes:e?Array.from(e.keys()):void 0,columns:e?[...new Set(Array.from(e.values()).flatMap(t=>Array.from(t.keys())))]:void 0}}function Fk(e,t){return t??e.get("editType")??"singleCell"}var G8=class extends ft{postConstruct(){var e,t;this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:(e=this.onCellFocusChanged)==null?void 0:e.bind(this),cellFocusCleared:(t=this.onCellFocusChanged)==null?void 0:t.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t;const r=e.previousParams,{editSvc:i,beans:n}=this,s=e.type==="cellFocused"?e.sourceEvent:null;r&&(t=Bi(n,r));const{gos:a,editModelSvc:o}=n,u=e.type==="cellFocusCleared";if(i.isEditing(void 0,{withOpenEditor:!0})){const{column:d,rowIndex:p,rowPinned:v}=e,y={column:d,rowNode:Ec(n,{rowIndex:p,rowPinned:v})},_=a.get("invalidEditValueMode")==="block";if(_)return;const P=!_,R=!!(o!=null&&o.getCellValidationModel().hasCellValidation(y)),M=P&&R;(r||u?i.stopEditing(void 0,{cancel:M,source:u&&P?"api":void 0,event:s}):!0)||(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"}))}t==null||t.refreshCell({suppressFlash:!0,force:!0})}stop(e,t){const r=this.model.getEditPositions(),i={all:[],pass:[],fail:[]};if(r.forEach(s=>{var o;i.all.push(s);const a=this.model.getCellValidationModel().getCellValidation(s);if((((o=a==null?void 0:a.errorMessages)==null?void 0:o.length)??0)>0){i.fail.push(s);return}i.pass.push(s)}),e)return r.forEach(s=>{zC(this.beans,s,{cancel:e}),this.model.stop(s)}),!0;const n=this.processValidationResults(i);return n.destroy.length>0&&n.destroy.forEach(s=>{zC(this.beans,s,{event:t,cancel:e}),this.model.stop(s)}),n.keep.length>0&&n.keep.forEach(s=>{var o;const a=Bi(this.beans,s);(o=this.editSvc)!=null&&o.cellEditingInvalidCommitBlocks()||a&&this.editSvc.revertSingleCellEdit(a)}),!0}cleanupEditors({rowNode:e}={},t){Ih(this.beans,{persist:!1});const r=this.model.getEditPositions(),i=[];e?r.forEach(n=>{!e||n.rowNode===e||i.push(n)}):r.forEach(n=>{i.push(n)}),wp(this.beans,i),I2(this.beans,t)}setFocusOutOnEditor(e){var t,r,i;(i=(r=(t=e.comp)==null?void 0:t.getCellEditor())==null?void 0:r.focusOut)==null||i.call(r)}setFocusInOnEditor(e){const t=e.comp,r=t==null?void 0:t.getCellEditor();if(r!=null&&r.focusIn)r.focusIn();else{const i=this.beans.gos.get("editType")==="fullRow";e.focusCell(i),e.onEditorAttachedFuncs.push(()=>{var n,s;return(s=(n=t==null?void 0:t.getCellEditor())==null?void 0:n.focusIn)==null?void 0:s.call(n)})}}setupEditors(e){const{event:t,ignoreEventKey:r=!1,startedEdit:i,position:n,cells:s=this.model.getEditPositions()}=e,a=t instanceof KeyboardEvent&&!r&&t.key||void 0;_de(this.beans,s,n,a,t,i)}dispatchCellEvent(e,t,r,i){const n=Bi(this.beans,e);n&&this.eventSvc.dispatchEvent({...n.createEvent(t??null,r),...i})}dispatchRowEvent(e,t,r){if(r)return;const i=gP(this.beans,e);i&&this.eventSvc.dispatchEvent(i.createRowEvent(t))}shouldStop(e,t,r="ui"){const i=this.editSvc.isBatchEditing();return i&&r==="api"?!0:i&&(r==="ui"||r==="edit")?!1:r==="api"?!0:t instanceof KeyboardEvent&&!i?t.key===st.ENTER:null}shouldCancel(e,t,r="ui"){const i=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!i&&t.key===st.ESCAPE||i&&r==="api"||r==="api")}setEditMap(e,t){var i;t!=null&&t.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const r=[];if(e.forEach((n,s)=>{n.forEach((a,o)=>{a.state==="editing"&&r.push({...a,rowNode:s,column:o})})}),t!=null&&t.update&&(e=new Map([...this.model.getEditMap(),...e])),(i=this.model)==null||i.setEditMap(e),r.length>0){const n=r.at(-1),s=n.pendingValue===Ca?void 0:n.pendingValue;this.start({position:n,event:new KeyboardEvent("keydown",{key:s}),source:"api"});const a=Bi(this.beans,n);a&&this.setFocusInOnEditor(a)}}destroy(){this.cleanupEditors(),super.destroy()}},dme=class extends G8{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t,r="ui"){const{rowNode:i}=e||{};if(!gP(this.beans,{rowNode:this.rowNode}))return!0;const s=super.shouldStop({rowNode:this.rowNode},t,r);return s!==null?s:this.rowNode?i!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e){const{position:t,silent:r,startedEdit:i,event:n,ignoreEventKey:s}=e,{rowNode:a}=t;this.rowNode!==a&&super.cleanupEditors(t),this.dispatchRowEvent({rowNode:a},"rowEditingStarted",r),this.startedRows.push(a);const o=this.beans.visibleCols.allCols,u=[];o.forEach(d=>{if(!d.isCellEditable(a))return;const p={rowNode:a,column:d};u.push(p),this.model.hasEdits(p)||this.model.start(p)}),this.rowNode=a,this.setupEditors({cells:u,position:t,startedEdit:i,event:n,ignoreEventKey:s})}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){var n;const{rowNode:r}=this;if(r&&!this.model.hasRowEdits(r))return!1;const i=[];return e||this.model.getEditMap().forEach((s,a)=>{if(!(!s||s.size===0)){for(const o of s.values())if(cc(o)){i.push(a);break}}}),cd(this.beans),!e&&((n=this.editSvc)==null?void 0:n.checkNavWithValidation({rowNode:r}))==="block-stop"?!1:(super.stop(e,t),i.forEach(s=>this.dispatchRowEvent({rowNode:s},"rowValueChanged")),this.cleanupEditors({rowNode:r},!0),this.rowNode=void 0,!0)}onCellFocusChanged(e){const{rowIndex:t}=e,r=e.previousParams;if((r==null?void 0:r.rowIndex)===t||e.sourceEvent instanceof KeyboardEvent)return;const i=Bi(this.beans,r);this.gos.get("invalidEditValueMode")==="block"&&i&&(this.model.getCellValidationModel().getCellValidation(i)||this.model.getRowValidationModel().getRowValidation(i))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t),this.startedRows.forEach(r=>this.dispatchRowEvent({rowNode:r},"rowEditingStopped")),this.startedRows.length=0}moveToNextEditingCell(e,t,r,i="ui",n=!1){var y,_,P,R;const s=e.cellPosition;let a;this.model.suspend(!0);try{a=(y=this.beans.navigation)==null?void 0:y.findNextCellToFocusOn(s,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(a===!1)return null;if(a==null)return!1;const o=a.cellPosition,u=e.isCellEditable(),d=a.isCellEditable(),p=o&&s.rowIndex===o.rowIndex&&s.rowPinned===o.rowPinned;u&&this.setFocusOutOnEditor(e),this.restoreEditors();const v=this.gos.get("suppressStartEditOnTab");return d&&!n?v?a.focusCell(!0,r):((_=a.comp)!=null&&_.getCellEditor()||Vp(this.beans,a,{event:r,cellStartedEdit:!0}),this.setFocusInOnEditor(a),a.focusCell(!1,r)):(d&&n&&this.setFocusInOnEditor(a),a.focusCell(!0,r)),!p&&!n&&((P=this.editSvc)==null||P.stopEditing({rowNode:e.rowNode},{event:r}),this.cleanupEditors(a,!0),v?a.focusCell(!0,r):this.editSvc.startEditing(a,{startedEdit:!0,event:r,source:i,ignoreEventKey:!0})),(R=e.rowCtrl)==null||R.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:r},i)=>{var s;if(r!=="editing")return;const n=Bi(this.beans,{rowNode:t,column:i});n&&!((s=n.comp)!=null&&s.getCellEditor())&&Vp(this.beans,n,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},fme=class extends G8{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,r="ui"){const i=super.shouldStop(e,t,r);if(i!==null)return i;const{rowNode:n,column:s}=e||{};return(!this.rowNode||!this.column)&&n&&s?null:this.rowNode!==n||this.column!==s}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){const{position:t,startedEdit:r,event:i,ignoreEventKey:n}=e;(this.rowNode!==t.rowNode||this.column!==t.column)&&super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:r,event:i,ignoreEventKey:n})}dispatchRowEvent(e,t,r){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:r}=this.beans,{rowIndex:i,column:n,rowPinned:s}=e,a=Ec(this.beans,{rowIndex:i,rowPinned:s}),o=A2(n),u=t.getCol(o),d=e.previousParams;if(d){const p=A2(d.column);if((d==null?void 0:d.rowIndex)===i&&p===o&&(d==null?void 0:d.rowPinned)===s)return}r!=null&&r.isEditing({rowNode:a,column:u},{withOpenEditor:!0})&&e.type==="cellFocused"||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,r,i="ui",n=!1){var P,R,M,F,k,N;const s=this.beans.focusSvc.getFocusedCell();s&&(e=jf(this.beans,s)??e);const a=e.cellPosition;let o;const u=this.beans.gos.get("editType")==="fullRow";u&&this.model.suspend(!0),n||(e.eGui.focus(),(R=this.editSvc)==null||R.stopEditing(e,{source:(P=this.editSvc)!=null&&P.isBatchEditing()?"ui":"api",event:r}));try{o=(M=this.beans.navigation)==null?void 0:M.findNextCellToFocusOn(a,{backwards:t,startEditing:!0})}finally{u&&this.model.suspend(!1)}if(o===!1)return null;if(o==null)return!1;const d=o.cellPosition,p=e.isCellEditable(),v=o.isCellEditable(),y=d&&a.rowIndex===d.rowIndex&&a.rowPinned===d.rowPinned;p&&!n&&this.setFocusOutOnEditor(e);const _=this.gos.get("suppressStartEditOnTab");if(!y&&!n&&(super.cleanupEditors(o,!0),_?o.focusCell(!0,r):this.editSvc.startEditing(o,{startedEdit:!0,event:r,source:i,ignoreEventKey:!0})),v&&!n){if(o.focusCell(!1,r),_)o.focusCell(!0,r);else if(!((F=o.comp)!=null&&F.getCellEditor())){const G=(k=this.editSvc)==null?void 0:k.isEditing(o,{withOpenEditor:!0});Vp(this.beans,o,{event:r,cellStartedEdit:!0,silent:G}),this.setFocusInOnEditor(o),this.cleanupEditors(o)}}else v&&n&&this.setFocusInOnEditor(o),o.focusCell(!0,r);return(N=e.rowCtrl)==null||N.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},Xu={moduleName:"EditCore",version:jt,beans:[wde,ume],apiFunctions:{getEditingCells:Hge,getEditRowValues:Vge,getCellEditorInstances:Cde,startEditingCell:jge,stopEditing:Uge,isEditing:Wge,validateEdit:$ge},dynamicBeans:{singleCell:fme,fullRow:dme},dependsOn:[q1,D8],css:[yge]},pme={moduleName:"UndoRedoEdit",version:jt,beans:[vge],apiFunctions:{undoCellEditing:zge,redoCellEditing:Gge,getCurrentUndoSize:qge,getCurrentRedoSize:Kge},dependsOn:[Xu]},gme={moduleName:"TextEditor",version:jt,userComponents:{agCellEditor:Mk,agTextCellEditor:Mk},dependsOn:[Xu]},mme={moduleName:"NumberEditor",version:jt,userComponents:{agNumberCellEditor:{classImp:Age}},dependsOn:[Xu]},vme={moduleName:"DateEditor",version:jt,userComponents:{agDateCellEditor:bge,agDateStringCellEditor:Rge},dependsOn:[Xu]},yme={moduleName:"CheckboxEditor",version:jt,userComponents:{agCheckboxCellEditor:xge},dependsOn:[Xu]},wme={moduleName:"SelectEditor",version:jt,userComponents:{agSelectCellEditor:Dge},dependsOn:[Xu]},xme={moduleName:"LargeTextEditor",version:jt,userComponents:{agLargeTextCellEditor:Pge},dependsOn:[Xu]},Cme={moduleName:"CustomEditor",version:jt,dependsOn:[Xu]},_me=class extends ft{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,pp(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),Yie(e))}createColumns(e,t){var y,_;const r=()=>{var P;MC(this.beans,(P=this.columns)==null?void 0:P.tree),this.columns=null},i=e.treeDepth,s=(((y=this.columns)==null?void 0:y.treeDepth)??-1)==i,a=this.generateSelectionCols();if(Xie(a,((_=this.columns)==null?void 0:_.list)??[])&&s)return;r();const{colGroupSvc:u}=this.beans,d=(u==null?void 0:u.findDepth(e.tree))??0,p=(u==null?void 0:u.balanceTreeForAutoCols(a,d))??[];this.columns={list:a,tree:p,treeDepth:d,map:{}},t(P=>{if(!P)return null;const R=P.filter(M=>!Ku(M));return[...a,...R]})}updateColumns(e){var r;const t=pp(e.source);(r=this.columns)==null||r.list.forEach(i=>{const n=this.createSelectionColDef(e.currentValue);i.setColDef(n,null,t),ja(this.beans,{state:[{...n,colId:i.getColId()}]},t)})}getColumn(e){var t;return((t=this.columns)==null?void 0:t.list.find(r=>BB(r,e)))??null}getColumns(){var e;return((e=this.columns)==null?void 0:e.list)??null}isSelectionColumnEnabled(){var a,o;const{gos:e,beans:t}=this,r=e.get("rowSelection");if(typeof r!="object"||!zh(e))return!1;const i=(((o=(a=t.autoColSvc)==null?void 0:a.getColumns())==null?void 0:o.length)??0)>0;if(r.checkboxLocation==="autoGroupColumn"&&i)return!1;const n=!!fp(r),s=cx(r);return n||s}createSelectionColDef(e){const{gos:t}=this,r=e??t.get("selectionColumnDef"),i=t.get("enableRtl"),{rowSpan:n,spanRows:s,...a}=r??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:i?"right":"left",comparator(o,u,d,p){const v=d.isSelected(),y=p.isSelected();return v===y?0:v?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...a,colId:LB,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const r=new bd(e,null,t,!1);return this.createBean(r),[r]}onSelectionOptionsChanged(e,t,r){const i=t&&typeof t!="string"?fp(t):void 0,n=e&&typeof e!="string"?fp(e):void 0,s=i!==n,a=t&&typeof t!="string"?cx(t):void 0,o=e&&typeof e!="string"?cx(e):void 0,u=a!==o,d=EC(e),p=EC(t);(s||u||d!==p)&&this.beans.colModel.refreshAll(r)}destroy(){var e;MC(this.beans,(e=this.columns)==null?void 0:e.tree),super.destroy()}refreshVisibility(e,t,r){var u,d;if(!((u=this.columns)!=null&&u.list.length))return;const i=e.length+t.length+r.length;if(i===0)return;const n=this.columns.list[0];if(!n.isVisible())return;const s=()=>{let p;switch(n.pinned){case"left":case!0:p=e;break;case"right":p=r;break;default:p=t}p&&xa(p,n)};(((d=this.beans.rowNumbersSvc)==null?void 0:d.getColumn(OB))?2:1)===i&&s()}};function bme(e,t){var a;if(!t.nodes.every(o=>o.rowPinned&&!Av(o)?(St(59),!1):o.id===void 0?(St(60),!1):!0))return;const{nodes:i,source:n,newValue:s}=t;(a=e.selectionSvc)==null||a.setNodesSelected({nodes:i,source:n??"api",newValue:s})}function Sme(e,t,r="apiSelectAll"){var i;(i=e.selectionSvc)==null||i.selectAllRowNodes({source:r,selectAll:t})}function Eme(e,t,r="apiSelectAll"){var i;(i=e.selectionSvc)==null||i.deselectAllRowNodes({source:r,selectAll:t})}function Rme(e,t="apiSelectAllFiltered"){var r;(r=e.selectionSvc)==null||r.selectAllRowNodes({source:t,selectAll:"filtered"})}function Tme(e,t="apiSelectAllFiltered"){var r;(r=e.selectionSvc)==null||r.deselectAllRowNodes({source:t,selectAll:"filtered"})}function Pme(e,t="apiSelectAllCurrentPage"){var r;(r=e.selectionSvc)==null||r.selectAllRowNodes({source:t,selectAll:"currentPage"})}function Mme(e,t="apiSelectAllCurrentPage"){var r;(r=e.selectionSvc)==null||r.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function Fme(e){var t;return((t=e.selectionSvc)==null?void 0:t.getSelectedNodes())??[]}function Ame(e){var t;return((t=e.selectionSvc)==null?void 0:t.getSelectedRows())??[]}var Ime=class extends Jae{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=RC(e),this.groupSelectsDescendants=X0(e),this.groupSelectsFiltered=PC(e)==="filteredDescendants",this.masterSelectsDetail=_D(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=X0(e),r=RC(e),i=PC(e)==="filteredDescendants";this.masterSelectsDetail=_D(e)==="detail",(t!==this.groupSelectsDescendants||i!==this.groupSelectsFiltered||r!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=i,this.mode=r)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,r){if(this.isRowSelectionBlocked(t))return 0;const i=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,r);if(i==null)return 0;if(this.selectionCtx.selectAll=!1,"select"in i)return i.reset?this.resetNodes():this.selectRange(i.deselect,!1,r),this.selectRange(i.select,!0,r);{const n=i.checkFilteredNodes?H8(i.node):i.newValue;return this.setNodesSelected({nodes:[i.node],newValue:n,clearSelection:i.clearSelection,keepDescendants:i.keepDescendants,event:e,source:r})}}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:r,nodes:i,event:n,source:s,keepDescendants:a=!1}){var d;const{gos:o}=this;if(!zh(o)&&e)return St(132),0;if(i.length===0)return 0;if(i.length>1&&!this.isMultiSelect())return St(130),0;let u=0;for(let p=0;p<i.length;p++){const v=i[p],y=xf(v);if(y.rowPinned&&!Av(y)){St(59);continue}if(y.id===void 0){St(60);continue}this.groupSelectsFiltered&&y.group&&!o.get("treeData")||this.selectRowNode(y,e,n,s)&&(this.detailSelection.delete(y.id),u++),this.groupSelectsDescendants&&((d=y.childrenAfterGroup)!=null&&d.length)&&(u+=this.selectChildren(y,e,s))}return r||(i.length===1&&s==="api"&&this.selectionCtx.setRoot(xf(i[0])),e&&(t||!this.isMultiSelect())&&(u+=this.clearOtherNodes(xf(i[0]),a,s)),u>0&&(this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s))),u}selectRange(e,t,r){let i=0;return e.forEach(n=>{const s=xf(n);if(s.group&&this.groupSelectsDescendants)return;this.selectRowNode(s,t,void 0,r)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(r),this.dispatchSelectionChanged(r)),i}selectChildren(e,t,r){const i=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return i?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:r,nodes:i}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((r,i)=>{e(r)&&t.set(i,r)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:r,rowModel:i}=this.beans;if(!In(r))return!1;const n=i.rootNode;if(!n)return!1;t||(t=new J0(!0,n),t.active=!1);let s=!1;return t.forEachChangedNodeDepthFirst(a=>{if(a!==n){const o=this.calculateSelectedFromChildren(a);s=this.selectRowNode(a,o===null?!1:o,void 0,e)||s}}),s}clearOtherNodes(e,t,r){const i=new Map;let n=0;return this.selectedNodes.forEach(s=>{const a=s.id==e.id;if((t?!kme(e,s):!0)&&!a){const u=this.selectedNodes.get(s.id);n+=this.setNodesSelected({nodes:[u],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:r}),this.groupSelectsDescendants&&s.parent&&i.set(s.parent.id,s.parent)}}),i.forEach(s=>{const a=this.calculateSelectedFromChildren(s);this.selectRowNode(s,a===null?!1:a,void 0,r)}),n}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new ad(this.beans);return t.id=e.id,t.data=e.data,t.__daemon=!0,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!In(e))return;const r=t.getTopLevelNodes();if(r===null)return;const i=[];function n(s){for(let a=0,o=s.length;a<o;a++){const u=s[a];u.isSelected()?i.push(u):u.group&&u.childrenAfterGroup&&n(u.childrenAfterGroup)}}return n(r),i}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){const r=In(this.gos);let i=!1;const n=s=>{const a=this.selectRowNode(xf(s),!1,void 0,e);i||(i=a)};if(t==="currentPage"||t==="filtered"){if(!r){ai(102);return}this.getNodesToSelect(t).forEach(n)}else this.selectedNodes.forEach(n),this.reset(e);if(this.selectionCtx.selectAll=!1,r&&this.groupSelectsDescendants){const s=this.updateGroupsFromChildrenSelections(e);i||(i=s)}i&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,r=0;return this.getNodesToSelect(e).forEach(i=>{this.groupSelectsDescendants&&i.group||(i.isSelected()?t++:i.selectable&&r++)}),{selectedCount:t,notSelectedCount:r}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:r}=this.getSelectedCounts(e);return V8(t,r)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],r=n=>t.push(n);if(e==="currentPage")return this.forEachNodeOnPage(n=>{if(!n.group){r(n);return}if(!n.expanded&&!n.footer){const s=a=>{var o;r(a),(o=a.childrenAfterFilter)==null||o.forEach(s)};s(n);return}this.groupSelectsDescendants||r(n)}),t;const i=this.beans.rowModel;return e==="filtered"?(i.forEachNodeAfterFilter(r),t):(i.forEachNode(r),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:r}=this.beans,i=t.getFirstRow(),n=t.getLastRow();for(let s=i;s<=n;s++){const a=r.getRow(s);a&&e(a)}}selectAllRowNodes(e){const{gos:t,selectionCtx:r}=this;if(!zh(t)){St(132);return}if(Oie(t)&&!TC(t)){St(130);return}if(!this.canSelectAll())return;const{source:i,selectAll:n}=e;let s=!1;if(this.getNodesToSelect(n).forEach(a=>{const o=this.selectRowNode(xf(a),!0,void 0,i);s||(s=o)}),r.selectAll=!0,In(t)&&this.groupSelectsDescendants){const a=this.updateGroupsFromChildrenSelections(i);s||(s=a)}s&&this.dispatchSelectionChanged(i)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,r){if(e||(e=[]),!Array.isArray(e)){ai(103);return}const i=new Set(e),n=[];this.beans.rowModel.forEachNode(s=>{i.has(s.id)&&n.push(s)}),r&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:n,source:t})}canSelectAll(){const{gos:e}=this.beans;return!!In(e)}updateSelectable(e){var u;const{gos:t,rowModel:r}=this.beans;if(!zh(t))return;const i="selectableChanged",n=e!==void 0,s=In(t)&&this.groupSelectsDescendants,a=[],o=d=>{var v;if(n&&!d.group)return;if(s&&d.group){const y=((v=d.childrenAfterGroup)==null?void 0:v.some(_=>_.selectable))??!1;this.setRowSelectable(d,y,!0);return}!this.updateRowSelectable(d,!0)&&d.isSelected()&&a.push(d)};if(s){if(e===void 0){const d=r.rootNode;e=d?new J0(!1,d):void 0}e==null||e.forEachChangedNodeDepthFirst(o,!n,!n)}else r.forEachNode(o);a.length&&this.setNodesSelected({nodes:a,newValue:!1,source:i}),!n&&s&&((u=this.updateGroupsFromChildrenSelections)==null||u.call(this,i))}updateSelectableAfterGrouping(e){var t;this.updateSelectable(e),this.groupSelectsDescendants&&((t=this.updateGroupsFromChildrenSelections)!=null&&t.call(this,"rowGroupChanged",e))&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){var s,a;if(!this.masterSelectsDetail)return;const r=(a=(s=e.detailNode)==null?void 0:s.detailGridInfo)==null?void 0:a.api;if(!r)return;const i=Dme(r);if(e.isSelected()!==i&&this.selectRowNode(e,i,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!i){const o=this.detailSelection.get(e.id)??new Set;for(const u of r.getSelectedNodes())o.add(u.id);this.detailSelection.set(e.id,o)}}setDetailSelectionState(e,t,r){if(this.masterSelectsDetail){if(!TC(t)){St(269);return}switch(e.isSelected()){case!0:{r.selectAll();break}case!1:{r.deselectAll();break}case void 0:{const i=this.detailSelection.get(e.id);if(i){const n=[];for(const s of i){const a=r.getRowNode(s);a&&n.push(a)}r.setNodesSelected({nodes:n,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function xf(e){return Av(e)?e.pinnedSibling:e.footer?e.sibling:e}function Dme(e){let t=0,r=0;return e.forEachNode(i=>{i.isSelected()?t++:i.selectable&&r++}),V8(t,r)}function V8(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function kme(e,t){let r=t.parent;for(;r;){if(r===e)return!0;r=r.parent}return!1}function H8(e){var i;const t=e.isSelected()===!1,r=((i=e.childrenAfterFilter)==null?void 0:i.some(H8))??!1;return t||r}var Lme={moduleName:"SharedRowSelection",version:jt,beans:[_me],apiFunctions:{setNodesSelected:bme,selectAll:Sme,deselectAll:Eme,selectAllFiltered:Rme,deselectAllFiltered:Tme,selectAllOnCurrentPage:Pme,deselectAllOnCurrentPage:Mme,getSelectedNodes:Fme,getSelectedRows:Ame}},Ome={moduleName:"RowSelection",version:jt,rowModels:["clientSide","infinite","viewport"],beans:[Ime],dependsOn:[Lme]};function Nme(e){var t;(t=e.expansionSvc)==null||t.expandAll(!0)}function Bme(e){var t;(t=e.expansionSvc)==null||t.expandAll(!1)}function U8(e){var t;(t=e.rowModel)==null||t.onRowHeightChanged()}function W8(e){var t,r;if((t=e.rowAutoHeight)!=null&&t.active){St(3);return}(r=e.rowModel)==null||r.resetRowHeights()}function zme(e,t,r){var s;const i=Tle(e);if(i){if(((s=e.rowGroupColsSvc)==null?void 0:s.columns.length)===0){if(t<0){ai(238);return}i.setRowCount(t,r);return}ai(28);return}const n=$1(e);if(n){n.setRowCount(t,r);return}}function Gme(e){var t;return _d(e.gos)?e.rowModel.getBlockStates():((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}function Vme(e){return e.rowModel.isLastRowIndexKnown()}var Hme={moduleName:"CsrmSsrmSharedApi",version:jt,apiFunctions:{expandAll:Nme,collapseAll:Bme}},Ume={moduleName:"RowModelSharedApi",version:jt,apiFunctions:{onRowHeightChanged:U8,resetRowHeights:W8}},Wme={moduleName:"SsrmInfiniteSharedApi",version:jt,apiFunctions:{setRowCount:zme,getCacheBlockState:Gme,isLastRowIndexKnown:Vme}},jme=class extends ft{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(i=>{var s;if(!i){ai(18),t||ai(20);return}if(this.isGridApi(i))return i;const n=i;return"current"in n?(s=n.current)==null?void 0:s.api:(n.api||ai(19),n.api)}).filter(i=>!!i&&!i.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const r=[];return e.columns?e.columns.forEach(i=>{r.push(t(i))}):e.column&&r.push(t(e.column)),r}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":St(21);break}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;t&&e.columnGroups.forEach(r=>{let i=null;r&&(i=t.getProvidedColGroup(r.getGroupId())),!(r&&!i)&&t.setColumnGroupOpened(i,r.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){var p;const t=e.column;let r=null;const i=this.beans,{colResize:n,ctrlsSvc:s,colModel:a}=i;if(t&&(r=a.getColDefCol(t.getColId())),t&&!r)return;const o=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const y=e.api.getColumnState().map(_=>({colId:_.colId}));ja(i,{state:y,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const y=e.api.getColumnState().map(_=>({colId:_.colId,hide:_.hide}));ja(i,{state:y},"alignedGridChanged")}break;case"columnPinned":{const y=e.api.getColumnState().map(_=>({colId:_.colId,pinned:_.pinned}));ja(i,{state:y},"alignedGridChanged")}break;case"columnResized":{const v=e,y={};o.forEach(_=>{y[_.getId()]={key:_.getColId(),newWidth:_.getActualWidth()}}),(p=v.flexColumns)==null||p.forEach(_=>{y[_.getId()]&&delete y[_.getId()]}),n==null||n.setColumnWidths(Object.values(y),!1,v.finished,"alignedGridChanged");break}}const d=s.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(v=>{v.setGridOption("alwaysShowVerticalScroll",d)})}},$me={moduleName:"AlignedGrids",version:jt,beans:[jme],dependsOn:[K6]},qme=class extends Kae{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}},OS=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(e){this.adds.delete(e)||(this.updates.delete(e),this.removals.add(e))}update(e){this.adds.has(e)||this.updates.add(e)}add(e){this.adds.add(e)}},j8=e=>{const t=e.childrenAfterSort,r=e.sibling;if(r&&(r.childrenAfterSort=t),!!t)for(let i=0,n=t.length-1;i<=n;i++){const s=t[i],a=i===0,o=i===n;s.firstChild!==a&&(s.firstChild=a,s.dispatchRowEvent("firstChildChanged")),s.lastChild!==o&&(s.lastChild=o,s.dispatchRowEvent("lastChildChanged")),s.childIndex!==i&&(s.childIndex=i,s.dispatchRowEvent("childIndexChanged"))}},Kme=class extends ft{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(e){const t=this.beans.sortSvc.getSortOptions(),r=t.length>0&&!!e.changedRowNodes&&this.gos.get("deltaSort");this.sort(t,r,e.changedRowNodes,e.changedPath)}sort(e,t,r,i){const{gos:n,colModel:s,rowGroupColsSvc:a,rowNodeSorter:o,rowRenderer:u,showRowGroupCols:d}=this.beans,p=n.get("groupMaintainOrder"),v=s.getCols().some(k=>k.isRowGroupActive()),y=a==null?void 0:a.columns,_=s.isPivotMode(),P=n.getCallback("postSortRows");let R=!1,M;const F=k=>{var ee,q;const N=_&&k.leafGroup;let G=p&&v&&!k.leafGroup;G&&(M??(M=this.shouldSortContainsGroupCols(e)),G&&(G=!M));let j=null;if(G){let oe=!1;if(y){const ue=k.level+1;ue<y.length&&(oe=y[ue].getSort()===null)}oe||(j=Yme(k))}else!e.length||N?j=null:t&&r?j=Zme(o,k,r,i,e):j=o.doFullSort(k.childrenAfterAggFilter,e);if(j||(j=((ee=k.childrenAfterAggFilter)==null?void 0:ee.slice(0))??[]),R||(R=((q=k.childrenAfterSort)==null?void 0:q[0])!==j[0]),k.childrenAfterSort=j,j8(k),P){const oe={nodes:k.childrenAfterSort};P(oe)}};if(i==null||i.forEachChangedNodeDepthFirst(F),R&&n.get("groupHideOpenParents")){const k=d==null?void 0:d.getShowRowGroupCols();k!=null&&k.length&&u.refreshCells({columns:k,force:!0})}}shouldSortContainsGroupCols(e){const t=e.length;if(!t)return!1;if(wl(this.gos)){for(let r=0;r<t;++r){const i=e[r].column;if(i.isPrimary()&&i.isRowGroupActive())return!0}return!1}for(let r=0;r<t;++r)if(e[r].column.getColDef().showRowGroup)return!0;return!1}},Zme=(e,t,r,i,n)=>{const s=t.childrenAfterAggFilter,a=t.childrenAfterSort;if(!a)return e.doFullSort(s,n);const o=new Set,u=[],{updates:d,adds:p}=r;for(let y=0,_=s.length;y<_;++y){const P=s[y];d.has(P)||p.has(P)||i&&!i.canSkip(P)?u.push({currentPos:u.length,rowNode:P}):o.add(P)}const v=a.filter(y=>o.has(y)).map((y,_)=>({currentPos:_,rowNode:y}));return u.sort((y,_)=>e.compareRowNodes(n,y,_)),Xme(e,n,u,v)},Xme=(e,t,r,i)=>{let n=0,s=0;const a=r.length,o=i.length,u=new Array(a+o);let d=0;for(;n<a&&s<o;){const p=r[n],v=i[s];e.compareRowNodes(t,p,v)<0?(u[d++]=p.rowNode,++n):(u[d++]=v.rowNode,++s)}for(;n<a;)u[d++]=r[n++].rowNode;for(;s<o;)u[d++]=i[s++].rowNode;return u},Yme=e=>{const t=e.childrenAfterSort,r=e.childrenAfterAggFilter,i=t==null?void 0:t.length,n=r==null?void 0:r.length;if(!i||!n)return null;const s=new Array(n),a=new Set;for(let u=0;u<n;++u)a.add(r[u]);let o=0;for(let u=0;u<i;++u){const d=t[u];a.delete(d)&&(s[o++]=d)}if(a.size===0&&o===i)return t;for(const u of a)s[o++]=u;return s.length=o,s},Qme=class extends ft{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.rowDataUpdatedPending=!1,this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=os(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter(i=>!!i);const e=this.refreshModel.bind(this,{step:"group"}),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners(),this.rootNode=new ad(this.beans);const r=this.getNewNodeManager();this.nodeManager=r,r.activate(this.rootNode)}getNewNodeManager(){const{gos:e,beans:t}=this;return DB(e)==="treeNested"&&t.csrmChildrenTreeNodeSvc||t.csrmNodeSvc}addPropertyListeners(){const e=["treeData","treeDataChildrenField",...this.orderedStages.flatMap(({refreshProps:t})=>[...t])];this.addManagedPropertyListeners(e,t=>{var i;const r=(i=t.changeSet)==null?void 0:i.properties;r&&this.onPropChange(r)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,r,i){let n,s=!1;do{n=!1;const a=this.getRowIndexAtPixel(e),o=this.getRowIndexAtPixel(t),u=Math.max(a,r),d=Math.min(o,i);for(let p=u;p<=d;p++){const v=this.getRow(p);if(v.rowHeightEstimated){const y=Nu(this.beans,v);v.setRowHeight(y.height),n=!0,s=!0}}n&&this.setRowTopAndRowIndex()}while(n);return s}onPropChange(e){if(!this.rootNode)return;const t=this.gos,r=new Set(e),i={step:"nothing",changedProps:r},n=r.has("rowData"),s=this.nodeManager,a=this.getNewNodeManager(),o=s!==a||n&&r.has("treeData")&&t.get("treeData")||r.has("treeDataChildrenField")&&t.get("treeData");let u;if((o||n)&&(u=t.get("rowData"),u!=null&&!Array.isArray(u)&&(u=null,St(1))),o&&(n||(u=(s==null?void 0:s.extractRowData())??u),s!==a&&(s==null||s.deactivate(),this.nodeManager=a),a.activate(this.rootNode)),u)if(!o&&!this.isEmpty()&&u.length>0&&t.exists("getRowId")&&!t.get("resetRowDataOnUpdate"))i.keepRenderedRows=!0,i.animate=!this.gos.get("suppressAnimationFrame"),i.changedRowNodes=new OS,a.setImmutableRowData(i,u);else{i.rowDataUpdated=!0,i.newData=!0;const{selectionSvc:p,pinnedRowModel:v}=this.beans;p==null||p.reset("rowDataChanged"),v!=null&&v.isManual()&&v.reset(),this.rowNodesCountReady=!0,a.setNewRowData(u)}if(i.rowDataUpdated)i.step="group";else if(i.step==="nothing"){for(const{refreshProps:d,step:p}of this.orderedStages)if(e.some(v=>d.has(v))){i.step=p;break}}i.step!=="nothing"&&this.refreshModel(i)}setRowTopAndRowIndex(){const{beans:e,rowsToDisplay:t}=this,r=e.environment.getDefaultRowHeight();let i=0;const n=new Set,s=cs(this.gos,"normal");for(let a=0,o=t.length;a<o;++a){const u=t[a];if(u.id!=null&&n.add(u.id),u.rowHeight==null){const d=Nu(e,u,s,r);u.setRowHeight(d.height,d.estimated)}u.setRowTop(i),u.setRowIndex(a),i+=u.rowHeight}return n}clearRowTopAndRowIndex(e,t){const r=e.active,i=s=>{s&&s.id!=null&&!t.has(s.id)&&s.clearRowTopAndRowIndex()},n=s=>{if(s!==null&&(i(s),i(s.detailNode),i(s.sibling),s.hasChildren()&&s.childrenAfterGroup)){const a=s.level==-1;r&&!a&&!s.expanded||s.childrenAfterGroup.forEach(n)}};n(this.rootNode)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){const e=this.rootNode;if(!e||this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;const r=e.childrenAfterSort,i=e.sibling&&e.sibling.displayed?1:0;return(r?r.length:0)+i}getTopLevelRowDisplayedIndex(e){const{rootNode:t,rowsToDisplay:r}=this;if(!t||!r.length||r[0]===t)return e;const{childrenAfterSort:n}=t,s=o=>{let u=n[o];if(this.gos.get("groupHideOpenParents"))for(;u.expanded&&u.childrenAfterSort&&u.childrenAfterSort.length>0;)u=u.childrenAfterSort[0];return u.rowIndex},{footerSvc:a}=this.beans;return a?a.getTopDisplayIndex(r,e,n,s):s(e)}getTopLevelIndexFromDisplayedIndex(e){var a;const{rootNode:t,rowsToDisplay:r}=this;if(!t||!r.length||r[0]===t)return e;let n=this.getRow(e);for(n.footer&&(n=n.sibling);n.parent&&n.parent!==t;)n=n.parent;const s=(a=t.childrenAfterSort)==null?void 0:a.findIndex(o=>o===n);return s===-1?e:s??e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=dp(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=dp(this.gos),i=e.columns.length===0||e.columns.some(n=>n.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=dp(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new J0(!1,this.rootNode);return e||(t.active=!1),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:r,rowDataUpdated:i}=e;return!(!t||r||!i||t.removals.size||t.adds.size)}refreshModel(e){var s,a,o;if(!this.rootNode)return;const t=this.beans;let r=!!e.rowDataUpdated;const i=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&r));if(this.started&&r&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),!this.started||this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)){this.rowDataUpdatedPending||(this.rowDataUpdatedPending=r);return}switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.rowDataUpdated=r=!0,e.step="group"),this.isRefreshingModel=!0,(s=t.masterDetailSvc)==null||s.refreshModel(e),r&&e.step!=="group"&&((a=t.colFilter)==null||a.refreshModel()),e.step){case"group":(this.doRowGrouping(e)||r)&&((o=t.colFilter)==null||o.refreshModel()),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}));case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(e.changedRowNodes,i);case"map":this.doRowsToDisplay()}const n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,n),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){var e,t,r;return!((t=(e=this.rootNode)==null?void 0:e.allLeafChildren)!=null&&t.length)||!((r=this.colModel)!=null&&r.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let r=!1,i=!1;const n=[],s=X0(this.gos);return this.forEachNodeAfterFilterAndSort(a=>{if(i)return;if(r&&(a===t||a===e)&&(i=!0,a.group&&s)){n.push(...a.allLeafChildren);return}if(!r){if(a!==t&&a!==e)return;r=!0,t===e&&(i=!0)}if(!a.group||!s){n.push(a);return}}),n}getTopLevelNodes(){var e;return((e=this.rootNode)==null?void 0:e.childrenAfterGroup)??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay;if(this.isEmpty()||t.length===0)return-1;let r=0,i=t.length-1;if(e<=0)return 0;if(si(t).rowTop<=e)return t.length-1;let s=-1,a=-1;for(;;){const o=Math.floor((r+i)/2),u=t[o];if(this.isRowInPixel(u,e)||(u.rowTop<e?r=o+1:u.rowTop>e&&(i=o-1),s===r&&a===i))return o;s=r,a=i}}isRowInPixel(e,t){const r=e.rowTop,i=e.rowTop+e.rowHeight;return r<=t&&i>t}forEachLeafNode(e){var t,r;(r=(t=this.rootNode)==null?void 0:t.allLeafChildren)==null||r.forEach((i,n)=>e(i,n))}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){this.rowsToDisplay.forEach(e)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,r=>r.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,r=>r.childrenAfterSort)}forEachPivotNode(e,t=!1,r=!1){const{colModel:i,rowGroupColsSvc:n}=this.beans;if(!i.isPivotMode())return;if(!(n!=null&&n.columns.length)){e(this.rootNode,0);return}const s=r?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,a=>a.leafGroup?null:a[s])}depthFirstSearchRowNodes(e,t=!1,r=s=>s.childrenAfterGroup,i=this.rootNode,n=0){let s=n;if(!i)return s;const a=i===this.rootNode;a||e(i,s++);const{footerSvc:o}=this.beans;if(i.hasChildren()&&!i.footer){const u=r(i);if(u){s=(o==null?void 0:o.addTotalRows(s,i,e,t,a,"top"))??s;for(const d of u)s=this.depthFirstSearchRowNodes(e,t,r,d,s);return(o==null?void 0:o.addTotalRows(s,i,e,t,a,"bottom"))??s}}return s}doAggregate(e){var r;const t=this.rootNode;t&&((r=this.aggStage)==null||r.execute({rowNode:t,changedPath:e}))}doFilterAggregates(e){const t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst(r=>{r.childrenAfterSort=r.childrenAfterAggFilter.slice(0),j8(r)})}doRowGrouping(e){var n;const t=this.rootNode,r=(n=this.groupStage)==null?void 0:n.execute({rowNode:t,changedRowNodes:e.changedRowNodes,changedPath:e.changedPath,rowNodesOrderChanged:!!e.rowNodesOrderChanged,afterColumnsChanged:!!e.afterColumnsChanged});if(r!==void 0)return r;const i=t.sibling;return t.childrenAfterGroup=t.allLeafChildren,i&&(i.childrenAfterGroup=t.childrenAfterGroup),t.updateHasChildren(),!1}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst(t=>{t.childrenAfterFilter=t.childrenAfterGroup,y8(t)},!0)}doPivot(e){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){var i;const t=this.nodeManager.getRowNode(e);return typeof t=="object"?t:typeof e=="string"&&e.indexOf(x2)===0?(i=this.groupStage)==null?void 0:i.getNode(e):void 0}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const r=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},r)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var n,s;(n=this.valueCache)==null||n.onDataChanged();const e=[],t=[],r=new OS;let i=!1;(s=this.rowDataTransactionBatch)==null||s.forEach(a=>{this.rowNodesCountReady=!0;const{rowNodeTransaction:o,rowsInserted:u}=this.nodeManager.updateRowData(a.rowDataTransaction,r);u&&(i=!0),t.push(o),a.callback&&e.push(a.callback.bind(null,o))}),this.commitTransactions(i,r),e.length>0&&window.setTimeout(()=>{e.forEach(a=>a())},0),t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){var n;(n=this.valueCache)==null||n.onDataChanged(),this.rowNodesCountReady=!0;const t=new OS,{rowNodeTransaction:r,rowsInserted:i}=this.nodeManager.updateRowData(e,t);return this.commitTransactions(i,t),r}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged:e,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:t,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{flattenStage:e,rootNode:t}=this;let r;if(e)r=e.execute({rowNode:t});else{r=(t==null?void 0:t.childrenAfterSort)??[];for(const i of r)i.setUiLevel(0)}this.rowsToDisplay=r}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const r=t.detailNode;r&&r.setRowHeight(r.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){var t;if(e.rowHeightChanged){if((t=this.beans.rowAutoHeight)!=null&&t.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.orderedStages=ED,this.rowsToDisplay=ED}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}};function Jme(e){var t;(t=e.expansionSvc)==null||t.onGroupExpandedOrCollapsed()}function e0e(e,t){const r=Ac(e);r&&((!t||t==="everything")&&(t="group"),r.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function t0e(e){var t;return((t=Ac(e))==null?void 0:t.isEmpty())??!0}function r0e(e,t){var r;(r=Ac(e))==null||r.forEachLeafNode(t)}function i0e(e,t){var r;(r=Ac(e))==null||r.forEachNodeAfterFilter(t)}function n0e(e,t){var r;(r=Ac(e))==null||r.forEachNodeAfterFilterAndSort(t)}function s0e(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var r;return(r=Ac(e))==null?void 0:r.updateRowData(t)})}function o0e(e,t,r){e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=Ac(e))==null?void 0:i.batchUpdateRowData(t,r)})}function a0e(e){e.frameworkOverrides.wrapIncoming(()=>{var t;return(t=Ac(e))==null?void 0:t.flushAsyncTransactions()})}function l0e(e){var t;return(t=e.selectionSvc)==null?void 0:t.getBestCostNodeSelection()}var c0e={moduleName:"ClientSideRowModel",version:jt,rowModels:["clientSide"],beans:[qme,Qme,Kme],dependsOn:[p8]},u0e={moduleName:"ClientSideRowModelApi",version:jt,apiFunctions:{onGroupExpandedOrCollapsed:Jme,refreshClientSideRowModel:e0e,isRowDataEmpty:t0e,forEachLeafNode:r0e,forEachNodeAfterFilter:i0e,forEachNodeAfterFilterAndSort:n0e,applyTransaction:s0e,applyTransactionAsync:o0e,flushAsyncTransactions:a0e,getBestCostNodeSelection:l0e,resetRowHeights:W8,onRowHeightChanged:U8},dependsOn:[Hme,Ume]},h0e=class extends ft{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:r,columnKeys:i,skipRowGroups:n,exportRowNumbers:s}=t,a=this.getColumnsToExport({allColumns:r,skipRowGroups:n,columnKeys:i,exportRowNumbers:s});return[this.prepareSession(a),this.prependContent(t),this.exportColumnGroups(t,a),this.exportHeaders(t,a),this.processPinnedTopRows(t,a),this.processRows(t,a),this.processPinnedBottomRows(t,a),this.appendContent(t)].reduce((o,u)=>u(o),e).parse()}processRow(e,t,r,i){var P;const n=t.shouldRowBeSkipped||(()=>!1),a=t.rowPositions!=null||!!t.onlySelected,o=this.gos.get("groupHideOpenParents")&&!a,u=this.colModel.isPivotMode()?i.leafGroup:!i.group,d=!!i.footer,p=i.allChildrenCount===1&&((P=i.childrenAfterGroup)==null?void 0:P.length)===1&&kie(this.gos,i);if(!u&&!d&&(t.skipRowGroups||p||o)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.stub||i.level===-1&&!u&&!d||n(Cr(this.gos,{node:i})))return;const _=e.onNewBodyRow(i);if(r.forEach((R,M)=>{_.onColumn(R,M,i)}),t.getCustomContentBelowRow){const R=t.getCustomContentBelowRow(Cr(this.gos,{node:i}));R&&e.addCustomContent(R)}}appendContent(e){return t=>{const r=e.appendContent;return r&&t.addCustomContent(r),t}}prependContent(e){return t=>{const r=e.prependContent;return r&&t.addCustomContent(r),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return r=>{if(!e.skipColumnGroupHeaders){const i=new qB,{colGroupSvc:n}=this.beans,s=n?n.createColumnGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(s,r,e.processGroupHeaderCallback)}return r}}exportHeaders(e,t){return r=>{if(!e.skipColumnHeaders){const i=r.onNewHeaderRow();t.forEach((n,s)=>{i.onColumn(n,s,void 0)})}return r}}processPinnedTopRows(e,t){return r=>{var n,s;const i=this.processRow.bind(this,r,e,t);return e.rowPositions?e.rowPositions.filter(a=>a.rowPinned==="top").sort((a,o)=>a.rowIndex-o.rowIndex).map(a=>{var o;return(o=this.pinnedRowModel)==null?void 0:o.getPinnedTopRow(a.rowIndex)}).forEach(i):(n=this.pinnedRowModel)!=null&&n.isManual()||(s=this.pinnedRowModel)==null||s.forEachPinnedRow("top",i),r}}processRows(e,t){return r=>{var d;const i=this.rowModel,n=In(this.gos),s=_d(this.gos),a=!n&&e.onlySelected,o=this.processRow.bind(this,r,e,t),{exportedRows:u="filteredAndSorted"}=e;if(e.rowPositions)return e.rowPositions.filter(p=>p.rowPinned==null).sort((p,v)=>p.rowIndex-v.rowIndex).map(p=>i.getRow(p.rowIndex)).forEach(o),r;if(this.colModel.isPivotMode())return n?i.forEachPivotNode(o,!0,u==="filteredAndSorted"):s?i.forEachNodeAfterFilterAndSort(o,!0):i.forEachNode(o),r;if(e.onlySelectedAllPages||a){const p=((d=this.beans.selectionSvc)==null?void 0:d.getSelectedNodes())??[];this.replicateSortedOrder(p),p.forEach(o)}else u==="all"?i.forEachNode(o):n||s?i.forEachNodeAfterFilterAndSort(o,!0):i.forEachNode(o);return r}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:r}=this.beans;if(!t||!r)return;const i=t.getSortOptions(),n=(s,a)=>{var o,u;return s.rowIndex!=null&&a.rowIndex!=null?s.rowIndex-a.rowIndex:s.level===a.level?((o=s.parent)==null?void 0:o.id)===((u=a.parent)==null?void 0:u.id)?r.compareRowNodes(i,{rowNode:s,currentPos:s.rowIndex??-1},{rowNode:a,currentPos:a.rowIndex??-1}):n(s.parent,a.parent):s.level>a.level?n(s.parent,a):n(s,a.parent)};e.sort(n)}processPinnedBottomRows(e,t){return r=>{var n,s;const i=this.processRow.bind(this,r,e,t);return e.rowPositions?e.rowPositions.filter(a=>a.rowPinned==="bottom").sort((a,o)=>a.rowIndex-o.rowIndex).map(a=>{var o;return(o=this.pinnedRowModel)==null?void 0:o.getPinnedBottomRow(a.rowIndex)}).forEach(i):(n=this.pinnedRowModel)!=null&&n.isManual()||(s=this.pinnedRowModel)==null||s.forEachPinnedRow("bottom",i),r}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:r=!1,exportRowNumbers:i=!1,columnKeys:n}=e,{colModel:s,gos:a,visibleCols:o}=this,u=s.isPivotMode(),d=y=>Ku(y)?!1:!Eu(y)||i;if(n&&n.length)return s.getColsForKeys(n).filter(d);const p=a.get("treeData");let v=[];return t&&!u?v=s.getCols():v=o.allCols,v=v.filter(y=>d(y)&&(r&&!p?!$T(y):!0)),v}recursivelyAddHeaderGroups(e,t,r){const i=[];e.forEach(n=>{const s=n;s.getChildren&&s.getChildren().forEach(a=>i.push(a))}),e.length>0&&vn(e[0])&&this.doAddHeaderHeader(t,e,r),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,r)}doAddHeaderHeader(e,t,r){const i=e.onNewHeaderGroupingRow();let n=0;t.forEach(s=>{const a=s;let o;r?o=r(Cr(this.gos,{columnGroup:a})):o=this.beans.colNames.getDisplayNameForColumnGroup(a,"header");const d=(a.isExpandable()?a.getLeafColumns():[]).reduce((p,v,y,_)=>{let P=si(p);return v.getColumnGroupShow()==="open"?(!P||P[1]!=null)&&(P=[y],p.push(P)):P&&P[1]==null&&(P[1]=y-1),y===_.length-1&&P&&P[1]==null&&(P[1]=y),p},[]);i.onColumn(a,o||"",n++,a.getLeafColumns().length-1,d)})}},d0e={moduleName:"SharedExport",version:jt,beans:[h0e]},Ak=`\r
`,f0e=class extends $fe{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:r}=e;this.suppressQuotes=t,this.columnSeparator=r}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,Ak),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((r,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(r.data.value||""),r.mergeAcross&&this.appendEmptyCells(r.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,r,i){r!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,r){t!=0&&(this.result+=this.columnSeparator);const i=this.extractRowCellValue(e,t,t,"csv",r);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(St(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=Ak),this.isFirstLine=!1}},p0e=class extends jfe{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){St(51);return}const t=this.getMergedParams(e),r=this.getData(t),i=new Blob(["\uFEFF",r],{type:"text/plain"}),n=typeof t.fileName=="function"?t.fileName(Cr(this.gos,{})):t.fileName;qfe(this.getFileName(n),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const r=t?Object.assign({},e):this.getMergedParams(e);return this.getData(r)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:r,rowGroupColsSvc:i,valueSvc:n,gos:s}=this,{processCellCallback:a,processHeaderCallback:o,processGroupHeaderCallback:u,processRowGroupCallback:d,suppressQuotes:p,columnSeparator:v}=e;return new f0e({colModel:t,colNames:r,valueSvc:n,gos:s,processCellCallback:a||void 0,processHeaderCallback:o||void 0,processGroupHeaderCallback:u||void 0,processRowGroupCallback:d||void 0,suppressQuotes:p||!1,columnSeparator:v||",",rowGroupColsSvc:i})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function g0e(e,t){var r;return(r=e.csvCreator)==null?void 0:r.getDataAsCsv(t)}function m0e(e,t){var r;(r=e.csvCreator)==null||r.exportDataAsCsv(t)}var v0e={moduleName:"CsvExport",version:jt,beans:[p0e],apiFunctions:{getDataAsCsv:g0e,exportDataAsCsv:m0e},dependsOn:[d0e]},y0e=class extends ft{constructor(e,t,r){super(),this.id=e,this.parentCache=t,this.params=r,this.state="needsLoading",this.version=0,this.startRow=e*r.blockSize,this.endRow=this.startRow+r.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,r){this.successCommon(e,{rowData:t,rowCount:r})}isRequestMostRecentAndLive(e){const t=e===this.version,r=this.isAlive();return t&&r}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:r,beans:i,rowNodes:n}=this;for(let s=0;s<e;s++){const a=r+s,o=new ad(i);o.setRowHeight(t),o.uiLevel=0,o.setRowIndex(a),o.setRowTop(t*a),n.push(o)}}getBlockStateJson(){const{id:e,startRow:t,endRow:r,state:i}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:r,pageStatus:i}}}setDataAndId(e,t,r){Wt(t)?e.setDataAndId(t,r.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(Gi(this.params.datasource.getRows)){St(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:r,params:{sortModel:i,filterModel:n},gos:s}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,r),failCallback:this.pageLoadFailed.bind(this,r),sortModel:i,filterModel:n,context:Cr(s,{}).context}}forEachNode(e,t,r){this.rowNodes.forEach((i,n)=>{this.startRow+n<r&&e(i,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const r=e-this.startRow;return this.rowNodes[r]}processServerResult(e){const{rowNodes:t,beans:r}=this;t.forEach((n,s)=>{const a=e.rowData?e.rowData[s]:void 0;!n.id&&n.alreadyRendered&&a&&(t[s]=new ad(r),t[s].setRowIndex(n.rowIndex),t[s].setRowTop(n.rowTop),t[s].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(t[s],a,this.startRow+s)});const i=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,i)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},w0e=2,x0e=class extends ft{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const r=Math.floor(e/this.params.blockSize);let i=this.blocks[r];if(!i){if(t)return;i=this.createBlock(r)}return i.getRow(e)}createBlock(e){const t=this.params,r=this.createBean(new y0e(e,this,t));return this.blocks[r.id]=r,this.blockCount++,this.purgeBlocksIfNeeded(r),t.rowNodeBlockLoader.addBlock(r),r}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(nd(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(a=>a!=e),r=(a,o)=>o.lastAccessed-a.lastAccessed;t.sort(r);const i=this.params.maxBlocksInCache>0,n=i?this.params.maxBlocksInCache-1:null,s=w0e-1;t.forEach((a,o)=>{const u=a.state==="needsLoading"&&o>=s,d=i?o>=n:!1;if(u||d){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const{startRow:r,endRow:i}=e;return t.rowIndex>=r&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:r}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,r-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:r,overflowSize:i}=this.params,s=(e.id+1)*r+i;this.rowCount<s&&(this.rowCount=s)}}setRowCount(e,t){this.rowCount=e,Wt(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};this.getBlocksInOrder().forEach(r=>r.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(r,i)=>r.id-i.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.id*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const r=[];let i=-1,n=!1;const s={value:0};let a=!1;return this.getBlocksInOrder().forEach(u=>{if(!a){if(n&&i+1!==u.id){a=!0;return}i=u.id,u.forEachNode(d=>{const p=d===e||d===t;(n||p)&&r.push(d),p&&(n=!n)},s,this.rowCount)}}),a||n?[]:r}},C0e=class extends ft{constructor(){super(...arguments),this.beanName="rowModel"}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=Gh(this.beans),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=Gh(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){var t;let e;this.cacheParams?e=!W0(this.cacheParams.sortModel,((t=this.beans.sortSvc)==null?void 0:t.getSortModel())??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){var r;return((r=this.infiniteCache)==null?void 0:r.getRowNodesInRange(e,t))??[]}reset(){var r;if(!this.datasource)return;Np(this.gos)!=null||(r=this.beans.selectionSvc)==null||r.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:r,rowNodeBlockLoader:i,eventSvc:n,gos:s}=e;this.cacheParams={datasource:this.datasource,filterModel:(t==null?void 0:t.getFilterModel())??{},sortModel:(r==null?void 0:r.getSortModel())??[],rowNodeBlockLoader:i,initialRowCount:s.get("infiniteInitialRowCount"),maxBlocksInCache:s.get("maxBlocksInCache"),rowHeight:Gh(e),overflowSize:s.get("cacheOverflowSize"),blockSize:s.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new x0e(this.cacheParams)),n.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(r=>{r.id===e&&(t=r)}),t}forEachNode(e){var t;(t=this.infiniteCache)==null||t.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),r=this.getRowCount()-1;return t>r?r:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){var e;(e=this.infiniteCache)==null||e.refreshCache()}purgeCache(){var e;(e=this.infiniteCache)==null||e.purgeCache()}isLastRowIndexKnown(){var e;return((e=this.infiniteCache)==null?void 0:e.isLastRowIndexKnown())??!1}setRowCount(e,t){var r;(r=this.infiniteCache)==null||r.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}};function _0e(e){var t;(t=$1(e))==null||t.refreshCache()}function b0e(e){var t;(t=$1(e))==null||t.purgeCache()}function S0e(e){var t;return(t=$1(e))==null?void 0:t.getRowCount()}var E0e=class extends ft{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=Lie(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=os(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){xa(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){nd(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(r=>r.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length,t.forEach(r=>r.load()),this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:r,state:i}=t.getBlockStateJson();e[r]=i}),e}printCacheStatus(){nd(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},R0e={moduleName:"InfiniteRowModelCore",version:jt,rowModels:["infinite"],beans:[C0e,E0e]},T0e={moduleName:"InfiniteRowModel",version:jt,apiFunctions:{refreshInfiniteCache:_0e,purgeInfiniteCache:b0e,getInfiniteRowCount:S0e},dependsOn:[R0e,Wme]},P0e="",M0e="",F0e={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},A0e=class extends Qi{constructor(){super(F0e),this.eValue=fr,this.eDelta=fr,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const r=Math.abs(t),i=e.formatValue(r),n=Wt(i)?i:r,s=t>=0,a=this.eDelta;s?a.textContent=P0e+n:a.textContent=M0e+n,a.classList.toggle("ag-value-change-delta-up",s),a.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),bo(this.eDelta)}refresh(e,t=!1){var d;const{value:r,valueFormatted:i}=e,{eValue:n,lastValue:s,beans:a}=this;if(r===s||(Wt(i)?n.textContent=i:Wt(r)?n.textContent=r:bo(n),(d=a.filterManager)!=null&&d.isSuppressFlashingCellsBecauseFiltering()))return!1;const o=r&&typeof r=="object"&&"toNumber"in r?r.toNumber():r,u=s&&typeof s=="object"&&"toNumber"in s?s.toNumber():s;if(o===u)return!1;if(typeof o=="number"&&typeof u=="number"){const p=o-u;this.showDelta(e,p)}return s&&n.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=r,!0}},I0e=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",D0e={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},k0e=class extends Qi{constructor(){super(D0e),this.eCurrent=fr,this.refreshCount=0,this.registerCSS(I0e)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const{beans:t,eCurrent:r}=this,i=eo({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=i,i.textContent=r.textContent,this.getGui().insertBefore(i,r),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var n;let r=e.value;if(Gi(r)&&(r=""),r===this.lastValue||(n=this.beans.filterManager)!=null&&n.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=r;const i=this.eCurrent;return Wt(e.valueFormatted)?i.textContent=e.valueFormatted:Wt(e.value)?i.textContent=r:bo(i),!0}},L0e=class extends ft{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,r=this.beans.gos.get("cellFlashDuration"),i=this.beans.gos.get("cellFadeDuration")){const n=this.animations[t];n.delete(e);const s=Date.now(),a=s+r,o=s+r+i,u={phase:"flash",flashEndTime:a,fadeEndTime:o};n.set(e,u);const d=`ag-cell-${t}`,p=`${d}-animation`,{comp:v,eGui:{style:y}}=e;v.toggleCss(d,!0),v.toggleCss(p,!1),y.removeProperty("transition"),y.removeProperty("transition-delay"),this.nextAnimationTime&&a+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),r)}),this.nextAnimationTime=a)}advanceAnimations(){const e=Date.now();let t=null;for(const r of Object.keys(this.animations)){const i=this.animations[r],n=`ag-cell-${r}`,s=`${n}-animation`;for(const[a,o]of i){if(!a.isAlive()||!a.comp){i.delete(a);continue}const{phase:u,flashEndTime:d,fadeEndTime:p}=o,v=u==="flash"?d:p;if(!(e+15>=v)){t=Math.min(v,t??1/0);continue}const{comp:_,eGui:{style:P}}=a;switch(u){case"flash":_.toggleCss(n,!1),_.toggleCss(s,!0),P.transition=`background-color ${p-d}ms`,P.transitionDelay=`${d-e}ms`,t=Math.min(p,t??1/0),o.phase="fade";break;case"fade":_.toggleCss(n,!1),_.toggleCss(s,!1),P.removeProperty("transition"),P.removeProperty("transition-delay"),i.delete(a);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const r=Ple(e.cellPosition);t.cells[r]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t==null?void 0:t.flashDuration,t==null?void 0:t.fadeDuration)}destroy(){for(const e of Object.keys(this.animations))this.animations[e].clear()}};function O0e(e,t={}){const{cellFlashSvc:r}=e;r&&e.frameworkOverrides.wrapIncoming(()=>{e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(i=>r.flashCell(i,t))})}var N0e={moduleName:"HighlightChanges",version:jt,beans:[L0e],userComponents:{agAnimateShowChangeCellRenderer:A0e,agAnimateSlideCellRenderer:k0e},apiFunctions:{flashCells:O0e}};function B0e(e){var t;return((t=e.stateSvc)==null?void 0:t.getState())??{}}function z0e(e,t,r){var i;return(i=e.stateSvc)==null?void 0:i.setState(t,r)}function Ik(e){switch(e={...e},e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=G0e(e)}return e.version=jt,e}function G0e(e){return e.cellSelection=V0e(e,"rangeSelection"),e}function V0e(e,t){if(e&&typeof e=="object")return e[t]}var H0e=class extends ft{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=os(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=os(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=os(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){const{gos:e,ctrlsSvc:t,colDelayRenderSvc:r}=this.beans;this.isClientSideRowModel=In(e);const i=Ik(e.get("initialState")??{}),n=i.partialColumnState;delete i.partialColumnState,this.cachedState=i;const s=this.suppressEventsAndDispatchInitEvent.bind(this);t.whenReady(this,()=>s(()=>this.setupStateOnGridReady(i))),(i.columnOrder||i.columnVisibility||i.columnSizing||i.columnPinning||i.columnGroup)&&(r==null||r.hideColumns("columnState"));const[a,o,u]=this.addManagedEventListeners({newColumnsLoaded:({source:d})=>{d==="gridInitializing"&&(a(),s(()=>{this.setupStateOnColumnsInitialised(i,!!n),r==null||r.revealColumns("columnState")}))},rowCountReady:()=>{o==null||o(),s(()=>this.setupStateOnRowCountReady(i))},firstDataRendered:()=>{u==null||u(),s(()=>this.setupStateOnFirstDataRendered(i))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const r=Ik(e);delete r.partialColumnState,this.cachedState=r,this.startSuppressEvents();const i="api",n=t?new Set(t):void 0;this.setGridReadyState(r,i,n),this.setColumnsInitialisedState(r,i,!1,n),this.setRowCountState(r,i,n),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(r,i,n),this.stopSuppressEvents(i)})}setGridReadyState(e,t,r){var i,n;t==="api"&&!(r!=null&&r.has("sideBar"))&&((n=(i=this.beans.sideBar)==null?void 0:i.comp)==null||n.setState(e.sideBar)),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,r,i){this.setColumnState(e,t,r,i),this.setColumnGroupState(e,t,i),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const r=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:r("aggregation"),columnMoved:r("columnOrder"),columnPinned:r("columnPinning"),columnResized:r("columnSizing"),columnVisible:r("columnVisibility"),columnPivotChanged:r("pivot"),columnPivotModeChanged:r("pivot"),columnRowGroupChanged:r("rowGroup"),sortChanged:r("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,r){const{filter:i,rowGroupExpansion:n,ssrmRowGroupExpansion:s,rowSelection:a,pagination:o}=e,u=(p,v)=>!(r!=null&&r.has(p))&&(v||t==="api");u("filter",i)&&this.setFilterState(i),u("rowGroupExpansion",n)&&this.setRowGroupExpansionState(s,n,t),u("rowSelection",a)&&this.setRowSelectionState(a,t),u("pagination",o)&&this.setPaginationState(o,t);const d=this.updateCachedState.bind(this);d("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(d("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),d("rowGroupExpansion",void 0)):(d("rowGroupExpansion",this.getRowGroupExpansionState()),d("ssrmRowGroupExpansion",void 0)),d("rowSelection",this.getRowSelectionState()),d("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),r=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},i=()=>t("filter",this.getFilterState()),{gos:n,colFilter:s}=this.beans;this.addManagedEventListeners({filterChanged:i,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:r,columnRowGroupChanged:r,rowDataUpdated:()=>{(n.get("groupDefaultExpanded")!==0||n.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(r)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:a=>{(a.newPage||a.newPageSize)&&t("pagination",this.getPaginationState())}}),s&&this.addManagedListeners(s,{filterStateChanged:i})}setFirstDataRenderedState(e,t,r){const{scroll:i,cellSelection:n,focusedCell:s,columnOrder:a,rowPinning:o}=e,u=(v,y)=>!(r!=null&&r.has(v))&&(y||t==="api");u("focusedCell",s)&&this.setFocusedCellState(s),u("cellSelection",n)&&this.setCellSelectionState(n),u("scroll",i)&&this.setScrollState(i),u("rowPinning",o)&&this.setRowPinningState(o),this.setColumnPivotState(!!(a!=null&&a.orderedColIds),t);const d=this.updateCachedState.bind(this);d("sideBar",this.getSideBarState()),d("focusedCell",this.getFocusedCellState());const p=this.getRangeSelectionState();d("rangeSelection",p),d("cellSelection",p),d("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this),r=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:r,cellFocusCleared:r,cellSelectionChanged:i=>{if(i.finished){const n=this.getRangeSelectionState();t("rangeSelection",n),t("cellSelection",n)}},bodyScrollEnd:()=>t("scroll",this.getScrollState()),pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())})}getColumnState(){const e=this.beans;return Vfe(AC(e),e.colModel.isPivotMode())}setColumnState(e,t,r,i){const{sort:n,rowGroup:s,aggregation:a,pivot:o,columnPinning:u,columnVisibility:d,columnSizing:p,columnOrder:v}=e;let y=!1;const _=(ie,fe)=>{const ke=!(i!=null&&i.has(ie))&&!!(fe||t==="api");return y||(y=ke),ke},P={},R=ie=>{let fe=P[ie];return fe||(fe={colId:ie},P[ie]=fe,fe)},M={},F=_("sort",n);F&&(n==null||n.sortModel.forEach(({colId:ie,sort:fe},ke)=>{const et=R(ie);et.sort=fe,et.sortIndex=ke})),(F||!r)&&(M.sort=null,M.sortIndex=null);const k=_("rowGroup",s);k&&(s==null||s.groupColIds.forEach((ie,fe)=>{const ke=R(ie);ke.rowGroup=!0,ke.rowGroupIndex=fe})),(k||!r)&&(M.rowGroup=null,M.rowGroupIndex=null);const N=_("aggregation",a);N&&(a==null||a.aggregationModel.forEach(({colId:ie,aggFunc:fe})=>{R(ie).aggFunc=fe})),(N||!r)&&(M.aggFunc=null);const G=_("pivot",o);G&&(o==null||o.pivotColIds.forEach((ie,fe)=>{const ke=R(ie);ke.pivot=!0,ke.pivotIndex=fe}),this.gos.updateGridOptions({options:{pivotMode:!!(o!=null&&o.pivotMode)},source:t})),(G||!r)&&(M.pivot=null,M.pivotIndex=null);const j=_("columnPinning",u);j&&(u==null||u.leftColIds.forEach(ie=>{R(ie).pinned="left"}),u==null||u.rightColIds.forEach(ie=>{R(ie).pinned="right"})),(j||!r)&&(M.pinned=null);const ee=_("columnVisibility",d);ee&&(d==null||d.hiddenColIds.forEach(ie=>{R(ie).hide=!0})),(ee||!r)&&(M.hide=null);const q=_("columnSizing",p);q&&(p==null||p.columnSizingModel.forEach(({colId:ie,flex:fe,width:ke})=>{const et=R(ie);et.flex=fe??null,et.width=ke})),(q||!r)&&(M.flex=null);const oe=v==null?void 0:v.orderedColIds,ue=!!(oe!=null&&oe.length)&&!(i!=null&&i.has("columnOrder")),me=ue?oe.map(ie=>R(ie)):Object.values(P);(me.length||y)&&(this.columnStates=me,ja(this.beans,{state:me,applyOrder:ue,defaultState:M},t))}setColumnPivotState(e,t){const r=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;this.columnGroupStates=void 0;const n=this.beans,{pivotResultCols:s,colGroupSvc:a}=n;if(s!=null&&s.isPivotResultColsPresent()){if(r){const o=[];for(const u of r)s.getPivotResultCol(u.colId)&&o.push(u);ja(n,{state:o,applyOrder:e},t)}i&&(a==null||a.setColumnGroupState(i,t))}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState();return Hfe(t)}setColumnGroupState(e,t,r){var o;const i=this.beans.colGroupSvc;if(!i||r!=null&&r.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const n=new Set((o=e.columnGroup)==null?void 0:o.openColumnGroupIds),a=i.getColumnGroupState().map(({groupId:u})=>{const d=n.has(u);return d&&n.delete(u),{groupId:u,open:d}});n.forEach(u=>{a.push({groupId:u,open:!0})}),a.length&&(this.columnGroupStates=a),i.setColumnGroupState(a,t)}getFilterState(){const e=this.beans.filterManager;let t=e==null?void 0:e.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const r=e==null?void 0:e.getFilterState(),i=(e==null?void 0:e.getAdvFilterModel())??void 0;return t||i||r?{filterModel:t,columnFilterState:r,advancedFilterModel:i}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:r,columnFilterState:i,advancedFilterModel:n}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};(r!==void 0||i!==void 0)&&(t==null||t.setFilterState(r??null,i??null,"columnFilter")),n!==void 0&&(t==null||t.setAdvFilterModel(n??null,"advancedFilter"))}getRangeSelectionState(){var t;const e=(t=this.beans.rangeSvc)==null?void 0:t.getCellRanges().map(r=>{const{id:i,type:n,startRow:s,endRow:a,columns:o,startColumn:u}=r;return{id:i,type:n,startRow:s,endRow:a,colIds:o.map(d=>d.getColId()),startColId:u.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:r,colModel:i,visibleCols:n}=this.beans;if(!Bu(t)||!r)return;const s=[];e==null||e.cellRanges.forEach(a=>{const o=[];if(a.colIds.forEach(d=>{const p=i.getCol(d);p&&o.push(p)}),!o.length)return;let u=i.getCol(a.startColId);if(!u){const d=n.allCols,p=new Set(o);u=d.find(v=>p.has(v))}s.push({...a,columns:o,startColumn:u})}),r.setCellRanges(s)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:r}=(e==null?void 0:e.getVScrollPosition())??{top:0};return r||t?{top:r,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:r}=e??{top:0,left:0},{frameworkOverrides:i,rowRenderer:n,animationFrameSvc:s,ctrlsSvc:a}=this.beans;i.wrapIncoming(()=>{var o;a.get("center").setCenterViewportScrollLeft(r),(o=a.getScrollFeature())==null||o.setVerticalScrollPosition(t),n.redraw({afterScroll:!0}),s==null||s.flushAllFrames()})}getSideBarState(){var e,t;return(t=(e=this.beans.sideBar)==null?void 0:e.comp)==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:r,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:r,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:r}=this.beans;if(!e){t.clearFocusedCell();return}const{colId:i,rowIndex:n,rowPinned:s}=e;t.setFocusedCell({column:r.getCol(i),rowIndex:n,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const r=e.getCurrentPage(),i=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!r&&!i))return{page:r,pageSize:i}}setPaginationState(e,t){const{pagination:r,gos:i}=this.beans;if(!r)return;const{pageSize:n,page:s}=e??{page:0,pageSize:i.get("paginationPageSize")},a=t==="gridInitializing";n&&!i.get("paginationAutoPageSize")&&r.setPageSize(n,a?"initialState":"pageSizeSelector"),typeof s=="number"&&(a?r.setPage(s):r.goToPage(s))}getRowSelectionState(){var i;const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!((i=t==null?void 0:t.toggledNodes)!=null&&i.length)?void 0:t}setRowSelectionState(e,t){var r;(r=this.beans.selectionSvc)==null||r.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){const{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){var e;return(e=this.beans.pinnedRowModel)==null?void 0:e.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?t==null||t.setPinnedState(e):t==null||t.reset()}setRowGroupExpansionState(e,t,r){const i=this.beans.expansionSvc;if(!i)return;const n=t??{expandedRowGroupIds:[],collapsedRowGroupIds:[]};i.setExpansionState(n,r)}updateColumnState(e){const t=this.getColumnState();let r=!1;const i=this.cachedState;for(const n of Object.keys(t)){const s=t[n];W0(s,i[n])||(r=!0)}this.cachedState={...i,...t},r&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const r=this.cachedState[e];this.setCachedStateValue(e,t),W0(t,r)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;e.forEach(t=>{switch(t){case"rowSelection":this.setCachedStateValue(t,this.getRowSelectionState());break}}),e.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){var e;this.suppressEvents=!0,(e=this.beans.colAnimation)==null||e.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{var t;this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&((t=this.beans.colAnimation)==null||t.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},U0e={moduleName:"GridState",version:jt,beans:[H0e],apiFunctions:{getState:B0e,setState:z0e}};function W0e(e){return e.rowModel.isLastRowIndexKnown()}function j0e(e){var t;return((t=e.pagination)==null?void 0:t.getPageSize())??100}function $0e(e){var t;return((t=e.pagination)==null?void 0:t.getCurrentPage())??0}function q0e(e){var t;return((t=e.pagination)==null?void 0:t.getTotalPages())??1}function K0e(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function Z0e(e){var t;(t=e.pagination)==null||t.goToNextPage()}function X0e(e){var t;(t=e.pagination)==null||t.goToPreviousPage()}function Y0e(e){var t;(t=e.pagination)==null||t.goToFirstPage()}function Q0e(e){var t;(t=e.pagination)==null||t.goToLastPage()}function J0e(e,t){var r;(r=e.pagination)==null||r.goToPage(t)}var eve=class extends ft{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,r=()=>{const i=Math.max(Gh(t),1),n=Math.floor(e/i);t.pagination.setPageSize(n,"autoCalculated")};this.isBodyRendered?os(this,r,50)():(r(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Rm="paginationPageSizeSelector",tve={tag:"span",cls:"ag-paging-page-size"},rve=class extends Qi{constructor(){super(tve),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(Rm,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){bo(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Rm)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),r=!t||!e.includes(t);if(r){const n=this.gos.exists("paginationPageSize"),s=this.gos.get(Rm)!==!0;St(94,{pageSizeSet:n,pageSizesSet:s,pageSizeOptions:e,paginationPageSizeOption:t}),s||St(95,{paginationPageSizeOption:t,paginationPageSizeSelector:Rm}),e.unshift("")}const i=String(r?"":t);this.selectPageSizeComp?(qu(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=r}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const r=this.getLocaleTextFunc(),i=r("pageSizeSelectorLabel","Page Size:"),n=r("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new JT).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(Rm);return!Array.isArray(t)||!(t!=null&&t.length)?e:[...t].sort((r,i)=>r-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},ive={selector:"AG-PAGE-SIZE-SELECTOR",component:rve},nve=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",sve=class extends tle{constructor(){super(),this.btFirst=fr,this.btPrevious=fr,this.btNext=fr,this.btLast=fr,this.lbRecordCount=fr,this.lbFirstRowOnPage=fr,this.lbLastRowOnPage=fr,this.lbCurrent=fr,this.lbTotal=fr,this.pageSizeComp=fr,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(nve)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[ive]);const{btFirst:t,btPrevious:r,btNext:i,btLast:n}=this;this.activateTabIndex([t,r,i,n]),t.insertAdjacentElement("afterbegin",pa(e?"last":"first",this.beans)),r.insertAdjacentElement("afterbegin",pa(e?"next":"previous",this.beans)),i.insertAdjacentElement("afterbegin",pa(e?"previous":"next",this.beans)),n.insertAdjacentElement("afterbegin",pa(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:s=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(s):yae(this.beans,s),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:r}=e;this.addManagedListeners(t,{click:r,keydown:i=>{(i.key===st.ENTER||i.key===st.SPACE)&&(i.preventDefault(),r())}})}),vae(this.beans,this,this.getGui()),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):Wfe(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),r=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const i=this.isZeroPagesToDisplay(),n=e===r-1;this.nextButtonDisabled=n||i,this.lastButtonDisabled=!t||i||e===r-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){qre(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),r=this.pagination.getMasterRowCount(),i=e?r:null,n=this.pagination.getCurrentPage(),s=this.pagination.getPageSize();let a,o;this.isZeroPagesToDisplay()?a=o=0:(a=s*n+1,o=a+s-1,e&&o>i&&(o=i));const u=a+s-1,d=!e&&r<u,p=this.formatNumber(a);this.lbFirstRowOnPage.textContent=p;let v;const y=this.getLocaleTextFunc();d?v=y("pageLastRowUnknown","?"):v=this.formatNumber(o),this.lbLastRowOnPage.textContent=v;const P=t>0?n+1:0,R=this.formatNumber(P);this.lbCurrent.textContent=R;let M,F;if(e)M=this.formatNumber(t),F=this.formatNumber(i);else{const k=y("more","more");M=k,F=k}this.lbTotal.textContent=M,this.lbRecordCount.textContent=F,this.announceAriaStatus(p,v,F,R,M)}announceAriaStatus(e,t,r,i,n){var v,y;const s=this.getLocaleTextFunc(),a=s("page","Page"),o=s("to","to"),u=s("of","of"),d=`${e} ${o} ${t} ${u} ${r}`,p=`${a} ${i} ${u} ${n}`;d!==this.ariaRowStatus&&(this.ariaRowStatus=d,(v=this.ariaAnnounce)==null||v.announceValue(d,"paginationRow")),p!==this.ariaPageStatus&&(this.ariaPageStatus=p,(y=this.ariaAnnounce)==null||y.announceValue(p,"paginationPage"))}},ove={selector:"AG-PAGINATION",component:sve},ave=class extends ft{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return ove}isPaginateChildRows(){const e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;const{editSvc:r}=this.beans;r!=null&&r.isEditing()&&(r.isBatchEditing()?r.cleanupEditors():r.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){var r,i;if(!this.active)return;let t=e;this.paginateChildRows||(t=((i=(r=this.beans.rowModel).getTopLevelIndexFromDisplayedIndex)==null?void 0:i.call(r,e))??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Wt(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Wt(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Wt(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Wt(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const r=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}r!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}const r=this.pageSize,i=t-1;this.totalPages=Math.floor(i/r)+1,this.adjustCurrentPageIfInvalid();const n=this.currentPage,s=r*n;let a=r*(n+1)-1;if(a>i&&(a=i),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(s),a===i)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const o=e.getTopLevelRowDisplayedIndex(a+1);this.bottomDisplayedRowIndex=o-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}const{pageSize:t,currentPage:r}=this,i=e-1;this.totalPages=Math.floor(i/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*r,this.bottomDisplayedRowIndex=t*(r+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:r=!1,newPageSize:i=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:r,newPageSize:i,keepRenderedRows:t})}},lve={moduleName:"Pagination",version:jt,beans:[ave,eve],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:W0e,paginationGetPageSize:j0e,paginationGetCurrentPage:$0e,paginationGetTotalPages:q0e,paginationGetRowCount:K0e,paginationGoToNextPage:Z0e,paginationGoToPreviousPage:X0e,paginationGoToFirstPage:Y0e,paginationGoToLastPage:Q0e,paginationGoToPage:J0e},dependsOn:[q1]};function cve(e,t={}){const r=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(r))}function $8(e,t,r,i,n){t&&(i&&t.parent&&t.parent.level!==-1&&$8(e,t.parent,r,i,n),t.setExpanded(r,void 0,n))}function uve(e,t){return e.rowModel.getRowNode(t)}function hve(e,t,r,i){e.rowRenderer.addRenderedRowListener(t,r,i)}function dve(e){return e.rowRenderer.getRenderedNodes()}function fve(e,t,r){e.rowModel.forEachNode(t,r)}function pve(e){return e.rowRenderer.firstRenderedRow}function gve(e){return e.rowRenderer.lastRenderedRow}function mve(e,t){return e.rowModel.getRow(t)}function vve(e){return e.rowModel.getRowCount()}var yve={moduleName:"RowApi",version:jt,apiFunctions:{redrawRows:cve,setRowNodeExpanded:$8,getRowNode:uve,addRenderedRowListener:hve,getRenderedNodes:dve,forEachNode:fve,getFirstDisplayedRowIndex:pve,getLastDisplayedRowIndex:gve,getDisplayedRowAtIndex:mve,getDisplayedRowCount:vve}},wve={moduleName:"ScrollApi",version:jt,apiFunctions:{getVerticalPixelRange:Oge,getHorizontalPixelRange:Nge,ensureColumnVisible:k8,ensureIndexVisible:L8,ensureNodeVisible:Bge}};function xve(e,t,r){if(!t)return;const i=e.ctrlsSvc.getGridBodyCtrl().eGridBody,n=`aria-${t}`;r===null?i.removeAttribute(n):i.setAttribute(n,r)}function Cve(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function _ve(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function bve(e){var t;return((t=e.animationFrameSvc)==null?void 0:t.isQueueEmpty())??!0}function Sve(e){var t;(t=e.animationFrameSvc)==null||t.flushAllFrames()}function Eve(e){return{rowHeight:Gh(e),headerHeight:Fv(e)}}function Rve(e,t={}){var s;const r=[];if(e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(a=>{const o=a.getCellRenderer();o!=null&&r.push(Y0(o))}),(s=t.columns)!=null&&s.length)return r;const i=[],n=D2(t.rowNodes);return e.rowRenderer.getAllRowCtrls().forEach(a=>{if(n&&!k2(a.rowNode,n)||!a.isFullWidth())return;const o=a.getFullWidthCellRenderers();for(let u=0;u<o.length;u++){const d=o[u];d!=null&&i.push(Y0(d))}}),[...i,...r]}var Tve={moduleName:"RenderApi",version:jt,apiFunctions:{setGridAriaProperty:xve,refreshCells:Cve,refreshHeader:_ve,isAnimationFrameQueueEmpty:bve,flushAllAnimationFrames:Sve,getSizesForCurrentTheme:Eve,getCellRendererInstances:Rve}};function Pve(e,t){var r,i;typeof t=="number"?(r=e.colAutosize)==null||r.sizeColumnsToFit(t,"api"):(i=e.colAutosize)==null||i.sizeColumnsToFitGridBody(t)}function q8({colAutosize:e,visibleCols:t},r,i){Array.isArray(r)?e==null||e.autoSizeCols({colKeys:r,skipHeader:i,source:"api"}):e==null||e.autoSizeCols({colKeys:r.colIds??t.allCols,skipHeader:r.skipHeader,defaultMaxWidth:r.defaultMaxWidth,defaultMinWidth:r.defaultMinWidth,columnLimits:r.columnLimits,source:"api"})}function Mve(e,t){var r;t&&typeof t=="object"?q8(e,t):(r=e.colAutosize)==null||r.autoSizeAllColumns({source:"api",skipHeader:t})}var Fve=class extends ft{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){var t;const e=this.gos.get("autoSizeStrategy");if(e){let r=!1;const i=e.type;i==="fitGridWidth"||i==="fitProvidedWidth"?r=!0:i==="fitCellContents"&&this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(e)}),r&&((t=this.beans.colDelayRenderSvc)==null||t.hideColumns(i))}}autoSizeCols(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:r,skipHeaderGroups:i,stopAtGroup:n,defaultMaxWidth:s,defaultMinWidth:a,columnLimits:o=[],source:u="api"}=e,{animationFrameSvc:d,renderStatus:p,colModel:v,autoWidthCalc:y,visibleCols:_}=this.beans;if(d==null||d.flushAllFrames(),this.timesDelayed<5&&p&&(!p.areHeaderCellsRendered()||!p.areCellsRendered())){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.autoSizeCols(e)});return}this.timesDelayed=0;const P=[];let R=-1;const M=Object.fromEntries(o.map(({colId:N,maxWidth:G,minWidth:j})=>[N,{maxWidth:G,minWidth:j}])),F=r??this.gos.get("skipHeaderOnAutoSize"),k=i??F;for(;R!==0;){R=0;const N=[];t.forEach(G=>{if(!G||Zie(G))return;const j=v.getCol(G);if(!j||P.indexOf(j)>=0)return;const ee=y.getPreferredWidthForColumn(j,F);if(ee>0){const q=M[j.colId]??{};q.minWidth??(q.minWidth=a),q.maxWidth??(q.maxWidth=s);const oe=Ave(j,ee,q);j.setActualWidth(oe,u),P.push(j),R++}N.push(j)}),N.length&&_.refresh(u)}k||this.autoSizeColumnGroupsByColumns(t,u,n),Bp(this.eventSvc,P,!0,"autosizeColumns")}autoSizeColumn(e,t,r){e&&this.autoSizeCols({colKeys:[e],skipHeader:r,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,r){const{colModel:i,ctrlsSvc:n}=this.beans,s=new Set;i.getColsForKeys(e).forEach(d=>{let p=d.getParent();for(;p&&p!=r;)p.isPadding()||s.add(p),p=p.getParent()});let o;const u=[];for(const d of s){for(const p of n.getHeaderRowContainerCtrls())if(o=p.getHeaderCtrlForColumn(d),o)break;o&&o.resizeLeafColumnsToFit(t)}return u}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}const t=this.beans.visibleCols.allCols;this.autoSizeCols({colKeys:t,...e})}addColumnAutosize(e,t){const r=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.autoSizeColumn(t,"uiColumnResized",r)};e.addEventListener("dblclick",i);const n=new bh(e);return n.addEventListener("doubleTap",i),()=>{e.removeEventListener("dblclick",i),n.removeEventListener("doubleTap",i),n.destroy()}}addColumnGroupResize(e,t,r){const i=this.gos.get("skipHeaderOnAutoSize"),n=()=>{const s=[];t.getDisplayedLeafColumns().forEach(o=>{o.getColDef().suppressAutoSize||s.push(o.getColId())}),s.length>0&&this.autoSizeCols({colKeys:s,skipHeader:i,stopAtGroup:t,source:"uiColumnResized"}),r()};return e.addEventListener("dblclick",n),()=>e.removeEventListener("dblclick",n)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const{ctrlsSvc:r,scrollVisibleSvc:i}=this.beans,n=r.getGridBodyCtrl(),a=n.isVerticalScrollShowing()?i.getScrollbarWidth():0,u=K0(n.eGridBody)-a;if(u>0){this.sizeColumnsToFit(u,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):St(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",r,i){var _;if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,r,i));return}const n={};i&&((_=i==null?void 0:i.columnLimits)==null||_.forEach(({key:P,...R})=>{n[typeof P=="string"?P:P.getColId()]=R}));const s=this.beans.visibleCols.allCols;if(e<=0||!s.length||e===ic(s)&&s.every(R=>{if(R.colDef.suppressSizeToFit)return!0;const M=n==null?void 0:n[R.getId()],F=(M==null?void 0:M.minWidth)??(i==null?void 0:i.defaultMinWidth),k=(M==null?void 0:M.maxWidth)??(i==null?void 0:i.defaultMaxWidth),N=R.getActualWidth();return(F==null||N>=F)&&(k==null||N<=k)}))return;const o=[],u=[];s.forEach(P=>{P.getColDef().suppressSizeToFit===!0?u.push(P):o.push(P)});const d=o.slice(0);let p=!1;const v=P=>{xa(o,P),u.push(P)};for(o.forEach(P=>{P.resetActualWidth(t);const R=n==null?void 0:n[P.getId()],M=(R==null?void 0:R.minWidth)??(i==null?void 0:i.defaultMinWidth),F=(R==null?void 0:R.maxWidth)??(i==null?void 0:i.defaultMaxWidth),k=P.getActualWidth();typeof M=="number"&&k<M?P.setActualWidth(M,t,!0):typeof F=="number"&&k>F&&P.setActualWidth(F,t,!0)});!p;){p=!0;const P=e-ic(u);if(P<=0)o.forEach(R=>{var F;const M=((F=n==null?void 0:n[R.getId()])==null?void 0:F.minWidth)??(i==null?void 0:i.defaultMinWidth);if(typeof M=="number"){R.setActualWidth(M,t,!0);return}R.setActualWidth(R.minWidth,t)});else{const R=P/ic(o);let M=P;for(let F=o.length-1;F>=0;F--){const k=o[F],N=n==null?void 0:n[k.getId()],G=(N==null?void 0:N.minWidth)??(i==null?void 0:i.defaultMinWidth),j=(N==null?void 0:N.maxWidth)??(i==null?void 0:i.defaultMaxWidth),ee=k.getMinWidth(),q=k.getMaxWidth(),oe=typeof G=="number"&&G>ee?G:ee,ue=typeof j=="number"&&j<q?j:q;let me=Math.round(k.getActualWidth()*R);me<oe?(me=oe,v(k),p=!1):me>ue?(me=ue,v(k),p=!1):F===0&&(me=M),k.setActualWidth(me,t,!0),M-=me}}}d.forEach(P=>{P.fireColumnWidthChangedEvent(t)});const y=this.beans.visibleCols;y.setLeftValues(t),y.updateBodyWidths(),!r&&Bp(this.eventSvc,d,!0,t)}applyAutosizeStrategy(){const{gos:e,colDelayRenderSvc:t}=this.beans,r=e.get("autoSizeStrategy");!r||r.type==="fitCellContents"||setTimeout(()=>{if(!this.isAlive())return;const i=r.type;if(i==="fitGridWidth"){const{columnLimits:n,defaultMinWidth:s,defaultMaxWidth:a}=r,o=n==null?void 0:n.map(({colId:u,minWidth:d,maxWidth:p})=>({key:u,minWidth:d,maxWidth:p}));this.sizeColumnsToFitGridBody({defaultMinWidth:s,defaultMaxWidth:a,columnLimits:o})}else i==="fitProvidedWidth"&&this.sizeColumnsToFit(r.width,"sizeColumnsToFit");t==null||t.revealColumns(i)})}onFirstDataRendered(e){const{colIds:t,skipHeader:r,defaultMaxWidth:i,defaultMinWidth:n,columnLimits:s}=e;setTimeout(()=>{if(!this.isAlive())return;const a={skipHeader:r,source:"autosizeColumns",defaultMaxWidth:i,defaultMinWidth:n,columnLimits:s};t?this.autoSizeCols({colKeys:t,...a}):this.autoSizeAllColumns(a)})}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function Ave(e,t,r={}){const i=r.minWidth??e.getMinWidth();t<i&&(t=i);const n=r.maxWidth??e.getMaxWidth();return t>n&&(t=n),t}var Ive={moduleName:"ColumnAutoSize",version:jt,beans:[Fve],apiFunctions:{sizeColumnsToFit:Pve,autoSizeColumns:q8,autoSizeAllColumns:Mve},dependsOn:[q6]},Dve=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function kve(e){var t;return((t=e.pinnedRowModel)==null?void 0:t.getPinnedTopRowCount())??0}function Lve(e){var t;return((t=e.pinnedRowModel)==null?void 0:t.getPinnedBottomRowCount())??0}function Ove(e,t){var r;return(r=e.pinnedRowModel)==null?void 0:r.getPinnedTopRow(t)}function Nve(e,t){var r;return(r=e.pinnedRowModel)==null?void 0:r.getPinnedBottomRow(t)}function Bve(e,t,r){var i;return(i=e.pinnedRowModel)==null?void 0:i.forEachPinnedRow(t,r)}var zve={moduleName:"PinnedRow",version:jt,beans:[$ae],css:[Dve],apiFunctions:{getPinnedTopRowCount:kve,getPinnedBottomRowCount:Lve,getPinnedTopRow:Ove,getPinnedBottomRow:Nve,forEachPinnedRow:Bve},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},Gve=class extends xp{constructor(e,t,r){super(e.col,e.firstNode,r,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,r,i,n,s,a){this.eWrapper=r,super.setComp(e,t,r,i,n,s,a),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){this.rowNode.rowIndex!=null&&sB(this.eGui,this.rowNode.rowIndex)}setAriaRowSpan(){Yre(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(W1(t)){this.focusedCellPosition=void 0;return}const r=this.isCellFocused();r||(this.focusedCellPosition=void 0),e&&r&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},Vve=class extends GC{onRowIndexChanged(){super.onRowIndexChanged(),this.getAllCellCtrls().forEach(e=>e.refreshAriaRowIndex())}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){var i;const t=(i=this.beans.rowSpanSvc)==null?void 0:i.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new Gve(t,this,this.beans)}isCorrectCtrlForSpan(e){var i;const t=(i=this.beans.rowSpanSvc)==null?void 0:i.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},Hve=class extends ft{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,r=`${e}Ctrls`,i=this[r],n=i.size,s=this.getAllRelevantRowControls(e),a=new Map;let o=!1;for(const d of s)d.isAlive()&&(t==null||t.forEachSpannedColumn(d.rowNode,(p,v)=>{if(a.has(v.firstNode))return;const y=i.get(v.firstNode);if(y){a.set(v.firstNode,y),i.delete(v.firstNode);return}o=!0;const _=new Vve(v.firstNode,this.beans,!1,!1,!1);a.set(v.firstNode,_)}));this[r]=a;const u=a.size===n;if(!(!o&&u)){for(const d of i.values())d.destroyFirstPass(!0),d.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,r=t==null?void 0:t.getCellSpanByPosition(e);if(!r)return;const i=`${K8(e.rowPinned)}Ctrls`,n=this[i].get(r.firstNode);if(n)return n.getAllCellCtrls().find(s=>s.column===e.column)}getCtrls(e){const t=`${e}Ctrls`;return[...this[t].values()]}destroyRowCtrls(e){const t=`${e}Ctrls`;for(const r of this[t].values())r.destroyFirstPass(!0),r.destroySecondPass();this[t]=new Map}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},K8=e=>e??"center",Uve=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){var r;const e=(r=this.firstNode.__autoHeights)==null?void 0:r[this.col.getColId()];if(e==null)return;let t=0;return this.spannedNodes.forEach(i=>{i!==this.lastNode&&(t+=i.rowHeight)}),e-t}},Wve=class extends ft{constructor(e){super(),this.column=e}buildCache(e){var N;const{column:t,beans:{gos:r,pinnedRowModel:i,rowModel:n,valueSvc:s,pagination:a}}=this,{colDef:o}=t,u=this[`${e}ValueNodeMap`],d=new Map,p=r.getCallback("isFullWidthRow"),v=o.equals,y=o.spanRows,_=typeof y=="function";let P=null,R=null,M;const F=(G,j)=>{P=G,R=null,M=j},k=G=>{const j=!G.isExpandable()&&!G.group&&!G.detail&&(p?!p({rowNode:G}):!0);if(G.rowIndex==null||!j){F(null,null);return}if(P==null||G.level!==P.level||G.footer||R&&G.rowIndex-1!==(R==null?void 0:R.getLastNode().rowIndex)){F(G,s.getValue(t,G));return}const ee=s.getValue(t,G);if(_){const q=Cr(r,{valueA:M,nodeA:P,valueB:ee,nodeB:G,column:t,colDef:o});if(!y(q)){F(G,ee);return}}else if(v?!v(M,ee):M!==ee){F(G,ee);return}if(!R){const q=u==null?void 0:u.get(P);(q==null?void 0:q.firstNode)===P?(q.reset(),R=q):R=new Uve(t,P),d.set(P,R)}R.addSpannedNode(G),d.set(G,R)};switch(e){case"center":(N=n.forEachDisplayedNode)==null||N.call(n,G=>{(!a||a.isRowInPage(G.rowIndex))&&k(G)});break;case"top":i==null||i.forEachPinnedRow("top",k);break;case"bottom":i==null||i.forEachPinnedRow("bottom",k);break}this[`${e}ValueNodeMap`]=d}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this[`${K8(e.rowPinned)}ValueNodeMap`].get(e)}},jve=class extends ft{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=os(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=os(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;const r=this.createManagedBean(new Wve(e));this.spanningColumns.set(e,r),r.buildCache("top"),r.buildCache("bottom"),r.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t==null||t.createCtrls("top"),t==null||t.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t==null||t.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const r=this.spanningColumns.get(e);return r?r.isCellSpanning(t):!1}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:r}=this.beans,i=e.column,n=e.rowIndex,s=this.spanningColumns.get(i);if(!s)return;let a;switch(e.rowPinned){case"top":a=t==null?void 0:t.getPinnedTopRow(n);break;case"bottom":a=t==null?void 0:t.getPinnedBottomRow(n);break;default:a=r.getRow(n)}if(a)return s.getCellSpan(a)}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const r=this.spanningColumns.get(e);if(r)return r.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[r,i]of this.spanningColumns)if(i.isCellSpanning(e)){const n=i.getCellSpan(e);t(r,n)}}destroy(){super.destroy(),this.spanningColumns.clear()}},$ve={moduleName:"CellSpan",version:jt,beans:[jve,Hve]},qve=class extends ft{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,r=e.colDef,i=r.cellClassRules,n=this.getCellClassParams(e,r);vP(this.beans.expressionSvc,i===this.cellClassRules?void 0:this.cellClassRules,i,n,s=>t.toggleCss(s,!0),s=>t.toggleCss(s,!1)),this.cellClassRules=i}applyUserStyles(){const e=this.column,t=e.colDef,r=t.cellStyle;if(!r)return;let i;if(typeof r=="function"){const n=this.getCellClassParams(e,t);i=r(n)}else i=r;i&&this.cellComp.setUserStyles(i)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,r=e.colDef,i=this.getCellClassParams(e,r);this.staticClasses.forEach(s=>t.toggleCss(s,!1));const n=this.beans.cellStyles.getStaticCellClasses(r,i);this.staticClasses=n,n.forEach(s=>t.toggleCss(s,!0))}getCellClassParams(e,t){const{value:r,rowNode:i}=this.cellCtrl;return Cr(this.beans.gos,{value:r,data:i.data,node:i,colDef:t,column:e,rowIndex:i.rowIndex})}},Kve=class extends ft{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,r,i){vP(this.beans.expressionSvc,void 0,e.cellClassRules,t,r,i),this.processStaticCellClasses(e,t,r)}getStaticCellClasses(e,t){const{cellClass:r}=e;if(!r)return[];let i;return typeof r=="function"?i=r(t):i=r,typeof i=="string"&&(i=[i]),i||[]}createCellCustomStyleFeature(e,t){return new qve(e,t)}processStaticCellClasses(e,t,r){this.getStaticCellClasses(e,t).forEach(n=>{r(n)})}},Zve={moduleName:"CellStyle",version:jt,beans:[Kve]},Xve={moduleName:"RowStyle",version:jt,beans:[Vde]};function Yve(e,t){var r;return!!((r=e.colHover)!=null&&r.isHovered(t))}var Qve=class extends ft{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=r=>{const{beans:i,gos:n,element:s,columns:a}=this,o=i.colHover;r??!!n.get("columnHoverHighlight")?this.destroyManagedListeners=this.addManagedElementListeners(s,{mouseover:o.setMouseOver.bind(o,a),mouseout:o.clearMouseOver.bind(o)}):(this.destroyManagedListeners.forEach(d=>d()),this.destroyManagedListeners=[])}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},Jve="ag-column-hover",eye=class extends ft{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,r){const i=()=>{const n=this.isHovered(r);t.toggleCss("ag-column-hover",n)};e.addManagedEventListeners({columnHoverChanged:i}),i()}onCellColumnHover(e,t){if(!t)return;const r=this.isHovered(e);t.toggleCss(Jve,r)}addHeaderFilterColumnHoverListener(e,t,r,i){this.createHoverFeature(e,[r],i);const n=()=>{const s=this.isHovered(r);t.toggleCss("ag-column-hover",s)};e.addManagedEventListeners({columnHoverChanged:n}),n()}createHoverFeature(e,t,r){e.createManagedBean(new Qve(t,r))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},tye={moduleName:"ColumnHover",version:jt,beans:[eye],apiFunctions:{isColumnHovered:Yve}},rye=class extends ft{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){var e,t;this.wrapSvc=(t=(e=this.beans.frameworkOverrides).createGlobalEventListenerWrapper)==null?void 0:t.call(e)}addListener(e,t){var s;const r=((s=this.wrapSvc)==null?void 0:s.wrap(e,t))??t,i=!yx.has(e),n=i?this.asyncListeners:this.syncListeners;n.has(e)||n.set(e,new Set),n.get(e).add(r),this.eventSvc.addListener(e,r,i)}removeListener(e,t){var s,a;const r=((s=this.wrapSvc)==null?void 0:s.unwrap(e,t))??t,i=this.asyncListeners.get(e),n=!!(i!=null&&i.delete(r));n||(a=this.syncListeners.get(e))==null||a.delete(r),this.eventSvc.removeListener(e,r,n)}addGlobalListener(e){var s;const t=((s=this.wrapSvc)==null?void 0:s.wrapGlobal(e))??e,r=(a,o)=>{yx.has(a)&&t(a,o)},i=(a,o)=>{yx.has(a)||t(a,o)};this.globalListenerPairs.set(e,{syncListener:r,asyncListener:i});const n=this.eventSvc;n.addGlobalListener(r,!1),n.addGlobalListener(i,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:r,globalListenerPairs:i}=this,n=(r==null?void 0:r.unwrapGlobal(e))??e;if(i.has(n)){const{syncListener:a,asyncListener:o}=i.get(n);t.removeGlobalListener(a,!1),t.removeGlobalListener(o,!0),i.delete(e)}else this.syncGlobalListeners.delete(n),t.removeGlobalListener(n,!1)}destroyEventListeners(e,t){e.forEach((r,i)=>{r.forEach(n=>this.eventSvc.removeListener(i,n,t)),r.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(r=>this.eventSvc.removeGlobalListener(r,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:r,asyncListener:i})=>{t.removeGlobalListener(r,!1),t.removeGlobalListener(i,!0)}),e.clear()}};function iye(e,t,r){var i;(i=e.apiEventSvc)==null||i.addListener(t,r)}function nye(e,t,r){var i;(i=e.apiEventSvc)==null||i.removeListener(t,r)}function sye(e,t){var r;(r=e.apiEventSvc)==null||r.addGlobalListener(t)}function oye(e,t){var r;(r=e.apiEventSvc)==null||r.removeGlobalListener(t)}var aye={moduleName:"EventApi",version:jt,apiFunctions:{addEventListener:iye,addGlobalListener:sye,removeEventListener:nye,removeGlobalListener:oye},beans:[rye]},lye={moduleName:"Locale",version:jt,beans:[Gfe]},cye=class extends ft{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=os(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){var o,u,d,p;const{visibleCols:e,rowModel:t,rowSpanSvc:r,pinnedRowModel:i}=this.beans,n=e.autoHeightCols;let s=!1;const a=v=>{var P;const y=v.__autoHeights;let _=Nu(this.beans,v).height;for(const R of n){let M=y==null?void 0:y[R.getColId()];const F=r==null?void 0:r.getCellSpan(R,v);if(F){if(F.getLastNode()!==v)continue;if(M=(P=r==null?void 0:r.getCellSpan(R,v))==null?void 0:P.getLastNodeAutoHeight(),!M)return}if(M==null){if(this.colSpanSkipCell(R,v))continue;return}_=Math.max(M,_)}_!==v.rowHeight&&(v.setRowHeight(_),s=!0)};(o=i==null?void 0:i.forEachPinnedRow)==null||o.call(i,"top",a),(u=i==null?void 0:i.forEachPinnedRow)==null||u.call(i,"bottom",a),(d=t.forEachDisplayedNode)==null||d.call(t,a),s&&((p=t.onRowHeightChanged)==null||p.call(t))}setRowAutoHeight(e,t,r){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[r.getId()];return}const i=e.__autoHeights[r.getId()];e.__autoHeights[r.getId()]=t,i!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:r,colViewport:i,visibleCols:n}=this.beans;if(!r.colSpanActive)return!1;let s=[];switch(e.getPinned()){case"left":s=n.getLeftColsForRow(t);break;case"right":s=n.getRightColsForRow(t);break;case null:s=i.getColsWithinViewport(t);break}return!s.includes(e)}setupCellAutoHeight(e,t,r){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const i=t.parentElement,{rowNode:n,column:s}=e,a=this.beans,o=p=>{var k;if((k=this.beans.editSvc)!=null&&k.isEditing(e)||!e.isAlive()||!r.isAlive())return;const{paddingTop:v,paddingBottom:y,borderBottomWidth:_,borderTopWidth:P}=Cd(i),R=v+y+_+P,F=t.offsetHeight+R;if(p<5){const N=ss(a),G=!N||!N.contains(t),j=F==0;if(G||j){window.setTimeout(()=>o(p+1),0);return}}this.setRowAutoHeight(n,F,s)},u=()=>o(0);u();const d=Mc(a,t,u);return r.addDestroyFunc(()=>{d(),this.setRowAutoHeight(n,void 0,s)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:r}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(r).filter(n=>n.isAutoHeight())),t.length!==0){if(!r.__autoHeights)return!1;for(const i of t){const n=r.__autoHeights[i.getColId()];if(!n||r.rowHeight<n)return!1}}return!0}},uye={moduleName:"RowAutoHeight",version:jt,beans:[cye]},hye={moduleName:"AllCommunity",version:jt,dependsOn:[c0e,v0e,T0e,spe,gme,mme,vme,yme,wme,xme,Cme,pme,age,lge,cge,oge,hge,dge,U0e,$me,lve,K6,yve,wve,Tve,Ive,Wle,zve,Ome,bfe,Zve,tye,Xve,aye,Rfe,N0e,D8,lye,uye,Ule,u0e,$ve]},Ds=Rt.createContext({}),Z8=Rt.createContext("default"),Iv=(e,t,r,i)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const s=e.newAgStackInstance();let a,o,u=!1;return s.then(d=>{if(u){t.destroyBean(d);return}a=d,o=a.getGui(),r.appendChild(o),Dk(i,a)}),()=>{var d;u=!0,a&&((d=o==null?void 0:o.parentElement)==null||d.removeChild(o),t.destroyBean(a),i&&Dk(i,void 0))}},Dk=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const r=e;r.current=t}},ca=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),ga=class X8{constructor(...t){this.classesMap={},t.forEach(r=>{this.classesMap[r]=!0})}setClass(t,r){if(!!this.classesMap[t]==r)return this;const n=new X8;return n.classesMap={...this.classesMap},n.classesMap[t]=r,n}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},ng=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,r=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},wL,z2=(wL=Rt.version)==null?void 0:wL.split(".")[0],Y8=z2==="16"||z2==="17";function dye(){return z2==="19"}var xx=!1;function fye(e){return xx||setTimeout(()=>xx=!1,0),xx=!0,e()}var iv=(e,t)=>{!Y8&&e&&!xx?D3.flushSync(t):t()},pye=e=>{Y8?e():Rt.startTransition(e)};function gye(e,t,r){return Rt.useSyncExternalStore?Rt.useSyncExternalStore(e,t):r}function UC(e,t,r){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(r||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const i=[],n=[],s=new Map,a=new Map;for(let o=0;o<t.length;o++){const u=t[o];a.set(u.instanceId,u)}for(let o=0;o<e.length;o++){const u=e[o];s.set(u.instanceId,u),a.has(u.instanceId)&&i.push(u)}for(let o=0;o<t.length;o++){const u=t[o],d=u.instanceId;s.has(d)||n.push(u)}return i.length===e.length&&n.length===0?e:i.length===0&&n.length===t.length?t:i.length===0?n:n.length===0?i:[...i,...n]}var Q8=D.forwardRef((e,t)=>{var pt;const{registry:r,context:i}=D.useContext(Ds),n=D.useRef(null),s=D.useRef(null),a=D.useRef(null),o=D.useRef(null),u=D.useRef(null),d=D.useRef(),[p,v]=D.useState(),[y,_]=D.useState(),[P,R]=D.useState(),[M,F]=D.useState(()=>new ga),[k,N]=D.useState(()=>new ga("ag-hidden")),[G,j]=D.useState(()=>new ga("ag-hidden")),[ee,q]=D.useState(()=>new ga("ag-invisible"));D.useImperativeHandle(t,()=>({refresh(){return!1}})),D.useLayoutEffect(()=>Iv(p,i,s.current),[p]);const oe=D.useCallback(Ge=>{if(n.current=Ge,!Ge||i.isDestroyed()){d.current=i.destroyBean(d.current);return}const Ye={setInnerRenderer:(Be,ce)=>{v(Be),R(ce)},setChildCount:Be=>_(Be),toggleCss:(Be,ce)=>F(he=>he.setClass(Be,ce)),setContractedDisplayed:Be=>j(ce=>ce.setClass("ag-hidden",!Be)),setExpandedDisplayed:Be=>N(ce=>ce.setClass("ag-hidden",!Be)),setCheckboxVisible:Be=>q(ce=>ce.setClass("ag-invisible",!Be)),setCheckboxSpacing:Be=>q(ce=>ce.setClass("ag-group-checkbox-spacing",Be))},ht=r.createDynamicBean("groupCellRendererCtrl",!0);ht&&(d.current=i.createBean(ht),d.current.init(Ye,Ge,a.current,o.current,u.current,Q8,e))},[]),ue=D.useMemo(()=>`ag-cell-wrapper ${M.toString()}`,[M]),me=D.useMemo(()=>`ag-group-expanded ${k.toString()}`,[k]),ie=D.useMemo(()=>`ag-group-contracted ${G.toString()}`,[G]),fe=D.useMemo(()=>`ag-group-checkbox ${ee.toString()}`,[ee]),ke=p==null?void 0:p.componentFromFramework,et=ke?p.componentClass:void 0,Xe=p==null&&P!=null,ct=tg(P);return Rt.createElement("span",{className:ue,ref:oe,...e.colDef?{}:{role:(pt=d.current)==null?void 0:pt.getCellAriaRole()}},Rt.createElement("span",{className:me,ref:o}),Rt.createElement("span",{className:ie,ref:u}),Rt.createElement("span",{className:fe,ref:a}),Rt.createElement("span",{className:"ag-group-value",ref:s},Xe?ct:ke?Rt.createElement(et,{...p.params}):null),Rt.createElement("span",{className:"ag-group-child-count"},y))}),kk=Q8,EP=D.createContext({setMethods:()=>{}}),mye=e=>{const{initialProps:t,addUpdateCallback:r,CustomComponentClass:i,setMethods:n}=e,[{key:s,...a},o]=D.useState(t);return D.useEffect(()=>{r(u=>o(u))},[]),Rt.createElement(EP.Provider,{value:{setMethods:n}},Rt.createElement(i,{key:s,...a}))},vye=D.memo(mye),yye=0;function Lk(){return`agPortalKey_${++yye}`}var J8=class{constructor(e,t,r,i){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=r,this.suppressFallbackMethods=!!i,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Lk(),this.portalKey=Lk(),this.instanceCreated=this.isStatelessComponent()?Hr.resolve(!1):new Hr(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),r=document.createElement(t||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!r){setTimeout(()=>this.callMethod(e,t));return}const i=r[e];if(i)return i.apply(r,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new Hr(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{var r;this.componentInstance=t,(r=this.resolveInstanceCreated)==null||r.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=ju.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return D.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function X1(e,t,r){e.forEach(i=>{const n=t[i];n&&(r[i]=n)})}var Ko=class extends J8{constructor(){super(...arguments),this.awaitUpdateCallback=new Hr(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=vye}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new Hr(i=>{setTimeout(()=>{i()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,X1(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new Hr(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},wye=class extends Ko{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},xye=class extends Ko{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Cye=class extends Ko{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:r,shake:i}=this;return e.label=t,e.icon=r,e.shake=i,e}},_ye=class extends Ko{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new Hr(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var r;const t=this.providedMethods;t?(r=t.afterGuiAttached)==null||r.call(t,e):this.awaitSetMethodsCallback.then(()=>{var i,n;return(n=(i=this.providedMethods)==null?void 0:i.afterGuiAttached)==null?void 0:n.call(i,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t,r;this.expectingNewMethods===!1&&this.hasBeenActive&&((t=this.providedMethods)==null?void 0:t.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),(r=this.resolveFilterPassCallback)==null||r.call(this),this.resolveFilterPassCallback=void 0}updateModel(e){var r;(r=this.resolveFilterPassCallback)==null||r.call(this);const t=new Hr(i=>{this.resolveFilterPassCallback=i});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},bye=class extends Ko{constructor(){super(...arguments),this.awaitSetMethodsCallback=new Hr(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var r;const t=this.providedMethods;t?(r=t.afterGuiAttached)==null||r.call(t,e):this.awaitSetMethodsCallback.then(()=>{var i,n;return(n=(i=this.providedMethods)==null?void 0:i.afterGuiAttached)==null?void 0:n.call(i,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function ez(e,t){e.parentFilterInstance(r=>{(r.setModel(t)||Hr.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Sye=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){X1(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),ez(this.floatingFilterParams,e)}},Eye=class extends Ko{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),ez(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Rye=class extends Ko{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},Tye=class extends Ko{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Pye=class extends Ko{refresh(e){this.sourceParams=e,this.refreshProps()}},Mye=class extends Ko{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Fye=class extends Ko{refresh(e){this.sourceParams=e,this.refreshProps()}},Aye=class extends Ko{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Iye=class extends Ko{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function RP(){St(231)}var Dye=1e3,kye=class{constructor(e,t,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Dye}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,r){this.portals=[...this.portals,e],this.waitForInstance(t,r),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,r=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){iv(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,r)})}}},Lye=({ctrl:e})=>{const t=e.isAlive(),{context:r}=D.useContext(Ds),[i,n]=D.useState(),[s,a]=D.useState(),o=D.useRef(),u=D.useRef(null),d=D.useRef(null),p=D.useRef(null),v=D.useRef(),y=D.useRef();t&&!y.current&&(y.current=new Tv(()=>u.current));const _=D.useCallback(F=>{if(u.current=F,!F||!e.isAlive()||r.isDestroyed()){o.current=r.destroyBean(o.current);return}o.current=r.createBean(new rg);const k=()=>{var j;const G=e.getSelectAllGui();G&&((j=d.current)==null||j.insertAdjacentElement("afterend",G),o.current.addDestroyFunc(()=>G.remove()))},N={setWidth:G=>{u.current&&(u.current.style.width=G)},toggleCss:(G,j)=>y.current.toggleCss(G,j),setUserStyles:G=>a(G),setAriaSort:G=>{u.current&&(G?eie(u.current,G):tie(u.current))},setUserCompDetails:G=>n(G),getUserCompInstance:()=>v.current||void 0,refreshSelectAllGui:k,removeSelectAllGui:()=>{var G;return(G=e.getSelectAllGui())==null?void 0:G.remove()}};e.setComp(N,F,d.current,p.current,o.current),k()},[]);D.useLayoutEffect(()=>Iv(i,r,p.current,v),[i]),D.useEffect(()=>{e.setDragSource(u.current)},[i]);const P=D.useMemo(()=>!!((i==null?void 0:i.componentFromFramework)&&ng(i.componentClass)),[i]),R=i==null?void 0:i.componentFromFramework,M=i==null?void 0:i.componentClass;return Rt.createElement("div",{ref:_,style:s,className:"ag-header-cell",role:"columnheader"},Rt.createElement("div",{ref:d,className:"ag-header-cell-resize",role:"presentation"}),Rt.createElement("div",{ref:p,className:"ag-header-cell-comp-wrapper",role:"presentation"},R?P?Rt.createElement(M,{...i.params}):Rt.createElement(M,{...i.params,ref:v}):null))},Oye=D.memo(Lye),Nye=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){X1(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},Bye=({ctrl:e})=>{const{context:t,gos:r}=D.useContext(Ds),[i,n]=D.useState(),[s,a]=D.useState(()=>new ga("ag-header-cell","ag-floating-filter")),[o,u]=D.useState(()=>new ga),[d,p]=D.useState(()=>new ga("ag-floating-filter-button","ag-hidden")),[v,y]=D.useState("false"),[_,P]=D.useState(),[,R]=D.useState(1),M=D.useRef(),F=D.useRef(null),k=D.useRef(null),N=D.useRef(null),G=D.useRef(null),j=D.useRef(),ee=D.useRef(),q=ht=>{ht!=null&&j.current&&j.current(ht)},oe=D.useCallback(ht=>{if(F.current=ht,!ht||!e.isAlive()||t.isDestroyed()){M.current=t.destroyBean(M.current);return}M.current=t.createBean(new rg),ee.current=new Hr(ce=>{j.current=ce});const Be={toggleCss:(ce,he)=>a(ve=>ve.setClass(ce,he)),setUserStyles:ce=>n(ce),addOrRemoveBodyCssClass:(ce,he)=>u(ve=>ve.setClass(ce,he)),setButtonWrapperDisplayed:ce=>{p(he=>he.setClass("ag-hidden",!ce)),y(ce?"false":"true")},setWidth:ce=>{F.current&&(F.current.style.width=ce)},setCompDetails:ce=>P(ce),getFloatingFilterComp:()=>ee.current?ee.current:null,setMenuIcon:ce=>{var he;return(he=G.current)==null?void 0:he.appendChild(ce)}};e.setComp(Be,ht,G.current,k.current,M.current)},[]);D.useLayoutEffect(()=>Iv(_,t,k.current,q),[_]);const ue=D.useMemo(()=>s.toString(),[s]),me=D.useMemo(()=>o.toString(),[o]),ie=D.useMemo(()=>d.toString(),[d]),fe=D.useMemo(()=>!!(_&&_.componentFromFramework&&ng(_.componentClass)),[_]),ke=D.useMemo(()=>r.get("reactiveCustomComponents"),[]),et=D.useMemo(()=>r.get("enableFilterHandlers"),[]),[Xe,ct]=D.useState();D.useEffect(()=>{if(_!=null&&_.componentFromFramework)if(ke){const ht=et?Nye:Sye,Be=new ht(_.params,()=>R(ce=>ce+1));q(Be),ct(Be)}else RP()},[_]);const pt=Xe==null?void 0:Xe.getProps(),Ge=_==null?void 0:_.componentFromFramework,Ye=_==null?void 0:_.componentClass;return Rt.createElement("div",{ref:oe,style:i,className:ue,role:"gridcell"},Rt.createElement("div",{ref:k,className:me,role:"presentation"},Ge?ke?pt&&Rt.createElement(EP.Provider,{value:{setMethods:ht=>Xe.setMethods(ht)}},Rt.createElement(Ye,{...pt})):Rt.createElement(Ye,{..._.params,ref:fe?()=>{}:q}):null),Rt.createElement("div",{ref:N,"aria-hidden":v,className:ie,role:"presentation"},Rt.createElement("button",{ref:G,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},zye=D.memo(Bye),Gye=({ctrl:e})=>{const{context:t}=D.useContext(Ds),[r,i]=D.useState(),[n,s]=D.useState(()=>new ga),[a,o]=D.useState(()=>new ga),[u,d]=D.useState("false"),[p,v]=D.useState(),[y,_]=D.useState(),P=D.useRef(),R=D.useRef(null),M=D.useRef(null),F=D.useRef(null),k=D.useRef(),N=D.useCallback(ue=>{if(R.current=ue,!ue||!e.isAlive()||t.isDestroyed()){P.current=t.destroyBean(P.current);return}P.current=t.createBean(new rg);const me={setWidth:ie=>{R.current&&(R.current.style.width=ie)},toggleCss:(ie,fe)=>s(ke=>ke.setClass(ie,fe)),setUserStyles:ie=>i(ie),setHeaderWrapperHidden:ie=>{const fe=F.current;fe&&(ie?fe.style.setProperty("display","none"):fe.style.removeProperty("display"))},setHeaderWrapperMaxHeight:ie=>{const fe=F.current;fe&&(ie!=null?fe.style.setProperty("max-height",`${ie}px`):fe.style.removeProperty("max-height"),fe.classList.toggle("ag-header-cell-comp-wrapper-limited-height",ie!=null))},setUserCompDetails:ie=>_(ie),setResizableDisplayed:ie=>{o(fe=>fe.setClass("ag-hidden",!ie)),d(ie?"false":"true")},setAriaExpanded:ie=>v(ie),getUserCompInstance:()=>k.current||void 0};e.setComp(me,ue,M.current,F.current,P.current)},[]);D.useLayoutEffect(()=>Iv(y,t,F.current),[y]),D.useEffect(()=>{R.current&&e.setDragSource(R.current)},[y]);const G=D.useMemo(()=>!!((y==null?void 0:y.componentFromFramework)&&ng(y.componentClass)),[y]),j=D.useMemo(()=>"ag-header-group-cell "+n.toString(),[n]),ee=D.useMemo(()=>"ag-header-cell-resize "+a.toString(),[a]),q=y==null?void 0:y.componentFromFramework,oe=y==null?void 0:y.componentClass;return Rt.createElement("div",{ref:N,style:r,className:j,role:"columnheader","aria-expanded":p},Rt.createElement("div",{ref:F,className:"ag-header-cell-comp-wrapper",role:"presentation"},q?G?Rt.createElement(oe,{...y.params}):Rt.createElement(oe,{...y.params,ref:k}):null),Rt.createElement("div",{ref:M,"aria-hidden":u,className:ee}))},Vye=D.memo(Gye),Hye=({ctrl:e})=>{const{gos:t,context:r}=D.useContext(Ds),{topOffset:i,rowHeight:n}=D.useMemo(()=>e.getTopAndHeight(),[]),s=D.useMemo(()=>t.get("tabIndex"),[]),[a,o]=D.useState(()=>e.getAriaRowIndex()),u=e.headerRowClass,[d,p]=D.useState(()=>n+"px"),[v,y]=D.useState(()=>i+"px"),_=D.useRef(null),[P,R]=D.useState(()=>e.getUpdatedHeaderCtrls()),M=D.useRef(),F=D.useRef(null),k=D.useCallback(j=>{if(F.current=j,!j||!e.isAlive()||r.isDestroyed()){M.current=r.destroyBean(M.current);return}M.current=r.createBean(new rg);const ee={setHeight:q=>p(q),setTop:q=>y(q),setHeaderCtrls:(q,oe,ue)=>{const me=_.current,ie=UC(me,q,oe);ie!==me&&(_.current=ie,iv(ue,()=>R(ie)))},setWidth:q=>{F.current&&(F.current.style.width=q)},setRowIndex:q=>{o(q)}};e.setComp(ee,M.current,!1)},[]),N=D.useMemo(()=>({height:d,top:v}),[d,v]),G=D.useCallback(j=>{switch(e.type){case"group":return Rt.createElement(Vye,{ctrl:j,key:j.instanceId});case"filter":return Rt.createElement(zye,{ctrl:j,key:j.instanceId});default:return Rt.createElement(Oye,{ctrl:j,key:j.instanceId})}},[]);return Rt.createElement("div",{ref:k,className:u,role:"row",style:N,tabIndex:s,"aria-rowindex":a},P.map(G))},Uye=D.memo(Hye),Wye=({pinned:e})=>{const[t,r]=D.useState(!0),[i,n]=D.useState([]),{context:s}=D.useContext(Ds),a=D.useRef(null),o=D.useRef(null),u=D.useRef(),d=e==="left",p=e==="right",v=!d&&!p,y=D.useCallback(R=>{if(a.current=R,!R||s.isDestroyed()){u.current=s.destroyBean(u.current);return}u.current=s.createBean(new Rae(e));const M={setDisplayed:r,setCtrls:F=>n(F),setCenterWidth:F=>{o.current&&(o.current.style.width=F)},setViewportScrollLeft:F=>{a.current&&(a.current.scrollLeft=F)},setPinnedContainerWidth:F=>{a.current&&(a.current.style.width=F,a.current.style.minWidth=F,a.current.style.maxWidth=F)}};u.current.setComp(M,a.current)},[]),_=t?"":"ag-hidden",P=()=>i.map(R=>Rt.createElement(Uye,{ctrl:R,key:R.instanceId}));return d?Rt.createElement("div",{ref:y,className:"ag-pinned-left-header "+_,"aria-hidden":!t,role:"rowgroup"},P()):p?Rt.createElement("div",{ref:y,className:"ag-pinned-right-header "+_,"aria-hidden":!t,role:"rowgroup"},P()):v?Rt.createElement("div",{ref:y,className:"ag-header-viewport "+_,role:"rowgroup",tabIndex:-1},Rt.createElement("div",{ref:o,className:"ag-header-container",role:"presentation"},P())):null},NS=D.memo(Wye),jye=()=>{const[e,t]=D.useState(()=>new ga),[r,i]=D.useState(),{context:n}=D.useContext(Ds),s=D.useRef(null),a=D.useRef(),o=D.useCallback(p=>{if(s.current=p,!p||n.isDestroyed()){a.current=n.destroyBean(a.current);return}a.current=n.createBean(new _ae);const v={toggleCss:(y,_)=>t(P=>P.setClass(y,_)),setHeightAndMinHeight:y=>i(y)};a.current.setComp(v,p,p)},[]),u=D.useMemo(()=>"ag-header "+e.toString(),[e]),d=D.useMemo(()=>({height:r,minHeight:r}),[r]);return Rt.createElement("div",{ref:o,className:u,style:d,role:"presentation"},Rt.createElement(NS,{pinned:"left"}),Rt.createElement(NS,{pinned:null}),Rt.createElement(NS,{pinned:"right"}))},$ye=D.memo(jye),qye=(e,t)=>{D.useEffect(()=>{const r=t.current;if(r){const i=r.parentElement;if(i){const n=document.createComment(e);return i.insertBefore(n,r),()=>{i.removeChild(n)}}}},[e])},Th=qye,Kye=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Hr(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){X1(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,(t=this.resolveInstanceCreated)==null||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},Zye=e=>{const t=D.useRef(e),r=D.useRef(),i=D.useRef(!1),n=D.useRef(!1),[,s]=D.useState(0);i.current&&(n.current=!0),D.useEffect(()=>(i.current||(r.current=t.current(),i.current=!0),s(a=>a+1),()=>{var a;n.current&&((a=r.current)==null||a.call(r))}),[])},Xye=e=>{const[t,r]=D.useState(),i=D.useContext(Ds),{context:n,popupSvc:s,gos:a,editSvc:o}=i,{editDetails:u,cellCtrl:d,eParentCell:p}=e;return Zye(()=>{var R,M;const{compDetails:v}=u,y=a.get("stopEditingWhenCellsLoseFocus");let _,P;if(!n.isDestroyed()){P=n.createBean(o.createPopupEditorWrapper(v.params));const F=P.getGui();if(e.jsChildComp){const q=e.jsChildComp.getGui();q&&F.appendChild(q)}const{column:k,rowNode:N}=d,G={column:k,rowNode:N,type:"popupCellEditor",eventSource:p,ePopup:F,position:u.popupPosition,keepWithinBounds:!0},j=s==null?void 0:s.positionPopupByComponent.bind(s,G),ee=s==null?void 0:s.addPopup({modal:y,eChild:F,closeOnEsc:!0,closedCallback:()=>{d.onPopupEditorClosed()},anchorToElement:p,positionCallback:j,ariaOwns:p});_=ee?ee.hideFunc:void 0,r(P),(M=(R=e.jsChildComp)==null?void 0:R.afterGuiAttached)==null||M.call(R)}return()=>{_==null||_(),n.destroyBean(P)}}),D.useLayoutEffect(()=>()=>{d.isCellFocused()&&(t!=null&&t.getGui().contains(Yi(i)))&&p.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?ju.createPortal(e.wrappedContent,t.getGui()):null},Ok=D.memo(Xye),Yye=(e,t,r)=>{const{compProxy:i}=e;r(i);const n=i.getProps(),s=ng(t);return Rt.createElement(EP.Provider,{value:{setMethods:a=>i.setMethods(a)}},s?Rt.createElement(t,{...n}):Rt.createElement(t,{...n,ref:a=>i.setRef(a)}))},Nk=(e,t,r)=>e.compProxy?Yye(e,t,r):Rt.createElement(t,{...e.compDetails.params,ref:r}),Qye=(e,t,r,i,n)=>{const s=e.compDetails,a=s.componentClass,o=s.componentFromFramework&&!e.popup,u=s.componentFromFramework&&e.popup,d=!s.componentFromFramework&&e.popup;return o?Nk(e,a,t):u?Rt.createElement(Ok,{editDetails:e,cellCtrl:i,eParentCell:r,wrappedContent:Nk(e,a,t)}):d&&n?Rt.createElement(Ok,{editDetails:e,cellCtrl:i,eParentCell:r,jsChildComp:n}):null},Jye=(e,t,r,i,n,s)=>{const{context:a}=D.useContext(Ds),o=D.useCallback(()=>{const u=n.current;if(!u)return;const d=u.getGui();d&&d.parentElement&&d.parentElement.removeChild(d),a.destroyBean(u),n.current=void 0},[]);D.useEffect(()=>{const u=e!=null,d=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,p=t&&r==null;if(!(u&&d&&!p)){o();return}const y=e.compDetails;if(n.current){const P=n.current,M=P.refresh!=null&&e.force==!1?P.refresh(y.params):!1;if(M===!0||M===void 0)return;o()}y.newAgStackInstance().then(P=>{if(!P)return;const R=P.getGui();if(!R)return;(t?r:s.current).appendChild(R),n.current=P})},[e,t,i]),D.useEffect(()=>o,[])},tz=Jye,ewe=({cellCtrl:e,parent:t})=>{var n;const r=D.useRef(),i=D.useMemo(()=>{const{loadingComp:s}=e.getDeferLoadingCellRenderer();return s?{value:void 0,compDetails:s,force:!1}:void 0},[e]);if(tz(i,!1,void 0,1,r,t),(n=i==null?void 0:i.compDetails)!=null&&n.componentFromFramework){const s=i.compDetails.componentClass;return Rt.createElement(s,{...i.compDetails.params})}return Rt.createElement(Rt.Fragment,null)},twe=({cellCtrl:e,printLayout:t,editingCell:r})=>{const i=D.useContext(Ds),{context:n}=i,{column:{colIdSanitised:s},instanceId:a}=e,o=D.useRef(),[u,d]=D.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[p,v]=D.useState(),[y,_]=D.useState(1),[P,R]=D.useState(),[M,F]=D.useState(!1),[k,N]=D.useState(!1),[G,j]=D.useState(!1),[ee,q]=D.useState(),oe=D.useMemo(()=>e.isForceWrapper(),[e]),ue=D.useMemo(()=>e.getCellAriaRole(),[e]),me=D.useRef(null),ie=D.useRef(null),fe=D.useRef(null),ke=D.useRef(),et=D.useRef(),Xe=D.useRef(),ct=D.useRef([]),pt=D.useRef(),Ge=D.useRef(),[Ye,ht]=D.useState(0),Be=D.useCallback(Qt=>{Ge.current=Qt,ht(qt=>qt+1)},[]),ce=u!=null&&(M||G||k)&&(p==null||!!p.popup),he=oe||ce,ve=D.useCallback(Qt=>{if(et.current=Qt,Qt){const qt=Qt.isCancelBeforeStart&&Qt.isCancelBeforeStart();setTimeout(()=>{qt?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(Qt))})}},[e]),_e=D.useRef();_e.current||(_e.current=new Tv(()=>me.current)),tz(u,he,Ge.current,Ye,ke,me);const Fe=D.useRef();D.useLayoutEffect(()=>{var Ke,Jt;const Qt=Fe.current,qt=u;if(Fe.current=u,Qt==null||Qt.compDetails==null||qt==null||qt.compDetails==null)return;(Ke=pt.current)==null||Ke.refreshVisibility();const Et=Qt.compDetails,hr=qt.compDetails;if(Et.componentClass!=hr.componentClass||((Jt=fe.current)==null?void 0:Jt.refresh)==null)return;fe.current.refresh(hr.params)!=!0&&_(Nr=>Nr+1)},[u]),D.useLayoutEffect(()=>{if(!(p&&!p.compDetails.componentFromFramework)||n.isDestroyed())return;const qt=p.compDetails,Et=p.popup===!0,hr=qt.newAgStackInstance();return hr.then(rr=>{if(!rr)return;const Ke=rr.getGui();if(ve(rr),!Et){const Jt=(oe?Xe:me).current;Jt==null||Jt.appendChild(Ke),rr.afterGuiAttached&&rr.afterGuiAttached()}q(rr)}),()=>{hr.then(rr=>{var Jt;const Ke=rr.getGui();e.disableEditorTooltipFeature(),n.destroyBean(rr),ve(void 0),q(void 0),(Jt=Ke==null?void 0:Ke.parentElement)==null||Jt.removeChild(Ke)})}},[p]);const qe=D.useCallback(Qt=>{if(Xe.current=Qt,!Qt||n.isDestroyed()||!e.isAlive()){const hr=ct.current;ct.current=[];for(const rr of hr)rr();return}let qt;const Et=hr=>{hr&&(Qt.insertAdjacentElement("afterbegin",hr.getGui()),ct.current.push(()=>{Ou(hr.getGui()),n.destroyBean(hr),pt.current===qt&&(pt.current=void 0)}))};M&&Et(e.createSelectionCheckbox()),G&&Et(e.createDndSource()),k&&(qt=e.createRowDragComp(),pt.current=qt,qt&&(Et(qt),qt.refreshVisibility()))},[e,n,G,k,M]),at=D.useCallback(()=>{const Qt=!e.isCellSpanning()||ie.current,qt=me.current;if(!qt||!Qt||!e||!e.isAlive()||n.isDestroyed()){o.current=n.destroyBean(o.current);return}o.current=n.createBean(new rg);const Et={toggleCss:(rr,Ke)=>_e.current.toggleCss(rr,Ke),setUserStyles:rr=>R(rr),getFocusableElement:()=>me.current,setIncludeSelection:rr=>F(rr),setIncludeRowDrag:rr=>N(rr),setIncludeDndSource:rr=>j(rr),getCellEditor:()=>et.current||null,getCellRenderer:()=>fe.current??ke.current,getParentOfValue:()=>Ge.current??Xe.current??me.current,setRenderDetails:(rr,Ke,Jt)=>{var vr;const Nr=()=>{d($t=>($t==null?void 0:$t.compDetails)!==rr||($t==null?void 0:$t.value)!==Ke||($t==null?void 0:$t.force)!==Jt?{value:Ke,compDetails:rr,force:Jt}:$t)};if((vr=rr==null?void 0:rr.params)!=null&&vr.deferRender&&!e.rowNode.group){const{loadingComp:$t,onReady:ui}=e.getDeferLoadingCellRenderer();if($t){d({value:void 0,compDetails:$t,force:!1}),ui.then(()=>pye(Nr));return}}Nr()},setEditDetails:(rr,Ke,Jt,Nr)=>{if(rr){let vr;rr.componentFromFramework&&(Nr?vr=new Kye(rr.params,()=>_($t=>$t+1)):RP()),v({compDetails:rr,popup:Ke,popupPosition:Jt,compProxy:vr}),Ke||d(void 0)}else e.hasBrowserFocus()&&Et.getFocusableElement().focus({preventScroll:!0}),v($t=>{$t!=null&&$t.compProxy&&(et.current=void 0)})},refreshEditStyles:(rr,Ke)=>{if(!me.current)return;const{current:Jt}=_e;Jt.toggleCss("ag-cell-value",!he),Jt.toggleCss("ag-cell-inline-editing",!!rr&&!Ke),Jt.toggleCss("ag-cell-popup-editing",!!rr&&!!Ke),Jt.toggleCss("ag-cell-not-inline-editing",!rr||!!Ke)}},hr=Xe.current||void 0;e.setComp(Et,qt,ie.current??void 0,hr,t,r,o.current)},[]),ot=D.useCallback(Qt=>{me.current=Qt,at()},[]),Qe=D.useCallback(Qt=>{ie.current=Qt,at()},[]),Lt=D.useMemo(()=>{var qt;return!!(((qt=u==null?void 0:u.compDetails)==null?void 0:qt.componentFromFramework)&&ng(u.compDetails.componentClass))},[u]);D.useLayoutEffect(()=>{if(!me.current)return;const{current:Qt}=_e;Qt.toggleCss("ag-cell-value",!he),Qt.toggleCss("ag-cell-inline-editing",!!p&&!p.popup),Qt.toggleCss("ag-cell-popup-editing",!!p&&!!p.popup),Qt.toggleCss("ag-cell-not-inline-editing",!p||!!p.popup)});const Ot=()=>{var Et;const{compDetails:Qt,value:qt}=u;if(!Qt)return((Et=qt==null?void 0:qt.toString)==null?void 0:Et.call(qt))??qt;if(Qt.componentFromFramework){const hr=Qt.componentClass;return Rt.createElement(D.Suspense,{fallback:Rt.createElement(ewe,{cellCtrl:e,parent:me})},Lt?Rt.createElement(hr,{...Qt.params,key:y}):Rt.createElement(hr,{...Qt.params,key:y,ref:fe}))}},er=()=>{const Qt=()=>u==null?null:he?Rt.createElement("span",{role:"presentation",id:`cell-${a}`,className:"ag-cell-value",ref:Be},Ot()):Ot(),qt=Et=>Qye(Et,ve,me.current,e,ee);return p!=null?p.popup?Rt.createElement(Rt.Fragment,null,Qt(),qt(p)):qt(p):Qt()},Yt=()=>Rt.createElement("div",{ref:ot,style:P,role:ue,"col-id":s},he?Rt.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:qe},er()):er());return e.isCellSpanning()?Rt.createElement("div",{ref:Qe,className:"ag-spanned-cell-wrapper",role:"presentation"},Yt()):Yt()},rwe=D.memo(twe),iwe=({rowCtrl:e,containerType:t})=>{const{context:r,gos:i,editSvc:n}=D.useContext(Ds),s=D.useContext(Z8)==="default",a=D.useRef(),o=D.useRef(e.getDomOrder()),u=e.isFullWidth(),d=e.rowNode.displayed,[p,v]=D.useState(()=>d?e.rowNode.getRowIndexString():null),[y,_]=D.useState(()=>e.rowId),[P,R]=D.useState(()=>e.businessKey),[M,F]=D.useState(()=>e.rowStyles),k=D.useRef(null),[N,G]=D.useState(()=>null),[j,ee]=D.useState(),[q,oe]=D.useState(()=>d?e.getInitialRowTop(t):void 0),[ue,me]=D.useState(()=>d?e.getInitialTransform(t):void 0),ie=D.useRef(null),fe=D.useRef(),ke=D.useRef(),et=D.useRef(!1),[Xe,ct]=D.useState(0);D.useEffect(()=>{var Lt;if(et.current||!j||Xe>10)return;const Qe=(Lt=ie.current)==null?void 0:Lt.firstChild;Qe?(e.setupDetailRowAutoHeight(Qe),et.current=!0):ct(Ot=>Ot+1)},[j,Xe]);const pt=D.useRef();pt.current||(pt.current=new Tv(()=>ie.current));const Ge=D.useRef(()=>{}),Ye=D.useCallback(Qe=>(Ge.current=Qe,()=>{Ge.current=()=>{}}),[]),ht=gye(Ye,()=>k.current,[]),Be=s?ht:N,ce=D.useCallback(Qe=>{if(ie.current=Qe,a.current=Qe?r.createBean(new rg):r.destroyBean(a.current),!Qe){e.unsetComp(t);return}if(!e.isAlive()||r.isDestroyed())return;const Lt={setTop:oe,setTransform:me,toggleCss:(Ot,er)=>pt.current.toggleCss(Ot,er),setDomOrder:Ot=>o.current=Ot,setRowIndex:v,setRowId:_,setRowBusinessKey:R,setUserStyles:F,setCellCtrls:(Ot,er)=>{const Yt=k.current,Qt=UC(Yt,Ot,o.current);Qt!==Yt&&(k.current=Qt,s?Ge.current():iv(er,()=>G(Qt)))},showFullWidth:Ot=>{ke.current=Ot.params,ee(Ot)},getFullWidthCellRenderer:()=>fe.current,getFullWidthCellRendererParams:()=>ke.current,refreshFullWidth:Ot=>{const er=Ot();return ke.current=er,qe.current?(ee(Yt=>({...Yt,params:er})),!0):!fe.current||!fe.current.refresh?!1:fe.current.refresh(er)}};e.setComp(Lt,Qe,t,a.current)},[]);D.useLayoutEffect(()=>Iv(j,r,ie.current,fe),[j]);const he=D.useMemo(()=>{const Qe={top:q,transform:ue};return Object.assign(Qe,M),Qe},[q,ue,M]),ve=u&&(j==null?void 0:j.componentFromFramework),_e=!u&&Be!=null,Fe=D.useMemo(()=>!!((j==null?void 0:j.componentFromFramework)&&ng(j.componentClass)),[j]),qe=D.useRef(!1);D.useEffect(()=>{qe.current=Fe&&!!j&&!!i.get("reactiveCustomComponents")},[Fe,j]);const at=()=>Be==null?void 0:Be.map(Qe=>Rt.createElement(rwe,{cellCtrl:Qe,editingCell:(n==null?void 0:n.isEditing(Qe,{withOpenEditor:!0}))??!1,printLayout:e.printLayout,key:Qe.instanceId})),ot=()=>{const Qe=j.componentClass;return Fe?Rt.createElement(Qe,{...j.params}):Rt.createElement(Qe,{...j.params,ref:fe})};return Rt.createElement("div",{ref:ce,role:"row",style:he,"row-index":p,"row-id":y,"row-business-key":P},_e?at():ve?ot():null)},Bk=D.memo(iwe),nwe=({name:e})=>{const{context:t,gos:r}=D.useContext(Ds),i=D.useMemo(()=>Mv(e),[e]),n=D.useRef(null),s=D.useRef(null),a=D.useRef(null),o=D.useRef([]),u=D.useRef([]),[d,p]=D.useState(()=>[]),v=!!r.get("enableCellSpan")&&!!i.getSpannedRowCtrls,y=D.useRef([]),_=D.useRef([]),[P,R]=D.useState(()=>[]),M=D.useRef(!1),F=D.useRef(),k=D.useMemo(()=>ca("ag-viewport",E6(e)),[e]),N=D.useMemo(()=>ca(gx(e)),[e]),G=D.useMemo(()=>ca("ag-spanning-container",qoe(e)),[e]),j=i.type==="center"||v,ee=j?n:s;Th(" AG Row Container "+e+" ",ee);const q=D.useCallback(()=>{const Xe=!j||n.current!=null,ct=s.current!=null,pt=!v||a.current!=null;return Xe&&ct&&pt},[]),oe=D.useCallback(()=>n.current==null&&s.current==null&&a.current==null,[]),ue=D.useCallback(()=>{if(oe()&&(F.current=t.destroyBean(F.current)),!t.isDestroyed()&&q()){const Xe=Ge=>{const Ye=UC(u.current,o.current,M.current);Ye!==u.current&&(u.current=Ye,iv(Ge,()=>p(Ye)))},ct=Ge=>{const Ye=UC(_.current,y.current,M.current);Ye!==_.current&&(_.current=Ye,iv(Ge,()=>R(Ye)))},pt={setHorizontalScroll:Ge=>{n.current&&(n.current.scrollLeft=Ge)},setViewportHeight:Ge=>{n.current&&(n.current.style.height=Ge)},setRowCtrls:({rowCtrls:Ge,useFlushSync:Ye})=>{const ht=!!Ye&&o.current.length>0&&Ge.length>0;o.current=Ge,Xe(ht)},setSpannedRowCtrls:(Ge,Ye)=>{const ht=!!Ye&&y.current.length>0&&Ge.length>0;y.current=Ge,ct(ht)},setDomOrder:Ge=>{M.current!=Ge&&(M.current=Ge,Xe(!1))},setContainerWidth:Ge=>{s.current&&(s.current.style.width=Ge)},setOffsetTop:Ge=>{s.current&&(s.current.style.transform=`translateY(${Ge})`)}};F.current=t.createBean(new iae(e)),F.current.setComp(pt,s.current,a.current??void 0,n.current)}},[q,oe]),me=D.useCallback(Xe=>{s.current=Xe,ue()},[ue]),ie=D.useCallback(Xe=>{a.current=Xe,ue()},[ue]),fe=D.useCallback(Xe=>{n.current=Xe,ue()},[ue]),ke=()=>Rt.createElement("div",{className:N,ref:me,role:j?"presentation":"rowgroup"},d.map(Xe=>Rt.createElement(Bk,{rowCtrl:Xe,containerType:i.type,key:Xe.instanceId})));if(!j)return ke();const et=()=>Rt.createElement("div",{className:G,ref:ie,role:"presentation"},P.map(Xe=>Rt.createElement(Bk,{rowCtrl:Xe,containerType:i.type,key:Xe.instanceId})));return Rt.createElement("div",{className:k,ref:fe,role:"rowgroup"},ke(),v?et():null)},swe=D.memo(nwe),owe=()=>{const e=D.useContext(Ds),{context:t,overlays:r}=e,[i,n]=D.useState(""),[s,a]=D.useState(0),[o,u]=D.useState(0),[d,p]=D.useState("0px"),[v,y]=D.useState("0px"),[_,P]=D.useState("100%"),[R,M]=D.useState("0px"),[F,k]=D.useState("0px"),[N,G]=D.useState("100%"),[j,ee]=D.useState(!0),[q,oe]=D.useState(!0),[ue,me]=D.useState(null),[ie,fe]=D.useState(""),[ke,et]=D.useState(null),[Xe,ct]=D.useState("ag-layout-normal"),pt=D.useRef();pt.current||(pt.current=new Tv(()=>Ge.current));const Ge=D.useRef(null),Ye=D.useRef(null),ht=D.useRef(null),Be=D.useRef(null),ce=D.useRef(null),he=D.useRef(null),ve=D.useRef(null),_e=D.useRef([]),Fe=D.useRef([]);Th(" AG Grid Body ",Ge),Th(" AG Pinned Top ",Ye),Th(" AG Sticky Top ",ht),Th(" AG Middle ",he),Th(" AG Pinned Bottom ",ve);const qe=D.useCallback(Jt=>{if(Ge.current=Jt,!Jt||t.isDestroyed()){_e.current=t.destroyBeans(_e.current),Fe.current.forEach(Ir=>Ir()),Fe.current=[];return}const Nr=(Ir,Kr)=>{Ir.appendChild(Kr),Fe.current.push(()=>Ir.removeChild(Kr))},vr=Ir=>{const Kr=t.createBean(new Ir);return _e.current.push(Kr),Kr},$t=(Ir,Kr,kn)=>{Nr(Ir,document.createComment(kn)),Nr(Ir,vr(Kr).getGui())};$t(Jt,uae," AG Fake Horizontal Scroll ");const ui=r==null?void 0:r.getOverlayWrapperCompClass();ui&&$t(Jt,ui," AG Overlay Wrapper "),ce.current&&$t(ce.current,dae," AG Fake Vertical Scroll ");const ds={setRowAnimationCssOnBodyViewport:n,setColumnCount:Ir=>{Ge.current&&Qre(Ge.current,Ir)},setRowCount:Ir=>{Ge.current&&Xre(Ge.current,Ir)},setTopHeight:a,setBottomHeight:u,setStickyTopHeight:p,setStickyTopTop:y,setStickyTopWidth:P,setTopInvisible:ee,setBottomInvisible:oe,setColumnMovingCss:(Ir,Kr)=>pt.current.toggleCss(Ir,Kr),updateLayoutClasses:ct,setAlwaysVerticalScrollClass:me,setPinnedTopBottomOverflowY:fe,setCellSelectableCss:(Ir,Kr)=>et(Kr?Ir:null),setBodyViewportWidth:Ir=>{he.current&&(he.current.style.width=Ir)},registerBodyViewportResizeListener:Ir=>{if(he.current){const Kr=Mc(e,he.current,Ir);Fe.current.push(()=>Kr())}},setStickyBottomHeight:M,setStickyBottomBottom:k,setStickyBottomWidth:G,setGridRootRole:Ir=>Jt.setAttribute("role",Ir)},an=t.createBean(new aae);_e.current.push(an),an.setComp(ds,Jt,he.current,Ye.current,ve.current,ht.current,Be.current)},[]),at=D.useMemo(()=>ca("ag-root","ag-unselectable",Xe),[Xe]),ot=D.useMemo(()=>ca("ag-body-viewport",i,Xe,ue,ke),[i,Xe,ue,ke]),Qe=D.useMemo(()=>ca("ag-body",Xe),[Xe]),Lt=D.useMemo(()=>ca("ag-floating-top",j?"ag-invisible":null,ke),[ke,j]),Ot=D.useMemo(()=>ca("ag-sticky-top",ke),[ke]),er=D.useMemo(()=>ca("ag-sticky-bottom",R==="0px"?"ag-invisible":null,ke),[ke,R]),Yt=D.useMemo(()=>ca("ag-floating-bottom",q?"ag-invisible":null,ke),[ke,q]),Qt=D.useMemo(()=>({height:s,minHeight:s,overflowY:ie}),[s,ie]),qt=D.useMemo(()=>({height:d,top:v,width:_}),[d,v,_]),Et=D.useMemo(()=>({height:R,bottom:F,width:N}),[R,F,N]),hr=D.useMemo(()=>({height:o,minHeight:o,overflowY:ie}),[o,ie]),rr=Jt=>Rt.createElement(swe,{name:Jt,key:`${Jt}-container`}),Ke=({section:Jt,children:Nr,className:vr,style:$t})=>Rt.createElement("div",{ref:Jt,className:vr,role:"presentation",style:$t},Nr.map(rr));return Rt.createElement("div",{ref:qe,className:at},Rt.createElement($ye,null),Ke({section:Ye,className:Lt,style:Qt,children:["topLeft","topCenter","topRight","topFullWidth"]}),Rt.createElement("div",{className:Qe,ref:ce,role:"presentation"},Ke({section:he,className:ot,children:["left","center","right","fullWidth"]})),Ke({section:ht,className:Ot,style:qt,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Ke({section:Be,className:er,style:Et,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Ke({section:ve,className:Yt,style:hr,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},awe=D.memo(owe),lwe=(e,t)=>{const{children:r,eFocusableElement:i,onTabKeyDown:n,gridCtrl:s,forceFocusOutWhenTabGuardsAreEmpty:a,isEmpty:o}=e,{context:u}=D.useContext(Ds),d=D.useRef(null),p=D.useRef(null),v=D.useRef(),y=F=>{const k=F==null?void 0:parseInt(F,10).toString();[d,p].forEach(N=>{var G,j;k===void 0?(G=N.current)==null||G.removeAttribute("tabindex"):(j=N.current)==null||j.setAttribute("tabindex",k)})};D.useImperativeHandle(t,()=>({forceFocusOutOfContainer(F){var k;(k=v.current)==null||k.forceFocusOutOfContainer(F)}}));const _=D.useCallback(()=>{const F=d.current,k=p.current;if(!F&&!k||u.isDestroyed()){v.current=u.destroyBean(v.current);return}if(F&&k){const N={setTabIndex:y};v.current=u.createBean(new N6({comp:N,eTopGuard:F,eBottomGuard:k,eFocusableElement:i,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:G=>s.focusInnerElement(G),isEmpty:o}))}},[]),P=D.useCallback(F=>{d.current=F,_()},[_]),R=D.useCallback(F=>{p.current=F,_()},[_]),M=F=>{const k=F==="top"?vp.TAB_GUARD_TOP:vp.TAB_GUARD_BOTTOM;return Rt.createElement("div",{className:`${vp.TAB_GUARD} ${k}`,role:"presentation",ref:F==="top"?P:R})};return Rt.createElement(Rt.Fragment,null,M("top"),r,M("bottom"))},cwe=D.forwardRef(lwe),uwe=D.memo(cwe),hwe=({context:e})=>{const[t,r]=D.useState(""),[i,n]=D.useState(""),[s,a]=D.useState(null),[o,u]=D.useState(null),[d,p]=D.useState(!1),[v,y]=D.useState(),_=D.useRef(),P=D.useRef(null),R=D.useRef(),[M,F]=D.useState(null),k=D.useRef(()=>{}),N=D.useRef(),G=D.useRef([]),j=D.useCallback(()=>{},[]);Th(" AG Grid ",P);const ee=D.useCallback(fe=>{if(P.current=fe,_.current=fe?e.createBean(new ale):e.destroyBean(_.current),!fe||e.isDestroyed())return;const ke=_.current;k.current=ke.focusInnerElement.bind(ke);const et={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:Xe=>{var ct,pt;if(!Xe&&((ct=N.current)!=null&&ct.isDisplayed())){N.current.forceFocusOutOfContainer(Xe);return}(pt=R.current)==null||pt.forceFocusOutOfContainer(Xe)},updateLayoutClasses:n,getFocusableContainers:()=>{var pt;const Xe=[],ct=(pt=P.current)==null?void 0:pt.querySelector(".ag-root");return ct&&Xe.push({getGui:()=>ct}),G.current.forEach(Ge=>{Ge.isDisplayed()&&Xe.push(Ge)}),Xe},setCursor:a,setUserSelect:u};ke.setComp(et,fe,fe),p(!0)},[]);D.useEffect(()=>{const fe=_.current,ke=P.current;if(!v||!fe||!M||!ke||e.isDestroyed())return;const et=[],{watermarkSelector:Xe,paginationSelector:ct,sideBarSelector:pt,statusBarSelector:Ge,gridHeaderDropZonesSelector:Ye}=fe.getOptionalSelectors(),ht=[];if(Ye){const ce=e.createBean(new Ye.component),he=ce.getGui();ke.insertAdjacentElement("afterbegin",he),ht.push(he),et.push(ce)}if(pt){const ce=e.createBean(new pt.component),he=ce.getGui(),ve=M.querySelector(".ag-tab-guard-bottom");ve&&(ve.insertAdjacentElement("beforebegin",he),ht.push(he)),et.push(ce),G.current.push(ce)}const Be=ce=>{const he=e.createBean(new ce),ve=he.getGui();return ke.insertAdjacentElement("beforeend",ve),ht.push(ve),et.push(he),he};if(Ge&&Be(Ge.component),ct){const ce=Be(ct.component);N.current=ce,G.current.push(ce)}return Xe&&Be(Xe.component),()=>{e.destroyBeans(et),ht.forEach(ce=>{var he;(he=ce.parentElement)==null||he.removeChild(ce)})}},[v,M,e]);const q=D.useMemo(()=>ca("ag-root-wrapper",t,i),[t,i]),oe=D.useMemo(()=>ca("ag-root-wrapper-body","ag-focus-managed",i),[i]),ue=D.useMemo(()=>({userSelect:o??"",WebkitUserSelect:o??"",cursor:s??""}),[o,s]),me=D.useCallback(fe=>{R.current=fe,y(fe!==null)},[]),ie=D.useCallback(()=>{var fe;return!((fe=_.current)!=null&&fe.isFocusable())},[]);return Rt.createElement("div",{ref:ee,className:q,style:ue,role:"presentation"},Rt.createElement("div",{className:oe,ref:F,role:"presentation"},d&&M&&!e.isDestroyed()&&Rt.createElement(Ds.Provider,{value:e.getBeans()},Rt.createElement(uwe,{ref:me,eFocusableElement:M,onTabKeyDown:j,gridCtrl:_.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:ie},Rt.createElement(awe,null)))))},dwe=D.memo(hwe),fwe=class extends ft{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},rz={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},pwe={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...rz},iz=new Set(Object.keys(pwe)),gwe=new Set(Object.keys(rz)),nz=e=>{var F;const t=D.useRef(),r=D.useRef(null),i=D.useRef(null),n=D.useRef([]),s=D.useRef([]),a=D.useRef(e),o=D.useRef(),u=D.useRef(),d=D.useRef(!1),[p,v]=D.useState(void 0),[,y]=D.useState(0),_=D.useCallback(k=>{if(r.current=k,!k){n.current.forEach(fe=>fe()),n.current.length=0;return}const N=e.modules||[];i.current||(i.current=new kye(()=>y(fe=>fe+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{var fe;(fe=i.current)==null||fe.destroy(),i.current=null}));const G=Uie(e.gridOptions,e,Object.keys(e).filter(fe=>!iz.has(fe))),j=()=>{if(d.current){const fe=()=>{var et;return(et=o.current)!=null&&et.shouldQueueUpdates()?void 0:s.current.shift()};let ke=fe();for(;ke;)ke(),ke=fe()}},ee=new wwe(j);o.current=ee;const q=new fwe,oe={providedBeanInstances:{frameworkCompWrapper:new vwe(i.current,G),renderStatus:q},modules:N,frameworkOverrides:ee,setThemeOnGridDiv:!0},ue=fe=>{v(fe),fe.createBean(q),n.current.push(()=>{fe.destroy()}),fe.getBean("ctrlsSvc").whenReady({addDestroyFunc:ke=>{n.current.push(ke)}},()=>{var et;if(fe.isDestroyed())return;const ke=t.current;ke&&((et=e.passGridApi)==null||et.call(e,ke))})},me=fe=>{fe.getBean("ctrlsSvc").whenReady({addDestroyFunc:ke=>{n.current.push(ke)}},()=>{s.current.forEach(ke=>ke()),s.current.length=0,d.current=!0})},ie=new zfe;G.gridId??(G.gridId=u.current),t.current=ie.create(k,G,ue,me,oe),n.current.push(()=>{t.current=void 0}),t.current&&(u.current=t.current.getGridId())},[]),P=D.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),R=D.useCallback(k=>{var N;d.current&&!((N=o.current)!=null&&N.shouldQueueUpdates())?k():s.current.push(k)},[]);D.useEffect(()=>{const k=mwe(a.current,e);a.current=e,R(()=>{t.current&&Wie(k,t.current)})},[e]);const M=!Rt.useSyncExternalStore||ux(e,"renderingMode")==="legacy"?"legacy":"default";return Rt.createElement("div",{style:P,className:e.className,ref:_},Rt.createElement(Z8.Provider,{value:M},p&&!p.isDestroyed()?Rt.createElement(dwe,{key:p.instanceId,context:p}):null,((F=i.current)==null?void 0:F.getPortals())??null))};function mwe(e,t){const r={};return Object.keys(t).forEach(i=>{if(iz.has(i)){gwe.has(i)&&St(274,{prop:i});return}const n=t[i];e[i]!==n&&(r[i]=n)}),r}var vwe=class extends Ufe{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const r=this.gridOptions;if(ux(r,"reactiveCustomComponents")){const a=(o=>{switch(o){case"filter":return ux(r,"enableFilterHandlers")?bye:_ye;case"floatingFilterComponent":return ux(r,"enableFilterHandlers")?Rye:Eye;case"dateComponent":return xye;case"dragAndDropImageComponent":return Cye;case"loadingOverlayComponent":return Pye;case"noRowsOverlayComponent":return Fye;case"statusPanel":return Aye;case"toolPanel":return Iye;case"menuItem":return Mye;case"cellRenderer":return wye;case"innerHeaderComponent":return Tye}})(t.name);if(a)return new a(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":RP();break}const n=!t.cellRenderer&&t.name!=="toolPanel";return new J8(e,this.parent,t,n)}},ywe=D.forwardRef((e,t)=>{const r=D.useContext(Ds),{registry:i,context:n,gos:s,rowModel:a}=r,[o,u]=D.useState(()=>new ga),[d,p]=D.useState(()=>new ga),[v,y]=D.useState(),[_,P]=D.useState(),R=D.useRef(),M=D.useRef(null),F=D.useRef(),k=D.useMemo(()=>Iue(e.api.getGridId(),(v==null?void 0:v.rowModelType)??"clientSide"),[e]),N=D.useMemo(()=>o.toString()+" ag-details-row",[o]),G=D.useMemo(()=>d.toString()+" ag-details-grid",[d]);t&&D.useImperativeHandle(t,()=>({refresh(){var q;return((q=R.current)==null?void 0:q.refresh())??!1}})),e.template&&St(230);const j=D.useCallback(q=>{var me;if(M.current=q,!q||n.isDestroyed()){R.current=n.destroyBean(R.current),(me=F.current)==null||me.call(F);return}const oe={toggleCss:(ie,fe)=>u(ke=>ke.setClass(ie,fe)),toggleDetailGridCss:(ie,fe)=>p(ke=>ke.setClass(ie,fe)),setDetailGrid:ie=>y(ie),setRowData:ie=>P(ie),getGui:()=>M.current},ue=i.createDynamicBean("detailCellRendererCtrl",!0);if(ue&&(n.createBean(ue),ue.init(oe,e),R.current=ue,s.get("detailRowAutoHeight"))){const ie=()=>{if(M.current==null)return;const fe=M.current.clientHeight;fe!=null&&fe>0&&setTimeout(()=>{e.node.setRowHeight(fe),(In(s)||_d(s))&&a.onRowHeightChanged()},0)};F.current=Mc(r,q,ie),ie()}},[]),ee=D.useCallback(q=>{var oe;(oe=R.current)==null||oe.registerDetailWithMaster(q)},[]);return Rt.createElement("div",{className:N,ref:j},v&&Rt.createElement(nz,{className:G,...v,modules:k,rowData:_,passGridApi:ee}))}),wwe=class extends B6{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:kk,agGroupRowRenderer:kk,agDetailCellRenderer:ywe},this.wrapIncoming=(t,r)=>r==="ensureVisible"?fye(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return dye()}},BS=class extends D.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(t=>t(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return Rt.createElement(nz,{...this.props,passGridApi:this.setGridApi})}},zS=0;function sz(){D.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??zk()),document.body.insertAdjacentElement("beforeend",e[1]??zk()),zS++,()=>{zS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),zS--}},[])}function zk(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var GS="focusScope.autoFocusOnMount",VS="focusScope.autoFocusOnUnmount",Gk={bubbles:!1,cancelable:!0},xwe="FocusScope",TP=D.forwardRef((e,t)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:n,onUnmountAutoFocus:s,...a}=e,[o,u]=D.useState(null),d=Al(n),p=Al(s),v=D.useRef(null),y=Vi(t,R=>u(R)),_=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(i){let R=function(N){if(_.paused||!o)return;const G=N.target;o.contains(G)?v.current=G:nu(v.current,{select:!0})},M=function(N){if(_.paused||!o)return;const G=N.relatedTarget;G!==null&&(o.contains(G)||nu(v.current,{select:!0}))},F=function(N){if(document.activeElement===document.body)for(const j of N)j.removedNodes.length>0&&nu(o)};document.addEventListener("focusin",R),document.addEventListener("focusout",M);const k=new MutationObserver(F);return o&&k.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",R),document.removeEventListener("focusout",M),k.disconnect()}}},[i,o,_.paused]),D.useEffect(()=>{if(o){Hk.add(_);const R=document.activeElement;if(!o.contains(R)){const F=new CustomEvent(GS,Gk);o.addEventListener(GS,d),o.dispatchEvent(F),F.defaultPrevented||(Cwe(Rwe(oz(o)),{select:!0}),document.activeElement===R&&nu(o))}return()=>{o.removeEventListener(GS,d),setTimeout(()=>{const F=new CustomEvent(VS,Gk);o.addEventListener(VS,p),o.dispatchEvent(F),F.defaultPrevented||nu(R??document.body,{select:!0}),o.removeEventListener(VS,p),Hk.remove(_)},0)}}},[o,d,p,_]);const P=D.useCallback(R=>{if(!r&&!i||_.paused)return;const M=R.key==="Tab"&&!R.altKey&&!R.ctrlKey&&!R.metaKey,F=document.activeElement;if(M&&F){const k=R.currentTarget,[N,G]=_we(k);N&&G?!R.shiftKey&&F===G?(R.preventDefault(),r&&nu(N,{select:!0})):R.shiftKey&&F===N&&(R.preventDefault(),r&&nu(G,{select:!0})):F===k&&R.preventDefault()}},[r,i,_.paused]);return V.jsx(Wr.div,{tabIndex:-1,...a,ref:y,onKeyDown:P})});TP.displayName=xwe;function Cwe(e,{select:t=!1}={}){const r=document.activeElement;for(const i of e)if(nu(i,{select:t}),document.activeElement!==r)return}function _we(e){const t=oz(e),r=Vk(t,e),i=Vk(t.reverse(),e);return[r,i]}function oz(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const n=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||n?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Vk(e,t){for(const r of e)if(!bwe(r,{upTo:t}))return r}function bwe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Swe(e){return e instanceof HTMLInputElement&&"select"in e}function nu(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Swe(e)&&t&&e.select()}}var Hk=Ewe();function Ewe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Uk(e,t),e.unshift(t)},remove(t){var r;e=Uk(e,t),(r=e[0])==null||r.resume()}}}function Uk(e,t){const r=[...e],i=r.indexOf(t);return i!==-1&&r.splice(i,1),r}function Rwe(e){return e.filter(t=>t.tagName!=="A")}var Twe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Cf=new WeakMap,Aw=new WeakMap,Iw={},HS=0,az=function(e){return e&&(e.host||az(e.parentNode))},Pwe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var i=az(r);return i&&e.contains(i)?i:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Mwe=function(e,t,r,i){var n=Pwe(t,Array.isArray(e)?e:[e]);Iw[r]||(Iw[r]=new WeakMap);var s=Iw[r],a=[],o=new Set,u=new Set(n),d=function(v){!v||o.has(v)||(o.add(v),d(v.parentNode))};n.forEach(d);var p=function(v){!v||u.has(v)||Array.prototype.forEach.call(v.children,function(y){if(o.has(y))p(y);else try{var _=y.getAttribute(i),P=_!==null&&_!=="false",R=(Cf.get(y)||0)+1,M=(s.get(y)||0)+1;Cf.set(y,R),s.set(y,M),a.push(y),R===1&&P&&Aw.set(y,!0),M===1&&y.setAttribute(r,"true"),P||y.setAttribute(i,"true")}catch(F){console.error("aria-hidden: cannot operate on ",y,F)}})};return p(t),o.clear(),HS++,function(){a.forEach(function(v){var y=Cf.get(v)-1,_=s.get(v)-1;Cf.set(v,y),s.set(v,_),y||(Aw.has(v)||v.removeAttribute(i),Aw.delete(v)),_||v.removeAttribute(r)}),HS--,HS||(Cf=new WeakMap,Cf=new WeakMap,Aw=new WeakMap,Iw={})}},lz=function(e,t,r){r===void 0&&(r="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),n=Twe(e);return n?(i.push.apply(i,Array.from(n.querySelectorAll("[aria-live], script"))),Mwe(i,n,r,"aria-hidden")):function(){return null}},Cl=function(){return Cl=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Cl.apply(this,arguments)};function cz(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function Fwe(e,t,r){if(r||arguments.length===2)for(var i=0,n=t.length,s;i<n;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var Cx="right-scroll-bar-position",_x="width-before-scroll-bar",Awe="with-scroll-bars-hidden",Iwe="--removed-body-scroll-bar-size";function US(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Dwe(e,t){var r=D.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(i){var n=r.value;n!==i&&(r.value=i,r.callback(i,n))}}}})[0];return r.callback=t,r.facade}var kwe=typeof window<"u"?D.useLayoutEffect:D.useEffect,Wk=new WeakMap;function Lwe(e,t){var r=Dwe(null,function(i){return e.forEach(function(n){return US(n,i)})});return kwe(function(){var i=Wk.get(r);if(i){var n=new Set(i),s=new Set(e),a=r.current;n.forEach(function(o){s.has(o)||US(o,null)}),s.forEach(function(o){n.has(o)||US(o,a)})}Wk.set(r,e)},[e]),r}function Owe(e){return e}function Nwe(e,t){t===void 0&&(t=Owe);var r=[],i=!1,n={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var a=t(s,i);return r.push(a),function(){r=r.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(i=!0;r.length;){var a=r;r=[],a.forEach(s)}r={push:function(o){return s(o)},filter:function(){return r}}},assignMedium:function(s){i=!0;var a=[];if(r.length){var o=r;r=[],o.forEach(s),a=r}var u=function(){var p=a;a=[],p.forEach(s)},d=function(){return Promise.resolve().then(u)};d(),r={push:function(p){a.push(p),d()},filter:function(p){return a=a.filter(p),r}}}};return n}function Bwe(e){e===void 0&&(e={});var t=Nwe(null);return t.options=Cl({async:!0,ssr:!1},e),t}var uz=function(e){var t=e.sideCar,r=cz(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return D.createElement(i,Cl({},r))};uz.isSideCarExport=!0;function zwe(e,t){return e.useMedium(t),uz}var hz=Bwe(),WS=function(){},Y1=D.forwardRef(function(e,t){var r=D.useRef(null),i=D.useState({onScrollCapture:WS,onWheelCapture:WS,onTouchMoveCapture:WS}),n=i[0],s=i[1],a=e.forwardProps,o=e.children,u=e.className,d=e.removeScrollBar,p=e.enabled,v=e.shards,y=e.sideCar,_=e.noRelative,P=e.noIsolation,R=e.inert,M=e.allowPinchZoom,F=e.as,k=F===void 0?"div":F,N=e.gapMode,G=cz(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=y,ee=Lwe([r,t]),q=Cl(Cl({},G),n);return D.createElement(D.Fragment,null,p&&D.createElement(j,{sideCar:hz,removeScrollBar:d,shards:v,noRelative:_,noIsolation:P,inert:R,setCallbacks:s,allowPinchZoom:!!M,lockRef:r,gapMode:N}),a?D.cloneElement(D.Children.only(o),Cl(Cl({},q),{ref:ee})):D.createElement(k,Cl({},q,{className:u,ref:ee}),o))});Y1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Y1.classNames={fullWidth:_x,zeroRight:Cx};var Gwe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Vwe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Gwe();return t&&e.setAttribute("nonce",t),e}function Hwe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Uwe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Wwe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Vwe())&&(Hwe(t,r),Uwe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},jwe=function(){var e=Wwe();return function(t,r){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},dz=function(){var e=jwe(),t=function(r){var i=r.styles,n=r.dynamic;return e(i,n),null};return t},$we={left:0,top:0,right:0,gap:0},jS=function(e){return parseInt(e||"",10)||0},qwe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],n=t[e==="padding"?"paddingRight":"marginRight"];return[jS(r),jS(i),jS(n)]},Kwe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return $we;var t=qwe(e),r=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-r+t[2]-t[0])}},Zwe=dz(),Cp="data-scroll-locked",Xwe=function(e,t,r,i){var n=e.left,s=e.top,a=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Awe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(o,"px ").concat(i,`;
  }
  body[`).concat(Cp,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),r==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(i,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cx,` {
    right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(_x,` {
    margin-right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(Cx," .").concat(Cx,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(_x," .").concat(_x,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Cp,`] {
    `).concat(Iwe,": ").concat(o,`px;
  }
`)},jk=function(){var e=parseInt(document.body.getAttribute(Cp)||"0",10);return isFinite(e)?e:0},Ywe=function(){D.useEffect(function(){return document.body.setAttribute(Cp,(jk()+1).toString()),function(){var e=jk()-1;e<=0?document.body.removeAttribute(Cp):document.body.setAttribute(Cp,e.toString())}},[])},Qwe=function(e){var t=e.noRelative,r=e.noImportant,i=e.gapMode,n=i===void 0?"margin":i;Ywe();var s=D.useMemo(function(){return Kwe(n)},[n]);return D.createElement(Zwe,{styles:Xwe(s,!t,n,r?"":"!important")})},G2=!1;if(typeof window<"u")try{var Dw=Object.defineProperty({},"passive",{get:function(){return G2=!0,!0}});window.addEventListener("test",Dw,Dw),window.removeEventListener("test",Dw,Dw)}catch{G2=!1}var _f=G2?{passive:!1}:!1,Jwe=function(e){return e.tagName==="TEXTAREA"},fz=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Jwe(e)&&r[t]==="visible")},exe=function(e){return fz(e,"overflowY")},txe=function(e){return fz(e,"overflowX")},$k=function(e,t){var r=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var n=pz(e,i);if(n){var s=gz(e,i),a=s[1],o=s[2];if(a>o)return!0}i=i.parentNode}while(i&&i!==r.body);return!1},rxe=function(e){var t=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;return[t,r,i]},ixe=function(e){var t=e.scrollLeft,r=e.scrollWidth,i=e.clientWidth;return[t,r,i]},pz=function(e,t){return e==="v"?exe(t):txe(t)},gz=function(e,t){return e==="v"?rxe(t):ixe(t)},nxe=function(e,t){return e==="h"&&t==="rtl"?-1:1},sxe=function(e,t,r,i,n){var s=nxe(e,window.getComputedStyle(t).direction),a=s*i,o=r.target,u=t.contains(o),d=!1,p=a>0,v=0,y=0;do{if(!o)break;var _=gz(e,o),P=_[0],R=_[1],M=_[2],F=R-M-s*P;(P||F)&&pz(e,o)&&(v+=F,y+=P);var k=o.parentNode;o=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!u&&o!==document.body||u&&(t.contains(o)||t===o));return(p&&Math.abs(v)<1||!p&&Math.abs(y)<1)&&(d=!0),d},kw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},qk=function(e){return[e.deltaX,e.deltaY]},Kk=function(e){return e&&"current"in e?e.current:e},oxe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},axe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lxe=0,bf=[];function cxe(e){var t=D.useRef([]),r=D.useRef([0,0]),i=D.useRef(),n=D.useState(lxe++)[0],s=D.useState(dz)[0],a=D.useRef(e);D.useEffect(function(){a.current=e},[e]),D.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var R=Fwe([e.lockRef.current],(e.shards||[]).map(Kk),!0).filter(Boolean);return R.forEach(function(M){return M.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),R.forEach(function(M){return M.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var o=D.useCallback(function(R,M){if("touches"in R&&R.touches.length===2||R.type==="wheel"&&R.ctrlKey)return!a.current.allowPinchZoom;var F=kw(R),k=r.current,N="deltaX"in R?R.deltaX:k[0]-F[0],G="deltaY"in R?R.deltaY:k[1]-F[1],j,ee=R.target,q=Math.abs(N)>Math.abs(G)?"h":"v";if("touches"in R&&q==="h"&&ee.type==="range")return!1;var oe=$k(q,ee);if(!oe)return!0;if(oe?j=q:(j=q==="v"?"h":"v",oe=$k(q,ee)),!oe)return!1;if(!i.current&&"changedTouches"in R&&(N||G)&&(i.current=j),!j)return!0;var ue=i.current||j;return sxe(ue,M,R,ue==="h"?N:G)},[]),u=D.useCallback(function(R){var M=R;if(!(!bf.length||bf[bf.length-1]!==s)){var F="deltaY"in M?qk(M):kw(M),k=t.current.filter(function(j){return j.name===M.type&&(j.target===M.target||M.target===j.shadowParent)&&oxe(j.delta,F)})[0];if(k&&k.should){M.cancelable&&M.preventDefault();return}if(!k){var N=(a.current.shards||[]).map(Kk).filter(Boolean).filter(function(j){return j.contains(M.target)}),G=N.length>0?o(M,N[0]):!a.current.noIsolation;G&&M.cancelable&&M.preventDefault()}}},[]),d=D.useCallback(function(R,M,F,k){var N={name:R,delta:M,target:F,should:k,shadowParent:uxe(F)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(G){return G!==N})},1)},[]),p=D.useCallback(function(R){r.current=kw(R),i.current=void 0},[]),v=D.useCallback(function(R){d(R.type,qk(R),R.target,o(R,e.lockRef.current))},[]),y=D.useCallback(function(R){d(R.type,kw(R),R.target,o(R,e.lockRef.current))},[]);D.useEffect(function(){return bf.push(s),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",u,_f),document.addEventListener("touchmove",u,_f),document.addEventListener("touchstart",p,_f),function(){bf=bf.filter(function(R){return R!==s}),document.removeEventListener("wheel",u,_f),document.removeEventListener("touchmove",u,_f),document.removeEventListener("touchstart",p,_f)}},[]);var _=e.removeScrollBar,P=e.inert;return D.createElement(D.Fragment,null,P?D.createElement(s,{styles:axe(n)}):null,_?D.createElement(Qwe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function uxe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const hxe=zwe(hz,cxe);var PP=D.forwardRef(function(e,t){return D.createElement(Y1,Cl({},e,{ref:t,sideCar:hxe}))});PP.classNames=Y1.classNames;var V2=["Enter"," "],dxe=["ArrowDown","PageUp","Home"],mz=["ArrowUp","PageDown","End"],fxe=[...dxe,...mz],pxe={ltr:[...V2,"ArrowRight"],rtl:[...V2,"ArrowLeft"]},gxe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Dv="Menu",[nv,mxe,vxe]=D5(Dv),[Rd,vz]=Ya(Dv,[vxe,D1,eg]),Q1=D1(),yz=eg(),[yxe,Td]=Rd(Dv),[wxe,kv]=Rd(Dv),wz=e=>{const{__scopeMenu:t,open:r=!1,children:i,dir:n,onOpenChange:s,modal:a=!0}=e,o=Q1(t),[u,d]=D.useState(null),p=D.useRef(!1),v=Al(s),y=N1(n);return D.useEffect(()=>{const _=()=>{p.current=!0,document.addEventListener("pointerdown",P,{capture:!0,once:!0}),document.addEventListener("pointermove",P,{capture:!0,once:!0})},P=()=>p.current=!1;return document.addEventListener("keydown",_,{capture:!0}),()=>{document.removeEventListener("keydown",_,{capture:!0}),document.removeEventListener("pointerdown",P,{capture:!0}),document.removeEventListener("pointermove",P,{capture:!0})}},[]),V.jsx(w5,{...o,children:V.jsx(yxe,{scope:t,open:r,onOpenChange:v,content:u,onContentChange:d,children:V.jsx(wxe,{scope:t,onClose:D.useCallback(()=>v(!1),[v]),isUsingKeyboardRef:p,dir:y,modal:a,children:i})})})};wz.displayName=Dv;var xxe="MenuAnchor",MP=D.forwardRef((e,t)=>{const{__scopeMenu:r,...i}=e,n=Q1(r);return V.jsx(x5,{...n,...i,ref:t})});MP.displayName=xxe;var FP="MenuPortal",[Cxe,xz]=Rd(FP,{forceMount:void 0}),Cz=e=>{const{__scopeMenu:t,forceMount:r,children:i,container:n}=e,s=Td(FP,t);return V.jsx(Cxe,{scope:t,forceMount:r,children:V.jsx(qo,{present:r||s.open,children:V.jsx(k1,{asChild:!0,container:n,children:i})})})};Cz.displayName=FP;var va="MenuContent",[_xe,AP]=Rd(va),_z=D.forwardRef((e,t)=>{const r=xz(va,e.__scopeMenu),{forceMount:i=r.forceMount,...n}=e,s=Td(va,e.__scopeMenu),a=kv(va,e.__scopeMenu);return V.jsx(nv.Provider,{scope:e.__scopeMenu,children:V.jsx(qo,{present:i||s.open,children:V.jsx(nv.Slot,{scope:e.__scopeMenu,children:a.modal?V.jsx(bxe,{...n,ref:t}):V.jsx(Sxe,{...n,ref:t})})})})}),bxe=D.forwardRef((e,t)=>{const r=Td(va,e.__scopeMenu),i=D.useRef(null),n=Vi(t,i);return D.useEffect(()=>{const s=i.current;if(s)return lz(s)},[]),V.jsx(IP,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:xr(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Sxe=D.forwardRef((e,t)=>{const r=Td(va,e.__scopeMenu);return V.jsx(IP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Exe=Ap("MenuContent.ScrollLock"),IP=D.forwardRef((e,t)=>{const{__scopeMenu:r,loop:i=!1,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:p,onFocusOutside:v,onInteractOutside:y,onDismiss:_,disableOutsideScroll:P,...R}=e,M=Td(va,r),F=kv(va,r),k=Q1(r),N=yz(r),G=mxe(r),[j,ee]=D.useState(null),q=D.useRef(null),oe=Vi(t,q,M.onContentChange),ue=D.useRef(0),me=D.useRef(""),ie=D.useRef(0),fe=D.useRef(null),ke=D.useRef("right"),et=D.useRef(0),Xe=P?PP:D.Fragment,ct=P?{as:Exe,allowPinchZoom:!0}:void 0,pt=Ye=>{var qe,at;const ht=me.current+Ye,Be=G().filter(ot=>!ot.disabled),ce=document.activeElement,he=(qe=Be.find(ot=>ot.ref.current===ce))==null?void 0:qe.textValue,ve=Be.map(ot=>ot.textValue),_e=Nxe(ve,ht,he),Fe=(at=Be.find(ot=>ot.textValue===_e))==null?void 0:at.ref.current;(function ot(Qe){me.current=Qe,window.clearTimeout(ue.current),Qe!==""&&(ue.current=window.setTimeout(()=>ot(""),1e3))})(ht),Fe&&setTimeout(()=>Fe.focus())};D.useEffect(()=>()=>window.clearTimeout(ue.current),[]),sz();const Ge=D.useCallback(Ye=>{var Be,ce;return ke.current===((Be=fe.current)==null?void 0:Be.side)&&zxe(Ye,(ce=fe.current)==null?void 0:ce.area)},[]);return V.jsx(_xe,{scope:r,searchRef:me,onItemEnter:D.useCallback(Ye=>{Ge(Ye)&&Ye.preventDefault()},[Ge]),onItemLeave:D.useCallback(Ye=>{var ht;Ge(Ye)||((ht=q.current)==null||ht.focus(),ee(null))},[Ge]),onTriggerLeave:D.useCallback(Ye=>{Ge(Ye)&&Ye.preventDefault()},[Ge]),pointerGraceTimerRef:ie,onPointerGraceIntentChange:D.useCallback(Ye=>{fe.current=Ye},[]),children:V.jsx(Xe,{...ct,children:V.jsx(TP,{asChild:!0,trapped:n,onMountAutoFocus:xr(s,Ye=>{var ht;Ye.preventDefault(),(ht=q.current)==null||ht.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:V.jsx(P1,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:p,onFocusOutside:v,onInteractOutside:y,onDismiss:_,children:V.jsx(DT,{asChild:!0,...N,dir:F.dir,orientation:"vertical",loop:i,currentTabStopId:j,onCurrentTabStopIdChange:ee,onEntryFocus:xr(u,Ye=>{F.isUsingKeyboardRef.current||Ye.preventDefault()}),preventScrollOnEntryFocus:!0,children:V.jsx(C5,{role:"menu","aria-orientation":"vertical","data-state":Bz(M.open),"data-radix-menu-content":"",dir:F.dir,...k,...R,ref:oe,style:{outline:"none",...R.style},onKeyDown:xr(R.onKeyDown,Ye=>{const Be=Ye.target.closest("[data-radix-menu-content]")===Ye.currentTarget,ce=Ye.ctrlKey||Ye.altKey||Ye.metaKey,he=Ye.key.length===1;Be&&(Ye.key==="Tab"&&Ye.preventDefault(),!ce&&he&&pt(Ye.key));const ve=q.current;if(Ye.target!==ve||!fxe.includes(Ye.key))return;Ye.preventDefault();const Fe=G().filter(qe=>!qe.disabled).map(qe=>qe.ref.current);mz.includes(Ye.key)&&Fe.reverse(),Lxe(Fe)}),onBlur:xr(e.onBlur,Ye=>{Ye.currentTarget.contains(Ye.target)||(window.clearTimeout(ue.current),me.current="")}),onPointerMove:xr(e.onPointerMove,sv(Ye=>{const ht=Ye.target,Be=et.current!==Ye.clientX;if(Ye.currentTarget.contains(ht)&&Be){const ce=Ye.clientX>et.current?"right":"left";ke.current=ce,et.current=Ye.clientX}}))})})})})})})});_z.displayName=va;var Rxe="MenuGroup",DP=D.forwardRef((e,t)=>{const{__scopeMenu:r,...i}=e;return V.jsx(Wr.div,{role:"group",...i,ref:t})});DP.displayName=Rxe;var Txe="MenuLabel",bz=D.forwardRef((e,t)=>{const{__scopeMenu:r,...i}=e;return V.jsx(Wr.div,{...i,ref:t})});bz.displayName=Txe;var WC="MenuItem",Zk="menu.itemSelect",J1=D.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:i,...n}=e,s=D.useRef(null),a=kv(WC,e.__scopeMenu),o=AP(WC,e.__scopeMenu),u=Vi(t,s),d=D.useRef(!1),p=()=>{const v=s.current;if(!r&&v){const y=new CustomEvent(Zk,{bubbles:!0,cancelable:!0});v.addEventListener(Zk,_=>i==null?void 0:i(_),{once:!0}),ZN(v,y),y.defaultPrevented?d.current=!1:a.onClose()}};return V.jsx(Sz,{...n,ref:u,disabled:r,onClick:xr(e.onClick,p),onPointerDown:v=>{var y;(y=e.onPointerDown)==null||y.call(e,v),d.current=!0},onPointerUp:xr(e.onPointerUp,v=>{var y;d.current||(y=v.currentTarget)==null||y.click()}),onKeyDown:xr(e.onKeyDown,v=>{const y=o.searchRef.current!=="";r||y&&v.key===" "||V2.includes(v.key)&&(v.currentTarget.click(),v.preventDefault())})})});J1.displayName=WC;var Sz=D.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:i=!1,textValue:n,...s}=e,a=AP(WC,r),o=yz(r),u=D.useRef(null),d=Vi(t,u),[p,v]=D.useState(!1),[y,_]=D.useState("");return D.useEffect(()=>{const P=u.current;P&&_((P.textContent??"").trim())},[s.children]),V.jsx(nv.ItemSlot,{scope:r,disabled:i,textValue:n??y,children:V.jsx(kT,{asChild:!0,...o,focusable:!i,children:V.jsx(Wr.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:d,onPointerMove:xr(e.onPointerMove,sv(P=>{i?a.onItemLeave(P):(a.onItemEnter(P),P.defaultPrevented||P.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:xr(e.onPointerLeave,sv(P=>a.onItemLeave(P))),onFocus:xr(e.onFocus,()=>v(!0)),onBlur:xr(e.onBlur,()=>v(!1))})})})}),Pxe="MenuCheckboxItem",Ez=D.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:i,...n}=e;return V.jsx(Fz,{scope:e.__scopeMenu,checked:r,children:V.jsx(J1,{role:"menuitemcheckbox","aria-checked":jC(r)?"mixed":r,...n,ref:t,"data-state":LP(r),onSelect:xr(n.onSelect,()=>i==null?void 0:i(jC(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Ez.displayName=Pxe;var Rz="MenuRadioGroup",[Mxe,Fxe]=Rd(Rz,{value:void 0,onValueChange:()=>{}}),Tz=D.forwardRef((e,t)=>{const{value:r,onValueChange:i,...n}=e,s=Al(i);return V.jsx(Mxe,{scope:e.__scopeMenu,value:r,onValueChange:s,children:V.jsx(DP,{...n,ref:t})})});Tz.displayName=Rz;var Pz="MenuRadioItem",Mz=D.forwardRef((e,t)=>{const{value:r,...i}=e,n=Fxe(Pz,e.__scopeMenu),s=r===n.value;return V.jsx(Fz,{scope:e.__scopeMenu,checked:s,children:V.jsx(J1,{role:"menuitemradio","aria-checked":s,...i,ref:t,"data-state":LP(s),onSelect:xr(i.onSelect,()=>{var a;return(a=n.onValueChange)==null?void 0:a.call(n,r)},{checkForDefaultPrevented:!1})})})});Mz.displayName=Pz;var kP="MenuItemIndicator",[Fz,Axe]=Rd(kP,{checked:!1}),Az=D.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:i,...n}=e,s=Axe(kP,r);return V.jsx(qo,{present:i||jC(s.checked)||s.checked===!0,children:V.jsx(Wr.span,{...n,ref:t,"data-state":LP(s.checked)})})});Az.displayName=kP;var Ixe="MenuSeparator",Iz=D.forwardRef((e,t)=>{const{__scopeMenu:r,...i}=e;return V.jsx(Wr.div,{role:"separator","aria-orientation":"horizontal",...i,ref:t})});Iz.displayName=Ixe;var Dxe="MenuArrow",Dz=D.forwardRef((e,t)=>{const{__scopeMenu:r,...i}=e,n=Q1(r);return V.jsx(_5,{...n,...i,ref:t})});Dz.displayName=Dxe;var kxe="MenuSub",[_2e,kz]=Rd(kxe),Nm="MenuSubTrigger",Lz=D.forwardRef((e,t)=>{const r=Td(Nm,e.__scopeMenu),i=kv(Nm,e.__scopeMenu),n=kz(Nm,e.__scopeMenu),s=AP(Nm,e.__scopeMenu),a=D.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:u}=s,d={__scopeMenu:e.__scopeMenu},p=D.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return D.useEffect(()=>p,[p]),D.useEffect(()=>{const v=o.current;return()=>{window.clearTimeout(v),u(null)}},[o,u]),V.jsx(MP,{asChild:!0,...d,children:V.jsx(Sz,{id:n.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":n.contentId,"data-state":Bz(r.open),...e,ref:QR(t,n.onTriggerChange),onClick:v=>{var y;(y=e.onClick)==null||y.call(e,v),!(e.disabled||v.defaultPrevented)&&(v.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:xr(e.onPointerMove,sv(v=>{s.onItemEnter(v),!v.defaultPrevented&&!e.disabled&&!r.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),p()},100))})),onPointerLeave:xr(e.onPointerLeave,sv(v=>{var _,P;p();const y=(_=r.content)==null?void 0:_.getBoundingClientRect();if(y){const R=(P=r.content)==null?void 0:P.dataset.side,M=R==="right",F=M?-5:5,k=y[M?"left":"right"],N=y[M?"right":"left"];s.onPointerGraceIntentChange({area:[{x:v.clientX+F,y:v.clientY},{x:k,y:y.top},{x:N,y:y.top},{x:N,y:y.bottom},{x:k,y:y.bottom}],side:R}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(v),v.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:xr(e.onKeyDown,v=>{var _;const y=s.searchRef.current!=="";e.disabled||y&&v.key===" "||pxe[i.dir].includes(v.key)&&(r.onOpenChange(!0),(_=r.content)==null||_.focus(),v.preventDefault())})})})});Lz.displayName=Nm;var Oz="MenuSubContent",Nz=D.forwardRef((e,t)=>{const r=xz(va,e.__scopeMenu),{forceMount:i=r.forceMount,...n}=e,s=Td(va,e.__scopeMenu),a=kv(va,e.__scopeMenu),o=kz(Oz,e.__scopeMenu),u=D.useRef(null),d=Vi(t,u);return V.jsx(nv.Provider,{scope:e.__scopeMenu,children:V.jsx(qo,{present:i||s.open,children:V.jsx(nv.Slot,{scope:e.__scopeMenu,children:V.jsx(IP,{id:o.contentId,"aria-labelledby":o.triggerId,...n,ref:d,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var v;a.isUsingKeyboardRef.current&&((v=u.current)==null||v.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:xr(e.onFocusOutside,p=>{p.target!==o.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:xr(e.onEscapeKeyDown,p=>{a.onClose(),p.preventDefault()}),onKeyDown:xr(e.onKeyDown,p=>{var _;const v=p.currentTarget.contains(p.target),y=gxe[a.dir].includes(p.key);v&&y&&(s.onOpenChange(!1),(_=o.trigger)==null||_.focus(),p.preventDefault())})})})})})});Nz.displayName=Oz;function Bz(e){return e?"open":"closed"}function jC(e){return e==="indeterminate"}function LP(e){return jC(e)?"indeterminate":e?"checked":"unchecked"}function Lxe(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Oxe(e,t){return e.map((r,i)=>e[(t+i)%e.length])}function Nxe(e,t,r){const n=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let a=Oxe(e,Math.max(s,0));n.length===1&&(a=a.filter(d=>d!==r));const u=a.find(d=>d.toLowerCase().startsWith(n.toLowerCase()));return u!==r?u:void 0}function Bxe(e,t){const{x:r,y:i}=e;let n=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const o=t[s],u=t[a],d=o.x,p=o.y,v=u.x,y=u.y;p>i!=y>i&&r<(v-d)*(i-p)/(y-p)+d&&(n=!n)}return n}function zxe(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return Bxe(r,t)}function sv(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Gxe=wz,Vxe=MP,Hxe=Cz,Uxe=_z,Wxe=DP,jxe=bz,$xe=J1,qxe=Ez,Kxe=Tz,Zxe=Mz,Xxe=Az,Yxe=Iz,Qxe=Dz,Jxe=Lz,eCe=Nz,OP="ContextMenu",[tCe]=Ya(OP,[vz]),io=vz(),[rCe,zz]=tCe(OP),Gz=e=>{const{__scopeContextMenu:t,children:r,onOpenChange:i,dir:n,modal:s=!0}=e,[a,o]=D.useState(!1),u=io(t),d=Al(i),p=D.useCallback(v=>{o(v),d(v)},[d]);return V.jsx(rCe,{scope:t,open:a,onOpenChange:p,modal:s,children:V.jsx(Gxe,{...u,dir:n,open:a,onOpenChange:p,modal:s,children:r})})};Gz.displayName=OP;var Vz="ContextMenuTrigger",Hz=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,disabled:i=!1,...n}=e,s=zz(Vz,r),a=io(r),o=D.useRef({x:0,y:0}),u=D.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),d=D.useRef(0),p=D.useCallback(()=>window.clearTimeout(d.current),[]),v=y=>{o.current={x:y.clientX,y:y.clientY},s.onOpenChange(!0)};return D.useEffect(()=>p,[p]),D.useEffect(()=>void(i&&p()),[i,p]),V.jsxs(V.Fragment,{children:[V.jsx(Vxe,{...a,virtualRef:u}),V.jsx(Wr.span,{"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,...n,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:i?e.onContextMenu:xr(e.onContextMenu,y=>{p(),v(y),y.preventDefault()}),onPointerDown:i?e.onPointerDown:xr(e.onPointerDown,Lw(y=>{p(),d.current=window.setTimeout(()=>v(y),700)})),onPointerMove:i?e.onPointerMove:xr(e.onPointerMove,Lw(p)),onPointerCancel:i?e.onPointerCancel:xr(e.onPointerCancel,Lw(p)),onPointerUp:i?e.onPointerUp:xr(e.onPointerUp,Lw(p))})]})});Hz.displayName=Vz;var iCe="ContextMenuPortal",Uz=e=>{const{__scopeContextMenu:t,...r}=e,i=io(t);return V.jsx(Hxe,{...i,...r})};Uz.displayName=iCe;var Wz="ContextMenuContent",jz=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=zz(Wz,r),s=io(r),a=D.useRef(!1);return V.jsx(Uxe,{...s,...i,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var u;(u=e.onCloseAutoFocus)==null||u.call(e,o),!o.defaultPrevented&&a.current&&o.preventDefault(),a.current=!1},onInteractOutside:o=>{var u;(u=e.onInteractOutside)==null||u.call(e,o),!o.defaultPrevented&&!n.modal&&(a.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jz.displayName=Wz;var nCe="ContextMenuGroup",sCe=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx(Wxe,{...n,...i,ref:t})});sCe.displayName=nCe;var oCe="ContextMenuLabel",$z=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx(jxe,{...n,...i,ref:t})});$z.displayName=oCe;var aCe="ContextMenuItem",qz=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx($xe,{...n,...i,ref:t})});qz.displayName=aCe;var lCe="ContextMenuCheckboxItem",Kz=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx(qxe,{...n,...i,ref:t})});Kz.displayName=lCe;var cCe="ContextMenuRadioGroup",uCe=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx(Kxe,{...n,...i,ref:t})});uCe.displayName=cCe;var hCe="ContextMenuRadioItem",Zz=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx(Zxe,{...n,...i,ref:t})});Zz.displayName=hCe;var dCe="ContextMenuItemIndicator",Xz=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx(Xxe,{...n,...i,ref:t})});Xz.displayName=dCe;var fCe="ContextMenuSeparator",Yz=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx(Yxe,{...n,...i,ref:t})});Yz.displayName=fCe;var pCe="ContextMenuArrow",gCe=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx(Qxe,{...n,...i,ref:t})});gCe.displayName=pCe;var mCe="ContextMenuSubTrigger",Qz=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx(Jxe,{...n,...i,ref:t})});Qz.displayName=mCe;var vCe="ContextMenuSubContent",Jz=D.forwardRef((e,t)=>{const{__scopeContextMenu:r,...i}=e,n=io(r);return V.jsx(eCe,{...n,...i,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Jz.displayName=vCe;function Lw(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var yCe=Gz,wCe=Hz,xCe=Uz,eG=jz,tG=$z,rG=qz,iG=Kz,nG=Zz,sG=Xz,oG=Yz,aG=Qz,lG=Jz;const $S=yCe,qS=wCe,CCe=D.forwardRef(({className:e,inset:t,children:r,...i},n)=>V.jsxs(aG,{ref:n,className:Xi("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...i,children:[r,V.jsx(dj,{className:"ml-auto h-4 w-4"})]}));CCe.displayName=aG.displayName;const _Ce=D.forwardRef(({className:e,...t},r)=>V.jsx(lG,{ref:r,className:Xi("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]",e),...t}));_Ce.displayName=lG.displayName;const bx=D.forwardRef(({className:e,...t},r)=>V.jsx(xCe,{children:V.jsx(eG,{ref:r,className:Xi("z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]",e),...t})}));bx.displayName=eG.displayName;const Rs=D.forwardRef(({className:e,inset:t,...r},i)=>V.jsx(rG,{ref:i,className:Xi("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Rs.displayName=rG.displayName;const bCe=D.forwardRef(({className:e,children:t,checked:r,...i},n)=>V.jsxs(iG,{ref:n,className:Xi("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...i,children:[V.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:V.jsx(sG,{children:V.jsx(aO,{className:"h-4 w-4"})})}),t]}));bCe.displayName=iG.displayName;const SCe=D.forwardRef(({className:e,children:t,...r},i)=>V.jsxs(nG,{ref:i,className:Xi("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[V.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:V.jsx(sG,{children:V.jsx(fj,{className:"h-4 w-4 fill-current"})})}),t]}));SCe.displayName=nG.displayName;const ECe=D.forwardRef(({className:e,inset:t,...r},i)=>V.jsx(tG,{ref:i,className:Xi("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...r}));ECe.displayName=tG.displayName;const RCe=D.forwardRef(({className:e,...t},r)=>V.jsx(oG,{ref:r,className:Xi("-mx-1 my-1 h-px bg-border",e),...t}));RCe.displayName=oG.displayName;Lue.registerModules([hye]);function TCe({visibleLayers:e,onLayerToggle:t,pointsData:r,linesData:i,polygonsData:n,highlightedPoints:s,highlightedLines:a,highlightedPolygons:o,onToggleHighlightPoints:u,onToggleHighlightLines:d,onToggleHighlightPolygons:p,selectedAttributeRow:v,onAttributeRowSelect:y,onZoomToFeature:_,onFilterToFeature:P,onClearFilter:R,filteredFeature:M,onShowBbox:F,onShowReportCard:k,activeInfoMode:N}){const[G,j]=D.useState("points");D.useEffect(()=>{N==="points"?j("points"):N==="lines"?j("lines"):N==="polygons"&&j("polygons")},[N]);const ee={avts:"",name_otch:"",org_isp:"",god_nach:" ",god_end:" ",method:"",nom_1000:"",scale:"",tgf:"",in_n_rosg:".  ",in_n_tgf:".  ",n_uk_rosg:" ",n_uk_tgf:" ",web_uk_id:"",vid_iz:"",id:"",name_otch1:" ()"},oe=Object.keys(ee).map(ie=>({field:ie,headerName:ee[ie]||ie})),ue=async(ie,fe)=>{const ke=await Promise.all(ie.map(async ct=>{if(ct.n_uk_rosg&&ct.n_uk_rosg!=="None")try{const pt=await fetch(`${fO}${pO}${ct.n_uk_rosg}`);if(pt.ok){const Ge=await pt.json();return{id:ct.id,hasRegistry:Ge&&Ge.count>0}}else return{id:ct.id,hasRegistry:!1}}catch(pt){return console.error("Error checking registry for RGF number:",ct.n_uk_rosg,pt),{id:ct.id,hasRegistry:!1}}else return{id:ct.id,hasRegistry:!1}})),et=ke.filter(ct=>ct.hasRegistry).length,Xe=ke.length-et;alert(`  :
: ${et}
 : ${Xe}`)},me=(ie,fe)=>{const ke=[{label:"",key:"avts"},{label:"",key:"name_otch"},{label:"",key:"org_isp"},{label:" ",key:"god_nach"},{label:" ",key:"god_end"},{label:"",key:"method"},{label:"",key:"nom_1000"},{label:"",key:"scale"},{label:"",key:"tgf"},{label:".  ",key:"in_n_rosg"},{label:".  ",key:"in_n_tgf"},{label:" ",key:"n_uk_rosg"},{label:" ",key:"n_uk_tgf"},{label:"",key:"web_uk_id"},{label:"",key:"vid_iz"},{label:"",key:"id"}],et=ie.map(pt=>{const Ge={};return ke.forEach(({label:Ye,key:ht})=>{const Be=pt[ht];Ge[Ye]=Be??""}),Ge}),Xe=Mn.json_to_sheet(et),ct=Mn.book_new();Mn.book_append_sheet(ct,Xe,"Data"),xT(ct,fe)};return V.jsxs("div",{className:"bg-background border-t border-border p-4",children:[V.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),V.jsxs(Ore,{value:G,onValueChange:j,className:"w-full",children:[V.jsxs(Q5,{className:"grid w-full grid-cols-3",children:[V.jsxs(sx,{value:"points",children:[" (",r.length,")"]}),V.jsxs(sx,{value:"lines",children:[" (",i.length,")"]}),V.jsxs(sx,{value:"polygons",children:[" (",n.length,")"]})]}),V.jsxs(ox,{value:"points",children:[V.jsxs("div",{className:"mb-2 flex gap-2",children:[V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsxs(gi,{variant:"outline",size:"sm",onClick:u,className:"h-8",children:[V.jsx(Wb,{className:"w-4 h-4 mr-1"}),s.size>0?" ":"  "]})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:s.size>0?"  ":"    "})})]})}),V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsxs(gi,{variant:"outline",size:"sm",onClick:()=>me(r,"points.xlsx"),className:"h-8",children:[V.jsx(Ub,{className:"w-4 h-4 mr-1"}),"  Excel"]})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:"    Excel "})})]})}),V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsxs(gi,{variant:"outline",size:"sm",onClick:()=>ue(r),className:"h-8",children:[V.jsx(jb,{className:"w-4 h-4 mr-1"}),"  "]})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:"    "})})]})})]}),V.jsx("div",{className:"ag-theme-alpine ag-grid-container",children:V.jsxs($S,{children:[V.jsx(qS,{children:V.jsx(BS,{theme:"legacy",rowData:r,columnDefs:oe,defaultColDef:{flex:1,minWidth:140,filter:!0},ensureDomOrder:!0,suppressNoRowsOverlay:!1,rowSelection:"single",rowMultiSelectWithClick:!1,suppressRowClickSelection:!1,onRowClicked:ie=>y(ie.data,"points"),getRowClass:ie=>v&&v.type==="points"&&v.data.id===ie.data.id?"selected-row":"",onGridReady:ie=>{ie.api.__contextMenuType="points",ie.api.__onZoomToFeature=_,ie.api.__onShowBbox=F}},r.length)}),V.jsxs(bx,{children:[V.jsxs(Rs,{onClick:()=>{console.log("Zoom to feature clicked for points");const ie=v==null?void 0:v.data;console.log("selectedRow for zoom:",ie,"type: points"),ie?_(ie,"points"):console.log("No selected row found for zoom")},children:[V.jsx(Xm,{className:"w-4 h-4 mr-2"}),"  "]}),V.jsxs(Rs,{onClick:()=>{console.log("Show bbox clicked for points");const ie=v==null?void 0:v.data;ie&&F?(console.log("Calling onShowBbox with:",ie,"points"),F(ie,"points")):console.log("No selected row or onShowBbox function")},children:[V.jsx(Qw,{className:"w-4 h-4 mr-2"})," bbox"]}),k&&V.jsxs(Rs,{onClick:()=>{const ie=v==null?void 0:v.data;ie&&k(ie,"points")},children:[V.jsx(Hb,{className:"w-4 h-4 mr-2"}),"  "]}),V.jsxs(Rs,{onClick:()=>{const ie=document.querySelectorAll(".ag-theme-alpine .ag-root-wrapper");let fe=null,ke="points";for(const et of ie){const Xe=et.__agGridApi;if(Xe&&Xe.getSelectedRows){const ct=Xe.getSelectedRows();if(ct.length>0){fe=ct[0],ke=et.__contextMenuType||"points";break}}}fe&&P(fe,ke)},children:[V.jsx(qb,{className:"w-4 h-4 mr-2"}),"  "]}),M&&M.type==="points"&&V.jsxs(Rs,{onClick:()=>R("points"),children:[V.jsx($b,{className:"w-4 h-4 mr-2"})," "]})]})]})})]}),V.jsxs(ox,{value:"lines",children:[V.jsxs("div",{className:"mb-2 flex gap-2",children:[V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsxs(gi,{variant:"outline",size:"sm",onClick:d,className:"h-8",children:[V.jsx(Wb,{className:"w-4 h-4 mr-1"}),a.size>0?" ":"  "]})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:a.size>0?"  ":"    "})})]})}),V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsxs(gi,{variant:"outline",size:"sm",onClick:()=>me(i,"lines.xlsx"),className:"h-8",children:[V.jsx(Ub,{className:"w-4 h-4 mr-1"}),"  Excel"]})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:"    Excel "})})]})}),V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsxs(gi,{variant:"outline",size:"sm",onClick:()=>ue(i),className:"h-8",children:[V.jsx(jb,{className:"w-4 h-4 mr-1"}),"  "]})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:"    "})})]})})]}),V.jsx("div",{className:"ag-theme-alpine ag-grid-container",children:V.jsxs($S,{children:[V.jsx(qS,{children:V.jsx(BS,{theme:"legacy",rowData:i,columnDefs:oe,defaultColDef:{flex:1,minWidth:140,filter:!0},ensureDomOrder:!0,suppressNoRowsOverlay:!1,rowSelection:"single",rowMultiSelectWithClick:!1,suppressRowClickSelection:!1,onRowClicked:ie=>y(ie.data,"lines"),getRowClass:ie=>v&&v.type==="lines"&&v.data.id===ie.data.id?"selected-row":"",onGridReady:ie=>{ie.api.__contextMenuType="lines",ie.api.__onZoomToFeature=_,ie.api.__onShowBbox=F}},i.length)}),V.jsxs(bx,{children:[V.jsxs(Rs,{onClick:()=>{console.log("Zoom to feature clicked for lines");const ie=v==null?void 0:v.data;console.log("selectedRow for zoom:",ie,"type: lines"),ie?_(ie,"lines"):console.log("No selected row found for zoom")},children:[V.jsx(Xm,{className:"w-4 h-4 mr-2"}),"  "]}),V.jsxs(Rs,{onClick:()=>{console.log("Show bbox clicked for lines");const ie=v==null?void 0:v.data;ie&&F?(console.log("Calling onShowBbox with:",ie,"lines"),F(ie,"lines")):console.log("No selected row or onShowBbox function")},children:[V.jsx(Qw,{className:"w-4 h-4 mr-2"})," bbox"]}),k&&V.jsxs(Rs,{onClick:()=>{const ie=v==null?void 0:v.data;ie&&k&&k(ie,"lines")},children:[V.jsx(Hb,{className:"w-4 h-4 mr-2"}),"  "]}),V.jsxs(Rs,{onClick:()=>{const ie=document.querySelectorAll(".ag-theme-alpine .ag-root-wrapper");let fe=null,ke="lines";for(const et of ie){const Xe=et.__agGridApi;if(Xe&&Xe.getSelectedRows){const ct=Xe.getSelectedRows();if(ct.length>0){fe=ct[0],ke=et.__contextMenuType||"lines";break}}}fe&&P(fe,ke)},children:[V.jsx(qb,{className:"w-4 h-4 mr-2"}),"  "]}),M&&M.type==="lines"&&V.jsxs(Rs,{onClick:()=>R("lines"),children:[V.jsx($b,{className:"w-4 h-4 mr-2"})," "]})]})]})})]}),V.jsxs(ox,{value:"polygons",children:[V.jsxs("div",{className:"mb-2 flex gap-2",children:[V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsxs(gi,{variant:"outline",size:"sm",onClick:p,className:"h-8",children:[V.jsx(Wb,{className:"w-4 h-4 mr-1"}),o.size>0?" ":"  "]})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:o.size>0?"  ":"    "})})]})}),V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsxs(gi,{variant:"outline",size:"sm",onClick:()=>me(n,"polygons.xlsx"),className:"h-8",children:[V.jsx(Ub,{className:"w-4 h-4 mr-1"}),"  Excel"]})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:"    Excel "})})]})}),V.jsx(Fn,{children:V.jsxs(Si,{children:[V.jsx(Ei,{asChild:!0,children:V.jsxs(gi,{variant:"outline",size:"sm",onClick:()=>ue(n),className:"h-8",children:[V.jsx(jb,{className:"w-4 h-4 mr-1"}),"  "]})}),V.jsx(yi,{side:"top",children:V.jsx("p",{children:"    "})})]})})]}),V.jsx("div",{className:"ag-theme-alpine ag-grid-container",children:V.jsxs($S,{children:[V.jsx(qS,{children:V.jsx(BS,{theme:"legacy",rowData:n,columnDefs:oe,defaultColDef:{flex:1,minWidth:140,filter:!0},ensureDomOrder:!0,suppressNoRowsOverlay:!1,rowSelection:"single",rowMultiSelectWithClick:!1,suppressRowClickSelection:!1,onRowClicked:ie=>y(ie.data,"polygons"),getRowClass:ie=>v&&v.type==="polygons"&&v.data.id===ie.data.id?"selected-row":"",onGridReady:ie=>{ie.api.__contextMenuType="polygons",ie.api.__onZoomToFeature=_,ie.api.__onShowBbox=F}},n.length)}),V.jsxs(bx,{children:[V.jsxs(Rs,{onClick:()=>{console.log("Zoom to feature clicked for polygons");const ie=v==null?void 0:v.data;console.log("selectedRow for zoom:",ie,"type: polygons"),ie?_(ie,"polygons"):console.log("No selected row found for zoom")},children:[V.jsx(Xm,{className:"w-4 h-4 mr-2"}),"  "]}),V.jsxs(Rs,{onClick:()=>{console.log("Show bbox clicked for polygons");const ie=v==null?void 0:v.data;ie&&F?(console.log("Calling onShowBbox with:",ie,"polygons"),F(ie,"polygons")):console.log("No selected row or onShowBbox function")},children:[V.jsx(Qw,{className:"w-4 h-4 mr-2"})," bbox"]}),k&&V.jsxs(Rs,{onClick:()=>{const ie=v==null?void 0:v.data;ie&&k&&k(ie,"polygons")},children:[V.jsx(Hb,{className:"w-4 h-4 mr-2"}),"  "]}),V.jsxs(Rs,{onClick:()=>{const ie=document.querySelectorAll(".ag-theme-alpine .ag-root-wrapper");let fe=null,ke="polygons";for(const et of ie){const Xe=et.__agGridApi;if(Xe&&Xe.getSelectedRows){const ct=Xe.getSelectedRows();if(ct.length>0){fe=ct[0],ke=et.__contextMenuType||"polygons";break}}}fe&&P(fe,ke)},children:[V.jsx(qb,{className:"w-4 h-4 mr-2"}),"  "]}),M&&M.type==="polygons"&&V.jsxs(Rs,{onClick:()=>R("polygons"),children:[V.jsx($b,{className:"w-4 h-4 mr-2"})," "]})]})]})})]})]})]})}function PCe({visibleLayers:e,layers:t}){const[r,i]=D.useState([]);return D.useEffect(()=>{const n=t.filter(s=>e.has(s.name)).reverse().map(s=>{const a=Ef[s.name];let o="#666666";if(a){const u=a.layer;u.type==="circle"&&"paint"in u&&u.paint&&"circle-color"in u.paint?o=u.paint["circle-color"]:u.type==="line"&&"paint"in u&&u.paint&&"line-color"in u.paint?o=u.paint["line-color"]:u.type==="fill"&&"paint"in u&&u.paint&&"fill-color"in u.paint&&(o=u.paint["fill-color"])}return{name:s.name,title:s.title,color:o,visible:e.has(s.name)}});i(n)},[e,t]),V.jsxs("div",{className:"bg-background border-t border-border p-4",children:[V.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),V.jsx("div",{className:"space-y-2",children:r.length>0?r.map(n=>V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("div",{className:"w-4 h-4 rounded border legend-color",style:{"--legend-color":n.color}}),V.jsx("span",{className:"text-sm",children:n.title})]},n.name)):V.jsx("p",{className:"text-muted-foreground text-sm",children:"      "})})]})}function MCe(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var ud=1,hd=2,_p=3,FCe=4,H2=5,Xk=6378137,ACe=6356752314e-3,Yk=.0066943799901413165,u0=484813681109536e-20,Mt=Math.PI/2,ICe=.16666666666666666,DCe=.04722222222222222,kCe=.022156084656084655,Zt=1e-10,ts=.017453292519943295,Sl=57.29577951308232,Qr=Math.PI/4,ov=Math.PI*2,yn=3.14159265359,Eo={};Eo.greenwich=0;Eo.lisbon=-9.131906111111;Eo.paris=2.337229166667;Eo.bogota=-74.080916666667;Eo.madrid=-3.687938888889;Eo.rome=12.452333333333;Eo.bern=7.439583333333;Eo.jakarta=106.807719444444;Eo.ferro=-17.666666666667;Eo.brussels=4.367975;Eo.stockholm=18.058277777778;Eo.athens=23.7163375;Eo.oslo=10.722916666667;const LCe={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var Qk=/[\s_\-\/\(\)]/g;function Gu(e,t){if(e[t])return e[t];for(var r=Object.keys(e),i=t.toLowerCase().replace(Qk,""),n=-1,s,a;++n<r.length;)if(s=r[n],a=s.toLowerCase().replace(Qk,""),a===i)return e[s]}function U2(e){var t={},r=e.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,u){var d=u.split("=");return d.push(!0),o[d[0].toLowerCase()]=d[1],o},{}),i,n,s,a={proj:"projName",datum:"datumCode",rf:function(o){t.rf=parseFloat(o)},lat_0:function(o){t.lat0=o*ts},lat_1:function(o){t.lat1=o*ts},lat_2:function(o){t.lat2=o*ts},lat_ts:function(o){t.lat_ts=o*ts},lon_0:function(o){t.long0=o*ts},lon_1:function(o){t.long1=o*ts},lon_2:function(o){t.long2=o*ts},alpha:function(o){t.alpha=parseFloat(o)*ts},gamma:function(o){t.rectified_grid_angle=parseFloat(o)*ts},lonc:function(o){t.longc=o*ts},x_0:function(o){t.x0=parseFloat(o)},y_0:function(o){t.y0=parseFloat(o)},k_0:function(o){t.k0=parseFloat(o)},k:function(o){t.k0=parseFloat(o)},a:function(o){t.a=parseFloat(o)},b:function(o){t.b=parseFloat(o)},r:function(o){t.a=t.b=parseFloat(o)},r_a:function(){t.R_A=!0},zone:function(o){t.zone=parseInt(o,10)},south:function(){t.utmSouth=!0},towgs84:function(o){t.datum_params=o.split(",").map(function(u){return parseFloat(u)})},to_meter:function(o){t.to_meter=parseFloat(o)},units:function(o){t.units=o;var u=Gu(LCe,o);u&&(t.to_meter=u.to_meter)},from_greenwich:function(o){t.from_greenwich=o*ts},pm:function(o){var u=Gu(Eo,o);t.from_greenwich=(u||parseFloat(o))*ts},nadgrids:function(o){o==="@null"?t.datumCode="none":t.nadgrids=o},axis:function(o){var u="ewnsud";o.length===3&&u.indexOf(o.substr(0,1))!==-1&&u.indexOf(o.substr(1,1))!==-1&&u.indexOf(o.substr(2,1))!==-1&&(t.axis=o)},approx:function(){t.approx=!0}};for(i in r)n=r[i],i in a?(s=a[i],typeof s=="function"?s(n):t[s]=n):t[i]=n;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}class cG{static getId(t){const r=t.find(i=>Array.isArray(i)&&i[0]==="ID");return r&&r.length>=3?{authority:r[1],code:parseInt(r[2],10)}:null}static convertUnit(t,r="unit"){if(!t||t.length<3)return{type:r,name:"unknown",conversion_factor:null};const i=t[1],n=parseFloat(t[2])||null,s=t.find(o=>Array.isArray(o)&&o[0]==="ID"),a=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:r,name:i,conversion_factor:n,id:a}}static convertAxis(t){const r=t[1]||"Unknown";let i;const n=r.match(/^\((.)\)$/);if(n){const d=n[1].toUpperCase();if(d==="E")i="east";else if(d==="N")i="north";else if(d==="U")i="up";else throw new Error(`Unknown axis abbreviation: ${d}`)}else i=t[2]?t[2].toLowerCase():"unknown";const s=t.find(d=>Array.isArray(d)&&d[0]==="ORDER"),a=s?parseInt(s[1],10):null,o=t.find(d=>Array.isArray(d)&&(d[0]==="LENGTHUNIT"||d[0]==="ANGLEUNIT"||d[0]==="SCALEUNIT")),u=this.convertUnit(o);return{name:r,direction:i,unit:u,order:a}}static extractAxes(t){return t.filter(r=>Array.isArray(r)&&r[0]==="AXIS").map(r=>this.convertAxis(r)).sort((r,i)=>(r.order||0)-(i.order||0))}static convert(t,r={}){switch(t[0]){case"PROJCRS":r.type="ProjectedCRS",r.name=t[1],r.base_crs=t.find(y=>Array.isArray(y)&&y[0]==="BASEGEOGCRS")?this.convert(t.find(y=>Array.isArray(y)&&y[0]==="BASEGEOGCRS")):null,r.conversion=t.find(y=>Array.isArray(y)&&y[0]==="CONVERSION")?this.convert(t.find(y=>Array.isArray(y)&&y[0]==="CONVERSION")):null;const i=t.find(y=>Array.isArray(y)&&y[0]==="CS");i&&(r.coordinate_system={type:i[1],axis:this.extractAxes(t)});const n=t.find(y=>Array.isArray(y)&&y[0]==="LENGTHUNIT");if(n){const y=this.convertUnit(n);r.coordinate_system.unit=y}r.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":r.type="GeographicCRS",r.name=t[1];const s=t.find(y=>Array.isArray(y)&&(y[0]==="DATUM"||y[0]==="ENSEMBLE"));if(s){const y=this.convert(s);s[0]==="ENSEMBLE"?r.datum_ensemble=y:r.datum=y;const _=t.find(P=>Array.isArray(P)&&P[0]==="PRIMEM");_&&_[1]!=="Greenwich"&&(y.prime_meridian={name:_[1],longitude:parseFloat(_[2])})}r.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},r.id=this.getId(t);break;case"DATUM":r.type="GeodeticReferenceFrame",r.name=t[1],r.ellipsoid=t.find(y=>Array.isArray(y)&&y[0]==="ELLIPSOID")?this.convert(t.find(y=>Array.isArray(y)&&y[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":r.type="DatumEnsemble",r.name=t[1],r.members=t.filter(y=>Array.isArray(y)&&y[0]==="MEMBER").map(y=>({type:"DatumEnsembleMember",name:y[1],id:this.getId(y)}));const a=t.find(y=>Array.isArray(y)&&y[0]==="ENSEMBLEACCURACY");a&&(r.accuracy=parseFloat(a[1]));const o=t.find(y=>Array.isArray(y)&&y[0]==="ELLIPSOID");o&&(r.ellipsoid=this.convert(o)),r.id=this.getId(t);break;case"ELLIPSOID":r.type="Ellipsoid",r.name=t[1],r.semi_major_axis=parseFloat(t[2]),r.inverse_flattening=parseFloat(t[3]),t.find(y=>Array.isArray(y)&&y[0]==="LENGTHUNIT")&&this.convert(t.find(y=>Array.isArray(y)&&y[0]==="LENGTHUNIT"),r);break;case"CONVERSION":r.type="Conversion",r.name=t[1],r.method=t.find(y=>Array.isArray(y)&&y[0]==="METHOD")?this.convert(t.find(y=>Array.isArray(y)&&y[0]==="METHOD")):null,r.parameters=t.filter(y=>Array.isArray(y)&&y[0]==="PARAMETER").map(y=>this.convert(y));break;case"METHOD":r.type="Method",r.name=t[1],r.id=this.getId(t);break;case"PARAMETER":r.type="Parameter",r.name=t[1],r.value=parseFloat(t[2]),r.unit=this.convertUnit(t.find(y=>Array.isArray(y)&&(y[0]==="LENGTHUNIT"||y[0]==="ANGLEUNIT"||y[0]==="SCALEUNIT"))),r.id=this.getId(t);break;case"BOUNDCRS":r.type="BoundCRS";const u=t.find(y=>Array.isArray(y)&&y[0]==="SOURCECRS");if(u){const y=u.find(_=>Array.isArray(_));r.source_crs=y?this.convert(y):null}const d=t.find(y=>Array.isArray(y)&&y[0]==="TARGETCRS");if(d){const y=d.find(_=>Array.isArray(_));r.target_crs=y?this.convert(y):null}const p=t.find(y=>Array.isArray(y)&&y[0]==="ABRIDGEDTRANSFORMATION");p?r.transformation=this.convert(p):r.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(r.type="Transformation",r.name=t[1],r.method=t.find(y=>Array.isArray(y)&&y[0]==="METHOD")?this.convert(t.find(y=>Array.isArray(y)&&y[0]==="METHOD")):null,r.parameters=t.filter(y=>Array.isArray(y)&&(y[0]==="PARAMETER"||y[0]==="PARAMETERFILE")).map(y=>{if(y[0]==="PARAMETER")return this.convert(y);if(y[0]==="PARAMETERFILE")return{name:y[1],value:y[2],id:{authority:"EPSG",code:8656}}}),r.parameters.length===7){const y=r.parameters[6];y.name==="Scale difference"&&(y.value=Math.round((y.value-1)*1e12)/1e6)}r.id=this.getId(t);break;case"AXIS":r.coordinate_system||(r.coordinate_system={type:"unspecified",axis:[]}),r.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":const v=this.convertUnit(t,"LinearUnit");r.coordinate_system&&r.coordinate_system.axis&&r.coordinate_system.axis.forEach(y=>{y.unit||(y.unit=v)}),v.conversion_factor&&v.conversion_factor!==1&&r.semi_major_axis&&(r.semi_major_axis={value:r.semi_major_axis,unit:v});break;default:r.keyword=t[0];break}return r}}class OCe extends cG{static convert(t,r={}){return super.convert(t,r),r.coordinate_system&&r.coordinate_system.subtype==="Cartesian"&&delete r.coordinate_system,r.usage&&delete r.usage,r}}class NCe extends cG{static convert(t,r={}){super.convert(t,r);const i=t.find(s=>Array.isArray(s)&&s[0]==="CS");i&&(r.coordinate_system={subtype:i[1],axis:this.extractAxes(t)});const n=t.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(n){const s=n.find(u=>Array.isArray(u)&&u[0]==="SCOPE"),a=n.find(u=>Array.isArray(u)&&u[0]==="AREA"),o=n.find(u=>Array.isArray(u)&&u[0]==="BBOX");r.usage={},s&&(r.usage.scope=s[1]),a&&(r.usage.area=a[1]),o&&(r.usage.bbox=o.slice(1))}return r}}function BCe(e){return e.find(t=>Array.isArray(t)&&t[0]==="USAGE")?"2019":(e.find(t=>Array.isArray(t)&&t[0]==="CS")||e[0]==="BOUNDCRS"||e[0]==="PROJCRS"||e[0]==="GEOGCRS","2015")}function zCe(e){return(BCe(e)==="2019"?NCe:OCe).convert(e)}function GCe(e){const t=e.toUpperCase();return t.includes("PROJCRS")||t.includes("GEOGCRS")||t.includes("BOUNDCRS")||t.includes("VERTCRS")||t.includes("LENGTHUNIT")||t.includes("ANGLEUNIT")||t.includes("SCALEUNIT")?"WKT2":(t.includes("PROJCS")||t.includes("GEOGCS")||t.includes("LOCAL_CS")||t.includes("VERT_CS")||t.includes("UNIT"),"WKT1")}var av=1,uG=2,hG=3,$C=4,dG=5,NP=-1,VCe=/\s/,HCe=/[A-Za-z]/,UCe=/[A-Za-z84_]/,e_=/[,\]]/,fG=/[\d\.E\-\+]/;function Ic(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=av}Ic.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==$C)for(;VCe.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case av:return this.neutral(e);case uG:return this.keyword(e);case $C:return this.quoted(e);case dG:return this.afterquote(e);case hG:return this.number(e);case NP:return}};Ic.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=$C;return}if(e_.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Ic.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=av;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=av,this.currentObject=this.stack.pop(),this.currentObject||(this.state=NP);return}};Ic.prototype.number=function(e){if(fG.test(e)){this.word+=e;return}if(e_.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Ic.prototype.quoted=function(e){if(e==='"'){this.state=dG;return}this.word+=e};Ic.prototype.keyword=function(e){if(UCe.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=av;return}if(e_.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Ic.prototype.neutral=function(e){if(HCe.test(e)){this.word=e,this.state=uG;return}if(e==='"'){this.word="",this.state=$C;return}if(fG.test(e)){this.word=e,this.state=hG;return}if(e_.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Ic.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===NP)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function WCe(e){var t=new Ic(e);return t.output()}function KS(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var i=t?{}:e,n=r.reduce(function(s,a){return $f(a,s),s},i);t&&(e[t]=n)}function $f(e,t){if(!Array.isArray(e)){t[e]=!0;return}var r=e.shift();if(r==="PARAMETER"&&(r=e.shift()),e.length===1){if(Array.isArray(e[0])){t[r]={},$f(e[0],t[r]);return}t[r]=e[0];return}if(!e.length){t[r]=!0;return}if(r==="TOWGS84"){t[r]=e;return}if(r==="AXIS"){r in t||(t[r]=[]),t[r].push(e);return}Array.isArray(r)||(t[r]={});var i;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[r]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&$f(e[2],t[r]);return;case"SPHEROID":case"ELLIPSOID":t[r]={name:e[0],a:e[1],rf:e[2]},e.length===4&&$f(e[3],t[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],KS(t,r,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],KS(t,r,e),t[r].type=r;return;default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return $f(e,t[r]);return KS(t,r,e)}}var jCe=.017453292519943295;function La(e){return e*jCe}function pG(e){const t=(e.projName||"").toLowerCase().replace(/_/g," ");!e.long0&&e.longc&&(t==="albers conic equal area"||t==="lambert azimuthal equal area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(t==="stereographic south pole"||t==="polar stereographic (variant b)")?(e.lat0=La(e.lat1>0?90:-90),e.lat_ts=e.lat1,delete e.lat1):!e.lat_ts&&e.lat0&&(t==="polar stereographic"||t==="polar stereographic (variant a)")&&(e.lat_ts=e.lat0,e.lat0=La(e.lat0>0?90:-90),delete e.lat1)}function Jk(e){let t={units:null,to_meter:void 0};return typeof e=="string"?(t.units=e.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.units==="meter"&&(t.to_meter=1)):e&&e.name&&(t.units=e.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.to_meter=e.conversion_factor),t}function eL(e){return typeof e=="object"?e.value*e.unit.conversion_factor:e}function tL(e,t){e.ellipsoid.radius?(t.a=e.ellipsoid.radius,t.rf=0):(t.a=eL(e.ellipsoid.semi_major_axis),e.ellipsoid.inverse_flattening!==void 0?t.rf=e.ellipsoid.inverse_flattening:e.ellipsoid.semi_major_axis!==void 0&&e.ellipsoid.semi_minor_axis!==void 0&&(t.rf=t.a/(t.a-eL(e.ellipsoid.semi_minor_axis))))}function qC(e,t={}){return!e||typeof e!="object"?e:e.type==="BoundCRS"?(qC(e.source_crs,t),e.transformation&&(e.transformation.method&&e.transformation.method.name==="NTv2"?t.nadgrids=e.transformation.parameters[0].value:t.datum_params=e.transformation.parameters.map(r=>r.value)),t):(Object.keys(e).forEach(r=>{const i=e[r];if(i!==null)switch(r){case"name":if(t.srsCode)break;t.name=i,t.srsCode=i;break;case"type":i==="GeographicCRS"?t.projName="longlat":i==="ProjectedCRS"&&e.conversion&&e.conversion.method&&(t.projName=e.conversion.method.name);break;case"datum":case"datum_ensemble":i.ellipsoid&&(t.ellps=i.ellipsoid.name,tL(i,t)),i.prime_meridian&&(t.from_greenwich=i.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":t.ellps=i.name,tL(i,t);break;case"prime_meridian":t.long0=(i.longitude||0)*Math.PI/180;break;case"coordinate_system":if(i.axis){if(t.axis=i.axis.map(n=>{const s=n.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",i.unit){const{units:n,to_meter:s}=Jk(i.unit);t.units=n,t.to_meter=s}else if(i.axis[0]&&i.axis[0].unit){const{units:n,to_meter:s}=Jk(i.axis[0].unit);t.units=n,t.to_meter=s}}break;case"id":i.authority&&i.code&&(t.title=i.authority+":"+i.code);break;case"conversion":i.method&&i.method.name&&(t.projName=i.method.name),i.parameters&&i.parameters.forEach(n=>{const s=n.name.toLowerCase().replace(/\s+/g,"_"),a=n.value;n.unit&&n.unit.conversion_factor?t[s]=a*n.unit.conversion_factor:n.unit==="degree"?t[s]=a*Math.PI/180:t[s]=a});break;case"unit":i.name&&(t.units=i.name.toLowerCase(),t.units==="metre"&&(t.units="meter")),i.conversion_factor&&(t.to_meter=i.conversion_factor);break;case"base_crs":qC(i,t),t.datumCode=i.id?i.id.authority+"_"+i.id.code:i.name;break}}),t.latitude_of_false_origin!==void 0&&(t.lat0=t.latitude_of_false_origin),t.longitude_of_false_origin!==void 0&&(t.long0=t.longitude_of_false_origin),t.latitude_of_standard_parallel!==void 0&&(t.lat0=t.latitude_of_standard_parallel,t.lat1=t.latitude_of_standard_parallel),t.latitude_of_1st_standard_parallel!==void 0&&(t.lat1=t.latitude_of_1st_standard_parallel),t.latitude_of_2nd_standard_parallel!==void 0&&(t.lat2=t.latitude_of_2nd_standard_parallel),t.latitude_of_projection_centre!==void 0&&(t.lat0=t.latitude_of_projection_centre),t.longitude_of_projection_centre!==void 0&&(t.longc=t.longitude_of_projection_centre),t.easting_at_false_origin!==void 0&&(t.x0=t.easting_at_false_origin),t.northing_at_false_origin!==void 0&&(t.y0=t.northing_at_false_origin),t.latitude_of_natural_origin!==void 0&&(t.lat0=t.latitude_of_natural_origin),t.longitude_of_natural_origin!==void 0&&(t.long0=t.longitude_of_natural_origin),t.longitude_of_origin!==void 0&&(t.long0=t.longitude_of_origin),t.false_easting!==void 0&&(t.x0=t.false_easting),t.easting_at_projection_centre&&(t.x0=t.easting_at_projection_centre),t.false_northing!==void 0&&(t.y0=t.false_northing),t.northing_at_projection_centre&&(t.y0=t.northing_at_projection_centre),t.standard_parallel_1!==void 0&&(t.lat1=t.standard_parallel_1),t.standard_parallel_2!==void 0&&(t.lat2=t.standard_parallel_2),t.scale_factor_at_natural_origin!==void 0&&(t.k0=t.scale_factor_at_natural_origin),t.scale_factor_at_projection_centre!==void 0&&(t.k0=t.scale_factor_at_projection_centre),t.scale_factor_on_pseudo_standard_parallel!==void 0&&(t.k0=t.scale_factor_on_pseudo_standard_parallel),t.azimuth!==void 0&&(t.alpha=t.azimuth),t.azimuth_at_projection_centre!==void 0&&(t.alpha=t.azimuth_at_projection_centre),t.angle_from_rectified_to_skew_grid&&(t.rectified_grid_angle=t.angle_from_rectified_to_skew_grid),pG(t),t)}var $Ce=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function qCe(e,t){var r=t[0],i=t[1];!(r in e)&&i in e&&(e[r]=e[i],t.length===3&&(e[r]=t[2](e[r])))}function gG(e){for(var t=Object.keys(e),r=0,i=t.length;r<i;++r){var n=t[r];$Ce.indexOf(n)!==-1&&KCe(e[n]),typeof e[n]=="object"&&gG(e[n])}}function KCe(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var r="",i=0,n=e.AXIS.length;i<n;++i){var s=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?r+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?r+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?r+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(e.axis=r)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var a=e.GEOGCS;e.type==="GEOGCS"&&(a=e),a&&(a.DATUM?e.datumCode=a.DATUM.name.toLowerCase():e.datumCode=a.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(e.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=a.DATUM.SPHEROID.a,e.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(e.datum_params=a.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),e.rectified_grid_angle&&(e.rectified_grid_angle=La(e.rectified_grid_angle));function o(p){var v=e.to_meter||1;return p*v}var u=function(p){return qCe(e,p)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",La],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",La],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",La],["lat0","latitude_of_origin",La],["lat0","standard_parallel_1",La],["lat1","standard_parallel_1",La],["lat2","standard_parallel_2",La],["azimuth","Azimuth"],["alpha","azimuth",La],["srsCode","name"]];d.forEach(u),pG(e)}function W2(e){if(typeof e=="object")return qC(e);const t=GCe(e);var r=WCe(e);if(t==="WKT2"){const s=zCe(r);return qC(s)}var i=r[0],n={};return $f(r,n),gG(n),n[i]}function js(e){var t=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?js[e]=U2(arguments[1]):js[e]=W2(arguments[1]):js[e]=r}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(i){return Array.isArray(i)?js.apply(t,i):js(i)});if(typeof e=="string"){if(e in js)return js[e]}else"EPSG"in e?js["EPSG:"+e.EPSG]=e:"ESRI"in e?js["ESRI:"+e.ESRI]=e:"IAU2000"in e?js["IAU2000:"+e.IAU2000]=e:console.log(e);return}}MCe(js);function ZCe(e){return typeof e=="string"}function XCe(e){return e in js}function YCe(e){return e.indexOf("+")!==0&&e.indexOf("[")!==-1||typeof e=="object"&&!("srsCode"in e)}var QCe=["3857","900913","3785","102113"];function JCe(e){var t=Gu(e,"authority");if(t){var r=Gu(t,"epsg");return r&&QCe.indexOf(r)>-1}}function e1e(e){var t=Gu(e,"extension");if(t)return Gu(t,"proj4")}function t1e(e){return e[0]==="+"}function r1e(e){if(ZCe(e)){if(XCe(e))return js[e];if(YCe(e)){var t=W2(e);if(JCe(t))return js["EPSG:3857"];var r=e1e(t);return r?U2(r):t}if(t1e(e))return U2(e)}else return"projName"in e?e:W2(e)}function rL(e,t){e=e||{};var r,i;if(!t)return e;for(i in t)r=t[i],r!==void 0&&(e[i]=r);return e}function Ll(e,t,r){var i=e*t;return r/Math.sqrt(1-i*i)}function Lv(e){return e<0?-1:1}function tr(e){return Math.abs(e)<=yn?e:e-Lv(e)*ov}function $a(e,t,r){var i=e*r,n=.5*e;return i=Math.pow((1-i)/(1+i),n),Math.tan(.5*(Mt-t))/i}function lv(e,t){for(var r=.5*e,i,n,s=Mt-2*Math.atan(t),a=0;a<=15;a++)if(i=e*Math.sin(s),n=Mt-2*Math.atan(t*Math.pow((1-i)/(1+i),r))-s,s+=n,Math.abs(n)<=1e-10)return s;return-9999}function i1e(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ll(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function n1e(e){var t=e.x,r=e.y;if(r*Sl>90&&r*Sl<-90&&t*Sl>180&&t*Sl<-180)return null;var i,n;if(Math.abs(Math.abs(r)-Mt)<=Zt)return null;if(this.sphere)i=this.x0+this.a*this.k0*tr(t-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(Qr+.5*r));else{var s=Math.sin(r),a=$a(this.e,r,s);i=this.x0+this.a*this.k0*tr(t-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return e.x=i,e.y=n,e}function s1e(e){var t=e.x-this.x0,r=e.y-this.y0,i,n;if(this.sphere)n=Mt-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(n=lv(this.e,s),n===-9999)return null}return i=tr(this.long0+t/(this.a*this.k0)),e.x=i,e.y=n,e}var o1e=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const a1e={init:i1e,forward:n1e,inverse:s1e,names:o1e};function l1e(){}function iL(e){return e}var c1e=["longlat","identity"];const u1e={init:l1e,forward:iL,inverse:iL,names:c1e};var h1e=[a1e,u1e],Sh={},qf=[];function mG(e,t){var r=qf.length;return e.names?(qf[r]=e,e.names.forEach(function(i){Sh[i.toLowerCase()]=r}),this):(console.log(t),!0)}function vG(e){return e.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function d1e(e){if(!e)return!1;var t=e.toLowerCase();if(typeof Sh[t]<"u"&&qf[Sh[t]]||(t=vG(t),t in Sh&&qf[Sh[t]]))return qf[Sh[t]]}function f1e(){h1e.forEach(mG)}const p1e={start:f1e,add:mG,get:d1e};var yG={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const g1e=yG.WGS84;function m1e(e,t,r,i){var n=e*e,s=t*t,a=(n-s)/n,o=0;i?(e*=1-a*(ICe+a*(DCe+a*kCe)),n=e*e,a=0):o=Math.sqrt(a);var u=(n-s)/s;return{es:a,e:o,ep2:u}}function v1e(e,t,r,i,n){if(!e){var s=Gu(yG,i);s||(s=g1e),e=s.a,t=s.b,r=s.rf}return r&&!t&&(t=(1-1/r)*e),(r===0||Math.abs(e-t)<Zt)&&(n=!0,t=e),{a:e,b:t,rf:r,sphere:n}}var Sx={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var y1e in Sx){var ZS=Sx[y1e];ZS.datumName&&(Sx[ZS.datumName]=ZS)}function w1e(e,t,r,i,n,s,a){var o={};return e===void 0||e==="none"?o.datum_type=H2:o.datum_type=FCe,t&&(o.datum_params=t.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=ud),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=hd,o.datum_params[3]*=u0,o.datum_params[4]*=u0,o.datum_params[5]*=u0,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=_p,o.grids=a),o.a=r,o.b=i,o.es=n,o.ep2=s,o}var BP={};function x1e(e,t,r){return t instanceof ArrayBuffer?C1e(e,t,r):{ready:_1e(e,t)}}function C1e(e,t,r){var i=!0;r!==void 0&&r.includeErrorFields===!1&&(i=!1);var n=new DataView(t),s=E1e(n),a=R1e(n,s),o=T1e(n,a,s,i),u={header:a,subgrids:o};return BP[e]=u,u}async function _1e(e,t){for(var r=[],i=await t.getImageCount(),n=i-1;n>=0;n--){var s=await t.getImage(n),a=await s.readRasters(),o=a,u=[s.getWidth(),s.getHeight()],d=s.getBoundingBox().map(nL),p=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(nL),v=d[0]+(u[0]-1)*p[0],y=d[3]-(u[1]-1)*p[1],_=o[0],P=o[1],R=[];for(let k=u[1]-1;k>=0;k--)for(let N=u[0]-1;N>=0;N--){var M=k*u[0]+N;R.push([-mu(P[M]),mu(_[M])])}r.push({del:p,lim:u,ll:[-v,y],cvs:R})}var F={header:{nSubgrids:i},subgrids:r};return BP[e]=F,F}function b1e(e){if(e===void 0)return null;var t=e.split(",");return t.map(S1e)}function S1e(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:BP[e]||null,isNull:!1}}function nL(e){return e*Math.PI/180}function mu(e){return e/3600*Math.PI/180}function E1e(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function R1e(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:j2(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function j2(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,r)))}function T1e(e,t,r,i){for(var n=176,s=[],a=0;a<t.nSubgrids;a++){var o=M1e(e,n,r),u=F1e(e,n,o,r,i),d=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),p=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[mu(o.lowerLongitude),mu(o.lowerLatitude)],del:[mu(o.longitudeInterval),mu(o.latitudeInterval)],lim:[d,p],count:o.gridNodeCount,cvs:P1e(u)});var v=16;i===!1&&(v=8),n+=176+o.gridNodeCount*v}return s}function P1e(e){return e.map(function(t){return[mu(t.longitudeShift),mu(t.latitudeShift)]})}function M1e(e,t,r){return{name:j2(e,t+8,t+16).trim(),parent:j2(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,r),upperLatitude:e.getFloat64(t+88,r),lowerLongitude:e.getFloat64(t+104,r),upperLongitude:e.getFloat64(t+120,r),latitudeInterval:e.getFloat64(t+136,r),longitudeInterval:e.getFloat64(t+152,r),gridNodeCount:e.getInt32(t+168,r)}}function F1e(e,t,r,i,n){var s=t+176,a=16;n===!1&&(a=8);for(var o=[],u=0;u<r.gridNodeCount;u++){var d={latitudeShift:e.getFloat32(s+u*a,i),longitudeShift:e.getFloat32(s+u*a+4,i)};n!==!1&&(d.latitudeAccuracy=e.getFloat32(s+u*a+8,i),d.longitudeAccuracy=e.getFloat32(s+u*a+12,i)),o.push(d)}return o}function qa(e,t){if(!(this instanceof qa))return new qa(e);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,t=t||function(d){if(d)throw d};var r=r1e(e);if(typeof r!="object"){t("Could not parse to valid json: "+e);return}var i=qa.projections.get(r.projName);if(!i){t("Could not get projection name from: "+e);return}if(r.datumCode&&r.datumCode!=="none"){var n=Gu(Sx,r.datumCode);n&&(r.datum_params=r.datum_params||(n.towgs84?n.towgs84.split(","):null),r.ellps=n.ellipse,r.datumName=n.datumName?n.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var s=v1e(r.a,r.b,r.rf,r.ellps,r.sphere),a=m1e(s.a,s.b,s.rf,r.R_A),o=b1e(r.nadgrids),u=r.datum||w1e(r.datumCode,r.datum_params,s.a,s.b,a.es,a.ep2,o);rL(this,r),rL(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=u,"init"in this&&typeof this.init=="function"&&this.init(),t(null,this)}qa.projections=p1e;qa.projections.start();function A1e(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===ud?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===hd?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function wG(e,t,r){var i=e.x,n=e.y,s=e.z?e.z:0,a,o,u,d;if(n<-Mt&&n>-1.001*Mt)n=-Mt;else if(n>Mt&&n<1.001*Mt)n=Mt;else{if(n<-Mt)return{x:-1/0,y:-1/0,z:e.z};if(n>Mt)return{x:1/0,y:1/0,z:e.z}}return i>Math.PI&&(i-=2*Math.PI),o=Math.sin(n),d=Math.cos(n),u=o*o,a=r/Math.sqrt(1-t*u),{x:(a+s)*d*Math.cos(i),y:(a+s)*d*Math.sin(i),z:(a*(1-t)+s)*o}}function xG(e,t,r,i){var n=1e-12,s=n*n,a=30,o,u,d,p,v,y,_,P,R,M,F,k,N,G=e.x,j=e.y,ee=e.z?e.z:0,q,oe,ue;if(o=Math.sqrt(G*G+j*j),u=Math.sqrt(G*G+j*j+ee*ee),o/r<n){if(q=0,u/r<n)return oe=Mt,ue=-i,{x:e.x,y:e.y,z:e.z}}else q=Math.atan2(j,G);d=ee/u,p=o/u,v=1/Math.sqrt(1-t*(2-t)*p*p),P=p*(1-t)*v,R=d*v,N=0;do N++,_=r/Math.sqrt(1-t*R*R),ue=o*P+ee*R-_*(1-t*R*R),y=t*_/(_+ue),v=1/Math.sqrt(1-y*(2-y)*p*p),M=p*(1-y)*v,F=d*v,k=F*P-M*R,P=M,R=F;while(k*k>s&&N<a);return oe=Math.atan(F/Math.abs(M)),{x:q,y:oe,z:ue}}function I1e(e,t,r){if(t===ud)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===hd){var i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],u=r[5],d=r[6];return{x:d*(e.x-u*e.y+o*e.z)+i,y:d*(u*e.x+e.y-a*e.z)+n,z:d*(-o*e.x+a*e.y+e.z)+s}}}function D1e(e,t,r){if(t===ud)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===hd){var i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],u=r[5],d=r[6],p=(e.x-i)/d,v=(e.y-n)/d,y=(e.z-s)/d;return{x:p+u*v-o*y,y:-u*p+v+a*y,z:o*p-a*v+y}}}function Ow(e){return e===ud||e===hd}function k1e(e,t,r){if(A1e(e,t)||e.datum_type===H2||t.datum_type===H2)return r;var i=e.a,n=e.es;if(e.datum_type===_p){var s=sL(e,!1,r);if(s!==0)return;i=Xk,n=Yk}var a=t.a,o=t.b,u=t.es;if(t.datum_type===_p&&(a=Xk,o=ACe,u=Yk),n===u&&i===a&&!Ow(e.datum_type)&&!Ow(t.datum_type))return r;if(r=wG(r,n,i),Ow(e.datum_type)&&(r=I1e(r,e.datum_type,e.datum_params)),Ow(t.datum_type)&&(r=D1e(r,t.datum_type,t.datum_params)),r=xG(r,u,a,o),t.datum_type===_p){var d=sL(t,!0,r);if(d!==0)return}return r}function sL(e,t,r){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-r.x,y:r.y},n={x:Number.NaN,y:Number.NaN},s=[];e:for(var a=0;a<e.grids.length;a++){var o=e.grids[a];if(s.push(o.name),o.isNull){n=i;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var u=o.grid.subgrids,d=0,p=u.length;d<p;d++){var v=u[d],y=(Math.abs(v.del[1])+Math.abs(v.del[0]))/1e4,_=v.ll[0]-y,P=v.ll[1]-y,R=v.ll[0]+(v.lim[0]-1)*v.del[0]+y,M=v.ll[1]+(v.lim[1]-1)*v.del[1]+y;if(!(P>i.y||_>i.x||M<i.y||R<i.x)&&(n=L1e(i,t,v),!isNaN(n.x)))break e}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Sl+" "+i.y*Sl+" tried: '"+s+"'"),-1):(r.x=-n.x,r.y=n.y,0)}function L1e(e,t,r){var i={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return i;var n={x:e.x,y:e.y};n.x-=r.ll[0],n.y-=r.ll[1],n.x=tr(n.x-Math.PI)+Math.PI;var s=oL(n,r);if(t){if(isNaN(s.x))return i;s.x=n.x-s.x,s.y=n.y-s.y;var a=9,o=1e-12,u,d;do{if(d=oL(s,r),isNaN(d.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:n.x-(d.x+s.x),y:n.y-(d.y+s.y)},s.x+=u.x,s.y+=u.y}while(a--&&Math.abs(u.x)>o&&Math.abs(u.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=tr(s.x+r.ll[0]),i.y=s.y+r.ll[1]}else isNaN(s.x)||(i.x=e.x+s.x,i.y=e.y+s.y);return i}function oL(e,t){var r={x:e.x/t.del[0],y:e.y/t.del[1]},i={x:Math.floor(r.x),y:Math.floor(r.y)},n={x:r.x-1*i.x,y:r.y-1*i.y},s={x:Number.NaN,y:Number.NaN},a;if(i.x<0||i.x>=t.lim[0]||i.y<0||i.y>=t.lim[1])return s;a=i.y*t.lim[0]+i.x;var o={x:t.cvs[a][0],y:t.cvs[a][1]};a++;var u={x:t.cvs[a][0],y:t.cvs[a][1]};a+=t.lim[0];var d={x:t.cvs[a][0],y:t.cvs[a][1]};a--;var p={x:t.cvs[a][0],y:t.cvs[a][1]},v=n.x*n.y,y=n.x*(1-n.y),_=(1-n.x)*(1-n.y),P=(1-n.x)*n.y;return s.x=_*o.x+y*u.x+P*p.x+v*d.x,s.y=_*o.y+y*u.y+P*p.y+v*d.y,s}function aL(e,t,r){var i=r.x,n=r.y,s=r.z||0,a,o,u,d={};for(u=0;u<3;u++)if(!(t&&u===2&&r.z===void 0))switch(u===0?(a=i,"ew".indexOf(e.axis[u])!==-1?o="x":o="y"):u===1?(a=n,"ns".indexOf(e.axis[u])!==-1?o="y":o="x"):(a=s,o="z"),e.axis[u]){case"e":d[o]=a;break;case"w":d[o]=-a;break;case"n":d[o]=a;break;case"s":d[o]=-a;break;case"u":r[o]!==void 0&&(d.z=a);break;case"d":r[o]!==void 0&&(d.z=-a);break;default:return null}return d}function CG(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function O1e(e){lL(e.x),lL(e.y)}function lL(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function N1e(e,t){return(e.datum.datum_type===ud||e.datum.datum_type===hd||e.datum.datum_type===_p)&&t.datumCode!=="WGS84"||(t.datum.datum_type===ud||t.datum.datum_type===hd||t.datum.datum_type===_p)&&e.datumCode!=="WGS84"}function KC(e,t,r,i){var n;Array.isArray(r)?r=CG(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var s=r.z!==void 0;if(O1e(r),e.datum&&t.datum&&N1e(e,t)&&(n=new qa("WGS84"),r=KC(e,n,r,i),e=n),i&&e.axis!=="enu"&&(r=aL(e,!1,r)),e.projName==="longlat")r={x:r.x*ts,y:r.y*ts,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),r=e.inverse(r),!r)return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=k1e(e.datum,t.datum,r),!!r)return r=r,t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),t.projName==="longlat"?r={x:r.x*Sl,y:r.y*Sl,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),i&&t.axis!=="enu"?aL(t,!0,r):(r&&!s&&delete r.z,r)}var cL=qa("WGS84");function XS(e,t,r,i){var n,s,a;return Array.isArray(r)?(n=KC(e,t,r,i)||{x:NaN,y:NaN},r.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(r.slice(3)):[n.x,n.y,r[2]].concat(r.slice(3)):[n.x,n.y].concat(r.slice(2)):[n.x,n.y]):(s=KC(e,t,r,i),a=Object.keys(r),a.length===2||a.forEach(function(o){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=r[o]}),s)}function Nw(e){return e instanceof qa?e:typeof e=="object"&&"oProj"in e?e.oProj:qa(e)}function B1e(e,t,r){var i,n,s=!1,a;return typeof t>"u"?(n=Nw(e),i=cL,s=!0):(typeof t.x<"u"||Array.isArray(t))&&(r=t,n=Nw(e),i=cL,s=!0),i||(i=Nw(e)),n||(n=Nw(t)),r?XS(i,n,r):(a={forward:function(o,u){return XS(i,n,o,u)},inverse:function(o,u){return XS(n,i,o,u)}},s&&(a.oProj=n),a)}var uL=6,_G="AJSAJS",bG="AFAFAF",Kf=65,ho=73,aa=79,Bm=86,zm=90;const z1e={forward:SG,inverse:G1e,toPoint:EG};function SG(e,t){return t=t||5,U1e(V1e({lat:e[1],lon:e[0]}),t)}function G1e(e){var t=zP(TG(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function EG(e){var t=zP(TG(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function YS(e){return e*(Math.PI/180)}function hL(e){return 180*(e/Math.PI)}function V1e(e){var t=e.lat,r=e.lon,i=6378137,n=.00669438,s=.9996,a,o,u,d,p,v,y,_=YS(t),P=YS(r),R,M;M=Math.floor((r+180)/6)+1,r===180&&(M=60),t>=56&&t<64&&r>=3&&r<12&&(M=32),t>=72&&t<84&&(r>=0&&r<9?M=31:r>=9&&r<21?M=33:r>=21&&r<33?M=35:r>=33&&r<42&&(M=37)),a=(M-1)*6-180+3,R=YS(a),o=n/(1-n),u=i/Math.sqrt(1-n*Math.sin(_)*Math.sin(_)),d=Math.tan(_)*Math.tan(_),p=o*Math.cos(_)*Math.cos(_),v=Math.cos(_)*(P-R),y=i*((1-n/4-3*n*n/64-5*n*n*n/256)*_-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*_)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*_)-35*n*n*n/3072*Math.sin(6*_));var F=s*u*(v+(1-d+p)*v*v*v/6+(5-18*d+d*d+72*p-58*o)*v*v*v*v*v/120)+5e5,k=s*(y+u*Math.tan(_)*(v*v/2+(5-d+9*p+4*p*p)*v*v*v*v/24+(61-58*d+d*d+600*p-330*o)*v*v*v*v*v*v/720));return t<0&&(k+=1e7),{northing:Math.round(k),easting:Math.round(F),zoneNumber:M,zoneLetter:H1e(t)}}function zP(e){var t=e.northing,r=e.easting,i=e.zoneLetter,n=e.zoneNumber;if(n<0||n>60)return null;var s=.9996,a=6378137,o=.00669438,u,d=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),p,v,y,_,P,R,M,F,k,N=r-5e5,G=t;i<"N"&&(G-=1e7),M=(n-1)*6-180+3,u=o/(1-o),R=G/s,F=R/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),k=F+(3*d/2-27*d*d*d/32)*Math.sin(2*F)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*F)+151*d*d*d/96*Math.sin(6*F),p=a/Math.sqrt(1-o*Math.sin(k)*Math.sin(k)),v=Math.tan(k)*Math.tan(k),y=u*Math.cos(k)*Math.cos(k),_=a*(1-o)/Math.pow(1-o*Math.sin(k)*Math.sin(k),1.5),P=N/(p*s);var j=k-p*Math.tan(k)/_*(P*P/2-(5+3*v+10*y-4*y*y-9*u)*P*P*P*P/24+(61+90*v+298*y+45*v*v-252*u-3*y*y)*P*P*P*P*P*P/720);j=hL(j);var ee=(P-(1+2*v+y)*P*P*P/6+(5-2*y+28*v-3*y*y+8*u+24*v*v)*P*P*P*P*P/120)/Math.cos(k);ee=M+hL(ee);var q;if(e.accuracy){var oe=zP({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});q={top:oe.lat,right:oe.lon,bottom:j,left:ee}}else q={lat:j,lon:ee};return q}function H1e(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function U1e(e,t){var r="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+W1e(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+i.substr(i.length-5,t)}function W1e(e,t,r){var i=RG(r),n=Math.floor(e/1e5),s=Math.floor(t/1e5)%20;return j1e(n,s,i)}function RG(e){var t=e%uL;return t===0&&(t=uL),t}function j1e(e,t,r){var i=r-1,n=_G.charCodeAt(i),s=bG.charCodeAt(i),a=n+e-1,o=s+t,u=!1;a>zm&&(a=a-zm+Kf-1,u=!0),(a===ho||n<ho&&a>ho||(a>ho||n<ho)&&u)&&a++,(a===aa||n<aa&&a>aa||(a>aa||n<aa)&&u)&&(a++,a===ho&&a++),a>zm&&(a=a-zm+Kf-1),o>Bm?(o=o-Bm+Kf-1,u=!0):u=!1,(o===ho||s<ho&&o>ho||(o>ho||s<ho)&&u)&&o++,(o===aa||s<aa&&o>aa||(o>aa||s<aa)&&u)&&(o++,o===ho&&o++),o>Bm&&(o=o-Bm+Kf-1);var d=String.fromCharCode(a)+String.fromCharCode(o);return d}function TG(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,r=null,i="",n,s=0;!/[A-Z]/.test(n=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;i+=n,s++}var a=parseInt(i,10);if(s===0||s+3>t)throw"MGRSPoint bad conversion from: "+e;var o=e.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+e;r=e.substring(s,s+=2);for(var u=RG(a),d=$1e(r.charAt(0),u),p=q1e(r.charAt(1),u);p<K1e(o);)p+=2e6;var v=t-s;if(v%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var y=v/2,_=0,P=0,R,M,F,k,N;return y>0&&(R=1e5/Math.pow(10,y),M=e.substring(s,s+y),_=parseFloat(M)*R,F=e.substring(s+y),P=parseFloat(F)*R),k=_+d,N=P+p,{easting:k,northing:N,zoneLetter:o,zoneNumber:a,accuracy:R}}function $1e(e,t){for(var r=_G.charCodeAt(t-1),i=1e5,n=!1;r!==e.charCodeAt(0);){if(r++,r===ho&&r++,r===aa&&r++,r>zm){if(n)throw"Bad character: "+e;r=Kf,n=!0}i+=1e5}return i}function q1e(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var r=bG.charCodeAt(t-1),i=0,n=!1;r!==e.charCodeAt(0);){if(r++,r===ho&&r++,r===aa&&r++,r>Bm){if(n)throw"Bad character: "+e;r=Kf,n=!0}i+=1e5}return i}function K1e(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Hp(e,t,r){if(!(this instanceof Hp))return new Hp(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var i=e.split(",");this.x=parseFloat(i[0]),this.y=parseFloat(i[1]),this.z=parseFloat(i[2])||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Hp.fromMGRS=function(e){return new Hp(EG(e))};Hp.prototype.toMGRS=function(e){return SG([this.x,this.y],e)};var Z1e=1,X1e=.25,dL=.046875,fL=.01953125,pL=.01068115234375,Y1e=.75,Q1e=.46875,J1e=.013020833333333334,e_e=.007120768229166667,t_e=.3645833333333333,r_e=.005696614583333333,i_e=.3076171875;function GP(e){var t=[];t[0]=Z1e-e*(X1e+e*(dL+e*(fL+e*pL))),t[1]=e*(Y1e-e*(dL+e*(fL+e*pL)));var r=e*e;return t[2]=r*(Q1e-e*(J1e+e*e_e)),r*=e,t[3]=r*(t_e-e*r_e),t[4]=r*e*i_e,t}function sg(e,t,r,i){return r*=t,t*=t,i[0]*e-r*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var n_e=20;function VP(e,t,r){for(var i=1/(1-t),n=e,s=n_e;s;--s){var a=Math.sin(n),o=1-t*a*a;if(o=(sg(n,a,Math.cos(n),r)-e)*(o*Math.sqrt(o))*i,n-=o,Math.abs(o)<Zt)return n}return n}function s_e(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=GP(this.es),this.ml0=sg(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function o_e(e){var t=e.x,r=e.y,i=tr(t-this.long0),n,s,a,o=Math.sin(r),u=Math.cos(r);if(this.es){var p=u*i,v=Math.pow(p,2),y=this.ep2*Math.pow(u,2),_=Math.pow(y,2),P=Math.abs(u)>Zt?Math.tan(r):0,R=Math.pow(P,2),M=Math.pow(R,2);n=1-this.es*Math.pow(o,2),p=p/Math.sqrt(n);var F=sg(r,o,u,this.en);s=this.a*(this.k0*p*(1+v/6*(1-R+y+v/20*(5-18*R+M+14*y-58*R*y+v/42*(61+179*M-M*R-479*R)))))+this.x0,a=this.a*(this.k0*(F-this.ml0+o*i*p/2*(1+v/12*(5-R+9*y+4*_+v/30*(61+M-58*R+270*y-330*R*y+v/56*(1385+543*M-M*R-3111*R))))))+this.y0}else{var d=u*Math.sin(i);if(Math.abs(Math.abs(d)-1)<Zt)return 93;if(s=.5*this.a*this.k0*Math.log((1+d)/(1-d))+this.x0,a=u*Math.cos(i)/Math.sqrt(1-Math.pow(d,2)),d=Math.abs(a),d>=1){if(d-1>Zt)return 93;a=0}else a=Math.acos(a);r<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return e.x=s,e.y=a,e}function a_e(e){var t,r,i,n,s=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+a/this.k0,r=VP(t,this.es,this.en),Math.abs(r)<Mt){var v=Math.sin(r),y=Math.cos(r),_=Math.abs(y)>Zt?Math.tan(r):0,P=this.ep2*Math.pow(y,2),R=Math.pow(P,2),M=Math.pow(_,2),F=Math.pow(M,2);t=1-this.es*Math.pow(v,2);var k=s*Math.sqrt(t)/this.k0,N=Math.pow(k,2);t=t*_,i=r-t*N/(1-this.es)*.5*(1-N/12*(5+3*M-9*P*M+P-4*R-N/30*(61+90*M-252*P*M+45*F+46*P-N/56*(1385+3633*M+4095*F+1574*F*M)))),n=tr(this.long0+k*(1-N/6*(1+2*M+P-N/20*(5+28*M+24*F+8*P*M+6*P-N/42*(61+662*M+1320*F+720*F*M))))/y)}else i=Mt*Lv(a),n=0;else{var o=Math.exp(s/this.k0),u=.5*(o-1/o),d=this.lat0+a/this.k0,p=Math.cos(d);t=Math.sqrt((1-Math.pow(p,2))/(1+Math.pow(u,2))),i=Math.asin(t),a<0&&(i=-i),u===0&&p===0?n=0:n=tr(Math.atan2(u,p)+this.long0)}return e.x=n,e.y=i,e}var l_e=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Ex={init:s_e,forward:o_e,inverse:a_e,names:l_e};function PG(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function po(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),i=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(i,2))}function c_e(e){var t=1+e,r=t-1;return r===0?e:e*Math.log(t)/r}function u_e(e){var t=Math.abs(e);return t=c_e(t*(1+t/(po(1,t)+1))),e<0?-t:t}function HP(e,t){for(var r=2*Math.cos(2*t),i=e.length-1,n=e[i],s=0,a;--i>=0;)a=-s+r*n+e[i],s=n,n=a;return t+a*Math.sin(2*t)}function h_e(e,t){for(var r=2*Math.cos(t),i=e.length-1,n=e[i],s=0,a;--i>=0;)a=-s+r*n+e[i],s=n,n=a;return Math.sin(t)*a}function d_e(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function MG(e,t,r){for(var i=Math.sin(t),n=Math.cos(t),s=PG(r),a=d_e(r),o=2*n*a,u=-2*i*s,d=e.length-1,p=e[d],v=0,y=0,_=0,P,R;--d>=0;)P=y,R=v,y=p,v=_,p=-P+o*y-u*v+e[d],_=-R+u*y+o*v;return o=i*a,u=n*s,[o*p-u*_,o*_+u*p]}function f_e(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ex.init.apply(this),this.forward=Ex.forward,this.inverse=Ex.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),r=r*t,this.cgb[1]=r*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r=r*t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),r=r*t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(-12/5+t*(-24832/14175))),r=r*t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r=r*t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),r=r*t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r=r*t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r=r*t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r=r*t,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var i=HP(this.cbg,this.lat0);this.Zb=-this.Qn*(i+h_e(this.gtu,2*i))}function p_e(e){var t=tr(e.x-this.long0),r=e.y;r=HP(this.cbg,r);var i=Math.sin(r),n=Math.cos(r),s=Math.sin(t),a=Math.cos(t);r=Math.atan2(i,a*n),t=Math.atan2(s*n,po(i,n*a)),t=u_e(Math.tan(t));var o=MG(this.gtu,2*r,2*t);r=r+o[0],t=t+o[1];var u,d;return Math.abs(t)<=2.623395162778?(u=this.a*(this.Qn*t)+this.x0,d=this.a*(this.Qn*r+this.Zb)+this.y0):(u=1/0,d=1/0),e.x=u,e.y=d,e}function g_e(e){var t=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,t=t/this.Qn;var i,n;if(Math.abs(t)<=2.623395162778){var s=MG(this.utg,2*r,2*t);r=r+s[0],t=t+s[1],t=Math.atan(PG(t));var a=Math.sin(r),o=Math.cos(r),u=Math.sin(t),d=Math.cos(t);r=Math.atan2(a*d,po(u,d*o)),t=Math.atan2(u,d*o),i=tr(t+this.long0),n=HP(this.cgb,r)}else i=1/0,n=1/0;return e.x=i,e.y=n,e}var m_e=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Rx={init:f_e,forward:p_e,inverse:g_e,names:m_e};function v_e(e,t){if(e===void 0){if(e=Math.floor((tr(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var y_e="etmerc";function w_e(){var e=v_e(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*ts,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Rx.init.apply(this),this.forward=Rx.forward,this.inverse=Rx.inverse}var x_e=["Universal Transverse Mercator System","utm"];const C_e={init:w_e,names:x_e,dependsOn:y_e};function UP(e,t){return Math.pow((1-e)/(1+e),t)}var __e=20;function b_e(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Qr)/(Math.pow(Math.tan(.5*this.lat0+Qr),this.C)*UP(this.e*e,this.ratexp))}function S_e(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+Qr),this.C)*UP(this.e*Math.sin(r),this.ratexp))-Mt,e.x=this.C*t,e}function E_e(e){for(var t=1e-14,r=e.x/this.C,i=e.y,n=Math.pow(Math.tan(.5*i+Qr)/this.K,1/this.C),s=__e;s>0&&(i=2*Math.atan(n*UP(this.e*Math.sin(e.y),-.5*this.e))-Mt,!(Math.abs(i-e.y)<t));--s)e.y=i;return s?(e.x=r,e.y=i,e):null}const WP={init:b_e,forward:S_e,inverse:E_e};function R_e(){WP.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function T_e(e){var t,r,i,n;return e.x=tr(e.x-this.long0),WP.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),i=Math.cos(e.x),n=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*i),e.x=n*r*Math.sin(e.x),e.y=n*(this.cosc0*t-this.sinc0*r*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function P_e(e){var t,r,i,n,s;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,s=po(e.x,e.y)){var a=2*Math.atan2(s,this.R2);t=Math.sin(a),r=Math.cos(a),n=Math.asin(r*this.sinc0+e.y*t*this.cosc0/s),i=Math.atan2(e.x*t,s*this.cosc0*r-e.y*this.sinc0*t)}else n=this.phic0,i=0;return e.x=i,e.y=n,WP.inverse.apply(this,[e]),e.x=tr(e.x+this.long0),e}var M_e=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const F_e={init:R_e,forward:T_e,inverse:P_e,names:M_e};function jP(e,t,r){return t*=r,Math.tan(.5*(Mt+e))*Math.pow((1-t)/(1+t),.5*r)}function A_e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Zt&&(this.k0=.5*(1+Lv(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Zt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Zt&&Math.abs(Math.cos(this.lat_ts))>Zt&&(this.k0=.5*this.cons*Ll(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/$a(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ll(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(jP(this.lat0,this.sinlat0,this.e))-Mt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function I_e(e){var t=e.x,r=e.y,i=Math.sin(r),n=Math.cos(r),s,a,o,u,d,p,v=tr(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Zt&&Math.abs(r+this.lat0)<=Zt?(e.x=NaN,e.y=NaN,e):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*n*Math.cos(v)),e.x=this.a*s*n*Math.sin(v)+this.x0,e.y=this.a*s*(this.coslat0*i-this.sinlat0*n*Math.cos(v))+this.y0,e):(a=2*Math.atan(jP(r,i,this.e))-Mt,u=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=Zt?(d=$a(this.e,r*this.con,this.con*i),p=2*this.a*this.k0*d/this.cons,e.x=this.x0+p*Math.sin(t-this.long0),e.y=this.y0-this.con*p*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<Zt?(s=2*this.a*this.k0/(1+u*Math.cos(v)),e.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*u*Math.cos(v))),e.y=s*(this.cosX0*o-this.sinX0*u*Math.cos(v))+this.y0),e.x=s*u*Math.sin(v)+this.x0,e))}function D_e(e){e.x-=this.x0,e.y-=this.y0;var t,r,i,n,s,a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return t=this.long0,r=this.lat0,a<=Zt?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(o)*this.sinlat0+e.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<Zt?this.lat0>0?t=tr(this.long0+Math.atan2(e.x,-1*e.y)):t=tr(this.long0+Math.atan2(e.x,e.y)):t=tr(this.long0+Math.atan2(e.x*Math.sin(o),a*this.coslat0*Math.cos(o)-e.y*this.sinlat0*Math.sin(o))),e.x=t,e.y=r,e)}else if(Math.abs(this.coslat0)<=Zt){if(a<=Zt)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,i=a*this.cons/(2*this.a*this.k0),r=this.con*lv(this.e,i),t=this.con*tr(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else n=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=Zt?s=this.X0:(s=Math.asin(Math.cos(n)*this.sinX0+e.y*Math.sin(n)*this.cosX0/a),t=tr(this.long0+Math.atan2(e.x*Math.sin(n),a*this.cosX0*Math.cos(n)-e.y*this.sinX0*Math.sin(n)))),r=-1*lv(this.e,Math.tan(.5*(Mt+s)));return e.x=t,e.y=r,e}var k_e=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const L_e={init:A_e,forward:I_e,inverse:D_e,names:k_e,ssfn_:jP};function O_e(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,i=this.rf,n=1/i,s=2*n-Math.pow(n,2),a=this.e=Math.sqrt(s);this.R=this.k0*r*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+e/2)),d=Math.log((1+a*t)/(1-a*t));this.K=o-this.alpha*u+this.alpha*a/2*d}function N_e(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+r)+this.K,n=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));return e.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,e.x=this.R*a+this.x0,e}function B_e(e){for(var t=e.x-this.x0,r=e.y-this.y0,i=t/this.R,n=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),a=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),o=this.lambda0+a/this.alpha,u=0,d=s,p=-1e3,v=0;Math.abs(d-p)>1e-7;){if(++v>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(d))/2)),p=d,d=2*Math.atan(Math.exp(u))-Math.PI/2}return e.x=o,e.y=d,e}var z_e=["somerc"];const G_e={init:O_e,forward:N_e,inverse:B_e,names:z_e};var Pf=1e-7;function V_e(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof e.projName=="object"?Object.keys(e.projName)[0]:e.projName;return"no_uoff"in e||"no_off"in e||t.indexOf(r)!==-1||t.indexOf(vG(r))!==-1}function H_e(){var e,t,r,i,n,s,a,o,u,d,p=0,v,y=0,_=0,P=0,R=0,M=0,F=0;this.no_off=V_e(this),this.no_rot="no_rot"in this;var k=!1;"alpha"in this&&(k=!0);var N=!1;if("rectified_grid_angle"in this&&(N=!0),k&&(F=this.alpha),N&&(p=this.rectified_grid_angle),k||N)y=this.longc;else if(_=this.long1,R=this.lat1,P=this.long2,M=this.lat2,Math.abs(R-M)<=Pf||(e=Math.abs(R))<=Pf||Math.abs(e-Mt)<=Pf||Math.abs(Math.abs(this.lat0)-Mt)<=Pf||Math.abs(Math.abs(M)-Mt)<=Pf)throw new Error;var G=1-this.es;t=Math.sqrt(G),Math.abs(this.lat0)>Zt?(o=Math.sin(this.lat0),r=Math.cos(this.lat0),e=1-this.es*o*o,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/G),this.A=this.B*this.k0*t/e,i=this.B*t/(r*Math.sqrt(e)),n=i*i-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=i,this.E*=Math.pow($a(this.e,this.lat0,o),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=n=1),k||N?(k?(v=Math.asin(Math.sin(F)/i),N||(p=F)):(v=p,F=Math.asin(i*Math.sin(v))),this.lam0=y-Math.asin(.5*(n-1/n)*Math.tan(v))/this.B):(s=Math.pow($a(this.e,R,Math.sin(R)),this.B),a=Math.pow($a(this.e,M,Math.sin(M)),this.B),n=this.E/s,u=(a-s)/(a+s),d=this.E*this.E,d=(d-a*s)/(d+a*s),e=_-P,e<-Math.PI?P-=ov:e>Math.PI&&(P+=ov),this.lam0=tr(.5*(_+P)-Math.atan(d*Math.tan(.5*this.B*(_-P))/u)/this.B),v=Math.atan(2*Math.sin(this.B*tr(_-this.lam0))/(n-1/n)),p=F=Math.asin(i*Math.sin(v))),this.singam=Math.sin(v),this.cosgam=Math.cos(v),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(F))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*v,this.v_pole_n=this.ArB*Math.log(Math.tan(Qr-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(Qr+n))}function U_e(e){var t={},r,i,n,s,a,o,u,d;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-Mt)>Zt){if(a=this.E/Math.pow($a(this.e,e.y,Math.sin(e.y)),this.B),o=1/a,r=.5*(a-o),i=.5*(a+o),s=Math.sin(this.B*e.x),n=(r*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(n)-1)<Zt)throw new Error;d=.5*this.ArB*Math.log((1-n)/(1+n)),o=Math.cos(this.B*e.x),Math.abs(o)<Pf?u=this.A*e.x:u=this.ArB*Math.atan2(r*this.cosgam+s*this.singam,o)}else d=e.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*e.y;return this.no_rot?(t.x=u,t.y=d):(u-=this.u_0,t.x=d*this.cosrot+u*this.sinrot,t.y=u*this.cosrot-d*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function W_e(e){var t,r,i,n,s,a,o,u={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(r=e.y,t=e.x):(r=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*r),n=.5*(i-1/i),s=.5*(i+1/i),a=Math.sin(this.BrA*t),o=(a*this.cosgam+n*this.singam)/s,Math.abs(Math.abs(o)-1)<Zt)u.x=0,u.y=o<0?-Mt:Mt;else{if(u.y=this.E/Math.sqrt((1+o)/(1-o)),u.y=lv(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(n*this.cosgam-a*this.singam,Math.cos(this.BrA*t))}return u.x+=this.lam0,u}var j_e=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const $_e={init:H_e,forward:U_e,inverse:W_e,names:j_e};function q_e(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Zt)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),i=Ll(this.e,t,r),n=$a(this.e,this.lat1,t),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=Ll(this.e,s,a),u=$a(this.e,this.lat2,s),d=Math.abs(Math.abs(this.lat0)-Mt)<Zt?0:$a(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Zt?this.ns=Math.log(i/o)/Math.log(n/u):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(d,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function K_e(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=Zt&&(r=Lv(r)*(Mt-2*Zt));var i=Math.abs(Math.abs(r)-Mt),n,s;if(i>Zt)n=$a(this.e,r,Math.sin(r)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(i=r*this.ns,i<=0)return null;s=0}var a=this.ns*tr(t-this.long0);return e.x=this.k0*(s*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,e}function Z_e(e){var t,r,i,n,s,a=(e.x-this.x0)/this.k0,o=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+o*o),r=1):(t=-Math.sqrt(a*a+o*o),r=-1);var u=0;if(t!==0&&(u=Math.atan2(r*a,r*o)),t!==0||this.ns>0){if(r=1/this.ns,i=Math.pow(t/(this.a*this.f0),r),n=lv(this.e,i),n===-9999)return null}else n=-Mt;return s=tr(u/this.ns+this.long0),e.x=s,e.y=n,e}var X_e=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Y_e={init:q_e,forward:K_e,inverse:Z_e,names:X_e};function Q_e(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function J_e(e){var t,r,i,n,s,a,o,u=e.x,d=e.y,p=tr(u-this.long0);return t=Math.pow((1+this.e*Math.sin(d))/(1-this.e*Math.sin(d)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(d/2+this.s45),this.alfa)/t)-this.s45),i=-p*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),s=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(n)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),e.y=o*Math.cos(a)/1,e.x=o*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e}function ebe(e){var t,r,i,n,s,a,o,u,d=e.x;e.x=e.y,e.y=d,this.czech||(e.y*=-1,e.x*=-1),a=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.atan2(e.y,e.x),n=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),r=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(t)),e.x=this.long0-r/this.alfa,o=t,u=0;var p=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-e.y)<1e-10&&(u=1),o=e.y,p+=1;while(u===0&&p<15);return p>=15?null:e}var tbe=["Krovak","krovak"];const rbe={init:Q_e,forward:J_e,inverse:ebe,names:tbe};function Zs(e,t,r,i,n){return e*n-t*Math.sin(2*n)+r*Math.sin(4*n)-i*Math.sin(6*n)}function Ov(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function Nv(e){return .375*e*(1+.25*e*(1+.46875*e))}function Bv(e){return .05859375*e*e*(1+.75*e)}function zv(e){return e*e*e*(35/3072)}function $P(e,t,r){var i=t*r;return e/Math.sqrt(1-i*i)}function Yu(e){return Math.abs(e)<Mt?e:e-Lv(e)*Math.PI}function ZC(e,t,r,i,n){var s,a;s=e/t;for(var o=0;o<15;o++)if(a=(e-(t*s-r*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)))/(t-2*r*Math.cos(2*s)+4*i*Math.cos(4*s)-6*n*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function ibe(){this.sphere||(this.e0=Ov(this.es),this.e1=Nv(this.es),this.e2=Bv(this.es),this.e3=zv(this.es),this.ml0=this.a*Zs(this.e0,this.e1,this.e2,this.e3,this.lat0))}function nbe(e){var t,r,i=e.x,n=e.y;if(i=tr(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(n)*Math.sin(i)),r=this.a*(Math.atan2(Math.tan(n),Math.cos(i))-this.lat0);else{var s=Math.sin(n),a=Math.cos(n),o=$P(this.a,this.e,s),u=Math.tan(n)*Math.tan(n),d=i*Math.cos(n),p=d*d,v=this.es*a*a/(1-this.es),y=this.a*Zs(this.e0,this.e1,this.e2,this.e3,n);t=o*d*(1-p*u*(1/6-(8-u+8*v)*p/120)),r=y-this.ml0+o*s/a*p*(.5+(5-u+6*v)*p/24)}return e.x=t+this.x0,e.y=r+this.y0,e}function sbe(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,i,n;if(this.sphere){var s=r+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(t)),n=Math.atan2(Math.tan(t),Math.cos(s))}else{var a=this.ml0/this.a+r,o=ZC(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Mt)<=Zt)return e.x=this.long0,e.y=Mt,r<0&&(e.y*=-1),e;var u=$P(this.a,this.e,Math.sin(o)),d=u*u*u/this.a/this.a*(1-this.es),p=Math.pow(Math.tan(o),2),v=t*this.a/u,y=v*v;i=o-u*Math.tan(o)/d*v*v*(.5-(1+3*p)*v*v/24),n=v*(1-y*(p/3+(1+3*p)*p*y/15))/Math.cos(o)}return e.x=tr(n+this.long0),e.y=Yu(i),e}var obe=["Cassini","Cassini_Soldner","cass"];const abe={init:ibe,forward:nbe,inverse:sbe,names:obe};function Ru(e,t){var r;return e>1e-7?(r=e*t,(1-e*e)*(t/(1-r*r)-.5/e*Math.log((1-r)/(1+r)))):2*t}var $2=1,q2=2,K2=3,Tx=4;function lbe(){var e=Math.abs(this.lat0);if(Math.abs(e-Mt)<Zt?this.mode=this.lat0<0?$2:q2:Math.abs(e)<Zt?this.mode=K2:this.mode=Tx,this.es>0){var t;switch(this.qp=Ru(this.e,1),this.mmf=.5/(1-this.es),this.apa=vbe(this.es),this.mode){case q2:this.dd=1;break;case $2:this.dd=1;break;case K2:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Tx:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Ru(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Tx&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function cbe(e){var t,r,i,n,s,a,o,u,d,p,v=e.x,y=e.y;if(v=tr(v-this.long0),this.sphere){if(s=Math.sin(y),p=Math.cos(y),i=Math.cos(v),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+p*i:1+this.sinph0*s+this.cosph0*p*i,r<=Zt)return null;r=Math.sqrt(2/r),t=r*p*Math.sin(v),r*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*p*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(y+this.lat0)<Zt)return null;r=Qr-y*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),t=r*Math.sin(v),r*=i}}else{switch(o=0,u=0,d=0,i=Math.cos(v),n=Math.sin(v),s=Math.sin(y),a=Ru(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,u=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:d=1+this.sinb1*o+this.cosb1*u*i;break;case this.EQUIT:d=1+u*i;break;case this.N_POLE:d=Mt+y,a=this.qp-a;break;case this.S_POLE:d=y-Mt,a=this.qp+a;break}if(Math.abs(d)<Zt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),this.mode===this.OBLIQ?r=this.ymf*d*(this.cosb1*o-this.sinb1*u*i):r=(d=Math.sqrt(2/(1+u*i)))*o*this.ymf,t=this.xmf*d*u*n;break;case this.N_POLE:case this.S_POLE:a>=0?(t=(d=Math.sqrt(a))*n,r=i*(this.mode===this.S_POLE?d:-d)):t=r=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e}function ube(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,i,n,s,a,o,u,d;if(this.sphere){var p=0,v,y=0;if(v=Math.sqrt(t*t+r*r),n=v*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=Math.sin(n),p=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(v)<=Zt?0:Math.asin(r*y/v),t*=y,r=p*v;break;case this.OBLIQ:n=Math.abs(v)<=Zt?this.lat0:Math.asin(p*this.sinph0+r*y*this.cosph0/v),t*=y*this.cosph0,r=(p-Math.sin(n)*this.sinph0)*v;break;case this.N_POLE:r=-r,n=Mt-n;break;case this.S_POLE:n-=Mt;break}i=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,r)}else{if(d=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,r*=this.dd,u=Math.sqrt(t*t+r*r),u<Zt)return e.x=this.long0,e.y=this.lat0,e;a=2*Math.asin(.5*u/this.rq),s=Math.cos(a),t*=a=Math.sin(a),this.mode===this.OBLIQ?(d=s*this.sinb1+r*a*this.cosb1/u,o=this.qp*d,r=u*this.cosb1*s-r*this.sinb1*a):(d=r*a/u,o=this.qp*d,r=u*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),o=t*t+r*r,!o)return e.x=this.long0,e.y=this.lat0,e;d=1-o/this.qp,this.mode===this.S_POLE&&(d=-d)}i=Math.atan2(t,r),n=ybe(Math.asin(d),this.apa)}return e.x=tr(this.long0+i),e.y=n,e}var hbe=.3333333333333333,dbe=.17222222222222222,fbe=.10257936507936508,pbe=.06388888888888888,gbe=.0664021164021164,mbe=.016415012942191543;function vbe(e){var t,r=[];return r[0]=e*hbe,t=e*e,r[0]+=t*dbe,r[1]=t*pbe,t*=e,r[0]+=t*fbe,r[1]+=t*gbe,r[2]=t*mbe,r}function ybe(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}var wbe=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const xbe={init:lbe,forward:cbe,inverse:ube,names:wbe,S_POLE:$2,N_POLE:q2,EQUIT:K2,OBLIQ:Tx};function Vu(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function Cbe(){Math.abs(this.lat1+this.lat2)<Zt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ll(this.e3,this.sin_po,this.cos_po),this.qs1=Ru(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ll(this.e3,this.sin_po,this.cos_po),this.qs2=Ru(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ru(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Zt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function _be(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var i=Ru(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*tr(t-this.long0),a=n*Math.sin(s)+this.x0,o=this.rh-n*Math.cos(s)+this.y0;return e.x=a,e.y=o,e}function bbe(e){var t,r,i,n,s,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),n=0,t!==0&&(n=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-i*i)/(2*this.ns0)):(r=(this.c-i*i)/this.ns0,a=this.phi1z(this.e3,r)),s=tr(n/this.ns0+this.long0),e.x=s,e.y=a,e}function Sbe(e,t){var r,i,n,s,a,o=Vu(.5*t);if(e<Zt)return o;for(var u=e*e,d=1;d<=25;d++)if(r=Math.sin(o),i=Math.cos(o),n=e*r,s=1-n*n,a=.5*s*s/i*(t/(1-u)-r/s+.5/e*Math.log((1-n)/(1+n))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var Ebe=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Rbe={init:Cbe,forward:_be,inverse:bbe,names:Ebe,phi1z:Sbe};function Tbe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Pbe(e){var t,r,i,n,s,a,o,u,d=e.x,p=e.y;return i=tr(d-this.long0),t=Math.sin(p),r=Math.cos(p),n=Math.cos(i),a=this.sin_p14*t+this.cos_p14*r*n,s=1,a>0||Math.abs(a)<=Zt?(o=this.x0+this.a*s*r*Math.sin(i)/a,u=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*r*n)/a):(o=this.x0+this.infinity_dist*r*Math.sin(i),u=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*n)),e.x=o,e.y=u,e}function Mbe(e){var t,r,i,n,s,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(n=Math.atan2(t,this.rc),r=Math.sin(n),i=Math.cos(n),a=Vu(i*this.sin_p14+e.y*r*this.cos_p14/t),s=Math.atan2(e.x*r,t*this.cos_p14*i-e.y*this.sin_p14*r),s=tr(this.long0+s)):(a=this.phic0,s=0),e.x=s,e.y=a,e}var Fbe=["gnom"];const Abe={init:Tbe,forward:Pbe,inverse:Mbe,names:Fbe};function Ibe(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*Mt:Mt;for(var i=Math.asin(.5*t),n,s,a,o,u=0;u<30;u++)if(s=Math.sin(i),a=Math.cos(i),o=e*s,n=Math.pow(1-o*o,2)/(2*a)*(t/(1-e*e)-s/(1-o*o)+.5/e*Math.log((1-o)/(1+o))),i+=n,Math.abs(n)<=1e-10)return i;return NaN}function Dbe(){this.sphere||(this.k0=Ll(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function kbe(e){var t=e.x,r=e.y,i,n,s=tr(t-this.long0);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var a=Ru(this.e,Math.sin(r));i=this.x0+this.a*this.k0*s,n=this.y0+this.a*a*.5/this.k0}return e.x=i,e.y=n,e}function Lbe(e){e.x-=this.x0,e.y-=this.y0;var t,r;return this.sphere?(t=tr(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=Ibe(this.e,2*e.y*this.k0/this.a),t=tr(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e}var Obe=["cea"];const Nbe={init:Dbe,forward:kbe,inverse:Lbe,names:Obe};function Bbe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function zbe(e){var t=e.x,r=e.y,i=tr(t-this.long0),n=Yu(r-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*n,e}function Gbe(e){var t=e.x,r=e.y;return e.x=tr(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Yu(this.lat0+(r-this.y0)/this.a),e}var Vbe=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Hbe={init:Bbe,forward:zbe,inverse:Gbe,names:Vbe};var gL=20;function Ube(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ov(this.es),this.e1=Nv(this.es),this.e2=Bv(this.es),this.e3=zv(this.es),this.ml0=this.a*Zs(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Wbe(e){var t=e.x,r=e.y,i,n,s,a=tr(t-this.long0);if(s=a*Math.sin(r),this.sphere)Math.abs(r)<=Zt?(i=this.a*a,n=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(r),n=this.a*(Yu(r-this.lat0)+(1-Math.cos(s))/Math.tan(r)));else if(Math.abs(r)<=Zt)i=this.a*a,n=-1*this.ml0;else{var o=$P(this.a,this.e,Math.sin(r))/Math.tan(r);i=o*Math.sin(s),n=this.a*Zs(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+o*(1-Math.cos(s))}return e.x=i+this.x0,e.y=n+this.y0,e}function jbe(e){var t,r,i,n,s,a,o,u,d;if(i=e.x-this.x0,n=e.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Zt)t=tr(i/this.a+this.long0),r=0;else{a=this.lat0+n/this.a,o=i*i/this.a/this.a+a*a,u=a;var p;for(s=gL;s;--s)if(p=Math.tan(u),d=-1*(a*(u*p+1)-u-.5*(u*u+o)*p)/((u-a)/p-1),u+=d,Math.abs(d)<=Zt){r=u;break}t=tr(this.long0+Math.asin(i*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(n+this.ml0)<=Zt)r=0,t=tr(this.long0+i/this.a);else{a=(this.ml0+n)/this.a,o=i*i/this.a/this.a+a*a,u=a;var v,y,_,P,R;for(s=gL;s;--s)if(R=this.e*Math.sin(u),v=Math.sqrt(1-R*R)*Math.tan(u),y=this.a*Zs(this.e0,this.e1,this.e2,this.e3,u),_=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),P=y/this.a,d=(a*(v*P+1)-P-.5*v*(P*P+o))/(this.es*Math.sin(2*u)*(P*P+o-2*a*P)/(4*v)+(a-P)*(v*_-2/Math.sin(2*u))-_),u-=d,Math.abs(d)<=Zt){r=u;break}v=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=tr(this.long0+Math.asin(i*v/this.a)/Math.sin(r))}return e.x=t,e.y=r,e}var $be=["Polyconic","American_Polyconic","poly"];const qbe={init:Ube,forward:Wbe,inverse:jbe,names:$be};function Kbe(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Zbe(e){var t,r=e.x,i=e.y,n=i-this.lat0,s=r-this.long0,a=n/u0*1e-5,o=s,u=1,d=0;for(t=1;t<=10;t++)u=u*a,d=d+this.A[t]*u;var p=d,v=o,y=1,_=0,P,R,M=0,F=0;for(t=1;t<=6;t++)P=y*p-_*v,R=_*p+y*v,y=P,_=R,M=M+this.B_re[t]*y-this.B_im[t]*_,F=F+this.B_im[t]*y+this.B_re[t]*_;return e.x=F*this.a+this.x0,e.y=M*this.a+this.y0,e}function Xbe(e){var t,r=e.x,i=e.y,n=r-this.x0,s=i-this.y0,a=s/this.a,o=n/this.a,u=1,d=0,p,v,y=0,_=0;for(t=1;t<=6;t++)p=u*a-d*o,v=d*a+u*o,u=p,d=v,y=y+this.C_re[t]*u-this.C_im[t]*d,_=_+this.C_im[t]*u+this.C_re[t]*d;for(var P=0;P<this.iterations;P++){var R=y,M=_,F,k,N=a,G=o;for(t=2;t<=6;t++)F=R*y-M*_,k=M*y+R*_,R=F,M=k,N=N+(t-1)*(this.B_re[t]*R-this.B_im[t]*M),G=G+(t-1)*(this.B_im[t]*R+this.B_re[t]*M);R=1,M=0;var j=this.B_re[1],ee=this.B_im[1];for(t=2;t<=6;t++)F=R*y-M*_,k=M*y+R*_,R=F,M=k,j=j+t*(this.B_re[t]*R-this.B_im[t]*M),ee=ee+t*(this.B_im[t]*R+this.B_re[t]*M);var q=j*j+ee*ee;y=(N*j+G*ee)/q,_=(G*j-N*ee)/q}var oe=y,ue=_,me=1,ie=0;for(t=1;t<=9;t++)me=me*oe,ie=ie+this.D[t]*me;var fe=this.lat0+ie*u0*1e5,ke=this.long0+ue;return e.x=ke,e.y=fe,e}var Ybe=["New_Zealand_Map_Grid","nzmg"];const Qbe={init:Kbe,forward:Zbe,inverse:Xbe,names:Ybe};function Jbe(){}function eSe(e){var t=e.x,r=e.y,i=tr(t-this.long0),n=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=n,e.y=s,e}function tSe(e){e.x-=this.x0,e.y-=this.y0;var t=tr(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e}var rSe=["Miller_Cylindrical","mill"];const iSe={init:Jbe,forward:eSe,inverse:tSe,names:rSe};var nSe=20;function sSe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=GP(this.es)}function oSe(e){var t,r,i=e.x,n=e.y;if(i=tr(i-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var s=this.n*Math.sin(n),a=nSe;a;--a){var o=(this.m*n+Math.sin(n)-s)/(this.m+Math.cos(n));if(n-=o,Math.abs(o)<Zt)break}t=this.a*this.C_x*i*(this.m+Math.cos(n)),r=this.a*this.C_y*n}else{var u=Math.sin(n),d=Math.cos(n);r=this.a*sg(n,u,d,this.en),t=this.a*i*d/Math.sqrt(1-this.es*u*u)}return e.x=t,e.y=r,e}function aSe(e){var t,r,i,n;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=Vu((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Vu(Math.sin(t)/this.n)),i=tr(i+this.long0),t=Yu(t)):(t=VP(e.y/this.a,this.es,this.en),n=Math.abs(t),n<Mt?(n=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)),i=tr(r)):n-Zt<Mt&&(i=this.long0)),e.x=i,e.y=t,e}var lSe=["Sinusoidal","sinu"];const cSe={init:sSe,forward:oSe,inverse:aSe,names:lSe};function uSe(){}function hSe(e){for(var t=e.x,r=e.y,i=tr(t-this.long0),n=r,s=Math.PI*Math.sin(r);;){var a=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=a,Math.abs(a)<Zt)break}n/=2,Math.PI/2-Math.abs(r)<Zt&&(i=0);var o=.900316316158*this.a*i*Math.cos(n)+this.x0,u=1.4142135623731*this.a*Math.sin(n)+this.y0;return e.x=o,e.y=u,e}function dSe(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var i=tr(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var n=Math.asin(r);return e.x=i,e.y=n,e}var fSe=["Mollweide","moll"];const pSe={init:uSe,forward:hSe,inverse:dSe,names:fSe};function gSe(){Math.abs(this.lat1+this.lat2)<Zt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ov(this.es),this.e1=Nv(this.es),this.e2=Bv(this.es),this.e3=zv(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Ll(this.e,this.sin_phi,this.cos_phi),this.ml1=Zs(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Zt?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Ll(this.e,this.sin_phi,this.cos_phi),this.ml2=Zs(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Zs(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function mSe(e){var t=e.x,r=e.y,i;if(this.sphere)i=this.a*(this.g-r);else{var n=Zs(this.e0,this.e1,this.e2,this.e3,r);i=this.a*(this.g-n)}var s=this.ns*tr(t-this.long0),a=this.x0+i*Math.sin(s),o=this.y0+this.rh-i*Math.cos(s);return e.x=a,e.y=o,e}function vSe(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,r,i,n;this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var s=0;if(r!==0&&(s=Math.atan2(t*e.x,t*e.y)),this.sphere)return n=tr(this.long0+s/this.ns),i=Yu(this.g-r/this.a),e.x=n,e.y=i,e;var a=this.g-r/this.a;return i=ZC(a,this.e0,this.e1,this.e2,this.e3),n=tr(this.long0+s/this.ns),e.x=n,e.y=i,e}var ySe=["Equidistant_Conic","eqdc"];const wSe={init:gSe,forward:mSe,inverse:vSe,names:ySe};function xSe(){this.R=this.a}function CSe(e){var t=e.x,r=e.y,i=tr(t-this.long0),n,s;Math.abs(r)<=Zt&&(n=this.x0+this.R*i,s=this.y0);var a=Vu(2*Math.abs(r/Math.PI));(Math.abs(i)<=Zt||Math.abs(Math.abs(r)-Mt)<=Zt)&&(n=this.x0,r>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/i-i/Math.PI),u=o*o,d=Math.sin(a),p=Math.cos(a),v=p/(d+p-1),y=v*v,_=v*(2/d-1),P=_*_,R=Math.PI*this.R*(o*(v-P)+Math.sqrt(u*(v-P)*(v-P)-(P+u)*(y-P)))/(P+u);i<0&&(R=-R),n=this.x0+R;var M=u+v;return R=Math.PI*this.R*(_*M-o*Math.sqrt((P+u)*(u+1)-M*M))/(P+u),r>=0?s=this.y0+R:s=this.y0-R,e.x=n,e.y=s,e}function _Se(e){var t,r,i,n,s,a,o,u,d,p,v,y,_;return e.x-=this.x0,e.y-=this.y0,v=Math.PI*this.R,i=e.x/v,n=e.y/v,s=i*i+n*n,a=-Math.abs(n)*(1+s),o=a-2*n*n+i*i,u=-2*a+1+2*n*n+s*s,_=n*n/u+(2*o*o*o/u/u/u-9*a*o/u/u)/27,d=(a-o*o/3/u)/u,p=2*Math.sqrt(-d/3),v=3*_/d/p,Math.abs(v)>1&&(v>=0?v=1:v=-1),y=Math.acos(v)/3,e.y>=0?r=(-p*Math.cos(y+Math.PI/3)-o/3/u)*Math.PI:r=-(-p*Math.cos(y+Math.PI/3)-o/3/u)*Math.PI,Math.abs(i)<Zt?t=this.long0:t=tr(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-n*n)+s*s))/2/i),e.x=t,e.y=r,e}var bSe=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const SSe={init:xSe,forward:CSe,inverse:_Se,names:bSe};function ESe(e,t,r,i,n,s){const a=i-t,o=Math.atan((1-s)*Math.tan(e)),u=Math.atan((1-s)*Math.tan(r)),d=Math.sin(o),p=Math.cos(o),v=Math.sin(u),y=Math.cos(u);let _=a,P,R=100,M,F,k,N,G,j,ee,q,oe,ue,me,ie,fe,ke;do{if(M=Math.sin(_),F=Math.cos(_),k=Math.sqrt(y*M*(y*M)+(p*v-d*y*F)*(p*v-d*y*F)),k===0)return{azi1:0,s12:0};N=d*v+p*y*F,G=Math.atan2(k,N),j=p*y*M/k,ee=1-j*j,q=ee!==0?N-2*d*v/ee:0,oe=s/16*ee*(4+s*(4-3*ee)),P=_,_=a+(1-oe)*s*j*(G+oe*k*(q+oe*N*(-1+2*q*q)))}while(Math.abs(_-P)>1e-12&&--R>0);return R===0?{azi1:NaN,s12:NaN}:(ue=ee*(n*n-n*(1-s)*(n*(1-s)))/(n*(1-s)*(n*(1-s))),me=1+ue/16384*(4096+ue*(-768+ue*(320-175*ue))),ie=ue/1024*(256+ue*(-128+ue*(74-47*ue))),fe=ie*k*(q+ie/4*(N*(-1+2*q*q)-ie/6*q*(-3+4*k*k)*(-3+4*q*q))),ke=n*(1-s)*me*(G-fe),{azi1:Math.atan2(y*M,p*v-d*y*F),s12:ke})}function RSe(e,t,r,i,n,s){const a=Math.atan((1-s)*Math.tan(e)),o=Math.sin(a),u=Math.cos(a),d=Math.sin(r),p=Math.cos(r),v=Math.atan2(o,u*p),y=u*d,_=1-y*y,P=_*(n*n-n*(1-s)*(n*(1-s)))/(n*(1-s)*(n*(1-s))),R=1+P/16384*(4096+P*(-768+P*(320-175*P))),M=P/1024*(256+P*(-128+P*(74-47*P)));let F=i/(n*(1-s)*R),k,N=100,G,j,ee,q;do G=Math.cos(2*v+F),j=Math.sin(F),ee=Math.cos(F),q=M*j*(G+M/4*(ee*(-1+2*G*G)-M/6*G*(-3+4*j*j)*(-3+4*G*G))),k=F,F=i/(n*(1-s)*R)+q;while(Math.abs(F-k)>1e-12&&--N>0);if(N===0)return{lat2:NaN,lon2:NaN};const oe=o*j-u*ee*p,ue=Math.atan2(o*ee+u*j*p,(1-s)*Math.sqrt(y*y+oe*oe)),me=Math.atan2(j*d,u*ee-o*j*p),ie=s/16*_*(4+s*(4-3*_)),fe=me-(1-ie)*s*y*(F+ie*j*(G+ie*ee*(-1+2*G*G))),ke=t+fe;return{lat2:ue,lon2:ke}}function TSe(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function PSe(e){var t=e.x,r=e.y,i=Math.sin(e.y),n=Math.cos(e.y),s=tr(t-this.long0),a,o,u,d,p,v,y,_,P,R,M;return this.sphere?Math.abs(this.sin_p12-1)<=Zt?(e.x=this.x0+this.a*(Mt-r)*Math.sin(s),e.y=this.y0-this.a*(Mt-r)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=Zt?(e.x=this.x0+this.a*(Mt+r)*Math.sin(s),e.y=this.y0+this.a*(Mt+r)*Math.cos(s),e):(P=this.sin_p12*i+this.cos_p12*n*Math.cos(s),y=Math.acos(P),_=y?y/Math.sin(y):1,e.x=this.x0+this.a*_*n*Math.sin(s),e.y=this.y0+this.a*_*(this.cos_p12*i-this.sin_p12*n*Math.cos(s)),e):(a=Ov(this.es),o=Nv(this.es),u=Bv(this.es),d=zv(this.es),Math.abs(this.sin_p12-1)<=Zt?(p=this.a*Zs(a,o,u,d,Mt),v=this.a*Zs(a,o,u,d,r),e.x=this.x0+(p-v)*Math.sin(s),e.y=this.y0-(p-v)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=Zt?(p=this.a*Zs(a,o,u,d,Mt),v=this.a*Zs(a,o,u,d,r),e.x=this.x0+(p+v)*Math.sin(s),e.y=this.y0+(p+v)*Math.cos(s),e):Math.abs(t)<Zt&&Math.abs(r-this.lat0)<Zt?(e.x=e.y=0,e):(R=ESe(this.lat0,this.long0,r,t,this.a,this.f),M=R.azi1,e.x=R.s12*Math.sin(M),e.y=R.s12*Math.cos(M),e))}function MSe(e){e.x-=this.x0,e.y-=this.y0;var t,r,i,n,s,a,o,u,d,p,v,y,_,P,R,M;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*Mt*this.a?void 0:(r=t/this.a,i=Math.sin(r),n=Math.cos(r),s=this.long0,Math.abs(t)<=Zt?a=this.lat0:(a=Vu(n*this.sin_p12+e.y*i*this.cos_p12/t),o=Math.abs(this.lat0)-Mt,Math.abs(o)<=Zt?this.lat0>=0?s=tr(this.long0+Math.atan2(e.x,-e.y)):s=tr(this.long0-Math.atan2(-e.x,e.y)):s=tr(this.long0+Math.atan2(e.x*i,t*this.cos_p12*n-e.y*this.sin_p12*i))),e.x=s,e.y=a,e)):(u=Ov(this.es),d=Nv(this.es),p=Bv(this.es),v=zv(this.es),Math.abs(this.sin_p12-1)<=Zt?(y=this.a*Zs(u,d,p,v,Mt),t=Math.sqrt(e.x*e.x+e.y*e.y),_=y-t,a=ZC(_/this.a,u,d,p,v),s=tr(this.long0+Math.atan2(e.x,-1*e.y)),e.x=s,e.y=a,e):Math.abs(this.sin_p12+1)<=Zt?(y=this.a*Zs(u,d,p,v,Mt),t=Math.sqrt(e.x*e.x+e.y*e.y),_=t-y,a=ZC(_/this.a,u,d,p,v),s=tr(this.long0+Math.atan2(e.x,e.y)),e.x=s,e.y=a,e):(P=Math.atan2(e.x,e.y),R=Math.sqrt(e.x*e.x+e.y*e.y),M=RSe(this.lat0,this.long0,P,R,this.a,this.f),e.x=M.lon2,e.y=M.lat2,e))}var FSe=["Azimuthal_Equidistant","aeqd"];const ASe={init:TSe,forward:PSe,inverse:MSe,names:FSe};function ISe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function DSe(e){var t,r,i,n,s,a,o,u,d=e.x,p=e.y;return i=tr(d-this.long0),t=Math.sin(p),r=Math.cos(p),n=Math.cos(i),a=this.sin_p14*t+this.cos_p14*r*n,s=1,(a>0||Math.abs(a)<=Zt)&&(o=this.a*s*r*Math.sin(i),u=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*r*n)),e.x=o,e.y=u,e}function kSe(e){var t,r,i,n,s,a,o;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),r=Vu(t/this.a),i=Math.sin(r),n=Math.cos(r),a=this.long0,Math.abs(t)<=Zt?(o=this.lat0,e.x=a,e.y=o,e):(o=Vu(n*this.sin_p14+e.y*i*this.cos_p14/t),s=Math.abs(this.lat0)-Mt,Math.abs(s)<=Zt?(this.lat0>=0?a=tr(this.long0+Math.atan2(e.x,-e.y)):a=tr(this.long0-Math.atan2(-e.x,e.y)),e.x=a,e.y=o,e):(a=tr(this.long0+Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i)),e.x=a,e.y=o,e))}var LSe=["ortho"];const OSe={init:ISe,forward:DSe,inverse:kSe,names:LSe};var ji={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Jr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function NSe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Mt-Qr/2?this.face=ji.TOP:this.lat0<=-(Mt-Qr/2)?this.face=ji.BOTTOM:Math.abs(this.long0)<=Qr?this.face=ji.FRONT:Math.abs(this.long0)<=Mt+Qr?this.face=this.long0>0?ji.RIGHT:ji.LEFT:this.face=ji.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function BSe(e){var t={x:0,y:0},r,i,n,s,a,o,u={value:0};if(e.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):r=e.y,i=e.x,this.face===ji.TOP)s=Mt-r,i>=Qr&&i<=Mt+Qr?(u.value=Jr.AREA_0,n=i-Mt):i>Mt+Qr||i<=-(Mt+Qr)?(u.value=Jr.AREA_1,n=i>0?i-yn:i+yn):i>-(Mt+Qr)&&i<=-Qr?(u.value=Jr.AREA_2,n=i+Mt):(u.value=Jr.AREA_3,n=i);else if(this.face===ji.BOTTOM)s=Mt+r,i>=Qr&&i<=Mt+Qr?(u.value=Jr.AREA_0,n=-i+Mt):i<Qr&&i>=-Qr?(u.value=Jr.AREA_1,n=-i):i<-Qr&&i>=-(Mt+Qr)?(u.value=Jr.AREA_2,n=-i-Mt):(u.value=Jr.AREA_3,n=i>0?-i+yn:-i-yn);else{var d,p,v,y,_,P,R;this.face===ji.RIGHT?i=bp(i,+Mt):this.face===ji.BACK?i=bp(i,+yn):this.face===ji.LEFT&&(i=bp(i,-Mt)),y=Math.sin(r),_=Math.cos(r),P=Math.sin(i),R=Math.cos(i),d=_*R,p=_*P,v=y,this.face===ji.FRONT?(s=Math.acos(d),n=Bw(s,v,p,u)):this.face===ji.RIGHT?(s=Math.acos(p),n=Bw(s,v,-d,u)):this.face===ji.BACK?(s=Math.acos(-d),n=Bw(s,v,-p,u)):this.face===ji.LEFT?(s=Math.acos(-p),n=Bw(s,v,d,u)):(s=n=0,u.value=Jr.AREA_0)}return o=Math.atan(12/yn*(n+Math.acos(Math.sin(n)*Math.cos(Qr))-Mt)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===Jr.AREA_1?o+=Mt:u.value===Jr.AREA_2?o+=yn:u.value===Jr.AREA_3&&(o+=1.5*yn),t.x=a*Math.cos(o),t.y=a*Math.sin(o),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function zSe(e){var t={lam:0,phi:0},r,i,n,s,a,o,u,d,p,v={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),r=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?v.value=Jr.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(v.value=Jr.AREA_1,r-=Mt):e.x<0&&-e.x>=Math.abs(e.y)?(v.value=Jr.AREA_2,r=r<0?r+yn:r-yn):(v.value=Jr.AREA_3,r+=Mt),p=yn/12*Math.tan(r),a=Math.sin(p)/(Math.cos(p)-1/Math.sqrt(2)),o=Math.atan(a),n=Math.cos(r),s=Math.tan(i),u=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),u<-1?u=-1:u>1&&(u=1),this.face===ji.TOP)d=Math.acos(u),t.phi=Mt-d,v.value===Jr.AREA_0?t.lam=o+Mt:v.value===Jr.AREA_1?t.lam=o<0?o+yn:o-yn:v.value===Jr.AREA_2?t.lam=o-Mt:t.lam=o;else if(this.face===ji.BOTTOM)d=Math.acos(u),t.phi=d-Mt,v.value===Jr.AREA_0?t.lam=-o+Mt:v.value===Jr.AREA_1?t.lam=-o:v.value===Jr.AREA_2?t.lam=-o-Mt:t.lam=o<0?-o-yn:-o+yn;else{var y,_,P;y=u,p=y*y,p>=1?P=0:P=Math.sqrt(1-p)*Math.sin(o),p+=P*P,p>=1?_=0:_=Math.sqrt(1-p),v.value===Jr.AREA_1?(p=_,_=-P,P=p):v.value===Jr.AREA_2?(_=-_,P=-P):v.value===Jr.AREA_3&&(p=_,_=P,P=-p),this.face===ji.RIGHT?(p=y,y=-_,_=p):this.face===ji.BACK?(y=-y,_=-_):this.face===ji.LEFT&&(p=y,y=_,_=-p),t.phi=Math.acos(-P)-Mt,t.lam=Math.atan2(_,y),this.face===ji.RIGHT?t.lam=bp(t.lam,-Mt):this.face===ji.BACK?t.lam=bp(t.lam,-yn):this.face===ji.LEFT&&(t.lam=bp(t.lam,+Mt))}if(this.es!==0){var R,M,F;R=t.phi<0?1:0,M=Math.tan(t.phi),F=this.b/Math.sqrt(M*M+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-F*F)/(this.one_minus_f*F)),R&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function Bw(e,t,r,i){var n;return e<Zt?(i.value=Jr.AREA_0,n=0):(n=Math.atan2(t,r),Math.abs(n)<=Qr?i.value=Jr.AREA_0:n>Qr&&n<=Mt+Qr?(i.value=Jr.AREA_1,n-=Mt):n>Mt+Qr||n<=-(Mt+Qr)?(i.value=Jr.AREA_2,n=n>=0?n-yn:n+yn):(i.value=Jr.AREA_3,n+=Mt)),n}function bp(e,t){var r=e+t;return r<-yn?r+=ov:r>+yn&&(r-=ov),r}var GSe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const VSe={init:NSe,forward:BSe,inverse:zSe,names:GSe};var Z2=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Gm=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FG=.8487,AG=1.3523,IG=Sl/5,HSe=1/IG,Zf=18,XC=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},USe=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function WSe(e,t,r,i){for(var n=t;i;--i){var s=e(n);if(n-=s,Math.abs(s)<r)break}return n}function jSe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function $Se(e){var t=tr(e.x-this.long0),r=Math.abs(e.y),i=Math.floor(r*IG);i<0?i=0:i>=Zf&&(i=Zf-1),r=Sl*(r-HSe*i);var n={x:XC(Z2[i],r)*t,y:XC(Gm[i],r)};return e.y<0&&(n.y=-n.y),n.x=n.x*this.a*FG+this.x0,n.y=n.y*this.a*AG+this.y0,n}function qSe(e){var t={x:(e.x-this.x0)/(this.a*FG),y:Math.abs(e.y-this.y0)/(this.a*AG)};if(t.y>=1)t.x/=Z2[Zf][0],t.y=e.y<0?-Mt:Mt;else{var r=Math.floor(t.y*Zf);for(r<0?r=0:r>=Zf&&(r=Zf-1);;)if(Gm[r][0]>t.y)--r;else if(Gm[r+1][0]<=t.y)++r;else break;var i=Gm[r],n=5*(t.y-i[0])/(Gm[r+1][0]-i[0]);n=WSe(function(s){return(XC(i,s)-t.y)/USe(i,s)},n,Zt,100),t.x/=XC(Z2[r],n),t.y=(5*r+n)*ts,e.y<0&&(t.y=-t.y)}return t.x=tr(t.x+this.long0),t}var KSe=["Robinson","robin"];const ZSe={init:jSe,forward:$Se,inverse:qSe,names:KSe};function XSe(){this.name="geocent"}function YSe(e){var t=wG(e,this.es,this.a);return t}function QSe(e){var t=xG(e,this.es,this.a,this.b);return t}var JSe=["Geocentric","geocentric","geocent","Geocent"];const eEe={init:XSe,forward:YSe,inverse:QSe,names:JSe};var Ps={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Tm={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function tEe(){if(Object.keys(Tm).forEach((function(r){if(typeof this[r]>"u")this[r]=Tm[r].def;else{if(Tm[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);Tm[r].num&&(this[r]=parseFloat(this[r]))}Tm[r].degrees&&(this[r]=this[r]*ts)}).bind(this)),Math.abs(Math.abs(this.lat0)-Mt)<Zt?this.mode=this.lat0<0?Ps.S_POLE:Ps.N_POLE:Math.abs(this.lat0)<Zt?this.mode=Ps.EQUIT:(this.mode=Ps.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function rEe(e){e.x-=this.long0;var t=Math.sin(e.y),r=Math.cos(e.y),i=Math.cos(e.x),n,s;switch(this.mode){case Ps.OBLIQ:s=this.sinph0*t+this.cosph0*r*i;break;case Ps.EQUIT:s=r*i;break;case Ps.S_POLE:s=-t;break;case Ps.N_POLE:s=t;break}switch(s=this.pn1/(this.p-s),n=s*r*Math.sin(e.x),this.mode){case Ps.OBLIQ:s*=this.cosph0*t-this.sinph0*r*i;break;case Ps.EQUIT:s*=t;break;case Ps.N_POLE:s*=-(r*i);break;case Ps.S_POLE:s*=r*i;break}var a,o;return a=s*this.cg+n*this.sg,o=1/(a*this.sw*this.h1+this.cw),n=(n*this.cg-s*this.sg)*this.cw*o,s=a*o,e.x=n*this.a,e.y=s*this.a,e}function iEe(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},r,i,n;n=1/(this.pn1-e.y*this.sw),r=this.pn1*e.x*n,i=this.pn1*e.y*this.cw*n,e.x=r*this.cg+i*this.sg,e.y=i*this.cg-r*this.sg;var s=po(e.x,e.y);if(Math.abs(s)<Zt)t.x=0,t.y=e.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case Ps.OBLIQ:t.y=Math.asin(a*this.sinph0+e.y*o*this.cosph0/s),e.y=(a-this.sinph0*Math.sin(t.y))*s,e.x*=o*this.cosph0;break;case Ps.EQUIT:t.y=Math.asin(e.y*o/s),e.y=a*s,e.x*=o;break;case Ps.N_POLE:t.y=Math.asin(a),e.y=-e.y;break;case Ps.S_POLE:t.y=-Math.asin(a);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var nEe=["Tilted_Perspective","tpers"];const sEe={init:tEe,forward:rEe,inverse:iEe,names:nEe};function oEe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function aEe(e){var t=e.x,r=e.y,i,n,s,a;if(t=t-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var o=this.radius_p/po(this.radius_p*Math.cos(r),Math.sin(r));if(n=o*Math.cos(t)*Math.cos(r),s=o*Math.sin(t)*Math.cos(r),a=o*Math.sin(r),(this.radius_g-n)*n-s*s-a*a*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=this.radius_g-n,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/po(a,i)),e.y=this.radius_g_1*Math.atan(a/i)):(e.x=this.radius_g_1*Math.atan(s/i),e.y=this.radius_g_1*Math.atan(a/po(s,i)))}else this.shape==="sphere"&&(i=Math.cos(r),n=Math.cos(t)*i,s=Math.sin(t)*i,a=Math.sin(r),i=this.radius_g-n,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/po(a,i)),e.y=this.radius_g_1*Math.atan(a/i)):(e.x=this.radius_g_1*Math.atan(s/i),e.y=this.radius_g_1*Math.atan(a/po(s,i))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function lEe(e){var t=-1,r=0,i=0,n,s,a,o;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),r=Math.tan(e.x/this.radius_g_1)*po(1,i)):(r=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*po(1,r));var u=i/this.radius_p;if(n=r*r+u*u+t*t,s=2*this.radius_g*t,a=s*s-4*n*this.C,a<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-s-Math.sqrt(a))/(2*n),t=this.radius_g+o*t,r*=o,i*=o,e.x=Math.atan2(r,t),e.y=Math.atan(i*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),r=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+i*i)):(r=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+r*r)),n=r*r+i*i+t*t,s=2*this.radius_g*t,a=s*s-4*n*this.C,a<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-s-Math.sqrt(a))/(2*n),t=this.radius_g+o*t,r*=o,i*=o,e.x=Math.atan2(r,t),e.y=Math.atan(i*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var cEe=["Geostationary Satellite View","Geostationary_Satellite","geos"];const uEe={init:oEe,forward:aEe,inverse:lEe,names:cEe};var h0=1.340264,d0=-.081106,f0=893e-6,p0=.003796,YC=Math.sqrt(3)/2;function hEe(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function dEe(e){var t=tr(e.x-this.long0),r=e.y,i=Math.asin(YC*Math.sin(r)),n=i*i,s=n*n*n;return e.x=t*Math.cos(i)/(YC*(h0+3*d0*n+s*(7*f0+9*p0*n))),e.y=i*(h0+d0*n+s*(f0+p0*n)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function fEe(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,r=12,i=e.y,n,s,a,o,u,d;for(d=0;d<r&&(n=i*i,s=n*n*n,a=i*(h0+d0*n+s*(f0+p0*n))-e.y,o=h0+3*d0*n+s*(7*f0+9*p0*n),i-=u=a/o,!(Math.abs(u)<t));++d);return n=i*i,s=n*n*n,e.x=YC*e.x*(h0+3*d0*n+s*(7*f0+9*p0*n))/Math.cos(i),e.y=Math.asin(Math.sin(i)/YC),e.x=tr(e.x+this.long0),e}var pEe=["eqearth","Equal Earth","Equal_Earth"];const gEe={init:hEe,forward:dEe,inverse:fEe,names:pEe};var cv=1e-10;function mEe(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<cv)throw new Error;this.es?(this.en=GP(this.es),this.m1=sg(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=yEe,this.forward=vEe):(Math.abs(this.phi1)+cv>=Mt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=xEe,this.forward=wEe)}function vEe(e){var t=tr(e.x-(this.long0||0)),r=e.y,i,n,s;return i=this.am1+this.m1-sg(r,n=Math.sin(r),s=Math.cos(r),this.en),n=s*t/(i*Math.sqrt(1-this.es*n*n)),e.x=i*Math.sin(n),e.y=this.am1-i*Math.cos(n),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function yEe(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,r,i,n;if(r=po(e.x,e.y=this.am1-e.y),n=VP(this.am1+this.m1-r,this.es,this.en),(t=Math.abs(n))<Mt)t=Math.sin(n),i=r*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(n);else if(Math.abs(t-Mt)<=cv)i=0;else throw new Error;return e.x=tr(i+(this.long0||0)),e.y=Yu(n),e}function wEe(e){var t=tr(e.x-(this.long0||0)),r=e.y,i,n;return n=this.cphi1+this.phi1-r,Math.abs(n)>cv?(e.x=n*Math.sin(i=t*Math.cos(r)/n),e.y=this.cphi1-n*Math.cos(i)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function xEe(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,r,i=po(e.x,e.y=this.cphi1-e.y);if(r=this.cphi1+this.phi1-i,Math.abs(r)>Mt)throw new Error;return Math.abs(Math.abs(r)-Mt)<=cv?t=0:t=i*Math.atan2(e.x,e.y)/Math.cos(r),e.x=tr(t+(this.long0||0)),e.y=Yu(r),e}var CEe=["bonne","Bonne (Werner lat_1=90)"];const _Ee={init:mEe,names:CEe};function bEe(e){e.Proj.projections.add(Ex),e.Proj.projections.add(Rx),e.Proj.projections.add(C_e),e.Proj.projections.add(F_e),e.Proj.projections.add(L_e),e.Proj.projections.add(G_e),e.Proj.projections.add($_e),e.Proj.projections.add(Y_e),e.Proj.projections.add(rbe),e.Proj.projections.add(abe),e.Proj.projections.add(xbe),e.Proj.projections.add(Rbe),e.Proj.projections.add(Abe),e.Proj.projections.add(Nbe),e.Proj.projections.add(Hbe),e.Proj.projections.add(qbe),e.Proj.projections.add(Qbe),e.Proj.projections.add(iSe),e.Proj.projections.add(cSe),e.Proj.projections.add(pSe),e.Proj.projections.add(wSe),e.Proj.projections.add(SSe),e.Proj.projections.add(ASe),e.Proj.projections.add(OSe),e.Proj.projections.add(VSe),e.Proj.projections.add(ZSe),e.Proj.projections.add(eEe),e.Proj.projections.add(sEe),e.Proj.projections.add(uEe),e.Proj.projections.add(gEe),e.Proj.projections.add(_Ee)}const DG=Object.assign(B1e,{defaultDatum:"WGS84",Proj:qa,WGS84:new qa("WGS84"),Point:Hp,toPoint:CG,defs:js,nadgrid:x1e,transform:KC,mgrs:z1e,version:"__VERSION__"});bEe(DG);function SEe({mouseCoords:e,coordSystem:t,onCoordSystemChange:r,zoom:i,isLoading:n}){const s=D.useMemo(()=>{if(!e)return null;if(t==="EPSG:4326")return{x:e.lng.toFixed(6),y:e.lat.toFixed(6)};{const[o,u]=DG("EPSG:4326","EPSG:3857",[e.lng,e.lat]);return{x:Math.round(o).toString(),y:Math.round(u).toString()}}},[e,t]),a=D.useMemo(()=>{const o=e?e.lat:0,u=156543.0339*Math.cos(o*Math.PI/180)/2**i;return Math.round(1/u)},[i,e]);return V.jsxs("div",{className:"bg-gray-200 border-t border-border flex items-center justify-between h-full px-4",children:[V.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n&&V.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}),V.jsx("p",{className:"text-sm text-muted-foreground",children:"Bottom Panel"})]}),V.jsxs("div",{className:"flex items-center gap-2",children:[s&&V.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.x,", ",s.y]}),V.jsxs("select",{value:t,onChange:o=>r(o.target.value),className:"text-sm border border-border rounded px-2 py-1 bg-background",children:[V.jsx("option",{value:"EPSG:4326",children:"EPSG:4326"}),V.jsx("option",{value:"EPSG:3857",children:"EPSG:3857"})]}),V.jsxs("span",{className:"text-sm text-muted-foreground",children:[": 1:",a.toLocaleString()]}),V.jsxs("span",{className:"text-sm text-muted-foreground",children:["Zoom: ",i.toFixed(1)]})]})]})}var EEe="Label",kG=D.forwardRef((e,t)=>V.jsx(Wr.label,{...e,ref:t,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));kG.displayName=EEe;var LG=kG;const X2=D.forwardRef(({className:e,...t},r)=>V.jsx(LG,{ref:r,className:Xi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));X2.displayName=LG.displayName;function OG(e){const t=D.useRef({value:e,previous:e});return D.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var qP="Radio",[REe,NG]=Ya(qP),[TEe,PEe]=REe(qP),BG=D.forwardRef((e,t)=>{const{__scopeRadio:r,name:i,checked:n=!1,required:s,disabled:a,value:o="on",onCheck:u,form:d,...p}=e,[v,y]=D.useState(null),_=Vi(t,M=>y(M)),P=D.useRef(!1),R=v?d||!!v.closest("form"):!0;return V.jsxs(TEe,{scope:r,checked:n,disabled:a,children:[V.jsx(Wr.button,{type:"button",role:"radio","aria-checked":n,"data-state":HG(n),"data-disabled":a?"":void 0,disabled:a,value:o,...p,ref:_,onClick:xr(e.onClick,M=>{n||u==null||u(),R&&(P.current=M.isPropagationStopped(),P.current||M.stopPropagation())})}),R&&V.jsx(VG,{control:v,bubbles:!P.current,name:i,value:o,checked:n,required:s,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});BG.displayName=qP;var zG="RadioIndicator",GG=D.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:i,...n}=e,s=PEe(zG,r);return V.jsx(qo,{present:i||s.checked,children:V.jsx(Wr.span,{"data-state":HG(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})})});GG.displayName=zG;var MEe="RadioBubbleInput",VG=D.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:i=!0,...n},s)=>{const a=D.useRef(null),o=Vi(a,s),u=OG(r),d=PT(t);return D.useEffect(()=>{const p=a.current;if(!p)return;const v=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(v,"checked").set;if(u!==r&&_){const P=new Event("click",{bubbles:i});_.call(p,r),p.dispatchEvent(P)}},[u,r,i]),V.jsx(Wr.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:o,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});VG.displayName=MEe;function HG(e){return e?"checked":"unchecked"}var FEe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t_="RadioGroup",[AEe]=Ya(t_,[eg,NG]),UG=eg(),WG=NG(),[IEe,DEe]=AEe(t_),jG=D.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:i,defaultValue:n,value:s,required:a=!1,disabled:o=!1,orientation:u,dir:d,loop:p=!0,onValueChange:v,...y}=e,_=UG(r),P=N1(d),[R,M]=Jp({prop:s,defaultProp:n??null,onChange:v,caller:t_});return V.jsx(IEe,{scope:r,name:i,required:a,disabled:o,value:R,onValueChange:M,children:V.jsx(DT,{asChild:!0,..._,orientation:u,dir:P,loop:p,children:V.jsx(Wr.div,{role:"radiogroup","aria-required":a,"aria-orientation":u,"data-disabled":o?"":void 0,dir:P,...y,ref:t})})})});jG.displayName=t_;var $G="RadioGroupItem",qG=D.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:i,...n}=e,s=DEe($G,r),a=s.disabled||i,o=UG(r),u=WG(r),d=D.useRef(null),p=Vi(t,d),v=s.value===n.value,y=D.useRef(!1);return D.useEffect(()=>{const _=R=>{FEe.includes(R.key)&&(y.current=!0)},P=()=>y.current=!1;return document.addEventListener("keydown",_),document.addEventListener("keyup",P),()=>{document.removeEventListener("keydown",_),document.removeEventListener("keyup",P)}},[]),V.jsx(kT,{asChild:!0,...o,focusable:!a,active:v,children:V.jsx(BG,{disabled:a,required:s.required,checked:v,...u,...n,name:s.name,ref:p,onCheck:()=>s.onValueChange(n.value),onKeyDown:xr(_=>{_.key==="Enter"&&_.preventDefault()}),onFocus:xr(n.onFocus,()=>{var _;y.current&&((_=d.current)==null||_.click())})})})});qG.displayName=$G;var kEe="RadioGroupIndicator",KG=D.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...i}=e,n=WG(r);return V.jsx(GG,{...n,...i,ref:t})});KG.displayName=kEe;var ZG=jG,XG=qG,LEe=KG;const YG=D.forwardRef(({className:e,...t},r)=>V.jsx(ZG,{className:Xi("grid gap-2",e),...t,ref:r}));YG.displayName=ZG.displayName;const QG=D.forwardRef(({className:e,...t},r)=>V.jsx(XG,{ref:r,className:Xi("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus:ring-2 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:V.jsx(LEe,{className:"flex items-center justify-center",children:V.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-primary"})})}));QG.displayName=XG.displayName;var r_="Checkbox",[OEe]=Ya(r_),[NEe,KP]=OEe(r_);function BEe(e){const{__scopeCheckbox:t,checked:r,children:i,defaultChecked:n,disabled:s,form:a,name:o,onCheckedChange:u,required:d,value:p="on",internal_do_not_use_render:v}=e,[y,_]=Jp({prop:r,defaultProp:n??!1,onChange:u,caller:r_}),[P,R]=D.useState(null),[M,F]=D.useState(null),k=D.useRef(!1),N=P?!!a||!!P.closest("form"):!0,G={checked:y,disabled:s,setChecked:_,control:P,setControl:R,name:o,form:a,value:p,hasConsumerStoppedPropagationRef:k,required:d,defaultChecked:Tu(n)?!1:n,isFormControl:N,bubbleInput:M,setBubbleInput:F};return V.jsx(NEe,{scope:t,...G,children:zEe(v)?v(G):i})}var JG="CheckboxTrigger",eV=D.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...i},n)=>{const{control:s,value:a,disabled:o,checked:u,required:d,setControl:p,setChecked:v,hasConsumerStoppedPropagationRef:y,isFormControl:_,bubbleInput:P}=KP(JG,e),R=Vi(n,p),M=D.useRef(u);return D.useEffect(()=>{const F=s==null?void 0:s.form;if(F){const k=()=>v(M.current);return F.addEventListener("reset",k),()=>F.removeEventListener("reset",k)}},[s,v]),V.jsx(Wr.button,{type:"button",role:"checkbox","aria-checked":Tu(u)?"mixed":u,"aria-required":d,"data-state":sV(u),"data-disabled":o?"":void 0,disabled:o,value:a,...i,ref:R,onKeyDown:xr(t,F=>{F.key==="Enter"&&F.preventDefault()}),onClick:xr(r,F=>{v(k=>Tu(k)?!0:!k),P&&_&&(y.current=F.isPropagationStopped(),y.current||F.stopPropagation())})})});eV.displayName=JG;var ZP=D.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:i,checked:n,defaultChecked:s,required:a,disabled:o,value:u,onCheckedChange:d,form:p,...v}=e;return V.jsx(BEe,{__scopeCheckbox:r,checked:n,defaultChecked:s,disabled:o,required:a,onCheckedChange:d,name:i,form:p,value:u,internal_do_not_use_render:({isFormControl:y})=>V.jsxs(V.Fragment,{children:[V.jsx(eV,{...v,ref:t,__scopeCheckbox:r}),y&&V.jsx(nV,{__scopeCheckbox:r})]})})});ZP.displayName=r_;var tV="CheckboxIndicator",rV=D.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:i,...n}=e,s=KP(tV,r);return V.jsx(qo,{present:i||Tu(s.checked)||s.checked===!0,children:V.jsx(Wr.span,{"data-state":sV(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});rV.displayName=tV;var iV="CheckboxBubbleInput",nV=D.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:i,hasConsumerStoppedPropagationRef:n,checked:s,defaultChecked:a,required:o,disabled:u,name:d,value:p,form:v,bubbleInput:y,setBubbleInput:_}=KP(iV,e),P=Vi(r,_),R=OG(s),M=PT(i);D.useEffect(()=>{const k=y;if(!k)return;const N=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(N,"checked").set,ee=!n.current;if(R!==s&&j){const q=new Event("click",{bubbles:ee});k.indeterminate=Tu(s),j.call(k,Tu(s)?!1:s),k.dispatchEvent(q)}},[y,R,s,n]);const F=D.useRef(Tu(s)?!1:s);return V.jsx(Wr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??F.current,required:o,disabled:u,name:d,value:p,form:v,...t,tabIndex:-1,ref:P,style:{...t.style,...M,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});nV.displayName=iV;function zEe(e){return typeof e=="function"}function Tu(e){return e==="indeterminate"}function sV(e){return Tu(e)?"indeterminate":e?"checked":"unchecked"}const oV=D.forwardRef(({className:e,...t},r)=>V.jsx(ZP,{ref:r,className:Xi("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:V.jsx(rV,{className:Xi("flex items-center justify-center text-current"),children:V.jsx(aO,{className:"h-4 w-4"})})}));oV.displayName=ZP.displayName;var i_="Dialog",[aV]=Ya(i_),[GEe,el]=aV(i_),lV=e=>{const{__scopeDialog:t,children:r,open:i,defaultOpen:n,onOpenChange:s,modal:a=!0}=e,o=D.useRef(null),u=D.useRef(null),[d,p]=Jp({prop:i,defaultProp:n??!1,onChange:s,caller:i_});return V.jsx(GEe,{scope:t,triggerRef:o,contentRef:u,contentId:lp(),titleId:lp(),descriptionId:lp(),open:d,onOpenChange:p,onOpenToggle:D.useCallback(()=>p(v=>!v),[p]),modal:a,children:r})};lV.displayName=i_;var cV="DialogTrigger",VEe=D.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,n=el(cV,r),s=Vi(t,n.triggerRef);return V.jsx(Wr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":QP(n.open),...i,ref:s,onClick:xr(e.onClick,n.onOpenToggle)})});VEe.displayName=cV;var XP="DialogPortal",[HEe,uV]=aV(XP,{forceMount:void 0}),hV=e=>{const{__scopeDialog:t,forceMount:r,children:i,container:n}=e,s=el(XP,t);return V.jsx(HEe,{scope:t,forceMount:r,children:D.Children.map(i,a=>V.jsx(qo,{present:r||s.open,children:V.jsx(k1,{asChild:!0,container:n,children:a})}))})};hV.displayName=XP;var QC="DialogOverlay",dV=D.forwardRef((e,t)=>{const r=uV(QC,e.__scopeDialog),{forceMount:i=r.forceMount,...n}=e,s=el(QC,e.__scopeDialog);return s.modal?V.jsx(qo,{present:i||s.open,children:V.jsx(WEe,{...n,ref:t})}):null});dV.displayName=QC;var UEe=Ap("DialogOverlay.RemoveScroll"),WEe=D.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,n=el(QC,r);return V.jsx(PP,{as:UEe,allowPinchZoom:!0,shards:[n.contentRef],children:V.jsx(Wr.div,{"data-state":QP(n.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),dd="DialogContent",fV=D.forwardRef((e,t)=>{const r=uV(dd,e.__scopeDialog),{forceMount:i=r.forceMount,...n}=e,s=el(dd,e.__scopeDialog);return V.jsx(qo,{present:i||s.open,children:s.modal?V.jsx(jEe,{...n,ref:t}):V.jsx($Ee,{...n,ref:t})})});fV.displayName=dd;var jEe=D.forwardRef((e,t)=>{const r=el(dd,e.__scopeDialog),i=D.useRef(null),n=Vi(t,r.contentRef,i);return D.useEffect(()=>{const s=i.current;if(s)return lz(s)},[]),V.jsx(pV,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xr(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:xr(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:xr(e.onFocusOutside,s=>s.preventDefault())})}),$Ee=D.forwardRef((e,t)=>{const r=el(dd,e.__scopeDialog),i=D.useRef(!1),n=D.useRef(!1);return V.jsx(pV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(i.current||(o=r.triggerRef.current)==null||o.focus(),s.preventDefault()),i.current=!1,n.current=!1},onInteractOutside:s=>{var u,d;(u=e.onInteractOutside)==null||u.call(e,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const a=s.target;((d=r.triggerRef.current)==null?void 0:d.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&n.current&&s.preventDefault()}})}),pV=D.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:n,onCloseAutoFocus:s,...a}=e,o=el(dd,r),u=D.useRef(null),d=Vi(t,u);return sz(),V.jsxs(V.Fragment,{children:[V.jsx(TP,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:n,onUnmountAutoFocus:s,children:V.jsx(P1,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":QP(o.open),...a,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),V.jsxs(V.Fragment,{children:[V.jsx(qEe,{titleId:o.titleId}),V.jsx(ZEe,{contentRef:u,descriptionId:o.descriptionId})]})]})}),YP="DialogTitle",gV=D.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,n=el(YP,r);return V.jsx(Wr.h2,{id:n.titleId,...i,ref:t})});gV.displayName=YP;var mV="DialogDescription",vV=D.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,n=el(mV,r);return V.jsx(Wr.p,{id:n.descriptionId,...i,ref:t})});vV.displayName=mV;var yV="DialogClose",wV=D.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,n=el(yV,r);return V.jsx(Wr.button,{type:"button",...i,ref:t,onClick:xr(e.onClick,()=>n.onOpenChange(!1))})});wV.displayName=yV;function QP(e){return e?"open":"closed"}var xV="DialogTitleWarning",[b2e,CV]=see(xV,{contentName:dd,titleName:YP,docsSlug:"dialog"}),qEe=({titleId:e})=>{const t=CV(xV),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return D.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},KEe="DialogDescriptionWarning",ZEe=({contentRef:e,descriptionId:t})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${CV(KEe).contentName}}.`;return D.useEffect(()=>{var s;const n=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(i))},[i,e,t]),null},XEe=lV,YEe=hV,_V=dV,bV=fV,SV=gV,EV=vV,QEe=wV;function JEe(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,s;for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}var e2e=["color"],t2e=D.forwardRef(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,n=JEe(e,e2e);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:t}),D.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))});const RV=XEe,r2e=YEe,TV=D.forwardRef(({className:e,...t},r)=>V.jsx(_V,{ref:r,className:Xi("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));TV.displayName=_V.displayName;const JP=D.forwardRef(({className:e,children:t,...r},i)=>V.jsxs(r2e,{children:[V.jsx(TV,{}),V.jsxs(bV,{ref:i,className:Xi("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,V.jsxs(QEe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[V.jsx(t2e,{className:"h-4 w-4"}),V.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));JP.displayName=bV.displayName;const eM=({className:e,...t})=>V.jsx("div",{className:Xi("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});eM.displayName="DialogHeader";const tM=D.forwardRef(({className:e,...t},r)=>V.jsx(SV,{ref:r,className:Xi("text-lg font-semibold leading-none tracking-tight",e),...t}));tM.displayName=SV.displayName;const i2e=D.forwardRef(({className:e,...t},r)=>V.jsx(EV,{ref:r,className:Xi("text-sm text-muted-foreground",e),...t}));i2e.displayName=EV.displayName;const PV={version:8,sources:{"carto-light":{type:"raster",tiles:["https://tiles.basemaps.cartocdn.com/gl/positron-gl-style/{z}/{x}/{y}.png"],tileSize:256,attribution:" CARTO"}},layers:[{id:"carto-light",type:"raster",source:"carto-light"}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"};function Gv(e,t){return{version:8,sources:{"raster-tiles":{type:"raster",tiles:e,tileSize:256,attribution:t}},layers:[{id:"raster-tiles",type:"raster",source:"raster-tiles"}]}}const n2e="https://tiles.basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",s2e="https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",o2e=["mt0","mt1","mt2","mt3"],n_=e=>o2e.map(t=>`https://${t}.google.com/vt/lyrs=${e}&x={x}&y={y}&z={z}`),a2e=Gv(n_("m")," Google"),l2e=Gv(n_("s")," Google"),c2e=Gv(n_("y")," Google"),u2e=Gv(n_("t")," Google"),h2e=[{key:"light",label:"Light (Positron)",url:PV},{key:"dark",label:"Dark Matter",url:n2e},{key:"voyager",label:"Voyager",url:s2e},{key:"g-road",label:"Google Road",url:a2e},{key:"g-sat",label:"Google Satellite",url:l2e},{key:"g-hybrid",label:"Google Hybrid",url:c2e},{key:"g-terrain",label:"Google Terrain",url:u2e}],d2e={category:[{name:"OpenStreetMap",image:"osm",tms:[{name:"osm",title:"",description:'   OpenStreetMap.<br/><a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>',type:"xyz",url:"https://tile.openstreetmap.org/{LEVEL}/{ROW}/{COL}.png",level:{min:0,max:19}}]},{name:"2GIS",image:"2gis",tms:[{name:"two_gis",title:"",description:'    2GIS    ,    . ,        ,     .<br/><a href="https://law.2gis.ru/licensing-agreement/">2GIS<\\a>',type:"xyz",url:"http://tile[0123].maps.2gis.com/tiles?x={ROW}&y={COL}&z={LEVEL}",level:{min:0,max:18}}]},{name:"Bing",image:"bing",tms:[{name:"bing_map_ru",title:" ()",description:'  Bing    .     ,    , ,    .<br/><a href="https://www.microsoft.com/servicesagreement/">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=ru-RU&it=G,VE,BX,L,LA&shading=hill&og=1631&n=z",level:{min:1,max:21}},{name:"bing_map_en",title:" ()",description:'  Bing       .     ,    , ,    .<br/><a href="https://www.microsoft.com/servicesagreement/">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=en-US&it=G,VE,BX,L,LA&shading=hill&og=1631&n=z",level:{min:1,max:21}},{name:"bing_satellite",title:"",description:'  Bing.<br/><a href="https://www.microsoft.com/servicesagreement/">Microsoft<\\a>',type:"quadkey",url:"http://ecn.t[0123].tiles.virtualearth.net/tiles/a{QUADKEY}.jpeg?g=11363",level:{min:1,max:19}},{name:"bing_hybrid_ru",title:" ()",description:'  Bing,            Bing.<br/><a href="https://www.microsoft.com/servicesagreement/">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=ru-RU&it=A,G,L&og=1631&n=z",level:{min:1,max:19}},{name:"bing_hybrid_en",title:" ()",description:'  Bing   ,            Bing.<br/><a href="https://www.microsoft.com/servicesagreement/">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=en-US&it=A,G,L&og=1631&n=z",level:{min:1,max:19}},{name:"bing_roads",title:"",description:'  Bing     .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?it=Z,G&shading=hill&og=1631&n=z",level:{min:1,max:21}},{name:"bing_names_ru",title:" ()",description:'     Bing   .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=ru-RU&it=Z,L&shading=hill&og=1631&n=z",level:{min:1,max:21}},{name:"bing_names_en",title:" ()",description:'     Bing      .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=en-US&it=Z,L&shading=hill&og=1631&n=z",level:{min:1,max:21}},{name:"bing_canvas_light",title:" ",description:'      Bing  .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?it=G&cstl=WL&og=1631&n=z",level:{min:1,max:21}},{name:"bing_canvas_gray",title:" ",description:'      Bing  .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?it=G&cstl=CG&og=1631&n=z",level:{min:1,max:21}},{name:"bing_canvas_black",title:" ",description:'      Bing  .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?it=G&cstl=WD&og=1631&n=z",level:{min:1,max:21}},{name:"bing_traffic",title:"",description:' Bing   .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ecn.t[0123].tiles.virtualearth.net/dp/content?p=tf&a={QUADKEY}&n=z",level:{min:7,max:21},liveTime:60}]},{name:"Here",image:"here",tms:[{name:"here_terrain_en1",title:" ()",description:'  HERRE       .<br/><a href="https://legal.here.com/terms">HERE<\\a>',type:"xyz",url:"https://maps.hereapi.com/v3/base/mc/{LEVEL}/{ROW}/{COL}/jpeg?apiKey=ULcxipCuamEAS6NsNntuAMM84LddvMOlXH0BsE2RfaU&lang=en&style=satellite.day&size=256"}]},{name:"TomTom",image:"tomtom",tms:[{name:"tomtom_traffic",title:"",description:' TomTom   .<br/><a href="https://www.tomtom.com/legal">TomTom<\\a>',type:"xyz",url:"https://d.api.tomtom.com/traffic/map/4/tile/flow/relative/{LEVEL}/{ROW}/{COL}.png?key=sATA9OwG11zrMKQcCxR3eSEjj2n8Jsrg",level:{min:6,max:22},liveTime:60}]},{name:"Waze",image:"waze",tms:[{name:"waze_map",description:'  Waze.<br/><a href="https://www.waze.com/legal/tos">Waze<\\a>',title:"",type:"xyz",url:"https://worldtiles1.waze.com/tiles/{LEVEL}/{ROW}/{COL}.png"}]},{name:"Digimap",image:"digimap",tms:[{name:"digimap",description:'  ,    ,           .         RuMap    ,    .<br/><a href="https://rumap.ru/rules.html"> -<\\a>',title:"",type:"xyz",url:"https://tile.digimap.ru/rumap/{LEVEL}/{ROW}/{COL}.png?guid=DDC7AEA4-1BDA-1019-A30D-1CD07F74BEED"}]},{name:"",image:"yandex",tms:[{name:"yandex_map_ru",title:"  ()",description:'  .<br/><a href="https://yandex.ru/legal/maps_termsofuse"><\\a>',type:"xyz",url:"https://core-renderer-tiles.maps.yandex.net/tiles?l=map&lang=ru_RU&x={ROW}&y={COL}&z={LEVEL}",level:{min:0,max:20},cs:'CoordSys Earth Projection 10, 104, "m", 0  Bounds (-20037508.3429, -20037508.3429) (20037508.3429, 20037508.3429)'},{name:"yandex_streetmap_en",title:"  ()",description:'    .<br/><a href="https://yandex.ru/legal/maps_termsofuse"><\\a>',type:"xyz",url:"https://core-renderer-tiles.maps.yandex.net/tiles?l=map&lang=en_US&x={ROW}&y={COL}&z={LEVEL}",level:{min:0,max:20},cs:'CoordSys Earth Projection 10, 104, "m", 0  Bounds (-20037508.3429, -20037508.3429) (20037508.3429, 20037508.3429)'},{name:"yandex_satellite",title:"",description:'  .        .<br/><a href="https://yandex.ru/legal/maps_termsofuse"><\\a>',type:"xyz",url:"https://core-sat.maps.yandex.net/tiles?l=sat&x={ROW}&y={COL}&z={LEVEL}&scale=1",level:{min:0,max:20},cs:'CoordSys Earth Projection 10, 104, "m", 0  Bounds (-20037508.3429, -20037508.3429) (20037508.3429, 20037508.3429)'},{name:"yandex_schema_and_names_ru",title:"   ()",description:'    ,   ,      .<br/><a href="https://yandex.ru/legal/maps_termsofuse"><\\a>',type:"xyz",url:"https://core-renderer-tiles.maps.yandex.net/tiles?l=skl&lang=ru_RU&x={ROW}&y={COL}&z={LEVEL}&scale=1",level:{min:0,max:20},cs:'CoordSys Earth Projection 10, 104, "m", 0  Bounds (-20037508.3429, -20037508.3429) (20037508.3429, 20037508.3429)'},{name:"yandex_schema_and_names_en",title:"   ()",description:'      ,   ,      .<br/><a href="https://yandex.ru/legal/maps_termsofuse"><\\a>',type:"xyz",url:"https://core-renderer-tiles.maps.yandex.net/tiles?l=skl&lang=en_US&x={ROW}&y={COL}&z={LEVEL}&scale=1",level:{min:0,max:20},cs:'CoordSys Earth Projection 10, 104, "m", 0  Bounds (-20037508.3429, -20037508.3429) (20037508.3429, 20037508.3429)'}]}]},f2e={services:d2e};function p2e(e){const t=e.match(/\[(.+?)\]/);return t?t[1].split("").map(i=>e.replace(t[0],i)):[e]}function g2e(e){return e.replace(/\{LEVEL\}/g,"{z}").replace(/\{ROW\}/g,"{x}").replace(/\{COL\}/g,"{y}")}function m2e(){var t;const e=[];try{const r=f2e,i=((t=r==null?void 0:r.services)==null?void 0:t.category)??[];for(const n of i)for(const s of n.tms??[]){if(s.type!=="xyz"||!s.url)continue;const a=p2e(g2e(String(s.url))),o=Gv(a,s.title??n.name);e.push({key:s.name,label:`${n.name}: ${s.title??s.name}`,url:o})}}catch{}return e}const mL=[{key:"none",label:"  ",url:null},...h2e,...m2e()];function v2e({open:e,onOpenChange:t,rowData:r,type:i}){const n={avts:"",name_otch:"",org_isp:"",god_nach:" ",god_end:" ",method:"",nom_1000:"",scale:"",tgf:"",in_n_rosg:".  ",in_n_tgf:".  ",n_uk_rosg:" ",n_uk_tgf:" ",web_uk_id:"",vid_iz:"",id:"",name_otch1:" ()"},s={},a=["id","avts","name_otch","org_isp","god_nach","god_end","method","nom_1000","scale","tgf","in_n_rosg","in_n_tgf","n_uk_rosg","n_uk_tgf","web_uk_id","vid_iz","name_otch1"],o=r&&typeof r=="object"?Object.entries(r).filter(([R,M])=>M!=null&&M!=="").filter(([R])=>a.includes(R)||R==="id").sort(([R],[M])=>{const F=a.indexOf(R),k=a.indexOf(M);return(F===-1?1/0:F)-(k===-1?1/0:k)}):[],[u,d]=D.useState(null),[p,v]=D.useState(!1),[y,_]=D.useState(null),P={points:"",lines:"",polygons:""};return D.useEffect(()=>{e&&(r!=null&&r.in_n_rosg)&&r.in_n_rosg!=="None"?(async()=>{v(!0),_(null);try{const M=`${fO}${pO}${r.in_n_rosg}`;console.log("Fetching RGF data:",M);const F=await fetch(M);if(console.log("Error fetching RGF data:",F),F.ok){const k=await F.json();k&&k.data&&typeof k.data=="object"&&Object.keys(k.data).length>0?d(k.data):d(null)}else d(null)}catch(M){console.error("Error fetching RGF data:",M),_("    "),d(null)}finally{v(!1)}})():(d(null),_(null))},[e,r]),V.jsx(RV,{open:e,onOpenChange:t,children:V.jsxs(JP,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[V.jsx(eM,{children:V.jsxs(tM,{children:["  - ",P[i]]})}),V.jsxs("div",{className:"space-y-2 py-4",children:[o.length>0?o.map(([R,M])=>V.jsxs("div",{className:"flex border-b border-gray-200 pb-2",children:[V.jsx("div",{className:"w-1/3 font-medium text-gray-700",children:n[R]||R}),V.jsx("div",{className:"w-2/3 text-gray-900",children:M!=null?String(M):""})]},R)):V.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"   "}),p&&V.jsxs("div",{className:"pt-4 text-center text-muted-foreground",children:[V.jsx("div",{className:"flex justify-center my-4",children:V.jsx("div",{className:"w-8 h-8 border-t-2 border-blue-500 rounded-full animate-spin"})}),V.jsx("p",{children:"  ..."})]}),y&&V.jsx("div",{className:"pt-4 text-center text-red-500",children:y}),!p&&!y&&u&&V.jsxs("div",{className:"pt-4 mt-4 border-t border-gray-200",children:[V.jsx("h3",{className:"font-bold text-lg mb-2",children:"   "}),Object.entries(u).filter(([R,M])=>M!=null&&M!=="").map(([R,M])=>V.jsxs("div",{className:"flex border-b border-gray-200 pb-2",children:[V.jsx("div",{className:"w-1/3 font-medium text-gray-700",children:s[R]||R}),V.jsx("div",{className:"w-2/3 text-gray-900",children:M!=null?String(M):""})]},R))]}),!p&&!y&&!u&&(r==null?void 0:r.n_uk_rosg)&&r.n_uk_rosg!=="None"&&V.jsx("div",{className:"pt-4 mt-4 border-t border-gray-200",children:V.jsx("p",{className:"text-center text-muted-foreground",children:"  "})})]})]})})}function y2e(e,t,r,i){const n=Mn.book_new(),s={avts:"",name_otch:"",org_isp:"",god_nach:" ",god_end:" ",method:"",nom_1000:"",scale:"",tgf:"",in_n_rosg:".  ",in_n_tgf:".  ",n_uk_rosg:" ",n_uk_tgf:" ",web_uk_id:"",vid_iz:"",id:"",name_otch1:" ()",name_rus:" (.)",name:""},a=p=>{if(p.length===0)return{data:[],headers:[]};const v=Array.from(new Set(p.flatMap(P=>Object.keys(P))));return{data:[v.map(P=>s[P]||P),...p.map(P=>v.map(R=>P[R]||""))],headers:v}};if(t&&t.length>0){const{data:p}=a(t),v=Mn.aoa_to_sheet(p);Mn.book_append_sheet(n,v,"")}if(r&&r.length>0){const{data:p}=a(r),v=Mn.aoa_to_sheet(p);Mn.book_append_sheet(n,v,"")}if(i&&i.length>0){const{data:p}=a(i),v=Mn.aoa_to_sheet(p);Mn.book_append_sheet(n,v,"")}const o=Object.entries(s).map(([p,v])=>[p,v]),u=Mn.aoa_to_sheet([[" "," "],...o]);Mn.book_append_sheet(n,u,"");const d=`__${e.properties.name_rus||e.properties.name||e.properties.id}.xlsx`;xT(n,d)}function w2e(){const[e,t]=D.useState("osm"),[r,i]=D.useState(!1),[n,s]=D.useState(!1),[a,o]=D.useState(!1),[u,d]=D.useState(!1),[p,v]=D.useState([]),[y,_]=D.useState(new Set),[P,R]=D.useState([]),[M,F]=D.useState([]),[k,N]=D.useState(!1),[G,j]=D.useState([]),[ee,q]=D.useState(null),[oe,ue]=D.useState(null),[me,ie]=D.useState(!1),[fe,ke]=D.useState(null),[et,Xe]=D.useState(!1),[ct,pt]=D.useState(!1),[Ge,Ye]=D.useState(null),[ht,Be]=D.useState("light"),[ce,he]=D.useState([]),[ve,_e]=D.useState([]),[Fe,qe]=D.useState([]),[at,ot]=D.useState(null),[Qe,Lt]=D.useState("EPSG:4326"),[Ot,er]=D.useState(2),[Yt,Qt]=D.useState(new Set),[qt,Et]=D.useState(new Set),[hr,rr]=D.useState(new Set),[Ke,Jt]=D.useState(null),[Nr,vr]=D.useState(null),[$t,ui]=D.useState(null),[ds,an]=D.useState(!1),[Ir,Kr]=D.useState(!1),[kn,fs]=D.useState(null),[Tt,Ji]=D.useState(!1),[Yr,ks]=D.useState(!1),[Ls,Ft]=D.useState(!1),[wr,yr]=D.useState(null),[wi,ps]=D.useState(null),sr=D.useRef(null);D.useEffect(()=>{fetch(`${Yh}/index.json`).then(J=>J.json()).then(J=>{const Re=J.tables||J||{},je={"gdx2.stp":" - ","gdx2.stl":" - ","gdx2.sta":" - ","gdx2.lu":" ","gdx2.field":""},Ie=["field","lu","sta","stl","stp"];let Le=[];Array.isArray(Re)?Le=Re:Le=Object.keys(Re).map(lt=>({id:lt,description:Re[lt].description,table:lt.split(".").pop()||lt,schema:lt.split(".")[0]||"public"}));const He=Le.map(lt=>{const wt=lt.table||lt.id.split(".").pop()||lt.id,gt=lt.id||`${lt.schema||"gdx2"}.${wt}`;return{name:wt,title:je[gt]||lt.description||wt,description:lt.description||wt,type:"xyz",url:`${Yh}/${gt}/{z}/{x}/{y}.pbf`,level:{min:0,max:22}}}).filter(lt=>Ie.includes(lt.name)).sort((lt,wt)=>Ie.indexOf(lt.name)-Ie.indexOf(wt.name));v(He);const rt=new Set(He.map(lt=>lt.name));_(rt)}).catch(J=>console.error("Failed to fetch layers:",J))},[]);const Ln=D.useMemo(()=>{const J=mL.find(Re=>Re.key===e);return J?J.url:PV},[e]),be=()=>{n?s(!1):(s(!0),i(!1),o(!1),d(!1))},Y=()=>{r?i(!1):(i(!0),s(!1),o(!1),d(!1))},te=()=>{u?d(!1):(d(!0),s(!1),i(!1),o(!1))},ge=()=>{a?o(!1):(o(!0),s(!1),i(!1),d(!1))},Se=(J,Re)=>{_(je=>{const Ie=new Set(je);return Re?Ie.add(J):Ie.delete(J),Ie})},Te=J=>{t(J),i(!1)};D.useEffect(()=>{if(fe&&P.length>0){const J=P[0];vr(J);const Re=[],je=[],Ie=[];P.forEach(Le=>{const He=Le.layer.id.split(".")[1];He==="stp"?Re.push(Le.properties):He==="stl"?je.push(Le.properties):He==="sta"&&Ie.push(Le.properties)}),he(Re),_e(je),qe(Ie),Ke&&Ke.properties.id!==J.properties.id&&Jt(null)}else if(fe&&P.length===0&&Ke){const J=[],Re=[],je=[],Ie=Ke.layer.id.split(".")[1];Ie==="stp"?J.push(Ke.properties):Ie==="stl"?Re.push(Ke.properties):Ie==="sta"&&je.push(Ke.properties),he(J),_e(Re),qe(je),(Nr==null?void 0:Nr.properties.id)!==Ke.properties.id&&vr(null)}else fe&&P.length===0&&!Ke&&($t||(he([]),_e([]),qe([])),Nr&&!Ke&&vr(null))},[P,fe,Ke,Jt,he,_e,qe,vr,Nr,$t]);const We=J=>{const Re=[],je=[],Ie=[];J.forEach(Le=>{const He=Le.layer.id.split(".")[1];He==="stp"?Re.push(Le.properties):He==="stl"?je.push(Le.properties):He==="sta"&&Ie.push(Le.properties)}),he(Re),_e(je),qe(Ie)},Ne=()=>{if(Yt.size>0)Qt(new Set);else{const J=new Set(ce.map(Re=>Re.id).filter(Re=>Re!=null).map(Re=>Re.toString()));Qt(J),_(Re=>new Set([...Re,"stp"]))}},Ae=()=>{if(qt.size>0)Et(new Set);else{const J=new Set(ve.map(Re=>Re.id).filter(Re=>Re!=null).map(Re=>Re.toString()));Et(J),_(Re=>new Set([...Re,"stl"]))}},Ve=()=>{if(hr.size>0)rr(new Set);else{const J=new Set(Fe.map(Re=>Re.id).filter(Re=>Re!=null).map(Re=>Re.toString()));rr(J),_(Re=>new Set([...Re,"sta"]))}},ut=J=>{Jt(J),ui(null)},dt=()=>{Ge==="attributes"?(Ye(null),pt(!1)):(Ye("attributes"),pt(!0),Xe(!1),Ji(!1),N(!1),ke(null),F([]),q(null),We([]),d(!0))},X=(J,Re)=>{ct?(F(J),We(J),q(Re),d(!0)):fe?J.length>0?(Jt(J[0]),vr(J[0]),We([J[0]]),d(!0)):(Jt(null),vr(null)):(F(J),et&&q(Re))};D.useEffect(()=>{if(k&&y.has("lu")){const J=()=>{if(sr.current){const je=sr.current.getMap();if(je&&je.isStyleLoaded())try{const Ie="gdx2.lu",Le="gdx2.lu";let He=[];try{He=je.querySourceFeatures(Ie,{sourceLayer:Le})}catch{try{He=je.querySourceFeatures(Ie)}catch{He=je.queryRenderedFeatures({layers:["gdx2.lu"]})}}He.length>0?j(He):setTimeout(J,500)}catch(Ie){console.error("Error loading LU features:",Ie),setTimeout(J,500)}else setTimeout(J,200)}},Re=setTimeout(J,300);return()=>clearTimeout(Re)}else k||j([])},[k,y]);const de=(J,Re)=>{Kr(!0),fs({row:J,type:Re});const je=Re==="points"?"stp":Re==="lines"?"stl":"sta";_(new Set([je])),setTimeout(()=>{if(sr.current&&J){const Ie=sr.current.getMap(),Le=Re==="points"?"gdx2.stp":Re==="lines"?"gdx2.stl":"gdx2.sta";["gdx2.stp","gdx2.stl","gdx2.sta","gdx2.lu","gdx2.field"].forEach(rt=>{if(Ie.getLayer(rt))if(rt===Le){Ie.setLayoutProperty(rt,"visibility","visible");const lt=J.id,wt=typeof lt=="number"?["==",["get","id"],lt]:["==",["get","id"],String(lt)];Ie.setFilter(rt,wt)}else Ie.setLayoutProperty(rt,"visibility","none"),Ie.setFilter(rt,null)}),Ie.triggerRepaint(),setTimeout(()=>{const rt=()=>{const lt=Ie.queryRenderedFeatures(void 0,{layers:[Le]});if(lt.length>0){const wt={type:"FeatureCollection",features:lt.map(Rr=>({type:"Feature",geometry:Rr.geometry,properties:Rr.properties}))},[gt,At,lr,br]=fl(wt);Ie.fitBounds([[gt,At],[lr,br]],{padding:50,duration:1e3}),Kr(!1)}else{const wt=Le,gt=Le.split(".")[1],At=J.id,lr=typeof At=="number"?["==","id",At]:["==","id",String(At)],br=Ie.querySourceFeatures(wt,{sourceLayer:gt,filter:lr});if(br.length>0){const mr=br[0].geometry;if(mr.type==="Point"){const ln=mr.coordinates;ln&&ln.length>=2&&!isNaN(ln[0])&&!isNaN(ln[1])&&Ie.flyTo({center:ln,zoom:12,duration:1e3})}else{const ln={type:"Feature",properties:{},geometry:mr},[$n,ei,Ur,Zo]=fl(ln);!isNaN($n)&&!isNaN(ei)&&!isNaN(Ur)&&!isNaN(Zo)&&Ie.fitBounds([[$n,ei],[Ur,Zo]],{padding:50,duration:1e3})}Kr(!1)}else setTimeout(()=>{rt()},500)}};rt()},300)}else Kr(!1)},100)},le=J=>{Kr(!0),fs(null);const Re=["field","lu","sta","stl","stp"];if(_(new Set(Re)),sr.current){const je=sr.current.getMap(),Ie=J==="points"?"gdx2.stp":J==="lines"?"gdx2.stl":"gdx2.sta";je.setFilter(Ie,null),["gdx2.stp","gdx2.stl","gdx2.sta","gdx2.lu","gdx2.field"].forEach(He=>{je.getLayer(He)&&je.setLayoutProperty(He,"visibility","visible")}),je.triggerRepaint()}setTimeout(()=>Kr(!1),300)},ae=(J,Re)=>{if(sr.current&&J){const je=sr.current.getMap(),Ie=Re==="points"?"gdx2.stp":Re==="lines"?"gdx2.stl":"gdx2.sta",Le=Ie,He=Ie.split(".")[1],rt=je.querySourceFeatures(Le,{sourceLayer:He,filter:["==","id",J.id]});if(rt.length>0){const wt=rt[0].geometry,gt={type:"Feature",properties:{},geometry:wt},[At,lr,br,Rr]=fl(gt);ps({minLng:At,minLat:lr,maxLng:br,maxLat:Rr}),ks(!0)}}},pe=(J,Re)=>{if($t&&$t.data.id===J.id&&$t.type===Re)ui(null),Jt(null);else{ui({data:J,type:Re}),Jt(null);const je=Re==="points"?"stp":Re==="lines"?"stl":"sta";_(Le=>new Set([...Le,je]));const Ie=()=>{if(sr.current&&J){const Le=sr.current.getMap(),He=Re==="points"?"gdx2.stp":Re==="lines"?"gdx2.stl":"gdx2.sta",rt=Le.queryRenderedFeatures(void 0,{layers:[He],filter:["==","id",J.id]});if(rt.length>0){const wt=rt[0].geometry;if(Re==="points"){const gt=wt.coordinates;gt&&gt.length>=2&&!isNaN(gt[0])&&!isNaN(gt[1])&&Le.flyTo({center:gt,zoom:12,duration:1e3})}else{const gt={type:"Feature",properties:{},geometry:wt},[At,lr,br,Rr]=fl(gt);!isNaN(At)&&!isNaN(lr)&&!isNaN(br)&&!isNaN(Rr)&&Le.fitBounds([[At,lr],[br,Rr]],{padding:80,duration:1e3})}}else setTimeout(Ie,200)}};setTimeout(Ie,10)}};return V.jsxs("div",{className:`min-h-screen bg-background text-foreground relative ${ht}`,children:[V.jsx(Rj,{theme:ht,onThemeChange:Be}),V.jsx(RV,{open:Yr,onOpenChange:ks,children:V.jsxs(JP,{children:[V.jsx(eM,{children:V.jsx(tM,{children:"Bounding Box "})}),wi&&V.jsx("div",{className:"space-y-2",children:V.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[V.jsxs("div",{children:[V.jsx("label",{className:"text-sm font-medium",children:" :"}),V.jsx("p",{className:"text-sm text-muted-foreground",children:wi.minLng.toFixed(6)})]}),V.jsxs("div",{children:[V.jsx("label",{className:"text-sm font-medium",children:" :"}),V.jsx("p",{className:"text-sm text-muted-foreground",children:wi.maxLng.toFixed(6)})]}),V.jsxs("div",{children:[V.jsx("label",{className:"text-sm font-medium",children:" :"}),V.jsx("p",{className:"text-sm text-muted-foreground",children:wi.minLat.toFixed(6)})]}),V.jsxs("div",{children:[V.jsx("label",{className:"text-sm font-medium",children:" :"}),V.jsx("p",{className:"text-sm text-muted-foreground",children:wi.maxLat.toFixed(6)})]})]})})]})}),wr&&wr.row&&V.jsx(v2e,{open:Ls,onOpenChange:Ft,rowData:wr.row,type:wr.type||"points"}),V.jsxs("main",{className:"absolute top-14 left-0 right-0 bottom-0",children:[V.jsx("div",{className:"absolute left-0 top-0 bottom-0 z-10",children:V.jsx(Cre,{onLayersClick:be,onBaseMapsClick:Y,onLegendClick:ge,onAttributesClick:te,isLayersActive:n,isBaseMapsActive:r,isLegendActive:a,isAttributesActive:u})}),n&&V.jsxs("div",{className:"absolute left-16 top-0 bottom-0 z-20 bg-background border-r border-border p-3 w-64",children:[V.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),V.jsx("div",{className:"space-y-2",children:[...p].reverse().map(J=>V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(oV,{id:`layer-${J.name}`,checked:y.has(J.name),onCheckedChange:Re=>Se(J.name,Re)}),V.jsx(X2,{htmlFor:`layer-${J.name}`,children:J.title})]},J.name))})]}),a&&V.jsx("div",{className:"absolute left-16 top-0 bottom-0 z-20 bg-background border-r border-border p-3 w-64",children:V.jsx(PCe,{visibleLayers:y,layers:p})}),r&&V.jsxs("div",{className:"absolute left-16 top-0 bottom-0 z-20 bg-background border-r border-border p-3 w-64",children:[V.jsx("h3",{className:"text-lg font-semibold mb-3",children:" "}),V.jsx(YG,{value:e,onValueChange:Te,children:V.jsx("div",{className:"space-y-2",children:mL.map(J=>V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(QG,{id:`popup-basemap-${J.key}`,value:J.key}),V.jsx(X2,{htmlFor:`popup-basemap-${J.key}`,children:J.label})]},J.key))})})]}),V.jsx("div",{className:`absolute top-0 right-0 bottom-0 ${r||n||a?"left-80":"left-16"}`,children:V.jsxs(YR,{direction:"vertical",children:[V.jsx(Oh,{defaultSize:u?60:80,minSize:30,children:V.jsx(pre,{hoveredFeatures:Ke&&P.length===0&&fe?[Ke]:P,clickedFeatures:M,showFeatureTable:me,onToggleFeatureTable:ie,activeInfoMode:fe,onSetActiveInfoMode:J=>{ke(J),J&&et&&Xe(!1),J?(pt(!1),Ji(!1),N(!1),Ye("hover-info")):!J&&Ge==="hover-info"&&Ye(null)},showMarkerInfo:et,onToggleMarkerInfo:J=>{J?(Ye("info"),Xe(!0),pt(!1),Ji(!1),N(!1),ke(null),he([]),_e([]),qe([]),d(!1),ui(null),fs(null),Jt(null),vr(null),F([]),q(null),Qt(new Set),Et(new Set),rr(new Set)):((Ge==="info"||Ge==="hover-info")&&Ye(null),Xe(!1))},showMarkerAttributes:ct,showLuSelect:k,onToggleLuSelect:J=>{J?(Ye("lu-select"),N(!0),Xe(!1),pt(!1),Ji(!1),ke(null),F([]),G.length===0&&y.has("lu")):(Ge==="lu-select"&&Ye(null),N(!1),Jt(null))},luFeatures:G,selectedLu:Ke,onLuSelect:(J,Re=!0)=>{if(J)if(Ke&&Ke.properties.id===J.properties.id){const je=J.geometry;let Ie=null;if(je.type==="Point")Ie={lng:je.coordinates[0],lat:je.coordinates[1]};else{const Le={type:"Feature",properties:{},geometry:je},[He,rt,lt,wt]=fl(Le);Ie={lng:(He+lt)/2,lat:(rt+wt)/2}}Ie&&(q(Ie),ue(J.properties.name_rus||J.properties.name||` ${J.properties.id}`),Re?(Xe(!0),Ye("info")):(Xe(!1),Ye(null)))}else if(q(null),Jt(J),Jt(J),ui(null),sr.current&&J.geometry){const je=sr.current.getMap(),Ie=J.geometry,Le={type:"Feature",properties:{},geometry:Ie},[He,rt,lt,wt]=fl(Le);je.fitBounds([[He,rt],[lt,wt]],{padding:50,duration:100}),setTimeout(()=>{if(sr.current){const gt=sr.current.getMap(),At=gt.queryRenderedFeatures({layers:["gdx2.sta"]}),lr=gt.queryRenderedFeatures({layers:["gdx2.stl"]}),br=gt.queryRenderedFeatures({layers:["gdx2.stp"]}),Rr=fl(Le),mr=Ur=>Ur.filter(Zo=>{const ti=fl({type:"Feature",properties:{},geometry:Zo.geometry});return!(ti[2]<Rr[0]||ti[0]>Rr[2]||ti[3]<Rr[1]||ti[1]>Rr[3])}),ln=mr(At),$n=mr(lr),ei=mr(br);qe(ln.map(Ur=>Ur.properties)),_e($n.map(Ur=>Ur.properties)),he(ei.map(Ur=>Ur.properties)),d(!0)}},100)}else qe([]),_e([]),he([]);else Jt(null),q(null),ue(null),qe([]),_e([]),he([])},onExportLuToExcel:J=>{y2e(J,ce,ve,Fe)},showAttributes:u,onToggleAttributes:J=>{J&&(We(M),ke(null)),d(J)},selectedFeature:Ke,onFeatureSelect:ut,onFeatureHover:vr,onMarkerAttributesClick:dt,showRectangleSelection:Tt,onSetRectangleSelection:J=>{J?(Ye("rectangle"),Ji(!0),Xe(!1),pt(!1),N(!1),ke(null)):(Ge==="rectangle"&&Ye(null),Ji(!1))},visibleLayers:y,children:V.jsx(m$,{ref:sr,styleUrl:Ln,visibleLayers:y,layers:p,onFeaturesHover:R,enableHover:fe!==null,infoMode:fe,onClick:X,marker:ee,markerLuName:oe??void 0,onMouseMoveCoords:ot,highlightedPoints:Yt,highlightedLines:qt,highlightedPolygons:hr,onZoomChange:er,selectedFeature:Ke,hoveredFeature:Nr,selectedAttributeRow:$t,onRedrawStart:()=>an(!0),onRedrawEnd:()=>an(!1),filteredFeature:kn,rectangleSelection:Tt,onRectangleSelect:J=>{if(sr.current){const Re=sr.current.getMap(),je=["gdx2.stp","gdx2.stl","gdx2.sta"].filter(br=>!!Re.getLayer(br)),Ie=Re.project({lng:J[0][0],lat:J[0][1]}),Le=Re.project({lng:J[1][0],lat:J[1][1]});let He=Math.min(Ie.x,Le.x),rt=Math.min(Ie.y,Le.y),lt=Math.max(Ie.x,Le.x),wt=Math.max(Ie.y,Le.y);He=Math.floor(He)-1,rt=Math.floor(rt)-1,lt=Math.ceil(lt)+1,wt=Math.ceil(wt)+1;const gt=[{x:He,y:rt},{x:lt,y:wt}],At=Re.queryRenderedFeatures(gt,{layers:je}),lr=At&&At.length>0?At:Re.queryRenderedFeatures([{x:He,y:rt},{x:lt,y:wt}]);We(lr),F(lr),d(!0)}}})})}),V.jsx(eC,{className:"h-2 bg-border"}),V.jsx(Oh,{defaultSize:u?50:20,minSize:20,maxSize:50,children:V.jsx(TCe,{visibleLayers:y,onLayerToggle:Se,pointsData:ce,linesData:ve,polygonsData:Fe,highlightedPoints:Yt,highlightedLines:qt,highlightedPolygons:hr,onToggleHighlightPoints:Ne,onToggleHighlightLines:Ae,onToggleHighlightPolygons:Ve,selectedAttributeRow:$t,onAttributeRowSelect:pe,activeInfoMode:fe,onZoomToFeature:(J,Re)=>{if(sr.current&&J){const je=sr.current.getMap(),Ie=Re==="points"?"gdx2.stp":Re==="lines"?"gdx2.stl":"gdx2.sta",Le=Ie,He=Ie.split(".")[1],rt=je.querySourceFeatures(Le,{sourceLayer:He,filter:["==","id",J.id]});if(rt.length===0){const lt=je.querySourceFeatures(Le,{filter:["==","id",J.id]});lt.length>0&&rt.splice(0,rt.length,...lt)}if(rt.length>0){const wt=rt[0].geometry;if(Re==="points"){const gt=wt.coordinates;je.flyTo({center:gt,zoom:12,duration:1e3})}else{const gt={type:"Feature",properties:{},geometry:wt},[At,lr,br,Rr]=fl(gt);je.fitBounds([[At,lr],[br,Rr]],{padding:50,duration:1e3})}}}},onShowBbox:ae,onShowReportCard:(J,Re)=>{yr({row:J,type:Re}),Ft(!0)},onFilterToFeature:de,onClearFilter:le,filteredFeature:kn})}),V.jsx(Oh,{defaultSize:2,minSize:2,maxSize:2,children:V.jsx(SEe,{mouseCoords:at,coordSystem:Qe,onCoordSystemChange:Lt,zoom:Ot,isLoading:ds||Ir})})]},u?"active":"inactive")})]})]})}QS.createRoot(document.getElementById("root")).render(V.jsx(Rt.StrictMode,{children:V.jsx(Fn,{children:V.jsx(w2e,{})})}));
