function US(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in e)){const h=Object.getOwnPropertyDescriptor(a,o);h&&Object.defineProperty(e,o,h.get?h:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(o){if(o.ep)return;o.ep=!0;const h=r(o);fetch(o.href,h)}})();var SP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var VS={exports:{}},Qm={},jS={exports:{}},_r={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd=Symbol.for("react.element"),TP=Symbol.for("react.portal"),EP=Symbol.for("react.fragment"),CP=Symbol.for("react.strict_mode"),AP=Symbol.for("react.profiler"),kP=Symbol.for("react.provider"),IP=Symbol.for("react.context"),PP=Symbol.for("react.forward_ref"),MP=Symbol.for("react.suspense"),RP=Symbol.for("react.memo"),DP=Symbol.for("react.lazy"),i2=Symbol.iterator;function LP(e){return e===null||typeof e!="object"?null:(e=i2&&e[i2]||e["@@iterator"],typeof e=="function"?e:null)}var $S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GS=Object.assign,WS={};function yh(e,t,r){this.props=e,this.context=t,this.refs=WS,this.updater=r||$S}yh.prototype.isReactComponent={};yh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};yh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function HS(){}HS.prototype=yh.prototype;function jx(e,t,r){this.props=e,this.context=t,this.refs=WS,this.updater=r||$S}var $x=jx.prototype=new HS;$x.constructor=jx;GS($x,yh.prototype);$x.isPureReactComponent=!0;var a2=Array.isArray,qS=Object.prototype.hasOwnProperty,Gx={current:null},ZS={key:!0,ref:!0,__self:!0,__source:!0};function XS(e,t,r){var a,o={},h=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(h=""+t.key),t)qS.call(t,a)&&!ZS.hasOwnProperty(a)&&(o[a]=t[a]);var l=arguments.length-2;if(l===1)o.children=r;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];o.children=b}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)o[a]===void 0&&(o[a]=l[a]);return{$$typeof:Gd,type:e,key:h,ref:d,props:o,_owner:Gx.current}}function FP(e,t){return{$$typeof:Gd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gd}function zP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var s2=/\/+/g;function $_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zP(""+e.key):t.toString(36)}function $0(e,t,r,a,o){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(h){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Gd:case TP:d=!0}}if(d)return d=e,o=o(d),e=a===""?"."+$_(d,0):a,a2(o)?(r="",e!=null&&(r=e.replace(s2,"$&/")+"/"),$0(o,t,r,"",function(w){return w})):o!=null&&(Wx(o)&&(o=FP(o,r+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(s2,"$&/")+"/")+e)),t.push(o)),1;if(d=0,a=a===""?".":a+":",a2(e))for(var l=0;l<e.length;l++){h=e[l];var b=a+$_(h,l);d+=$0(h,t,r,b,o)}else if(b=LP(e),typeof b=="function")for(e=b.call(e),l=0;!(h=e.next()).done;)h=h.value,b=a+$_(h,l++),d+=$0(h,t,r,b,o);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function p0(e,t,r){if(e==null)return e;var a=[],o=0;return $0(e,a,"","",function(h){return t.call(r,h,o++)}),a}function OP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ki={current:null},G0={transition:null},NP={ReactCurrentDispatcher:Ki,ReactCurrentBatchConfig:G0,ReactCurrentOwner:Gx};function KS(){throw Error("act(...) is not supported in production builds of React.")}_r.Children={map:p0,forEach:function(e,t,r){p0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return p0(e,function(){t++}),t},toArray:function(e){return p0(e,function(t){return t})||[]},only:function(e){if(!Wx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_r.Component=yh;_r.Fragment=EP;_r.Profiler=AP;_r.PureComponent=jx;_r.StrictMode=CP;_r.Suspense=MP;_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NP;_r.act=KS;_r.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=GS({},e.props),o=e.key,h=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,d=Gx.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)qS.call(t,b)&&!ZS.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=r;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];a.children=l}return{$$typeof:Gd,type:e.type,key:o,ref:h,props:a,_owner:d}};_r.createContext=function(e){return e={$$typeof:IP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kP,_context:e},e.Consumer=e};_r.createElement=XS;_r.createFactory=function(e){var t=XS.bind(null,e);return t.type=e,t};_r.createRef=function(){return{current:null}};_r.forwardRef=function(e){return{$$typeof:PP,render:e}};_r.isValidElement=Wx;_r.lazy=function(e){return{$$typeof:DP,_payload:{_status:-1,_result:e},_init:OP}};_r.memo=function(e,t){return{$$typeof:RP,type:e,compare:t===void 0?null:t}};_r.startTransition=function(e){var t=G0.transition;G0.transition={};try{e()}finally{G0.transition=t}};_r.unstable_act=KS;_r.useCallback=function(e,t){return Ki.current.useCallback(e,t)};_r.useContext=function(e){return Ki.current.useContext(e)};_r.useDebugValue=function(){};_r.useDeferredValue=function(e){return Ki.current.useDeferredValue(e)};_r.useEffect=function(e,t){return Ki.current.useEffect(e,t)};_r.useId=function(){return Ki.current.useId()};_r.useImperativeHandle=function(e,t,r){return Ki.current.useImperativeHandle(e,t,r)};_r.useInsertionEffect=function(e,t){return Ki.current.useInsertionEffect(e,t)};_r.useLayoutEffect=function(e,t){return Ki.current.useLayoutEffect(e,t)};_r.useMemo=function(e,t){return Ki.current.useMemo(e,t)};_r.useReducer=function(e,t,r){return Ki.current.useReducer(e,t,r)};_r.useRef=function(e){return Ki.current.useRef(e)};_r.useState=function(e){return Ki.current.useState(e)};_r.useSyncExternalStore=function(e,t,r){return Ki.current.useSyncExternalStore(e,t,r)};_r.useTransition=function(){return Ki.current.useTransition()};_r.version="18.3.1";jS.exports=_r;var ae=jS.exports;const xo=Vx(ae),Hx=US({__proto__:null,default:xo},[ae]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BP=ae,UP=Symbol.for("react.element"),VP=Symbol.for("react.fragment"),jP=Object.prototype.hasOwnProperty,$P=BP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GP={key:!0,ref:!0,__self:!0,__source:!0};function YS(e,t,r){var a,o={},h=null,d=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)jP.call(t,a)&&!GP.hasOwnProperty(a)&&(o[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)o[a]===void 0&&(o[a]=t[a]);return{$$typeof:UP,type:e,key:h,ref:d,props:o,_owner:$P.current}}Qm.Fragment=VP;Qm.jsx=YS;Qm.jsxs=YS;VS.exports=Qm;var Se=VS.exports,Ly={},JS={exports:{}},Da={},QS={exports:{}},eT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ke,dt){var Dt=Ke.length;Ke.push(dt);e:for(;0<Dt;){var jt=Dt-1>>>1,xe=Ke[jt];if(0<o(xe,dt))Ke[jt]=dt,Ke[Dt]=xe,Dt=jt;else break e}}function r(Ke){return Ke.length===0?null:Ke[0]}function a(Ke){if(Ke.length===0)return null;var dt=Ke[0],Dt=Ke.pop();if(Dt!==dt){Ke[0]=Dt;e:for(var jt=0,xe=Ke.length,Te=xe>>>1;jt<Te;){var be=2*(jt+1)-1,Ee=Ke[be],je=be+1,Je=Ke[je];if(0>o(Ee,Dt))je<xe&&0>o(Je,Ee)?(Ke[jt]=Je,Ke[je]=Dt,jt=je):(Ke[jt]=Ee,Ke[be]=Dt,jt=be);else if(je<xe&&0>o(Je,Dt))Ke[jt]=Je,Ke[je]=Dt,jt=je;else break e}}return dt}function o(Ke,dt){var Dt=Ke.sortIndex-dt.sortIndex;return Dt!==0?Dt:Ke.id-dt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var d=Date,l=d.now();e.unstable_now=function(){return d.now()-l}}var b=[],w=[],E=1,P=null,k=3,R=!1,z=!1,D=!1,G=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(Ke){for(var dt=r(w);dt!==null;){if(dt.callback===null)a(w);else if(dt.startTime<=Ke)a(w),dt.sortIndex=dt.expirationTime,t(b,dt);else break;dt=r(w)}}function Q(Ke){if(D=!1,W(Ke),!z)if(r(b)!==null)z=!0,nt(_e);else{var dt=r(w);dt!==null&&Rt(Q,dt.startTime-Ke)}}function _e(Ke,dt){z=!1,D&&(D=!1,B(we),we=-1),R=!0;var Dt=k;try{for(W(dt),P=r(b);P!==null&&(!(P.expirationTime>dt)||Ke&&!$e());){var jt=P.callback;if(typeof jt=="function"){P.callback=null,k=P.priorityLevel;var xe=jt(P.expirationTime<=dt);dt=e.unstable_now(),typeof xe=="function"?P.callback=xe:P===r(b)&&a(b),W(dt)}else a(b);P=r(b)}if(P!==null)var Te=!0;else{var be=r(w);be!==null&&Rt(Q,be.startTime-dt),Te=!1}return Te}finally{P=null,k=Dt,R=!1}}var Ce=!1,te=null,we=-1,Pe=5,ke=-1;function $e(){return!(e.unstable_now()-ke<Pe)}function Ue(){if(te!==null){var Ke=e.unstable_now();ke=Ke;var dt=!0;try{dt=te(!0,Ke)}finally{dt?at():(Ce=!1,te=null)}}else Ce=!1}var at;if(typeof N=="function")at=function(){N(Ue)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,gt=yt.port2;yt.port1.onmessage=Ue,at=function(){gt.postMessage(null)}}else at=function(){G(Ue,0)};function nt(Ke){te=Ke,Ce||(Ce=!0,at())}function Rt(Ke,dt){we=G(function(){Ke(e.unstable_now())},dt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ke){Ke.callback=null},e.unstable_continueExecution=function(){z||R||(z=!0,nt(_e))},e.unstable_forceFrameRate=function(Ke){0>Ke||125<Ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Pe=0<Ke?Math.floor(1e3/Ke):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(Ke){switch(k){case 1:case 2:case 3:var dt=3;break;default:dt=k}var Dt=k;k=dt;try{return Ke()}finally{k=Dt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ke,dt){switch(Ke){case 1:case 2:case 3:case 4:case 5:break;default:Ke=3}var Dt=k;k=Ke;try{return dt()}finally{k=Dt}},e.unstable_scheduleCallback=function(Ke,dt,Dt){var jt=e.unstable_now();switch(typeof Dt=="object"&&Dt!==null?(Dt=Dt.delay,Dt=typeof Dt=="number"&&0<Dt?jt+Dt:jt):Dt=jt,Ke){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=Dt+xe,Ke={id:E++,callback:dt,priorityLevel:Ke,startTime:Dt,expirationTime:xe,sortIndex:-1},Dt>jt?(Ke.sortIndex=Dt,t(w,Ke),r(b)===null&&Ke===r(w)&&(D?(B(we),we=-1):D=!0,Rt(Q,Dt-jt))):(Ke.sortIndex=xe,t(b,Ke),z||R||(z=!0,nt(_e))),Ke},e.unstable_shouldYield=$e,e.unstable_wrapCallback=function(Ke){var dt=k;return function(){var Dt=k;k=dt;try{return Ke.apply(this,arguments)}finally{k=Dt}}}})(eT);QS.exports=eT;var WP=QS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HP=ae,Ma=WP;function bt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tT=new Set,pd={};function Dc(e,t){oh(e,t),oh(e+"Capture",t)}function oh(e,t){for(pd[e]=t,e=0;e<t.length;e++)tT.add(t[e])}var Po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fy=Object.prototype.hasOwnProperty,qP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o2={},l2={};function ZP(e){return Fy.call(l2,e)?!0:Fy.call(o2,e)?!1:qP.test(e)?l2[e]=!0:(o2[e]=!0,!1)}function XP(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KP(e,t,r,a){if(t===null||typeof t>"u"||XP(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Yi(e,t,r,a,o,h,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=d}var gi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){gi[e]=new Yi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];gi[t]=new Yi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){gi[e]=new Yi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){gi[e]=new Yi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){gi[e]=new Yi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){gi[e]=new Yi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){gi[e]=new Yi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){gi[e]=new Yi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){gi[e]=new Yi(e,5,!1,e.toLowerCase(),null,!1,!1)});var qx=/[\-:]([a-z])/g;function Zx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qx,Zx);gi[t]=new Yi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qx,Zx);gi[t]=new Yi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qx,Zx);gi[t]=new Yi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){gi[e]=new Yi(e,1,!1,e.toLowerCase(),null,!1,!1)});gi.xlinkHref=new Yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){gi[e]=new Yi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xx(e,t,r,a){var o=gi.hasOwnProperty(t)?gi[t]:null;(o!==null?o.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KP(t,r,o,a)&&(r=null),a||o===null?ZP(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,a=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var No=HP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,m0=Symbol.for("react.element"),Du=Symbol.for("react.portal"),Lu=Symbol.for("react.fragment"),Kx=Symbol.for("react.strict_mode"),zy=Symbol.for("react.profiler"),rT=Symbol.for("react.provider"),nT=Symbol.for("react.context"),Yx=Symbol.for("react.forward_ref"),Oy=Symbol.for("react.suspense"),Ny=Symbol.for("react.suspense_list"),Jx=Symbol.for("react.memo"),ll=Symbol.for("react.lazy"),iT=Symbol.for("react.offscreen"),c2=Symbol.iterator;function Ff(e){return e===null||typeof e!="object"?null:(e=c2&&e[c2]||e["@@iterator"],typeof e=="function"?e:null)}var gn=Object.assign,G_;function Hf(e){if(G_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);G_=t&&t[1]||""}return`
`+G_+e}var W_=!1;function H_(e,t){if(!e||W_)return"";W_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var a=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){a=w}e.call(t.prototype)}else{try{throw Error()}catch(w){a=w}e()}}catch(w){if(w&&a&&typeof w.stack=="string"){for(var o=w.stack.split(`
`),h=a.stack.split(`
`),d=o.length-1,l=h.length-1;1<=d&&0<=l&&o[d]!==h[l];)l--;for(;1<=d&&0<=l;d--,l--)if(o[d]!==h[l]){if(d!==1||l!==1)do if(d--,l--,0>l||o[d]!==h[l]){var b=`
`+o[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=l);break}}}finally{W_=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Hf(e):""}function YP(e){switch(e.tag){case 5:return Hf(e.type);case 16:return Hf("Lazy");case 13:return Hf("Suspense");case 19:return Hf("SuspenseList");case 0:case 2:case 15:return e=H_(e.type,!1),e;case 11:return e=H_(e.type.render,!1),e;case 1:return e=H_(e.type,!0),e;default:return""}}function By(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Lu:return"Fragment";case Du:return"Portal";case zy:return"Profiler";case Kx:return"StrictMode";case Oy:return"Suspense";case Ny:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nT:return(e.displayName||"Context")+".Consumer";case rT:return(e._context.displayName||"Context")+".Provider";case Yx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jx:return t=e.displayName||null,t!==null?t:By(e.type)||"Memo";case ll:t=e._payload,e=e._init;try{return By(e(t))}catch{}}return null}function JP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return By(t);case 8:return t===Kx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Al(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function aT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QP(e){var t=aT(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(d){a=""+d,h.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function g0(e){e._valueTracker||(e._valueTracker=QP(e))}function sT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=aT(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function om(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Uy(e,t){var r=t.checked;return gn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function u2(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Al(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oT(e,t){t=t.checked,t!=null&&Xx(e,"checked",t,!1)}function Vy(e,t){oT(e,t);var r=Al(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jy(e,t.type,r):t.hasOwnProperty("defaultValue")&&jy(e,t.type,Al(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function h2(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function jy(e,t,r){(t!=="number"||om(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var qf=Array.isArray;function qu(e,t,r,a){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Al(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,a&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function $y(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(bt(91));return gn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function f2(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(bt(92));if(qf(r)){if(1<r.length)throw Error(bt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Al(r)}}function lT(e,t){var r=Al(t.value),a=Al(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function d2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _0,uT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_0=_0||document.createElement("div"),_0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function md(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Qf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e3=["Webkit","ms","Moz","O"];Object.keys(Qf).forEach(function(e){e3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qf[t]=Qf[e]})});function hT(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Qf.hasOwnProperty(e)&&Qf[e]?(""+t).trim():t+"px"}function fT(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,o=hT(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,o):e[r]=o}}var t3=gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wy(e,t){if(t){if(t3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(bt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(bt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(bt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(bt(62))}}function Hy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qy=null;function Qx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zy=null,Zu=null,Xu=null;function p2(e){if(e=qd(e)){if(typeof Zy!="function")throw Error(bt(280));var t=e.stateNode;t&&(t=ig(t),Zy(e.stateNode,e.type,t))}}function dT(e){Zu?Xu?Xu.push(e):Xu=[e]:Zu=e}function pT(){if(Zu){var e=Zu,t=Xu;if(Xu=Zu=null,p2(e),t)for(e=0;e<t.length;e++)p2(t[e])}}function mT(e,t){return e(t)}function gT(){}var q_=!1;function _T(e,t,r){if(q_)return e(t,r);q_=!0;try{return mT(e,t,r)}finally{q_=!1,(Zu!==null||Xu!==null)&&(gT(),pT())}}function gd(e,t){var r=e.stateNode;if(r===null)return null;var a=ig(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(bt(231,t,typeof r));return r}var Xy=!1;if(Po)try{var zf={};Object.defineProperty(zf,"passive",{get:function(){Xy=!0}}),window.addEventListener("test",zf,zf),window.removeEventListener("test",zf,zf)}catch{Xy=!1}function r3(e,t,r,a,o,h,d,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(E){this.onError(E)}}var ed=!1,lm=null,cm=!1,Ky=null,n3={onError:function(e){ed=!0,lm=e}};function i3(e,t,r,a,o,h,d,l,b){ed=!1,lm=null,r3.apply(n3,arguments)}function a3(e,t,r,a,o,h,d,l,b){if(i3.apply(this,arguments),ed){if(ed){var w=lm;ed=!1,lm=null}else throw Error(bt(198));cm||(cm=!0,Ky=w)}}function Lc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function yT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m2(e){if(Lc(e)!==e)throw Error(bt(188))}function s3(e){var t=e.alternate;if(!t){if(t=Lc(e),t===null)throw Error(bt(188));return t!==e?null:e}for(var r=e,a=t;;){var o=r.return;if(o===null)break;var h=o.alternate;if(h===null){if(a=o.return,a!==null){r=a;continue}break}if(o.child===h.child){for(h=o.child;h;){if(h===r)return m2(o),e;if(h===a)return m2(o),t;h=h.sibling}throw Error(bt(188))}if(r.return!==a.return)r=o,a=h;else{for(var d=!1,l=o.child;l;){if(l===r){d=!0,r=o,a=h;break}if(l===a){d=!0,a=o,r=h;break}l=l.sibling}if(!d){for(l=h.child;l;){if(l===r){d=!0,r=h,a=o;break}if(l===a){d=!0,a=h,r=o;break}l=l.sibling}if(!d)throw Error(bt(189))}}if(r.alternate!==a)throw Error(bt(190))}if(r.tag!==3)throw Error(bt(188));return r.stateNode.current===r?e:t}function xT(e){return e=s3(e),e!==null?vT(e):null}function vT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vT(e);if(t!==null)return t;e=e.sibling}return null}var wT=Ma.unstable_scheduleCallback,g2=Ma.unstable_cancelCallback,o3=Ma.unstable_shouldYield,l3=Ma.unstable_requestPaint,Mn=Ma.unstable_now,c3=Ma.unstable_getCurrentPriorityLevel,ev=Ma.unstable_ImmediatePriority,bT=Ma.unstable_UserBlockingPriority,um=Ma.unstable_NormalPriority,u3=Ma.unstable_LowPriority,ST=Ma.unstable_IdlePriority,eg=null,Xs=null;function h3(e){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(eg,e,void 0,(e.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:p3,f3=Math.log,d3=Math.LN2;function p3(e){return e>>>=0,e===0?32:31-(f3(e)/d3|0)|0}var y0=64,x0=4194304;function Zf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hm(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,o=e.suspendedLanes,h=e.pingedLanes,d=r&268435455;if(d!==0){var l=d&~o;l!==0?a=Zf(l):(h&=d,h!==0&&(a=Zf(h)))}else d=r&~o,d!==0?a=Zf(d):h!==0&&(a=Zf(h));if(a===0)return 0;if(t!==0&&t!==a&&!(t&o)&&(o=a&-a,h=t&-t,o>=h||o===16&&(h&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Ts(t),o=1<<r,a|=e[r],t&=~o;return a}function m3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g3(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,h=e.pendingLanes;0<h;){var d=31-Ts(h),l=1<<d,b=o[d];b===-1?(!(l&r)||l&a)&&(o[d]=m3(l,t)):b<=t&&(e.expiredLanes|=l),h&=~l}}function Yy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TT(){var e=y0;return y0<<=1,!(y0&4194240)&&(y0=64),e}function Z_(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Wd(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ts(t),e[t]=r}function _3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-Ts(r),h=1<<o;t[o]=0,a[o]=-1,e[o]=-1,r&=~h}}function tv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Ts(r),o=1<<a;o&t|e[a]&t&&(e[a]|=t),r&=~o}}var Dr=0;function ET(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CT,rv,AT,kT,IT,Jy=!1,v0=[],_l=null,yl=null,xl=null,_d=new Map,yd=new Map,ul=[],y3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _2(e,t){switch(e){case"focusin":case"focusout":_l=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":xl=null;break;case"pointerover":case"pointerout":_d.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(t.pointerId)}}function Of(e,t,r,a,o,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:h,targetContainers:[o]},t!==null&&(t=qd(t),t!==null&&rv(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function x3(e,t,r,a,o){switch(t){case"focusin":return _l=Of(_l,e,t,r,a,o),!0;case"dragenter":return yl=Of(yl,e,t,r,a,o),!0;case"mouseover":return xl=Of(xl,e,t,r,a,o),!0;case"pointerover":var h=o.pointerId;return _d.set(h,Of(_d.get(h)||null,e,t,r,a,o)),!0;case"gotpointercapture":return h=o.pointerId,yd.set(h,Of(yd.get(h)||null,e,t,r,a,o)),!0}return!1}function PT(e){var t=dc(e.target);if(t!==null){var r=Lc(t);if(r!==null){if(t=r.tag,t===13){if(t=yT(r),t!==null){e.blockedOn=t,IT(e.priority,function(){AT(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function W0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);qy=a,r.target.dispatchEvent(a),qy=null}else return t=qd(r),t!==null&&rv(t),e.blockedOn=r,!1;t.shift()}return!0}function y2(e,t,r){W0(e)&&r.delete(t)}function v3(){Jy=!1,_l!==null&&W0(_l)&&(_l=null),yl!==null&&W0(yl)&&(yl=null),xl!==null&&W0(xl)&&(xl=null),_d.forEach(y2),yd.forEach(y2)}function Nf(e,t){e.blockedOn===t&&(e.blockedOn=null,Jy||(Jy=!0,Ma.unstable_scheduleCallback(Ma.unstable_NormalPriority,v3)))}function xd(e){function t(o){return Nf(o,e)}if(0<v0.length){Nf(v0[0],e);for(var r=1;r<v0.length;r++){var a=v0[r];a.blockedOn===e&&(a.blockedOn=null)}}for(_l!==null&&Nf(_l,e),yl!==null&&Nf(yl,e),xl!==null&&Nf(xl,e),_d.forEach(t),yd.forEach(t),r=0;r<ul.length;r++)a=ul[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<ul.length&&(r=ul[0],r.blockedOn===null);)PT(r),r.blockedOn===null&&ul.shift()}var Ku=No.ReactCurrentBatchConfig,fm=!0;function w3(e,t,r,a){var o=Dr,h=Ku.transition;Ku.transition=null;try{Dr=1,nv(e,t,r,a)}finally{Dr=o,Ku.transition=h}}function b3(e,t,r,a){var o=Dr,h=Ku.transition;Ku.transition=null;try{Dr=4,nv(e,t,r,a)}finally{Dr=o,Ku.transition=h}}function nv(e,t,r,a){if(fm){var o=Qy(e,t,r,a);if(o===null)iy(e,t,a,dm,r),_2(e,a);else if(x3(o,e,t,r,a))a.stopPropagation();else if(_2(e,a),t&4&&-1<y3.indexOf(e)){for(;o!==null;){var h=qd(o);if(h!==null&&CT(h),h=Qy(e,t,r,a),h===null&&iy(e,t,a,dm,r),h===o)break;o=h}o!==null&&a.stopPropagation()}else iy(e,t,a,null,r)}}var dm=null;function Qy(e,t,r,a){if(dm=null,e=Qx(a),e=dc(e),e!==null)if(t=Lc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=yT(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dm=e,null}function MT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c3()){case ev:return 1;case bT:return 4;case um:case u3:return 16;case ST:return 536870912;default:return 16}default:return 16}}var dl=null,iv=null,H0=null;function RT(){if(H0)return H0;var e,t=iv,r=t.length,a,o="value"in dl?dl.value:dl.textContent,h=o.length;for(e=0;e<r&&t[e]===o[e];e++);var d=r-e;for(a=1;a<=d&&t[r-a]===o[h-a];a++);return H0=o.slice(e,1<a?1-a:void 0)}function q0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function w0(){return!0}function x2(){return!1}function La(e){function t(r,a,o,h,d){this._reactName=r,this._targetInst=o,this.type=a,this.nativeEvent=h,this.target=d,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(h):h[l]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?w0:x2,this.isPropagationStopped=x2,this}return gn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=w0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=w0)},persist:function(){},isPersistent:w0}),t}var xh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},av=La(xh),Hd=gn({},xh,{view:0,detail:0}),S3=La(Hd),X_,K_,Bf,tg=gn({},Hd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bf&&(Bf&&e.type==="mousemove"?(X_=e.screenX-Bf.screenX,K_=e.screenY-Bf.screenY):K_=X_=0,Bf=e),X_)},movementY:function(e){return"movementY"in e?e.movementY:K_}}),v2=La(tg),T3=gn({},tg,{dataTransfer:0}),E3=La(T3),C3=gn({},Hd,{relatedTarget:0}),Y_=La(C3),A3=gn({},xh,{animationName:0,elapsedTime:0,pseudoElement:0}),k3=La(A3),I3=gn({},xh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P3=La(I3),M3=gn({},xh,{data:0}),w2=La(M3),R3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=L3[e])?!!t[e]:!1}function sv(){return F3}var z3=gn({},Hd,{key:function(e){if(e.key){var t=R3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=q0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?D3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sv,charCode:function(e){return e.type==="keypress"?q0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?q0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),O3=La(z3),N3=gn({},tg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b2=La(N3),B3=gn({},Hd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sv}),U3=La(B3),V3=gn({},xh,{propertyName:0,elapsedTime:0,pseudoElement:0}),j3=La(V3),$3=gn({},tg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G3=La($3),W3=[9,13,27,32],ov=Po&&"CompositionEvent"in window,td=null;Po&&"documentMode"in document&&(td=document.documentMode);var H3=Po&&"TextEvent"in window&&!td,DT=Po&&(!ov||td&&8<td&&11>=td),S2=" ",T2=!1;function LT(e,t){switch(e){case"keyup":return W3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fu=!1;function q3(e,t){switch(e){case"compositionend":return FT(t);case"keypress":return t.which!==32?null:(T2=!0,S2);case"textInput":return e=t.data,e===S2&&T2?null:e;default:return null}}function Z3(e,t){if(Fu)return e==="compositionend"||!ov&&LT(e,t)?(e=RT(),H0=iv=dl=null,Fu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return DT&&t.locale!=="ko"?null:t.data;default:return null}}var X3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!X3[e.type]:t==="textarea"}function zT(e,t,r,a){dT(a),t=pm(t,"onChange"),0<t.length&&(r=new av("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var rd=null,vd=null;function K3(e){qT(e,0)}function rg(e){var t=Nu(e);if(sT(t))return e}function Y3(e,t){if(e==="change")return t}var OT=!1;if(Po){var J_;if(Po){var Q_="oninput"in document;if(!Q_){var C2=document.createElement("div");C2.setAttribute("oninput","return;"),Q_=typeof C2.oninput=="function"}J_=Q_}else J_=!1;OT=J_&&(!document.documentMode||9<document.documentMode)}function A2(){rd&&(rd.detachEvent("onpropertychange",NT),vd=rd=null)}function NT(e){if(e.propertyName==="value"&&rg(vd)){var t=[];zT(t,vd,e,Qx(e)),_T(K3,t)}}function J3(e,t,r){e==="focusin"?(A2(),rd=t,vd=r,rd.attachEvent("onpropertychange",NT)):e==="focusout"&&A2()}function Q3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rg(vd)}function eM(e,t){if(e==="click")return rg(t)}function tM(e,t){if(e==="input"||e==="change")return rg(t)}function rM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ks=typeof Object.is=="function"?Object.is:rM;function wd(e,t){if(ks(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var o=r[a];if(!Fy.call(t,o)||!ks(e[o],t[o]))return!1}return!0}function k2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function I2(e,t){var r=k2(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=k2(r)}}function BT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?BT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function UT(){for(var e=window,t=om();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=om(e.document)}return t}function lv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nM(e){var t=UT(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&BT(r.ownerDocument.documentElement,r)){if(a!==null&&lv(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,h=Math.min(a.start,o);a=a.end===void 0?h:Math.min(a.end,o),!e.extend&&h>a&&(o=a,a=h,h=o),o=I2(r,h);var d=I2(r,a);o&&d&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),h>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var iM=Po&&"documentMode"in document&&11>=document.documentMode,zu=null,ex=null,nd=null,tx=!1;function P2(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tx||zu==null||zu!==om(a)||(a=zu,"selectionStart"in a&&lv(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),nd&&wd(nd,a)||(nd=a,a=pm(ex,"onSelect"),0<a.length&&(t=new av("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=zu)))}function b0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ou={animationend:b0("Animation","AnimationEnd"),animationiteration:b0("Animation","AnimationIteration"),animationstart:b0("Animation","AnimationStart"),transitionend:b0("Transition","TransitionEnd")},ey={},VT={};Po&&(VT=document.createElement("div").style,"AnimationEvent"in window||(delete Ou.animationend.animation,delete Ou.animationiteration.animation,delete Ou.animationstart.animation),"TransitionEvent"in window||delete Ou.transitionend.transition);function ng(e){if(ey[e])return ey[e];if(!Ou[e])return e;var t=Ou[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in VT)return ey[e]=t[r];return e}var jT=ng("animationend"),$T=ng("animationiteration"),GT=ng("animationstart"),WT=ng("transitionend"),HT=new Map,M2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fl(e,t){HT.set(e,t),Dc(t,[e])}for(var ty=0;ty<M2.length;ty++){var ry=M2[ty],aM=ry.toLowerCase(),sM=ry[0].toUpperCase()+ry.slice(1);Fl(aM,"on"+sM)}Fl(jT,"onAnimationEnd");Fl($T,"onAnimationIteration");Fl(GT,"onAnimationStart");Fl("dblclick","onDoubleClick");Fl("focusin","onFocus");Fl("focusout","onBlur");Fl(WT,"onTransitionEnd");oh("onMouseEnter",["mouseout","mouseover"]);oh("onMouseLeave",["mouseout","mouseover"]);oh("onPointerEnter",["pointerout","pointerover"]);oh("onPointerLeave",["pointerout","pointerover"]);Dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xf));function R2(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,a3(a,t,void 0,e),e.currentTarget=null}function qT(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],o=a.event;a=a.listeners;e:{var h=void 0;if(t)for(var d=a.length-1;0<=d;d--){var l=a[d],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==h&&o.isPropagationStopped())break e;R2(o,l,w),h=b}else for(d=0;d<a.length;d++){if(l=a[d],b=l.instance,w=l.currentTarget,l=l.listener,b!==h&&o.isPropagationStopped())break e;R2(o,l,w),h=b}}}if(cm)throw e=Ky,cm=!1,Ky=null,e}function en(e,t){var r=t[sx];r===void 0&&(r=t[sx]=new Set);var a=e+"__bubble";r.has(a)||(ZT(t,e,2,!1),r.add(a))}function ny(e,t,r){var a=0;t&&(a|=4),ZT(r,e,a,t)}var S0="_reactListening"+Math.random().toString(36).slice(2);function bd(e){if(!e[S0]){e[S0]=!0,tT.forEach(function(r){r!=="selectionchange"&&(oM.has(r)||ny(r,!1,e),ny(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[S0]||(t[S0]=!0,ny("selectionchange",!1,t))}}function ZT(e,t,r,a){switch(MT(t)){case 1:var o=w3;break;case 4:o=b3;break;default:o=nv}r=o.bind(null,t,r,e),o=void 0,!Xy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),a?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function iy(e,t,r,a,o){var h=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var l=a.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(d===4)for(d=a.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===o||b.nodeType===8&&b.parentNode===o))return;d=d.return}for(;l!==null;){if(d=dc(l),d===null)return;if(b=d.tag,b===5||b===6){a=h=d;continue e}l=l.parentNode}}a=a.return}_T(function(){var w=h,E=Qx(r),P=[];e:{var k=HT.get(e);if(k!==void 0){var R=av,z=e;switch(e){case"keypress":if(q0(r)===0)break e;case"keydown":case"keyup":R=O3;break;case"focusin":z="focus",R=Y_;break;case"focusout":z="blur",R=Y_;break;case"beforeblur":case"afterblur":R=Y_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=v2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=E3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=U3;break;case jT:case $T:case GT:R=k3;break;case WT:R=j3;break;case"scroll":R=S3;break;case"wheel":R=G3;break;case"copy":case"cut":case"paste":R=P3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=b2}var D=(t&4)!==0,G=!D&&e==="scroll",B=D?k!==null?k+"Capture":null:k;D=[];for(var N=w,W;N!==null;){W=N;var Q=W.stateNode;if(W.tag===5&&Q!==null&&(W=Q,B!==null&&(Q=gd(N,B),Q!=null&&D.push(Sd(N,Q,W)))),G)break;N=N.return}0<D.length&&(k=new R(k,z,null,r,E),P.push({event:k,listeners:D}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",k&&r!==qy&&(z=r.relatedTarget||r.fromElement)&&(dc(z)||z[Mo]))break e;if((R||k)&&(k=E.window===E?E:(k=E.ownerDocument)?k.defaultView||k.parentWindow:window,R?(z=r.relatedTarget||r.toElement,R=w,z=z?dc(z):null,z!==null&&(G=Lc(z),z!==G||z.tag!==5&&z.tag!==6)&&(z=null)):(R=null,z=w),R!==z)){if(D=v2,Q="onMouseLeave",B="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(D=b2,Q="onPointerLeave",B="onPointerEnter",N="pointer"),G=R==null?k:Nu(R),W=z==null?k:Nu(z),k=new D(Q,N+"leave",R,r,E),k.target=G,k.relatedTarget=W,Q=null,dc(E)===w&&(D=new D(B,N+"enter",z,r,E),D.target=W,D.relatedTarget=G,Q=D),G=Q,R&&z)t:{for(D=R,B=z,N=0,W=D;W;W=Cu(W))N++;for(W=0,Q=B;Q;Q=Cu(Q))W++;for(;0<N-W;)D=Cu(D),N--;for(;0<W-N;)B=Cu(B),W--;for(;N--;){if(D===B||B!==null&&D===B.alternate)break t;D=Cu(D),B=Cu(B)}D=null}else D=null;R!==null&&D2(P,k,R,D,!1),z!==null&&G!==null&&D2(P,G,z,D,!0)}}e:{if(k=w?Nu(w):window,R=k.nodeName&&k.nodeName.toLowerCase(),R==="select"||R==="input"&&k.type==="file")var _e=Y3;else if(E2(k))if(OT)_e=tM;else{_e=Q3;var Ce=J3}else(R=k.nodeName)&&R.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(_e=eM);if(_e&&(_e=_e(e,w))){zT(P,_e,r,E);break e}Ce&&Ce(e,k,w),e==="focusout"&&(Ce=k._wrapperState)&&Ce.controlled&&k.type==="number"&&jy(k,"number",k.value)}switch(Ce=w?Nu(w):window,e){case"focusin":(E2(Ce)||Ce.contentEditable==="true")&&(zu=Ce,ex=w,nd=null);break;case"focusout":nd=ex=zu=null;break;case"mousedown":tx=!0;break;case"contextmenu":case"mouseup":case"dragend":tx=!1,P2(P,r,E);break;case"selectionchange":if(iM)break;case"keydown":case"keyup":P2(P,r,E)}var te;if(ov)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Fu?LT(e,r)&&(we="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(we="onCompositionStart");we&&(DT&&r.locale!=="ko"&&(Fu||we!=="onCompositionStart"?we==="onCompositionEnd"&&Fu&&(te=RT()):(dl=E,iv="value"in dl?dl.value:dl.textContent,Fu=!0)),Ce=pm(w,we),0<Ce.length&&(we=new w2(we,e,null,r,E),P.push({event:we,listeners:Ce}),te?we.data=te:(te=FT(r),te!==null&&(we.data=te)))),(te=H3?q3(e,r):Z3(e,r))&&(w=pm(w,"onBeforeInput"),0<w.length&&(E=new w2("onBeforeInput","beforeinput",null,r,E),P.push({event:E,listeners:w}),E.data=te))}qT(P,t)})}function Sd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function pm(e,t){for(var r=t+"Capture",a=[];e!==null;){var o=e,h=o.stateNode;o.tag===5&&h!==null&&(o=h,h=gd(e,r),h!=null&&a.unshift(Sd(e,h,o)),h=gd(e,t),h!=null&&a.push(Sd(e,h,o))),e=e.return}return a}function Cu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function D2(e,t,r,a,o){for(var h=t._reactName,d=[];r!==null&&r!==a;){var l=r,b=l.alternate,w=l.stateNode;if(b!==null&&b===a)break;l.tag===5&&w!==null&&(l=w,o?(b=gd(r,h),b!=null&&d.unshift(Sd(r,b,l))):o||(b=gd(r,h),b!=null&&d.push(Sd(r,b,l)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var lM=/\r\n?/g,cM=/\u0000|\uFFFD/g;function L2(e){return(typeof e=="string"?e:""+e).replace(lM,`
`).replace(cM,"")}function T0(e,t,r){if(t=L2(t),L2(e)!==t&&r)throw Error(bt(425))}function mm(){}var rx=null,nx=null;function ix(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ax=typeof setTimeout=="function"?setTimeout:void 0,uM=typeof clearTimeout=="function"?clearTimeout:void 0,F2=typeof Promise=="function"?Promise:void 0,hM=typeof queueMicrotask=="function"?queueMicrotask:typeof F2<"u"?function(e){return F2.resolve(null).then(e).catch(fM)}:ax;function fM(e){setTimeout(function(){throw e})}function ay(e,t){var r=t,a=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(a===0){e.removeChild(o),xd(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=o}while(r);xd(t)}function vl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function z2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var vh=Math.random().toString(36).slice(2),qs="__reactFiber$"+vh,Td="__reactProps$"+vh,Mo="__reactContainer$"+vh,sx="__reactEvents$"+vh,dM="__reactListeners$"+vh,pM="__reactHandles$"+vh;function dc(e){var t=e[qs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Mo]||r[qs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=z2(e);e!==null;){if(r=e[qs])return r;e=z2(e)}return t}e=r,r=e.parentNode}return null}function qd(e){return e=e[qs]||e[Mo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(bt(33))}function ig(e){return e[Td]||null}var ox=[],Bu=-1;function zl(e){return{current:e}}function tn(e){0>Bu||(e.current=ox[Bu],ox[Bu]=null,Bu--)}function Xr(e,t){Bu++,ox[Bu]=e.current,e.current=t}var kl={},Ri=zl(kl),la=zl(!1),wc=kl;function lh(e,t){var r=e.type.contextTypes;if(!r)return kl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var o={},h;for(h in r)o[h]=t[h];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ca(e){return e=e.childContextTypes,e!=null}function gm(){tn(la),tn(Ri)}function O2(e,t,r){if(Ri.current!==kl)throw Error(bt(168));Xr(Ri,t),Xr(la,r)}function XT(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var o in a)if(!(o in t))throw Error(bt(108,JP(e)||"Unknown",o));return gn({},r,a)}function _m(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kl,wc=Ri.current,Xr(Ri,e),Xr(la,la.current),!0}function N2(e,t,r){var a=e.stateNode;if(!a)throw Error(bt(169));r?(e=XT(e,t,wc),a.__reactInternalMemoizedMergedChildContext=e,tn(la),tn(Ri),Xr(Ri,e)):tn(la),Xr(la,r)}var wo=null,ag=!1,sy=!1;function KT(e){wo===null?wo=[e]:wo.push(e)}function mM(e){ag=!0,KT(e)}function Ol(){if(!sy&&wo!==null){sy=!0;var e=0,t=Dr;try{var r=wo;for(Dr=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}wo=null,ag=!1}catch(o){throw wo!==null&&(wo=wo.slice(e+1)),wT(ev,Ol),o}finally{Dr=t,sy=!1}}return null}var Uu=[],Vu=0,ym=null,xm=0,Ka=[],Ya=0,bc=null,To=1,Eo="";function cc(e,t){Uu[Vu++]=xm,Uu[Vu++]=ym,ym=e,xm=t}function YT(e,t,r){Ka[Ya++]=To,Ka[Ya++]=Eo,Ka[Ya++]=bc,bc=e;var a=To;e=Eo;var o=32-Ts(a)-1;a&=~(1<<o),r+=1;var h=32-Ts(t)+o;if(30<h){var d=o-o%5;h=(a&(1<<d)-1).toString(32),a>>=d,o-=d,To=1<<32-Ts(t)+o|r<<o|a,Eo=h+e}else To=1<<h|r<<o|a,Eo=e}function cv(e){e.return!==null&&(cc(e,1),YT(e,1,0))}function uv(e){for(;e===ym;)ym=Uu[--Vu],Uu[Vu]=null,xm=Uu[--Vu],Uu[Vu]=null;for(;e===bc;)bc=Ka[--Ya],Ka[Ya]=null,Eo=Ka[--Ya],Ka[Ya]=null,To=Ka[--Ya],Ka[Ya]=null}var Ia=null,ka=null,cn=!1,xs=null;function JT(e,t){var r=Qa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function B2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ia=e,ka=vl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ia=e,ka=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=bc!==null?{id:To,overflow:Eo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ia=e,ka=null,!0):!1;default:return!1}}function lx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function cx(e){if(cn){var t=ka;if(t){var r=t;if(!B2(e,t)){if(lx(e))throw Error(bt(418));t=vl(r.nextSibling);var a=Ia;t&&B2(e,t)?JT(a,r):(e.flags=e.flags&-4097|2,cn=!1,Ia=e)}}else{if(lx(e))throw Error(bt(418));e.flags=e.flags&-4097|2,cn=!1,Ia=e}}}function U2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ia=e}function E0(e){if(e!==Ia)return!1;if(!cn)return U2(e),cn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ix(e.type,e.memoizedProps)),t&&(t=ka)){if(lx(e))throw QT(),Error(bt(418));for(;t;)JT(e,t),t=vl(t.nextSibling)}if(U2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(bt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ka=vl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ka=null}}else ka=Ia?vl(e.stateNode.nextSibling):null;return!0}function QT(){for(var e=ka;e;)e=vl(e.nextSibling)}function ch(){ka=Ia=null,cn=!1}function hv(e){xs===null?xs=[e]:xs.push(e)}var gM=No.ReactCurrentBatchConfig;function Uf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(bt(309));var a=r.stateNode}if(!a)throw Error(bt(147,e));var o=a,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(d){var l=o.refs;d===null?delete l[h]:l[h]=d},t._stringRef=h,t)}if(typeof e!="string")throw Error(bt(284));if(!r._owner)throw Error(bt(290,e))}return e}function C0(e,t){throw e=Object.prototype.toString.call(t),Error(bt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function V2(e){var t=e._init;return t(e._payload)}function eE(e){function t(B,N){if(e){var W=B.deletions;W===null?(B.deletions=[N],B.flags|=16):W.push(N)}}function r(B,N){if(!e)return null;for(;N!==null;)t(B,N),N=N.sibling;return null}function a(B,N){for(B=new Map;N!==null;)N.key!==null?B.set(N.key,N):B.set(N.index,N),N=N.sibling;return B}function o(B,N){return B=Tl(B,N),B.index=0,B.sibling=null,B}function h(B,N,W){return B.index=W,e?(W=B.alternate,W!==null?(W=W.index,W<N?(B.flags|=2,N):W):(B.flags|=2,N)):(B.flags|=1048576,N)}function d(B){return e&&B.alternate===null&&(B.flags|=2),B}function l(B,N,W,Q){return N===null||N.tag!==6?(N=dy(W,B.mode,Q),N.return=B,N):(N=o(N,W),N.return=B,N)}function b(B,N,W,Q){var _e=W.type;return _e===Lu?E(B,N,W.props.children,Q,W.key):N!==null&&(N.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===ll&&V2(_e)===N.type)?(Q=o(N,W.props),Q.ref=Uf(B,N,W),Q.return=B,Q):(Q=em(W.type,W.key,W.props,null,B.mode,Q),Q.ref=Uf(B,N,W),Q.return=B,Q)}function w(B,N,W,Q){return N===null||N.tag!==4||N.stateNode.containerInfo!==W.containerInfo||N.stateNode.implementation!==W.implementation?(N=py(W,B.mode,Q),N.return=B,N):(N=o(N,W.children||[]),N.return=B,N)}function E(B,N,W,Q,_e){return N===null||N.tag!==7?(N=_c(W,B.mode,Q,_e),N.return=B,N):(N=o(N,W),N.return=B,N)}function P(B,N,W){if(typeof N=="string"&&N!==""||typeof N=="number")return N=dy(""+N,B.mode,W),N.return=B,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case m0:return W=em(N.type,N.key,N.props,null,B.mode,W),W.ref=Uf(B,null,N),W.return=B,W;case Du:return N=py(N,B.mode,W),N.return=B,N;case ll:var Q=N._init;return P(B,Q(N._payload),W)}if(qf(N)||Ff(N))return N=_c(N,B.mode,W,null),N.return=B,N;C0(B,N)}return null}function k(B,N,W,Q){var _e=N!==null?N.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return _e!==null?null:l(B,N,""+W,Q);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case m0:return W.key===_e?b(B,N,W,Q):null;case Du:return W.key===_e?w(B,N,W,Q):null;case ll:return _e=W._init,k(B,N,_e(W._payload),Q)}if(qf(W)||Ff(W))return _e!==null?null:E(B,N,W,Q,null);C0(B,W)}return null}function R(B,N,W,Q,_e){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return B=B.get(W)||null,l(N,B,""+Q,_e);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m0:return B=B.get(Q.key===null?W:Q.key)||null,b(N,B,Q,_e);case Du:return B=B.get(Q.key===null?W:Q.key)||null,w(N,B,Q,_e);case ll:var Ce=Q._init;return R(B,N,W,Ce(Q._payload),_e)}if(qf(Q)||Ff(Q))return B=B.get(W)||null,E(N,B,Q,_e,null);C0(N,Q)}return null}function z(B,N,W,Q){for(var _e=null,Ce=null,te=N,we=N=0,Pe=null;te!==null&&we<W.length;we++){te.index>we?(Pe=te,te=null):Pe=te.sibling;var ke=k(B,te,W[we],Q);if(ke===null){te===null&&(te=Pe);break}e&&te&&ke.alternate===null&&t(B,te),N=h(ke,N,we),Ce===null?_e=ke:Ce.sibling=ke,Ce=ke,te=Pe}if(we===W.length)return r(B,te),cn&&cc(B,we),_e;if(te===null){for(;we<W.length;we++)te=P(B,W[we],Q),te!==null&&(N=h(te,N,we),Ce===null?_e=te:Ce.sibling=te,Ce=te);return cn&&cc(B,we),_e}for(te=a(B,te);we<W.length;we++)Pe=R(te,B,we,W[we],Q),Pe!==null&&(e&&Pe.alternate!==null&&te.delete(Pe.key===null?we:Pe.key),N=h(Pe,N,we),Ce===null?_e=Pe:Ce.sibling=Pe,Ce=Pe);return e&&te.forEach(function($e){return t(B,$e)}),cn&&cc(B,we),_e}function D(B,N,W,Q){var _e=Ff(W);if(typeof _e!="function")throw Error(bt(150));if(W=_e.call(W),W==null)throw Error(bt(151));for(var Ce=_e=null,te=N,we=N=0,Pe=null,ke=W.next();te!==null&&!ke.done;we++,ke=W.next()){te.index>we?(Pe=te,te=null):Pe=te.sibling;var $e=k(B,te,ke.value,Q);if($e===null){te===null&&(te=Pe);break}e&&te&&$e.alternate===null&&t(B,te),N=h($e,N,we),Ce===null?_e=$e:Ce.sibling=$e,Ce=$e,te=Pe}if(ke.done)return r(B,te),cn&&cc(B,we),_e;if(te===null){for(;!ke.done;we++,ke=W.next())ke=P(B,ke.value,Q),ke!==null&&(N=h(ke,N,we),Ce===null?_e=ke:Ce.sibling=ke,Ce=ke);return cn&&cc(B,we),_e}for(te=a(B,te);!ke.done;we++,ke=W.next())ke=R(te,B,we,ke.value,Q),ke!==null&&(e&&ke.alternate!==null&&te.delete(ke.key===null?we:ke.key),N=h(ke,N,we),Ce===null?_e=ke:Ce.sibling=ke,Ce=ke);return e&&te.forEach(function(Ue){return t(B,Ue)}),cn&&cc(B,we),_e}function G(B,N,W,Q){if(typeof W=="object"&&W!==null&&W.type===Lu&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case m0:e:{for(var _e=W.key,Ce=N;Ce!==null;){if(Ce.key===_e){if(_e=W.type,_e===Lu){if(Ce.tag===7){r(B,Ce.sibling),N=o(Ce,W.props.children),N.return=B,B=N;break e}}else if(Ce.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===ll&&V2(_e)===Ce.type){r(B,Ce.sibling),N=o(Ce,W.props),N.ref=Uf(B,Ce,W),N.return=B,B=N;break e}r(B,Ce);break}else t(B,Ce);Ce=Ce.sibling}W.type===Lu?(N=_c(W.props.children,B.mode,Q,W.key),N.return=B,B=N):(Q=em(W.type,W.key,W.props,null,B.mode,Q),Q.ref=Uf(B,N,W),Q.return=B,B=Q)}return d(B);case Du:e:{for(Ce=W.key;N!==null;){if(N.key===Ce)if(N.tag===4&&N.stateNode.containerInfo===W.containerInfo&&N.stateNode.implementation===W.implementation){r(B,N.sibling),N=o(N,W.children||[]),N.return=B,B=N;break e}else{r(B,N);break}else t(B,N);N=N.sibling}N=py(W,B.mode,Q),N.return=B,B=N}return d(B);case ll:return Ce=W._init,G(B,N,Ce(W._payload),Q)}if(qf(W))return z(B,N,W,Q);if(Ff(W))return D(B,N,W,Q);C0(B,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,N!==null&&N.tag===6?(r(B,N.sibling),N=o(N,W),N.return=B,B=N):(r(B,N),N=dy(W,B.mode,Q),N.return=B,B=N),d(B)):r(B,N)}return G}var uh=eE(!0),tE=eE(!1),vm=zl(null),wm=null,ju=null,fv=null;function dv(){fv=ju=wm=null}function pv(e){var t=vm.current;tn(vm),e._currentValue=t}function ux(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Yu(e,t){wm=e,fv=ju=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(oa=!0),e.firstContext=null)}function ts(e){var t=e._currentValue;if(fv!==e)if(e={context:e,memoizedValue:t,next:null},ju===null){if(wm===null)throw Error(bt(308));ju=e,wm.dependencies={lanes:0,firstContext:e}}else ju=ju.next=e;return t}var pc=null;function mv(e){pc===null?pc=[e]:pc.push(e)}function rE(e,t,r,a){var o=t.interleaved;return o===null?(r.next=r,mv(t)):(r.next=o.next,o.next=r),t.interleaved=r,Ro(e,a)}function Ro(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var cl=!1;function gv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wl(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,br&2){var o=a.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),a.pending=t,Ro(e,r)}return o=a.interleaved,o===null?(t.next=t,mv(a)):(t.next=o.next,o.next=t),a.interleaved=t,Ro(e,r)}function Z0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,tv(e,r)}}function j2(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var o=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?o=h=d:h=h.next=d,r=r.next}while(r!==null);h===null?o=h=t:h=h.next=t}else o=h=t;r={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:h,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bm(e,t,r,a){var o=e.updateQueue;cl=!1;var h=o.firstBaseUpdate,d=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var b=l,w=b.next;b.next=null,d===null?h=w:d.next=w,d=b;var E=e.alternate;E!==null&&(E=E.updateQueue,l=E.lastBaseUpdate,l!==d&&(l===null?E.firstBaseUpdate=w:l.next=w,E.lastBaseUpdate=b))}if(h!==null){var P=o.baseState;d=0,E=w=b=null,l=h;do{var k=l.lane,R=l.eventTime;if((a&k)===k){E!==null&&(E=E.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var z=e,D=l;switch(k=t,R=r,D.tag){case 1:if(z=D.payload,typeof z=="function"){P=z.call(R,P,k);break e}P=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=D.payload,k=typeof z=="function"?z.call(R,P,k):z,k==null)break e;P=gn({},P,k);break e;case 2:cl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,k=o.effects,k===null?o.effects=[l]:k.push(l))}else R={eventTime:R,lane:k,tag:l.tag,payload:l.payload,callback:l.callback,next:null},E===null?(w=E=R,b=P):E=E.next=R,d|=k;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;k=l,l=k.next,k.next=null,o.lastBaseUpdate=k,o.shared.pending=null}}while(!0);if(E===null&&(b=P),o.baseState=b,o.firstBaseUpdate=w,o.lastBaseUpdate=E,t=o.shared.interleaved,t!==null){o=t;do d|=o.lane,o=o.next;while(o!==t)}else h===null&&(o.shared.lanes=0);Tc|=d,e.lanes=d,e.memoizedState=P}}function $2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],o=a.callback;if(o!==null){if(a.callback=null,a=r,typeof o!="function")throw Error(bt(191,o));o.call(a)}}}var Zd={},Ks=zl(Zd),Ed=zl(Zd),Cd=zl(Zd);function mc(e){if(e===Zd)throw Error(bt(174));return e}function _v(e,t){switch(Xr(Cd,t),Xr(Ed,e),Xr(Ks,Zd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gy(t,e)}tn(Ks),Xr(Ks,t)}function hh(){tn(Ks),tn(Ed),tn(Cd)}function iE(e){mc(Cd.current);var t=mc(Ks.current),r=Gy(t,e.type);t!==r&&(Xr(Ed,e),Xr(Ks,r))}function yv(e){Ed.current===e&&(tn(Ks),tn(Ed))}var pn=zl(0);function Sm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oy=[];function xv(){for(var e=0;e<oy.length;e++)oy[e]._workInProgressVersionPrimary=null;oy.length=0}var X0=No.ReactCurrentDispatcher,ly=No.ReactCurrentBatchConfig,Sc=0,mn=null,Gn=null,Kn=null,Tm=!1,id=!1,Ad=0,_M=0;function Ai(){throw Error(bt(321))}function vv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ks(e[r],t[r]))return!1;return!0}function wv(e,t,r,a,o,h){if(Sc=h,mn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,X0.current=e===null||e.memoizedState===null?wM:bM,e=r(a,o),id){h=0;do{if(id=!1,Ad=0,25<=h)throw Error(bt(301));h+=1,Kn=Gn=null,t.updateQueue=null,X0.current=SM,e=r(a,o)}while(id)}if(X0.current=Em,t=Gn!==null&&Gn.next!==null,Sc=0,Kn=Gn=mn=null,Tm=!1,t)throw Error(bt(300));return e}function bv(){var e=Ad!==0;return Ad=0,e}function Hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?mn.memoizedState=Kn=e:Kn=Kn.next=e,Kn}function rs(){if(Gn===null){var e=mn.alternate;e=e!==null?e.memoizedState:null}else e=Gn.next;var t=Kn===null?mn.memoizedState:Kn.next;if(t!==null)Kn=t,Gn=e;else{if(e===null)throw Error(bt(310));Gn=e,e={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},Kn===null?mn.memoizedState=Kn=e:Kn=Kn.next=e}return Kn}function kd(e,t){return typeof t=="function"?t(e):t}function cy(e){var t=rs(),r=t.queue;if(r===null)throw Error(bt(311));r.lastRenderedReducer=e;var a=Gn,o=a.baseQueue,h=r.pending;if(h!==null){if(o!==null){var d=o.next;o.next=h.next,h.next=d}a.baseQueue=o=h,r.pending=null}if(o!==null){h=o.next,a=a.baseState;var l=d=null,b=null,w=h;do{var E=w.lane;if((Sc&E)===E)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),a=w.hasEagerState?w.eagerState:e(a,w.action);else{var P={lane:E,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=P,d=a):b=b.next=P,mn.lanes|=E,Tc|=E}w=w.next}while(w!==null&&w!==h);b===null?d=a:b.next=l,ks(a,t.memoizedState)||(oa=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=b,r.lastRenderedState=a}if(e=r.interleaved,e!==null){o=e;do h=o.lane,mn.lanes|=h,Tc|=h,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function uy(e){var t=rs(),r=t.queue;if(r===null)throw Error(bt(311));r.lastRenderedReducer=e;var a=r.dispatch,o=r.pending,h=t.memoizedState;if(o!==null){r.pending=null;var d=o=o.next;do h=e(h,d.action),d=d.next;while(d!==o);ks(h,t.memoizedState)||(oa=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,a]}function aE(){}function sE(e,t){var r=mn,a=rs(),o=t(),h=!ks(a.memoizedState,o);if(h&&(a.memoizedState=o,oa=!0),a=a.queue,Sv(cE.bind(null,r,a,e),[e]),a.getSnapshot!==t||h||Kn!==null&&Kn.memoizedState.tag&1){if(r.flags|=2048,Id(9,lE.bind(null,r,a,o,t),void 0,null),ei===null)throw Error(bt(349));Sc&30||oE(r,t,o)}return o}function oE(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=mn.updateQueue,t===null?(t={lastEffect:null,stores:null},mn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lE(e,t,r,a){t.value=r,t.getSnapshot=a,uE(t)&&hE(e)}function cE(e,t,r){return r(function(){uE(t)&&hE(e)})}function uE(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ks(e,r)}catch{return!0}}function hE(e){var t=Ro(e,1);t!==null&&Es(t,e,1,-1)}function G2(e){var t=Hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kd,lastRenderedState:e},t.queue=e,e=e.dispatch=vM.bind(null,mn,e),[t.memoizedState,e]}function Id(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=mn.updateQueue,t===null?(t={lastEffect:null,stores:null},mn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function fE(){return rs().memoizedState}function K0(e,t,r,a){var o=Hs();mn.flags|=e,o.memoizedState=Id(1|t,r,void 0,a===void 0?null:a)}function sg(e,t,r,a){var o=rs();a=a===void 0?null:a;var h=void 0;if(Gn!==null){var d=Gn.memoizedState;if(h=d.destroy,a!==null&&vv(a,d.deps)){o.memoizedState=Id(t,r,h,a);return}}mn.flags|=e,o.memoizedState=Id(1|t,r,h,a)}function W2(e,t){return K0(8390656,8,e,t)}function Sv(e,t){return sg(2048,8,e,t)}function dE(e,t){return sg(4,2,e,t)}function pE(e,t){return sg(4,4,e,t)}function mE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gE(e,t,r){return r=r!=null?r.concat([e]):null,sg(4,4,mE.bind(null,t,e),r)}function Tv(){}function _E(e,t){var r=rs();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&vv(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function yE(e,t){var r=rs();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&vv(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function xE(e,t,r){return Sc&21?(ks(r,t)||(r=TT(),mn.lanes|=r,Tc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,oa=!0),e.memoizedState=r)}function yM(e,t){var r=Dr;Dr=r!==0&&4>r?r:4,e(!0);var a=ly.transition;ly.transition={};try{e(!1),t()}finally{Dr=r,ly.transition=a}}function vE(){return rs().memoizedState}function xM(e,t,r){var a=Sl(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},wE(e))bE(t,r);else if(r=rE(e,t,r,a),r!==null){var o=qi();Es(r,e,a,o),SE(r,t,a)}}function vM(e,t,r){var a=Sl(e),o={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(wE(e))bE(t,o);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var d=t.lastRenderedState,l=h(d,r);if(o.hasEagerState=!0,o.eagerState=l,ks(l,d)){var b=t.interleaved;b===null?(o.next=o,mv(t)):(o.next=b.next,b.next=o),t.interleaved=o;return}}catch{}finally{}r=rE(e,t,o,a),r!==null&&(o=qi(),Es(r,e,a,o),SE(r,t,a))}}function wE(e){var t=e.alternate;return e===mn||t!==null&&t===mn}function bE(e,t){id=Tm=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function SE(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,tv(e,r)}}var Em={readContext:ts,useCallback:Ai,useContext:Ai,useEffect:Ai,useImperativeHandle:Ai,useInsertionEffect:Ai,useLayoutEffect:Ai,useMemo:Ai,useReducer:Ai,useRef:Ai,useState:Ai,useDebugValue:Ai,useDeferredValue:Ai,useTransition:Ai,useMutableSource:Ai,useSyncExternalStore:Ai,useId:Ai,unstable_isNewReconciler:!1},wM={readContext:ts,useCallback:function(e,t){return Hs().memoizedState=[e,t===void 0?null:t],e},useContext:ts,useEffect:W2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,K0(4194308,4,mE.bind(null,t,e),r)},useLayoutEffect:function(e,t){return K0(4194308,4,e,t)},useInsertionEffect:function(e,t){return K0(4,2,e,t)},useMemo:function(e,t){var r=Hs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=Hs();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=xM.bind(null,mn,e),[a.memoizedState,e]},useRef:function(e){var t=Hs();return e={current:e},t.memoizedState=e},useState:G2,useDebugValue:Tv,useDeferredValue:function(e){return Hs().memoizedState=e},useTransition:function(){var e=G2(!1),t=e[0];return e=yM.bind(null,e[1]),Hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=mn,o=Hs();if(cn){if(r===void 0)throw Error(bt(407));r=r()}else{if(r=t(),ei===null)throw Error(bt(349));Sc&30||oE(a,t,r)}o.memoizedState=r;var h={value:r,getSnapshot:t};return o.queue=h,W2(cE.bind(null,a,h,e),[e]),a.flags|=2048,Id(9,lE.bind(null,a,h,r,t),void 0,null),r},useId:function(){var e=Hs(),t=ei.identifierPrefix;if(cn){var r=Eo,a=To;r=(a&~(1<<32-Ts(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ad++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=_M++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bM={readContext:ts,useCallback:_E,useContext:ts,useEffect:Sv,useImperativeHandle:gE,useInsertionEffect:dE,useLayoutEffect:pE,useMemo:yE,useReducer:cy,useRef:fE,useState:function(){return cy(kd)},useDebugValue:Tv,useDeferredValue:function(e){var t=rs();return xE(t,Gn.memoizedState,e)},useTransition:function(){var e=cy(kd)[0],t=rs().memoizedState;return[e,t]},useMutableSource:aE,useSyncExternalStore:sE,useId:vE,unstable_isNewReconciler:!1},SM={readContext:ts,useCallback:_E,useContext:ts,useEffect:Sv,useImperativeHandle:gE,useInsertionEffect:dE,useLayoutEffect:pE,useMemo:yE,useReducer:uy,useRef:fE,useState:function(){return uy(kd)},useDebugValue:Tv,useDeferredValue:function(e){var t=rs();return Gn===null?t.memoizedState=e:xE(t,Gn.memoizedState,e)},useTransition:function(){var e=uy(kd)[0],t=rs().memoizedState;return[e,t]},useMutableSource:aE,useSyncExternalStore:sE,useId:vE,unstable_isNewReconciler:!1};function _s(e,t){if(e&&e.defaultProps){t=gn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function hx(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:gn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var og={isMounted:function(e){return(e=e._reactInternals)?Lc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=qi(),o=Sl(e),h=Co(a,o);h.payload=t,r!=null&&(h.callback=r),t=wl(e,h,o),t!==null&&(Es(t,e,o,a),Z0(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=qi(),o=Sl(e),h=Co(a,o);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=wl(e,h,o),t!==null&&(Es(t,e,o,a),Z0(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=qi(),a=Sl(e),o=Co(r,a);o.tag=2,t!=null&&(o.callback=t),t=wl(e,o,a),t!==null&&(Es(t,e,a,r),Z0(t,e,a))}};function H2(e,t,r,a,o,h,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,d):t.prototype&&t.prototype.isPureReactComponent?!wd(r,a)||!wd(o,h):!0}function TE(e,t,r){var a=!1,o=kl,h=t.contextType;return typeof h=="object"&&h!==null?h=ts(h):(o=ca(t)?wc:Ri.current,a=t.contextTypes,h=(a=a!=null)?lh(e,o):kl),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=og,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=h),t}function q2(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&og.enqueueReplaceState(t,t.state,null)}function fx(e,t,r,a){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},gv(e);var h=t.contextType;typeof h=="object"&&h!==null?o.context=ts(h):(h=ca(t)?wc:Ri.current,o.context=lh(e,h)),o.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(hx(e,t,h,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&og.enqueueReplaceState(o,o.state,null),bm(e,r,o,a),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function fh(e,t){try{var r="",a=t;do r+=YP(a),a=a.return;while(a);var o=r}catch(h){o=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:o,digest:null}}function hy(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function dx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var TM=typeof WeakMap=="function"?WeakMap:Map;function EE(e,t,r){r=Co(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Am||(Am=!0,Sx=a),dx(e,t)},r}function CE(e,t,r){r=Co(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var o=t.value;r.payload=function(){return a(o)},r.callback=function(){dx(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){dx(e,t),typeof a!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function Z2(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new TM;var o=new Set;a.set(t,o)}else o=a.get(t),o===void 0&&(o=new Set,a.set(t,o));o.has(r)||(o.add(r),e=NM.bind(null,e,t,r),t.then(e,e))}function X2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function K2(e,t,r,a,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Co(-1,1),t.tag=2,wl(r,t,1))),r.lanes|=1),e)}var EM=No.ReactCurrentOwner,oa=!1;function Gi(e,t,r,a){t.child=e===null?tE(t,null,r,a):uh(t,e.child,r,a)}function Y2(e,t,r,a,o){r=r.render;var h=t.ref;return Yu(t,o),a=wv(e,t,r,a,h,o),r=bv(),e!==null&&!oa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Do(e,t,o)):(cn&&r&&cv(t),t.flags|=1,Gi(e,t,a,o),t.child)}function J2(e,t,r,a,o){if(e===null){var h=r.type;return typeof h=="function"&&!Rv(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,AE(e,t,h,a,o)):(e=em(r.type,null,a,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&o)){var d=h.memoizedProps;if(r=r.compare,r=r!==null?r:wd,r(d,a)&&e.ref===t.ref)return Do(e,t,o)}return t.flags|=1,e=Tl(h,a),e.ref=t.ref,e.return=t,t.child=e}function AE(e,t,r,a,o){if(e!==null){var h=e.memoizedProps;if(wd(h,a)&&e.ref===t.ref)if(oa=!1,t.pendingProps=a=h,(e.lanes&o)!==0)e.flags&131072&&(oa=!0);else return t.lanes=e.lanes,Do(e,t,o)}return px(e,t,r,a,o)}function kE(e,t,r){var a=t.pendingProps,o=a.children,h=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xr(Gu,wa),wa|=r;else{if(!(r&1073741824))return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xr(Gu,wa),wa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:r,Xr(Gu,wa),wa|=a}else h!==null?(a=h.baseLanes|r,t.memoizedState=null):a=r,Xr(Gu,wa),wa|=a;return Gi(e,t,o,r),t.child}function IE(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function px(e,t,r,a,o){var h=ca(r)?wc:Ri.current;return h=lh(t,h),Yu(t,o),r=wv(e,t,r,a,h,o),a=bv(),e!==null&&!oa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Do(e,t,o)):(cn&&a&&cv(t),t.flags|=1,Gi(e,t,r,o),t.child)}function Q2(e,t,r,a,o){if(ca(r)){var h=!0;_m(t)}else h=!1;if(Yu(t,o),t.stateNode===null)Y0(e,t),TE(t,r,a),fx(t,r,a,o),a=!0;else if(e===null){var d=t.stateNode,l=t.memoizedProps;d.props=l;var b=d.context,w=r.contextType;typeof w=="object"&&w!==null?w=ts(w):(w=ca(r)?wc:Ri.current,w=lh(t,w));var E=r.getDerivedStateFromProps,P=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function";P||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==a||b!==w)&&q2(t,d,a,w),cl=!1;var k=t.memoizedState;d.state=k,bm(t,a,d,o),b=t.memoizedState,l!==a||k!==b||la.current||cl?(typeof E=="function"&&(hx(t,r,E,a),b=t.memoizedState),(l=cl||H2(t,r,l,a,k,b,w))?(P||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),d.props=a,d.state=b,d.context=w,a=l):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,nE(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:_s(t.type,l),d.props=w,P=t.pendingProps,k=d.context,b=r.contextType,typeof b=="object"&&b!==null?b=ts(b):(b=ca(r)?wc:Ri.current,b=lh(t,b));var R=r.getDerivedStateFromProps;(E=typeof R=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(l!==P||k!==b)&&q2(t,d,a,b),cl=!1,k=t.memoizedState,d.state=k,bm(t,a,d,o);var z=t.memoizedState;l!==P||k!==z||la.current||cl?(typeof R=="function"&&(hx(t,r,R,a),z=t.memoizedState),(w=cl||H2(t,r,w,a,k,z,b)||!1)?(E||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,z,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,z,b)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=z),d.props=a,d.state=z,d.context=b,a=w):(typeof d.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),a=!1)}return mx(e,t,r,a,h,o)}function mx(e,t,r,a,o,h){IE(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return o&&N2(t,r,!1),Do(e,t,h);a=t.stateNode,EM.current=t;var l=d&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=uh(t,e.child,null,h),t.child=uh(t,null,l,h)):Gi(e,t,l,h),t.memoizedState=a.state,o&&N2(t,r,!0),t.child}function PE(e){var t=e.stateNode;t.pendingContext?O2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&O2(e,t.context,!1),_v(e,t.containerInfo)}function eb(e,t,r,a,o){return ch(),hv(o),t.flags|=256,Gi(e,t,r,a),t.child}var gx={dehydrated:null,treeContext:null,retryLane:0};function _x(e){return{baseLanes:e,cachePool:null,transitions:null}}function ME(e,t,r){var a=t.pendingProps,o=pn.current,h=!1,d=(t.flags&128)!==0,l;if((l=d)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Xr(pn,o&1),e===null)return cx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,h?(a=t.mode,h=t.child,d={mode:"hidden",children:d},!(a&1)&&h!==null?(h.childLanes=0,h.pendingProps=d):h=ug(d,a,0,null),e=_c(e,a,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=_x(r),t.memoizedState=gx,e):Ev(t,d));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return CM(e,t,d,a,l,o,r);if(h){h=a.fallback,d=t.mode,o=e.child,l=o.sibling;var b={mode:"hidden",children:a.children};return!(d&1)&&t.child!==o?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=Tl(o,b),a.subtreeFlags=o.subtreeFlags&14680064),l!==null?h=Tl(l,h):(h=_c(h,d,r,null),h.flags|=2),h.return=t,a.return=t,a.sibling=h,t.child=a,a=h,h=t.child,d=e.child.memoizedState,d=d===null?_x(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},h.memoizedState=d,h.childLanes=e.childLanes&~r,t.memoizedState=gx,a}return h=e.child,e=h.sibling,a=Tl(h,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Ev(e,t){return t=ug({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function A0(e,t,r,a){return a!==null&&hv(a),uh(t,e.child,null,r),e=Ev(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function CM(e,t,r,a,o,h,d){if(r)return t.flags&256?(t.flags&=-257,a=hy(Error(bt(422))),A0(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=a.fallback,o=t.mode,a=ug({mode:"visible",children:a.children},o,0,null),h=_c(h,o,d,null),h.flags|=2,a.return=t,h.return=t,a.sibling=h,t.child=a,t.mode&1&&uh(t,e.child,null,d),t.child.memoizedState=_x(d),t.memoizedState=gx,h);if(!(t.mode&1))return A0(e,t,d,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var l=a.dgst;return a=l,h=Error(bt(419)),a=hy(h,a,void 0),A0(e,t,d,a)}if(l=(d&e.childLanes)!==0,oa||l){if(a=ei,a!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(a.suspendedLanes|d)?0:o,o!==0&&o!==h.retryLane&&(h.retryLane=o,Ro(e,o),Es(a,e,o,-1))}return Mv(),a=hy(Error(bt(421))),A0(e,t,d,a)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=BM.bind(null,e),o._reactRetry=t,null):(e=h.treeContext,ka=vl(o.nextSibling),Ia=t,cn=!0,xs=null,e!==null&&(Ka[Ya++]=To,Ka[Ya++]=Eo,Ka[Ya++]=bc,To=e.id,Eo=e.overflow,bc=t),t=Ev(t,a.children),t.flags|=4096,t)}function tb(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ux(e.return,t,r)}function fy(e,t,r,a,o){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:o}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=r,h.tailMode=o)}function RE(e,t,r){var a=t.pendingProps,o=a.revealOrder,h=a.tail;if(Gi(e,t,a.children,r),a=pn.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tb(e,r,t);else if(e.tag===19)tb(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Xr(pn,a),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&Sm(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),fy(t,!1,o,r,h);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Sm(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}fy(t,!0,r,null,h);break;case"together":fy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Y0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Do(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Tc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(bt(153));if(t.child!==null){for(e=t.child,r=Tl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Tl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function AM(e,t,r){switch(t.tag){case 3:PE(t),ch();break;case 5:iE(t);break;case 1:ca(t.type)&&_m(t);break;case 4:_v(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,o=t.memoizedProps.value;Xr(vm,a._currentValue),a._currentValue=o;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Xr(pn,pn.current&1),t.flags|=128,null):r&t.child.childLanes?ME(e,t,r):(Xr(pn,pn.current&1),e=Do(e,t,r),e!==null?e.sibling:null);Xr(pn,pn.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return RE(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Xr(pn,pn.current),a)break;return null;case 22:case 23:return t.lanes=0,kE(e,t,r)}return Do(e,t,r)}var DE,yx,LE,FE;DE=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yx=function(){};LE=function(e,t,r,a){var o=e.memoizedProps;if(o!==a){e=t.stateNode,mc(Ks.current);var h=null;switch(r){case"input":o=Uy(e,o),a=Uy(e,a),h=[];break;case"select":o=gn({},o,{value:void 0}),a=gn({},a,{value:void 0}),h=[];break;case"textarea":o=$y(e,o),a=$y(e,a),h=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=mm)}Wy(r,a);var d;r=null;for(w in o)if(!a.hasOwnProperty(w)&&o.hasOwnProperty(w)&&o[w]!=null)if(w==="style"){var l=o[w];for(d in l)l.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(pd.hasOwnProperty(w)?h||(h=[]):(h=h||[]).push(w,null));for(w in a){var b=a[w];if(l=o!=null?o[w]:void 0,a.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(d in l)!l.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in b)b.hasOwnProperty(d)&&l[d]!==b[d]&&(r||(r={}),r[d]=b[d])}else r||(h||(h=[]),h.push(w,r)),r=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(h=h||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(pd.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&en("scroll",e),h||l===b||(h=[])):(h=h||[]).push(w,b))}r&&(h=h||[]).push("style",r);var w=h;(t.updateQueue=w)&&(t.flags|=4)}};FE=function(e,t,r,a){r!==a&&(t.flags|=4)};function Vf(e,t){if(!cn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ki(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function kM(e,t,r){var a=t.pendingProps;switch(uv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ki(t),null;case 1:return ca(t.type)&&gm(),ki(t),null;case 3:return a=t.stateNode,hh(),tn(la),tn(Ri),xv(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(E0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xs!==null&&(Cx(xs),xs=null))),yx(e,t),ki(t),null;case 5:yv(t);var o=mc(Cd.current);if(r=t.type,e!==null&&t.stateNode!=null)LE(e,t,r,a,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(bt(166));return ki(t),null}if(e=mc(Ks.current),E0(t)){a=t.stateNode,r=t.type;var h=t.memoizedProps;switch(a[qs]=t,a[Td]=h,e=(t.mode&1)!==0,r){case"dialog":en("cancel",a),en("close",a);break;case"iframe":case"object":case"embed":en("load",a);break;case"video":case"audio":for(o=0;o<Xf.length;o++)en(Xf[o],a);break;case"source":en("error",a);break;case"img":case"image":case"link":en("error",a),en("load",a);break;case"details":en("toggle",a);break;case"input":u2(a,h),en("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},en("invalid",a);break;case"textarea":f2(a,h),en("invalid",a)}Wy(r,h),o=null;for(var d in h)if(h.hasOwnProperty(d)){var l=h[d];d==="children"?typeof l=="string"?a.textContent!==l&&(h.suppressHydrationWarning!==!0&&T0(a.textContent,l,e),o=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(h.suppressHydrationWarning!==!0&&T0(a.textContent,l,e),o=["children",""+l]):pd.hasOwnProperty(d)&&l!=null&&d==="onScroll"&&en("scroll",a)}switch(r){case"input":g0(a),h2(a,h,!0);break;case"textarea":g0(a),d2(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=mm)}a=o,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cT(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(r,{is:a.is}):(e=d.createElement(r),r==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,r),e[qs]=t,e[Td]=a,DE(e,t,!1,!1),t.stateNode=e;e:{switch(d=Hy(r,a),r){case"dialog":en("cancel",e),en("close",e),o=a;break;case"iframe":case"object":case"embed":en("load",e),o=a;break;case"video":case"audio":for(o=0;o<Xf.length;o++)en(Xf[o],e);o=a;break;case"source":en("error",e),o=a;break;case"img":case"image":case"link":en("error",e),en("load",e),o=a;break;case"details":en("toggle",e),o=a;break;case"input":u2(e,a),o=Uy(e,a),en("invalid",e);break;case"option":o=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},o=gn({},a,{value:void 0}),en("invalid",e);break;case"textarea":f2(e,a),o=$y(e,a),en("invalid",e);break;default:o=a}Wy(r,o),l=o;for(h in l)if(l.hasOwnProperty(h)){var b=l[h];h==="style"?fT(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&uT(e,b)):h==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&md(e,b):typeof b=="number"&&md(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(pd.hasOwnProperty(h)?b!=null&&h==="onScroll"&&en("scroll",e):b!=null&&Xx(e,h,b,d))}switch(r){case"input":g0(e),h2(e,a,!1);break;case"textarea":g0(e),d2(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Al(a.value));break;case"select":e.multiple=!!a.multiple,h=a.value,h!=null?qu(e,!!a.multiple,h,!1):a.defaultValue!=null&&qu(e,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=mm)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ki(t),null;case 6:if(e&&t.stateNode!=null)FE(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(bt(166));if(r=mc(Cd.current),mc(Ks.current),E0(t)){if(a=t.stateNode,r=t.memoizedProps,a[qs]=t,(h=a.nodeValue!==r)&&(e=Ia,e!==null))switch(e.tag){case 3:T0(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&T0(a.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[qs]=t,t.stateNode=a}return ki(t),null;case 13:if(tn(pn),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(cn&&ka!==null&&t.mode&1&&!(t.flags&128))QT(),ch(),t.flags|=98560,h=!1;else if(h=E0(t),a!==null&&a.dehydrated!==null){if(e===null){if(!h)throw Error(bt(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(bt(317));h[qs]=t}else ch(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ki(t),h=!1}else xs!==null&&(Cx(xs),xs=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||pn.current&1?Wn===0&&(Wn=3):Mv())),t.updateQueue!==null&&(t.flags|=4),ki(t),null);case 4:return hh(),yx(e,t),e===null&&bd(t.stateNode.containerInfo),ki(t),null;case 10:return pv(t.type._context),ki(t),null;case 17:return ca(t.type)&&gm(),ki(t),null;case 19:if(tn(pn),h=t.memoizedState,h===null)return ki(t),null;if(a=(t.flags&128)!==0,d=h.rendering,d===null)if(a)Vf(h,!1);else{if(Wn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=Sm(e),d!==null){for(t.flags|=128,Vf(h,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)h=r,e=a,h.flags&=14680066,d=h.alternate,d===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=d.childLanes,h.lanes=d.lanes,h.child=d.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=d.memoizedProps,h.memoizedState=d.memoizedState,h.updateQueue=d.updateQueue,h.type=d.type,e=d.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Xr(pn,pn.current&1|2),t.child}e=e.sibling}h.tail!==null&&Mn()>dh&&(t.flags|=128,a=!0,Vf(h,!1),t.lanes=4194304)}else{if(!a)if(e=Sm(d),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vf(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!cn)return ki(t),null}else 2*Mn()-h.renderingStartTime>dh&&r!==1073741824&&(t.flags|=128,a=!0,Vf(h,!1),t.lanes=4194304);h.isBackwards?(d.sibling=t.child,t.child=d):(r=h.last,r!==null?r.sibling=d:t.child=d,h.last=d)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Mn(),t.sibling=null,r=pn.current,Xr(pn,a?r&1|2:r&1),t):(ki(t),null);case 22:case 23:return Pv(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?wa&1073741824&&(ki(t),t.subtreeFlags&6&&(t.flags|=8192)):ki(t),null;case 24:return null;case 25:return null}throw Error(bt(156,t.tag))}function IM(e,t){switch(uv(t),t.tag){case 1:return ca(t.type)&&gm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hh(),tn(la),tn(Ri),xv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yv(t),null;case 13:if(tn(pn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(bt(340));ch()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return tn(pn),null;case 4:return hh(),null;case 10:return pv(t.type._context),null;case 22:case 23:return Pv(),null;case 24:return null;default:return null}}var k0=!1,Ii=!1,PM=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function $u(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){xn(e,t,a)}else r.current=null}function xx(e,t,r){try{r()}catch(a){xn(e,t,a)}}var rb=!1;function MM(e,t){if(rx=fm,e=UT(),lv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var o=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var d=0,l=-1,b=-1,w=0,E=0,P=e,k=null;t:for(;;){for(var R;P!==r||o!==0&&P.nodeType!==3||(l=d+o),P!==h||a!==0&&P.nodeType!==3||(b=d+a),P.nodeType===3&&(d+=P.nodeValue.length),(R=P.firstChild)!==null;)k=P,P=R;for(;;){if(P===e)break t;if(k===r&&++w===o&&(l=d),k===h&&++E===a&&(b=d),(R=P.nextSibling)!==null)break;P=k,k=P.parentNode}P=R}r=l===-1||b===-1?null:{start:l,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(nx={focusedElem:e,selectionRange:r},fm=!1,Gt=t;Gt!==null;)if(t=Gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Gt=e;else for(;Gt!==null;){t=Gt;try{var z=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var D=z.memoizedProps,G=z.memoizedState,B=t.stateNode,N=B.getSnapshotBeforeUpdate(t.elementType===t.type?D:_s(t.type,D),G);B.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var W=t.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(bt(163))}}catch(Q){xn(t,t.return,Q)}if(e=t.sibling,e!==null){e.return=t.return,Gt=e;break}Gt=t.return}return z=rb,rb=!1,z}function ad(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&e)===e){var h=o.destroy;o.destroy=void 0,h!==void 0&&xx(t,r,h)}o=o.next}while(o!==a)}}function lg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function vx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function zE(e){var t=e.alternate;t!==null&&(e.alternate=null,zE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qs],delete t[Td],delete t[sx],delete t[dM],delete t[pM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function OE(e){return e.tag===5||e.tag===3||e.tag===4}function nb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||OE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wx(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=mm));else if(a!==4&&(e=e.child,e!==null))for(wx(e,t,r),e=e.sibling;e!==null;)wx(e,t,r),e=e.sibling}function bx(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(bx(e,t,r),e=e.sibling;e!==null;)bx(e,t,r),e=e.sibling}var ui=null,ys=!1;function il(e,t,r){for(r=r.child;r!==null;)NE(e,t,r),r=r.sibling}function NE(e,t,r){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(eg,r)}catch{}switch(r.tag){case 5:Ii||$u(r,t);case 6:var a=ui,o=ys;ui=null,il(e,t,r),ui=a,ys=o,ui!==null&&(ys?(e=ui,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ui.removeChild(r.stateNode));break;case 18:ui!==null&&(ys?(e=ui,r=r.stateNode,e.nodeType===8?ay(e.parentNode,r):e.nodeType===1&&ay(e,r),xd(e)):ay(ui,r.stateNode));break;case 4:a=ui,o=ys,ui=r.stateNode.containerInfo,ys=!0,il(e,t,r),ui=a,ys=o;break;case 0:case 11:case 14:case 15:if(!Ii&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var h=o,d=h.destroy;h=h.tag,d!==void 0&&(h&2||h&4)&&xx(r,t,d),o=o.next}while(o!==a)}il(e,t,r);break;case 1:if(!Ii&&($u(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(l){xn(r,t,l)}il(e,t,r);break;case 21:il(e,t,r);break;case 22:r.mode&1?(Ii=(a=Ii)||r.memoizedState!==null,il(e,t,r),Ii=a):il(e,t,r);break;default:il(e,t,r)}}function ib(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new PM),t.forEach(function(a){var o=UM.bind(null,e,a);r.has(a)||(r.add(a),a.then(o,o))})}}function ps(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var o=r[a];try{var h=e,d=t,l=d;e:for(;l!==null;){switch(l.tag){case 5:ui=l.stateNode,ys=!1;break e;case 3:ui=l.stateNode.containerInfo,ys=!0;break e;case 4:ui=l.stateNode.containerInfo,ys=!0;break e}l=l.return}if(ui===null)throw Error(bt(160));NE(h,d,o),ui=null,ys=!1;var b=o.alternate;b!==null&&(b.return=null),o.return=null}catch(w){xn(o,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)BE(t,e),t=t.sibling}function BE(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ps(t,e),$s(e),a&4){try{ad(3,e,e.return),lg(3,e)}catch(D){xn(e,e.return,D)}try{ad(5,e,e.return)}catch(D){xn(e,e.return,D)}}break;case 1:ps(t,e),$s(e),a&512&&r!==null&&$u(r,r.return);break;case 5:if(ps(t,e),$s(e),a&512&&r!==null&&$u(r,r.return),e.flags&32){var o=e.stateNode;try{md(o,"")}catch(D){xn(e,e.return,D)}}if(a&4&&(o=e.stateNode,o!=null)){var h=e.memoizedProps,d=r!==null?r.memoizedProps:h,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&h.type==="radio"&&h.name!=null&&oT(o,h),Hy(l,d);var w=Hy(l,h);for(d=0;d<b.length;d+=2){var E=b[d],P=b[d+1];E==="style"?fT(o,P):E==="dangerouslySetInnerHTML"?uT(o,P):E==="children"?md(o,P):Xx(o,E,P,w)}switch(l){case"input":Vy(o,h);break;case"textarea":lT(o,h);break;case"select":var k=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!h.multiple;var R=h.value;R!=null?qu(o,!!h.multiple,R,!1):k!==!!h.multiple&&(h.defaultValue!=null?qu(o,!!h.multiple,h.defaultValue,!0):qu(o,!!h.multiple,h.multiple?[]:"",!1))}o[Td]=h}catch(D){xn(e,e.return,D)}}break;case 6:if(ps(t,e),$s(e),a&4){if(e.stateNode===null)throw Error(bt(162));o=e.stateNode,h=e.memoizedProps;try{o.nodeValue=h}catch(D){xn(e,e.return,D)}}break;case 3:if(ps(t,e),$s(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{xd(t.containerInfo)}catch(D){xn(e,e.return,D)}break;case 4:ps(t,e),$s(e);break;case 13:ps(t,e),$s(e),o=e.child,o.flags&8192&&(h=o.memoizedState!==null,o.stateNode.isHidden=h,!h||o.alternate!==null&&o.alternate.memoizedState!==null||(kv=Mn())),a&4&&ib(e);break;case 22:if(E=r!==null&&r.memoizedState!==null,e.mode&1?(Ii=(w=Ii)||E,ps(t,e),Ii=w):ps(t,e),$s(e),a&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!E&&e.mode&1)for(Gt=e,E=e.child;E!==null;){for(P=Gt=E;Gt!==null;){switch(k=Gt,R=k.child,k.tag){case 0:case 11:case 14:case 15:ad(4,k,k.return);break;case 1:$u(k,k.return);var z=k.stateNode;if(typeof z.componentWillUnmount=="function"){a=k,r=k.return;try{t=a,z.props=t.memoizedProps,z.state=t.memoizedState,z.componentWillUnmount()}catch(D){xn(a,r,D)}}break;case 5:$u(k,k.return);break;case 22:if(k.memoizedState!==null){sb(P);continue}}R!==null?(R.return=k,Gt=R):sb(P)}E=E.sibling}e:for(E=null,P=e;;){if(P.tag===5){if(E===null){E=P;try{o=P.stateNode,w?(h=o.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(l=P.stateNode,b=P.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=hT("display",d))}catch(D){xn(e,e.return,D)}}}else if(P.tag===6){if(E===null)try{P.stateNode.nodeValue=w?"":P.memoizedProps}catch(D){xn(e,e.return,D)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;E===P&&(E=null),P=P.return}E===P&&(E=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:ps(t,e),$s(e),a&4&&ib(e);break;case 21:break;default:ps(t,e),$s(e)}}function $s(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(OE(r)){var a=r;break e}r=r.return}throw Error(bt(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(md(o,""),a.flags&=-33);var h=nb(e);bx(e,h,o);break;case 3:case 4:var d=a.stateNode.containerInfo,l=nb(e);wx(e,l,d);break;default:throw Error(bt(161))}}catch(b){xn(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function RM(e,t,r){Gt=e,UE(e)}function UE(e,t,r){for(var a=(e.mode&1)!==0;Gt!==null;){var o=Gt,h=o.child;if(o.tag===22&&a){var d=o.memoizedState!==null||k0;if(!d){var l=o.alternate,b=l!==null&&l.memoizedState!==null||Ii;l=k0;var w=Ii;if(k0=d,(Ii=b)&&!w)for(Gt=o;Gt!==null;)d=Gt,b=d.child,d.tag===22&&d.memoizedState!==null?ob(o):b!==null?(b.return=d,Gt=b):ob(o);for(;h!==null;)Gt=h,UE(h),h=h.sibling;Gt=o,k0=l,Ii=w}ab(e)}else o.subtreeFlags&8772&&h!==null?(h.return=o,Gt=h):ab(e)}}function ab(e){for(;Gt!==null;){var t=Gt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ii||lg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ii)if(r===null)a.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:_s(t.type,r.memoizedProps);a.componentDidUpdate(o,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&$2(t,h,a);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}$2(t,d,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var E=w.memoizedState;if(E!==null){var P=E.dehydrated;P!==null&&xd(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(bt(163))}Ii||t.flags&512&&vx(t)}catch(k){xn(t,t.return,k)}}if(t===e){Gt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Gt=r;break}Gt=t.return}}function sb(e){for(;Gt!==null;){var t=Gt;if(t===e){Gt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Gt=r;break}Gt=t.return}}function ob(e){for(;Gt!==null;){var t=Gt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{lg(4,t)}catch(b){xn(t,r,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var o=t.return;try{a.componentDidMount()}catch(b){xn(t,o,b)}}var h=t.return;try{vx(t)}catch(b){xn(t,h,b)}break;case 5:var d=t.return;try{vx(t)}catch(b){xn(t,d,b)}}}catch(b){xn(t,t.return,b)}if(t===e){Gt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Gt=l;break}Gt=t.return}}var DM=Math.ceil,Cm=No.ReactCurrentDispatcher,Cv=No.ReactCurrentOwner,es=No.ReactCurrentBatchConfig,br=0,ei=null,zn=null,pi=0,wa=0,Gu=zl(0),Wn=0,Pd=null,Tc=0,cg=0,Av=0,sd=null,sa=null,kv=0,dh=1/0,vo=null,Am=!1,Sx=null,bl=null,I0=!1,pl=null,km=0,od=0,Tx=null,J0=-1,Q0=0;function qi(){return br&6?Mn():J0!==-1?J0:J0=Mn()}function Sl(e){return e.mode&1?br&2&&pi!==0?pi&-pi:gM.transition!==null?(Q0===0&&(Q0=TT()),Q0):(e=Dr,e!==0||(e=window.event,e=e===void 0?16:MT(e.type)),e):1}function Es(e,t,r,a){if(50<od)throw od=0,Tx=null,Error(bt(185));Wd(e,r,a),(!(br&2)||e!==ei)&&(e===ei&&(!(br&2)&&(cg|=r),Wn===4&&hl(e,pi)),ua(e,a),r===1&&br===0&&!(t.mode&1)&&(dh=Mn()+500,ag&&Ol()))}function ua(e,t){var r=e.callbackNode;g3(e,t);var a=hm(e,e===ei?pi:0);if(a===0)r!==null&&g2(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&g2(r),t===1)e.tag===0?mM(lb.bind(null,e)):KT(lb.bind(null,e)),hM(function(){!(br&6)&&Ol()}),r=null;else{switch(ET(a)){case 1:r=ev;break;case 4:r=bT;break;case 16:r=um;break;case 536870912:r=ST;break;default:r=um}r=ZE(r,VE.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function VE(e,t){if(J0=-1,Q0=0,br&6)throw Error(bt(327));var r=e.callbackNode;if(Ju()&&e.callbackNode!==r)return null;var a=hm(e,e===ei?pi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Im(e,a);else{t=a;var o=br;br|=2;var h=$E();(ei!==e||pi!==t)&&(vo=null,dh=Mn()+500,gc(e,t));do try{zM();break}catch(l){jE(e,l)}while(!0);dv(),Cm.current=h,br=o,zn!==null?t=0:(ei=null,pi=0,t=Wn)}if(t!==0){if(t===2&&(o=Yy(e),o!==0&&(a=o,t=Ex(e,o))),t===1)throw r=Pd,gc(e,0),hl(e,a),ua(e,Mn()),r;if(t===6)hl(e,a);else{if(o=e.current.alternate,!(a&30)&&!LM(o)&&(t=Im(e,a),t===2&&(h=Yy(e),h!==0&&(a=h,t=Ex(e,h))),t===1))throw r=Pd,gc(e,0),hl(e,a),ua(e,Mn()),r;switch(e.finishedWork=o,e.finishedLanes=a,t){case 0:case 1:throw Error(bt(345));case 2:uc(e,sa,vo);break;case 3:if(hl(e,a),(a&130023424)===a&&(t=kv+500-Mn(),10<t)){if(hm(e,0)!==0)break;if(o=e.suspendedLanes,(o&a)!==a){qi(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ax(uc.bind(null,e,sa,vo),t);break}uc(e,sa,vo);break;case 4:if(hl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,o=-1;0<a;){var d=31-Ts(a);h=1<<d,d=t[d],d>o&&(o=d),a&=~h}if(a=o,a=Mn()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*DM(a/1960))-a,10<a){e.timeoutHandle=ax(uc.bind(null,e,sa,vo),a);break}uc(e,sa,vo);break;case 5:uc(e,sa,vo);break;default:throw Error(bt(329))}}}return ua(e,Mn()),e.callbackNode===r?VE.bind(null,e):null}function Ex(e,t){var r=sd;return e.current.memoizedState.isDehydrated&&(gc(e,t).flags|=256),e=Im(e,t),e!==2&&(t=sa,sa=r,t!==null&&Cx(t)),e}function Cx(e){sa===null?sa=e:sa.push.apply(sa,e)}function LM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var o=r[a],h=o.getSnapshot;o=o.value;try{if(!ks(h(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hl(e,t){for(t&=~Av,t&=~cg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ts(t),a=1<<r;e[r]=-1,t&=~a}}function lb(e){if(br&6)throw Error(bt(327));Ju();var t=hm(e,0);if(!(t&1))return ua(e,Mn()),null;var r=Im(e,t);if(e.tag!==0&&r===2){var a=Yy(e);a!==0&&(t=a,r=Ex(e,a))}if(r===1)throw r=Pd,gc(e,0),hl(e,t),ua(e,Mn()),r;if(r===6)throw Error(bt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,uc(e,sa,vo),ua(e,Mn()),null}function Iv(e,t){var r=br;br|=1;try{return e(t)}finally{br=r,br===0&&(dh=Mn()+500,ag&&Ol())}}function Ec(e){pl!==null&&pl.tag===0&&!(br&6)&&Ju();var t=br;br|=1;var r=es.transition,a=Dr;try{if(es.transition=null,Dr=1,e)return e()}finally{Dr=a,es.transition=r,br=t,!(br&6)&&Ol()}}function Pv(){wa=Gu.current,tn(Gu)}function gc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,uM(r)),zn!==null)for(r=zn.return;r!==null;){var a=r;switch(uv(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&gm();break;case 3:hh(),tn(la),tn(Ri),xv();break;case 5:yv(a);break;case 4:hh();break;case 13:tn(pn);break;case 19:tn(pn);break;case 10:pv(a.type._context);break;case 22:case 23:Pv()}r=r.return}if(ei=e,zn=e=Tl(e.current,null),pi=wa=t,Wn=0,Pd=null,Av=cg=Tc=0,sa=sd=null,pc!==null){for(t=0;t<pc.length;t++)if(r=pc[t],a=r.interleaved,a!==null){r.interleaved=null;var o=a.next,h=r.pending;if(h!==null){var d=h.next;h.next=o,a.next=d}r.pending=a}pc=null}return e}function jE(e,t){do{var r=zn;try{if(dv(),X0.current=Em,Tm){for(var a=mn.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Tm=!1}if(Sc=0,Kn=Gn=mn=null,id=!1,Ad=0,Cv.current=null,r===null||r.return===null){Wn=1,Pd=t,zn=null;break}e:{var h=e,d=r.return,l=r,b=t;if(t=pi,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,E=l,P=E.tag;if(!(E.mode&1)&&(P===0||P===11||P===15)){var k=E.alternate;k?(E.updateQueue=k.updateQueue,E.memoizedState=k.memoizedState,E.lanes=k.lanes):(E.updateQueue=null,E.memoizedState=null)}var R=X2(d);if(R!==null){R.flags&=-257,K2(R,d,l,h,t),R.mode&1&&Z2(h,w,t),t=R,b=w;var z=t.updateQueue;if(z===null){var D=new Set;D.add(b),t.updateQueue=D}else z.add(b);break e}else{if(!(t&1)){Z2(h,w,t),Mv();break e}b=Error(bt(426))}}else if(cn&&l.mode&1){var G=X2(d);if(G!==null){!(G.flags&65536)&&(G.flags|=256),K2(G,d,l,h,t),hv(fh(b,l));break e}}h=b=fh(b,l),Wn!==4&&(Wn=2),sd===null?sd=[h]:sd.push(h),h=d;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var B=EE(h,b,t);j2(h,B);break e;case 1:l=b;var N=h.type,W=h.stateNode;if(!(h.flags&128)&&(typeof N.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(bl===null||!bl.has(W)))){h.flags|=65536,t&=-t,h.lanes|=t;var Q=CE(h,l,t);j2(h,Q);break e}}h=h.return}while(h!==null)}WE(r)}catch(_e){t=_e,zn===r&&r!==null&&(zn=r=r.return);continue}break}while(!0)}function $E(){var e=Cm.current;return Cm.current=Em,e===null?Em:e}function Mv(){(Wn===0||Wn===3||Wn===2)&&(Wn=4),ei===null||!(Tc&268435455)&&!(cg&268435455)||hl(ei,pi)}function Im(e,t){var r=br;br|=2;var a=$E();(ei!==e||pi!==t)&&(vo=null,gc(e,t));do try{FM();break}catch(o){jE(e,o)}while(!0);if(dv(),br=r,Cm.current=a,zn!==null)throw Error(bt(261));return ei=null,pi=0,Wn}function FM(){for(;zn!==null;)GE(zn)}function zM(){for(;zn!==null&&!o3();)GE(zn)}function GE(e){var t=qE(e.alternate,e,wa);e.memoizedProps=e.pendingProps,t===null?WE(e):zn=t,Cv.current=null}function WE(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=IM(r,t),r!==null){r.flags&=32767,zn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wn=6,zn=null;return}}else if(r=kM(r,t,wa),r!==null){zn=r;return}if(t=t.sibling,t!==null){zn=t;return}zn=t=e}while(t!==null);Wn===0&&(Wn=5)}function uc(e,t,r){var a=Dr,o=es.transition;try{es.transition=null,Dr=1,OM(e,t,r,a)}finally{es.transition=o,Dr=a}return null}function OM(e,t,r,a){do Ju();while(pl!==null);if(br&6)throw Error(bt(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(bt(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(_3(e,h),e===ei&&(zn=ei=null,pi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||I0||(I0=!0,ZE(um,function(){return Ju(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=es.transition,es.transition=null;var d=Dr;Dr=1;var l=br;br|=4,Cv.current=null,MM(e,r),BE(r,e),nM(nx),fm=!!rx,nx=rx=null,e.current=r,RM(r),l3(),br=l,Dr=d,es.transition=h}else e.current=r;if(I0&&(I0=!1,pl=e,km=o),h=e.pendingLanes,h===0&&(bl=null),h3(r.stateNode),ua(e,Mn()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],a(o.value,{componentStack:o.stack,digest:o.digest});if(Am)throw Am=!1,e=Sx,Sx=null,e;return km&1&&e.tag!==0&&Ju(),h=e.pendingLanes,h&1?e===Tx?od++:(od=0,Tx=e):od=0,Ol(),null}function Ju(){if(pl!==null){var e=ET(km),t=es.transition,r=Dr;try{if(es.transition=null,Dr=16>e?16:e,pl===null)var a=!1;else{if(e=pl,pl=null,km=0,br&6)throw Error(bt(331));var o=br;for(br|=4,Gt=e.current;Gt!==null;){var h=Gt,d=h.child;if(Gt.flags&16){var l=h.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(Gt=w;Gt!==null;){var E=Gt;switch(E.tag){case 0:case 11:case 15:ad(8,E,h)}var P=E.child;if(P!==null)P.return=E,Gt=P;else for(;Gt!==null;){E=Gt;var k=E.sibling,R=E.return;if(zE(E),E===w){Gt=null;break}if(k!==null){k.return=R,Gt=k;break}Gt=R}}}var z=h.alternate;if(z!==null){var D=z.child;if(D!==null){z.child=null;do{var G=D.sibling;D.sibling=null,D=G}while(D!==null)}}Gt=h}}if(h.subtreeFlags&2064&&d!==null)d.return=h,Gt=d;else e:for(;Gt!==null;){if(h=Gt,h.flags&2048)switch(h.tag){case 0:case 11:case 15:ad(9,h,h.return)}var B=h.sibling;if(B!==null){B.return=h.return,Gt=B;break e}Gt=h.return}}var N=e.current;for(Gt=N;Gt!==null;){d=Gt;var W=d.child;if(d.subtreeFlags&2064&&W!==null)W.return=d,Gt=W;else e:for(d=N;Gt!==null;){if(l=Gt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lg(9,l)}}catch(_e){xn(l,l.return,_e)}if(l===d){Gt=null;break e}var Q=l.sibling;if(Q!==null){Q.return=l.return,Gt=Q;break e}Gt=l.return}}if(br=o,Ol(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(eg,e)}catch{}a=!0}return a}finally{Dr=r,es.transition=t}}return!1}function cb(e,t,r){t=fh(r,t),t=EE(e,t,1),e=wl(e,t,1),t=qi(),e!==null&&(Wd(e,1,t),ua(e,t))}function xn(e,t,r){if(e.tag===3)cb(e,e,r);else for(;t!==null;){if(t.tag===3){cb(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(bl===null||!bl.has(a))){e=fh(r,e),e=CE(t,e,1),t=wl(t,e,1),e=qi(),t!==null&&(Wd(t,1,e),ua(t,e));break}}t=t.return}}function NM(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=qi(),e.pingedLanes|=e.suspendedLanes&r,ei===e&&(pi&r)===r&&(Wn===4||Wn===3&&(pi&130023424)===pi&&500>Mn()-kv?gc(e,0):Av|=r),ua(e,t)}function HE(e,t){t===0&&(e.mode&1?(t=x0,x0<<=1,!(x0&130023424)&&(x0=4194304)):t=1);var r=qi();e=Ro(e,t),e!==null&&(Wd(e,t,r),ua(e,r))}function BM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),HE(e,r)}function UM(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(bt(314))}a!==null&&a.delete(t),HE(e,r)}var qE;qE=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||la.current)oa=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return oa=!1,AM(e,t,r);oa=!!(e.flags&131072)}else oa=!1,cn&&t.flags&1048576&&YT(t,xm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Y0(e,t),e=t.pendingProps;var o=lh(t,Ri.current);Yu(t,r),o=wv(null,t,a,e,o,r);var h=bv();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ca(a)?(h=!0,_m(t)):h=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,gv(t),o.updater=og,t.stateNode=o,o._reactInternals=t,fx(t,a,e,r),t=mx(null,t,a,!0,h,r)):(t.tag=0,cn&&h&&cv(t),Gi(null,t,o,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Y0(e,t),e=t.pendingProps,o=a._init,a=o(a._payload),t.type=a,o=t.tag=jM(a),e=_s(a,e),o){case 0:t=px(null,t,a,e,r);break e;case 1:t=Q2(null,t,a,e,r);break e;case 11:t=Y2(null,t,a,e,r);break e;case 14:t=J2(null,t,a,_s(a.type,e),r);break e}throw Error(bt(306,a,""))}return t;case 0:return a=t.type,o=t.pendingProps,o=t.elementType===a?o:_s(a,o),px(e,t,a,o,r);case 1:return a=t.type,o=t.pendingProps,o=t.elementType===a?o:_s(a,o),Q2(e,t,a,o,r);case 3:e:{if(PE(t),e===null)throw Error(bt(387));a=t.pendingProps,h=t.memoizedState,o=h.element,nE(e,t),bm(t,a,null,r);var d=t.memoizedState;if(a=d.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){o=fh(Error(bt(423)),t),t=eb(e,t,a,r,o);break e}else if(a!==o){o=fh(Error(bt(424)),t),t=eb(e,t,a,r,o);break e}else for(ka=vl(t.stateNode.containerInfo.firstChild),Ia=t,cn=!0,xs=null,r=tE(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ch(),a===o){t=Do(e,t,r);break e}Gi(e,t,a,r)}t=t.child}return t;case 5:return iE(t),e===null&&cx(t),a=t.type,o=t.pendingProps,h=e!==null?e.memoizedProps:null,d=o.children,ix(a,o)?d=null:h!==null&&ix(a,h)&&(t.flags|=32),IE(e,t),Gi(e,t,d,r),t.child;case 6:return e===null&&cx(t),null;case 13:return ME(e,t,r);case 4:return _v(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=uh(t,null,a,r):Gi(e,t,a,r),t.child;case 11:return a=t.type,o=t.pendingProps,o=t.elementType===a?o:_s(a,o),Y2(e,t,a,o,r);case 7:return Gi(e,t,t.pendingProps,r),t.child;case 8:return Gi(e,t,t.pendingProps.children,r),t.child;case 12:return Gi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,o=t.pendingProps,h=t.memoizedProps,d=o.value,Xr(vm,a._currentValue),a._currentValue=d,h!==null)if(ks(h.value,d)){if(h.children===o.children&&!la.current){t=Do(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var l=h.dependencies;if(l!==null){d=h.child;for(var b=l.firstContext;b!==null;){if(b.context===a){if(h.tag===1){b=Co(-1,r&-r),b.tag=2;var w=h.updateQueue;if(w!==null){w=w.shared;var E=w.pending;E===null?b.next=b:(b.next=E.next,E.next=b),w.pending=b}}h.lanes|=r,b=h.alternate,b!==null&&(b.lanes|=r),ux(h.return,r,t),l.lanes|=r;break}b=b.next}}else if(h.tag===10)d=h.type===t.type?null:h.child;else if(h.tag===18){if(d=h.return,d===null)throw Error(bt(341));d.lanes|=r,l=d.alternate,l!==null&&(l.lanes|=r),ux(d,r,t),d=h.sibling}else d=h.child;if(d!==null)d.return=h;else for(d=h;d!==null;){if(d===t){d=null;break}if(h=d.sibling,h!==null){h.return=d.return,d=h;break}d=d.return}h=d}Gi(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,a=t.pendingProps.children,Yu(t,r),o=ts(o),a=a(o),t.flags|=1,Gi(e,t,a,r),t.child;case 14:return a=t.type,o=_s(a,t.pendingProps),o=_s(a.type,o),J2(e,t,a,o,r);case 15:return AE(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,o=t.pendingProps,o=t.elementType===a?o:_s(a,o),Y0(e,t),t.tag=1,ca(a)?(e=!0,_m(t)):e=!1,Yu(t,r),TE(t,a,o),fx(t,a,o,r),mx(null,t,a,!0,e,r);case 19:return RE(e,t,r);case 22:return kE(e,t,r)}throw Error(bt(156,t.tag))};function ZE(e,t){return wT(e,t)}function VM(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(e,t,r,a){return new VM(e,t,r,a)}function Rv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jM(e){if(typeof e=="function")return Rv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yx)return 11;if(e===Jx)return 14}return 2}function Tl(e,t){var r=e.alternate;return r===null?(r=Qa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function em(e,t,r,a,o,h){var d=2;if(a=e,typeof e=="function")Rv(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Lu:return _c(r.children,o,h,t);case Kx:d=8,o|=8;break;case zy:return e=Qa(12,r,t,o|2),e.elementType=zy,e.lanes=h,e;case Oy:return e=Qa(13,r,t,o),e.elementType=Oy,e.lanes=h,e;case Ny:return e=Qa(19,r,t,o),e.elementType=Ny,e.lanes=h,e;case iT:return ug(r,o,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rT:d=10;break e;case nT:d=9;break e;case Yx:d=11;break e;case Jx:d=14;break e;case ll:d=16,a=null;break e}throw Error(bt(130,e==null?e:typeof e,""))}return t=Qa(d,r,t,o),t.elementType=e,t.type=a,t.lanes=h,t}function _c(e,t,r,a){return e=Qa(7,e,a,t),e.lanes=r,e}function ug(e,t,r,a){return e=Qa(22,e,a,t),e.elementType=iT,e.lanes=r,e.stateNode={isHidden:!1},e}function dy(e,t,r){return e=Qa(6,e,null,t),e.lanes=r,e}function py(e,t,r){return t=Qa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $M(e,t,r,a,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z_(0),this.expirationTimes=Z_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z_(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Dv(e,t,r,a,o,h,d,l,b){return e=new $M(e,t,r,l,b),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Qa(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},gv(h),e}function GM(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Du,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function XE(e){if(!e)return kl;e=e._reactInternals;e:{if(Lc(e)!==e||e.tag!==1)throw Error(bt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ca(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(bt(171))}if(e.tag===1){var r=e.type;if(ca(r))return XT(e,r,t)}return t}function KE(e,t,r,a,o,h,d,l,b){return e=Dv(r,a,!0,e,o,h,d,l,b),e.context=XE(null),r=e.current,a=qi(),o=Sl(r),h=Co(a,o),h.callback=t??null,wl(r,h,o),e.current.lanes=o,Wd(e,o,a),ua(e,a),e}function hg(e,t,r,a){var o=t.current,h=qi(),d=Sl(o);return r=XE(r),t.context===null?t.context=r:t.pendingContext=r,t=Co(h,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=wl(o,t,d),e!==null&&(Es(e,o,d,h),Z0(e,o,d)),d}function Pm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ub(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Lv(e,t){ub(e,t),(e=e.alternate)&&ub(e,t)}function WM(){return null}var YE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fv(e){this._internalRoot=e}fg.prototype.render=Fv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(bt(409));hg(e,t,null,null)};fg.prototype.unmount=Fv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ec(function(){hg(null,e,null,null)}),t[Mo]=null}};function fg(e){this._internalRoot=e}fg.prototype.unstable_scheduleHydration=function(e){if(e){var t=kT();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ul.length&&t!==0&&t<ul[r].priority;r++);ul.splice(r,0,e),r===0&&PT(e)}};function zv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hb(){}function HM(e,t,r,a,o){if(o){if(typeof a=="function"){var h=a;a=function(){var w=Pm(d);h.call(w)}}var d=KE(t,a,e,0,null,!1,!1,"",hb);return e._reactRootContainer=d,e[Mo]=d.current,bd(e.nodeType===8?e.parentNode:e),Ec(),d}for(;o=e.lastChild;)e.removeChild(o);if(typeof a=="function"){var l=a;a=function(){var w=Pm(b);l.call(w)}}var b=Dv(e,0,!1,null,null,!1,!1,"",hb);return e._reactRootContainer=b,e[Mo]=b.current,bd(e.nodeType===8?e.parentNode:e),Ec(function(){hg(t,b,r,a)}),b}function pg(e,t,r,a,o){var h=r._reactRootContainer;if(h){var d=h;if(typeof o=="function"){var l=o;o=function(){var b=Pm(d);l.call(b)}}hg(t,d,e,o)}else d=HM(r,t,e,o,a);return Pm(d)}CT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Zf(t.pendingLanes);r!==0&&(tv(t,r|1),ua(t,Mn()),!(br&6)&&(dh=Mn()+500,Ol()))}break;case 13:Ec(function(){var a=Ro(e,1);if(a!==null){var o=qi();Es(a,e,1,o)}}),Lv(e,1)}};rv=function(e){if(e.tag===13){var t=Ro(e,134217728);if(t!==null){var r=qi();Es(t,e,134217728,r)}Lv(e,134217728)}};AT=function(e){if(e.tag===13){var t=Sl(e),r=Ro(e,t);if(r!==null){var a=qi();Es(r,e,t,a)}Lv(e,t)}};kT=function(){return Dr};IT=function(e,t){var r=Dr;try{return Dr=e,t()}finally{Dr=r}};Zy=function(e,t,r){switch(t){case"input":if(Vy(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var o=ig(a);if(!o)throw Error(bt(90));sT(a),Vy(a,o)}}}break;case"textarea":lT(e,r);break;case"select":t=r.value,t!=null&&qu(e,!!r.multiple,t,!1)}};mT=Iv;gT=Ec;var qM={usingClientEntryPoint:!1,Events:[qd,Nu,ig,dT,pT,Iv]},jf={findFiberByHostInstance:dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZM={bundleType:jf.bundleType,version:jf.version,rendererPackageName:jf.rendererPackageName,rendererConfig:jf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:No.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xT(e),e===null?null:e.stateNode},findFiberByHostInstance:jf.findFiberByHostInstance||WM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var P0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!P0.isDisabled&&P0.supportsFiber)try{eg=P0.inject(ZM),Xs=P0}catch{}}Da.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qM;Da.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zv(t))throw Error(bt(200));return GM(e,t,null,r)};Da.createRoot=function(e,t){if(!zv(e))throw Error(bt(299));var r=!1,a="",o=YE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Dv(e,1,!1,null,null,r,!1,a,o),e[Mo]=t.current,bd(e.nodeType===8?e.parentNode:e),new Fv(t)};Da.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(bt(188)):(e=Object.keys(e).join(","),Error(bt(268,e)));return e=xT(t),e=e===null?null:e.stateNode,e};Da.flushSync=function(e){return Ec(e)};Da.hydrate=function(e,t,r){if(!dg(t))throw Error(bt(200));return pg(null,e,t,!0,r)};Da.hydrateRoot=function(e,t,r){if(!zv(e))throw Error(bt(405));var a=r!=null&&r.hydratedSources||null,o=!1,h="",d=YE;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=KE(t,null,e,1,r??null,o,!1,h,d),e[Mo]=t.current,bd(e),a)for(e=0;e<a.length;e++)r=a[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new fg(t)};Da.render=function(e,t,r){if(!dg(t))throw Error(bt(200));return pg(null,e,t,!1,r)};Da.unmountComponentAtNode=function(e){if(!dg(e))throw Error(bt(40));return e._reactRootContainer?(Ec(function(){pg(null,null,e,!1,function(){e._reactRootContainer=null,e[Mo]=null})}),!0):!1};Da.unstable_batchedUpdates=Iv;Da.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!dg(r))throw Error(bt(200));if(e==null||e._reactInternals===void 0)throw Error(bt(38));return pg(e,t,r,!1,a)};Da.version="18.3.1-next-f1338f8080-20240426";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(e){console.error(e)}}JE(),JS.exports=Da;var wh=JS.exports;const XM=Vx(wh);var fb=wh;Ly.createRoot=fb.createRoot,Ly.hydrateRoot=fb.hydrateRoot;const mg=ae.createContext(null);mg.displayName="PanelGroupContext";const wn={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Ov=10,yc=ae.useLayoutEffect,db=Hx.useId,KM=typeof db=="function"?db:()=>null;let YM=0;function Nv(e=null){const t=KM(),r=ae.useRef(e||t||null);return r.current===null&&(r.current=""+YM++),e??r.current}function QE({children:e,className:t="",collapsedSize:r,collapsible:a,defaultSize:o,forwardedRef:h,id:d,maxSize:l,minSize:b,onCollapse:w,onExpand:E,onResize:P,order:k,style:R,tagName:z="div",...D}){const G=ae.useContext(mg);if(G===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:B,expandPanel:N,getPanelSize:W,getPanelStyle:Q,groupId:_e,isPanelCollapsed:Ce,reevaluatePanelConstraints:te,registerPanel:we,resizePanel:Pe,unregisterPanel:ke}=G,$e=Nv(d),Ue=ae.useRef({callbacks:{onCollapse:w,onExpand:E,onResize:P},constraints:{collapsedSize:r,collapsible:a,defaultSize:o,maxSize:l,minSize:b},id:$e,idIsFromProps:d!==void 0,order:k});ae.useRef({didLogMissingDefaultSizeWarning:!1}),yc(()=>{const{callbacks:yt,constraints:gt}=Ue.current,nt={...gt};Ue.current.id=$e,Ue.current.idIsFromProps=d!==void 0,Ue.current.order=k,yt.onCollapse=w,yt.onExpand=E,yt.onResize=P,gt.collapsedSize=r,gt.collapsible=a,gt.defaultSize=o,gt.maxSize=l,gt.minSize=b,(nt.collapsedSize!==gt.collapsedSize||nt.collapsible!==gt.collapsible||nt.maxSize!==gt.maxSize||nt.minSize!==gt.minSize)&&te(Ue.current,nt)}),yc(()=>{const yt=Ue.current;return we(yt),()=>{ke(yt)}},[k,$e,we,ke]),ae.useImperativeHandle(h,()=>({collapse:()=>{B(Ue.current)},expand:yt=>{N(Ue.current,yt)},getId(){return $e},getSize(){return W(Ue.current)},isCollapsed(){return Ce(Ue.current)},isExpanded(){return!Ce(Ue.current)},resize:yt=>{Pe(Ue.current,yt)}}),[B,N,W,Ce,$e,Pe]);const at=Q(Ue.current,o);return ae.createElement(z,{...D,children:e,className:t,id:$e,style:{...at,...R},[wn.groupId]:_e,[wn.panel]:"",[wn.panelCollapsible]:a||void 0,[wn.panelId]:$e,[wn.panelSize]:parseFloat(""+at.flexGrow).toFixed(1)})}const xc=ae.forwardRef((e,t)=>ae.createElement(QE,{...e,forwardedRef:t}));QE.displayName="Panel";xc.displayName="forwardRef(Panel)";let Ax=null,tm=-1,fl=null;function JM(e,t){if(t){const r=(t&iC)!==0,a=(t&aC)!==0,o=(t&sC)!==0,h=(t&oC)!==0;if(r)return o?"se-resize":h?"ne-resize":"e-resize";if(a)return o?"sw-resize":h?"nw-resize":"w-resize";if(o)return"s-resize";if(h)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function QM(){fl!==null&&(document.head.removeChild(fl),Ax=null,fl=null,tm=-1)}function my(e,t){var r,a;const o=JM(e,t);if(Ax!==o){if(Ax=o,fl===null&&(fl=document.createElement("style"),document.head.appendChild(fl)),tm>=0){var h;(h=fl.sheet)===null||h===void 0||h.removeRule(tm)}tm=(r=(a=fl.sheet)===null||a===void 0?void 0:a.insertRule(`*{cursor: ${o} !important;}`))!==null&&r!==void 0?r:-1}}function eC(e){return e.type==="keydown"}function tC(e){return e.type.startsWith("pointer")}function rC(e){return e.type.startsWith("mouse")}function gg(e){if(tC(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(rC(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function eR(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function tR(e,t,r){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function rR(e,t){if(e===t)throw new Error("Cannot compare node with itself");const r={a:gb(e),b:gb(t)};let a;for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),t=r.b.pop(),a=e;mr(a,"Stacking order can only be calculated for elements with a common ancestor");const o={a:mb(pb(r.a)),b:mb(pb(r.b))};if(o.a===o.b){const h=a.childNodes,d={a:r.a.at(-1),b:r.b.at(-1)};let l=h.length;for(;l--;){const b=h[l];if(b===d.a)return 1;if(b===d.b)return-1}}return Math.sign(o.a-o.b)}const nR=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function iR(e){var t;const r=getComputedStyle((t=nC(e))!==null&&t!==void 0?t:e).display;return r==="flex"||r==="inline-flex"}function aR(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||iR(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||nR.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function pb(e){let t=e.length;for(;t--;){const r=e[t];if(mr(r,"Missing node"),aR(r))return r}return null}function mb(e){return e&&Number(getComputedStyle(e).zIndex)||0}function gb(e){const t=[];for(;e;)t.push(e),e=nC(e);return t}function nC(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const iC=1,aC=2,sC=4,oC=8,sR=eR()==="coarse";let Cs=[],Qu=!1,hc=new Map,_g=new Map;const Md=new Set;function oR(e,t,r,a,o){var h;const{ownerDocument:d}=t,l={direction:r,element:t,hitAreaMargins:a,setResizeHandlerState:o},b=(h=hc.get(d))!==null&&h!==void 0?h:0;return hc.set(d,b+1),Md.add(l),Mm(),function(){var E;_g.delete(e),Md.delete(l);const P=(E=hc.get(d))!==null&&E!==void 0?E:1;if(hc.set(d,P-1),Mm(),P===1&&hc.delete(d),Cs.includes(l)){const k=Cs.indexOf(l);k>=0&&Cs.splice(k,1),Uv(),o("up",!0,null)}}}function lR(e){const{target:t}=e,{x:r,y:a}=gg(e);Qu=!0,Bv({target:t,x:r,y:a}),Mm(),Cs.length>0&&(Rm("down",e),e.preventDefault(),lC(t)||e.stopImmediatePropagation())}function gy(e){const{x:t,y:r}=gg(e);if(Qu&&e.buttons===0&&(Qu=!1,Rm("up",e)),!Qu){const{target:a}=e;Bv({target:a,x:t,y:r})}Rm("move",e),Uv(),Cs.length>0&&e.preventDefault()}function _y(e){const{target:t}=e,{x:r,y:a}=gg(e);_g.clear(),Qu=!1,Cs.length>0&&(e.preventDefault(),lC(t)||e.stopImmediatePropagation()),Rm("up",e),Bv({target:t,x:r,y:a}),Uv(),Mm()}function lC(e){let t=e;for(;t;){if(t.hasAttribute(wn.resizeHandle))return!0;t=t.parentElement}return!1}function Bv({target:e,x:t,y:r}){Cs.splice(0);let a=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(a=e),Md.forEach(o=>{const{element:h,hitAreaMargins:d}=o,l=h.getBoundingClientRect(),{bottom:b,left:w,right:E,top:P}=l,k=sR?d.coarse:d.fine;if(t>=w-k&&t<=E+k&&r>=P-k&&r<=b+k){if(a!==null&&document.contains(a)&&h!==a&&!h.contains(a)&&!a.contains(h)&&rR(a,h)>0){let z=a,D=!1;for(;z&&!z.contains(h);){if(tR(z.getBoundingClientRect(),l)){D=!0;break}z=z.parentElement}if(D)return}Cs.push(o)}})}function yy(e,t){_g.set(e,t)}function Uv(){let e=!1,t=!1;Cs.forEach(a=>{const{direction:o}=a;o==="horizontal"?e=!0:t=!0});let r=0;_g.forEach(a=>{r|=a}),e&&t?my("intersection",r):e?my("horizontal",r):t?my("vertical",r):QM()}let xy=new AbortController;function Mm(){xy.abort(),xy=new AbortController;const e={capture:!0,signal:xy.signal};Md.size&&(Qu?(Cs.length>0&&hc.forEach((t,r)=>{const{body:a}=r;t>0&&(a.addEventListener("contextmenu",_y,e),a.addEventListener("pointerleave",gy,e),a.addEventListener("pointermove",gy,e))}),window.addEventListener("pointerup",_y,e),window.addEventListener("pointercancel",_y,e)):hc.forEach((t,r)=>{const{body:a}=r;t>0&&(a.addEventListener("pointerdown",lR,e),a.addEventListener("pointermove",gy,e))}))}function Rm(e,t){Md.forEach(r=>{const{setResizeHandlerState:a}=r,o=Cs.includes(r);a(e,o,t)})}function cR(){const[e,t]=ae.useState(0);return ae.useCallback(()=>t(r=>r+1),[])}function mr(e,t){if(!e)throw console.error(t),Error(t)}function Cc(e,t,r=Ov){return e.toFixed(r)===t.toFixed(r)?0:e>t?1:-1}function bo(e,t,r=Ov){return Cc(e,t,r)===0}function ba(e,t,r){return Cc(e,t,r)===0}function uR(e,t,r){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++){const o=e[a],h=t[a];if(!ba(o,h,r))return!1}return!0}function Wu({panelConstraints:e,panelIndex:t,size:r}){const a=e[t];mr(a!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:o=0,collapsible:h,maxSize:d=100,minSize:l=0}=a;if(Cc(r,l)<0)if(h){const b=(o+l)/2;Cc(r,b)<0?r=o:r=l}else r=l;return r=Math.min(d,r),r=parseFloat(r.toFixed(Ov)),r}function Kf({delta:e,initialLayout:t,panelConstraints:r,pivotIndices:a,prevLayout:o,trigger:h}){if(ba(e,0))return t;const d=[...t],[l,b]=a;mr(l!=null,"Invalid first pivot index"),mr(b!=null,"Invalid second pivot index");let w=0;if(h==="keyboard"){{const P=e<0?b:l,k=r[P];mr(k,`Panel constraints not found for index ${P}`);const{collapsedSize:R=0,collapsible:z,minSize:D=0}=k;if(z){const G=t[P];if(mr(G!=null,`Previous layout not found for panel index ${P}`),ba(G,R)){const B=D-G;Cc(B,Math.abs(e))>0&&(e=e<0?0-B:B)}}}{const P=e<0?l:b,k=r[P];mr(k,`No panel constraints found for index ${P}`);const{collapsedSize:R=0,collapsible:z,minSize:D=0}=k;if(z){const G=t[P];if(mr(G!=null,`Previous layout not found for panel index ${P}`),ba(G,D)){const B=G-R;Cc(B,Math.abs(e))>0&&(e=e<0?0-B:B)}}}}{const P=e<0?1:-1;let k=e<0?b:l,R=0;for(;;){const D=t[k];mr(D!=null,`Previous layout not found for panel index ${k}`);const B=Wu({panelConstraints:r,panelIndex:k,size:100})-D;if(R+=B,k+=P,k<0||k>=r.length)break}const z=Math.min(Math.abs(e),Math.abs(R));e=e<0?0-z:z}{let k=e<0?l:b;for(;k>=0&&k<r.length;){const R=Math.abs(e)-Math.abs(w),z=t[k];mr(z!=null,`Previous layout not found for panel index ${k}`);const D=z-R,G=Wu({panelConstraints:r,panelIndex:k,size:D});if(!ba(z,G)&&(w+=z-G,d[k]=G,w.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?k--:k++}}if(uR(o,d))return o;{const P=e<0?b:l,k=t[P];mr(k!=null,`Previous layout not found for panel index ${P}`);const R=k+w,z=Wu({panelConstraints:r,panelIndex:P,size:R});if(d[P]=z,!ba(z,R)){let D=R-z,B=e<0?b:l;for(;B>=0&&B<r.length;){const N=d[B];mr(N!=null,`Previous layout not found for panel index ${B}`);const W=N+D,Q=Wu({panelConstraints:r,panelIndex:B,size:W});if(ba(N,Q)||(D-=Q-N,d[B]=Q),ba(D,0))break;e>0?B--:B++}}}const E=d.reduce((P,k)=>k+P,0);return ba(E,100)?d:o}function hR({layout:e,panelsArray:t,pivotIndices:r}){let a=0,o=100,h=0,d=0;const l=r[0];mr(l!=null,"No pivot index found"),t.forEach((P,k)=>{const{constraints:R}=P,{maxSize:z=100,minSize:D=0}=R;k===l?(a=D,o=z):(h+=D,d+=z)});const b=Math.min(o,100-h),w=Math.max(a,100-d),E=e[l];return{valueMax:b,valueMin:w,valueNow:E}}function Rd(e,t=document){return Array.from(t.querySelectorAll(`[${wn.resizeHandleId}][data-panel-group-id="${e}"]`))}function cC(e,t,r=document){const o=Rd(e,r).findIndex(h=>h.getAttribute(wn.resizeHandleId)===t);return o??null}function uC(e,t,r){const a=cC(e,t,r);return a!=null?[a,a+1]:[-1,-1]}function hC(e,t=document){var r;if(t instanceof HTMLElement&&(t==null||(r=t.dataset)===null||r===void 0?void 0:r.panelGroupId)==e)return t;const a=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return a||null}function yg(e,t=document){const r=t.querySelector(`[${wn.resizeHandleId}="${e}"]`);return r||null}function fR(e,t,r,a=document){var o,h,d,l;const b=yg(t,a),w=Rd(e,a),E=b?w.indexOf(b):-1,P=(o=(h=r[E])===null||h===void 0?void 0:h.id)!==null&&o!==void 0?o:null,k=(d=(l=r[E+1])===null||l===void 0?void 0:l.id)!==null&&d!==void 0?d:null;return[P,k]}function dR({committedValuesRef:e,eagerValuesRef:t,groupId:r,layout:a,panelDataArray:o,panelGroupElement:h,setLayout:d}){ae.useRef({didWarnAboutMissingResizeHandle:!1}),yc(()=>{if(!h)return;const l=Rd(r,h);for(let b=0;b<o.length-1;b++){const{valueMax:w,valueMin:E,valueNow:P}=hR({layout:a,panelsArray:o,pivotIndices:[b,b+1]}),k=l[b];if(k!=null){const R=o[b];mr(R,`No panel data found for index "${b}"`),k.setAttribute("aria-controls",R.id),k.setAttribute("aria-valuemax",""+Math.round(w)),k.setAttribute("aria-valuemin",""+Math.round(E)),k.setAttribute("aria-valuenow",P!=null?""+Math.round(P):"")}}return()=>{l.forEach((b,w)=>{b.removeAttribute("aria-controls"),b.removeAttribute("aria-valuemax"),b.removeAttribute("aria-valuemin"),b.removeAttribute("aria-valuenow")})}},[r,a,o,h]),ae.useEffect(()=>{if(!h)return;const l=t.current;mr(l,"Eager values not found");const{panelDataArray:b}=l,w=hC(r,h);mr(w!=null,`No group found for id "${r}"`);const E=Rd(r,h);mr(E,`No resize handles found for group id "${r}"`);const P=E.map(k=>{const R=k.getAttribute(wn.resizeHandleId);mr(R,"Resize handle element has no handle id attribute");const[z,D]=fR(r,R,b,h);if(z==null||D==null)return()=>{};const G=B=>{if(!B.defaultPrevented)switch(B.key){case"Enter":{B.preventDefault();const N=b.findIndex(W=>W.id===z);if(N>=0){const W=b[N];mr(W,`No panel data found for index ${N}`);const Q=a[N],{collapsedSize:_e=0,collapsible:Ce,minSize:te=0}=W.constraints;if(Q!=null&&Ce){const we=Kf({delta:ba(Q,_e)?te-_e:_e-Q,initialLayout:a,panelConstraints:b.map(Pe=>Pe.constraints),pivotIndices:uC(r,R,h),prevLayout:a,trigger:"keyboard"});a!==we&&d(we)}}break}}};return k.addEventListener("keydown",G),()=>{k.removeEventListener("keydown",G)}});return()=>{P.forEach(k=>k())}},[h,e,t,r,a,o,d])}function _b(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function fC(e,t){const r=e==="horizontal",{x:a,y:o}=gg(t);return r?a:o}function pR(e,t,r,a,o){const h=r==="horizontal",d=yg(t,o);mr(d,`No resize handle element found for id "${t}"`);const l=d.getAttribute(wn.groupId);mr(l,"Resize handle element has no group id attribute");let{initialCursorPosition:b}=a;const w=fC(r,e),E=hC(l,o);mr(E,`No group element found for id "${l}"`);const P=E.getBoundingClientRect(),k=h?P.width:P.height;return(w-b)/k*100}function mR(e,t,r,a,o,h){if(eC(e)){const d=r==="horizontal";let l=0;e.shiftKey?l=100:o!=null?l=o:l=10;let b=0;switch(e.key){case"ArrowDown":b=d?0:l;break;case"ArrowLeft":b=d?-l:0;break;case"ArrowRight":b=d?l:0;break;case"ArrowUp":b=d?0:-l;break;case"End":b=100;break;case"Home":b=-100;break}return b}else return a==null?0:pR(e,t,r,a,h)}function gR({panelDataArray:e}){const t=Array(e.length),r=e.map(h=>h.constraints);let a=0,o=100;for(let h=0;h<e.length;h++){const d=r[h];mr(d,`Panel constraints not found for index ${h}`);const{defaultSize:l}=d;l!=null&&(a++,t[h]=l,o-=l)}for(let h=0;h<e.length;h++){const d=r[h];mr(d,`Panel constraints not found for index ${h}`);const{defaultSize:l}=d;if(l!=null)continue;const b=e.length-a,w=o/b;a++,t[h]=w,o-=w}return t}function Au(e,t,r){t.forEach((a,o)=>{const h=e[o];mr(h,`Panel data not found for index ${o}`);const{callbacks:d,constraints:l,id:b}=h,{collapsedSize:w=0,collapsible:E}=l,P=r[b];if(P==null||a!==P){r[b]=a;const{onCollapse:k,onExpand:R,onResize:z}=d;z&&z(a,P),E&&(k||R)&&(R&&(P==null||bo(P,w))&&!bo(a,w)&&R(),k&&(P==null||!bo(P,w))&&bo(a,w)&&k())}})}function M0(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function _R({defaultSize:e,dragState:t,layout:r,panelData:a,panelIndex:o,precision:h=3}){const d=r[o];let l;return d==null?l=e!=null?e.toPrecision(h):"1":a.length===1?l="1":l=d.toPrecision(h),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function yR(e,t=10){let r=null;return(...o)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{e(...o)},t)}}function yb(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,r)=>{localStorage.setItem(t,r)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function dC(e){return`react-resizable-panels:${e}`}function pC(e){return e.map(t=>{const{constraints:r,id:a,idIsFromProps:o,order:h}=t;return o?a:h?`${h}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((t,r)=>t.localeCompare(r)).join(",")}function mC(e,t){try{const r=dC(e),a=t.getItem(r);if(a){const o=JSON.parse(a);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function xR(e,t,r){var a,o;const h=(a=mC(e,r))!==null&&a!==void 0?a:{},d=pC(t);return(o=h[d])!==null&&o!==void 0?o:null}function vR(e,t,r,a,o){var h;const d=dC(e),l=pC(t),b=(h=mC(e,o))!==null&&h!==void 0?h:{};b[l]={expandToSizes:Object.fromEntries(r.entries()),layout:a};try{o.setItem(d,JSON.stringify(b))}catch(w){console.error(w)}}function xb({layout:e,panelConstraints:t}){const r=[...e],a=r.reduce((h,d)=>h+d,0);if(r.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${r.map(h=>`${h}%`).join(", ")}`);if(!ba(a,100)&&r.length>0)for(let h=0;h<t.length;h++){const d=r[h];mr(d!=null,`No layout data found for index ${h}`);const l=100/a*d;r[h]=l}let o=0;for(let h=0;h<t.length;h++){const d=r[h];mr(d!=null,`No layout data found for index ${h}`);const l=Wu({panelConstraints:t,panelIndex:h,size:d});d!=l&&(o+=d-l,r[h]=l)}if(!ba(o,0))for(let h=0;h<t.length;h++){const d=r[h];mr(d!=null,`No layout data found for index ${h}`);const l=d+o,b=Wu({panelConstraints:t,panelIndex:h,size:l});if(d!==b&&(o-=b-d,r[h]=b,ba(o,0)))break}return r}const wR=100,Yf={getItem:e=>(yb(Yf),Yf.getItem(e)),setItem:(e,t)=>{yb(Yf),Yf.setItem(e,t)}},vb={};function gC({autoSaveId:e=null,children:t,className:r="",direction:a,forwardedRef:o,id:h=null,onLayout:d=null,keyboardResizeBy:l=null,storage:b=Yf,style:w,tagName:E="div",...P}){const k=Nv(h),R=ae.useRef(null),[z,D]=ae.useState(null),[G,B]=ae.useState([]),N=cR(),W=ae.useRef({}),Q=ae.useRef(new Map),_e=ae.useRef(0),Ce=ae.useRef({autoSaveId:e,direction:a,dragState:z,id:k,keyboardResizeBy:l,onLayout:d,storage:b}),te=ae.useRef({layout:G,panelDataArray:[],panelDataArrayChanged:!1});ae.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),ae.useImperativeHandle(o,()=>({getId:()=>Ce.current.id,getLayout:()=>{const{layout:Te}=te.current;return Te},setLayout:Te=>{const{onLayout:be}=Ce.current,{layout:Ee,panelDataArray:je}=te.current,Je=xb({layout:Te,panelConstraints:je.map(lt=>lt.constraints)});_b(Ee,Je)||(B(Je),te.current.layout=Je,be&&be(Je),Au(je,Je,W.current))}}),[]),yc(()=>{Ce.current.autoSaveId=e,Ce.current.direction=a,Ce.current.dragState=z,Ce.current.id=k,Ce.current.onLayout=d,Ce.current.storage=b}),dR({committedValuesRef:Ce,eagerValuesRef:te,groupId:k,layout:G,panelDataArray:te.current.panelDataArray,setLayout:B,panelGroupElement:R.current}),ae.useEffect(()=>{const{panelDataArray:Te}=te.current;if(e){if(G.length===0||G.length!==Te.length)return;let be=vb[e];be==null&&(be=yR(vR,wR),vb[e]=be);const Ee=[...Te],je=new Map(Q.current);be(e,Ee,je,G,b)}},[e,G,b]),ae.useEffect(()=>{});const we=ae.useCallback(Te=>{const{onLayout:be}=Ce.current,{layout:Ee,panelDataArray:je}=te.current;if(Te.constraints.collapsible){const Je=je.map(er=>er.constraints),{collapsedSize:lt=0,panelSize:ft,pivotIndices:ot}=oc(je,Te,Ee);if(mr(ft!=null,`Panel size not found for panel "${Te.id}"`),!bo(ft,lt)){Q.current.set(Te.id,ft);const Zt=Mu(je,Te)===je.length-1?ft-lt:lt-ft,Yt=Kf({delta:Zt,initialLayout:Ee,panelConstraints:Je,pivotIndices:ot,prevLayout:Ee,trigger:"imperative-api"});M0(Ee,Yt)||(B(Yt),te.current.layout=Yt,be&&be(Yt),Au(je,Yt,W.current))}}},[]),Pe=ae.useCallback((Te,be)=>{const{onLayout:Ee}=Ce.current,{layout:je,panelDataArray:Je}=te.current;if(Te.constraints.collapsible){const lt=Je.map(Xt=>Xt.constraints),{collapsedSize:ft=0,panelSize:ot=0,minSize:er=0,pivotIndices:Zt}=oc(Je,Te,je),Yt=be??er;if(bo(ot,ft)){const Xt=Q.current.get(Te.id),Gr=Xt!=null&&Xt>=Yt?Xt:Yt,Lt=Mu(Je,Te)===Je.length-1?ot-Gr:Gr-ot,hr=Kf({delta:Lt,initialLayout:je,panelConstraints:lt,pivotIndices:Zt,prevLayout:je,trigger:"imperative-api"});M0(je,hr)||(B(hr),te.current.layout=hr,Ee&&Ee(hr),Au(Je,hr,W.current))}}},[]),ke=ae.useCallback(Te=>{const{layout:be,panelDataArray:Ee}=te.current,{panelSize:je}=oc(Ee,Te,be);return mr(je!=null,`Panel size not found for panel "${Te.id}"`),je},[]),$e=ae.useCallback((Te,be)=>{const{panelDataArray:Ee}=te.current,je=Mu(Ee,Te);return _R({defaultSize:be,dragState:z,layout:G,panelData:Ee,panelIndex:je})},[z,G]),Ue=ae.useCallback(Te=>{const{layout:be,panelDataArray:Ee}=te.current,{collapsedSize:je=0,collapsible:Je,panelSize:lt}=oc(Ee,Te,be);return mr(lt!=null,`Panel size not found for panel "${Te.id}"`),Je===!0&&bo(lt,je)},[]),at=ae.useCallback(Te=>{const{layout:be,panelDataArray:Ee}=te.current,{collapsedSize:je=0,collapsible:Je,panelSize:lt}=oc(Ee,Te,be);return mr(lt!=null,`Panel size not found for panel "${Te.id}"`),!Je||Cc(lt,je)>0},[]),yt=ae.useCallback(Te=>{const{panelDataArray:be}=te.current;be.push(Te),be.sort((Ee,je)=>{const Je=Ee.order,lt=je.order;return Je==null&&lt==null?0:Je==null?-1:lt==null?1:Je-lt}),te.current.panelDataArrayChanged=!0,N()},[N]);yc(()=>{if(te.current.panelDataArrayChanged){te.current.panelDataArrayChanged=!1;const{autoSaveId:Te,onLayout:be,storage:Ee}=Ce.current,{layout:je,panelDataArray:Je}=te.current;let lt=null;if(Te){const ot=xR(Te,Je,Ee);ot&&(Q.current=new Map(Object.entries(ot.expandToSizes)),lt=ot.layout)}lt==null&&(lt=gR({panelDataArray:Je}));const ft=xb({layout:lt,panelConstraints:Je.map(ot=>ot.constraints)});_b(je,ft)||(B(ft),te.current.layout=ft,be&&be(ft),Au(Je,ft,W.current))}}),yc(()=>{const Te=te.current;return()=>{Te.layout=[]}},[]);const gt=ae.useCallback(Te=>{let be=!1;const Ee=R.current;return Ee&&window.getComputedStyle(Ee,null).getPropertyValue("direction")==="rtl"&&(be=!0),function(Je){Je.preventDefault();const lt=R.current;if(!lt)return()=>null;const{direction:ft,dragState:ot,id:er,keyboardResizeBy:Zt,onLayout:Yt}=Ce.current,{layout:Xt,panelDataArray:Gr}=te.current,{initialLayout:gr}=ot??{},Lt=uC(er,Te,lt);let hr=mR(Je,Te,ft,ot,Zt,lt);const Ur=ft==="horizontal";Ur&&be&&(hr=-hr);const Xe=Gr.map(yr=>yr.constraints),kr=Kf({delta:hr,initialLayout:gr??Xt,panelConstraints:Xe,pivotIndices:Lt,prevLayout:Xt,trigger:eC(Je)?"keyboard":"mouse-or-touch"}),Rn=!M0(Xt,kr);(tC(Je)||rC(Je))&&_e.current!=hr&&(_e.current=hr,!Rn&&hr!==0?Ur?yy(Te,hr<0?iC:aC):yy(Te,hr<0?sC:oC):yy(Te,0)),Rn&&(B(kr),te.current.layout=kr,Yt&&Yt(kr),Au(Gr,kr,W.current))}},[]),nt=ae.useCallback((Te,be)=>{const{onLayout:Ee}=Ce.current,{layout:je,panelDataArray:Je}=te.current,lt=Je.map(Xt=>Xt.constraints),{panelSize:ft,pivotIndices:ot}=oc(Je,Te,je);mr(ft!=null,`Panel size not found for panel "${Te.id}"`);const Zt=Mu(Je,Te)===Je.length-1?ft-be:be-ft,Yt=Kf({delta:Zt,initialLayout:je,panelConstraints:lt,pivotIndices:ot,prevLayout:je,trigger:"imperative-api"});M0(je,Yt)||(B(Yt),te.current.layout=Yt,Ee&&Ee(Yt),Au(Je,Yt,W.current))},[]),Rt=ae.useCallback((Te,be)=>{const{layout:Ee,panelDataArray:je}=te.current,{collapsedSize:Je=0,collapsible:lt}=be,{collapsedSize:ft=0,collapsible:ot,maxSize:er=100,minSize:Zt=0}=Te.constraints,{panelSize:Yt}=oc(je,Te,Ee);Yt!=null&&(lt&&ot&&bo(Yt,Je)?bo(Je,ft)||nt(Te,ft):Yt<Zt?nt(Te,Zt):Yt>er&&nt(Te,er))},[nt]),Ke=ae.useCallback((Te,be)=>{const{direction:Ee}=Ce.current,{layout:je}=te.current;if(!R.current)return;const Je=yg(Te,R.current);mr(Je,`Drag handle element not found for id "${Te}"`);const lt=fC(Ee,be);D({dragHandleId:Te,dragHandleRect:Je.getBoundingClientRect(),initialCursorPosition:lt,initialLayout:je})},[]),dt=ae.useCallback(()=>{D(null)},[]),Dt=ae.useCallback(Te=>{const{panelDataArray:be}=te.current,Ee=Mu(be,Te);Ee>=0&&(be.splice(Ee,1),delete W.current[Te.id],te.current.panelDataArrayChanged=!0,N())},[N]),jt=ae.useMemo(()=>({collapsePanel:we,direction:a,dragState:z,expandPanel:Pe,getPanelSize:ke,getPanelStyle:$e,groupId:k,isPanelCollapsed:Ue,isPanelExpanded:at,reevaluatePanelConstraints:Rt,registerPanel:yt,registerResizeHandle:gt,resizePanel:nt,startDragging:Ke,stopDragging:dt,unregisterPanel:Dt,panelGroupElement:R.current}),[we,z,a,Pe,ke,$e,k,Ue,at,Rt,yt,gt,nt,Ke,dt,Dt]),xe={display:"flex",flexDirection:a==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return ae.createElement(mg.Provider,{value:jt},ae.createElement(E,{...P,children:t,className:r,id:h,ref:R,style:{...xe,...w},[wn.group]:"",[wn.groupDirection]:a,[wn.groupId]:k}))}const Vv=ae.forwardRef((e,t)=>ae.createElement(gC,{...e,forwardedRef:t}));gC.displayName="PanelGroup";Vv.displayName="forwardRef(PanelGroup)";function Mu(e,t){return e.findIndex(r=>r===t||r.id===t.id)}function oc(e,t,r){const a=Mu(e,t),h=a===e.length-1?[a-1,a]:[a,a+1],d=r[a];return{...t.constraints,panelSize:d,pivotIndices:h}}function bR({disabled:e,handleId:t,resizeHandler:r,panelGroupElement:a}){ae.useEffect(()=>{if(e||r==null||a==null)return;const o=yg(t,a);if(o==null)return;const h=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),r(d);break}case"F6":{d.preventDefault();const l=o.getAttribute(wn.groupId);mr(l,`No group element found for id "${l}"`);const b=Rd(l,a),w=cC(l,t,a);mr(w!==null,`No resize element found for id "${t}"`);const E=d.shiftKey?w>0?w-1:b.length-1:w+1<b.length?w+1:0;b[E].focus();break}}};return o.addEventListener("keydown",h),()=>{o.removeEventListener("keydown",h)}},[a,e,t,r])}function Dd({children:e=null,className:t="",disabled:r=!1,hitAreaMargins:a,id:o,onBlur:h,onClick:d,onDragging:l,onFocus:b,onPointerDown:w,onPointerUp:E,style:P={},tabIndex:k=0,tagName:R="div",...z}){var D,G;const B=ae.useRef(null),N=ae.useRef({onClick:d,onDragging:l,onPointerDown:w,onPointerUp:E});ae.useEffect(()=>{N.current.onClick=d,N.current.onDragging=l,N.current.onPointerDown=w,N.current.onPointerUp=E});const W=ae.useContext(mg);if(W===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:Q,groupId:_e,registerResizeHandle:Ce,startDragging:te,stopDragging:we,panelGroupElement:Pe}=W,ke=Nv(o),[$e,Ue]=ae.useState("inactive"),[at,yt]=ae.useState(!1),[gt,nt]=ae.useState(null),Rt=ae.useRef({state:$e});yc(()=>{Rt.current.state=$e}),ae.useEffect(()=>{if(r)nt(null);else{const jt=Ce(ke);nt(()=>jt)}},[r,ke,Ce]);const Ke=(D=a==null?void 0:a.coarse)!==null&&D!==void 0?D:15,dt=(G=a==null?void 0:a.fine)!==null&&G!==void 0?G:5;ae.useEffect(()=>{if(r||gt==null)return;const jt=B.current;mr(jt,"Element ref not attached");let xe=!1;return oR(ke,jt,Q,{coarse:Ke,fine:dt},(be,Ee,je)=>{if(!Ee){Ue("inactive");return}switch(be){case"down":{Ue("drag"),xe=!1,mr(je,'Expected event to be defined for "down" action'),te(ke,je);const{onDragging:Je,onPointerDown:lt}=N.current;Je==null||Je(!0),lt==null||lt();break}case"move":{const{state:Je}=Rt.current;xe=!0,Je!=="drag"&&Ue("hover"),mr(je,'Expected event to be defined for "move" action'),gt(je);break}case"up":{Ue("hover"),we();const{onClick:Je,onDragging:lt,onPointerUp:ft}=N.current;lt==null||lt(!1),ft==null||ft(),xe||Je==null||Je();break}}})},[Ke,Q,r,dt,Ce,ke,gt,te,we]),bR({disabled:r,handleId:ke,resizeHandler:gt,panelGroupElement:Pe});const Dt={touchAction:"none",userSelect:"none"};return ae.createElement(R,{...z,children:e,className:t,id:o,onBlur:()=>{yt(!1),h==null||h()},onFocus:()=>{yt(!0),b==null||b()},ref:B,role:"separator",style:{...Dt,...P},tabIndex:k,[wn.groupDirection]:Q,[wn.groupId]:_e,[wn.resizeHandle]:"",[wn.resizeHandleActive]:$e==="drag"?"pointer":at?"keyboard":void 0,[wn.resizeHandleEnabled]:!r,[wn.resizeHandleId]:ke,[wn.resizeHandleState]:$e})}Dd.displayName="PanelResizeHandle";function wb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _C(...e){return t=>{let r=!1;const a=e.map(o=>{const h=wb(o,t);return!r&&typeof h=="function"&&(r=!0),h});if(r)return()=>{for(let o=0;o<a.length;o++){const h=a[o];typeof h=="function"?h():wb(e[o],null)}}}}function Xi(...e){return ae.useCallback(_C(...e),e)}function Dm(e){const t=TR(e),r=ae.forwardRef((a,o)=>{const{children:h,...d}=a,l=ae.Children.toArray(h),b=l.find(CR);if(b){const w=b.props.children,E=l.map(P=>P===b?ae.Children.count(w)>1?ae.Children.only(null):ae.isValidElement(w)?w.props.children:null:P);return Se.jsx(t,{...d,ref:o,children:ae.isValidElement(w)?ae.cloneElement(w,void 0,E):null})}return Se.jsx(t,{...d,ref:o,children:h})});return r.displayName=`${e}.Slot`,r}var SR=Dm("Slot");function TR(e){const t=ae.forwardRef((r,a)=>{const{children:o,...h}=r;if(ae.isValidElement(o)){const d=kR(o),l=AR(h,o.props);return o.type!==ae.Fragment&&(l.ref=a?_C(a,d):d),ae.cloneElement(o,l)}return ae.Children.count(o)>1?ae.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var yC=Symbol("radix.slottable");function ER(e){const t=({children:r})=>Se.jsx(Se.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=yC,t}function CR(e){return ae.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===yC}function AR(e,t){const r={...t};for(const a in t){const o=e[a],h=t[a];/^on[A-Z]/.test(a)?o&&h?r[a]=(...l)=>{const b=h(...l);return o(...l),b}:o&&(r[a]=o):a==="style"?r[a]={...o,...h}:a==="className"&&(r[a]=[o,h].filter(Boolean).join(" "))}return{...e,...r}}function kR(e){var a,o;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function xC(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=xC(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function vC(){for(var e,t,r=0,a="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=xC(e))&&(a&&(a+=" "),a+=t);return a}const bb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Sb=vC,IR=(e,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return Sb(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:h}=t,d=Object.keys(o).map(w=>{const E=r==null?void 0:r[w],P=h==null?void 0:h[w];if(E===null)return null;const k=bb(E)||bb(P);return o[w][k]}),l=r&&Object.entries(r).reduce((w,E)=>{let[P,k]=E;return k===void 0||(w[P]=k),w},{}),b=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((w,E)=>{let{class:P,className:k,...R}=E;return Object.entries(R).every(z=>{let[D,G]=z;return Array.isArray(G)?G.includes({...h,...l}[D]):{...h,...l}[D]===G})?[...w,P,k]:w},[]);return Sb(e,d,b,r==null?void 0:r.class,r==null?void 0:r.className)},jv="-",PR=e=>{const t=RR(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:d=>{const l=d.split(jv);return l[0]===""&&l.length!==1&&l.shift(),wC(l,t)||MR(d)},getConflictingClassGroupIds:(d,l)=>{const b=r[d]||[];return l&&a[d]?[...b,...a[d]]:b}}},wC=(e,t)=>{var d;if(e.length===0)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),o=a?wC(e.slice(1),a):void 0;if(o)return o;if(t.validators.length===0)return;const h=e.join(jv);return(d=t.validators.find(({validator:l})=>l(h)))==null?void 0:d.classGroupId},Tb=/^\[(.+)\]$/,MR=e=>{if(Tb.test(e)){const t=Tb.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},RR=e=>{const{theme:t,prefix:r}=e,a={nextPart:new Map,validators:[]};return LR(Object.entries(e.classGroups),r).forEach(([h,d])=>{kx(d,a,h,t)}),a},kx=(e,t,r,a)=>{e.forEach(o=>{if(typeof o=="string"){const h=o===""?t:Eb(t,o);h.classGroupId=r;return}if(typeof o=="function"){if(DR(o)){kx(o(a),t,r,a);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([h,d])=>{kx(d,Eb(t,h),r,a)})})},Eb=(e,t)=>{let r=e;return t.split(jv).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},DR=e=>e.isThemeGetter,LR=(e,t)=>t?e.map(([r,a])=>{const o=a.map(h=>typeof h=="string"?t+h:typeof h=="object"?Object.fromEntries(Object.entries(h).map(([d,l])=>[t+d,l])):h);return[r,o]}):e,FR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const o=(h,d)=>{r.set(h,d),t++,t>e&&(t=0,a=r,r=new Map)};return{get(h){let d=r.get(h);if(d!==void 0)return d;if((d=a.get(h))!==void 0)return o(h,d),d},set(h,d){r.has(h)?r.set(h,d):o(h,d)}}},bC="!",zR=e=>{const{separator:t,experimentalParseClassName:r}=e,a=t.length===1,o=t[0],h=t.length,d=l=>{const b=[];let w=0,E=0,P;for(let G=0;G<l.length;G++){let B=l[G];if(w===0){if(B===o&&(a||l.slice(G,G+h)===t)){b.push(l.slice(E,G)),E=G+h;continue}if(B==="/"){P=G;continue}}B==="["?w++:B==="]"&&w--}const k=b.length===0?l:l.substring(E),R=k.startsWith(bC),z=R?k.substring(1):k,D=P&&P>E?P-E:void 0;return{modifiers:b,hasImportantModifier:R,baseClassName:z,maybePostfixModifierPosition:D}};return r?l=>r({className:l,parseClassName:d}):d},OR=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(a=>{a[0]==="["?(t.push(...r.sort(),a),r=[]):r.push(a)}),t.push(...r.sort()),t},NR=e=>({cache:FR(e.cacheSize),parseClassName:zR(e),...PR(e)}),BR=/\s+/,UR=(e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:o}=t,h=[],d=e.trim().split(BR);let l="";for(let b=d.length-1;b>=0;b-=1){const w=d[b],{modifiers:E,hasImportantModifier:P,baseClassName:k,maybePostfixModifierPosition:R}=r(w);let z=!!R,D=a(z?k.substring(0,R):k);if(!D){if(!z){l=w+(l.length>0?" "+l:l);continue}if(D=a(k),!D){l=w+(l.length>0?" "+l:l);continue}z=!1}const G=OR(E).join(":"),B=P?G+bC:G,N=B+D;if(h.includes(N))continue;h.push(N);const W=o(D,z);for(let Q=0;Q<W.length;++Q){const _e=W[Q];h.push(B+_e)}l=w+(l.length>0?" "+l:l)}return l};function VR(){let e=0,t,r,a="";for(;e<arguments.length;)(t=arguments[e++])&&(r=SC(t))&&(a&&(a+=" "),a+=r);return a}const SC=e=>{if(typeof e=="string")return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=SC(e[a]))&&(r&&(r+=" "),r+=t);return r};function jR(e,...t){let r,a,o,h=d;function d(b){const w=t.reduce((E,P)=>P(E),e());return r=NR(w),a=r.cache.get,o=r.cache.set,h=l,l(b)}function l(b){const w=a(b);if(w)return w;const E=UR(b,r);return o(b,E),E}return function(){return h(VR.apply(null,arguments))}}const Qr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},TC=/^\[(?:([a-z-]+):)?(.+)\]$/i,$R=/^\d+\/\d+$/,GR=new Set(["px","full","screen"]),WR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,HR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ZR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,XR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yo=e=>eh(e)||GR.has(e)||$R.test(e),al=e=>bh(e,"length",nD),eh=e=>!!e&&!Number.isNaN(Number(e)),vy=e=>bh(e,"number",eh),$f=e=>!!e&&Number.isInteger(Number(e)),KR=e=>e.endsWith("%")&&eh(e.slice(0,-1)),ur=e=>TC.test(e),sl=e=>WR.test(e),YR=new Set(["length","size","percentage"]),JR=e=>bh(e,YR,EC),QR=e=>bh(e,"position",EC),eD=new Set(["image","url"]),tD=e=>bh(e,eD,aD),rD=e=>bh(e,"",iD),Gf=()=>!0,bh=(e,t,r)=>{const a=TC.exec(e);return a?a[1]?typeof t=="string"?a[1]===t:t.has(a[1]):r(a[2]):!1},nD=e=>HR.test(e)&&!qR.test(e),EC=()=>!1,iD=e=>ZR.test(e),aD=e=>XR.test(e),sD=()=>{const e=Qr("colors"),t=Qr("spacing"),r=Qr("blur"),a=Qr("brightness"),o=Qr("borderColor"),h=Qr("borderRadius"),d=Qr("borderSpacing"),l=Qr("borderWidth"),b=Qr("contrast"),w=Qr("grayscale"),E=Qr("hueRotate"),P=Qr("invert"),k=Qr("gap"),R=Qr("gradientColorStops"),z=Qr("gradientColorStopPositions"),D=Qr("inset"),G=Qr("margin"),B=Qr("opacity"),N=Qr("padding"),W=Qr("saturate"),Q=Qr("scale"),_e=Qr("sepia"),Ce=Qr("skew"),te=Qr("space"),we=Qr("translate"),Pe=()=>["auto","contain","none"],ke=()=>["auto","hidden","clip","visible","scroll"],$e=()=>["auto",ur,t],Ue=()=>[ur,t],at=()=>["",yo,al],yt=()=>["auto",eh,ur],gt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],nt=()=>["solid","dashed","dotted","double","none"],Rt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ke=()=>["start","end","center","between","around","evenly","stretch"],dt=()=>["","0",ur],Dt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],jt=()=>[eh,ur];return{cacheSize:500,separator:":",theme:{colors:[Gf],spacing:[yo,al],blur:["none","",sl,ur],brightness:jt(),borderColor:[e],borderRadius:["none","","full",sl,ur],borderSpacing:Ue(),borderWidth:at(),contrast:jt(),grayscale:dt(),hueRotate:jt(),invert:dt(),gap:Ue(),gradientColorStops:[e],gradientColorStopPositions:[KR,al],inset:$e(),margin:$e(),opacity:jt(),padding:Ue(),saturate:jt(),scale:jt(),sepia:dt(),skew:jt(),space:Ue(),translate:Ue()},classGroups:{aspect:[{aspect:["auto","square","video",ur]}],container:["container"],columns:[{columns:[sl]}],"break-after":[{"break-after":Dt()}],"break-before":[{"break-before":Dt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...gt(),ur]}],overflow:[{overflow:ke()}],"overflow-x":[{"overflow-x":ke()}],"overflow-y":[{"overflow-y":ke()}],overscroll:[{overscroll:Pe()}],"overscroll-x":[{"overscroll-x":Pe()}],"overscroll-y":[{"overscroll-y":Pe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[D]}],"inset-x":[{"inset-x":[D]}],"inset-y":[{"inset-y":[D]}],start:[{start:[D]}],end:[{end:[D]}],top:[{top:[D]}],right:[{right:[D]}],bottom:[{bottom:[D]}],left:[{left:[D]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$f,ur]}],basis:[{basis:$e()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ur]}],grow:[{grow:dt()}],shrink:[{shrink:dt()}],order:[{order:["first","last","none",$f,ur]}],"grid-cols":[{"grid-cols":[Gf]}],"col-start-end":[{col:["auto",{span:["full",$f,ur]},ur]}],"col-start":[{"col-start":yt()}],"col-end":[{"col-end":yt()}],"grid-rows":[{"grid-rows":[Gf]}],"row-start-end":[{row:["auto",{span:[$f,ur]},ur]}],"row-start":[{"row-start":yt()}],"row-end":[{"row-end":yt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ur]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ur]}],gap:[{gap:[k]}],"gap-x":[{"gap-x":[k]}],"gap-y":[{"gap-y":[k]}],"justify-content":[{justify:["normal",...Ke()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ke(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ke(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[G]}],mx:[{mx:[G]}],my:[{my:[G]}],ms:[{ms:[G]}],me:[{me:[G]}],mt:[{mt:[G]}],mr:[{mr:[G]}],mb:[{mb:[G]}],ml:[{ml:[G]}],"space-x":[{"space-x":[te]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[te]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ur,t]}],"min-w":[{"min-w":[ur,t,"min","max","fit"]}],"max-w":[{"max-w":[ur,t,"none","full","min","max","fit","prose",{screen:[sl]},sl]}],h:[{h:[ur,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ur,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ur,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ur,t,"auto","min","max","fit"]}],"font-size":[{text:["base",sl,al]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vy]}],"font-family":[{font:[Gf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ur]}],"line-clamp":[{"line-clamp":["none",eh,vy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yo,ur]}],"list-image":[{"list-image":["none",ur]}],"list-style-type":[{list:["none","disc","decimal",ur]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[B]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...nt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yo,al]}],"underline-offset":[{"underline-offset":["auto",yo,ur]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Ue()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ur]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ur]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[B]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...gt(),QR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",JR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tD]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[z]}],"gradient-via-pos":[{via:[z]}],"gradient-to-pos":[{to:[z]}],"gradient-from":[{from:[R]}],"gradient-via":[{via:[R]}],"gradient-to":[{to:[R]}],rounded:[{rounded:[h]}],"rounded-s":[{"rounded-s":[h]}],"rounded-e":[{"rounded-e":[h]}],"rounded-t":[{"rounded-t":[h]}],"rounded-r":[{"rounded-r":[h]}],"rounded-b":[{"rounded-b":[h]}],"rounded-l":[{"rounded-l":[h]}],"rounded-ss":[{"rounded-ss":[h]}],"rounded-se":[{"rounded-se":[h]}],"rounded-ee":[{"rounded-ee":[h]}],"rounded-es":[{"rounded-es":[h]}],"rounded-tl":[{"rounded-tl":[h]}],"rounded-tr":[{"rounded-tr":[h]}],"rounded-br":[{"rounded-br":[h]}],"rounded-bl":[{"rounded-bl":[h]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[B]}],"border-style":[{border:[...nt(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[B]}],"divide-style":[{divide:nt()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...nt()]}],"outline-offset":[{"outline-offset":[yo,ur]}],"outline-w":[{outline:[yo,al]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:at()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[B]}],"ring-offset-w":[{"ring-offset":[yo,al]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",sl,rD]}],"shadow-color":[{shadow:[Gf]}],opacity:[{opacity:[B]}],"mix-blend":[{"mix-blend":[...Rt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Rt()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[b]}],"drop-shadow":[{"drop-shadow":["","none",sl,ur]}],grayscale:[{grayscale:[w]}],"hue-rotate":[{"hue-rotate":[E]}],invert:[{invert:[P]}],saturate:[{saturate:[W]}],sepia:[{sepia:[_e]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[b]}],"backdrop-grayscale":[{"backdrop-grayscale":[w]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[E]}],"backdrop-invert":[{"backdrop-invert":[P]}],"backdrop-opacity":[{"backdrop-opacity":[B]}],"backdrop-saturate":[{"backdrop-saturate":[W]}],"backdrop-sepia":[{"backdrop-sepia":[_e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ur]}],duration:[{duration:jt()}],ease:[{ease:["linear","in","out","in-out",ur]}],delay:[{delay:jt()}],animate:[{animate:["none","spin","ping","pulse","bounce",ur]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Q]}],"scale-x":[{"scale-x":[Q]}],"scale-y":[{"scale-y":[Q]}],rotate:[{rotate:[$f,ur]}],"translate-x":[{"translate-x":[we]}],"translate-y":[{"translate-y":[we]}],"skew-x":[{"skew-x":[Ce]}],"skew-y":[{"skew-y":[Ce]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ur]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ur]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Ue()}],"scroll-mx":[{"scroll-mx":Ue()}],"scroll-my":[{"scroll-my":Ue()}],"scroll-ms":[{"scroll-ms":Ue()}],"scroll-me":[{"scroll-me":Ue()}],"scroll-mt":[{"scroll-mt":Ue()}],"scroll-mr":[{"scroll-mr":Ue()}],"scroll-mb":[{"scroll-mb":Ue()}],"scroll-ml":[{"scroll-ml":Ue()}],"scroll-p":[{"scroll-p":Ue()}],"scroll-px":[{"scroll-px":Ue()}],"scroll-py":[{"scroll-py":Ue()}],"scroll-ps":[{"scroll-ps":Ue()}],"scroll-pe":[{"scroll-pe":Ue()}],"scroll-pt":[{"scroll-pt":Ue()}],"scroll-pr":[{"scroll-pr":Ue()}],"scroll-pb":[{"scroll-pb":Ue()}],"scroll-pl":[{"scroll-pl":Ue()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ur]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[yo,al,vy]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oD=jR(sD);function Ac(...e){return oD(vC(e))}const lD=IR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ta=ae.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...o},h)=>{const d=a?SR:"button";return Se.jsx(d,{className:Ac(lD({variant:t,size:r,className:e})),ref:h,...o})});Ta.displayName="Button";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CC=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=ae.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:h,iconNode:d,...l},b)=>ae.createElement("svg",{ref:b,...uD,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:CC("lucide",o),...l},[...d.map(([w,E])=>ae.createElement(w,E)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=(e,t)=>{const r=ae.forwardRef(({className:a,...o},h)=>ae.createElement(hD,{ref:h,iconNode:t,className:CC(`lucide-${cD(e)}`,a),...o}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=Fa("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=Fa("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=Fa("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=Fa("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=Fa("Layers2",[["path",{d:"m16.02 12 5.48 3.13a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74L7.98 12",key:"1cuww1"}],["path",{d:"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74Z",key:"pdlvxu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=Fa("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=Fa("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=Fa("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=Fa("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=Fa("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=Fa("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=Fa("TableProperties",[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=Fa("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function TD({theme:e,onThemeChange:t}){return Se.jsx("header",{className:"sticky top-0 z-10 border-b bg-background/90 backdrop-blur h-14",children:Se.jsxs("div",{className:"mx-auto max-w-7xl px-4 h-full flex items-center justify-between",children:[Se.jsx("h1",{className:"text-lg font-semibold",children:"gdx2map"}),Se.jsx("div",{className:"flex items-center gap-2",children:Se.jsx(Ta,{variant:"outline",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),children:e==="light"?Se.jsx(yD,{className:"w-4 h-4"}):Se.jsx(wD,{className:"w-4 h-4"})})})]})})}var AC={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(SP,function(){var r,a,o;function h(l,b){if(!r)r=b;else if(!a)a=b;else{var w="var sharedChunk = {}; ("+r+")(sharedChunk); ("+a+")(sharedChunk);",E={};r(E),o=b(E),typeof window<"u"&&(o.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}h(["exports"],function(l){function b(s,n,c,f){return new(c||(c=Promise))(function(m,x){function v(M){try{A(f.next(M))}catch(F){x(F)}}function S(M){try{A(f.throw(M))}catch(F){x(F)}}function A(M){var F;M.done?m(M.value):(F=M.value,F instanceof c?F:new c(function(V){V(F)})).then(v,S)}A((f=f.apply(s,n||[])).next())})}function w(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var E=P;function P(s,n){this.x=s,this.y=n}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,n){return this.clone()._rotateAround(s,n)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var n=s.x-this.x,c=s.y-this.y;return n*n+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult:function(s){var n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var n=Math.cos(s),c=Math.sin(s),f=c*this.x+n*this.y;return this.x=n*this.x-c*this.y,this.y=f,this},_rotateAround:function(s,n){var c=Math.cos(s),f=Math.sin(s),m=n.y+f*(this.x-n.x)+c*(this.y-n.y);return this.x=n.x+c*(this.x-n.x)-f*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(s){return s instanceof P?s:Array.isArray(s)?new P(s[0],s[1]):s};var k=w(E),R=z;function z(s,n,c,f){this.cx=3*s,this.bx=3*(c-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=c,this.p2y=f}z.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,n){if(n===void 0&&(n=1e-6),s<0)return 0;if(s>1)return 1;for(var c=s,f=0;f<8;f++){var m=this.sampleCurveX(c)-s;if(Math.abs(m)<n)return c;var x=this.sampleCurveDerivativeX(c);if(Math.abs(x)<1e-6)break;c-=m/x}var v=0,S=1;for(c=s,f=0;f<20&&(m=this.sampleCurveX(c),!(Math.abs(m-s)<n));f++)s>m?v=c:S=c,c=.5*(S-v)+v;return c},solve:function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))}};var D=w(R);let G,B;function N(){return G==null&&(G=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function W(){if(B==null&&(B=!1,N())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let f=0;f<5*5;f++){const m=4*f;n.fillStyle=`rgb(${m},${m+1},${m+2})`,n.fillRect(f%5,Math.floor(f/5),1,1)}const c=n.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&c[f]!==f){B=!0;break}}}return B||!1}function Q(s,n,c,f){const m=new D(s,n,c,f);return function(x){return m.solve(x)}}const _e=Q(.25,.1,.25,1);function Ce(s,n,c){return Math.min(c,Math.max(n,s))}function te(s,n,c){const f=c-n,m=((s-n)%f+f)%f+n;return m===n?c:m}function we(s,...n){for(const c of n)for(const f in c)s[f]=c[f];return s}let Pe=1;function ke(s,n,c){const f={};for(const m in s)f[m]=n.call(c||this,s[m],m,s);return f}function $e(s,n,c){const f={};for(const m in s)n.call(c||this,s[m],m,s)&&(f[m]=s[m]);return f}function Ue(s){return Array.isArray(s)?s.map(Ue):typeof s=="object"&&s?ke(s,Ue):s}const at={};function yt(s){at[s]||(typeof console<"u"&&console.warn(s),at[s]=!0)}function gt(s,n,c){return(c.y-s.y)*(n.x-s.x)>(n.y-s.y)*(c.x-s.x)}function nt(s){let n=0;for(let c,f,m=0,x=s.length,v=x-1;m<x;v=m++)c=s[m],f=s[v],n+=(f.x-c.x)*(c.y+f.y);return n}function Rt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ke=null;function dt(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function jt(s,n,c,f,m){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(s,{timestamp:0});try{const v=x==null?void 0:x.format;if(!v||!v.startsWith("BGR")&&!v.startsWith("RGB"))throw new Error(`Unrecognized format ${v}`);const S=v.startsWith("BGR"),A=new Uint8ClampedArray(f*m*4);if(yield x.copyTo(A,function(M,F,V,q,K){const Y=4*Math.max(-F,0),le=(Math.max(0,V)-V)*q*4+Y,pe=4*q,ve=Math.max(0,F),Le=Math.max(0,V);return{rect:{x:ve,y:Le,width:Math.min(M.width,F+q)-ve,height:Math.min(M.height,V+K)-Le},layout:[{offset:le,stride:pe}]}}(s,n,c,f,m)),S)for(let M=0;M<A.length;M+=4){const F=A[M];A[M]=A[M+2],A[M+2]=F}return A}finally{x.close()}})}let xe,Te,be,Ee;const je={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(s){const n=requestAnimationFrame(s);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(s,n=0){return this.getImageCanvasContext(s).getImageData(-n,-n,s.width+2*n,s.height+2*n)},getImageCanvasContext(s){const n=window.document.createElement("canvas"),c=n.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return n.width=s.width,n.height=s.height,c.drawImage(s,0,0,s.width,s.height),c},resolveURL:s=>(be||(be=document.createElement("a")),be.href=s,be.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ee==null&&(Ee=matchMedia("(prefers-reduced-motion: reduce)")),Ee.matches)}},Je={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class lt extends Error{constructor(n,c,f,m){super(`AJAXError: ${c} (${n}): ${f}`),this.status=n,this.statusText=c,this.url=f,this.body=m}}const ft=Rt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,ot=s=>Je.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))];function er(s,n){const c=new AbortController,f=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:ft(),signal:c.signal});let m=!1,x=!1;return s.type==="json"&&f.headers.set("Accept","application/json"),x||fetch(f).then(v=>v.ok?(S=>{(s.type==="arrayBuffer"||s.type==="image"?S.arrayBuffer():s.type==="json"?S.json():S.text()).then(A=>{x||(m=!0,n(null,A,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(A=>{x||n(new Error(A.message))})})(v):v.blob().then(S=>n(new lt(v.status,v.statusText,s.url,S)))).catch(v=>{v.code!==20&&n(new Error(v.message))}),{cancel:()=>{x=!0,m||c.abort()}}}const Zt=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if(Rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n);if(!Rt())return(ot(s.url)||er)(s,n)}if(!(/^file:/.test(c=s.url)||/^file:/.test(ft())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return er(s,n);if(Rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n,void 0,!0)}var c;return function(f,m){const x=new XMLHttpRequest;x.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(x.responseType="arraybuffer");for(const v in f.headers)x.setRequestHeader(v,f.headers[v]);return f.type==="json"&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials=f.credentials==="include",x.onerror=()=>{m(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){let v=x.response;if(f.type==="json")try{v=JSON.parse(x.response)}catch(S){return m(S)}m(null,v,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else{const v=new Blob([x.response],{type:x.getResponseHeader("Content-Type")});m(new lt(x.status,x.statusText,f.url,v))}},x.send(f.body),{cancel:()=>x.abort()}}(s,n)},Yt=function(s,n){return Zt(we(s,{type:"arrayBuffer"}),n)};function Xt(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const n=new URL(s),c=window.location;return n.protocol===c.protocol&&n.host===c.host}function Gr(s,n,c){c[s]&&c[s].indexOf(n)!==-1||(c[s]=c[s]||[],c[s].push(n))}function gr(s,n,c){if(c&&c[s]){const f=c[s].indexOf(n);f!==-1&&c[s].splice(f,1)}}class Lt{constructor(n,c={}){we(this,c),this.type=n}}class hr extends Lt{constructor(n,c={}){super("error",we({error:n},c))}}class Ur{on(n,c){return this._listeners=this._listeners||{},Gr(n,c,this._listeners),this}off(n,c){return gr(n,c,this._listeners),gr(n,c,this._oneTimeListeners),this}once(n,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},Gr(n,c,this._oneTimeListeners),this):new Promise(f=>this.once(n,f))}fire(n,c){typeof n=="string"&&(n=new Lt(n,c||{}));const f=n.type;if(this.listens(f)){n.target=this;const m=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const S of m)S.call(this,n);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const S of x)gr(f,S,this._oneTimeListeners),S.call(this,n);const v=this._eventedParent;v&&(we(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(n))}else n instanceof hr&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,c){return this._eventedParent=n,this._eventedParentData=c,this}}var Xe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const kr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Rn(s,n){const c={};for(const f in s)f!=="ref"&&(c[f]=s[f]);return kr.forEach(f=>{f in n&&(c[f]=n[f])}),c}function yr(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let c=0;c<s.length;c++)if(!yr(s[c],n[c]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(const c in s)if(!yr(s[c],n[c]))return!1;return!0}return s===n}const nr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ri(s,n,c){c.push({command:nr.addSource,args:[s,n[s]]})}function za(s,n,c){n.push({command:nr.removeSource,args:[s]}),c[s]=!0}function Di(s,n,c,f){za(s,c,f),ri(s,n,c)}function Ji(s,n,c){let f;for(f in s[c])if(Object.prototype.hasOwnProperty.call(s[c],f)&&f!=="data"&&!yr(s[c][f],n[c][f]))return!1;for(f in n[c])if(Object.prototype.hasOwnProperty.call(n[c],f)&&f!=="data"&&!yr(s[c][f],n[c][f]))return!1;return!0}function Rs(s,n,c,f,m,x){let v;for(v in n=n||{},s=s||{})Object.prototype.hasOwnProperty.call(s,v)&&(yr(s[v],n[v])||c.push({command:x,args:[f,v,n[v],m]}));for(v in n)Object.prototype.hasOwnProperty.call(n,v)&&!Object.prototype.hasOwnProperty.call(s,v)&&(yr(s[v],n[v])||c.push({command:x,args:[f,v,n[v],m]}))}function pa(s){return s.id}function Oa(s,n){return s[n.id]=n,s}class xt{constructor(n,c,f,m){this.message=(n?`${n}: `:"")+f,m&&(this.identifier=m),c!=null&&c.__line__&&(this.line=c.__line__)}}function Li(s,...n){for(const c of n)for(const f in c)s[f]=c[f];return s}class Fr extends Error{constructor(n,c){super(c),this.message=c,this.key=n}}class Na{constructor(n,c=[]){this.parent=n,this.bindings={};for(const[f,m]of c)this.bindings[f]=m}concat(n){return new Na(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const ma={kind:"null"},wt={kind:"number"},tr={kind:"string"},Kt={kind:"boolean"},Dn={kind:"color"},Qi={kind:"object"},Qt={kind:"value"},yi={kind:"collator"},he={kind:"formatted"},H={kind:"padding"},Z={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function de(s,n){return{kind:"array",itemType:s,N:n}}function me(s){if(s.kind==="array"){const n=me(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const Fe=[ma,wt,tr,Kt,Dn,he,Qi,de(Qt),H,Z,ie];function Ie(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Ie(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const c of Fe)if(!Ie(c,n))return null}}return`Expected ${me(s)} but found ${me(n)} instead.`}function ye(s,n){return n.some(c=>c.kind===s.kind)}function Re(s,n){return n.some(c=>c==="null"?s===null:c==="array"?Array.isArray(s):c==="object"?s&&!Array.isArray(s)&&typeof s=="object":c===typeof s)}function Ye(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}const Qe=.96422,j=.82521,re=4/29,ee=6/29,J=3*ee*ee,ne=ee*ee*ee,se=Math.PI/180,Be=180/Math.PI;function Ze(s){return(s%=360)<0&&(s+=360),s}function ze([s,n,c,f]){let m,x;const v=Ge((.2225045*(s=Ne(s))+.7168786*(n=Ne(n))+.0606169*(c=Ne(c)))/1);s===n&&n===c?m=x=v:(m=Ge((.4360747*s+.3850649*n+.1430804*c)/Qe),x=Ge((.0139322*s+.0971045*n+.7141733*c)/j));const S=116*v-16;return[S<0?0:S,500*(m-v),200*(v-x),f]}function Ne(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Ge(s){return s>ne?Math.pow(s,1/3):s/J+re}function it([s,n,c,f]){let m=(s+16)/116,x=isNaN(n)?m:m+n/500,v=isNaN(c)?m:m-c/200;return m=1*Ct(m),x=Qe*Ct(x),v=j*Ct(v),[mt(3.1338561*x-1.6168667*m-.4906146*v),mt(-.9787684*x+1.9161415*m+.033454*v),mt(.0719453*x-.2289914*m+1.4052427*v),f]}function mt(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Ct(s){return s>ee?s*s*s:J*(s-re)}function pt(s){return parseInt(s.padEnd(2,s),16)/255}function zt(s,n){return Jt(n?s/100:s,0,1)}function Jt(s,n,c){return Math.min(Math.max(n,s),c)}function Sr(s){return!s.some(Number.isNaN)}const Vr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class rr{constructor(n,c,f,m=1,x=!0){this.r=n,this.g=c,this.b=f,this.a=m,x||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,c,f,m]))}static parse(n){if(n instanceof rr)return n;if(typeof n!="string")return;const c=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Vr[f];if(m){const[v,S,A]=m;return[v/255,S/255,A/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const v=f.length<6?1:2;let S=1;return[pt(f.slice(S,S+=v)),pt(f.slice(S,S+=v)),pt(f.slice(S,S+=v)),pt(f.slice(S,S+v)||"ff")]}if(f.startsWith("rgb")){const v=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[S,A,M,F,V,q,K,Y,le,pe,ve,Le]=v,Ae=[F||" ",K||" ",pe].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const Oe=[M,q,le].join(""),We=Oe==="%%%"?100:Oe===""?255:0;if(We){const rt=[Jt(+A/We,0,1),Jt(+V/We,0,1),Jt(+Y/We,0,1),ve?zt(+ve,Le):1];if(Sr(rt))return rt}}return}}const x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[v,S,A,M,F,V,q,K,Y]=x,le=[A||" ",F||" ",q].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const pe=[+S,Jt(+M,0,100),Jt(+V,0,100),K?zt(+K,Y):1];if(Sr(pe))return function([ve,Le,Ae,Oe]){function We(rt){const Pt=(rt+ve/30)%12,Bt=Le*Math.min(Ae,1-Ae);return Ae-Bt*Math.max(-1,Math.min(Pt-3,9-Pt,1))}return ve=Ze(ve),Le/=100,Ae/=100,[We(0),We(8),We(4),Oe]}(pe)}}}(n);return c?new rr(...c,!1):void 0}get rgb(){const{r:n,g:c,b:f,a:m}=this,x=m||1/0;return this.overwriteGetter("rgb",[n/x,c/x,f/x,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[c,f,m,x]=ze(n),v=Math.sqrt(f*f+m*m);return[Math.round(1e4*v)?Ze(Math.atan2(m,f)*Be):NaN,v,c,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ze(this.rgb))}overwriteGetter(n,c){return Object.defineProperty(this,n,{value:c}),c}toString(){const[n,c,f,m]=this.rgb;return`rgba(${[n,c,f].map(x=>Math.round(255*x)).join(",")},${m})`}}rr.black=new rr(0,0,0,1),rr.white=new rr(1,1,1,1),rr.transparent=new rr(0,0,0,0),rr.red=new rr(1,0,0,1);class is{constructor(n,c,f){this.sensitivity=n?c?"variant":"case":c?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,c){return this.collator.compare(n,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ba{constructor(n,c,f,m,x){this.text=n,this.image=c,this.scale=f,this.fontStack=m,this.textColor=x}}class nn{constructor(n){this.sections=n}static fromString(n){return new nn([new Ba(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof nn?n:nn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class un{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof un)return n;if(typeof n=="number")return new un([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const c of n)if(typeof c!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new un(n)}}toString(){return JSON.stringify(this.values)}}const Bl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class an{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof an)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let c=0;c<n.length;c+=2){const f=n[c],m=n[c+1];if(typeof f!="string"||!Bl.has(f)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new an(n)}}toString(){return JSON.stringify(this.values)}}class Bn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Bn({name:n,available:!1}):null}}function jc(s,n,c,f){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof c=="number"&&c>=0&&c<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[s,n,c,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[s,n,c,f]:[s,n,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Uo(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof rr||s instanceof is||s instanceof nn||s instanceof un||s instanceof an||s instanceof Bn)return!0;if(Array.isArray(s)){for(const n of s)if(!Uo(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!Uo(s[n]))return!1;return!0}return!1}function Wr(s){if(s===null)return ma;if(typeof s=="string")return tr;if(typeof s=="boolean")return Kt;if(typeof s=="number")return wt;if(s instanceof rr)return Dn;if(s instanceof is)return yi;if(s instanceof nn)return he;if(s instanceof un)return H;if(s instanceof an)return ie;if(s instanceof Bn)return Z;if(Array.isArray(s)){const n=s.length;let c;for(const f of s){const m=Wr(f);if(c){if(c===m)continue;c=Qt;break}c=m}return de(c||Qt,n)}return Qi}function xr(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof rr||s instanceof nn||s instanceof un||s instanceof an||s instanceof Bn?s.toString():JSON.stringify(s)}class to{constructor(n,c){this.type=n,this.value=c}static parse(n,c){if(n.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Uo(n[1]))return c.error("invalid value");const f=n[1];let m=Wr(f);const x=c.expectedType;return m.kind!=="array"||m.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(m=x),new to(m,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Kr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const $c={string:tr,number:wt,boolean:Kt,object:Qi};class ea{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");let f,m=1;const x=n[0];if(x==="array"){let S,A;if(n.length>2){const M=n[1];if(typeof M!="string"||!(M in $c)||M==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);S=$c[M],m++}else S=Qt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return c.error('The length argument to "array" must be a positive integer literal',2);A=n[2],m++}f=de(S,A)}else{if(!$c[x])throw new Error(`Types doesn't contain name = ${x}`);f=$c[x]}const v=[];for(;m<n.length;m++){const S=c.parse(n[m],m,Qt);if(!S)return null;v.push(S)}return new ea(f,v)}evaluate(n){for(let c=0;c<this.args.length;c++){const f=this.args[c].evaluate(n);if(!Ie(this.type,Wr(f)))return f;if(c===this.args.length-1)throw new Kr(`Expected value to be of type ${me(this.type)}, but found ${me(Wr(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Ih={"to-boolean":Kt,"to-color":Dn,"to-number":wt,"to-string":tr};class Ds{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");const f=n[0];if(!Ih[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return c.error("Expected one argument.");const m=Ih[f],x=[];for(let v=1;v<n.length;v++){const S=c.parse(n[v],v,Qt);if(!S)return null;x.push(S)}return new Ds(m,x)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let c,f;for(const m of this.args){if(c=m.evaluate(n),f=null,c instanceof rr)return c;if(typeof c=="string"){const x=n.parseColor(c);if(x)return x}else if(Array.isArray(c)&&(f=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:jc(c[0],c[1],c[2],c[3]),!f))return new rr(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Kr(f||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const f of this.args){c=f.evaluate(n);const m=un.parse(c);if(m)return m}throw new Kr(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const f of this.args){c=f.evaluate(n);const m=an.parse(c);if(m)return m}throw new Kr(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const f of this.args){if(c=f.evaluate(n),c===null)return 0;const m=Number(c);if(!isNaN(m))return m}throw new Kr(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return nn.fromString(xr(this.args[0].evaluate(n)));case"resolvedImage":return Bn.fromString(xr(this.args[0].evaluate(n)));default:return xr(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const lp=["Unknown","Point","LineString","Polygon"];class Ph{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?lp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let c=this._parseColorCache[n];return c||(c=this._parseColorCache[n]=rr.parse(n)),c}}class Gc{constructor(n,c,f=[],m,x=new Na,v=[]){this.registry=n,this.path=f,this.key=f.map(S=>`[${S}]`).join(""),this.scope=x,this.errors=v,this.expectedType=m,this._isConstant=c}parse(n,c,f,m,x={}){return c?this.concat(c,f,m)._parse(n,x):this._parse(n,x)}_parse(n,c){function f(m,x,v){return v==="assert"?new ea(x,[m]):v==="coerce"?new Ds(x,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[m];if(x){let v=x.parse(n,this);if(!v)return null;if(this.expectedType){const S=this.expectedType,A=v.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||A.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string")if(S.kind!=="padding"||A.kind!=="value"&&A.kind!=="number"&&A.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||A.kind!=="value"&&A.kind!=="array"){if(this.checkSubtype(S,A))return null}else v=f(v,S,c.typeAnnotation||"coerce");else v=f(v,S,c.typeAnnotation||"coerce");else v=f(v,S,c.typeAnnotation||"coerce");else v=f(v,S,c.typeAnnotation||"assert")}if(!(v instanceof to)&&v.type.kind!=="resolvedImage"&&this._isConstant(v)){const S=new Ph;try{v=new to(v.type,v.evaluate(S))}catch(A){return this.error(A.message),null}}return v}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,c,f){const m=typeof n=="number"?this.path.concat(n):this.path,x=f?this.scope.concat(f):this.scope;return new Gc(this.registry,this._isConstant,m,c||null,x,this.errors)}error(n,...c){const f=`${this.key}${c.map(m=>`[${m}]`).join("")}`;this.errors.push(new Fr(f,n))}checkSubtype(n,c){const f=Ie(n,c);return f&&this.error(f),f}}class Wc{constructor(n,c,f){this.type=yi,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=c}static parse(n,c){if(n.length!==2)return c.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return c.error("Collator options argument must be an object.");const m=c.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Kt);if(!m)return null;const x=c.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Kt);if(!x)return null;let v=null;return f.locale&&(v=c.parse(f.locale,1,tr),!v)?null:new Wc(m,x,v)}evaluate(n){return new is(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Ls=8192;function Mh(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function Ul(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function cp(s,n){const c=(180+s[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(c*m*Ls),Math.round(f*m*Ls)]}function Ng(s,n,c){const f=s[0]-n[0],m=s[1]-n[1],x=s[0]-c[0],v=s[1]-c[1];return f*v-x*m==0&&f*x<=0&&m*v<=0}function Rh(s,n){let c=!1;for(let v=0,S=n.length;v<S;v++){const A=n[v];for(let M=0,F=A.length;M<F-1;M++){if(Ng(s,A[M],A[M+1]))return!1;(m=A[M])[1]>(f=s)[1]!=(x=A[M+1])[1]>f[1]&&f[0]<(x[0]-m[0])*(f[1]-m[1])/(x[1]-m[1])+m[0]&&(c=!c)}}var f,m,x;return c}function Dh(s,n){for(let c=0;c<n.length;c++)if(Rh(s,n[c]))return!0;return!1}function up(s,n,c,f){const m=f[0]-c[0],x=f[1]-c[1],v=(s[0]-c[0])*x-m*(s[1]-c[1]),S=(n[0]-c[0])*x-m*(n[1]-c[1]);return v>0&&S<0||v<0&&S>0}function Bg(s,n,c){for(const M of c)for(let F=0;F<M.length-1;++F)if((S=[(v=M[F+1])[0]-(x=M[F])[0],v[1]-x[1]])[0]*(A=[(m=n)[0]-(f=s)[0],m[1]-f[1]])[1]-S[1]*A[0]!=0&&up(f,m,x,v)&&up(x,v,f,m))return!0;var f,m,x,v,S,A;return!1}function hp(s,n){for(let c=0;c<s.length;++c)if(!Rh(s[c],n))return!1;for(let c=0;c<s.length-1;++c)if(Bg(s[c],s[c+1],n))return!1;return!0}function fp(s,n){for(let c=0;c<n.length;c++)if(hp(s,n[c]))return!0;return!1}function Hc(s,n,c){const f=[];for(let m=0;m<s.length;m++){const x=[];for(let v=0;v<s[m].length;v++){const S=cp(s[m][v],c);Mh(n,S),x.push(S)}f.push(x)}return f}function dp(s,n,c){const f=[];for(let m=0;m<s.length;m++){const x=Hc(s[m],n,c);f.push(x)}return f}function pp(s,n,c,f){if(s[0]<c[0]||s[0]>c[2]){const m=.5*f;let x=s[0]-c[0]>m?-f:c[0]-s[0]>m?f:0;x===0&&(x=s[0]-c[2]>m?-f:c[2]-s[0]>m?f:0),s[0]+=x}Mh(n,s)}function Lh(s,n,c,f){const m=Math.pow(2,f.z)*Ls,x=[f.x*Ls,f.y*Ls],v=[];for(const S of s)for(const A of S){const M=[A.x+x[0],A.y+x[1]];pp(M,n,c,m),v.push(M)}return v}function Fh(s,n,c,f){const m=Math.pow(2,f.z)*Ls,x=[f.x*Ls,f.y*Ls],v=[];for(const A of s){const M=[];for(const F of A){const V=[F.x+x[0],F.y+x[1]];Mh(n,V),M.push(V)}v.push(M)}if(n[2]-n[0]<=m/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const A of v)for(const M of A)pp(M,n,c,m)}var S;return v}class ro{constructor(n,c){this.type=Kt,this.geojson=n,this.geometries=c}static parse(n,c){if(n.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Uo(n[1])){const f=n[1];if(f.type==="FeatureCollection")for(let m=0;m<f.features.length;++m){const x=f.features[m].geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new ro(f,f.features[m].geometry)}else if(f.type==="Feature"){const m=f.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ro(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ro(f,f)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(c,f){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],v=c.canonicalID();if(f.type==="Polygon"){const S=Hc(f.coordinates,x,v),A=Lh(c.geometry(),m,x,v);if(!Ul(m,x))return!1;for(const M of A)if(!Rh(M,S))return!1}if(f.type==="MultiPolygon"){const S=dp(f.coordinates,x,v),A=Lh(c.geometry(),m,x,v);if(!Ul(m,x))return!1;for(const M of A)if(!Dh(M,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(c,f){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],v=c.canonicalID();if(f.type==="Polygon"){const S=Hc(f.coordinates,x,v),A=Fh(c.geometry(),m,x,v);if(!Ul(m,x))return!1;for(const M of A)if(!hp(M,S))return!1}if(f.type==="MultiPolygon"){const S=dp(f.coordinates,x,v),A=Fh(c.geometry(),m,x,v);if(!Ul(m,x))return!1;for(const M of A)if(!fp(M,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class qc{constructor(n,c){this.type=c.type,this.name=n,this.boundExpression=c}static parse(n,c){if(n.length!==2||typeof n[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const f=n[1];return c.scope.has(f)?new qc(f,c.scope.get(f)):c.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ta{constructor(n,c,f,m){this.name=n,this.type=c,this._evaluate=f,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,c){const f=n[0],m=ta.definitions[f];if(!m)return c.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(m)?m[0]:m.type,v=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=v.filter(([M])=>!Array.isArray(M)||M.length===n.length-1);let A=null;for(const[M,F]of S){A=new Gc(c.registry,Zc,c.path,null,c.scope);const V=[];let q=!1;for(let K=1;K<n.length;K++){const Y=n[K],le=Array.isArray(M)?M[K-1]:M.type,pe=A.parse(Y,1+V.length,le);if(!pe){q=!0;break}V.push(pe)}if(!q)if(Array.isArray(M)&&M.length!==V.length)A.error(`Expected ${M.length} arguments, but found ${V.length} instead.`);else{for(let K=0;K<V.length;K++){const Y=Array.isArray(M)?M[K]:M.type,le=V[K];A.concat(K+1).checkSubtype(Y,le.type)}if(A.errors.length===0)return new ta(f,x,F,V)}}if(S.length===1)c.errors.push(...A.errors);else{const M=(S.length?S:v).map(([V])=>{return q=V,Array.isArray(q)?`(${q.map(me).join(", ")})`:`(${me(q.type)}...)`;var q}).join(" | "),F=[];for(let V=1;V<n.length;V++){const q=c.parse(n[V],1+F.length);if(!q)return null;F.push(me(q.type))}c.error(`Expected arguments of type ${M}, but found (${F.join(", ")}) instead.`)}return null}static register(n,c){ta.definitions=c;for(const f in c)n[f]=ta}}function Zc(s){if(s instanceof qc)return Zc(s.boundExpression);if(s instanceof ta&&s.name==="error"||s instanceof Wc||s instanceof ro)return!1;const n=s instanceof Ds||s instanceof ea;let c=!0;return s.eachChild(f=>{c=n?c&&Zc(f):c&&f instanceof to}),!!c&&Xc(s)&&Kc(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Xc(s){if(s instanceof ta&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof ro)return!1;let n=!0;return s.eachChild(c=>{n&&!Xc(c)&&(n=!1)}),n}function Vl(s){if(s instanceof ta&&s.name==="feature-state")return!1;let n=!0;return s.eachChild(c=>{n&&!Vl(c)&&(n=!1)}),n}function Kc(s,n){if(s instanceof ta&&n.indexOf(s.name)>=0)return!1;let c=!0;return s.eachChild(f=>{c&&!Kc(f,n)&&(c=!1)}),c}function Vo(s,n){const c=s.length-1;let f,m,x=0,v=c,S=0;for(;x<=v;)if(S=Math.floor((x+v)/2),f=s[S],m=s[S+1],f<=n){if(S===c||n<m)return S;x=S+1}else{if(!(f>n))throw new Kr("Input is not a number.");v=S-1}return 0}class Fs{constructor(n,c,f){this.type=n,this.input=c,this.labels=[],this.outputs=[];for(const[m,x]of f)this.labels.push(m),this.outputs.push(x)}static parse(n,c){if(n.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return c.error("Expected an even number of arguments.");const f=c.parse(n[1],1,wt);if(!f)return null;const m=[];let x=null;c.expectedType&&c.expectedType.kind!=="value"&&(x=c.expectedType);for(let v=1;v<n.length;v+=2){const S=v===1?-1/0:n[v],A=n[v+1],M=v,F=v+1;if(typeof S!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(m.length&&m[m.length-1][0]>=S)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const V=c.parse(A,F,x);if(!V)return null;x=x||V.type,m.push([S,V])}return new Fs(x,f,m)}evaluate(n){const c=this.labels,f=this.outputs;if(c.length===1)return f[0].evaluate(n);const m=this.input.evaluate(n);if(m<=c[0])return f[0].evaluate(n);const x=c.length;return m>=c[x-1]?f[x-1].evaluate(n):f[Vo(c,m)].evaluate(n)}eachChild(n){n(this.input);for(const c of this.outputs)n(c)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function fr(s,n,c){return s+c*(n-s)}function Yc(s,n,c){return s.map((f,m)=>fr(f,n[m],c))}const Fi={number:fr,color:function(s,n,c,f="rgb"){switch(f){case"rgb":{const[m,x,v,S]=Yc(s.rgb,n.rgb,c);return new rr(m,x,v,S,!1)}case"hcl":{const[m,x,v,S]=s.hcl,[A,M,F,V]=n.hcl;let q,K;if(isNaN(m)||isNaN(A))isNaN(m)?isNaN(A)?q=NaN:(q=A,v!==1&&v!==0||(K=M)):(q=m,F!==1&&F!==0||(K=x));else{let Le=A-m;A>m&&Le>180?Le-=360:A<m&&m-A>180&&(Le+=360),q=m+c*Le}const[Y,le,pe,ve]=function([Le,Ae,Oe,We]){return Le=isNaN(Le)?0:Le*se,it([Oe,Math.cos(Le)*Ae,Math.sin(Le)*Ae,We])}([q,K??fr(x,M,c),fr(v,F,c),fr(S,V,c)]);return new rr(Y,le,pe,ve,!1)}case"lab":{const[m,x,v,S]=it(Yc(s.lab,n.lab,c));return new rr(m,x,v,S,!1)}}},array:Yc,padding:function(s,n,c){return new un(Yc(s.values,n.values,c))},variableAnchorOffsetCollection:function(s,n,c){const f=s.values,m=n.values;if(f.length!==m.length)throw new Kr(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${n.toString()}`);const x=[];for(let v=0;v<f.length;v+=2){if(f[v]!==m[v])throw new Kr(`Cannot interpolate values containing mismatched anchors. from[${v}]: ${f[v]}, to[${v}]: ${m[v]}`);x.push(f[v]);const[S,A]=f[v+1],[M,F]=m[v+1];x.push([fr(S,M,c),fr(A,F,c)])}return new an(x)}};class zi{constructor(n,c,f,m,x){this.type=n,this.operator=c,this.interpolation=f,this.input=m,this.labels=[],this.outputs=[];for(const[v,S]of x)this.labels.push(v),this.outputs.push(S)}static interpolationFactor(n,c,f,m){let x=0;if(n.name==="exponential")x=zh(c,n.base,f,m);else if(n.name==="linear")x=zh(c,1,f,m);else if(n.name==="cubic-bezier"){const v=n.controlPoints;x=new D(v[0],v[1],v[2],v[3]).solve(zh(c,1,f,m))}return x}static parse(n,c){let[f,m,x,...v]=n;if(!Array.isArray(m)||m.length===0)return c.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const M=m[1];if(typeof M!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:M}}else{if(m[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const M=m.slice(1);if(M.length!==4||M.some(F=>typeof F!="number"||F<0||F>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:M}}}if(n.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(x=c.parse(x,2,wt),!x)return null;const S=[];let A=null;f==="interpolate-hcl"||f==="interpolate-lab"?A=Dn:c.expectedType&&c.expectedType.kind!=="value"&&(A=c.expectedType);for(let M=0;M<v.length;M+=2){const F=v[M],V=v[M+1],q=M+3,K=M+4;if(typeof F!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(S.length&&S[S.length-1][0]>=F)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const Y=c.parse(V,K,A);if(!Y)return null;A=A||Y.type,S.push([F,Y])}return Ye(A,wt)||Ye(A,Dn)||Ye(A,H)||Ye(A,ie)||Ye(A,de(wt))?new zi(A,f,m,x,S):c.error(`Type ${me(A)} is not interpolatable.`)}evaluate(n){const c=this.labels,f=this.outputs;if(c.length===1)return f[0].evaluate(n);const m=this.input.evaluate(n);if(m<=c[0])return f[0].evaluate(n);const x=c.length;if(m>=c[x-1])return f[x-1].evaluate(n);const v=Vo(c,m),S=zi.interpolationFactor(this.interpolation,m,c[v],c[v+1]),A=f[v].evaluate(n),M=f[v+1].evaluate(n);switch(this.operator){case"interpolate":return Fi[this.type.kind](A,M,S);case"interpolate-hcl":return Fi.color(A,M,S,"hcl");case"interpolate-lab":return Fi.color(A,M,S,"lab")}}eachChild(n){n(this.input);for(const c of this.outputs)n(c)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function zh(s,n,c,f){const m=f-c,x=s-c;return m===0?0:n===1?x/m:(Math.pow(n,x)-1)/(Math.pow(n,m)-1)}class Jc{constructor(n,c){this.type=n,this.args=c}static parse(n,c){if(n.length<2)return c.error("Expectected at least one argument.");let f=null;const m=c.expectedType;m&&m.kind!=="value"&&(f=m);const x=[];for(const S of n.slice(1)){const A=c.parse(S,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!A)return null;f=f||A.type,x.push(A)}if(!f)throw new Error("No output type");const v=m&&x.some(S=>Ie(m,S.type));return new Jc(v?Qt:f,x)}evaluate(n){let c,f=null,m=0;for(const x of this.args)if(m++,f=x.evaluate(n),f&&f instanceof Bn&&!f.available&&(c||(c=f.name),f=null,m===this.args.length&&(f=c)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Qc{constructor(n,c){this.type=c.type,this.bindings=[].concat(n),this.result=c}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const c of this.bindings)n(c[1]);n(this.result)}static parse(n,c){if(n.length<4)return c.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let x=1;x<n.length-1;x+=2){const v=n[x];if(typeof v!="string")return c.error(`Expected string, but found ${typeof v} instead.`,x);if(/[^a-zA-Z0-9_]/.test(v))return c.error("Variable names must contain only alphanumeric characters or '_'.",x);const S=c.parse(n[x+1],x+1);if(!S)return null;f.push([v,S])}const m=c.parse(n[n.length-1],n.length-1,c.expectedType,f);return m?new Qc(f,m):null}outputDefined(){return this.result.outputDefined()}}class Oh{constructor(n,c,f){this.type=n,this.index=c,this.input=f}static parse(n,c){if(n.length!==3)return c.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=c.parse(n[1],1,wt),m=c.parse(n[2],2,de(c.expectedType||Qt));return f&&m?new Oh(m.type.itemType,f,m):null}evaluate(n){const c=this.index.evaluate(n),f=this.input.evaluate(n);if(c<0)throw new Kr(`Array index out of bounds: ${c} < 0.`);if(c>=f.length)throw new Kr(`Array index out of bounds: ${c} > ${f.length-1}.`);if(c!==Math.floor(c))throw new Kr(`Array index must be an integer, but found ${c} instead.`);return f[c]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Nh{constructor(n,c){this.type=Kt,this.needle=n,this.haystack=c}static parse(n,c){if(n.length!==3)return c.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=c.parse(n[1],1,Qt),m=c.parse(n[2],2,Qt);return f&&m?ye(f.type,[Kt,tr,wt,ma,Qt])?new Nh(f,m):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${me(f.type)} instead`):null}evaluate(n){const c=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!Re(c,["boolean","string","number","null"]))throw new Kr(`Expected first argument to be of type boolean, string, number or null, but found ${me(Wr(c))} instead.`);if(!Re(f,["string","array"]))throw new Kr(`Expected second argument to be of type array or string, but found ${me(Wr(f))} instead.`);return f.indexOf(c)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class eu{constructor(n,c,f){this.type=wt,this.needle=n,this.haystack=c,this.fromIndex=f}static parse(n,c){if(n.length<=2||n.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=c.parse(n[1],1,Qt),m=c.parse(n[2],2,Qt);if(!f||!m)return null;if(!ye(f.type,[Kt,tr,wt,ma,Qt]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${me(f.type)} instead`);if(n.length===4){const x=c.parse(n[3],3,wt);return x?new eu(f,m,x):null}return new eu(f,m)}evaluate(n){const c=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!Re(c,["boolean","string","number","null"]))throw new Kr(`Expected first argument to be of type boolean, string, number or null, but found ${me(Wr(c))} instead.`);if(!Re(f,["string","array"]))throw new Kr(`Expected second argument to be of type array or string, but found ${me(Wr(f))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return f.indexOf(c,m)}return f.indexOf(c)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Bh{constructor(n,c,f,m,x,v){this.inputType=n,this.type=c,this.input=f,this.cases=m,this.outputs=x,this.otherwise=v}static parse(n,c){if(n.length<5)return c.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return c.error("Expected an even number of arguments.");let f,m;c.expectedType&&c.expectedType.kind!=="value"&&(m=c.expectedType);const x={},v=[];for(let M=2;M<n.length-1;M+=2){let F=n[M];const V=n[M+1];Array.isArray(F)||(F=[F]);const q=c.concat(M);if(F.length===0)return q.error("Expected at least one branch label.");for(const Y of F){if(typeof Y!="number"&&typeof Y!="string")return q.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return q.error("Numeric branch labels must be integer values.");if(f){if(q.checkSubtype(f,Wr(Y)))return null}else f=Wr(Y);if(x[String(Y)]!==void 0)return q.error("Branch labels must be unique.");x[String(Y)]=v.length}const K=c.parse(V,M,m);if(!K)return null;m=m||K.type,v.push(K)}const S=c.parse(n[1],1,Qt);if(!S)return null;const A=c.parse(n[n.length-1],n.length-1,m);return A?S.type.kind!=="value"&&c.concat(1).checkSubtype(f,S.type)?null:new Bh(f,m,S,x,v,A):null}evaluate(n){const c=this.input.evaluate(n);return(Wr(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Uh{constructor(n,c,f){this.type=n,this.branches=c,this.otherwise=f}static parse(n,c){if(n.length<4)return c.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return c.error("Expected an odd number of arguments.");let f;c.expectedType&&c.expectedType.kind!=="value"&&(f=c.expectedType);const m=[];for(let v=1;v<n.length-1;v+=2){const S=c.parse(n[v],v,Kt);if(!S)return null;const A=c.parse(n[v+1],v+1,f);if(!A)return null;m.push([S,A]),f=f||A.type}const x=c.parse(n[n.length-1],n.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new Uh(f,m,x)}evaluate(n){for(const[c,f]of this.branches)if(c.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[c,f]of this.branches)n(c),n(f);n(this.otherwise)}outputDefined(){return this.branches.every(([n,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class tu{constructor(n,c,f,m){this.type=n,this.input=c,this.beginIndex=f,this.endIndex=m}static parse(n,c){if(n.length<=2||n.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=c.parse(n[1],1,Qt),m=c.parse(n[2],2,wt);if(!f||!m)return null;if(!ye(f.type,[de(Qt),tr,Qt]))return c.error(`Expected first argument to be of type array or string, but found ${me(f.type)} instead`);if(n.length===4){const x=c.parse(n[3],3,wt);return x?new tu(f.type,f,m,x):null}return new tu(f.type,f,m)}evaluate(n){const c=this.input.evaluate(n),f=this.beginIndex.evaluate(n);if(!Re(c,["string","array"]))throw new Kr(`Expected first argument to be of type array or string, but found ${me(Wr(c))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return c.slice(f,m)}return c.slice(f)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function mp(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function gp(s,n,c,f){return f.compare(n,c)===0}function jo(s,n,c){const f=s!=="=="&&s!=="!=";return class kC{constructor(x,v,S){this.type=Kt,this.lhs=x,this.rhs=v,this.collator=S,this.hasUntypedArgument=x.type.kind==="value"||v.type.kind==="value"}static parse(x,v){if(x.length!==3&&x.length!==4)return v.error("Expected two or three arguments.");const S=x[0];let A=v.parse(x[1],1,Qt);if(!A)return null;if(!mp(S,A.type))return v.concat(1).error(`"${S}" comparisons are not supported for type '${me(A.type)}'.`);let M=v.parse(x[2],2,Qt);if(!M)return null;if(!mp(S,M.type))return v.concat(2).error(`"${S}" comparisons are not supported for type '${me(M.type)}'.`);if(A.type.kind!==M.type.kind&&A.type.kind!=="value"&&M.type.kind!=="value")return v.error(`Cannot compare types '${me(A.type)}' and '${me(M.type)}'.`);f&&(A.type.kind==="value"&&M.type.kind!=="value"?A=new ea(M.type,[A]):A.type.kind!=="value"&&M.type.kind==="value"&&(M=new ea(A.type,[M])));let F=null;if(x.length===4){if(A.type.kind!=="string"&&M.type.kind!=="string"&&A.type.kind!=="value"&&M.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(F=v.parse(x[3],3,yi),!F)return null}return new kC(A,M,F)}evaluate(x){const v=this.lhs.evaluate(x),S=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const A=Wr(v),M=Wr(S);if(A.kind!==M.kind||A.kind!=="string"&&A.kind!=="number")throw new Kr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${A.kind}, ${M.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const A=Wr(v),M=Wr(S);if(A.kind!=="string"||M.kind!=="string")return n(x,v,S)}return this.collator?c(x,v,S,this.collator.evaluate(x)):n(x,v,S)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const Ug=jo("==",function(s,n,c){return n===c},gp),Vg=jo("!=",function(s,n,c){return n!==c},function(s,n,c,f){return!gp(0,n,c,f)}),jg=jo("<",function(s,n,c){return n<c},function(s,n,c,f){return f.compare(n,c)<0}),$g=jo(">",function(s,n,c){return n>c},function(s,n,c,f){return f.compare(n,c)>0}),Gg=jo("<=",function(s,n,c){return n<=c},function(s,n,c,f){return f.compare(n,c)<=0}),Wg=jo(">=",function(s,n,c){return n>=c},function(s,n,c,f){return f.compare(n,c)>=0});class Vh{constructor(n,c,f,m,x){this.type=tr,this.number=n,this.locale=c,this.currency=f,this.minFractionDigits=m,this.maxFractionDigits=x}static parse(n,c){if(n.length!==3)return c.error("Expected two arguments.");const f=c.parse(n[1],1,wt);if(!f)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return c.error("NumberFormat options argument must be an object.");let x=null;if(m.locale&&(x=c.parse(m.locale,1,tr),!x))return null;let v=null;if(m.currency&&(v=c.parse(m.currency,1,tr),!v))return null;let S=null;if(m["min-fraction-digits"]&&(S=c.parse(m["min-fraction-digits"],1,wt),!S))return null;let A=null;return m["max-fraction-digits"]&&(A=c.parse(m["max-fraction-digits"],1,wt),!A)?null:new Vh(f,x,v,S,A)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class ru{constructor(n){this.type=he,this.sections=n}static parse(n,c){if(n.length<2)return c.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return c.error("First argument must be an image or text section.");const m=[];let x=!1;for(let v=1;v<=n.length-1;++v){const S=n[v];if(x&&typeof S=="object"&&!Array.isArray(S)){x=!1;let A=null;if(S["font-scale"]&&(A=c.parse(S["font-scale"],1,wt),!A))return null;let M=null;if(S["text-font"]&&(M=c.parse(S["text-font"],1,de(tr)),!M))return null;let F=null;if(S["text-color"]&&(F=c.parse(S["text-color"],1,Dn),!F))return null;const V=m[m.length-1];V.scale=A,V.font=M,V.textColor=F}else{const A=c.parse(n[v],1,Qt);if(!A)return null;const M=A.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,m.push({content:A,scale:null,font:null,textColor:null})}}return new ru(m)}evaluate(n){return new nn(this.sections.map(c=>{const f=c.content.evaluate(n);return Wr(f)===Z?new Ba("",f,null,null,null):new Ba(xr(f),null,c.scale?c.scale.evaluate(n):null,c.font?c.font.evaluate(n).join(","):null,c.textColor?c.textColor.evaluate(n):null)}))}eachChild(n){for(const c of this.sections)n(c.content),c.scale&&n(c.scale),c.font&&n(c.font),c.textColor&&n(c.textColor)}outputDefined(){return!1}}class jh{constructor(n){this.type=Z,this.input=n}static parse(n,c){if(n.length!==2)return c.error("Expected two arguments.");const f=c.parse(n[1],1,tr);return f?new jh(f):c.error("No image name provided.")}evaluate(n){const c=this.input.evaluate(n),f=Bn.fromString(c);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(c)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class $h{constructor(n){this.type=wt,this.input=n}static parse(n,c){if(n.length!==2)return c.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=c.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${me(f.type)} instead.`):new $h(f):null}evaluate(n){const c=this.input.evaluate(n);if(typeof c=="string"||Array.isArray(c))return c.length;throw new Kr(`Expected value to be of type string or array, but found ${me(Wr(c))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const $o={"==":Ug,"!=":Vg,">":$g,"<":jg,">=":Wg,"<=":Gg,array:ea,at:Oh,boolean:ea,case:Uh,coalesce:Jc,collator:Wc,format:ru,image:jh,in:Nh,"index-of":eu,interpolate:zi,"interpolate-hcl":zi,"interpolate-lab":zi,length:$h,let:Qc,literal:to,match:Bh,number:ea,"number-format":Vh,object:ea,slice:tu,step:Fs,string:ea,"to-boolean":Ds,"to-color":Ds,"to-number":Ds,"to-string":Ds,var:qc,within:ro};function _p(s,[n,c,f,m]){n=n.evaluate(s),c=c.evaluate(s),f=f.evaluate(s);const x=m?m.evaluate(s):1,v=jc(n,c,f,x);if(v)throw new Kr(v);return new rr(n/255,c/255,f/255,x,!1)}function yp(s,n){return s in n}function Gh(s,n){const c=n[s];return c===void 0?null:c}function no(s){return{type:s}}function xp(s){return{result:"success",value:s}}function zs(s){return{result:"error",value:s}}function Go(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function vp(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Wh(s){return!!s.expression&&s.expression.interpolated}function vr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Hr(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Hg(s){return s}function dr(s,n){const c=n.type==="color",f=s.stops&&typeof s.stops[0][0]=="object",m=f||!(f||s.property!==void 0),x=s.type||(Wh(n)?"exponential":"interval");if(c||n.type==="padding"){const F=c?rr.parse:un.parse;(s=Li({},s)).stops&&(s.stops=s.stops.map(V=>[V[0],F(V[1])])),s.default=F(s.default?s.default:n.default)}if(s.colorSpace&&(v=s.colorSpace)!=="rgb"&&v!=="hcl"&&v!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var v;let S,A,M;if(x==="exponential")S=jl;else if(x==="interval")S=jr;else if(x==="categorical"){S=qr,A=Object.create(null);for(const F of s.stops)A[F[0]]=F[1];M=typeof s.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);S=wp}if(f){const F={},V=[];for(let Y=0;Y<s.stops.length;Y++){const le=s.stops[Y],pe=le[0].zoom;F[pe]===void 0&&(F[pe]={zoom:pe,type:s.type,property:s.property,default:s.default,stops:[]},V.push(pe)),F[pe].stops.push([le[0].value,le[1]])}const q=[];for(const Y of V)q.push([F[Y].zoom,dr(F[Y],n)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:zi.interpolationFactor.bind(void 0,K),zoomStops:q.map(Y=>Y[0]),evaluate:({zoom:Y},le)=>jl({stops:q,base:s.base},n,Y).evaluate(Y,le)}}if(m){const F=x==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:zi.interpolationFactor.bind(void 0,F),zoomStops:s.stops.map(V=>V[0]),evaluate:({zoom:V})=>S(s,n,V,A,M)}}return{kind:"source",evaluate(F,V){const q=V&&V.properties?V.properties[s.property]:void 0;return q===void 0?io(s.default,n.default):S(s,n,q,A,M)}}}function io(s,n,c){return s!==void 0?s:n!==void 0?n:c!==void 0?c:void 0}function qr(s,n,c,f,m){return io(typeof c===m?f[c]:void 0,s.default,n.default)}function jr(s,n,c){if(vr(c)!=="number")return io(s.default,n.default);const f=s.stops.length;if(f===1||c<=s.stops[0][0])return s.stops[0][1];if(c>=s.stops[f-1][0])return s.stops[f-1][1];const m=Vo(s.stops.map(x=>x[0]),c);return s.stops[m][1]}function jl(s,n,c){const f=s.base!==void 0?s.base:1;if(vr(c)!=="number")return io(s.default,n.default);const m=s.stops.length;if(m===1||c<=s.stops[0][0])return s.stops[0][1];if(c>=s.stops[m-1][0])return s.stops[m-1][1];const x=Vo(s.stops.map(F=>F[0]),c),v=function(F,V,q,K){const Y=K-q,le=F-q;return Y===0?0:V===1?le/Y:(Math.pow(V,le)-1)/(Math.pow(V,Y)-1)}(c,f,s.stops[x][0],s.stops[x+1][0]),S=s.stops[x][1],A=s.stops[x+1][1],M=Fi[n.type]||Hg;return typeof S.evaluate=="function"?{evaluate(...F){const V=S.evaluate.apply(void 0,F),q=A.evaluate.apply(void 0,F);if(V!==void 0&&q!==void 0)return M(V,q,v,s.colorSpace)}}:M(S,A,v,s.colorSpace)}function wp(s,n,c){switch(n.type){case"color":c=rr.parse(c);break;case"formatted":c=nn.fromString(c.toString());break;case"resolvedImage":c=Bn.fromString(c.toString());break;case"padding":c=un.parse(c);break;default:vr(c)===n.type||n.type==="enum"&&n.values[c]||(c=void 0)}return io(c,s.default,n.default)}ta.register($o,{error:[{kind:"error"},[tr],(s,[n])=>{throw new Kr(n.evaluate(s))}],typeof:[tr,[Qt],(s,[n])=>me(Wr(n.evaluate(s)))],"to-rgba":[de(wt,4),[Dn],(s,[n])=>{const[c,f,m,x]=n.evaluate(s).rgb;return[255*c,255*f,255*m,x]}],rgb:[Dn,[wt,wt,wt],_p],rgba:[Dn,[wt,wt,wt,wt],_p],has:{type:Kt,overloads:[[[tr],(s,[n])=>yp(n.evaluate(s),s.properties())],[[tr,Qi],(s,[n,c])=>yp(n.evaluate(s),c.evaluate(s))]]},get:{type:Qt,overloads:[[[tr],(s,[n])=>Gh(n.evaluate(s),s.properties())],[[tr,Qi],(s,[n,c])=>Gh(n.evaluate(s),c.evaluate(s))]]},"feature-state":[Qt,[tr],(s,[n])=>Gh(n.evaluate(s),s.featureState||{})],properties:[Qi,[],s=>s.properties()],"geometry-type":[tr,[],s=>s.geometryType()],id:[Qt,[],s=>s.id()],zoom:[wt,[],s=>s.globals.zoom],"heatmap-density":[wt,[],s=>s.globals.heatmapDensity||0],"line-progress":[wt,[],s=>s.globals.lineProgress||0],accumulated:[Qt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[wt,no(wt),(s,n)=>{let c=0;for(const f of n)c+=f.evaluate(s);return c}],"*":[wt,no(wt),(s,n)=>{let c=1;for(const f of n)c*=f.evaluate(s);return c}],"-":{type:wt,overloads:[[[wt,wt],(s,[n,c])=>n.evaluate(s)-c.evaluate(s)],[[wt],(s,[n])=>-n.evaluate(s)]]},"/":[wt,[wt,wt],(s,[n,c])=>n.evaluate(s)/c.evaluate(s)],"%":[wt,[wt,wt],(s,[n,c])=>n.evaluate(s)%c.evaluate(s)],ln2:[wt,[],()=>Math.LN2],pi:[wt,[],()=>Math.PI],e:[wt,[],()=>Math.E],"^":[wt,[wt,wt],(s,[n,c])=>Math.pow(n.evaluate(s),c.evaluate(s))],sqrt:[wt,[wt],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[wt,[wt],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[wt,[wt],(s,[n])=>Math.log(n.evaluate(s))],log2:[wt,[wt],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[wt,[wt],(s,[n])=>Math.sin(n.evaluate(s))],cos:[wt,[wt],(s,[n])=>Math.cos(n.evaluate(s))],tan:[wt,[wt],(s,[n])=>Math.tan(n.evaluate(s))],asin:[wt,[wt],(s,[n])=>Math.asin(n.evaluate(s))],acos:[wt,[wt],(s,[n])=>Math.acos(n.evaluate(s))],atan:[wt,[wt],(s,[n])=>Math.atan(n.evaluate(s))],min:[wt,no(wt),(s,n)=>Math.min(...n.map(c=>c.evaluate(s)))],max:[wt,no(wt),(s,n)=>Math.max(...n.map(c=>c.evaluate(s)))],abs:[wt,[wt],(s,[n])=>Math.abs(n.evaluate(s))],round:[wt,[wt],(s,[n])=>{const c=n.evaluate(s);return c<0?-Math.round(-c):Math.round(c)}],floor:[wt,[wt],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[wt,[wt],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[Kt,[tr,Qt],(s,[n,c])=>s.properties()[n.value]===c.value],"filter-id-==":[Kt,[Qt],(s,[n])=>s.id()===n.value],"filter-type-==":[Kt,[tr],(s,[n])=>s.geometryType()===n.value],"filter-<":[Kt,[tr,Qt],(s,[n,c])=>{const f=s.properties()[n.value],m=c.value;return typeof f==typeof m&&f<m}],"filter-id-<":[Kt,[Qt],(s,[n])=>{const c=s.id(),f=n.value;return typeof c==typeof f&&c<f}],"filter->":[Kt,[tr,Qt],(s,[n,c])=>{const f=s.properties()[n.value],m=c.value;return typeof f==typeof m&&f>m}],"filter-id->":[Kt,[Qt],(s,[n])=>{const c=s.id(),f=n.value;return typeof c==typeof f&&c>f}],"filter-<=":[Kt,[tr,Qt],(s,[n,c])=>{const f=s.properties()[n.value],m=c.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[Kt,[Qt],(s,[n])=>{const c=s.id(),f=n.value;return typeof c==typeof f&&c<=f}],"filter->=":[Kt,[tr,Qt],(s,[n,c])=>{const f=s.properties()[n.value],m=c.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[Kt,[Qt],(s,[n])=>{const c=s.id(),f=n.value;return typeof c==typeof f&&c>=f}],"filter-has":[Kt,[Qt],(s,[n])=>n.value in s.properties()],"filter-has-id":[Kt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Kt,[de(tr)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[Kt,[de(Qt)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[Kt,[tr,de(Qt)],(s,[n,c])=>c.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[Kt,[tr,de(Qt)],(s,[n,c])=>function(f,m,x,v){for(;x<=v;){const S=x+v>>1;if(m[S]===f)return!0;m[S]>f?v=S-1:x=S+1}return!1}(s.properties()[n.value],c.value,0,c.value.length-1)],all:{type:Kt,overloads:[[[Kt,Kt],(s,[n,c])=>n.evaluate(s)&&c.evaluate(s)],[no(Kt),(s,n)=>{for(const c of n)if(!c.evaluate(s))return!1;return!0}]]},any:{type:Kt,overloads:[[[Kt,Kt],(s,[n,c])=>n.evaluate(s)||c.evaluate(s)],[no(Kt),(s,n)=>{for(const c of n)if(c.evaluate(s))return!0;return!1}]]},"!":[Kt,[Kt],(s,[n])=>!n.evaluate(s)],"is-supported-script":[Kt,[tr],(s,[n])=>{const c=s.globals&&s.globals.isSupportedScript;return!c||c(n.evaluate(s))}],upcase:[tr,[tr],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[tr,[tr],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[tr,no(Qt),(s,n)=>n.map(c=>xr(c.evaluate(s))).join("")],"resolved-locale":[tr,[yi],(s,[n])=>n.evaluate(s).resolvedLocale()]});class Hh{constructor(n,c){var f;this.expression=n,this._warningHistory={},this._evaluator=new Ph,this._defaultValue=c?(f=c).type==="color"&&Hr(f.default)?new rr(0,0,0,0):f.type==="color"?rr.parse(f.default)||null:f.type==="padding"?un.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?an.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(n,c,f,m,x,v){return this._evaluator.globals=n,this._evaluator.feature=c,this._evaluator.featureState=f,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(n,c,f,m,x,v){this._evaluator.globals=n,this._evaluator.feature=c||null,this._evaluator.featureState=f||null,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=v||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Kr(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function nu(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in $o}function iu(s,n){const c=new Gc($o,Zc,[],n?function(m){const x={color:Dn,string:tr,number:wt,enum:tr,boolean:Kt,formatted:he,padding:H,resolvedImage:Z,variableAnchorOffsetCollection:ie};return m.type==="array"?de(x[m.value]||Qt,m.length):x[m.type]}(n):void 0),f=c.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?xp(new Hh(f,n)):zs(c.errors)}class qh{constructor(n,c){this.kind=n,this._styleExpression=c,this.isStateDependent=n!=="constant"&&!Vl(c.expression)}evaluateWithoutErrorHandling(n,c,f,m,x,v){return this._styleExpression.evaluateWithoutErrorHandling(n,c,f,m,x,v)}evaluate(n,c,f,m,x,v){return this._styleExpression.evaluate(n,c,f,m,x,v)}}class au{constructor(n,c,f,m){this.kind=n,this.zoomStops=f,this._styleExpression=c,this.isStateDependent=n!=="camera"&&!Vl(c.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,c,f,m,x,v){return this._styleExpression.evaluateWithoutErrorHandling(n,c,f,m,x,v)}evaluate(n,c,f,m,x,v){return this._styleExpression.evaluate(n,c,f,m,x,v)}interpolationFactor(n,c,f){return this.interpolationType?zi.interpolationFactor(this.interpolationType,n,c,f):0}}function Zh(s,n){const c=iu(s,n);if(c.result==="error")return c;const f=c.value.expression,m=Xc(f);if(!m&&!Go(n))return zs([new Fr("","data expressions not supported")]);const x=Kc(f,["zoom"]);if(!x&&!vp(n))return zs([new Fr("","zoom expressions not supported")]);const v=Gl(f);return v||x?v instanceof Fr?zs([v]):v instanceof zi&&!Wh(n)?zs([new Fr("",'"interpolate" expressions cannot be used with this property')]):xp(v?new au(m?"camera":"composite",c.value,v.labels,v instanceof zi?v.interpolation:void 0):new qh(m?"constant":"source",c.value)):zs([new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class $l{constructor(n,c){this._parameters=n,this._specification=c,Li(this,dr(this._parameters,this._specification))}static deserialize(n){return new $l(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Gl(s){let n=null;if(s instanceof Qc)n=Gl(s.result);else if(s instanceof Jc){for(const c of s.args)if(n=Gl(c),n)break}else(s instanceof Fs||s instanceof zi)&&s.input instanceof ta&&s.input.name==="zoom"&&(n=s);return n instanceof Fr||s.eachChild(c=>{const f=Gl(c);f instanceof Fr?n=f:!n&&f?n=new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new Fr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Wl(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!Wl(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const qg={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xh(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Wl(s)||(s=su(s));const n=iu(s,qg);if(n.result==="error")throw new Error(n.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,f,m)=>n.value.evaluate(c,f,{},m),needGeometry:bp(s)}}function Zg(s,n){return s<n?-1:s>n?1:0}function bp(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let n=1;n<s.length;n++)if(bp(s[n]))return!0;return!1}function su(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?Kh(s[1],s[2],"=="):n==="!="?Hl(Kh(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Kh(s[1],s[2],n):n==="any"?(c=s.slice(1),["any"].concat(c.map(su))):n==="all"?["all"].concat(s.slice(1).map(su)):n==="none"?["all"].concat(s.slice(1).map(su).map(Hl)):n==="in"?Sp(s[1],s.slice(2)):n==="!in"?Hl(Sp(s[1],s.slice(2))):n==="has"?Tp(s[1]):n==="!has"?Hl(Tp(s[1])):n!=="within"||s;var c}function Kh(s,n,c){switch(s){case"$type":return[`filter-type-${c}`,n];case"$id":return[`filter-id-${c}`,n];default:return[`filter-${c}`,s,n]}}function Sp(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(c=>typeof c!=typeof n[0])?["filter-in-large",s,["literal",n.sort(Zg)]]:["filter-in-small",s,["literal",n]]}}function Tp(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Hl(s){return["!",s]}function ou(s){const n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let m="[";for(const x of s)m+=`${ou(x)},`;return`${m}]`}const c=Object.keys(s).sort();let f="{";for(let m=0;m<c.length;m++)f+=`${JSON.stringify(c[m])}:${ou(s[c[m]])},`;return`${f}}`}function lu(s){let n="";for(const c of kr)n+=`/${ou(s[c])}`;return n}function Ep(s){const n=s.value;return n?[new xt(s.key,n,"constants have been deprecated as of v8")]:[]}function Yr(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function ao(s){if(Array.isArray(s))return s.map(ao);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const c in s)n[c]=ao(s[c]);return n}return Yr(s)}function xi(s){const n=s.key,c=s.value,f=s.valueSpec||{},m=s.objectElementValidators||{},x=s.style,v=s.styleSpec,S=s.validateSpec;let A=[];const M=vr(c);if(M!=="object")return[new xt(n,c,`object expected, ${M} found`)];for(const F in c){const V=F.split(".")[0],q=f[V]||f["*"];let K;if(m[V])K=m[V];else if(f[V])K=S;else if(m["*"])K=m["*"];else{if(!f["*"]){A.push(new xt(n,c[F],`unknown property "${F}"`));continue}K=S}A=A.concat(K({key:(n&&`${n}.`)+F,value:c[F],valueSpec:q,style:x,styleSpec:v,object:c,objectKey:F,validateSpec:S},c))}for(const F in f)m[F]||f[F].required&&f[F].default===void 0&&c[F]===void 0&&A.push(new xt(n,c,`missing required property "${F}"`));return A}function Wo(s){const n=s.value,c=s.valueSpec,f=s.style,m=s.styleSpec,x=s.key,v=s.arrayElementValidator||s.validateSpec;if(vr(n)!=="array")return[new xt(x,n,`array expected, ${vr(n)} found`)];if(c.length&&n.length!==c.length)return[new xt(x,n,`array length ${c.length} expected, length ${n.length} found`)];if(c["min-length"]&&n.length<c["min-length"])return[new xt(x,n,`array length at least ${c["min-length"]} expected, length ${n.length} found`)];let S={type:c.value,values:c.values};m.$version<7&&(S.function=c.function),vr(c.value)==="object"&&(S=c.value);let A=[];for(let M=0;M<n.length;M++)A=A.concat(v({array:n,arrayIndex:M,value:n[M],valueSpec:S,validateSpec:s.validateSpec,style:f,styleSpec:m,key:`${x}[${M}]`}));return A}function ql(s){const n=s.key,c=s.value,f=s.valueSpec;let m=vr(c);return m==="number"&&c!=c&&(m="NaN"),m!=="number"?[new xt(n,c,`number expected, ${m} found`)]:"minimum"in f&&c<f.minimum?[new xt(n,c,`${c} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&c>f.maximum?[new xt(n,c,`${c} is greater than the maximum value ${f.maximum}`)]:[]}function cu(s){const n=s.valueSpec,c=Yr(s.value.type);let f,m,x,v={};const S=c!=="categorical"&&s.value.property===void 0,A=!S,M=vr(s.value.stops)==="array"&&vr(s.value.stops[0])==="array"&&vr(s.value.stops[0][0])==="object",F=xi({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(K){if(c==="identity")return[new xt(K.key,K.value,'identity function may not have a "stops" property')];let Y=[];const le=K.value;return Y=Y.concat(Wo({key:K.key,value:le,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:V})),vr(le)==="array"&&le.length===0&&Y.push(new xt(K.key,le,"array must have at least one stop")),Y},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:n,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return c==="identity"&&S&&F.push(new xt(s.key,s.value,'missing required property "property"')),c==="identity"||s.value.stops||F.push(new xt(s.key,s.value,'missing required property "stops"')),c==="exponential"&&s.valueSpec.expression&&!Wh(s.valueSpec)&&F.push(new xt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(A&&!Go(s.valueSpec)?F.push(new xt(s.key,s.value,"property functions not supported")):S&&!vp(s.valueSpec)&&F.push(new xt(s.key,s.value,"zoom functions not supported"))),c!=="categorical"&&!M||s.value.property!==void 0||F.push(new xt(s.key,s.value,'"property" property is required')),F;function V(K){let Y=[];const le=K.value,pe=K.key;if(vr(le)!=="array")return[new xt(pe,le,`array expected, ${vr(le)} found`)];if(le.length!==2)return[new xt(pe,le,`array length 2 expected, length ${le.length} found`)];if(M){if(vr(le[0])!=="object")return[new xt(pe,le,`object expected, ${vr(le[0])} found`)];if(le[0].zoom===void 0)return[new xt(pe,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new xt(pe,le,"object stop key must have value")];if(x&&x>Yr(le[0].zoom))return[new xt(pe,le[0].zoom,"stop zoom values must appear in ascending order")];Yr(le[0].zoom)!==x&&(x=Yr(le[0].zoom),m=void 0,v={}),Y=Y.concat(xi({key:`${pe}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:ql,value:q}}))}else Y=Y.concat(q({key:`${pe}[0]`,value:le[0],validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},le));return nu(ao(le[1]))?Y.concat([new xt(`${pe}[1]`,le[1],"expressions are not allowed in function stops.")]):Y.concat(K.validateSpec({key:`${pe}[1]`,value:le[1],valueSpec:n,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function q(K,Y){const le=vr(K.value),pe=Yr(K.value),ve=K.value!==null?K.value:Y;if(f){if(le!==f)return[new xt(K.key,ve,`${le} stop domain type must match previous stop domain type ${f}`)]}else f=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new xt(K.key,ve,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&c!=="categorical"){let Le=`number expected, ${le} found`;return Go(n)&&c===void 0&&(Le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xt(K.key,ve,Le)]}return c!=="categorical"||le!=="number"||isFinite(pe)&&Math.floor(pe)===pe?c!=="categorical"&&le==="number"&&m!==void 0&&pe<m?[new xt(K.key,ve,"stop domain values must appear in ascending order")]:(m=pe,c==="categorical"&&pe in v?[new xt(K.key,ve,"stop domain values must be unique")]:(v[pe]=!0,[])):[new xt(K.key,ve,`integer expected, found ${pe}`)]}}function so(s){const n=(s.expressionContext==="property"?Zh:iu)(ao(s.value),s.valueSpec);if(n.result==="error")return n.value.map(f=>new xt(`${s.key}${f.key}`,s.value,f.message));const c=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!c.outputDefined())return[new xt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Vl(c))return[new xt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!Vl(c))return[new xt(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Kc(c,["zoom","feature-state"]))return[new xt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Xc(c))return[new xt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Zl(s){const n=s.key,c=s.value,f=s.valueSpec,m=[];return Array.isArray(f.values)?f.values.indexOf(Yr(c))===-1&&m.push(new xt(n,c,`expected one of [${f.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(f.values).indexOf(Yr(c))===-1&&m.push(new xt(n,c,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(c)} found`)),m}function Ho(s){return Wl(ao(s.value))?so(Li({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Cp(s)}function Cp(s){const n=s.value,c=s.key;if(vr(n)!=="array")return[new xt(c,n,`array expected, ${vr(n)} found`)];const f=s.styleSpec;let m,x=[];if(n.length<1)return[new xt(c,n,"filter array must have at least 1 element")];switch(x=x.concat(Zl({key:`${c}[0]`,value:n[0],valueSpec:f.filter_operator,style:s.style,styleSpec:s.styleSpec})),Yr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Yr(n[1])==="$type"&&x.push(new xt(c,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&x.push(new xt(c,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=vr(n[1]),m!=="string"&&x.push(new xt(`${c}[1]`,n[1],`string expected, ${m} found`)));for(let v=2;v<n.length;v++)m=vr(n[v]),Yr(n[1])==="$type"?x=x.concat(Zl({key:`${c}[${v}]`,value:n[v],valueSpec:f.geometry_type,style:s.style,styleSpec:s.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&x.push(new xt(`${c}[${v}]`,n[v],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let v=1;v<n.length;v++)x=x.concat(Cp({key:`${c}[${v}]`,value:n[v],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":m=vr(n[1]),n.length!==2?x.push(new xt(c,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&x.push(new xt(`${c}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=vr(n[1]),n.length!==2?x.push(new xt(c,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&x.push(new xt(`${c}[1]`,n[1],`object expected, ${m} found`))}return x}function Ap(s,n){const c=s.key,f=s.validateSpec,m=s.style,x=s.styleSpec,v=s.value,S=s.objectKey,A=x[`${n}_${s.layerType}`];if(!A)return[];const M=S.match(/^(.*)-transition$/);if(n==="paint"&&M&&A[M[1]]&&A[M[1]].transition)return f({key:c,value:v,valueSpec:x.transition,style:m,styleSpec:x});const F=s.valueSpec||A[S];if(!F)return[new xt(c,v,`unknown property "${S}"`)];let V;if(vr(v)==="string"&&Go(F)&&!F.tokens&&(V=/^{([^}]+)}$/.exec(v)))return[new xt(c,v,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const q=[];return s.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&q.push(new xt(c,v,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Hr(ao(v))&&Yr(v.type)==="identity"&&q.push(new xt(c,v,'"text-font" does not support identity functions'))),q.concat(f({key:s.key,value:v,valueSpec:F,style:m,styleSpec:x,expressionContext:"property",propertyType:n,propertyKey:S}))}function kp(s){return Ap(s,"paint")}function Ip(s){return Ap(s,"layout")}function Pp(s){let n=[];const c=s.value,f=s.key,m=s.style,x=s.styleSpec;c.type||c.ref||n.push(new xt(f,c,'either "type" or "ref" is required'));let v=Yr(c.type);const S=Yr(c.ref);if(c.id){const A=Yr(c.id);for(let M=0;M<s.arrayIndex;M++){const F=m.layers[M];Yr(F.id)===A&&n.push(new xt(f,c.id,`duplicate layer id "${c.id}", previously used at line ${F.id.__line__}`))}}if("ref"in c){let A;["type","source","source-layer","filter","layout"].forEach(M=>{M in c&&n.push(new xt(f,c[M],`"${M}" is prohibited for ref layers`))}),m.layers.forEach(M=>{Yr(M.id)===S&&(A=M)}),A?A.ref?n.push(new xt(f,c.ref,"ref cannot reference another ref layer")):v=Yr(A.type):n.push(new xt(f,c.ref,`ref layer "${S}" not found`))}else if(v!=="background")if(c.source){const A=m.sources&&m.sources[c.source],M=A&&Yr(A.type);A?M==="vector"&&v==="raster"?n.push(new xt(f,c.source,`layer "${c.id}" requires a raster source`)):M!=="raster-dem"&&v==="hillshade"?n.push(new xt(f,c.source,`layer "${c.id}" requires a raster-dem source`)):M==="raster"&&v!=="raster"?n.push(new xt(f,c.source,`layer "${c.id}" requires a vector source`)):M!=="vector"||c["source-layer"]?M==="raster-dem"&&v!=="hillshade"?n.push(new xt(f,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!c.paint||!c.paint["line-gradient"]||M==="geojson"&&A.lineMetrics||n.push(new xt(f,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new xt(f,c,`layer "${c.id}" must specify a "source-layer"`)):n.push(new xt(f,c.source,`source "${c.source}" not found`))}else n.push(new xt(f,c,'missing required property "source"'));return n=n.concat(xi({key:f,value:c,valueSpec:x.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${f}.type`,value:c.type,valueSpec:x.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:c,objectKey:"type"}),filter:Ho,layout:A=>xi({layer:c,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":M=>Ip(Li({layerType:v},M))}}),paint:A=>xi({layer:c,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":M=>kp(Li({layerType:v},M))}})}})),n}function Ua(s){const n=s.value,c=s.key,f=vr(n);return f!=="string"?[new xt(c,n,`string expected, ${f} found`)]:[]}const Xl={promoteId:function({key:s,value:n}){if(vr(n)==="string")return Ua({key:s,value:n});{const c=[];for(const f in n)c.push(...Ua({key:`${s}.${f}`,value:n[f]}));return c}}};function Oi(s){const n=s.value,c=s.key,f=s.styleSpec,m=s.style,x=s.validateSpec;if(!n.type)return[new xt(c,n,'"type" is required')];const v=Yr(n.type);let S;switch(v){case"vector":case"raster":return S=xi({key:c,value:n,valueSpec:f[`source_${v.replace("-","_")}`],style:s.style,styleSpec:f,objectElementValidators:Xl,validateSpec:x}),S;case"raster-dem":return S=function(A){var M;const F=(M=A.sourceName)!==null&&M!==void 0?M:"",V=A.value,q=A.styleSpec,K=q.source_raster_dem,Y=A.style;let le=[];const pe=vr(V);if(V===void 0)return le;if(pe!=="object")return le.push(new xt("source_raster_dem",V,`object expected, ${pe} found`)),le;const ve=Yr(V.encoding)==="custom",Le=["redFactor","greenFactor","blueFactor","baseShift"],Ae=A.value.encoding?`"${A.value.encoding}"`:"Default";for(const Oe in V)!ve&&Le.includes(Oe)?le.push(new xt(Oe,V[Oe],`In "${F}": "${Oe}" is only valid when "encoding" is set to "custom". ${Ae} encoding found`)):K[Oe]?le=le.concat(A.validateSpec({key:Oe,value:V[Oe],valueSpec:K[Oe],validateSpec:A.validateSpec,style:Y,styleSpec:q})):le.push(new xt(Oe,V[Oe],`unknown property "${Oe}"`));return le}({sourceName:c,value:n,style:s.style,styleSpec:f,validateSpec:x}),S;case"geojson":if(S=xi({key:c,value:n,valueSpec:f.source_geojson,style:m,styleSpec:f,validateSpec:x,objectElementValidators:Xl}),n.cluster)for(const A in n.clusterProperties){const[M,F]=n.clusterProperties[A],V=typeof M=="string"?[M,["accumulated"],["get",A]]:M;S.push(...so({key:`${c}.${A}.map`,value:F,expressionContext:"cluster-map"})),S.push(...so({key:`${c}.${A}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return S;case"video":return xi({key:c,value:n,valueSpec:f.source_video,style:m,validateSpec:x,styleSpec:f});case"image":return xi({key:c,value:n,valueSpec:f.source_image,style:m,validateSpec:x,styleSpec:f});case"canvas":return[new xt(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zl({key:`${c}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Kl(s){const n=s.value,c=s.styleSpec,f=c.light,m=s.style;let x=[];const v=vr(n);if(n===void 0)return x;if(v!=="object")return x=x.concat([new xt("light",n,`object expected, ${v} found`)]),x;for(const S in n){const A=S.match(/^(.*)-transition$/);x=x.concat(A&&f[A[1]]&&f[A[1]].transition?s.validateSpec({key:S,value:n[S],valueSpec:c.transition,validateSpec:s.validateSpec,style:m,styleSpec:c}):f[S]?s.validateSpec({key:S,value:n[S],valueSpec:f[S],validateSpec:s.validateSpec,style:m,styleSpec:c}):[new xt(S,n[S],`unknown property "${S}"`)])}return x}function Mp(s){const n=s.value,c=s.styleSpec,f=c.terrain,m=s.style;let x=[];const v=vr(n);if(n===void 0)return x;if(v!=="object")return x=x.concat([new xt("terrain",n,`object expected, ${v} found`)]),x;for(const S in n)x=x.concat(f[S]?s.validateSpec({key:S,value:n[S],valueSpec:f[S],validateSpec:s.validateSpec,style:m,styleSpec:c}):[new xt(S,n[S],`unknown property "${S}"`)]);return x}function Rp(s){let n=[];const c=s.value,f=s.key;if(Array.isArray(c)){const m=[],x=[];for(const v in c)c[v].id&&m.includes(c[v].id)&&n.push(new xt(f,c,`all the sprites' ids must be unique, but ${c[v].id} is duplicated`)),m.push(c[v].id),c[v].url&&x.includes(c[v].url)&&n.push(new xt(f,c,`all the sprites' URLs must be unique, but ${c[v].url} is duplicated`)),x.push(c[v].url),n=n.concat(xi({key:`${f}[${v}]`,value:c[v],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return Ua({key:f,value:c})}const Dp={"*":()=>[],array:Wo,boolean:function(s){const n=s.value,c=s.key,f=vr(n);return f!=="boolean"?[new xt(c,n,`boolean expected, ${f} found`)]:[]},number:ql,color:function(s){const n=s.key,c=s.value,f=vr(c);return f!=="string"?[new xt(n,c,`color expected, ${f} found`)]:rr.parse(String(c))?[]:[new xt(n,c,`color expected, "${c}" found`)]},constants:Ep,enum:Zl,filter:Ho,function:cu,layer:Pp,object:xi,source:Oi,light:Kl,terrain:Mp,string:Ua,formatted:function(s){return Ua(s).length===0?[]:so(s)},resolvedImage:function(s){return Ua(s).length===0?[]:so(s)},padding:function(s){const n=s.key,c=s.value;if(vr(c)==="array"){if(c.length<1||c.length>4)return[new xt(n,c,`padding requires 1 to 4 values; ${c.length} values found`)];const f={type:"number"};let m=[];for(let x=0;x<c.length;x++)m=m.concat(s.validateSpec({key:`${n}[${x}]`,value:c[x],validateSpec:s.validateSpec,valueSpec:f}));return m}return ql({key:n,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const n=s.key,c=s.value,f=vr(c),m=s.styleSpec;if(f!=="array"||c.length<1||c.length%2!=0)return[new xt(n,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let v=0;v<c.length;v+=2)x=x.concat(Zl({key:`${n}[${v}]`,value:c[v],valueSpec:m.layout_symbol["text-anchor"]})),x=x.concat(Wo({key:`${n}[${v+1}]`,value:c[v+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:m}));return x},sprite:Rp};function Os(s){const n=s.value,c=s.valueSpec,f=s.styleSpec;return s.validateSpec=Os,c.expression&&Hr(Yr(n))?cu(s):c.expression&&nu(ao(n))?so(s):c.type&&Dp[c.type]?Dp[c.type](s):xi(Li({},s,{valueSpec:c.type?f[c.type]:c}))}function Lp(s){const n=s.value,c=s.key,f=Ua(s);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new xt(c,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new xt(c,n,'"glyphs" url must include a "{range}" token'))),f}function ra(s,n=Xe){let c=[];return c=c.concat(Os({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:Os,objectElementValidators:{glyphs:Lp,"*":()=>[]}})),s.constants&&(c=c.concat(Ep({key:"constants",value:s.constants}))),uu(c)}function as(s){return function(n){return s({...n,validateSpec:Os})}}function uu(s){return[].concat(s).sort((n,c)=>n.line-c.line)}function ss(s){return function(...n){return uu(s.apply(this,n))}}ra.source=ss(as(Oi)),ra.sprite=ss(as(Rp)),ra.glyphs=ss(as(Lp)),ra.light=ss(as(Kl)),ra.terrain=ss(as(Mp)),ra.layer=ss(as(Pp)),ra.filter=ss(as(Ho)),ra.paintProperty=ss(as(kp)),ra.layoutProperty=ss(as(Ip));const os=ra,Xg=os.light,Yh=os.paintProperty,Fp=os.layoutProperty;function hu(s,n){let c=!1;if(n&&n.length)for(const f of n)s.fire(new hr(new Error(f.message))),c=!0;return c}class qo{constructor(n,c,f){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const v=new Int32Array(this.arrayBuffer);n=v[0],this.d=(c=v[1])+2*(f=v[2]);for(let A=0;A<this.d*this.d;A++){const M=v[3+A],F=v[3+A+1];m.push(M===F?null:v.subarray(M,F))}const S=v[3+m.length+1];this.keys=v.subarray(v[3+m.length],S),this.bboxes=v.subarray(S),this.insert=this._insertReadonly}else{this.d=c+2*f;for(let v=0;v<this.d*this.d;v++)m.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=n,this.padding=f,this.scale=c/n,this.uid=0;const x=f/c*n;this.min=-x,this.max=n+x}insert(n,c,f,m,x){this._forEachCell(c,f,m,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,c,f,m,x,v){this.cells[x].push(v)}query(n,c,f,m,x){const v=this.min,S=this.max;if(n<=v&&c<=v&&S<=f&&S<=m&&!x)return Array.prototype.slice.call(this.keys);{const A=[];return this._forEachCell(n,c,f,m,this._queryCell,A,{},x),A}}_queryCell(n,c,f,m,x,v,S,A){const M=this.cells[x];if(M!==null){const F=this.keys,V=this.bboxes;for(let q=0;q<M.length;q++){const K=M[q];if(S[K]===void 0){const Y=4*K;(A?A(V[Y+0],V[Y+1],V[Y+2],V[Y+3]):n<=V[Y+2]&&c<=V[Y+3]&&f>=V[Y+0]&&m>=V[Y+1])?(S[K]=!0,v.push(F[K])):S[K]=!1}}}}_forEachCell(n,c,f,m,x,v,S,A){const M=this._convertToCellCoord(n),F=this._convertToCellCoord(c),V=this._convertToCellCoord(f),q=this._convertToCellCoord(m);for(let K=M;K<=V;K++)for(let Y=F;Y<=q;Y++){const le=this.d*Y+K;if((!A||A(this._convertFromCellCoord(K),this._convertFromCellCoord(Y),this._convertFromCellCoord(K+1),this._convertFromCellCoord(Y+1)))&&x.call(this,n,c,f,m,le,v,S,A))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,c=3+this.cells.length+1+1;let f=0;for(let v=0;v<this.cells.length;v++)f+=this.cells[v].length;const m=new Int32Array(c+f+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let x=c;for(let v=0;v<n.length;v++){const S=n[v];m[3+v]=x,m.set(S,x),x+=S.length}return m[3+n.length]=x,m.set(this.keys,x),x+=this.keys.length,m[3+n.length+1]=x,m.set(this.bboxes,x),x+=this.bboxes.length,m.buffer}static serialize(n,c){const f=n.toArrayBuffer();return c&&c.push(f),{buffer:f}}static deserialize(n){return new qo(n.buffer)}}const ls={};function Ft(s,n,c={}){if(ls[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),ls[s]={klass:n,omit:c.omit||[],shallow:c.shallow||[]}}Ft("Object",Object),Ft("TransferableGridIndex",qo),Ft("Color",rr),Ft("Error",Error),Ft("AJAXError",lt),Ft("ResolvedImage",Bn),Ft("StylePropertyFunction",$l),Ft("StyleExpression",Hh,{omit:["_evaluator"]}),Ft("ZoomDependentExpression",au),Ft("ZoomConstantExpression",qh),Ft("CompoundExpression",ta,{omit:["_evaluate"]});for(const s in $o)$o[s]._classRegistryKey||Ft(`Expression_${s}`,$o[s]);function fu(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Ns(s,n){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob)return s;if(fu(s)||dt(s))return n&&n.push(s),s;if(ArrayBuffer.isView(s)){const c=s;return n&&n.push(c.buffer),c}if(s instanceof ImageData)return n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const c=[];for(const f of s)c.push(Ns(f,n));return c}if(typeof s=="object"){const c=s.constructor,f=c._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!ls[f])throw new Error(`${f} is not registered.`);const m=c.serialize?c.serialize(s,n):{};if(c.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in s){if(!s.hasOwnProperty(x)||ls[f].omit.indexOf(x)>=0)continue;const v=s[x];m[x]=ls[f].shallow.indexOf(x)>=0?v:Ns(v,n)}s instanceof Error&&(m.message=s.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(m.$name=f),m}throw new Error("can't serialize object of type "+typeof s)}function Zo(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||fu(s)||dt(s)||ArrayBuffer.isView(s)||s instanceof ImageData)return s;if(Array.isArray(s))return s.map(Zo);if(typeof s=="object"){const n=s.$name||"Object";if(!ls[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:c}=ls[n];if(!c)throw new Error(`can't deserialize unregistered class ${n}`);if(c.deserialize)return c.deserialize(s);const f=Object.create(c.prototype);for(const m of Object.keys(s)){if(m==="$name")continue;const x=s[m];f[m]=ls[n].shallow.indexOf(m)>=0?x:Zo(x)}return f}throw new Error("can't deserialize object of type "+typeof s)}class zp{constructor(){this.first=!0}update(n,c){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=c),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const It={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Jh(s){for(const n of s)if(ef(n.charCodeAt(0)))return!0;return!1}function Qh(s){for(const n of s)if(!Kg(n.charCodeAt(0)))return!1;return!0}function Kg(s){return!(It.Arabic(s)||It["Arabic Supplement"](s)||It["Arabic Extended-A"](s)||It["Arabic Presentation Forms-A"](s)||It["Arabic Presentation Forms-B"](s))}function ef(s){return!(s!==746&&s!==747&&(s<4352||!(It["Bopomofo Extended"](s)||It.Bopomofo(s)||It["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||It["CJK Compatibility Ideographs"](s)||It["CJK Compatibility"](s)||It["CJK Radicals Supplement"](s)||It["CJK Strokes"](s)||!(!It["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||It["CJK Unified Ideographs Extension A"](s)||It["CJK Unified Ideographs"](s)||It["Enclosed CJK Letters and Months"](s)||It["Hangul Compatibility Jamo"](s)||It["Hangul Jamo Extended-A"](s)||It["Hangul Jamo Extended-B"](s)||It["Hangul Jamo"](s)||It["Hangul Syllables"](s)||It.Hiragana(s)||It["Ideographic Description Characters"](s)||It.Kanbun(s)||It["Kangxi Radicals"](s)||It["Katakana Phonetic Extensions"](s)||It.Katakana(s)&&s!==12540||!(!It["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!It["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||It["Unified Canadian Aboriginal Syllabics"](s)||It["Unified Canadian Aboriginal Syllabics Extended"](s)||It["Vertical Forms"](s)||It["Yijing Hexagram Symbols"](s)||It["Yi Syllables"](s)||It["Yi Radicals"](s))))}function Op(s){return!(ef(s)||function(n){return!!(It["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||It["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||It["Letterlike Symbols"](n)||It["Number Forms"](n)||It["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||It["Control Pictures"](n)&&n!==9251||It["Optical Character Recognition"](n)||It["Enclosed Alphanumerics"](n)||It["Geometric Shapes"](n)||It["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||It["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||It["CJK Symbols and Punctuation"](n)||It.Katakana(n)||It["Private Use Area"](n)||It["CJK Compatibility Forms"](n)||It["Small Form Variants"](n)||It["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(s))}function Np(s){return s>=1424&&s<=2303||It["Arabic Presentation Forms-A"](s)||It["Arabic Presentation Forms-B"](s)}function Bp(s,n){return!(!n&&Np(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||It.Khmer(s))}function Yg(s){for(const n of s)if(Np(n.charCodeAt(0)))return!0;return!1}const tf="deferred",rf="loading",nf="loaded";let af=null,vi="unavailable",Bs=null;const Yl=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(vi="error"),af&&af(s)};function sf(){Jl.fire(new Lt("pluginStateChange",{pluginStatus:vi,pluginURL:Bs}))}const Jl=new Ur,of=function(){return vi},Up=function(){if(vi!==tf||!Bs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");vi=rf,sf(),Bs&&Yt({url:Bs},s=>{s?Yl(s):(vi=nf,sf())})},Ni={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>vi===nf||Ni.applyArabicShaping!=null,isLoading:()=>vi===rf,setState(s){if(!Rt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");vi=s.pluginStatus,Bs=s.pluginURL},isParsed(){if(!Rt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ni.applyArabicShaping!=null&&Ni.processBidirectionalText!=null&&Ni.processStyledBidirectionalText!=null},getPluginURL(){if(!Rt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Bs}};class zr{constructor(n,c){this.zoom=n,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zp,this.transition={})}isSupportedScript(n){return function(c,f){for(const m of c)if(!Bp(m.charCodeAt(0),f))return!1;return!0}(n,Ni.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,c=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*c}}}class du{constructor(n,c){this.property=n,this.value=c,this.expression=function(f,m){if(Hr(f))return new $l(f,m);if(nu(f)){const x=Zh(f,m);if(x.result==="error")throw new Error(x.value.map(v=>`${v.key}: ${v.message}`).join(", "));return x.value}{let x=f;return m.type==="color"&&typeof f=="string"?x=rr.parse(f):m.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(x=an.parse(f)):x=un.parse(f),{kind:"constant",evaluate:()=>x}}}(c===void 0?n.specification.default:c,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,c,f){return this.property.possiblyEvaluate(this,n,c,f)}}class lf{constructor(n){this.property=n,this.value=new du(n,void 0)}transitioned(n,c){return new jp(this.property,this.value,c,we({},n.transition,this.transition),n.now)}untransitioned(){return new jp(this.property,this.value,null,{},0)}}class Vp{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Ue(this._values[n].value.value)}setValue(n,c){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new lf(this._values[n].property)),this._values[n].value=new du(this._values[n].property,c===null?void 0:Ue(c))}getTransition(n){return Ue(this._values[n].transition)}setTransition(n,c){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new lf(this._values[n].property)),this._values[n].transition=Ue(c)||void 0}serialize(){const n={};for(const c of Object.keys(this._values)){const f=this.getValue(c);f!==void 0&&(n[c]=f);const m=this.getTransition(c);m!==void 0&&(n[`${c}-transition`]=m)}return n}transitioned(n,c){const f=new $p(this._properties);for(const m of Object.keys(this._values))f._values[m]=this._values[m].transitioned(n,c._values[m]);return f}untransitioned(){const n=new $p(this._properties);for(const c of Object.keys(this._values))n._values[c]=this._values[c].untransitioned();return n}}class jp{constructor(n,c,f,m,x){this.property=n,this.value=c,this.begin=x+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=f)}possiblyEvaluate(n,c,f){const m=n.now||0,x=this.value.possiblyEvaluate(n,c,f),v=this.prior;if(v){if(m>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(m<this.begin)return v.possiblyEvaluate(n,c,f);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(n,c,f),x,function(A){if(A<=0)return 0;if(A>=1)return 1;const M=A*A,F=M*A;return 4*(A<.5?F:3*(A-M)+F-.75)}(S))}}return x}}class $p{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,c,f){const m=new pu(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(n,c,f);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Jg{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Ue(this._values[n].value)}setValue(n,c){this._values[n]=new du(this._values[n].property,c===null?void 0:Ue(c))}serialize(){const n={};for(const c of Object.keys(this._values)){const f=this.getValue(c);f!==void 0&&(n[c]=f)}return n}possiblyEvaluate(n,c,f){const m=new pu(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(n,c,f);return m}}class ni{constructor(n,c,f){this.property=n,this.value=c,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,c,f,m){return this.property.evaluate(this.value,this.parameters,n,c,f,m)}}class pu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class $t{constructor(n){this.specification=n}possiblyEvaluate(n,c){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(c)}interpolate(n,c,f){const m=Fi[this.specification.type];return m?m(n,c,f):n}}class Ht{constructor(n,c){this.specification=n,this.overrides=c}possiblyEvaluate(n,c,f,m){return new ni(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(c,null,{},f,m)}:n.expression,c)}interpolate(n,c,f){if(n.value.kind!=="constant"||c.value.kind!=="constant")return n;if(n.value.value===void 0||c.value.value===void 0)return new ni(this,{kind:"constant",value:void 0},n.parameters);const m=Fi[this.specification.type];if(m){const x=m(n.value.value,c.value.value,f);return new ni(this,{kind:"constant",value:x},n.parameters)}return n}evaluate(n,c,f,m,x,v){return n.kind==="constant"?n.value:n.evaluate(c,f,m,x,v)}}class Ql extends Ht{possiblyEvaluate(n,c,f,m){if(n.value===void 0)return new ni(this,{kind:"constant",value:void 0},c);if(n.expression.kind==="constant"){const x=n.expression.evaluate(c,null,{},f,m),v=n.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,S=this._calculate(v,v,v,c);return new ni(this,{kind:"constant",value:S},c)}if(n.expression.kind==="camera"){const x=this._calculate(n.expression.evaluate({zoom:c.zoom-1}),n.expression.evaluate({zoom:c.zoom}),n.expression.evaluate({zoom:c.zoom+1}),c);return new ni(this,{kind:"constant",value:x},c)}return new ni(this,n.expression,c)}evaluate(n,c,f,m,x,v){if(n.kind==="source"){const S=n.evaluate(c,f,m,x,v);return this._calculate(S,S,S,c)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(c.zoom)-1},f,m),n.evaluate({zoom:Math.floor(c.zoom)},f,m),n.evaluate({zoom:Math.floor(c.zoom)+1},f,m),c):n.value}_calculate(n,c,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:c}:{from:f,to:c}}interpolate(n){return n}}class cf{constructor(n){this.specification=n}possiblyEvaluate(n,c,f,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const x=n.expression.evaluate(c,null,{},f,m);return this._calculate(x,x,x,c)}return this._calculate(n.expression.evaluate(new zr(Math.floor(c.zoom-1),c)),n.expression.evaluate(new zr(Math.floor(c.zoom),c)),n.expression.evaluate(new zr(Math.floor(c.zoom+1),c)),c)}}_calculate(n,c,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:c}:{from:f,to:c}}interpolate(n){return n}}class uf{constructor(n){this.specification=n}possiblyEvaluate(n,c,f,m){return!!n.expression.evaluate(c,null,{},f,m)}interpolate(){return!1}}class hn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in n){const f=n[c];f.specification.overridable&&this.overridableProperties.push(c);const m=this.defaultPropertyValues[c]=new du(f,void 0),x=this.defaultTransitionablePropertyValues[c]=new lf(f);this.defaultTransitioningPropertyValues[c]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate({})}}}Ft("DataDrivenProperty",Ht),Ft("DataConstantProperty",$t),Ft("CrossFadedDataDrivenProperty",Ql),Ft("CrossFadedProperty",cf),Ft("ColorRampProperty",uf);const hf="-transition";class na extends Ur{constructor(n,c){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),c.layout&&(this._unevaluatedLayout=new Jg(c.layout)),c.paint)){this._transitionablePaint=new Vp(c.paint);for(const f in n.paint)this.setPaintProperty(f,n.paint[f],{validate:!1});for(const f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pu(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,c,f={}){c!=null&&this._validate(Fp,`layers.${this.id}.layout.${n}`,n,c,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,c):this.visibility=c)}getPaintProperty(n){return n.endsWith(hf)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,c,f={}){if(c!=null&&this._validate(Yh,`layers.${this.id}.paint.${n}`,n,c,f))return!1;if(n.endsWith(hf))return this._transitionablePaint.setTransition(n.slice(0,-11),c||void 0),!1;{const m=this._transitionablePaint._values[n],x=m.property.specification["property-type"]==="cross-faded-data-driven",v=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(n,c),this._handleSpecialPaintPropertyUpdate(n);const A=this._transitionablePaint._values[n].value;return A.isDataDriven()||v||x||this._handleOverridablePaintPropertyUpdate(n,S,A)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,c,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,c){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,c)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),$e(n,(c,f)=>!(c===void 0||f==="layout"&&!Object.keys(c).length||f==="paint"&&!Object.keys(c).length))}_validate(n,c,f,m,x={}){return(!x||x.validate!==!1)&&hu(this,n.call(os,{key:c,layerType:this.type,objectKey:f,value:m,styleSpec:Xe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const c=this.paint.get(n);if(c instanceof ni&&Go(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const Gp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class oo{constructor(n,c){this._structArray=n,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Jr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,c){return n._trim(),c&&(n.isTransferred=!0,c.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const c=Object.create(this.prototype);return c.arrayBuffer=n.arrayBuffer,c.length=n.length,c.capacity=n.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Zr(s,n=1){let c=0,f=0;return{members:s.map(m=>{const x=Gp[m.type].BYTES_PER_ELEMENT,v=c=Xo(c,Math.max(n,x)),S=m.components||1;return f=Math.max(f,x),c+=x*S,{name:m.name,type:m.type,components:S,offset:v}}),size:Xo(c,Math.max(f,n)),alignment:n}}function Xo(s,n){return Math.ceil(s/n)*n}class ec extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,c)}emplace(n,c,f){const m=2*n;return this.int16[m+0]=c,this.int16[m+1]=f,n}}ec.prototype.bytesPerElement=4,Ft("StructArrayLayout2i4",ec);class tc extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,c,f)}emplace(n,c,f,m){const x=3*n;return this.int16[x+0]=c,this.int16[x+1]=f,this.int16[x+2]=m,n}}tc.prototype.bytesPerElement=6,Ft("StructArrayLayout3i6",tc);class lo extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,n,c,f,m)}emplace(n,c,f,m,x){const v=4*n;return this.int16[v+0]=c,this.int16[v+1]=f,this.int16[v+2]=m,this.int16[v+3]=x,n}}lo.prototype.bytesPerElement=8,Ft("StructArrayLayout4i8",lo);class ff extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,f,m,x,v){const S=this.length;return this.resize(S+1),this.emplace(S,n,c,f,m,x,v)}emplace(n,c,f,m,x,v,S){const A=6*n;return this.int16[A+0]=c,this.int16[A+1]=f,this.int16[A+2]=m,this.int16[A+3]=x,this.int16[A+4]=v,this.int16[A+5]=S,n}}ff.prototype.bytesPerElement=12,Ft("StructArrayLayout2i4i12",ff);class df extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,f,m,x,v){const S=this.length;return this.resize(S+1),this.emplace(S,n,c,f,m,x,v)}emplace(n,c,f,m,x,v,S){const A=4*n,M=8*n;return this.int16[A+0]=c,this.int16[A+1]=f,this.uint8[M+4]=m,this.uint8[M+5]=x,this.uint8[M+6]=v,this.uint8[M+7]=S,n}}df.prototype.bytesPerElement=8,Ft("StructArrayLayout2i4ub8",df);class Ko extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,c)}emplace(n,c,f){const m=2*n;return this.float32[m+0]=c,this.float32[m+1]=f,n}}Ko.prototype.bytesPerElement=8,Ft("StructArrayLayout2f8",Ko);class pf extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,f,m,x,v,S,A,M,F){const V=this.length;return this.resize(V+1),this.emplace(V,n,c,f,m,x,v,S,A,M,F)}emplace(n,c,f,m,x,v,S,A,M,F,V){const q=10*n;return this.uint16[q+0]=c,this.uint16[q+1]=f,this.uint16[q+2]=m,this.uint16[q+3]=x,this.uint16[q+4]=v,this.uint16[q+5]=S,this.uint16[q+6]=A,this.uint16[q+7]=M,this.uint16[q+8]=F,this.uint16[q+9]=V,n}}pf.prototype.bytesPerElement=20,Ft("StructArrayLayout10ui20",pf);class mf extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,f,m,x,v,S,A,M,F,V,q){const K=this.length;return this.resize(K+1),this.emplace(K,n,c,f,m,x,v,S,A,M,F,V,q)}emplace(n,c,f,m,x,v,S,A,M,F,V,q,K){const Y=12*n;return this.int16[Y+0]=c,this.int16[Y+1]=f,this.int16[Y+2]=m,this.int16[Y+3]=x,this.uint16[Y+4]=v,this.uint16[Y+5]=S,this.uint16[Y+6]=A,this.uint16[Y+7]=M,this.int16[Y+8]=F,this.int16[Y+9]=V,this.int16[Y+10]=q,this.int16[Y+11]=K,n}}mf.prototype.bytesPerElement=24,Ft("StructArrayLayout4i4ui4i24",mf);class wr extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,c,f)}emplace(n,c,f,m){const x=3*n;return this.float32[x+0]=c,this.float32[x+1]=f,this.float32[x+2]=m,n}}wr.prototype.bytesPerElement=12,Ft("StructArrayLayout3f12",wr);class _ extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.uint32[1*n+0]=c,n}}_.prototype.bytesPerElement=4,Ft("StructArrayLayout1ul4",_);class i extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,f,m,x,v,S,A,M){const F=this.length;return this.resize(F+1),this.emplace(F,n,c,f,m,x,v,S,A,M)}emplace(n,c,f,m,x,v,S,A,M,F){const V=10*n,q=5*n;return this.int16[V+0]=c,this.int16[V+1]=f,this.int16[V+2]=m,this.int16[V+3]=x,this.int16[V+4]=v,this.int16[V+5]=S,this.uint32[q+3]=A,this.uint16[V+8]=M,this.uint16[V+9]=F,n}}i.prototype.bytesPerElement=20,Ft("StructArrayLayout6i1ul2ui20",i);class u extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,f,m,x,v){const S=this.length;return this.resize(S+1),this.emplace(S,n,c,f,m,x,v)}emplace(n,c,f,m,x,v,S){const A=6*n;return this.int16[A+0]=c,this.int16[A+1]=f,this.int16[A+2]=m,this.int16[A+3]=x,this.int16[A+4]=v,this.int16[A+5]=S,n}}u.prototype.bytesPerElement=12,Ft("StructArrayLayout2i2i2i12",u);class p extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,c,f,m,x){const v=this.length;return this.resize(v+1),this.emplace(v,n,c,f,m,x)}emplace(n,c,f,m,x,v){const S=4*n,A=8*n;return this.float32[S+0]=c,this.float32[S+1]=f,this.float32[S+2]=m,this.int16[A+6]=x,this.int16[A+7]=v,n}}p.prototype.bytesPerElement=16,Ft("StructArrayLayout2f1f2i16",p);class g extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,n,c,f,m)}emplace(n,c,f,m,x){const v=12*n,S=3*n;return this.uint8[v+0]=c,this.uint8[v+1]=f,this.float32[S+1]=m,this.float32[S+2]=x,n}}g.prototype.bytesPerElement=12,Ft("StructArrayLayout2ub2f12",g);class y extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,c,f)}emplace(n,c,f,m){const x=3*n;return this.uint16[x+0]=c,this.uint16[x+1]=f,this.uint16[x+2]=m,n}}y.prototype.bytesPerElement=6,Ft("StructArrayLayout3ui6",y);class T extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,f,m,x,v,S,A,M,F,V,q,K,Y,le,pe,ve){const Le=this.length;return this.resize(Le+1),this.emplace(Le,n,c,f,m,x,v,S,A,M,F,V,q,K,Y,le,pe,ve)}emplace(n,c,f,m,x,v,S,A,M,F,V,q,K,Y,le,pe,ve,Le){const Ae=24*n,Oe=12*n,We=48*n;return this.int16[Ae+0]=c,this.int16[Ae+1]=f,this.uint16[Ae+2]=m,this.uint16[Ae+3]=x,this.uint32[Oe+2]=v,this.uint32[Oe+3]=S,this.uint32[Oe+4]=A,this.uint16[Ae+10]=M,this.uint16[Ae+11]=F,this.uint16[Ae+12]=V,this.float32[Oe+7]=q,this.float32[Oe+8]=K,this.uint8[We+36]=Y,this.uint8[We+37]=le,this.uint8[We+38]=pe,this.uint32[Oe+10]=ve,this.int16[Ae+22]=Le,n}}T.prototype.bytesPerElement=48,Ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class C extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,f,m,x,v,S,A,M,F,V,q,K,Y,le,pe,ve,Le,Ae,Oe,We,rt,Pt,Bt,At,Et,vt,Ot){const St=this.length;return this.resize(St+1),this.emplace(St,n,c,f,m,x,v,S,A,M,F,V,q,K,Y,le,pe,ve,Le,Ae,Oe,We,rt,Pt,Bt,At,Et,vt,Ot)}emplace(n,c,f,m,x,v,S,A,M,F,V,q,K,Y,le,pe,ve,Le,Ae,Oe,We,rt,Pt,Bt,At,Et,vt,Ot,St){const ut=32*n,Wt=16*n;return this.int16[ut+0]=c,this.int16[ut+1]=f,this.int16[ut+2]=m,this.int16[ut+3]=x,this.int16[ut+4]=v,this.int16[ut+5]=S,this.int16[ut+6]=A,this.int16[ut+7]=M,this.uint16[ut+8]=F,this.uint16[ut+9]=V,this.uint16[ut+10]=q,this.uint16[ut+11]=K,this.uint16[ut+12]=Y,this.uint16[ut+13]=le,this.uint16[ut+14]=pe,this.uint16[ut+15]=ve,this.uint16[ut+16]=Le,this.uint16[ut+17]=Ae,this.uint16[ut+18]=Oe,this.uint16[ut+19]=We,this.uint16[ut+20]=rt,this.uint16[ut+21]=Pt,this.uint16[ut+22]=Bt,this.uint32[Wt+12]=At,this.float32[Wt+13]=Et,this.float32[Wt+14]=vt,this.uint16[ut+30]=Ot,this.uint16[ut+31]=St,n}}C.prototype.bytesPerElement=64,Ft("StructArrayLayout8i15ui1ul2f2ui64",C);class I extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.float32[1*n+0]=c,n}}I.prototype.bytesPerElement=4,Ft("StructArrayLayout1f4",I);class L extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,c,f)}emplace(n,c,f,m){const x=3*n;return this.uint16[6*n+0]=c,this.float32[x+1]=f,this.float32[x+2]=m,n}}L.prototype.bytesPerElement=12,Ft("StructArrayLayout1ui2f12",L);class O extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,c,f)}emplace(n,c,f,m){const x=4*n;return this.uint32[2*n+0]=c,this.uint16[x+2]=f,this.uint16[x+3]=m,n}}O.prototype.bytesPerElement=8,Ft("StructArrayLayout1ul2ui8",O);class U extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,c)}emplace(n,c,f){const m=2*n;return this.uint16[m+0]=c,this.uint16[m+1]=f,n}}U.prototype.bytesPerElement=4,Ft("StructArrayLayout2ui4",U);class X extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const c=this.length;return this.resize(c+1),this.emplace(c,n)}emplace(n,c){return this.uint16[1*n+0]=c,n}}X.prototype.bytesPerElement=2,Ft("StructArrayLayout1ui2",X);class ue extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,c,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,n,c,f,m)}emplace(n,c,f,m,x){const v=4*n;return this.float32[v+0]=c,this.float32[v+1]=f,this.float32[v+2]=m,this.float32[v+3]=x,n}}ue.prototype.bytesPerElement=16,Ft("StructArrayLayout4f16",ue);class ce extends oo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}ce.prototype.size=20;class fe extends i{get(n){return new ce(this,n)}}Ft("CollisionBoxArray",fe);class oe extends oo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}oe.prototype.size=48;class Me extends T{get(n){return new oe(this,n)}}Ft("PlacedSymbolArray",Me);class Ve extends oo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ve.prototype.size=64;class ge extends C{get(n){return new Ve(this,n)}}Ft("SymbolInstanceArray",ge);class De extends I{getoffsetX(n){return this.float32[1*n+0]}}Ft("GlyphOffsetArray",De);class He extends tc{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Ft("SymbolLineVertexArray",He);class qe extends oo{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}qe.prototype.size=12;class tt extends L{get(n){return new qe(this,n)}}Ft("TextAnchorOffsetArray",tt);class ct extends oo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ct.prototype.size=8;class st extends O{get(n){return new ct(this,n)}}Ft("FeatureIndexArray",st);class _t extends ec{}class Nt extends ec{}class or extends ec{}class Tt extends ff{}class qt extends df{}class Ut extends Ko{}class Tr extends pf{}class sr extends mf{}class ir extends wr{}class lr extends _{}class sn extends u{}class Ir extends g{}class Un extends y{}class Sn extends U{}const fn=Zr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bi}=fn;class Or{constructor(n=[]){this.segments=n}prepareSegment(n,c,f,m){let x=this.segments[this.segments.length-1];return n>Or.MAX_VERTEX_ARRAY_LENGTH&&yt(`Max vertices per segment is ${Or.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!x||x.vertexLength+n>Or.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==m)&&(x={vertexOffset:c.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},m!==void 0&&(x.sortKey=m),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const n of this.segments)for(const c in n.vaos)n.vaos[c].destroy()}static simpleSegment(n,c,f,m){return new Or([{vertexOffset:n,primitiveOffset:c,vertexLength:f,primitiveLength:m,vaos:{},sortKey:0}])}}function Va(s,n){return 256*(s=Ce(Math.floor(s),0,255))+Ce(Math.floor(n),0,255)}Or.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ft("SegmentVector",Or);const ja=Zr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Us={exports:{}},co={exports:{}};co.exports=function(s,n){var c,f,m,x,v,S,A,M;for(f=s.length-(c=3&s.length),m=n,v=3432918353,S=461845907,M=0;M<f;)A=255&s.charCodeAt(M)|(255&s.charCodeAt(++M))<<8|(255&s.charCodeAt(++M))<<16|(255&s.charCodeAt(++M))<<24,++M,m=27492+(65535&(x=5*(65535&(m=(m^=A=(65535&(A=(A=(65535&A)*v+(((A>>>16)*v&65535)<<16)&4294967295)<<15|A>>>17))*S+(((A>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(A=0,c){case 3:A^=(255&s.charCodeAt(M+2))<<16;case 2:A^=(255&s.charCodeAt(M+1))<<8;case 1:m^=A=(65535&(A=(A=(65535&(A^=255&s.charCodeAt(M)))*v+(((A>>>16)*v&65535)<<16)&4294967295)<<15|A>>>17))*S+(((A>>>16)*S&65535)<<16)&4294967295}return m^=s.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Yo=co.exports,Hn={exports:{}};Hn.exports=function(s,n){for(var c,f=s.length,m=n^f,x=0;f>=4;)c=1540483477*(65535&(c=255&s.charCodeAt(x)|(255&s.charCodeAt(++x))<<8|(255&s.charCodeAt(++x))<<16|(255&s.charCodeAt(++x))<<24))+((1540483477*(c>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:m^=(255&s.charCodeAt(x+2))<<16;case 2:m^=(255&s.charCodeAt(x+1))<<8;case 1:m=1540483477*(65535&(m^=255&s.charCodeAt(x)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Vn=Yo,ii=Hn.exports;Us.exports=Vn,Us.exports.murmur3=Vn,Us.exports.murmur2=ii;var uo=w(Us.exports);class on{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,c,f,m){this.ids.push(Tn(n)),this.positions.push(c,f,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=Tn(n);let f=0,m=this.ids.length-1;for(;f<m;){const v=f+m>>1;this.ids[v]>=c?m=v:f=v+1}const x=[];for(;this.ids[f]===c;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(n,c){const f=new Float64Array(n.ids),m=new Uint32Array(n.positions);return wi(f,m,0,f.length-1),c&&c.push(f.buffer,m.buffer),{ids:f,positions:m}}static deserialize(n){const c=new on;return c.ids=n.ids,c.positions=n.positions,c.indexed=!0,c}}function Tn(s){const n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:uo(String(s))}function wi(s,n,c,f){for(;c<f;){const m=s[c+f>>1];let x=c-1,v=f+1;for(;;){do x++;while(s[x]<m);do v--;while(s[v]>m);if(x>=v)break;ln(s,x,v),ln(n,3*x,3*v),ln(n,3*x+1,3*v+1),ln(n,3*x+2,3*v+2)}v-c<f-v?(wi(s,n,c,v),c=v+1):(wi(s,n,v+1,f),f=v)}}function ln(s,n,c){const f=s[n];s[n]=s[c],s[c]=f}Ft("FeaturePositionMap",on);class ho{constructor(n,c){this.gl=n.gl,this.location=c}}class mu extends ho{constructor(n,c){super(n,c),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Wp extends ho{constructor(n,c){super(n,c),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Hp extends ho{constructor(n,c){super(n,c),this.current=rr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Qg=new Float32Array(16);function gf(s){return[Va(255*s.r,255*s.g),Va(255*s.b,255*s.a)]}class $a{constructor(n,c,f){this.value=n,this.uniformNames=c.map(m=>`u_${m}`),this.type=f}setUniform(n,c,f){n.set(f.constantOr(this.value))}getBinding(n,c,f){return this.type==="color"?new Hp(n,c):new mu(n,c)}}class fo{constructor(n,c){this.uniformNames=c.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=n.tlbr}setUniform(n,c,f,m){const x=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&n.set(x)}getBinding(n,c,f){return f.substr(0,9)==="u_pattern"?new Wp(n,c):new mu(n,c)}}class Ga{constructor(n,c,f,m){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=c.map(x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,c,f,m,x){const v=this.paintVertexArray.length,S=this.expression.evaluate(new zr(0),c,{},m,[],x);this.paintVertexArray.resize(n),this._setPaintValue(v,n,S)}updatePaintArray(n,c,f,m){const x=this.expression.evaluate({zoom:0},f,m);this._setPaintValue(n,c,x)}_setPaintValue(n,c,f){if(this.type==="color"){const m=gf(f);for(let x=n;x<c;x++)this.paintVertexArray.emplace(x,m[0],m[1])}else{for(let m=n;m<c;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ia{constructor(n,c,f,m,x,v){this.expression=n,this.uniformNames=c.map(S=>`u_${S}_t`),this.type=f,this.useIntegerZoom=m,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=c.map(S=>({name:`a_${S}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,c,f,m,x){const v=this.expression.evaluate(new zr(this.zoom),c,{},m,[],x),S=this.expression.evaluate(new zr(this.zoom+1),c,{},m,[],x),A=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(A,n,v,S)}updatePaintArray(n,c,f,m){const x=this.expression.evaluate({zoom:this.zoom},f,m),v=this.expression.evaluate({zoom:this.zoom+1},f,m);this._setPaintValue(n,c,x,v)}_setPaintValue(n,c,f,m){if(this.type==="color"){const x=gf(f),v=gf(m);for(let S=n;S<c;S++)this.paintVertexArray.emplace(S,x[0],x[1],v[0],v[1])}else{for(let x=n;x<c;x++)this.paintVertexArray.emplace(x,f,m);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,c){const f=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,m=Ce(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,c,f){return new mu(n,c)}}class Wa{constructor(n,c,f,m,x,v){this.expression=n,this.type=c,this.useIntegerZoom=f,this.zoom=m,this.layerId=v,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(n,c,f){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,c.patterns&&c.patterns[this.layerId],f)}updatePaintArray(n,c,f,m,x){this._setPaintValues(n,c,f.patterns&&f.patterns[this.layerId],x)}_setPaintValues(n,c,f,m){if(!m||!f)return;const{min:x,mid:v,max:S}=f,A=m[x],M=m[v],F=m[S];if(A&&M&&F)for(let V=n;V<c;V++)this.zoomInPaintVertexArray.emplace(V,M.tl[0],M.tl[1],M.br[0],M.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],M.pixelRatio,A.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,M.tl[0],M.tl[1],M.br[0],M.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],M.pixelRatio,F.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ja.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ja.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _f{constructor(n,c,f){this.binders={},this._buffers=[];const m=[];for(const x in n.paint._values){if(!f(x))continue;const v=n.paint.get(x);if(!(v instanceof ni&&Go(v.property.specification)))continue;const S=I4(x,n.type),A=v.value,M=v.property.specification.type,F=v.property.useIntegerZoom,V=v.property.specification["property-type"],q=V==="cross-faded"||V==="cross-faded-data-driven";if(A.kind==="constant")this.binders[x]=q?new fo(A.value,S):new $a(A.value,S,M),m.push(`/u_${x}`);else if(A.kind==="source"||q){const K=T1(x,M,"source");this.binders[x]=q?new Wa(A,M,F,c,K,n.id):new Ga(A,S,M,K),m.push(`/a_${x}`)}else{const K=T1(x,M,"composite");this.binders[x]=new ia(A,S,M,F,c,K),m.push(`/z_${x}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const c=this.binders[n];return c instanceof Ga||c instanceof ia?c.maxValue:0}populatePaintArrays(n,c,f,m,x){for(const v in this.binders){const S=this.binders[v];(S instanceof Ga||S instanceof ia||S instanceof Wa)&&S.populatePaintArray(n,c,f,m,x)}}setConstantPatternPositions(n,c){for(const f in this.binders){const m=this.binders[f];m instanceof fo&&m.setConstantPatternPositions(n,c)}}updatePaintArrays(n,c,f,m,x){let v=!1;for(const S in n){const A=c.getPositions(S);for(const M of A){const F=f.feature(M.index);for(const V in this.binders){const q=this.binders[V];if((q instanceof Ga||q instanceof ia||q instanceof Wa)&&q.expression.isStateDependent===!0){const K=m.paint.get(V);q.expression=K.value,q.updatePaintArray(M.start,M.end,F,n[S],x),v=!0}}}}return v}defines(){const n=[];for(const c in this.binders){const f=this.binders[c];(f instanceof $a||f instanceof fo)&&n.push(...f.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const c in this.binders){const f=this.binders[c];if(f instanceof Ga||f instanceof ia)for(let m=0;m<f.paintVertexAttributes.length;m++)n.push(f.paintVertexAttributes[m].name);else if(f instanceof Wa)for(let m=0;m<ja.members.length;m++)n.push(ja.members[m].name)}return n}getBinderUniforms(){const n=[];for(const c in this.binders){const f=this.binders[c];if(f instanceof $a||f instanceof fo||f instanceof ia)for(const m of f.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,c){const f=[];for(const m in this.binders){const x=this.binders[m];if(x instanceof $a||x instanceof fo||x instanceof ia){for(const v of x.uniformNames)if(c[v]){const S=x.getBinding(n,c[v],v);f.push({name:v,property:m,binding:S})}}}return f}setUniforms(n,c,f,m){for(const{name:x,property:v,binding:S}of c)this.binders[v].setUniform(S,m,f.get(v),x)}updatePaintBuffers(n){this._buffers=[];for(const c in this.binders){const f=this.binders[c];if(n&&f instanceof Wa){const m=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(f instanceof Ga||f instanceof ia)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const c in this.binders){const f=this.binders[c];(f instanceof Ga||f instanceof ia||f instanceof Wa)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const c=this.binders[n];(c instanceof Ga||c instanceof ia||c instanceof Wa)&&c.destroy()}}}class cs{constructor(n,c,f=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new _f(m,c,f);this.needsUpload=!1,this._featureMap=new on,this._bufferOffset=0}populatePaintArrays(n,c,f,m,x,v){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,c,m,x,v);c.id!==void 0&&this._featureMap.add(c.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,c,f,m){for(const x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(n,this._featureMap,c,x,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function I4(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function T1(s,n,c){const f={color:{source:Ko,composite:ue},number:{source:I,composite:Ko}},m=function(x){return{"line-pattern":{source:Tr,composite:Tr},"fill-pattern":{source:Tr,composite:Tr},"fill-extrusion-pattern":{source:Tr,composite:Tr}}[x]}(s);return m&&m[c]||f[n][c]}Ft("ConstantBinder",$a),Ft("CrossFadedConstantBinder",fo),Ft("SourceExpressionBinder",Ga),Ft("CrossFadedCompositeBinder",Wa),Ft("CompositeExpressionBinder",ia),Ft("ProgramConfiguration",_f,{omit:["_buffers"]}),Ft("ProgramConfigurationSet",cs);const _n=8192,e_=Math.pow(2,14)-1,E1=-e_-1;function rc(s){const n=_n/s.extent,c=s.loadGeometry();for(let f=0;f<c.length;f++){const m=c[f];for(let x=0;x<m.length;x++){const v=m[x],S=Math.round(v.x*n),A=Math.round(v.y*n);v.x=Ce(S,E1,e_),v.y=Ce(A,E1,e_),(S<v.x||S>v.x+1||A<v.y||A>v.y+1)&&yt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function nc(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?rc(s):[]}}function qp(s,n,c,f,m){s.emplaceBack(2*n+(f+1)/2,2*c+(m+1)/2)}class t_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Nt,this.indexArray=new Un,this.segments=new Or,this.programConfigurations=new cs(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,f){const m=this.layers[0],x=[];let v=null,S=!1;m.type==="circle"&&(v=m.layout.get("circle-sort-key"),S=!v.isConstant());for(const{feature:A,id:M,index:F,sourceLayerIndex:V}of n){const q=this.layers[0]._featureFilter.needGeometry,K=nc(A,q);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),K,f))continue;const Y=S?v.evaluate(K,{},f):void 0,le={id:M,properties:A.properties,type:A.type,sourceLayerIndex:V,index:F,geometry:q?K.geometry:rc(A),patterns:{},sortKey:Y};x.push(le)}S&&x.sort((A,M)=>A.sortKey-M.sortKey);for(const A of x){const{geometry:M,index:F,sourceLayerIndex:V}=A,q=n[F].feature;this.addFeature(A,M,F,f),c.featureIndex.insert(q,M,F,V,this.index)}}update(n,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Bi),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,c,f,m){for(const x of c)for(const v of x){const S=v.x,A=v.y;if(S<0||S>=_n||A<0||A>=_n)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),F=M.vertexLength;qp(this.layoutVertexArray,S,A,-1,-1),qp(this.layoutVertexArray,S,A,1,-1),qp(this.layoutVertexArray,S,A,1,1),qp(this.layoutVertexArray,S,A,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+3,F+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{},m)}}function C1(s,n){for(let c=0;c<s.length;c++)if(gu(n,s[c]))return!0;for(let c=0;c<n.length;c++)if(gu(s,n[c]))return!0;return!!r_(s,n)}function P4(s,n,c){return!!gu(s,n)||!!n_(n,s,c)}function A1(s,n){if(s.length===1)return I1(n,s[0]);for(let c=0;c<n.length;c++){const f=n[c];for(let m=0;m<f.length;m++)if(gu(s,f[m]))return!0}for(let c=0;c<s.length;c++)if(I1(n,s[c]))return!0;for(let c=0;c<n.length;c++)if(r_(s,n[c]))return!0;return!1}function M4(s,n,c){if(s.length>1){if(r_(s,n))return!0;for(let f=0;f<n.length;f++)if(n_(n[f],s,c))return!0}for(let f=0;f<s.length;f++)if(n_(s[f],n,c))return!0;return!1}function r_(s,n){if(s.length===0||n.length===0)return!1;for(let c=0;c<s.length-1;c++){const f=s[c],m=s[c+1];for(let x=0;x<n.length-1;x++)if(R4(f,m,n[x],n[x+1]))return!0}return!1}function R4(s,n,c,f){return gt(s,c,f)!==gt(n,c,f)&&gt(s,n,c)!==gt(s,n,f)}function n_(s,n,c){const f=c*c;if(n.length===1)return s.distSqr(n[0])<f;for(let m=1;m<n.length;m++)if(k1(s,n[m-1],n[m])<f)return!0;return!1}function k1(s,n,c){const f=n.distSqr(c);if(f===0)return s.distSqr(n);const m=((s.x-n.x)*(c.x-n.x)+(s.y-n.y)*(c.y-n.y))/f;return s.distSqr(m<0?n:m>1?c:c.sub(n)._mult(m)._add(n))}function I1(s,n){let c,f,m,x=!1;for(let v=0;v<s.length;v++){c=s[v];for(let S=0,A=c.length-1;S<c.length;A=S++)f=c[S],m=c[A],f.y>n.y!=m.y>n.y&&n.x<(m.x-f.x)*(n.y-f.y)/(m.y-f.y)+f.x&&(x=!x)}return x}function gu(s,n){let c=!1;for(let f=0,m=s.length-1;f<s.length;m=f++){const x=s[f],v=s[m];x.y>n.y!=v.y>n.y&&n.x<(v.x-x.x)*(n.y-x.y)/(v.y-x.y)+x.x&&(c=!c)}return c}function D4(s,n,c){const f=c[0],m=c[2];if(s.x<f.x&&n.x<f.x||s.x>m.x&&n.x>m.x||s.y<f.y&&n.y<f.y||s.y>m.y&&n.y>m.y)return!1;const x=gt(s,n,c[0]);return x!==gt(s,n,c[1])||x!==gt(s,n,c[2])||x!==gt(s,n,c[3])}function yf(s,n,c){const f=n.paint.get(s).value;return f.kind==="constant"?f.value:c.programConfigurations.get(n.id).getMaxValue(s)}function Zp(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Xp(s,n,c,f,m){if(!n[0]&&!n[1])return s;const x=k.convert(n)._mult(m);c==="viewport"&&x._rotate(-f);const v=[];for(let S=0;S<s.length;S++)v.push(s[S].sub(x));return v}let P1,M1;Ft("CircleBucket",t_,{omit:["layers"]});var L4={get paint(){return M1=M1||new hn({"circle-radius":new Ht(Xe.paint_circle["circle-radius"]),"circle-color":new Ht(Xe.paint_circle["circle-color"]),"circle-blur":new Ht(Xe.paint_circle["circle-blur"]),"circle-opacity":new Ht(Xe.paint_circle["circle-opacity"]),"circle-translate":new $t(Xe.paint_circle["circle-translate"]),"circle-translate-anchor":new $t(Xe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new $t(Xe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new $t(Xe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ht(Xe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ht(Xe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ht(Xe.paint_circle["circle-stroke-opacity"])})},get layout(){return P1=P1||new hn({"circle-sort-key":new Ht(Xe.layout_circle["circle-sort-key"])})}},bi=1e-6,_u=typeof Float32Array<"u"?Float32Array:Array;function i_(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function R1(s,n,c){var f=n[0],m=n[1],x=n[2],v=n[3],S=n[4],A=n[5],M=n[6],F=n[7],V=n[8],q=n[9],K=n[10],Y=n[11],le=n[12],pe=n[13],ve=n[14],Le=n[15],Ae=c[0],Oe=c[1],We=c[2],rt=c[3];return s[0]=Ae*f+Oe*S+We*V+rt*le,s[1]=Ae*m+Oe*A+We*q+rt*pe,s[2]=Ae*x+Oe*M+We*K+rt*ve,s[3]=Ae*v+Oe*F+We*Y+rt*Le,s[4]=(Ae=c[4])*f+(Oe=c[5])*S+(We=c[6])*V+(rt=c[7])*le,s[5]=Ae*m+Oe*A+We*q+rt*pe,s[6]=Ae*x+Oe*M+We*K+rt*ve,s[7]=Ae*v+Oe*F+We*Y+rt*Le,s[8]=(Ae=c[8])*f+(Oe=c[9])*S+(We=c[10])*V+(rt=c[11])*le,s[9]=Ae*m+Oe*A+We*q+rt*pe,s[10]=Ae*x+Oe*M+We*K+rt*ve,s[11]=Ae*v+Oe*F+We*Y+rt*Le,s[12]=(Ae=c[12])*f+(Oe=c[13])*S+(We=c[14])*V+(rt=c[15])*le,s[13]=Ae*m+Oe*A+We*q+rt*pe,s[14]=Ae*x+Oe*M+We*K+rt*ve,s[15]=Ae*v+Oe*F+We*Y+rt*Le,s}Math.hypot||(Math.hypot=function(){for(var s=0,n=arguments.length;n--;)s+=arguments[n]*arguments[n];return Math.sqrt(s)});var xf,F4=R1;function Kp(s,n,c){var f=n[0],m=n[1],x=n[2],v=n[3];return s[0]=c[0]*f+c[4]*m+c[8]*x+c[12]*v,s[1]=c[1]*f+c[5]*m+c[9]*x+c[13]*v,s[2]=c[2]*f+c[6]*m+c[10]*x+c[14]*v,s[3]=c[3]*f+c[7]*m+c[11]*x+c[15]*v,s}xf=new _u(4),_u!=Float32Array&&(xf[0]=0,xf[1]=0,xf[2]=0,xf[3]=0);class z4 extends na{constructor(n){super(n,L4)}createBucket(n){return new t_(n)}queryRadius(n){const c=n;return yf("circle-radius",this,c)+yf("circle-stroke-width",this,c)+Zp(this.paint.get("circle-translate"))}queryIntersectsFeature(n,c,f,m,x,v,S,A){const M=Xp(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,S),F=this.paint.get("circle-radius").evaluate(c,f)+this.paint.get("circle-stroke-width").evaluate(c,f),V=this.paint.get("circle-pitch-alignment")==="map",q=V?M:function(Y,le){return Y.map(pe=>D1(pe,le))}(M,A),K=V?F*S:F;for(const Y of m)for(const le of Y){const pe=V?le:D1(le,A);let ve=K;const Le=Kp([],[le.x,le.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ve*=Le[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ve*=v.cameraToCenterDistance/Le[3]),P4(q,pe,ve))return!0}return!1}}function D1(s,n){const c=Kp([],[s.x,s.y,0,1],n);return new k(c[0]/c[3],c[1]/c[3])}class L1 extends t_{}let F1;Ft("HeatmapBucket",L1,{omit:["layers"]});var O4={get paint(){return F1=F1||new hn({"heatmap-radius":new Ht(Xe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ht(Xe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new $t(Xe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uf(Xe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new $t(Xe.paint_heatmap["heatmap-opacity"])})}};function a_(s,{width:n,height:c},f,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*c*f)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*c*f}`)}else m=new Uint8Array(n*c*f);return s.width=n,s.height=c,s.data=m,s}function z1(s,{width:n,height:c},f){if(n===s.width&&c===s.height)return;const m=a_({},{width:n,height:c},f);s_(s,m,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,c)},f),s.width=n,s.height=c,s.data=m.data}function s_(s,n,c,f,m,x){if(m.width===0||m.height===0)return n;if(m.width>s.width||m.height>s.height||c.x>s.width-m.width||c.y>s.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||f.x>n.width-m.width||f.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const v=s.data,S=n.data;if(v===S)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<m.height;A++){const M=((c.y+A)*s.width+c.x)*x,F=((f.y+A)*n.width+f.x)*x;for(let V=0;V<m.width*x;V++)S[F+V]=v[M+V]}return n}class vf{constructor(n,c){a_(this,n,1,c)}resize(n){z1(this,n,1)}clone(){return new vf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,c,f,m,x){s_(n,c,f,m,x,1)}}class ga{constructor(n,c){a_(this,n,4,c)}resize(n){z1(this,n,4)}replace(n,c){c?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ga({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,c,f,m,x){s_(n,c,f,m,x,4)}}function O1(s){const n={},c=s.resolution||256,f=s.clips?s.clips.length:1,m=s.image||new ga({width:c,height:f});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const x=(v,S,A)=>{n[s.evaluationKey]=A;const M=s.expression.evaluate(n);m.data[v+S+0]=Math.floor(255*M.r/M.a),m.data[v+S+1]=Math.floor(255*M.g/M.a),m.data[v+S+2]=Math.floor(255*M.b/M.a),m.data[v+S+3]=Math.floor(255*M.a)};if(s.clips)for(let v=0,S=0;v<f;++v,S+=4*c)for(let A=0,M=0;A<c;A++,M+=4){const F=A/(c-1),{start:V,end:q}=s.clips[v];x(S,M,V*(1-F)+q*F)}else for(let v=0,S=0;v<c;v++,S+=4)x(0,S,v/(c-1));return m}Ft("AlphaImage",vf),Ft("RGBAImage",ga);class N4 extends na{createBucket(n){return new L1(n)}constructor(n){super(n,O4),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=O1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let N1;var B4={get paint(){return N1=N1||new hn({"hillshade-illumination-direction":new $t(Xe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new $t(Xe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new $t(Xe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new $t(Xe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new $t(Xe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new $t(Xe.paint_hillshade["hillshade-accent-color"])})}};class U4 extends na{constructor(n){super(n,B4)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const V4=Zr([{name:"a_pos",components:2,type:"Int16"}],4),{members:j4}=V4;var o_={exports:{}};function Yp(s,n,c){c=c||2;var f,m,x,v,S,A,M,F=n&&n.length,V=F?n[0]*c:s.length,q=B1(s,0,V,c,!0),K=[];if(!q||q.next===q.prev)return K;if(F&&(q=function(le,pe,ve,Le){var Ae,Oe,We,rt=[];for(Ae=0,Oe=pe.length;Ae<Oe;Ae++)(We=B1(le,pe[Ae]*Le,Ae<Oe-1?pe[Ae+1]*Le:le.length,Le,!1))===We.next&&(We.steiner=!0),rt.push(K4(We));for(rt.sort(q4),Ae=0;Ae<rt.length;Ae++)ve=Z4(rt[Ae],ve);return ve}(s,n,q,c)),s.length>80*c){f=x=s[0],m=v=s[1];for(var Y=c;Y<V;Y+=c)(S=s[Y])<f&&(f=S),(A=s[Y+1])<m&&(m=A),S>x&&(x=S),A>v&&(v=A);M=(M=Math.max(x-f,v-m))!==0?32767/M:0}return wf(q,K,c,f,m,M,0),K}function B1(s,n,c,f,m){var x,v;if(m===u_(s,n,c,f)>0)for(x=n;x<c;x+=f)v=j1(x,s[x],s[x+1],v);else for(x=c-f;x>=n;x-=f)v=j1(x,s[x],s[x+1],v);return v&&Jp(v,v.next)&&(Sf(v),v=v.next),v}function ic(s,n){if(!s)return s;n||(n=s);var c,f=s;do if(c=!1,f.steiner||!Jp(f,f.next)&&dn(f.prev,f,f.next)!==0)f=f.next;else{if(Sf(f),(f=n=f.prev)===f.next)break;c=!0}while(c||f!==n);return n}function wf(s,n,c,f,m,x,v){if(s){!v&&x&&function(F,V,q,K){var Y=F;do Y.z===0&&(Y.z=l_(Y.x,Y.y,V,q,K)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==F);Y.prevZ.nextZ=null,Y.prevZ=null,function(le){var pe,ve,Le,Ae,Oe,We,rt,Pt,Bt=1;do{for(ve=le,le=null,Oe=null,We=0;ve;){for(We++,Le=ve,rt=0,pe=0;pe<Bt&&(rt++,Le=Le.nextZ);pe++);for(Pt=Bt;rt>0||Pt>0&&Le;)rt!==0&&(Pt===0||!Le||ve.z<=Le.z)?(Ae=ve,ve=ve.nextZ,rt--):(Ae=Le,Le=Le.nextZ,Pt--),Oe?Oe.nextZ=Ae:le=Ae,Ae.prevZ=Oe,Oe=Ae;ve=Le}Oe.nextZ=null,Bt*=2}while(We>1)}(Y)}(s,f,m,x);for(var S,A,M=s;s.prev!==s.next;)if(S=s.prev,A=s.next,x?G4(s,f,m,x):$4(s))n.push(S.i/c|0),n.push(s.i/c|0),n.push(A.i/c|0),Sf(s),s=A.next,M=A.next;else if((s=A)===M){v?v===1?wf(s=W4(ic(s),n,c),n,c,f,m,x,2):v===2&&H4(s,n,c,f,m,x):wf(ic(s),n,c,f,m,x,1);break}}}function $4(s){var n=s.prev,c=s,f=s.next;if(dn(n,c,f)>=0)return!1;for(var m=n.x,x=c.x,v=f.x,S=n.y,A=c.y,M=f.y,F=m<x?m<v?m:v:x<v?x:v,V=S<A?S<M?S:M:A<M?A:M,q=m>x?m>v?m:v:x>v?x:v,K=S>A?S>M?S:M:A>M?A:M,Y=f.next;Y!==n;){if(Y.x>=F&&Y.x<=q&&Y.y>=V&&Y.y<=K&&yu(m,S,x,A,v,M,Y.x,Y.y)&&dn(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function G4(s,n,c,f){var m=s.prev,x=s,v=s.next;if(dn(m,x,v)>=0)return!1;for(var S=m.x,A=x.x,M=v.x,F=m.y,V=x.y,q=v.y,K=S<A?S<M?S:M:A<M?A:M,Y=F<V?F<q?F:q:V<q?V:q,le=S>A?S>M?S:M:A>M?A:M,pe=F>V?F>q?F:q:V>q?V:q,ve=l_(K,Y,n,c,f),Le=l_(le,pe,n,c,f),Ae=s.prevZ,Oe=s.nextZ;Ae&&Ae.z>=ve&&Oe&&Oe.z<=Le;){if(Ae.x>=K&&Ae.x<=le&&Ae.y>=Y&&Ae.y<=pe&&Ae!==m&&Ae!==v&&yu(S,F,A,V,M,q,Ae.x,Ae.y)&&dn(Ae.prev,Ae,Ae.next)>=0||(Ae=Ae.prevZ,Oe.x>=K&&Oe.x<=le&&Oe.y>=Y&&Oe.y<=pe&&Oe!==m&&Oe!==v&&yu(S,F,A,V,M,q,Oe.x,Oe.y)&&dn(Oe.prev,Oe,Oe.next)>=0))return!1;Oe=Oe.nextZ}for(;Ae&&Ae.z>=ve;){if(Ae.x>=K&&Ae.x<=le&&Ae.y>=Y&&Ae.y<=pe&&Ae!==m&&Ae!==v&&yu(S,F,A,V,M,q,Ae.x,Ae.y)&&dn(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.prevZ}for(;Oe&&Oe.z<=Le;){if(Oe.x>=K&&Oe.x<=le&&Oe.y>=Y&&Oe.y<=pe&&Oe!==m&&Oe!==v&&yu(S,F,A,V,M,q,Oe.x,Oe.y)&&dn(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.nextZ}return!0}function W4(s,n,c){var f=s;do{var m=f.prev,x=f.next.next;!Jp(m,x)&&U1(m,f,f.next,x)&&bf(m,x)&&bf(x,m)&&(n.push(m.i/c|0),n.push(f.i/c|0),n.push(x.i/c|0),Sf(f),Sf(f.next),f=s=x),f=f.next}while(f!==s);return ic(f)}function H4(s,n,c,f,m,x){var v=s;do{for(var S=v.next.next;S!==v.prev;){if(v.i!==S.i&&Y4(v,S)){var A=V1(v,S);return v=ic(v,v.next),A=ic(A,A.next),wf(v,n,c,f,m,x,0),void wf(A,n,c,f,m,x,0)}S=S.next}v=v.next}while(v!==s)}function q4(s,n){return s.x-n.x}function Z4(s,n){var c=function(m,x){var v,S=x,A=m.x,M=m.y,F=-1/0;do{if(M<=S.y&&M>=S.next.y&&S.next.y!==S.y){var V=S.x+(M-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(V<=A&&V>F&&(F=V,v=S.x<S.next.x?S:S.next,V===A))return v}S=S.next}while(S!==x);if(!v)return null;var q,K=v,Y=v.x,le=v.y,pe=1/0;S=v;do A>=S.x&&S.x>=Y&&A!==S.x&&yu(M<le?A:F,M,Y,le,M<le?F:A,M,S.x,S.y)&&(q=Math.abs(M-S.y)/(A-S.x),bf(S,m)&&(q<pe||q===pe&&(S.x>v.x||S.x===v.x&&X4(v,S)))&&(v=S,pe=q)),S=S.next;while(S!==K);return v}(s,n);if(!c)return n;var f=V1(c,s);return ic(f,f.next),ic(c,c.next)}function X4(s,n){return dn(s.prev,s,n.prev)<0&&dn(n.next,s,s.next)<0}function l_(s,n,c,f,m){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-c)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function K4(s){var n=s,c=s;do(n.x<c.x||n.x===c.x&&n.y<c.y)&&(c=n),n=n.next;while(n!==s);return c}function yu(s,n,c,f,m,x,v,S){return(m-v)*(n-S)>=(s-v)*(x-S)&&(s-v)*(f-S)>=(c-v)*(n-S)&&(c-v)*(x-S)>=(m-v)*(f-S)}function Y4(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!function(c,f){var m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==f.i&&m.next.i!==f.i&&U1(m,m.next,c,f))return!0;m=m.next}while(m!==c);return!1}(s,n)&&(bf(s,n)&&bf(n,s)&&function(c,f){var m=c,x=!1,v=(c.x+f.x)/2,S=(c.y+f.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&v<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(x=!x),m=m.next;while(m!==c);return x}(s,n)&&(dn(s.prev,s,n.prev)||dn(s,n.prev,n))||Jp(s,n)&&dn(s.prev,s,s.next)>0&&dn(n.prev,n,n.next)>0)}function dn(s,n,c){return(n.y-s.y)*(c.x-n.x)-(n.x-s.x)*(c.y-n.y)}function Jp(s,n){return s.x===n.x&&s.y===n.y}function U1(s,n,c,f){var m=e0(dn(s,n,c)),x=e0(dn(s,n,f)),v=e0(dn(c,f,s)),S=e0(dn(c,f,n));return m!==x&&v!==S||!(m!==0||!Qp(s,c,n))||!(x!==0||!Qp(s,f,n))||!(v!==0||!Qp(c,s,f))||!(S!==0||!Qp(c,n,f))}function Qp(s,n,c){return n.x<=Math.max(s.x,c.x)&&n.x>=Math.min(s.x,c.x)&&n.y<=Math.max(s.y,c.y)&&n.y>=Math.min(s.y,c.y)}function e0(s){return s>0?1:s<0?-1:0}function bf(s,n){return dn(s.prev,s,s.next)<0?dn(s,n,s.next)>=0&&dn(s,s.prev,n)>=0:dn(s,n,s.prev)<0||dn(s,s.next,n)<0}function V1(s,n){var c=new c_(s.i,s.x,s.y),f=new c_(n.i,n.x,n.y),m=s.next,x=n.prev;return s.next=n,n.prev=s,c.next=m,m.prev=c,f.next=c,c.prev=f,x.next=f,f.prev=x,f}function j1(s,n,c,f){var m=new c_(s,n,c);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function Sf(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function c_(s,n,c){this.i=s,this.x=n,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u_(s,n,c,f){for(var m=0,x=n,v=c-f;x<c;x+=f)m+=(s[v]-s[x])*(s[x+1]+s[v+1]),v=x;return m}o_.exports=Yp,o_.exports.default=Yp,Yp.deviation=function(s,n,c,f){var m=n&&n.length,x=Math.abs(u_(s,0,m?n[0]*c:s.length,c));if(m)for(var v=0,S=n.length;v<S;v++)x-=Math.abs(u_(s,n[v]*c,v<S-1?n[v+1]*c:s.length,c));var A=0;for(v=0;v<f.length;v+=3){var M=f[v]*c,F=f[v+1]*c,V=f[v+2]*c;A+=Math.abs((s[M]-s[V])*(s[F+1]-s[M+1])-(s[M]-s[F])*(s[V+1]-s[M+1]))}return x===0&&A===0?0:Math.abs((A-x)/x)},Yp.flatten=function(s){for(var n=s[0][0].length,c={vertices:[],holes:[],dimensions:n},f=0,m=0;m<s.length;m++){for(var x=0;x<s[m].length;x++)for(var v=0;v<n;v++)c.vertices.push(s[m][x][v]);m>0&&c.holes.push(f+=s[m-1].length)}return c};var $1=w(o_.exports);function J4(s,n,c,f,m){G1(s,n,c,f||s.length-1,m||Q4)}function G1(s,n,c,f,m){for(;f>c;){if(f-c>600){var x=f-c+1,v=n-c+1,S=Math.log(x),A=.5*Math.exp(2*S/3),M=.5*Math.sqrt(S*A*(x-A)/x)*(v-x/2<0?-1:1);G1(s,n,Math.max(c,Math.floor(n-v*A/x+M)),Math.min(f,Math.floor(n+(x-v)*A/x+M)),m)}var F=s[n],V=c,q=f;for(Tf(s,c,n),m(s[f],F)>0&&Tf(s,c,f);V<q;){for(Tf(s,V,q),V++,q--;m(s[V],F)<0;)V++;for(;m(s[q],F)>0;)q--}m(s[c],F)===0?Tf(s,c,q):Tf(s,++q,f),q<=n&&(c=q+1),n<=q&&(f=q-1)}}function Tf(s,n,c){var f=s[n];s[n]=s[c],s[c]=f}function Q4(s,n){return s<n?-1:s>n?1:0}function h_(s,n){const c=s.length;if(c<=1)return[s];const f=[];let m,x;for(let v=0;v<c;v++){const S=nt(s[v]);S!==0&&(s[v].area=Math.abs(S),x===void 0&&(x=S<0),x===S<0?(m&&f.push(m),m=[s[v]]):m.push(s[v]))}if(m&&f.push(m),n>1)for(let v=0;v<f.length;v++)f[v].length<=n||(J4(f[v],n,1,f[v].length-1,eI),f[v]=f[v].slice(0,n));return f}function eI(s,n){return n.area-s.area}function f_(s,n,c){const f=c.patternDependencies;let m=!1;for(const x of n){const v=x.paint.get(`${s}-pattern`);v.isConstant()||(m=!0);const S=v.constantOr(null);S&&(m=!0,f[S.to]=!0,f[S.from]=!0)}return m}function d_(s,n,c,f,m){const x=m.patternDependencies;for(const v of n){const S=v.paint.get(`${s}-pattern`).value;if(S.kind!=="constant"){let A=S.evaluate({zoom:f-1},c,{},m.availableImages),M=S.evaluate({zoom:f},c,{},m.availableImages),F=S.evaluate({zoom:f+1},c,{},m.availableImages);A=A&&A.name?A.name:A,M=M&&M.name?M.name:M,F=F&&F.name?F.name:F,x[A]=!0,x[M]=!0,x[F]=!0,c.patterns[v.id]={min:A,mid:M,max:F}}}return c}class p_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new or,this.indexArray=new Un,this.indexArray2=new Sn,this.programConfigurations=new cs(n.layers,n.zoom),this.segments=new Or,this.segments2=new Or,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,f){this.hasPattern=f_("fill",this.layers,c);const m=this.layers[0].layout.get("fill-sort-key"),x=!m.isConstant(),v=[];for(const{feature:S,id:A,index:M,sourceLayerIndex:F}of n){const V=this.layers[0]._featureFilter.needGeometry,q=nc(S,V);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),q,f))continue;const K=x?m.evaluate(q,{},f,c.availableImages):void 0,Y={id:A,properties:S.properties,type:S.type,sourceLayerIndex:F,index:M,geometry:V?q.geometry:rc(S),patterns:{},sortKey:K};v.push(Y)}x&&v.sort((S,A)=>S.sortKey-A.sortKey);for(const S of v){const{geometry:A,index:M,sourceLayerIndex:F}=S;if(this.hasPattern){const V=d_("fill",this.layers,S,this.zoom,c);this.patternFeatures.push(V)}else this.addFeature(S,A,M,f,{});c.featureIndex.insert(n[M].feature,A,M,F,this.index)}}update(n,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,f)}addFeatures(n,c,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,j4),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,c,f,m,x){for(const v of h_(c,500)){let S=0;for(const K of v)S+=K.length;const A=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),M=A.vertexLength,F=[],V=[];for(const K of v){if(K.length===0)continue;K!==v[0]&&V.push(F.length/2);const Y=this.segments2.prepareSegment(K.length,this.layoutVertexArray,this.indexArray2),le=Y.vertexLength;this.layoutVertexArray.emplaceBack(K[0].x,K[0].y),this.indexArray2.emplaceBack(le+K.length-1,le),F.push(K[0].x),F.push(K[0].y);for(let pe=1;pe<K.length;pe++)this.layoutVertexArray.emplaceBack(K[pe].x,K[pe].y),this.indexArray2.emplaceBack(le+pe-1,le+pe),F.push(K[pe].x),F.push(K[pe].y);Y.vertexLength+=K.length,Y.primitiveLength+=K.length}const q=$1(F,V);for(let K=0;K<q.length;K+=3)this.indexArray.emplaceBack(M+q[K],M+q[K+1],M+q[K+2]);A.vertexLength+=S,A.primitiveLength+=q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,x,m)}}let W1,H1;Ft("FillBucket",p_,{omit:["layers","patternFeatures"]});var tI={get paint(){return H1=H1||new hn({"fill-antialias":new $t(Xe.paint_fill["fill-antialias"]),"fill-opacity":new Ht(Xe.paint_fill["fill-opacity"]),"fill-color":new Ht(Xe.paint_fill["fill-color"]),"fill-outline-color":new Ht(Xe.paint_fill["fill-outline-color"]),"fill-translate":new $t(Xe.paint_fill["fill-translate"]),"fill-translate-anchor":new $t(Xe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ql(Xe.paint_fill["fill-pattern"])})},get layout(){return W1=W1||new hn({"fill-sort-key":new Ht(Xe.layout_fill["fill-sort-key"])})}};class rI extends na{constructor(n){super(n,tI)}recalculate(n,c){super.recalculate(n,c);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new p_(n)}queryRadius(){return Zp(this.paint.get("fill-translate"))}queryIntersectsFeature(n,c,f,m,x,v,S){return A1(Xp(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,S),m)}isTileClipped(){return!0}}const nI=Zr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),iI=Zr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:aI}=nI;var Jo={},sI=E,q1=xu;function xu(s,n,c,f,m){this.properties={},this.extent=c,this.type=0,this._pbf=s,this._geometry=-1,this._keys=f,this._values=m,s.readFields(oI,this,n)}function oI(s,n,c){s==1?n.id=c.readVarint():s==2?function(f,m){for(var x=f.readVarint()+f.pos;f.pos<x;){var v=m._keys[f.readVarint()],S=m._values[f.readVarint()];m.properties[v]=S}}(c,n):s==3?n.type=c.readVarint():s==4&&(n._geometry=c.pos)}function lI(s){for(var n,c,f=0,m=0,x=s.length,v=x-1;m<x;v=m++)f+=((c=s[v]).x-(n=s[m]).x)*(n.y+c.y);return f}xu.types=["Unknown","Point","LineString","Polygon"],xu.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var n,c=s.readVarint()+s.pos,f=1,m=0,x=0,v=0,S=[];s.pos<c;){if(m<=0){var A=s.readVarint();f=7&A,m=A>>3}if(m--,f===1||f===2)x+=s.readSVarint(),v+=s.readSVarint(),f===1&&(n&&S.push(n),n=[]),n.push(new sI(x,v));else{if(f!==7)throw new Error("unknown command "+f);n&&n.push(n[0].clone())}}return n&&S.push(n),S},xu.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var n=s.readVarint()+s.pos,c=1,f=0,m=0,x=0,v=1/0,S=-1/0,A=1/0,M=-1/0;s.pos<n;){if(f<=0){var F=s.readVarint();c=7&F,f=F>>3}if(f--,c===1||c===2)(m+=s.readSVarint())<v&&(v=m),m>S&&(S=m),(x+=s.readSVarint())<A&&(A=x),x>M&&(M=x);else if(c!==7)throw new Error("unknown command "+c)}return[v,A,S,M]},xu.prototype.toGeoJSON=function(s,n,c){var f,m,x=this.extent*Math.pow(2,c),v=this.extent*s,S=this.extent*n,A=this.loadGeometry(),M=xu.types[this.type];function F(K){for(var Y=0;Y<K.length;Y++){var le=K[Y];K[Y]=[360*(le.x+v)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+S)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var V=[];for(f=0;f<A.length;f++)V[f]=A[f][0];F(A=V);break;case 2:for(f=0;f<A.length;f++)F(A[f]);break;case 3:for(A=function(K){var Y=K.length;if(Y<=1)return[K];for(var le,pe,ve=[],Le=0;Le<Y;Le++){var Ae=lI(K[Le]);Ae!==0&&(pe===void 0&&(pe=Ae<0),pe===Ae<0?(le&&ve.push(le),le=[K[Le]]):le.push(K[Le]))}return le&&ve.push(le),ve}(A),f=0;f<A.length;f++)for(m=0;m<A[f].length;m++)F(A[f][m])}A.length===1?A=A[0]:M="Multi"+M;var q={type:"Feature",geometry:{type:M,coordinates:A},properties:this.properties};return"id"in this&&(q.id=this.id),q};var cI=q1,Z1=X1;function X1(s,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(uI,this,n),this.length=this._features.length}function uI(s,n,c){s===15?n.version=c.readVarint():s===1?n.name=c.readString():s===5?n.extent=c.readVarint():s===2?n._features.push(c.pos):s===3?n._keys.push(c.readString()):s===4&&n._values.push(function(f){for(var m=null,x=f.readVarint()+f.pos;f.pos<x;){var v=f.readVarint()>>3;m=v===1?f.readString():v===2?f.readFloat():v===3?f.readDouble():v===4?f.readVarint64():v===5?f.readVarint():v===6?f.readSVarint():v===7?f.readBoolean():null}return m}(c))}X1.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var n=this._pbf.readVarint()+this._pbf.pos;return new cI(this._pbf,n,this.extent,this._keys,this._values)};var hI=Z1;function fI(s,n,c){if(s===3){var f=new hI(c,c.readVarint()+c.pos);f.length&&(n[f.name]=f)}}Jo.VectorTile=function(s,n){this.layers=s.readFields(fI,{},n)},Jo.VectorTileFeature=q1,Jo.VectorTileLayer=Z1;const dI=Jo.VectorTileFeature.types,m_=Math.pow(2,13);function Ef(s,n,c,f,m,x,v,S){s.emplaceBack(n,c,2*Math.floor(f*m_)+v,m*m_*2,x*m_*2,Math.round(S))}class g_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Tt,this.centroidVertexArray=new _t,this.indexArray=new Un,this.programConfigurations=new cs(n.layers,n.zoom),this.segments=new Or,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,f){this.features=[],this.hasPattern=f_("fill-extrusion",this.layers,c);for(const{feature:m,id:x,index:v,sourceLayerIndex:S}of n){const A=this.layers[0]._featureFilter.needGeometry,M=nc(m,A);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),M,f))continue;const F={id:x,sourceLayerIndex:S,index:v,geometry:A?M.geometry:rc(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(d_("fill-extrusion",this.layers,F,this.zoom,c)):this.addFeature(F,F.geometry,v,f,{}),c.featureIndex.insert(m,F.geometry,v,S,this.index,!0)}}addFeatures(n,c,f){for(const m of this.features){const{geometry:x}=m;this.addFeature(m,x,m.index,c,f)}}update(n,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,aI),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,iI.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,c,f,m,x){const v={x:0,y:0,vertexCount:0};for(const S of h_(c,500)){let A=0;for(const Y of S)A+=Y.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Y of S){if(Y.length===0||mI(Y))continue;let le=0;for(let pe=0;pe<Y.length;pe++){const ve=Y[pe];if(pe>=1){const Le=Y[pe-1];if(!pI(ve,Le)){M.vertexLength+4>Or.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ae=ve.sub(Le)._perp()._unit(),Oe=Le.dist(ve);le+Oe>32768&&(le=0),Ef(this.layoutVertexArray,ve.x,ve.y,Ae.x,Ae.y,0,0,le),Ef(this.layoutVertexArray,ve.x,ve.y,Ae.x,Ae.y,0,1,le),v.x+=2*ve.x,v.y+=2*ve.y,v.vertexCount+=2,le+=Oe,Ef(this.layoutVertexArray,Le.x,Le.y,Ae.x,Ae.y,0,0,le),Ef(this.layoutVertexArray,Le.x,Le.y,Ae.x,Ae.y,0,1,le),v.x+=2*Le.x,v.y+=2*Le.y,v.vertexCount+=2;const We=M.vertexLength;this.indexArray.emplaceBack(We,We+2,We+1),this.indexArray.emplaceBack(We+1,We+2,We+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+A>Or.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),dI[n.type]!=="Polygon")continue;const F=[],V=[],q=M.vertexLength;for(const Y of S)if(Y.length!==0){Y!==S[0]&&V.push(F.length/2);for(let le=0;le<Y.length;le++){const pe=Y[le];Ef(this.layoutVertexArray,pe.x,pe.y,0,0,1,1,0),v.x+=pe.x,v.y+=pe.y,v.vertexCount+=1,F.push(pe.x),F.push(pe.y)}}const K=$1(F,V);for(let Y=0;Y<K.length;Y+=3)this.indexArray.emplaceBack(q+K[Y],q+K[Y+2],q+K[Y+1]);M.primitiveLength+=K.length/3,M.vertexLength+=A}for(let S=0;S<v.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(v.x/v.vertexCount),Math.floor(v.y/v.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,x,m)}}function pI(s,n){return s.x===n.x&&(s.x<0||s.x>_n)||s.y===n.y&&(s.y<0||s.y>_n)}function mI(s){return s.every(n=>n.x<0)||s.every(n=>n.x>_n)||s.every(n=>n.y<0)||s.every(n=>n.y>_n)}let K1;Ft("FillExtrusionBucket",g_,{omit:["layers","features"]});var gI={get paint(){return K1=K1||new hn({"fill-extrusion-opacity":new $t(Xe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ht(Xe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new $t(Xe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new $t(Xe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ql(Xe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ht(Xe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ht(Xe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new $t(Xe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class _I extends na{constructor(n){super(n,gI)}createBucket(n){return new g_(n)}queryRadius(){return Zp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,c,f,m,x,v,S,A){const M=Xp(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,S),F=this.paint.get("fill-extrusion-height").evaluate(c,f),V=this.paint.get("fill-extrusion-base").evaluate(c,f),q=function(Y,le,pe,ve){const Le=[];for(const Ae of Y){const Oe=[Ae.x,Ae.y,0,1];Kp(Oe,Oe,le),Le.push(new k(Oe[0]/Oe[3],Oe[1]/Oe[3]))}return Le}(M,A),K=function(Y,le,pe,ve){const Le=[],Ae=[],Oe=ve[8]*le,We=ve[9]*le,rt=ve[10]*le,Pt=ve[11]*le,Bt=ve[8]*pe,At=ve[9]*pe,Et=ve[10]*pe,vt=ve[11]*pe;for(const Ot of Y){const St=[],ut=[];for(const Wt of Ot){const Vt=Wt.x,ar=Wt.y,Nr=ve[0]*Vt+ve[4]*ar+ve[12],$r=ve[1]*Vt+ve[5]*ar+ve[13],Cn=ve[2]*Vt+ve[6]*ar+ve[14],aa=ve[3]*Vt+ve[7]*ar+ve[15],Si=Cn+rt,yn=aa+Pt,jn=Nr+Bt,Zn=$r+At,Ti=Cn+Et,Ei=aa+vt,An=new k((Nr+Oe)/yn,($r+We)/yn);An.z=Si/yn,St.push(An);const kn=new k(jn/Ei,Zn/Ei);kn.z=Ti/Ei,ut.push(kn)}Le.push(St),Ae.push(ut)}return[Le,Ae]}(m,V,F,A);return function(Y,le,pe){let ve=1/0;A1(pe,le)&&(ve=Y1(pe,le[0]));for(let Le=0;Le<le.length;Le++){const Ae=le[Le],Oe=Y[Le];for(let We=0;We<Ae.length-1;We++){const rt=Ae[We],Pt=[rt,Ae[We+1],Oe[We+1],Oe[We],rt];C1(pe,Pt)&&(ve=Math.min(ve,Y1(pe,Pt)))}}return ve!==1/0&&ve}(K[0],K[1],q)}}function Cf(s,n){return s.x*n.x+s.y*n.y}function Y1(s,n){if(s.length===1){let c=0;const f=n[c++];let m;for(;!m||f.equals(m);)if(m=n[c++],!m)return 1/0;for(;c<n.length;c++){const x=n[c],v=s[0],S=m.sub(f),A=x.sub(f),M=v.sub(f),F=Cf(S,S),V=Cf(S,A),q=Cf(A,A),K=Cf(M,S),Y=Cf(M,A),le=F*q-V*V,pe=(q*K-V*Y)/le,ve=(F*Y-V*K)/le,Le=f.z*(1-pe-ve)+m.z*pe+x.z*ve;if(isFinite(Le))return Le}return 1/0}{let c=1/0;for(const f of n)c=Math.min(c,f.z);return c}}const yI=Zr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xI}=yI,vI=Zr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:wI}=vI,bI=Jo.VectorTileFeature.types,SI=Math.cos(Math.PI/180*37.5),J1=Math.pow(2,14)/.5;class __{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(c=>c.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new qt,this.layoutVertexArray2=new Ut,this.indexArray=new Un,this.programConfigurations=new cs(n.layers,n.zoom),this.segments=new Or,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(n,c,f){this.hasPattern=f_("line",this.layers,c);const m=this.layers[0].layout.get("line-sort-key"),x=!m.isConstant(),v=[];for(const{feature:S,id:A,index:M,sourceLayerIndex:F}of n){const V=this.layers[0]._featureFilter.needGeometry,q=nc(S,V);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),q,f))continue;const K=x?m.evaluate(q,{},f):void 0,Y={id:A,properties:S.properties,type:S.type,sourceLayerIndex:F,index:M,geometry:V?q.geometry:rc(S),patterns:{},sortKey:K};v.push(Y)}x&&v.sort((S,A)=>S.sortKey-A.sortKey);for(const S of v){const{geometry:A,index:M,sourceLayerIndex:F}=S;if(this.hasPattern){const V=d_("line",this.layers,S,this.zoom,c);this.patternFeatures.push(V)}else this.addFeature(S,A,M,f,{});c.featureIndex.insert(n[M].feature,A,M,F,this.index)}}update(n,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,c,this.stateDependentLayers,f)}addFeatures(n,c,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,wI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,c,f,m,x){const v=this.layers[0].layout,S=v.get("line-join").evaluate(n,{}),A=v.get("line-cap"),M=v.get("line-miter-limit"),F=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const V of c)this.addLine(V,n,S,A,M,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,x,m)}addLine(n,c,f,m,x,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ve=0;ve<n.length-1;ve++)this.totalDistance+=n[ve].dist(n[ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=bI[c.type]==="Polygon";let A=n.length;for(;A>=2&&n[A-1].equals(n[A-2]);)A--;let M=0;for(;M<A-1&&n[M].equals(n[M+1]);)M++;if(A<(S?3:2))return;f==="bevel"&&(x=1.05);const F=this.overscaling<=16?15*_n/(512*this.overscaling):0,V=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);let q,K,Y,le,pe;this.e1=this.e2=-1,S&&(q=n[A-2],pe=n[M].sub(q)._unit()._perp());for(let ve=M;ve<A;ve++){if(Y=ve===A-1?S?n[M+1]:void 0:n[ve+1],Y&&n[ve].equals(Y))continue;pe&&(le=pe),q&&(K=q),q=n[ve],pe=Y?Y.sub(q)._unit()._perp():le,le=le||pe;let Le=le.add(pe);Le.x===0&&Le.y===0||Le._unit();const Ae=le.x*pe.x+le.y*pe.y,Oe=Le.x*pe.x+Le.y*pe.y,We=Oe!==0?1/Oe:1/0,rt=2*Math.sqrt(2-2*Oe),Pt=Oe<SI&&K&&Y,Bt=le.x*pe.y-le.y*pe.x>0;if(Pt&&ve>M){const vt=q.dist(K);if(vt>2*F){const Ot=q.sub(q.sub(K)._mult(F/vt)._round());this.updateDistance(K,Ot),this.addCurrentVertex(Ot,le,0,0,V),K=Ot}}const At=K&&Y;let Et=At?f:S?"butt":m;if(At&&Et==="round"&&(We<v?Et="miter":We<=2&&(Et="fakeround")),Et==="miter"&&We>x&&(Et="bevel"),Et==="bevel"&&(We>2&&(Et="flipbevel"),We<x&&(Et="miter")),K&&this.updateDistance(K,q),Et==="miter")Le._mult(We),this.addCurrentVertex(q,Le,0,0,V);else if(Et==="flipbevel"){if(We>100)Le=pe.mult(-1);else{const vt=We*le.add(pe).mag()/le.sub(pe).mag();Le._perp()._mult(vt*(Bt?-1:1))}this.addCurrentVertex(q,Le,0,0,V),this.addCurrentVertex(q,Le.mult(-1),0,0,V)}else if(Et==="bevel"||Et==="fakeround"){const vt=-Math.sqrt(We*We-1),Ot=Bt?vt:0,St=Bt?0:vt;if(K&&this.addCurrentVertex(q,le,Ot,St,V),Et==="fakeround"){const ut=Math.round(180*rt/Math.PI/20);for(let Wt=1;Wt<ut;Wt++){let Vt=Wt/ut;if(Vt!==.5){const Nr=Vt-.5;Vt+=Vt*Nr*(Vt-1)*((1.0904+Ae*(Ae*(3.55645-1.43519*Ae)-3.2452))*Nr*Nr+(.848013+Ae*(.215638*Ae-1.06021)))}const ar=pe.sub(le)._mult(Vt)._add(le)._unit()._mult(Bt?-1:1);this.addHalfVertex(q,ar.x,ar.y,!1,Bt,0,V)}}Y&&this.addCurrentVertex(q,pe,-Ot,-St,V)}else if(Et==="butt")this.addCurrentVertex(q,Le,0,0,V);else if(Et==="square"){const vt=K?1:-1;this.addCurrentVertex(q,Le,vt,vt,V)}else Et==="round"&&(K&&(this.addCurrentVertex(q,le,0,0,V),this.addCurrentVertex(q,le,1,1,V,!0)),Y&&(this.addCurrentVertex(q,pe,-1,-1,V,!0),this.addCurrentVertex(q,pe,0,0,V)));if(Pt&&ve<A-1){const vt=q.dist(Y);if(vt>2*F){const Ot=q.add(Y.sub(q)._mult(F/vt)._round());this.updateDistance(q,Ot),this.addCurrentVertex(Ot,pe,0,0,V),q=Ot}}}}addCurrentVertex(n,c,f,m,x,v=!1){const S=c.y*m-c.x,A=-c.y-c.x*m;this.addHalfVertex(n,c.x+c.y*f,c.y-c.x*f,v,!1,f,x),this.addHalfVertex(n,S,A,v,!0,-m,x),this.distance>J1/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,c,f,m,x,v))}addHalfVertex({x:n,y:c},f,m,x,v,S,A){const M=.5*(this.lineClips?this.scaledDistance*(J1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(x?1:0),(c<<1)+(v?1:0),Math.round(63*f)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,F),A.primitiveLength++),v?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,c){this.distance+=n.dist(c),this.updateScaledDistance()}}let Q1,ew;Ft("LineBucket",__,{omit:["layers","patternFeatures"]});var tw={get paint(){return ew=ew||new hn({"line-opacity":new Ht(Xe.paint_line["line-opacity"]),"line-color":new Ht(Xe.paint_line["line-color"]),"line-translate":new $t(Xe.paint_line["line-translate"]),"line-translate-anchor":new $t(Xe.paint_line["line-translate-anchor"]),"line-width":new Ht(Xe.paint_line["line-width"]),"line-gap-width":new Ht(Xe.paint_line["line-gap-width"]),"line-offset":new Ht(Xe.paint_line["line-offset"]),"line-blur":new Ht(Xe.paint_line["line-blur"]),"line-dasharray":new cf(Xe.paint_line["line-dasharray"]),"line-pattern":new Ql(Xe.paint_line["line-pattern"]),"line-gradient":new uf(Xe.paint_line["line-gradient"])})},get layout(){return Q1=Q1||new hn({"line-cap":new $t(Xe.layout_line["line-cap"]),"line-join":new Ht(Xe.layout_line["line-join"]),"line-miter-limit":new $t(Xe.layout_line["line-miter-limit"]),"line-round-limit":new $t(Xe.layout_line["line-round-limit"]),"line-sort-key":new Ht(Xe.layout_line["line-sort-key"])})}};class TI extends Ht{possiblyEvaluate(n,c){return c=new zr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(n,c)}evaluate(n,c,f,m){return c=we({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(n,c,f,m)}}let t0;class EI extends na{constructor(n){super(n,tw),this.gradientVersion=0,t0||(t0=new TI(tw.paint.properties["line-width"].specification),t0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof Fs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,c){super.recalculate(n,c),this.paint._values["line-floorwidth"]=t0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new __(n)}queryRadius(n){const c=n,f=rw(yf("line-width",this,c),yf("line-gap-width",this,c)),m=yf("line-offset",this,c);return f/2+Math.abs(m)+Zp(this.paint.get("line-translate"))}queryIntersectsFeature(n,c,f,m,x,v,S){const A=Xp(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,S),M=S/2*rw(this.paint.get("line-width").evaluate(c,f),this.paint.get("line-gap-width").evaluate(c,f)),F=this.paint.get("line-offset").evaluate(c,f);return F&&(m=function(V,q){const K=[];for(let Y=0;Y<V.length;Y++){const le=V[Y],pe=[];for(let ve=0;ve<le.length;ve++){const Le=le[ve-1],Ae=le[ve],Oe=le[ve+1],We=ve===0?new k(0,0):Ae.sub(Le)._unit()._perp(),rt=ve===le.length-1?new k(0,0):Oe.sub(Ae)._unit()._perp(),Pt=We._add(rt)._unit(),Bt=Pt.x*rt.x+Pt.y*rt.y;Bt!==0&&Pt._mult(1/Bt),pe.push(Pt._mult(q)._add(Ae))}K.push(pe)}return K}(m,F*S)),function(V,q,K){for(let Y=0;Y<q.length;Y++){const le=q[Y];if(V.length>=3){for(let pe=0;pe<le.length;pe++)if(gu(V,le[pe]))return!0}if(M4(V,le,K))return!0}return!1}(A,m,M)}isTileClipped(){return!0}}function rw(s,n){return n>0?n+2*s:s}const CI=Zr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),AI=Zr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Zr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const kI=Zr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Zr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const nw=Zr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),II=Zr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function PI(s,n,c){return s.sections.forEach(f=>{f.text=function(m,x,v){const S=x.layout.get("text-transform").evaluate(v,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),Ni.applyArabicShaping&&(m=Ni.applyArabicShaping(m)),m}(f.text,n,c)}),s}Zr([{name:"triangle",components:3,type:"Uint16"}]),Zr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Zr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Zr([{type:"Float32",name:"offsetX"}]),Zr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Zr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Af={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var En=24,iw=Cr,aw=function(s,n,c,f,m){var x,v,S=8*m-f-1,A=(1<<S)-1,M=A>>1,F=-7,V=m-1,q=-1,K=s[n+V];for(V+=q,x=K&(1<<-F)-1,K>>=-F,F+=S;F>0;x=256*x+s[n+V],V+=q,F-=8);for(v=x&(1<<-F)-1,x>>=-F,F+=f;F>0;v=256*v+s[n+V],V+=q,F-=8);if(x===0)x=1-M;else{if(x===A)return v?NaN:1/0*(K?-1:1);v+=Math.pow(2,f),x-=M}return(K?-1:1)*v*Math.pow(2,x-f)},sw=function(s,n,c,f,m,x){var v,S,A,M=8*x-m-1,F=(1<<M)-1,V=F>>1,q=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=0,Y=1,le=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,v=F):(v=Math.floor(Math.log(n)/Math.LN2),n*(A=Math.pow(2,-v))<1&&(v--,A*=2),(n+=v+V>=1?q/A:q*Math.pow(2,1-V))*A>=2&&(v++,A/=2),v+V>=F?(S=0,v=F):v+V>=1?(S=(n*A-1)*Math.pow(2,m),v+=V):(S=n*Math.pow(2,V-1)*Math.pow(2,m),v=0));m>=8;s[c+K]=255&S,K+=Y,S/=256,m-=8);for(v=v<<m|S,M+=m;M>0;s[c+K]=255&v,K+=Y,v/=256,M-=8);s[c+K-Y]|=128*le};function Cr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Cr.Varint=0,Cr.Fixed64=1,Cr.Bytes=2,Cr.Fixed32=5;var y_=4294967296,ow=1/y_,lw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function po(s){return s.type===Cr.Bytes?s.readVarint()+s.pos:s.pos+1}function vu(s,n,c){return c?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function cw(s,n,c){var f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));c.realloc(f);for(var m=c.pos-1;m>=s;m--)c.buf[m+f]=c.buf[m]}function MI(s,n){for(var c=0;c<s.length;c++)n.writeVarint(s[c])}function RI(s,n){for(var c=0;c<s.length;c++)n.writeSVarint(s[c])}function DI(s,n){for(var c=0;c<s.length;c++)n.writeFloat(s[c])}function LI(s,n){for(var c=0;c<s.length;c++)n.writeDouble(s[c])}function FI(s,n){for(var c=0;c<s.length;c++)n.writeBoolean(s[c])}function zI(s,n){for(var c=0;c<s.length;c++)n.writeFixed32(s[c])}function OI(s,n){for(var c=0;c<s.length;c++)n.writeSFixed32(s[c])}function NI(s,n){for(var c=0;c<s.length;c++)n.writeFixed64(s[c])}function BI(s,n){for(var c=0;c<s.length;c++)n.writeSFixed64(s[c])}function r0(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+16777216*s[n+3]}function wu(s,n,c){s[c]=n,s[c+1]=n>>>8,s[c+2]=n>>>16,s[c+3]=n>>>24}function uw(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+(s[n+3]<<24)}Cr.prototype={destroy:function(){this.buf=null},readFields:function(s,n,c){for(c=c||this.length;this.pos<c;){var f=this.readVarint(),m=f>>3,x=this.pos;this.type=7&f,s(m,n,this),this.pos===x&&this.skip(f)}return n},readMessage:function(s,n){return this.readFields(s,n,this.readVarint()+this.pos)},readFixed32:function(){var s=r0(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=uw(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=r0(this.buf,this.pos)+r0(this.buf,this.pos+4)*y_;return this.pos+=8,s},readSFixed64:function(){var s=r0(this.buf,this.pos)+uw(this.buf,this.pos+4)*y_;return this.pos+=8,s},readFloat:function(){var s=aw(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=aw(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var n,c,f=this.buf;return n=127&(c=f[this.pos++]),c<128?n:(n|=(127&(c=f[this.pos++]))<<7,c<128?n:(n|=(127&(c=f[this.pos++]))<<14,c<128?n:(n|=(127&(c=f[this.pos++]))<<21,c<128?n:function(m,x,v){var S,A,M=v.buf;if(S=(112&(A=M[v.pos++]))>>4,A<128||(S|=(127&(A=M[v.pos++]))<<3,A<128)||(S|=(127&(A=M[v.pos++]))<<10,A<128)||(S|=(127&(A=M[v.pos++]))<<17,A<128)||(S|=(127&(A=M[v.pos++]))<<24,A<128)||(S|=(1&(A=M[v.pos++]))<<31,A<128))return vu(m,S,x);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(c=f[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,n=this.pos;return this.pos=s,s-n>=12&&lw?function(c,f,m){return lw.decode(c.subarray(f,m))}(this.buf,n,s):function(c,f,m){for(var x="",v=f;v<m;){var S,A,M,F=c[v],V=null,q=F>239?4:F>223?3:F>191?2:1;if(v+q>m)break;q===1?F<128&&(V=F):q===2?(192&(S=c[v+1]))==128&&(V=(31&F)<<6|63&S)<=127&&(V=null):q===3?(A=c[v+2],(192&(S=c[v+1]))==128&&(192&A)==128&&((V=(15&F)<<12|(63&S)<<6|63&A)<=2047||V>=55296&&V<=57343)&&(V=null)):q===4&&(A=c[v+2],M=c[v+3],(192&(S=c[v+1]))==128&&(192&A)==128&&(192&M)==128&&((V=(15&F)<<18|(63&S)<<12|(63&A)<<6|63&M)<=65535||V>=1114112)&&(V=null)),V===null?(V=65533,q=1):V>65535&&(V-=65536,x+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),x+=String.fromCharCode(V),v+=q}return x}(this.buf,n,s)},readBytes:function(){var s=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,s);return this.pos=s,n},readPackedVarint:function(s,n){if(this.type!==Cr.Bytes)return s.push(this.readVarint(n));var c=po(this);for(s=s||[];this.pos<c;)s.push(this.readVarint(n));return s},readPackedSVarint:function(s){if(this.type!==Cr.Bytes)return s.push(this.readSVarint());var n=po(this);for(s=s||[];this.pos<n;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Cr.Bytes)return s.push(this.readBoolean());var n=po(this);for(s=s||[];this.pos<n;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Cr.Bytes)return s.push(this.readFloat());var n=po(this);for(s=s||[];this.pos<n;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Cr.Bytes)return s.push(this.readDouble());var n=po(this);for(s=s||[];this.pos<n;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Cr.Bytes)return s.push(this.readFixed32());var n=po(this);for(s=s||[];this.pos<n;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Cr.Bytes)return s.push(this.readSFixed32());var n=po(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Cr.Bytes)return s.push(this.readFixed64());var n=po(this);for(s=s||[];this.pos<n;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Cr.Bytes)return s.push(this.readSFixed64());var n=po(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed64());return s},skip:function(s){var n=7&s;if(n===Cr.Varint)for(;this.buf[this.pos++]>127;);else if(n===Cr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Cr.Fixed32)this.pos+=4;else{if(n!==Cr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(s,n){this.writeVarint(s<<3|n)},realloc:function(s){for(var n=this.length||16;n<this.pos+s;)n*=2;if(n!==this.length){var c=new Uint8Array(n);c.set(this.buf),this.buf=c,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),wu(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),wu(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),wu(this.buf,-1&s,this.pos),wu(this.buf,Math.floor(s*ow),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),wu(this.buf,-1&s,this.pos),wu(this.buf,Math.floor(s*ow),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(n,c){var f,m;if(n>=0?(f=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(f=~(-n%4294967296))?f=f+1|0:(f=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(x,v,S){S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,S.buf[S.pos]=127&(x>>>=7)}(f,0,c),function(x,v){var S=(7&x)<<4;v.buf[v.pos++]|=S|((x>>>=3)?128:0),x&&(v.buf[v.pos++]=127&x|((x>>>=7)?128:0),x&&(v.buf[v.pos++]=127&x|((x>>>=7)?128:0),x&&(v.buf[v.pos++]=127&x|((x>>>=7)?128:0),x&&(v.buf[v.pos++]=127&x|((x>>>=7)?128:0),x&&(v.buf[v.pos++]=127&x)))))}(m,c)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var n=this.pos;this.pos=function(f,m,x){for(var v,S,A=0;A<m.length;A++){if((v=m.charCodeAt(A))>55295&&v<57344){if(!S){v>56319||A+1===m.length?(f[x++]=239,f[x++]=191,f[x++]=189):S=v;continue}if(v<56320){f[x++]=239,f[x++]=191,f[x++]=189,S=v;continue}v=S-55296<<10|v-56320|65536,S=null}else S&&(f[x++]=239,f[x++]=191,f[x++]=189,S=null);v<128?f[x++]=v:(v<2048?f[x++]=v>>6|192:(v<65536?f[x++]=v>>12|224:(f[x++]=v>>18|240,f[x++]=v>>12&63|128),f[x++]=v>>6&63|128),f[x++]=63&v|128)}return x}(this.buf,s,this.pos);var c=this.pos-n;c>=128&&cw(n,c,this),this.pos=n-1,this.writeVarint(c),this.pos+=c},writeFloat:function(s){this.realloc(4),sw(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),sw(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var n=s.length;this.writeVarint(n),this.realloc(n);for(var c=0;c<n;c++)this.buf[this.pos++]=s[c]},writeRawMessage:function(s,n){this.pos++;var c=this.pos;s(n,this);var f=this.pos-c;f>=128&&cw(c,f,this),this.pos=c-1,this.writeVarint(f),this.pos+=f},writeMessage:function(s,n,c){this.writeTag(s,Cr.Bytes),this.writeRawMessage(n,c)},writePackedVarint:function(s,n){n.length&&this.writeMessage(s,MI,n)},writePackedSVarint:function(s,n){n.length&&this.writeMessage(s,RI,n)},writePackedBoolean:function(s,n){n.length&&this.writeMessage(s,FI,n)},writePackedFloat:function(s,n){n.length&&this.writeMessage(s,DI,n)},writePackedDouble:function(s,n){n.length&&this.writeMessage(s,LI,n)},writePackedFixed32:function(s,n){n.length&&this.writeMessage(s,zI,n)},writePackedSFixed32:function(s,n){n.length&&this.writeMessage(s,OI,n)},writePackedFixed64:function(s,n){n.length&&this.writeMessage(s,NI,n)},writePackedSFixed64:function(s,n){n.length&&this.writeMessage(s,BI,n)},writeBytesField:function(s,n){this.writeTag(s,Cr.Bytes),this.writeBytes(n)},writeFixed32Field:function(s,n){this.writeTag(s,Cr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(s,n){this.writeTag(s,Cr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(s,n){this.writeTag(s,Cr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(s,n){this.writeTag(s,Cr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(s,n){this.writeTag(s,Cr.Varint),this.writeVarint(n)},writeSVarintField:function(s,n){this.writeTag(s,Cr.Varint),this.writeSVarint(n)},writeStringField:function(s,n){this.writeTag(s,Cr.Bytes),this.writeString(n)},writeFloatField:function(s,n){this.writeTag(s,Cr.Fixed32),this.writeFloat(n)},writeDoubleField:function(s,n){this.writeTag(s,Cr.Fixed64),this.writeDouble(n)},writeBooleanField:function(s,n){this.writeVarintField(s,!!n)}};var x_=w(iw);const v_=3;function UI(s,n,c){s===1&&c.readMessage(VI,n)}function VI(s,n,c){if(s===3){const{id:f,bitmap:m,width:x,height:v,left:S,top:A,advance:M}=c.readMessage(jI,{});n.push({id:f,bitmap:new vf({width:x+2*v_,height:v+2*v_},m),metrics:{width:x,height:v,left:S,top:A,advance:M}})}}function jI(s,n,c){s===1?n.id=c.readVarint():s===2?n.bitmap=c.readBytes():s===3?n.width=c.readVarint():s===4?n.height=c.readVarint():s===5?n.left=c.readSVarint():s===6?n.top=c.readSVarint():s===7&&(n.advance=c.readVarint())}const hw=v_;function fw(s){let n=0,c=0;for(const v of s)n+=v.w*v.h,c=Math.max(c,v.w);s.sort((v,S)=>S.h-v.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),c),h:1/0}];let m=0,x=0;for(const v of s)for(let S=f.length-1;S>=0;S--){const A=f[S];if(!(v.w>A.w||v.h>A.h)){if(v.x=A.x,v.y=A.y,x=Math.max(x,v.y+v.h),m=Math.max(m,v.x+v.w),v.w===A.w&&v.h===A.h){const M=f.pop();S<f.length&&(f[S]=M)}else v.h===A.h?(A.x+=v.w,A.w-=v.w):v.w===A.w?(A.y+=v.h,A.h-=v.h):(f.push({x:A.x+v.w,y:A.y,w:A.w-v.w,h:v.h}),A.y+=v.h,A.h-=v.h);break}}return{w:m,h:x,fill:n/(m*x)||0}}const Ui=1;class w_{constructor(n,{pixelRatio:c,version:f,stretchX:m,stretchY:x,content:v}){this.paddedRect=n,this.pixelRatio=c,this.stretchX=m,this.stretchY=x,this.content=v,this.version=f}get tl(){return[this.paddedRect.x+Ui,this.paddedRect.y+Ui]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ui,this.paddedRect.y+this.paddedRect.h-Ui]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ui)/this.pixelRatio,(this.paddedRect.h-2*Ui)/this.pixelRatio]}}class dw{constructor(n,c){const f={},m={};this.haveRenderCallbacks=[];const x=[];this.addImages(n,f,x),this.addImages(c,m,x);const{w:v,h:S}=fw(x),A=new ga({width:v||1,height:S||1});for(const M in n){const F=n[M],V=f[M].paddedRect;ga.copy(F.data,A,{x:0,y:0},{x:V.x+Ui,y:V.y+Ui},F.data)}for(const M in c){const F=c[M],V=m[M].paddedRect,q=V.x+Ui,K=V.y+Ui,Y=F.data.width,le=F.data.height;ga.copy(F.data,A,{x:0,y:0},{x:q,y:K},F.data),ga.copy(F.data,A,{x:0,y:le-1},{x:q,y:K-1},{width:Y,height:1}),ga.copy(F.data,A,{x:0,y:0},{x:q,y:K+le},{width:Y,height:1}),ga.copy(F.data,A,{x:Y-1,y:0},{x:q-1,y:K},{width:1,height:le}),ga.copy(F.data,A,{x:0,y:0},{x:q+Y,y:K},{width:1,height:le})}this.image=A,this.iconPositions=f,this.patternPositions=m}addImages(n,c,f){for(const m in n){const x=n[m],v={x:0,y:0,w:x.data.width+2*Ui,h:x.data.height+2*Ui};f.push(v),c[m]=new w_(v,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,c){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),c),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),c)}patchUpdatedImage(n,c,f){if(!n||!c||n.version===c.version)return;n.version=c.version;const[m,x]=n.tl;f.update(c.data,void 0,{x:m,y:x})}}var Qo;Ft("ImagePosition",w_),Ft("ImageAtlas",dw),l.ai=void 0,(Qo=l.ai||(l.ai={}))[Qo.none=0]="none",Qo[Qo.horizontal=1]="horizontal",Qo[Qo.vertical=2]="vertical",Qo[Qo.horizontalOnly=3]="horizontalOnly";const kf=-17;class If{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,c){const f=new If;return f.scale=n||1,f.fontStack=c,f}static forImage(n){const c=new If;return c.imageName=n,c}}class bu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,c){const f=new bu;for(let m=0;m<n.sections.length;m++){const x=n.sections[m];x.image?f.addImageSection(x):f.addTextSection(x,c)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let c="";for(let f=0;f<n.length;f++){const m=n.charCodeAt(f+1)||null,x=n.charCodeAt(f-1)||null;c+=m&&Op(m)&&!Af[n[f+1]]||x&&Op(x)&&!Af[n[f-1]]||!Af[n[f]]?n[f]:Af[n[f]]}return c}(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&i0[this.text.charCodeAt(f)];f++)n++;let c=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&i0[this.text.charCodeAt(f)];f--)c--;this.text=this.text.substring(n,c),this.sectionIndex=this.sectionIndex.slice(n,c)}substring(n,c){const f=new bu;return f.text=this.text.substring(n,c),f.sectionIndex=this.sectionIndex.slice(n,c),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,c)=>Math.max(n,this.sections[c].scale),0)}addTextSection(n,c){this.text+=n.text,this.sections.push(If.forText(n.scale,n.fontStack||c));const f=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(f)}addImageSection(n){const c=n.image?n.image.name:"";if(c.length===0)return void yt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(If.forImage(c)),this.sectionIndex.push(this.sections.length-1)):yt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function n0(s,n,c,f,m,x,v,S,A,M,F,V,q,K,Y,le){const pe=bu.fromFeature(s,m);let ve;V===l.ai.vertical&&pe.verticalizePunctuation();const{processBidirectionalText:Le,processStyledBidirectionalText:Ae}=Ni;if(Le&&pe.sections.length===1){ve=[];const rt=Le(pe.toString(),b_(pe,M,x,n,f,K,Y));for(const Pt of rt){const Bt=new bu;Bt.text=Pt,Bt.sections=pe.sections;for(let At=0;At<Pt.length;At++)Bt.sectionIndex.push(0);ve.push(Bt)}}else if(Ae){ve=[];const rt=Ae(pe.text,pe.sectionIndex,b_(pe,M,x,n,f,K,Y));for(const Pt of rt){const Bt=new bu;Bt.text=Pt[0],Bt.sectionIndex=Pt[1],Bt.sections=pe.sections,ve.push(Bt)}}else ve=function(rt,Pt){const Bt=[],At=rt.text;let Et=0;for(const vt of Pt)Bt.push(rt.substring(Et,vt)),Et=vt;return Et<At.length&&Bt.push(rt.substring(Et,At.length)),Bt}(pe,b_(pe,M,x,n,f,K,Y));const Oe=[],We={positionedLines:Oe,text:pe.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(rt,Pt,Bt,At,Et,vt,Ot,St,ut,Wt,Vt,ar){let Nr=0,$r=kf,Cn=0,aa=0;const Si=St==="right"?1:St==="left"?0:.5;let yn=0;for(const An of Et){An.trim();const kn=An.getMaxScale(),ai=(kn-1)*En,Ci={positionedGlyphs:[],lineOffset:0};rt.positionedLines[yn]=Ci;const si=Ci.positionedGlyphs;let Vi=0;if(!An.length()){$r+=vt,++yn;continue}for(let In=0;In<An.length();In++){const cr=An.getSection(In),oi=An.getSectionIndex(In),Xn=An.getCharCode(In);let Pn=0,Ha=null,us=null,hs=null,mo=En;const qa=!(ut===l.ai.horizontal||!Vt&&!ef(Xn)||Vt&&(i0[Xn]||(jn=Xn,It.Arabic(jn)||It["Arabic Supplement"](jn)||It["Arabic Extended-A"](jn)||It["Arabic Presentation Forms-A"](jn)||It["Arabic Presentation Forms-B"](jn))));if(cr.imageName){const ya=At[cr.imageName];if(!ya)continue;hs=cr.imageName,rt.iconsInText=rt.iconsInText||!0,us=ya.paddedRect;const $i=ya.displaySize;cr.scale=cr.scale*En/ar,Ha={width:$i[0],height:$i[1],left:Ui,top:-hw,advance:qa?$i[1]:$i[0]},Pn=ai+(En-$i[1]*cr.scale),mo=Ha.advance;const go=qa?$i[0]*cr.scale-En*kn:$i[1]*cr.scale-En*kn;go>0&&go>Vi&&(Vi=go)}else{const ya=Bt[cr.fontStack],$i=ya&&ya[Xn];if($i&&$i.rect)us=$i.rect,Ha=$i.metrics;else{const go=Pt[cr.fontStack],Lf=go&&go[Xn];if(!Lf)continue;Ha=Lf.metrics}Pn=(kn-cr.scale)*En}qa?(rt.verticalizable=!0,si.push({glyph:Xn,imageName:hs,x:Nr,y:$r+Pn,vertical:qa,scale:cr.scale,fontStack:cr.fontStack,sectionIndex:oi,metrics:Ha,rect:us}),Nr+=mo*cr.scale+Wt):(si.push({glyph:Xn,imageName:hs,x:Nr,y:$r+Pn,vertical:qa,scale:cr.scale,fontStack:cr.fontStack,sectionIndex:oi,metrics:Ha,rect:us}),Nr+=Ha.advance*cr.scale+Wt)}si.length!==0&&(Cn=Math.max(Nr-Wt,Cn),WI(si,0,si.length-1,Si,Vi)),Nr=0;const ji=vt*kn+Vi;Ci.lineOffset=Math.max(Vi,ai),$r+=ji,aa=Math.max(ji,aa),++yn}var jn;const Zn=$r-kf,{horizontalAlign:Ti,verticalAlign:Ei}=S_(Ot);(function(An,kn,ai,Ci,si,Vi,ji,In,cr){const oi=(kn-ai)*si;let Xn=0;Xn=Vi!==ji?-In*Ci-kf:(-Ci*cr+.5)*ji;for(const Pn of An)for(const Ha of Pn.positionedGlyphs)Ha.x+=oi,Ha.y+=Xn})(rt.positionedLines,Si,Ti,Ei,Cn,aa,vt,Zn,Et.length),rt.top+=-Ei*Zn,rt.bottom=rt.top+Zn,rt.left+=-Ti*Cn,rt.right=rt.left+Cn}(We,n,c,f,ve,v,S,A,V,M,q,le),!function(rt){for(const Pt of rt)if(Pt.positionedGlyphs.length!==0)return!1;return!0}(Oe)&&We}const i0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$I={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function pw(s,n,c,f,m,x){if(n.imageName){const v=f[n.imageName];return v?v.displaySize[0]*n.scale*En/x+m:0}{const v=c[n.fontStack],S=v&&v[s];return S?S.metrics.advance*n.scale+m:0}}function mw(s,n,c,f){const m=Math.pow(s-n,2);return f?s<n?m/2:2*m:m+Math.abs(c)*c}function GI(s,n,c){let f=0;return s===10&&(f-=1e4),c&&(f+=150),s!==40&&s!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function gw(s,n,c,f,m,x){let v=null,S=mw(n,c,m,x);for(const A of f){const M=mw(n-A.x,c,m,x)+A.badness;M<=S&&(v=A,S=M)}return{index:s,x:n,priorBreak:v,badness:S}}function _w(s){return s?_w(s.priorBreak).concat(s.index):[]}function b_(s,n,c,f,m,x,v){if(x!=="point")return[];if(!s)return[];const S=[],A=function(q,K,Y,le,pe,ve){let Le=0;for(let Ae=0;Ae<q.length();Ae++){const Oe=q.getSection(Ae);Le+=pw(q.getCharCode(Ae),Oe,le,pe,K,ve)}return Le/Math.max(1,Math.ceil(Le/Y))}(s,n,c,f,m,v),M=s.text.indexOf("")>=0;let F=0;for(let q=0;q<s.length();q++){const K=s.getSection(q),Y=s.getCharCode(q);if(i0[Y]||(F+=pw(Y,K,f,m,n,v)),q<s.length()-1){const le=!((V=Y)<11904||!(It["Bopomofo Extended"](V)||It.Bopomofo(V)||It["CJK Compatibility Forms"](V)||It["CJK Compatibility Ideographs"](V)||It["CJK Compatibility"](V)||It["CJK Radicals Supplement"](V)||It["CJK Strokes"](V)||It["CJK Symbols and Punctuation"](V)||It["CJK Unified Ideographs Extension A"](V)||It["CJK Unified Ideographs"](V)||It["Enclosed CJK Letters and Months"](V)||It["Halfwidth and Fullwidth Forms"](V)||It.Hiragana(V)||It["Ideographic Description Characters"](V)||It["Kangxi Radicals"](V)||It["Katakana Phonetic Extensions"](V)||It.Katakana(V)||It["Vertical Forms"](V)||It["Yi Radicals"](V)||It["Yi Syllables"](V)));($I[Y]||le||K.imageName)&&S.push(gw(q+1,F,A,S,GI(Y,s.getCharCode(q+1),le&&M),!1))}}var V;return _w(gw(s.length(),F,A,S,0,!0))}function S_(s){let n=.5,c=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:n,verticalAlign:c}}function WI(s,n,c,f,m){if(!f&&!m)return;const x=s[c],v=(s[c].x+x.metrics.advance*x.scale)*f;for(let S=n;S<=c;S++)s[S].x-=v,s[S].y+=m}function HI(s,n,c){const{horizontalAlign:f,verticalAlign:m}=S_(c),x=n[0]-s.displaySize[0]*f,v=n[1]-s.displaySize[1]*m;return{image:s,top:v,bottom:v+s.displaySize[1],left:x,right:x+s.displaySize[0]}}function yw(s,n,c,f,m,x){const v=s.image;let S;if(v.content){const pe=v.content,ve=v.pixelRatio||1;S=[pe[0]/ve,pe[1]/ve,v.displaySize[0]-pe[2]/ve,v.displaySize[1]-pe[3]/ve]}const A=n.left*x,M=n.right*x;let F,V,q,K;c==="width"||c==="both"?(K=m[0]+A-f[3],V=m[0]+M+f[1]):(K=m[0]+(A+M-v.displaySize[0])/2,V=K+v.displaySize[0]);const Y=n.top*x,le=n.bottom*x;return c==="height"||c==="both"?(F=m[1]+Y-f[0],q=m[1]+le+f[2]):(F=m[1]+(Y+le-v.displaySize[1])/2,q=F+v.displaySize[1]),{image:v,top:F,right:V,bottom:q,left:K,collisionPadding:S}}const Pf=255,Vs=128,el=Pf*Vs;function xw(s,n){const{expression:c}=n;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new zr(s+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:m}=c;let x=0;for(;x<f.length&&f[x]<=s;)x++;x=Math.max(0,x-1);let v=x;for(;v<f.length&&f[v]<s+1;)v++;v=Math.min(f.length-1,v);const S=f[x],A=f[v];return c.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:A,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:A,minSize:c.evaluate(new zr(S)),maxSize:c.evaluate(new zr(A)),interpolationType:m}}}function T_(s,n,c){let f="never";const m=s.get(n);return m?f=m:s.get(c)&&(f="always"),f}const qI=Jo.VectorTileFeature.types,ZI=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function a0(s,n,c,f,m,x,v,S,A,M,F,V,q){const K=S?Math.min(el,Math.round(S[0])):0,Y=S?Math.min(el,Math.round(S[1])):0;s.emplaceBack(n,c,Math.round(32*f),Math.round(32*m),x,v,(K<<1)+(A?1:0),Y,16*M,16*F,256*V,256*q)}function E_(s,n,c){s.emplaceBack(n.x,n.y,c),s.emplaceBack(n.x,n.y,c),s.emplaceBack(n.x,n.y,c),s.emplaceBack(n.x,n.y,c)}function XI(s){for(const n of s.sections)if(Yg(n.text))return!0;return!1}class C_{constructor(n){this.layoutVertexArray=new sr,this.indexArray=new Un,this.programConfigurations=n,this.segments=new Or,this.dynamicLayoutVertexArray=new ir,this.opacityVertexArray=new lr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Me}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,c,f,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,CI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,AI.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,ZI,!0),this.opacityVertexBuffer.itemSize=1),(f||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ft("SymbolBuffers",C_);class A_{constructor(n,c,f){this.layoutVertexArray=new n,this.layoutAttributes=c,this.indexArray=new f,this.segments=new Or,this.collisionVertexArray=new Ir}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,kI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ft("CollisionBuffers",A_);class Su{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(v=>v.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=i_([]),this.placementViewportMatrix=i_([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=xw(this.zoom,c["text-size"]),this.iconSizeData=xw(this.zoom,c["icon-size"]);const f=this.layers[0].layout,m=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=T_(f,"text-overlap","text-allow-overlap")!=="never"||T_(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(v=>l.ai[v])),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=n.sourceID}createArrays(){this.text=new C_(new cs(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new C_(new cs(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new De,this.lineVertexArray=new He,this.symbolInstances=new ge,this.textAnchorOffsets=new tt}calculateGlyphDependencies(n,c,f,m,x){for(let v=0;v<n.length;v++)if(c[n.charCodeAt(v)]=!0,(f||m)&&x){const S=Af[n.charAt(v)];S&&(c[S.charCodeAt(0)]=!0)}}populate(n,c,f){const m=this.layers[0],x=m.layout,v=x.get("text-font"),S=x.get("text-field"),A=x.get("icon-image"),M=(S.value.kind!=="constant"||S.value.value instanceof nn&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),F=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,V=x.get("symbol-sort-key");if(this.features=[],!M&&!F)return;const q=c.iconDependencies,K=c.glyphDependencies,Y=c.availableImages,le=new zr(this.zoom);for(const{feature:pe,id:ve,index:Le,sourceLayerIndex:Ae}of n){const Oe=m._featureFilter.needGeometry,We=nc(pe,Oe);if(!m._featureFilter.filter(le,We,f))continue;let rt,Pt;if(Oe||(We.geometry=rc(pe)),M){const At=m.getValueAndResolveTokens("text-field",We,f,Y),Et=nn.factory(At);XI(Et)&&(this.hasRTLText=!0),(!this.hasRTLText||of()==="unavailable"||this.hasRTLText&&Ni.isParsed())&&(rt=PI(Et,m,We))}if(F){const At=m.getValueAndResolveTokens("icon-image",We,f,Y);Pt=At instanceof Bn?At:Bn.fromString(At)}if(!rt&&!Pt)continue;const Bt=this.sortFeaturesByKey?V.evaluate(We,{},f):void 0;if(this.features.push({id:ve,text:rt,icon:Pt,index:Le,sourceLayerIndex:Ae,geometry:We.geometry,properties:pe.properties,type:qI[pe.type],sortKey:Bt}),Pt&&(q[Pt.name]=!0),rt){const At=v.evaluate(We,{},f).join(","),Et=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const vt of rt.sections)if(vt.image)q[vt.image.name]=!0;else{const Ot=Jh(rt.toString()),St=vt.fontStack||At,ut=K[St]=K[St]||{};this.calculateGlyphDependencies(vt.text,ut,Et,this.allowVerticalPlacement,Ot)}}}x.get("symbol-placement")==="line"&&(this.features=function(pe){const ve={},Le={},Ae=[];let Oe=0;function We(At){Ae.push(pe[At]),Oe++}function rt(At,Et,vt){const Ot=Le[At];return delete Le[At],Le[Et]=Ot,Ae[Ot].geometry[0].pop(),Ae[Ot].geometry[0]=Ae[Ot].geometry[0].concat(vt[0]),Ot}function Pt(At,Et,vt){const Ot=ve[Et];return delete ve[Et],ve[At]=Ot,Ae[Ot].geometry[0].shift(),Ae[Ot].geometry[0]=vt[0].concat(Ae[Ot].geometry[0]),Ot}function Bt(At,Et,vt){const Ot=vt?Et[0][Et[0].length-1]:Et[0][0];return`${At}:${Ot.x}:${Ot.y}`}for(let At=0;At<pe.length;At++){const Et=pe[At],vt=Et.geometry,Ot=Et.text?Et.text.toString():null;if(!Ot){We(At);continue}const St=Bt(Ot,vt),ut=Bt(Ot,vt,!0);if(St in Le&&ut in ve&&Le[St]!==ve[ut]){const Wt=Pt(St,ut,vt),Vt=rt(St,ut,Ae[Wt].geometry);delete ve[St],delete Le[ut],Le[Bt(Ot,Ae[Vt].geometry,!0)]=Vt,Ae[Wt].geometry=null}else St in Le?rt(St,ut,vt):ut in ve?Pt(St,ut,vt):(We(At),ve[St]=Oe-1,Le[ut]=Oe-1)}return Ae.filter(At=>At.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((pe,ve)=>pe.sortKey-ve.sortKey)}update(n,c,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,c,this.layers,f),this.icon.programConfigurations.updatePaintArrays(n,c,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,c){const f=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(c[n.segment+1]),x=n.dist(c[n.segment]);const v={};for(let S=n.segment+1;S<c.length;S++)v[S]={x:c[S].x,y:c[S].y,tileUnitDistanceFromAnchor:m},S<c.length-1&&(m+=c[S+1].dist(c[S]));for(let S=n.segment||0;S>=0;S--)v[S]={x:c[S].x,y:c[S].y,tileUnitDistanceFromAnchor:x},S>0&&(x+=c[S-1].dist(c[S]));for(let S=0;S<c.length;S++){const A=v[S];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,c,f,m,x,v,S,A,M,F,V,q){const K=n.indexArray,Y=n.layoutVertexArray,le=n.segments.prepareSegment(4*c.length,Y,K,this.canOverlap?v.sortKey:void 0),pe=this.glyphOffsetArray.length,ve=le.vertexLength,Le=this.allowVerticalPlacement&&S===l.ai.vertical?Math.PI/2:0,Ae=v.text&&v.text.sections;for(let Oe=0;Oe<c.length;Oe++){const{tl:We,tr:rt,bl:Pt,br:Bt,tex:At,pixelOffsetTL:Et,pixelOffsetBR:vt,minFontScaleX:Ot,minFontScaleY:St,glyphOffset:ut,isSDF:Wt,sectionIndex:Vt}=c[Oe],ar=le.vertexLength,Nr=ut[1];a0(Y,A.x,A.y,We.x,Nr+We.y,At.x,At.y,f,Wt,Et.x,Et.y,Ot,St),a0(Y,A.x,A.y,rt.x,Nr+rt.y,At.x+At.w,At.y,f,Wt,vt.x,Et.y,Ot,St),a0(Y,A.x,A.y,Pt.x,Nr+Pt.y,At.x,At.y+At.h,f,Wt,Et.x,vt.y,Ot,St),a0(Y,A.x,A.y,Bt.x,Nr+Bt.y,At.x+At.w,At.y+At.h,f,Wt,vt.x,vt.y,Ot,St),E_(n.dynamicLayoutVertexArray,A,Le),K.emplaceBack(ar,ar+1,ar+2),K.emplaceBack(ar+1,ar+2,ar+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ut[0]),Oe!==c.length-1&&Vt===c[Oe+1].sectionIndex||n.programConfigurations.populatePaintArrays(Y.length,v,v.index,{},q,Ae&&Ae[Vt])}n.placedSymbolArray.emplaceBack(A.x,A.y,pe,this.glyphOffsetArray.length-pe,ve,M,F,A.segment,f?f[0]:0,f?f[1]:0,m[0],m[1],S,0,!1,0,V)}_addCollisionDebugVertex(n,c,f,m,x,v){return c.emplaceBack(0,0),n.emplaceBack(f.x,f.y,m,x,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(n,c,f,m,x,v,S){const A=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),M=A.vertexLength,F=x.layoutVertexArray,V=x.collisionVertexArray,q=S.anchorX,K=S.anchorY;this._addCollisionDebugVertex(F,V,v,q,K,new k(n,c)),this._addCollisionDebugVertex(F,V,v,q,K,new k(f,c)),this._addCollisionDebugVertex(F,V,v,q,K,new k(f,m)),this._addCollisionDebugVertex(F,V,v,q,K,new k(n,m)),A.vertexLength+=4;const Y=x.indexArray;Y.emplaceBack(M,M+1),Y.emplaceBack(M+1,M+2),Y.emplaceBack(M+2,M+3),Y.emplaceBack(M+3,M),A.primitiveLength+=4}addDebugCollisionBoxes(n,c,f,m){for(let x=n;x<c;x++){const v=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,m?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new A_(sn,nw.members,Sn),this.iconCollisionBox=new A_(sn,nw.members,Sn);for(let n=0;n<this.symbolInstances.length;n++){const c=this.symbolInstances.get(n);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(n,c,f,m,x,v,S,A,M){const F={};for(let V=c;V<f;V++){const q=n.get(V);F.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},F.textFeatureIndex=q.featureIndex;break}for(let V=m;V<x;V++){const q=n.get(V);F.verticalTextBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},F.verticalTextFeatureIndex=q.featureIndex;break}for(let V=v;V<S;V++){const q=n.get(V);F.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},F.iconFeatureIndex=q.featureIndex;break}for(let V=A;V<M;V++){const q=n.get(V);F.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},F.verticalIconFeatureIndex=q.featureIndex;break}return F}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const f=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,c){const f=n.placedSymbolArray.get(c),m=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<m;x+=4)n.indexArray.emplaceBack(x,x+1,x+2),n.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(n),f=Math.cos(n),m=[],x=[],v=[];for(let S=0;S<this.symbolInstances.length;++S){v.push(S);const A=this.symbolInstances.get(S);m.push(0|Math.round(c*A.anchorX+f*A.anchorY)),x.push(A.featureIndex)}return v.sort((S,A)=>m[S]-m[A]||x[A]-x[S]),v}addToSortKeyRanges(n,c){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===c?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const f=this.symbolInstances.get(c);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((m,x,v)=>{m>=0&&v.indexOf(m)===x&&this.addIndicesForPlacedSymbol(this.text,m)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let vw,ww;Ft("SymbolBucket",Su,{omit:["layers","collisionBoxArray","features","compareText"]}),Su.MAX_GLYPHS=65535,Su.addDynamicAttributes=E_;var k_={get paint(){return ww=ww||new hn({"icon-opacity":new Ht(Xe.paint_symbol["icon-opacity"]),"icon-color":new Ht(Xe.paint_symbol["icon-color"]),"icon-halo-color":new Ht(Xe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ht(Xe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ht(Xe.paint_symbol["icon-halo-blur"]),"icon-translate":new $t(Xe.paint_symbol["icon-translate"]),"icon-translate-anchor":new $t(Xe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ht(Xe.paint_symbol["text-opacity"]),"text-color":new Ht(Xe.paint_symbol["text-color"],{runtimeType:Dn,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Ht(Xe.paint_symbol["text-halo-color"]),"text-halo-width":new Ht(Xe.paint_symbol["text-halo-width"]),"text-halo-blur":new Ht(Xe.paint_symbol["text-halo-blur"]),"text-translate":new $t(Xe.paint_symbol["text-translate"]),"text-translate-anchor":new $t(Xe.paint_symbol["text-translate-anchor"])})},get layout(){return vw=vw||new hn({"symbol-placement":new $t(Xe.layout_symbol["symbol-placement"]),"symbol-spacing":new $t(Xe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new $t(Xe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ht(Xe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new $t(Xe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new $t(Xe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new $t(Xe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new $t(Xe.layout_symbol["icon-ignore-placement"]),"icon-optional":new $t(Xe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new $t(Xe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ht(Xe.layout_symbol["icon-size"]),"icon-text-fit":new $t(Xe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new $t(Xe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ht(Xe.layout_symbol["icon-image"]),"icon-rotate":new Ht(Xe.layout_symbol["icon-rotate"]),"icon-padding":new Ht(Xe.layout_symbol["icon-padding"]),"icon-keep-upright":new $t(Xe.layout_symbol["icon-keep-upright"]),"icon-offset":new Ht(Xe.layout_symbol["icon-offset"]),"icon-anchor":new Ht(Xe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new $t(Xe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new $t(Xe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new $t(Xe.layout_symbol["text-rotation-alignment"]),"text-field":new Ht(Xe.layout_symbol["text-field"]),"text-font":new Ht(Xe.layout_symbol["text-font"]),"text-size":new Ht(Xe.layout_symbol["text-size"]),"text-max-width":new Ht(Xe.layout_symbol["text-max-width"]),"text-line-height":new $t(Xe.layout_symbol["text-line-height"]),"text-letter-spacing":new Ht(Xe.layout_symbol["text-letter-spacing"]),"text-justify":new Ht(Xe.layout_symbol["text-justify"]),"text-radial-offset":new Ht(Xe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new $t(Xe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ht(Xe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ht(Xe.layout_symbol["text-anchor"]),"text-max-angle":new $t(Xe.layout_symbol["text-max-angle"]),"text-writing-mode":new $t(Xe.layout_symbol["text-writing-mode"]),"text-rotate":new Ht(Xe.layout_symbol["text-rotate"]),"text-padding":new $t(Xe.layout_symbol["text-padding"]),"text-keep-upright":new $t(Xe.layout_symbol["text-keep-upright"]),"text-transform":new Ht(Xe.layout_symbol["text-transform"]),"text-offset":new Ht(Xe.layout_symbol["text-offset"]),"text-allow-overlap":new $t(Xe.layout_symbol["text-allow-overlap"]),"text-overlap":new $t(Xe.layout_symbol["text-overlap"]),"text-ignore-placement":new $t(Xe.layout_symbol["text-ignore-placement"]),"text-optional":new $t(Xe.layout_symbol["text-optional"])})}};class bw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:ma,this.defaultValue=n}evaluate(n){if(n.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(n.formattedSection))return c.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ft("FormatSectionOverride",bw,{omit:["defaultValue"]});class s0 extends na{constructor(n){super(n,k_)}recalculate(n,c){if(super.recalculate(n,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const m=[];for(const x of f)m.indexOf(x)<0&&m.push(x);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,c,f,m){const x=this.layout.get(n).evaluate(c,{},f,m),v=this._unevaluatedLayout._values[n];return v.isDataDriven()||nu(v.value)||!x?x:function(S,A){return A.replace(/{([^{}]+)}/g,(M,F)=>S&&F in S?String(S[F]):"")}(c.properties,x)}createBucket(n){return new Su(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of k_.paint.overridableProperties){if(!s0.hasPaintOverride(this.layout,n))continue;const c=this.paint.get(n),f=new bw(c),m=new Hh(f,c.property.specification);let x=null;x=c.value.kind==="constant"||c.value.kind==="source"?new qh("source",m):new au("composite",m,c.value.zoomStops),this.paint._values[n]=new ni(c.property,x,c.parameters)}}_handleOverridablePaintPropertyUpdate(n,c,f){return!(!this.layout||c.isDataDriven()||f.isDataDriven())&&s0.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,c){const f=n.get("text-field"),m=k_.paint.properties[c];let x=!1;const v=S=>{for(const A of S)if(m.overrides&&m.overrides.hasOverride(A))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof nn)v(f.value.value.sections);else if(f.value.kind==="source"){const S=M=>{x||(M instanceof to&&Wr(M.value)===he?v(M.value.sections):M instanceof ru?v(M.sections):M.eachChild(S))},A=f.value;A._styleExpression&&S(A._styleExpression.expression)}return x}}let Sw;var KI={get paint(){return Sw=Sw||new hn({"background-color":new $t(Xe.paint_background["background-color"]),"background-pattern":new cf(Xe.paint_background["background-pattern"]),"background-opacity":new $t(Xe.paint_background["background-opacity"])})}};class YI extends na{constructor(n){super(n,KI)}}let Tw;var JI={get paint(){return Tw=Tw||new hn({"raster-opacity":new $t(Xe.paint_raster["raster-opacity"]),"raster-hue-rotate":new $t(Xe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new $t(Xe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new $t(Xe.paint_raster["raster-brightness-max"]),"raster-saturation":new $t(Xe.paint_raster["raster-saturation"]),"raster-contrast":new $t(Xe.paint_raster["raster-contrast"]),"raster-resampling":new $t(Xe.paint_raster["raster-resampling"]),"raster-fade-duration":new $t(Xe.paint_raster["raster-fade-duration"])})}};class QI extends na{constructor(n){super(n,JI)}}class eP extends na{constructor(n){super(n,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class tP{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const I_=63710088e-1;class tl{constructor(n,c){if(isNaN(n)||isNaN(c))throw new Error(`Invalid LngLat object: (${n}, ${c})`);if(this.lng=+n,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new tl(te(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const c=Math.PI/180,f=this.lat*c,m=n.lat*c,x=Math.sin(f)*Math.sin(m)+Math.cos(f)*Math.cos(m)*Math.cos((n.lng-this.lng)*c);return I_*Math.acos(Math.min(x,1))}static convert(n){if(n instanceof tl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new tl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new tl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ew=2*Math.PI*I_;function Cw(s){return Ew*Math.cos(s*Math.PI/180)}function Aw(s){return(180+s)/360}function kw(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Iw(s,n){return s/Cw(n)}function Pw(s){return 360*s-180}function P_(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class o0{constructor(n,c,f=0){this.x=+n,this.y=+c,this.z=+f}static fromLngLat(n,c=0){const f=tl.convert(n);return new o0(Aw(f.lng),kw(f.lat),Iw(c,f.lat))}toLngLat(){return new tl(Pw(this.x),P_(this.y))}toAltitude(){return this.z*Cw(P_(this.y))}meterInMercatorCoordinateUnits(){return 1/Ew*(n=P_(this.y),1/Math.cos(n*Math.PI/180));var n}}function Mw(s,n,c){var f=2*Math.PI*6378137/256/Math.pow(2,c);return[s*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class M_{constructor(n,c,f){if(n<0||n>25||f<0||f>=Math.pow(2,n)||c<0||c>=Math.pow(2,n))throw new Error(`x=${c}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=c,this.y=f,this.key=Mf(0,n,n,c,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,c,f){const m=(v=this.y,S=this.z,A=Mw(256*(x=this.x),256*(v=Math.pow(2,S)-v-1),S),M=Mw(256*(x+1),256*(v+1),S),A[0]+","+A[1]+","+M[0]+","+M[1]);var x,v,S,A,M;const F=function(V,q,K){let Y,le="";for(let pe=V;pe>0;pe--)Y=1<<pe-1,le+=(q&Y?1:0)+(K&Y?2:0);return le}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const c=this.z-n.z;return c>0&&n.x===this.x>>c&&n.y===this.y>>c}getTilePoint(n){const c=Math.pow(2,this.z);return new k((n.x*c-this.x)*_n,(n.y*c-this.y)*_n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Rw{constructor(n,c){this.wrap=n,this.canonical=c,this.key=Mf(n,c.z,c.z,c.x,c.y)}}class _a{constructor(n,c,f,m,x){if(n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=c,this.canonical=new M_(f,+m,+x),this.key=Mf(c,n,f,m,x)}clone(){return new _a(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-n;return n>this.canonical.z?new _a(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _a(n,this.wrap,n,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(n,c){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?Mf(this.wrap*+c,n,this.canonical.z,this.canonical.x,this.canonical.y):Mf(this.wrap*+c,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const c=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>c&&n.canonical.y===this.canonical.y>>c}children(n){if(this.overscaledZ>=n)return[new _a(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,f=2*this.canonical.x,m=2*this.canonical.y;return[new _a(c,this.wrap,c,f,m),new _a(c,this.wrap,c,f+1,m),new _a(c,this.wrap,c,f,m+1),new _a(c,this.wrap,c,f+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new _a(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new _a(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Rw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new o0(n.x-this.wrap,n.y))}}function Mf(s,n,c,f,m){(s*=2)<0&&(s=-1*s-1);const x=1<<c;return(x*x*s+x*m+f).toString(36)+c.toString(36)+n.toString(36)}Ft("CanonicalTileID",M_),Ft("OverscaledTileID",_a,{omit:["posMatrix"]});class Dw{constructor(n,c,f,m=1,x=1,v=1,S=0){if(this.uid=n,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void yt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const A=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=x,this.blueFactor=v,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let M=0;M<A;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(A,M)]=this.data[this._idx(A-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,A)]=this.data[this._idx(M,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let M=0;M<A;M++)for(let F=0;F<A;F++){const V=this.get(M,F);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(n,c){const f=new Uint8Array(this.data.buffer),m=4*this._idx(n,c);return this.unpack(f[m],f[m+1],f[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,c){if(n<-1||n>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(n+1)}unpack(n,c,f){return n*this.redFactor+c*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new ga({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,c,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=c*this.dim,x=c*this.dim+this.dim,v=f*this.dim,S=f*this.dim+this.dim;switch(c){case-1:m=x-1;break;case 1:x=m+1}switch(f){case-1:v=S-1;break;case 1:S=v+1}const A=-c*this.dim,M=-f*this.dim;for(let F=v;F<S;F++)for(let V=m;V<x;V++)this.data[this._idx(V,F)]=n.data[this._idx(V+A,F+M)]}}Ft("DEMData",Dw);class Lw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let c=0;c<n.length;c++){const f=n[c];this._stringToNumber[f]=c,this._numberToString[c]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Fw{constructor(n,c,f,m,x){this.type="Feature",this._vectorTileFeature=n,n._z=c,n._x=f,n._y=m,this.properties=n.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(n[c]=this[c]);return n}}class zw{constructor(n,c){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new qo(_n,16,0),this.grid3D=new qo(_n,16,0),this.featureIndexArray=new st,this.promoteId=c}insert(n,c,f,m,x,v){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,m,x);const A=v?this.grid3D:this.grid;for(let M=0;M<c.length;M++){const F=c[M],V=[1/0,1/0,-1/0,-1/0];for(let q=0;q<F.length;q++){const K=F[q];V[0]=Math.min(V[0],K.x),V[1]=Math.min(V[1],K.y),V[2]=Math.max(V[2],K.x),V[3]=Math.max(V[3],K.y)}V[0]<_n&&V[1]<_n&&V[2]>=0&&V[3]>=0&&A.insert(S,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Jo.VectorTile(new x_(this.rawTileData)).layers,this.sourceLayerCoder=new Lw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,c,f,m){this.loadVTLayers();const x=n.params||{},v=_n/n.tileSize/n.scale,S=Xh(x.filter),A=n.queryGeometry,M=n.queryPadding*v,F=Nw(A),V=this.grid.query(F.minX-M,F.minY-M,F.maxX+M,F.maxY+M),q=Nw(n.cameraQueryGeometry),K=this.grid3D.query(q.minX-M,q.minY-M,q.maxX+M,q.maxY+M,(pe,ve,Le,Ae)=>function(Oe,We,rt,Pt,Bt){for(const Et of Oe)if(We<=Et.x&&rt<=Et.y&&Pt>=Et.x&&Bt>=Et.y)return!0;const At=[new k(We,rt),new k(We,Bt),new k(Pt,Bt),new k(Pt,rt)];if(Oe.length>2){for(const Et of At)if(gu(Oe,Et))return!0}for(let Et=0;Et<Oe.length-1;Et++)if(D4(Oe[Et],Oe[Et+1],At))return!0;return!1}(n.cameraQueryGeometry,pe-M,ve-M,Le+M,Ae+M));for(const pe of K)V.push(pe);V.sort(rP);const Y={};let le;for(let pe=0;pe<V.length;pe++){const ve=V[pe];if(ve===le)continue;le=ve;const Le=this.featureIndexArray.get(ve);let Ae=null;this.loadMatchingFeature(Y,Le.bucketIndex,Le.sourceLayerIndex,Le.featureIndex,S,x.layers,x.availableImages,c,f,m,(Oe,We,rt)=>(Ae||(Ae=rc(Oe)),We.queryIntersectsFeature(A,Oe,rt,Ae,this.z,n.transform,v,n.pixelPosMatrix)))}return Y}loadMatchingFeature(n,c,f,m,x,v,S,A,M,F,V){const q=this.bucketLayerIDs[c];if(v&&!function(pe,ve){for(let Le=0;Le<pe.length;Le++)if(ve.indexOf(pe[Le])>=0)return!0;return!1}(v,q))return;const K=this.sourceLayerCoder.decode(f),Y=this.vtLayers[K].feature(m);if(x.needGeometry){const pe=nc(Y,!0);if(!x.filter(new zr(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!x.filter(new zr(this.tileID.overscaledZ),Y))return;const le=this.getId(Y,K);for(let pe=0;pe<q.length;pe++){const ve=q[pe];if(v&&v.indexOf(ve)<0)continue;const Le=A[ve];if(!Le)continue;let Ae={};le&&F&&(Ae=F.getState(Le.sourceLayer||"_geojsonTileLayer",le));const Oe=we({},M[ve]);Oe.paint=Ow(Oe.paint,Le.paint,Y,Ae,S),Oe.layout=Ow(Oe.layout,Le.layout,Y,Ae,S);const We=!V||V(Y,Le,Ae);if(!We)continue;const rt=new Fw(Y,this.z,this.x,this.y,le);rt.layer=Oe;let Pt=n[ve];Pt===void 0&&(Pt=n[ve]=[]),Pt.push({featureIndex:m,feature:rt,intersectionZ:We})}}lookupSymbolFeatures(n,c,f,m,x,v,S,A){const M={};this.loadVTLayers();const F=Xh(x);for(const V of n)this.loadMatchingFeature(M,f,m,V,F,v,S,A,c);return M}hasLayer(n){for(const c of this.bucketLayerIDs)for(const f of c)if(n===f)return!0;return!1}getId(n,c){let f=n.id;return this.promoteId&&(f=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof f=="boolean"&&(f=Number(f))),f}}function Ow(s,n,c,f,m){return ke(s,(x,v)=>{const S=n instanceof pu?n.get(v):null;return S&&S.evaluate?S.evaluate(c,f,m):S})}function Nw(s){let n=1/0,c=1/0,f=-1/0,m=-1/0;for(const x of s)n=Math.min(n,x.x),c=Math.min(c,x.y),f=Math.max(f,x.x),m=Math.max(m,x.y);return{minX:n,minY:c,maxX:f,maxY:m}}function rP(s,n){return n-s}function Bw(s,n,c,f,m){const x=[];for(let v=0;v<s.length;v++){const S=s[v];let A;for(let M=0;M<S.length-1;M++){let F=S[M],V=S[M+1];F.x<n&&V.x<n||(F.x<n?F=new k(n,F.y+(n-F.x)/(V.x-F.x)*(V.y-F.y))._round():V.x<n&&(V=new k(n,F.y+(n-F.x)/(V.x-F.x)*(V.y-F.y))._round()),F.y<c&&V.y<c||(F.y<c?F=new k(F.x+(c-F.y)/(V.y-F.y)*(V.x-F.x),c)._round():V.y<c&&(V=new k(F.x+(c-F.y)/(V.y-F.y)*(V.x-F.x),c)._round()),F.x>=f&&V.x>=f||(F.x>=f?F=new k(f,F.y+(f-F.x)/(V.x-F.x)*(V.y-F.y))._round():V.x>=f&&(V=new k(f,F.y+(f-F.x)/(V.x-F.x)*(V.y-F.y))._round()),F.y>=m&&V.y>=m||(F.y>=m?F=new k(F.x+(m-F.y)/(V.y-F.y)*(V.x-F.x),m)._round():V.y>=m&&(V=new k(F.x+(m-F.y)/(V.y-F.y)*(V.x-F.x),m)._round()),A&&F.equals(A[A.length-1])||(A=[F],x.push(A)),A.push(V)))))}}return x}Ft("FeatureIndex",zw,{omit:["rawTileData","sourceLayerCoder"]});class rl extends k{constructor(n,c,f,m){super(n,c),this.angle=f,m!==void 0&&(this.segment=m)}clone(){return new rl(this.x,this.y,this.angle,this.segment)}}function Uw(s,n,c,f,m){if(n.segment===void 0||c===0)return!0;let x=n,v=n.segment+1,S=0;for(;S>-c/2;){if(v--,v<0)return!1;S-=s[v].dist(x),x=s[v]}S+=s[v].dist(s[v+1]),v++;const A=[];let M=0;for(;S<c/2;){const F=s[v],V=s[v+1];if(!V)return!1;let q=s[v-1].angleTo(F)-F.angleTo(V);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:S,angleDelta:q}),M+=q;S-A[0].distance>f;)M-=A.shift().angleDelta;if(M>m)return!1;v++,S+=F.dist(V)}return!0}function Vw(s){let n=0;for(let c=0;c<s.length-1;c++)n+=s[c].dist(s[c+1]);return n}function jw(s,n,c){return s?.6*n*c:0}function $w(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function nP(s,n,c,f,m,x){const v=jw(c,m,x),S=$w(c,f)*x;let A=0;const M=Vw(s)/2;for(let F=0;F<s.length-1;F++){const V=s[F],q=s[F+1],K=V.dist(q);if(A+K>M){const Y=(M-A)/K,le=Fi.number(V.x,q.x,Y),pe=Fi.number(V.y,q.y,Y),ve=new rl(le,pe,q.angleTo(V),F);return ve._round(),!v||Uw(s,ve,S,v,n)?ve:void 0}A+=K}}function iP(s,n,c,f,m,x,v,S,A){const M=jw(f,x,v),F=$w(f,m),V=F*v,q=s[0].x===0||s[0].x===A||s[0].y===0||s[0].y===A;return n-V<n/4&&(n=V+n/4),Gw(s,q?n/2*S%n:(F/2+2*x)*v*S%n,n,M,c,V,q,!1,A)}function Gw(s,n,c,f,m,x,v,S,A){const M=x/2,F=Vw(s);let V=0,q=n-c,K=[];for(let Y=0;Y<s.length-1;Y++){const le=s[Y],pe=s[Y+1],ve=le.dist(pe),Le=pe.angleTo(le);for(;q+c<V+ve;){q+=c;const Ae=(q-V)/ve,Oe=Fi.number(le.x,pe.x,Ae),We=Fi.number(le.y,pe.y,Ae);if(Oe>=0&&Oe<A&&We>=0&&We<A&&q-M>=0&&q+M<=F){const rt=new rl(Oe,We,Le,Y);rt._round(),f&&!Uw(s,rt,x,f,m)||K.push(rt)}}V+=ve}return S||K.length||v||(K=Gw(s,V/2,c,f,m,x,v,!0,A)),K}Ft("Anchor",rl);const Tu=Ui;function Ww(s,n,c,f){const m=[],x=s.image,v=x.pixelRatio,S=x.paddedRect.w-2*Tu,A=x.paddedRect.h-2*Tu,M=s.right-s.left,F=s.bottom-s.top,V=x.stretchX||[[0,S]],q=x.stretchY||[[0,A]],K=(vt,Ot)=>vt+Ot[1]-Ot[0],Y=V.reduce(K,0),le=q.reduce(K,0),pe=S-Y,ve=A-le;let Le=0,Ae=Y,Oe=0,We=le,rt=0,Pt=pe,Bt=0,At=ve;if(x.content&&f){const vt=x.content;Le=l0(V,0,vt[0]),Oe=l0(q,0,vt[1]),Ae=l0(V,vt[0],vt[2]),We=l0(q,vt[1],vt[3]),rt=vt[0]-Le,Bt=vt[1]-Oe,Pt=vt[2]-vt[0]-Ae,At=vt[3]-vt[1]-We}const Et=(vt,Ot,St,ut)=>{const Wt=c0(vt.stretch-Le,Ae,M,s.left),Vt=u0(vt.fixed-rt,Pt,vt.stretch,Y),ar=c0(Ot.stretch-Oe,We,F,s.top),Nr=u0(Ot.fixed-Bt,At,Ot.stretch,le),$r=c0(St.stretch-Le,Ae,M,s.left),Cn=u0(St.fixed-rt,Pt,St.stretch,Y),aa=c0(ut.stretch-Oe,We,F,s.top),Si=u0(ut.fixed-Bt,At,ut.stretch,le),yn=new k(Wt,ar),jn=new k($r,ar),Zn=new k($r,aa),Ti=new k(Wt,aa),Ei=new k(Vt/v,Nr/v),An=new k(Cn/v,Si/v),kn=n*Math.PI/180;if(kn){const si=Math.sin(kn),Vi=Math.cos(kn),ji=[Vi,-si,si,Vi];yn._matMult(ji),jn._matMult(ji),Ti._matMult(ji),Zn._matMult(ji)}const ai=vt.stretch+vt.fixed,Ci=Ot.stretch+Ot.fixed;return{tl:yn,tr:jn,bl:Ti,br:Zn,tex:{x:x.paddedRect.x+Tu+ai,y:x.paddedRect.y+Tu+Ci,w:St.stretch+St.fixed-ai,h:ut.stretch+ut.fixed-Ci},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ei,pixelOffsetBR:An,minFontScaleX:Pt/v/M,minFontScaleY:At/v/F,isSDF:c}};if(f&&(x.stretchX||x.stretchY)){const vt=Hw(V,pe,Y),Ot=Hw(q,ve,le);for(let St=0;St<vt.length-1;St++){const ut=vt[St],Wt=vt[St+1];for(let Vt=0;Vt<Ot.length-1;Vt++)m.push(Et(ut,Ot[Vt],Wt,Ot[Vt+1]))}}else m.push(Et({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:A+1}));return m}function l0(s,n,c){let f=0;for(const m of s)f+=Math.max(n,Math.min(c,m[1]))-Math.max(n,Math.min(c,m[0]));return f}function Hw(s,n,c){const f=[{fixed:-Tu,stretch:0}];for(const[m,x]of s){const v=f[f.length-1];f.push({fixed:m-v.stretch,stretch:v.stretch}),f.push({fixed:m-v.stretch,stretch:v.stretch+(x-m)})}return f.push({fixed:n+Tu,stretch:c}),f}function c0(s,n,c,f){return s/n*c+f}function u0(s,n,c,f){return s-n*c/f}class h0{constructor(n,c,f,m,x,v,S,A,M,F){if(this.boxStartIndex=n.length,M){let V=v.top,q=v.bottom;const K=v.collisionPadding;K&&(V-=K[1],q+=K[3]);let Y=q-V;Y>0&&(Y=Math.max(10,Y),this.circleDiameter=Y)}else{let V=v.top*S-A[0],q=v.bottom*S+A[2],K=v.left*S-A[3],Y=v.right*S+A[1];const le=v.collisionPadding;if(le&&(K-=le[0]*S,V-=le[1]*S,Y+=le[2]*S,q+=le[3]*S),F){const pe=new k(K,V),ve=new k(Y,V),Le=new k(K,q),Ae=new k(Y,q),Oe=F*Math.PI/180;pe._rotate(Oe),ve._rotate(Oe),Le._rotate(Oe),Ae._rotate(Oe),K=Math.min(pe.x,ve.x,Le.x,Ae.x),Y=Math.max(pe.x,ve.x,Le.x,Ae.x),V=Math.min(pe.y,ve.y,Le.y,Ae.y),q=Math.max(pe.y,ve.y,Le.y,Ae.y)}n.emplaceBack(c.x,c.y,K,V,Y,q,f,m,x)}this.boxEndIndex=n.length}}class aP{constructor(n=[],c=sP){if(this.data=n,this.length=this.data.length,this.compare=c,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:c,compare:f}=this,m=c[n];for(;n>0;){const x=n-1>>1,v=c[x];if(f(m,v)>=0)break;c[n]=v,n=x}c[n]=m}_down(n){const{data:c,compare:f}=this,m=this.length>>1,x=c[n];for(;n<m;){let v=1+(n<<1),S=c[v];const A=v+1;if(A<this.length&&f(c[A],S)<0&&(v=A,S=c[A]),f(S,x)>=0)break;c[n]=S,n=v}c[n]=x}}function sP(s,n){return s<n?-1:s>n?1:0}function oP(s,n=1,c=!1){let f=1/0,m=1/0,x=-1/0,v=-1/0;const S=s[0];for(let K=0;K<S.length;K++){const Y=S[K];(!K||Y.x<f)&&(f=Y.x),(!K||Y.y<m)&&(m=Y.y),(!K||Y.x>x)&&(x=Y.x),(!K||Y.y>v)&&(v=Y.y)}const A=Math.min(x-f,v-m);let M=A/2;const F=new aP([],lP);if(A===0)return new k(f,m);for(let K=f;K<x;K+=A)for(let Y=m;Y<v;Y+=A)F.push(new Eu(K+M,Y+M,M,s));let V=function(K){let Y=0,le=0,pe=0;const ve=K[0];for(let Le=0,Ae=ve.length,Oe=Ae-1;Le<Ae;Oe=Le++){const We=ve[Le],rt=ve[Oe],Pt=We.x*rt.y-rt.x*We.y;le+=(We.x+rt.x)*Pt,pe+=(We.y+rt.y)*Pt,Y+=3*Pt}return new Eu(le/Y,pe/Y,0,K)}(s),q=F.length;for(;F.length;){const K=F.pop();(K.d>V.d||!V.d)&&(V=K,c&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,q)),K.max-V.d<=n||(M=K.h/2,F.push(new Eu(K.p.x-M,K.p.y-M,M,s)),F.push(new Eu(K.p.x+M,K.p.y-M,M,s)),F.push(new Eu(K.p.x-M,K.p.y+M,M,s)),F.push(new Eu(K.p.x+M,K.p.y+M,M,s)),q+=4)}return c&&(console.log(`num probes: ${q}`),console.log(`best distance: ${V.d}`)),V.p}function lP(s,n){return n.max-s.max}function Eu(s,n,c,f){this.p=new k(s,n),this.h=c,this.d=function(m,x){let v=!1,S=1/0;for(let A=0;A<x.length;A++){const M=x[A];for(let F=0,V=M.length,q=V-1;F<V;q=F++){const K=M[F],Y=M[q];K.y>m.y!=Y.y>m.y&&m.x<(Y.x-K.x)*(m.y-K.y)/(Y.y-K.y)+K.x&&(v=!v),S=Math.min(S,k1(m,K,Y))}}return(v?1:-1)*Math.sqrt(S)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var qn;l.aq=void 0,(qn=l.aq||(l.aq={}))[qn.center=1]="center",qn[qn.left=2]="left",qn[qn.right=3]="right",qn[qn.top=4]="top",qn[qn.bottom=5]="bottom",qn[qn["top-left"]=6]="top-left",qn[qn["top-right"]=7]="top-right",qn[qn["bottom-left"]=8]="bottom-left",qn[qn["bottom-right"]=9]="bottom-right";const nl=7,R_=Number.POSITIVE_INFINITY;function qw(s,n){return n[1]!==R_?function(c,f,m){let x=0,v=0;switch(f=Math.abs(f),m=Math.abs(m),c){case"top-right":case"top-left":case"top":v=m-nl;break;case"bottom-right":case"bottom-left":case"bottom":v=-m+nl}switch(c){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f}return[x,v]}(s,n[0],n[1]):function(c,f){let m=0,x=0;f<0&&(f=0);const v=f/Math.SQRT2;switch(c){case"top-right":case"top-left":x=v-nl;break;case"bottom-right":case"bottom-left":x=-v+nl;break;case"bottom":x=-f+nl;break;case"top":x=f-nl}switch(c){case"top-right":case"bottom-right":m=-v;break;case"top-left":case"bottom-left":m=v;break;case"left":m=f;break;case"right":m=-f}return[m,x]}(s,n[0])}function Zw(s,n,c){var f;const m=s.layout,x=(f=m.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(n,{},c);if(x){const S=x.values,A=[];for(let M=0;M<S.length;M+=2){const F=A[M]=S[M],V=S[M+1].map(q=>q*En);F.startsWith("top")?V[1]-=nl:F.startsWith("bottom")&&(V[1]+=nl),A[M+1]=V}return new an(A)}const v=m.get("text-variable-anchor");if(v){let S;S=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(n,{},c)*En,R_]:m.get("text-offset").evaluate(n,{},c).map(M=>M*En);const A=[];for(const M of v)A.push(M,qw(M,S));return new an(A)}return null}function D_(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cP(s,n,c,f,m,x,v,S,A,M,F){let V=x.textMaxSize.evaluate(n,{});V===void 0&&(V=v);const q=s.layers[0].layout,K=q.get("icon-offset").evaluate(n,{},F),Y=Kw(c.horizontal),le=v/24,pe=s.tilePixelRatio*le,ve=s.tilePixelRatio*V/24,Le=s.tilePixelRatio*S,Ae=s.tilePixelRatio*q.get("symbol-spacing"),Oe=q.get("text-padding")*s.tilePixelRatio,We=function(ut,Wt,Vt,ar=1){const Nr=ut.get("icon-padding").evaluate(Wt,{},Vt),$r=Nr&&Nr.values;return[$r[0]*ar,$r[1]*ar,$r[2]*ar,$r[3]*ar]}(q,n,F,s.tilePixelRatio),rt=q.get("text-max-angle")/180*Math.PI,Pt=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point",Bt=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",At=q.get("symbol-placement"),Et=Ae/2,vt=q.get("icon-text-fit");let Ot;f&&vt!=="none"&&(s.allowVerticalPlacement&&c.vertical&&(Ot=yw(f,c.vertical,vt,q.get("icon-text-fit-padding"),K,le)),Y&&(f=yw(f,Y,vt,q.get("icon-text-fit-padding"),K,le)));const St=(ut,Wt)=>{Wt.x<0||Wt.x>=_n||Wt.y<0||Wt.y>=_n||function(Vt,ar,Nr,$r,Cn,aa,Si,yn,jn,Zn,Ti,Ei,An,kn,ai,Ci,si,Vi,ji,In,cr,oi,Xn,Pn,Ha){const us=Vt.addToLineVertexArray(ar,Nr);let hs,mo,qa,ya,$i=0,go=0,Lf=0,e2=0,V_=-1,j_=-1;const _o={};let t2=uo("");if(Vt.allowVerticalPlacement&&$r.vertical){const li=yn.layout.get("text-rotate").evaluate(cr,{},Pn)+90;qa=new h0(jn,ar,Zn,Ti,Ei,$r.vertical,An,kn,ai,li),Si&&(ya=new h0(jn,ar,Zn,Ti,Ei,Si,si,Vi,ai,li))}if(Cn){const li=yn.layout.get("icon-rotate").evaluate(cr,{}),xa=yn.layout.get("icon-text-fit")!=="none",ac=Ww(Cn,li,Xn,xa),ds=Si?Ww(Si,li,Xn,xa):void 0;mo=new h0(jn,ar,Zn,Ti,Ei,Cn,si,Vi,!1,li),$i=4*ac.length;const sc=Vt.iconSizeData;let js=null;sc.kind==="source"?(js=[Vs*yn.layout.get("icon-size").evaluate(cr,{})],js[0]>el&&yt(`${Vt.layerIds[0]}: Value for "icon-size" is >= ${Pf}. Reduce your "icon-size".`)):sc.kind==="composite"&&(js=[Vs*oi.compositeIconSizes[0].evaluate(cr,{},Pn),Vs*oi.compositeIconSizes[1].evaluate(cr,{},Pn)],(js[0]>el||js[1]>el)&&yt(`${Vt.layerIds[0]}: Value for "icon-size" is >= ${Pf}. Reduce your "icon-size".`)),Vt.addSymbols(Vt.icon,ac,js,In,ji,cr,l.ai.none,ar,us.lineStartIndex,us.lineLength,-1,Pn),V_=Vt.icon.placedSymbolArray.length-1,ds&&(go=4*ds.length,Vt.addSymbols(Vt.icon,ds,js,In,ji,cr,l.ai.vertical,ar,us.lineStartIndex,us.lineLength,-1,Pn),j_=Vt.icon.placedSymbolArray.length-1)}const r2=Object.keys($r.horizontal);for(const li of r2){const xa=$r.horizontal[li];if(!hs){t2=uo(xa.text);const ds=yn.layout.get("text-rotate").evaluate(cr,{},Pn);hs=new h0(jn,ar,Zn,Ti,Ei,xa,An,kn,ai,ds)}const ac=xa.positionedLines.length===1;if(Lf+=Xw(Vt,ar,xa,aa,yn,ai,cr,Ci,us,$r.vertical?l.ai.horizontal:l.ai.horizontalOnly,ac?r2:[li],_o,V_,oi,Pn),ac)break}$r.vertical&&(e2+=Xw(Vt,ar,$r.vertical,aa,yn,ai,cr,Ci,us,l.ai.vertical,["vertical"],_o,j_,oi,Pn));const fP=hs?hs.boxStartIndex:Vt.collisionBoxArray.length,dP=hs?hs.boxEndIndex:Vt.collisionBoxArray.length,pP=qa?qa.boxStartIndex:Vt.collisionBoxArray.length,mP=qa?qa.boxEndIndex:Vt.collisionBoxArray.length,gP=mo?mo.boxStartIndex:Vt.collisionBoxArray.length,_P=mo?mo.boxEndIndex:Vt.collisionBoxArray.length,yP=ya?ya.boxStartIndex:Vt.collisionBoxArray.length,xP=ya?ya.boxEndIndex:Vt.collisionBoxArray.length;let fs=-1;const d0=(li,xa)=>li&&li.circleDiameter?Math.max(li.circleDiameter,xa):xa;fs=d0(hs,fs),fs=d0(qa,fs),fs=d0(mo,fs),fs=d0(ya,fs);const n2=fs>-1?1:0;n2&&(fs*=Ha/En),Vt.glyphOffsetArray.length>=Su.MAX_GLYPHS&&yt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),cr.sortKey!==void 0&&Vt.addToSortKeyRanges(Vt.symbolInstances.length,cr.sortKey);const vP=Zw(yn,cr,Pn),[wP,bP]=function(li,xa){const ac=li.length,ds=xa==null?void 0:xa.values;if((ds==null?void 0:ds.length)>0)for(let sc=0;sc<ds.length;sc+=2){const js=ds[sc+1];li.emplaceBack(l.aq[ds[sc]],js[0],js[1])}return[ac,li.length]}(Vt.textAnchorOffsets,vP);Vt.symbolInstances.emplaceBack(ar.x,ar.y,_o.right>=0?_o.right:-1,_o.center>=0?_o.center:-1,_o.left>=0?_o.left:-1,_o.vertical||-1,V_,j_,t2,fP,dP,pP,mP,gP,_P,yP,xP,Zn,Lf,e2,$i,go,n2,0,An,fs,wP,bP)}(s,Wt,ut,c,f,m,Ot,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,pe,[Oe,Oe,Oe,Oe],Pt,A,Le,We,Bt,K,n,x,M,F,v)};if(At==="line")for(const ut of Bw(n.geometry,0,0,_n,_n)){const Wt=iP(ut,Ae,rt,c.vertical||Y,f,24,ve,s.overscaling,_n);for(const Vt of Wt)Y&&uP(s,Y.text,Et,Vt)||St(ut,Vt)}else if(At==="line-center"){for(const ut of n.geometry)if(ut.length>1){const Wt=nP(ut,rt,c.vertical||Y,f,24,ve);Wt&&St(ut,Wt)}}else if(n.type==="Polygon")for(const ut of h_(n.geometry,0)){const Wt=oP(ut,16);St(ut[0],new rl(Wt.x,Wt.y,0))}else if(n.type==="LineString")for(const ut of n.geometry)St(ut,new rl(ut[0].x,ut[0].y,0));else if(n.type==="Point")for(const ut of n.geometry)for(const Wt of ut)St([Wt],new rl(Wt.x,Wt.y,0))}function Xw(s,n,c,f,m,x,v,S,A,M,F,V,q,K,Y){const le=function(Le,Ae,Oe,We,rt,Pt,Bt,At){const Et=We.layout.get("text-rotate").evaluate(Pt,{})*Math.PI/180,vt=[];for(const Ot of Ae.positionedLines)for(const St of Ot.positionedGlyphs){if(!St.rect)continue;const ut=St.rect||{};let Wt=hw+1,Vt=!0,ar=1,Nr=0;const $r=(rt||At)&&St.vertical,Cn=St.metrics.advance*St.scale/2;if(At&&Ae.verticalizable&&(Nr=Ot.lineOffset/2-(St.imageName?-(En-St.metrics.width*St.scale)/2:(St.scale-1)*En)),St.imageName){const In=Bt[St.imageName];Vt=In.sdf,ar=In.pixelRatio,Wt=Ui/ar}const aa=rt?[St.x+Cn,St.y]:[0,0];let Si=rt?[0,0]:[St.x+Cn+Oe[0],St.y+Oe[1]-Nr],yn=[0,0];$r&&(yn=Si,Si=[0,0]);const jn=St.metrics.isDoubleResolution?2:1,Zn=(St.metrics.left-Wt)*St.scale-Cn+Si[0],Ti=(-St.metrics.top-Wt)*St.scale+Si[1],Ei=Zn+ut.w/jn*St.scale/ar,An=Ti+ut.h/jn*St.scale/ar,kn=new k(Zn,Ti),ai=new k(Ei,Ti),Ci=new k(Zn,An),si=new k(Ei,An);if($r){const In=new k(-Cn,Cn-kf),cr=-Math.PI/2,oi=En/2-Cn,Xn=new k(5-kf-oi,-(St.imageName?oi:0)),Pn=new k(...yn);kn._rotateAround(cr,In)._add(Xn)._add(Pn),ai._rotateAround(cr,In)._add(Xn)._add(Pn),Ci._rotateAround(cr,In)._add(Xn)._add(Pn),si._rotateAround(cr,In)._add(Xn)._add(Pn)}if(Et){const In=Math.sin(Et),cr=Math.cos(Et),oi=[cr,-In,In,cr];kn._matMult(oi),ai._matMult(oi),Ci._matMult(oi),si._matMult(oi)}const Vi=new k(0,0),ji=new k(0,0);vt.push({tl:kn,tr:ai,bl:Ci,br:si,tex:ut,writingMode:Ae.writingMode,glyphOffset:aa,sectionIndex:St.sectionIndex,isSDF:Vt,pixelOffsetTL:Vi,pixelOffsetBR:ji,minFontScaleX:0,minFontScaleY:0})}return vt}(0,c,S,m,x,v,f,s.allowVerticalPlacement),pe=s.textSizeData;let ve=null;pe.kind==="source"?(ve=[Vs*m.layout.get("text-size").evaluate(v,{})],ve[0]>el&&yt(`${s.layerIds[0]}: Value for "text-size" is >= ${Pf}. Reduce your "text-size".`)):pe.kind==="composite"&&(ve=[Vs*K.compositeTextSizes[0].evaluate(v,{},Y),Vs*K.compositeTextSizes[1].evaluate(v,{},Y)],(ve[0]>el||ve[1]>el)&&yt(`${s.layerIds[0]}: Value for "text-size" is >= ${Pf}. Reduce your "text-size".`)),s.addSymbols(s.text,le,ve,S,x,v,M,n,A.lineStartIndex,A.lineLength,q,Y);for(const Le of F)V[Le]=s.text.placedSymbolArray.length-1;return 4*le.length}function Kw(s){for(const n in s)return s[n];return null}function uP(s,n,c,f){const m=s.compareText;if(n in m){const x=m[n];for(let v=x.length-1;v>=0;v--)if(f.dist(x[v])<c)return!0}else m[n]=[];return m[n].push(f),!1}const Yw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class L_{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,f]=new Uint8Array(n,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=f>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const x=Yw[15&f];if(!x)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new L_(S,v,x,n)}constructor(n,c=64,f=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=f,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const x=Yw.indexOf(this.ArrayType),v=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-S%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+A,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+v+S+A),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+A,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=n)}add(n,c){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=n,this.coords[this._pos++]=c,f}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return F_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,c,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:v,nodeSize:S}=this,A=[0,x.length-1,0],M=[];for(;A.length;){const F=A.pop()||0,V=A.pop()||0,q=A.pop()||0;if(V-q<=S){for(let pe=q;pe<=V;pe++){const ve=v[2*pe],Le=v[2*pe+1];ve>=n&&ve<=f&&Le>=c&&Le<=m&&M.push(x[pe])}continue}const K=q+V>>1,Y=v[2*K],le=v[2*K+1];Y>=n&&Y<=f&&le>=c&&le<=m&&M.push(x[K]),(F===0?n<=Y:c<=le)&&(A.push(q),A.push(K-1),A.push(1-F)),(F===0?f>=Y:m>=le)&&(A.push(K+1),A.push(V),A.push(1-F))}return M}within(n,c,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:x,nodeSize:v}=this,S=[0,m.length-1,0],A=[],M=f*f;for(;S.length;){const F=S.pop()||0,V=S.pop()||0,q=S.pop()||0;if(V-q<=v){for(let pe=q;pe<=V;pe++)Qw(x[2*pe],x[2*pe+1],n,c)<=M&&A.push(m[pe]);continue}const K=q+V>>1,Y=x[2*K],le=x[2*K+1];Qw(Y,le,n,c)<=M&&A.push(m[K]),(F===0?n-f<=Y:c-f<=le)&&(S.push(q),S.push(K-1),S.push(1-F)),(F===0?n+f>=Y:c+f>=le)&&(S.push(K+1),S.push(V),S.push(1-F))}return A}}function F_(s,n,c,f,m,x){if(m-f<=c)return;const v=f+m>>1;Jw(s,n,v,f,m,x),F_(s,n,c,f,v-1,1-x),F_(s,n,c,v+1,m,1-x)}function Jw(s,n,c,f,m,x){for(;m>f;){if(m-f>600){const M=m-f+1,F=c-f+1,V=Math.log(M),q=.5*Math.exp(2*V/3),K=.5*Math.sqrt(V*q*(M-q)/M)*(F-M/2<0?-1:1);Jw(s,n,c,Math.max(f,Math.floor(c-F*q/M+K)),Math.min(m,Math.floor(c+(M-F)*q/M+K)),x)}const v=n[2*c+x];let S=f,A=m;for(Rf(s,n,f,c),n[2*m+x]>v&&Rf(s,n,f,m);S<A;){for(Rf(s,n,S,A),S++,A--;n[2*S+x]<v;)S++;for(;n[2*A+x]>v;)A--}n[2*f+x]===v?Rf(s,n,f,A):(A++,Rf(s,n,A,m)),A<=c&&(f=A+1),c<=A&&(m=A-1)}}function Rf(s,n,c,f){z_(s,c,f),z_(n,2*c,2*f),z_(n,2*c+1,2*f+1)}function z_(s,n,c){const f=s[n];s[n]=s[c],s[c]=f}function Qw(s,n,c,f){const m=s-c,x=n-f;return m*m+x*x}var O_;l.bh=void 0,(O_=l.bh||(l.bh={})).create="create",O_.load="load",O_.fullLoad="fullLoad";let f0=null,Df=[];const N_=1e3/60,B_="loadTime",U_="fullLoadTime",hP={mark(s){performance.mark(s)},frame(s){const n=s;f0!=null&&Df.push(n-f0),f0=n},clearMetrics(){f0=null,Df=[],performance.clearMeasures(B_),performance.clearMeasures(U_);for(const s in l.bh)performance.clearMarks(l.bh[s])},getPerformanceMetrics(){performance.measure(B_,l.bh.create,l.bh.load),performance.measure(U_,l.bh.create,l.bh.fullLoad);const s=performance.getEntriesByName(B_)[0].duration,n=performance.getEntriesByName(U_)[0].duration,c=Df.length,f=1/(Df.reduce((x,v)=>x+v,0)/c/1e3),m=Df.filter(x=>x>N_).reduce((x,v)=>x+(v-N_)/N_,0);return{loadTime:s,fullLoadTime:n,fps:f,percentDroppedFrames:m/(c+m)*100,totalFrames:c}}};l.$=function(s,n,c){var f,m,x,v,S,A,M,F,V,q,K,Y,le=c[0],pe=c[1],ve=c[2];return n===s?(s[12]=n[0]*le+n[4]*pe+n[8]*ve+n[12],s[13]=n[1]*le+n[5]*pe+n[9]*ve+n[13],s[14]=n[2]*le+n[6]*pe+n[10]*ve+n[14],s[15]=n[3]*le+n[7]*pe+n[11]*ve+n[15]):(m=n[1],x=n[2],v=n[3],S=n[4],A=n[5],M=n[6],F=n[7],V=n[8],q=n[9],K=n[10],Y=n[11],s[0]=f=n[0],s[1]=m,s[2]=x,s[3]=v,s[4]=S,s[5]=A,s[6]=M,s[7]=F,s[8]=V,s[9]=q,s[10]=K,s[11]=Y,s[12]=f*le+S*pe+V*ve+n[12],s[13]=m*le+A*pe+q*ve+n[13],s[14]=x*le+M*pe+K*ve+n[14],s[15]=v*le+F*pe+Y*ve+n[15]),s},l.A=_u,l.B=Fi,l.C=class{constructor(s,n,c){this.receive=f=>{const m=f.data,x=m.id;if(x&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[x];const v=this.cancelCallbacks[x];delete this.cancelCallbacks[x],v&&v()}else Rt()||m.mustQueue?(this.tasks[x]=m,this.taskQueue.push(x),this.invoker.trigger()):this.processTask(x,m)},this.process=()=>{if(!this.taskQueue.length)return;const f=this.taskQueue.shift(),m=this.tasks[f];delete this.tasks[f],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(f,m)},this.target=s,this.parent=n,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new tP(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Rt()?s:window}send(s,n,c,f,m=!1){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[x]=c);const v=[],S={id:x,type:s,hasCallback:!!c,targetMapId:f,mustQueue:m,sourceMapId:this.mapId,data:Ns(n,v)};return this.target.postMessage(S,{transfer:v}),{cancel:()=>{c&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}processTask(s,n){if(n.type==="<response>"){const c=this.callbacks[s];delete this.callbacks[s],c&&(n.error?c(Zo(n.error)):c(null,Zo(n.data)))}else{let c=!1;const f=[],m=n.hasCallback?(S,A)=>{c=!0,delete this.cancelCallbacks[s];const M={id:s,type:"<response>",sourceMapId:this.mapId,error:S?Ns(S):null,data:Ns(A,f)};this.target.postMessage(M,{transfer:f})}:S=>{c=!0};let x=null;const v=Zo(n.data);if(this.parent[n.type])x=this.parent[n.type](n.sourceMapId,v,m);else if("getWorkerSource"in this.parent){const S=n.type.split(".");x=this.parent.getWorkerSource(n.sourceMapId,S[0],v.source)[S[1]](v,m)}else m(new Error(`Could not find function ${n.type}`));!c&&x&&x.cancel&&(this.cancelCallbacks[s]=x.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=$t,l.E=Ur,l.F=function(s,n){const c={};for(let f=0;f<n.length;f++){const m=n[f];m in s&&(c[m]=s[m])}return c},l.G=Aw,l.H=kw,l.I=w_,l.J=N,l.K=W,l.L=tl,l.M=jt,l.N=_n,l.O=_a,l.P=k,l.Q=Zr,l.R=ga,l.S=Or,l.T=Vp,l.U=o0,l.V=class extends lo{},l.W=M_,l.X=function(s,n){const c=window.document.createElement("video");c.muted=!0,c.onloadstart=function(){n(null,c)};for(let f=0;f<s.length;f++){const m=window.document.createElement("source");Xt(s[f])||(c.crossOrigin="Anonymous"),m.src=s[f],c.appendChild(m)}return{cancel:()=>{}}},l.Y=xt,l.Z=function(){var s=new _u(16);return _u!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},l._=b,l.a=dt,l.a$=class extends X{},l.a0=function(s,n,c){var f=c[0],m=c[1],x=c[2];return s[0]=n[0]*f,s[1]=n[1]*f,s[2]=n[2]*f,s[3]=n[3]*f,s[4]=n[4]*m,s[5]=n[5]*m,s[6]=n[6]*m,s[7]=n[7]*m,s[8]=n[8]*x,s[9]=n[9]*x,s[10]=n[10]*x,s[11]=n[11]*x,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},l.a1=R1,l.a2=function(){return Pe++},l.a3=fe,l.a4=Su,l.a5=function(){Ni.isLoading()||Ni.isLoaded()||of()!=="deferred"||Up()},l.a6=Xh,l.a7=nc,l.a8=zr,l.a9=Fw,l.aA=Yl,l.aB=function(s){s=s.slice();const n=Object.create(null);for(let c=0;c<s.length;c++)n[s[c].id]=s[c];for(let c=0;c<s.length;c++)"ref"in s[c]&&(s[c]=Rn(s[c],n[s[c].ref]));return s},l.aC=function(s){if(s.type==="custom")return new eP(s);switch(s.type){case"background":return new YI(s);case"circle":return new z4(s);case"fill":return new rI(s);case"fill-extrusion":return new _I(s);case"heatmap":return new N4(s);case"hillshade":return new U4(s);case"line":return new EI(s);case"raster":return new QI(s);case"symbol":return new s0(s)}},l.aD=Ue,l.aE=function(s,n){if(!s)return[{command:nr.setStyle,args:[n]}];let c=[];try{if(!yr(s.version,n.version))return[{command:nr.setStyle,args:[n]}];yr(s.center,n.center)||c.push({command:nr.setCenter,args:[n.center]}),yr(s.zoom,n.zoom)||c.push({command:nr.setZoom,args:[n.zoom]}),yr(s.bearing,n.bearing)||c.push({command:nr.setBearing,args:[n.bearing]}),yr(s.pitch,n.pitch)||c.push({command:nr.setPitch,args:[n.pitch]}),yr(s.sprite,n.sprite)||c.push({command:nr.setSprite,args:[n.sprite]}),yr(s.glyphs,n.glyphs)||c.push({command:nr.setGlyphs,args:[n.glyphs]}),yr(s.transition,n.transition)||c.push({command:nr.setTransition,args:[n.transition]}),yr(s.light,n.light)||c.push({command:nr.setLight,args:[n.light]});const f={},m=[];(function(v,S,A,M){let F;for(F in S=S||{},v=v||{})Object.prototype.hasOwnProperty.call(v,F)&&(Object.prototype.hasOwnProperty.call(S,F)||za(F,A,M));for(F in S)Object.prototype.hasOwnProperty.call(S,F)&&(Object.prototype.hasOwnProperty.call(v,F)?yr(v[F],S[F])||(v[F].type==="geojson"&&S[F].type==="geojson"&&Ji(v,S,F)?A.push({command:nr.setGeoJSONSourceData,args:[F,S[F].data]}):Di(F,S,A,M)):ri(F,S,A))})(s.sources,n.sources,m,f);const x=[];s.layers&&s.layers.forEach(v=>{f[v.source]?c.push({command:nr.removeLayer,args:[v.id]}):x.push(v)}),c=c.concat(m),function(v,S,A){S=S||[];const M=(v=v||[]).map(pa),F=S.map(pa),V=v.reduce(Oa,{}),q=S.reduce(Oa,{}),K=M.slice(),Y=Object.create(null);let le,pe,ve,Le,Ae,Oe,We;for(le=0,pe=0;le<M.length;le++)ve=M[le],Object.prototype.hasOwnProperty.call(q,ve)?pe++:(A.push({command:nr.removeLayer,args:[ve]}),K.splice(K.indexOf(ve,pe),1));for(le=0,pe=0;le<F.length;le++)ve=F[F.length-1-le],K[K.length-1-le]!==ve&&(Object.prototype.hasOwnProperty.call(V,ve)?(A.push({command:nr.removeLayer,args:[ve]}),K.splice(K.lastIndexOf(ve,K.length-pe),1)):pe++,Oe=K[K.length-le],A.push({command:nr.addLayer,args:[q[ve],Oe]}),K.splice(K.length-le,0,ve),Y[ve]=!0);for(le=0;le<F.length;le++)if(ve=F[le],Le=V[ve],Ae=q[ve],!Y[ve]&&!yr(Le,Ae))if(yr(Le.source,Ae.source)&&yr(Le["source-layer"],Ae["source-layer"])&&yr(Le.type,Ae.type)){for(We in Rs(Le.layout,Ae.layout,A,ve,null,nr.setLayoutProperty),Rs(Le.paint,Ae.paint,A,ve,null,nr.setPaintProperty),yr(Le.filter,Ae.filter)||A.push({command:nr.setFilter,args:[ve,Ae.filter]}),yr(Le.minzoom,Ae.minzoom)&&yr(Le.maxzoom,Ae.maxzoom)||A.push({command:nr.setLayerZoomRange,args:[ve,Ae.minzoom,Ae.maxzoom]}),Le)Object.prototype.hasOwnProperty.call(Le,We)&&We!=="layout"&&We!=="paint"&&We!=="filter"&&We!=="metadata"&&We!=="minzoom"&&We!=="maxzoom"&&(We.indexOf("paint.")===0?Rs(Le[We],Ae[We],A,ve,We.slice(6),nr.setPaintProperty):yr(Le[We],Ae[We])||A.push({command:nr.setLayerProperty,args:[ve,We,Ae[We]]}));for(We in Ae)Object.prototype.hasOwnProperty.call(Ae,We)&&!Object.prototype.hasOwnProperty.call(Le,We)&&We!=="layout"&&We!=="paint"&&We!=="filter"&&We!=="metadata"&&We!=="minzoom"&&We!=="maxzoom"&&(We.indexOf("paint.")===0?Rs(Le[We],Ae[We],A,ve,We.slice(6),nr.setPaintProperty):yr(Le[We],Ae[We])||A.push({command:nr.setLayerProperty,args:[ve,We,Ae[We]]}))}else A.push({command:nr.removeLayer,args:[ve]}),Oe=K[K.lastIndexOf(ve)+1],A.push({command:nr.addLayer,args:[Ae,Oe]})}(x,n.layers,c)}catch(f){console.warn("Unable to compute style diff:",f),c=[{command:nr.setStyle,args:[n]}]}return c},l.aF=function(s){const n=[],c=s.id;return c===void 0&&n.push({message:`layers.${c}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${c}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),n},l.aG=function s(n,c){if(Array.isArray(n)){if(!Array.isArray(c)||n.length!==c.length)return!1;for(let f=0;f<n.length;f++)if(!s(n[f],c[f]))return!1;return!0}if(typeof n=="object"&&n!==null&&c!==null){if(typeof c!="object"||Object.keys(n).length!==Object.keys(c).length)return!1;for(const f in n)if(!s(n[f],c[f]))return!1;return!0}return n===c},l.aH=ke,l.aI=$e,l.aJ=Jl,l.aK=function(s){return s({pluginStatus:vi,pluginURL:Bs}),Jl.on("pluginStateChange",s),s},l.aL=class extends ho{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},l.aM=mu,l.aN=class extends ho{constructor(s,n){super(s,n),this.current=Qg}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},l.aO=Wp,l.aP=class extends ho{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},l.aQ=class extends ho{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},l.aR=Hp,l.aS=function(s,n,c,f,m,x,v){var S=1/(n-c),A=1/(f-m),M=1/(x-v);return s[0]=-2*S,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*A,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*M,s[11]=0,s[12]=(n+c)*S,s[13]=(m+f)*A,s[14]=(v+x)*M,s[15]=1,s},l.aT=rr,l.aU=F4,l.aV=class extends p{},l.aW=II,l.aX=class extends y{},l.aY=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},l.aZ=O1,l.a_=_t,l.aa=function(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,f,m,x)=>{const v=m||x;return n[f]=!v||v.toLowerCase(),""}),n["max-age"]){const c=parseInt(n["max-age"],10);isNaN(c)?delete n["max-age"]:n["max-age"]=c}return n},l.ab=function(s,n){const c=[];for(const f in s)f in n||c.push(f);return c},l.ac=function(s){if(Ke==null){const n=s.navigator?s.navigator.userAgent:null;Ke=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Ke},l.ad=Ce,l.ae=function(s,n,c){var f=Math.sin(c),m=Math.cos(c),x=n[0],v=n[1],S=n[2],A=n[3],M=n[4],F=n[5],V=n[6],q=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=x*m+M*f,s[1]=v*m+F*f,s[2]=S*m+V*f,s[3]=A*m+q*f,s[4]=M*m-x*f,s[5]=F*m-v*f,s[6]=V*m-S*f,s[7]=q*m-A*f,s},l.af=function(s){var n=new _u(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},l.ag=Kp,l.ah=function(s,n){let c=0,f=0;if(s.kind==="constant")f=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:m,minZoom:x,maxZoom:v}=s,S=m?Ce(zi.interpolationFactor(m,n,x,v),0,1):0;s.kind==="camera"?f=Fi.number(s.minSize,s.maxSize,S):c=S}return{uSizeT:c,uSize:f}},l.aj=function(s,{uSize:n,uSizeT:c},{lowerSize:f,upperSize:m}){return s.kind==="source"?f/Vs:s.kind==="composite"?Fi.number(f/Vs,m/Vs,c):n},l.ak=E_,l.al=function(s,n,c,f){const m=n.y-s.y,x=n.x-s.x,v=f.y-c.y,S=f.x-c.x,A=v*x-S*m;if(A===0)return null;const M=(S*(s.y-c.y)-v*(s.x-c.x))/A;return new k(s.x+M*x,s.y+M*m)},l.am=Bw,l.an=C1,l.ao=i_,l.ap=En,l.ar=T_,l.as=function(s,n){var c=n[0],f=n[1],m=n[2],x=n[3],v=n[4],S=n[5],A=n[6],M=n[7],F=n[8],V=n[9],q=n[10],K=n[11],Y=n[12],le=n[13],pe=n[14],ve=n[15],Le=c*S-f*v,Ae=c*A-m*v,Oe=c*M-x*v,We=f*A-m*S,rt=f*M-x*S,Pt=m*M-x*A,Bt=F*le-V*Y,At=F*pe-q*Y,Et=F*ve-K*Y,vt=V*pe-q*le,Ot=V*ve-K*le,St=q*ve-K*pe,ut=Le*St-Ae*Ot+Oe*vt+We*Et-rt*At+Pt*Bt;return ut?(s[0]=(S*St-A*Ot+M*vt)*(ut=1/ut),s[1]=(m*Ot-f*St-x*vt)*ut,s[2]=(le*Pt-pe*rt+ve*We)*ut,s[3]=(q*rt-V*Pt-K*We)*ut,s[4]=(A*Et-v*St-M*At)*ut,s[5]=(c*St-m*Et+x*At)*ut,s[6]=(pe*Oe-Y*Pt-ve*Ae)*ut,s[7]=(F*Pt-q*Oe+K*Ae)*ut,s[8]=(v*Ot-S*Et+M*Bt)*ut,s[9]=(f*Et-c*Ot-x*Bt)*ut,s[10]=(Y*rt-le*Oe+ve*Le)*ut,s[11]=(V*Oe-F*rt-K*Le)*ut,s[12]=(S*At-v*vt-A*Bt)*ut,s[13]=(c*vt-f*At+m*Bt)*ut,s[14]=(le*Ae-Y*We-pe*Le)*ut,s[15]=(F*We-V*Ae+q*Le)*ut,s):null},l.at=D_,l.au=S_,l.av=L_,l.aw=function(){const s={},n=Xe.$version;for(const c in Xe.$root){const f=Xe.$root[c];if(f.required){let m=null;m=c==="version"?n:f.type==="array"?[]:{},m!=null&&(s[c]=m)}}return s},l.ax=nr,l.ay=zp,l.az=ft,l.b=function(s,n){const c=new Blob([new Uint8Array(s)],{type:"image/png"});createImageBitmap(c).then(f=>{n(null,f)}).catch(f=>{n(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=Un,l.b1=function(s,n){var c=s[0],f=s[1],m=s[2],x=s[3],v=s[4],S=s[5],A=s[6],M=s[7],F=s[8],V=s[9],q=s[10],K=s[11],Y=s[12],le=s[13],pe=s[14],ve=s[15],Le=n[0],Ae=n[1],Oe=n[2],We=n[3],rt=n[4],Pt=n[5],Bt=n[6],At=n[7],Et=n[8],vt=n[9],Ot=n[10],St=n[11],ut=n[12],Wt=n[13],Vt=n[14],ar=n[15];return Math.abs(c-Le)<=bi*Math.max(1,Math.abs(c),Math.abs(Le))&&Math.abs(f-Ae)<=bi*Math.max(1,Math.abs(f),Math.abs(Ae))&&Math.abs(m-Oe)<=bi*Math.max(1,Math.abs(m),Math.abs(Oe))&&Math.abs(x-We)<=bi*Math.max(1,Math.abs(x),Math.abs(We))&&Math.abs(v-rt)<=bi*Math.max(1,Math.abs(v),Math.abs(rt))&&Math.abs(S-Pt)<=bi*Math.max(1,Math.abs(S),Math.abs(Pt))&&Math.abs(A-Bt)<=bi*Math.max(1,Math.abs(A),Math.abs(Bt))&&Math.abs(M-At)<=bi*Math.max(1,Math.abs(M),Math.abs(At))&&Math.abs(F-Et)<=bi*Math.max(1,Math.abs(F),Math.abs(Et))&&Math.abs(V-vt)<=bi*Math.max(1,Math.abs(V),Math.abs(vt))&&Math.abs(q-Ot)<=bi*Math.max(1,Math.abs(q),Math.abs(Ot))&&Math.abs(K-St)<=bi*Math.max(1,Math.abs(K),Math.abs(St))&&Math.abs(Y-ut)<=bi*Math.max(1,Math.abs(Y),Math.abs(ut))&&Math.abs(le-Wt)<=bi*Math.max(1,Math.abs(le),Math.abs(Wt))&&Math.abs(pe-Vt)<=bi*Math.max(1,Math.abs(pe),Math.abs(Vt))&&Math.abs(ve-ar)<=bi*Math.max(1,Math.abs(ve),Math.abs(ar))},l.b2=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},l.b3=function(s,n,c){return s[0]=n[0]*c[0],s[1]=n[1]*c[1],s[2]=n[2]*c[2],s[3]=n[3]*c[3],s},l.b4=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]*n[3]},l.b5=te,l.b6=Rw,l.b7=Iw,l.b8=function(s,n,c,f,m){var x,v=1/Math.tan(n/2);return s[0]=v/c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=v,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,m!=null&&m!==1/0?(s[10]=(m+f)*(x=1/(f-m)),s[14]=2*m*f*x):(s[10]=-1,s[14]=-2*f),s},l.b9=function(s,n,c){var f=Math.sin(c),m=Math.cos(c),x=n[4],v=n[5],S=n[6],A=n[7],M=n[8],F=n[9],V=n[10],q=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=x*m+M*f,s[5]=v*m+F*f,s[6]=S*m+V*f,s[7]=A*m+q*f,s[8]=M*m-x*f,s[9]=F*m-v*f,s[10]=V*m-S*f,s[11]=q*m-A*f,s},l.bA=E,l.bB=iw,l.bC=iu,l.bD=Ni,l.ba=Q,l.bb=_e,l.bc=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},l.bd=class extends tc{},l.be=I_,l.bf=Pw,l.bg=hP,l.bi=lt,l.bj=function(s,n,c=!1){if(vi===tf||vi===rf||vi===nf)throw new Error("setRTLTextPlugin cannot be called multiple times.");Bs=je.resolveURL(s),vi=tf,af=n,sf(),c||Up()},l.bk=of,l.bl=function(s,n){const c={};for(let m=0;m<s.length;m++){const x=n&&n[s[m].id]||lu(s[m]);n&&(n[s[m].id]=x);let v=c[x];v||(v=c[x]=[]),v.push(s[m])}const f=[];for(const m in c)f.push(c[m]);return f},l.bm=Ft,l.bn=Lw,l.bo=zw,l.bp=dw,l.bq=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=_n/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const n=s.bucket.layers[0],c=n.layout,f=n._unevaluatedLayout._values,m={layoutIconSize:f["icon-size"].possiblyEvaluate(new zr(s.bucket.zoom+1),s.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new zr(s.bucket.zoom+1),s.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new zr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:F}=s.bucket.textSizeData;m.compositeTextSizes=[f["text-size"].possiblyEvaluate(new zr(M),s.canonical),f["text-size"].possiblyEvaluate(new zr(F),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:F}=s.bucket.iconSizeData;m.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new zr(M),s.canonical),f["icon-size"].possiblyEvaluate(new zr(F),s.canonical)]}const x=c.get("text-line-height")*En,v=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",S=c.get("text-keep-upright"),A=c.get("text-size");for(const M of s.bucket.features){const F=c.get("text-font").evaluate(M,{},s.canonical).join(","),V=A.evaluate(M,{},s.canonical),q=m.layoutTextSize.evaluate(M,{},s.canonical),K=m.layoutIconSize.evaluate(M,{},s.canonical),Y={horizontal:{},vertical:void 0},le=M.text;let pe,ve=[0,0];if(le){const Oe=le.toString(),We=c.get("text-letter-spacing").evaluate(M,{},s.canonical)*En,rt=Qh(Oe)?We:0,Pt=c.get("text-anchor").evaluate(M,{},s.canonical),Bt=Zw(n,M,s.canonical);if(!Bt){const St=c.get("text-radial-offset").evaluate(M,{},s.canonical);ve=St?qw(Pt,[St*En,R_]):c.get("text-offset").evaluate(M,{},s.canonical).map(ut=>ut*En)}let At=v?"center":c.get("text-justify").evaluate(M,{},s.canonical);const Et=c.get("symbol-placement"),vt=Et==="point"?c.get("text-max-width").evaluate(M,{},s.canonical)*En:0,Ot=()=>{s.bucket.allowVerticalPlacement&&Jh(Oe)&&(Y.vertical=n0(le,s.glyphMap,s.glyphPositions,s.imagePositions,F,vt,x,Pt,"left",rt,ve,l.ai.vertical,!0,Et,q,V))};if(!v&&Bt){const St=new Set;if(At==="auto")for(let Wt=0;Wt<Bt.values.length;Wt+=2)St.add(D_(Bt.values[Wt]));else St.add(At);let ut=!1;for(const Wt of St)if(!Y.horizontal[Wt])if(ut)Y.horizontal[Wt]=Y.horizontal[0];else{const Vt=n0(le,s.glyphMap,s.glyphPositions,s.imagePositions,F,vt,x,"center",Wt,rt,ve,l.ai.horizontal,!1,Et,q,V);Vt&&(Y.horizontal[Wt]=Vt,ut=Vt.positionedLines.length===1)}Ot()}else{At==="auto"&&(At=D_(Pt));const St=n0(le,s.glyphMap,s.glyphPositions,s.imagePositions,F,vt,x,Pt,At,rt,ve,l.ai.horizontal,!1,Et,q,V);St&&(Y.horizontal[At]=St),Ot(),Jh(Oe)&&v&&S&&(Y.vertical=n0(le,s.glyphMap,s.glyphPositions,s.imagePositions,F,vt,x,Pt,At,rt,ve,l.ai.vertical,!1,Et,q,V))}}let Le=!1;if(M.icon&&M.icon.name){const Oe=s.imageMap[M.icon.name];Oe&&(pe=HI(s.imagePositions[M.icon.name],c.get("icon-offset").evaluate(M,{},s.canonical),c.get("icon-anchor").evaluate(M,{},s.canonical)),Le=!!Oe.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Le:s.bucket.sdfIcons!==Le&&yt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Oe.pixelRatio!==s.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const Ae=Kw(Y.horizontal)||Y.vertical;s.bucket.iconsInText=!!Ae&&Ae.iconsInText,(Ae||pe)&&cP(s.bucket,M,Y,pe,s.imageMap,m,q,K,ve,Le,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},l.br=__,l.bs=p_,l.bt=g_,l.bu=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},l.bv=x_,l.bw=Jo,l.bx=function(s,n,c,f,m){return b(this,void 0,void 0,function*(){if(W())try{return yield jt(s,n,c,f,m)}catch{}return function(x,v,S,A,M){const F=x.width,V=x.height;xe&&Te||(xe=new OffscreenCanvas(F,V),Te=xe.getContext("2d",{willReadFrequently:!0})),xe.width=F,xe.height=V,Te.drawImage(x,0,0,F,V);const q=Te.getImageData(v,S,A,M);return Te.clearRect(0,0,F,V),q.data}(s,n,c,f,m)})},l.by=Dw,l.bz=w,l.c=Je,l.d=function(s,n){const c=new Image;c.onload=()=>{n(null,c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=Dt})},c.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(s)],{type:"image/png"});c.src=s.byteLength?URL.createObjectURL(f):Dt},l.e=we,l.f=function(s,n){return Zt(we(s,{type:"json"}),n)},l.g=ot,l.h=je,l.i=Rt,l.j=hr,l.k=Lt,l.l=Yt,l.m=Zt,l.n=function(s){return new x_(s).readFields(UI,[])},l.o=function(s,n,c){if(!s.length)return c(null,[]);let f=s.length;const m=new Array(s.length);let x=null;s.forEach((v,S)=>{n(v,(A,M)=>{A&&(x=A),m[S]=M,--f==0&&c(x,m)})})},l.p=fw,l.q=vf,l.r=hn,l.s=Xt,l.t=Xg,l.u=It,l.v=Xe,l.w=yt,l.x=hu,l.y=os,l.z=function([s,n,c]){return n+=90,n*=Math.PI/180,c*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(c),y:s*Math.sin(n)*Math.sin(c),z:s*Math.cos(c)}}}),h(["./shared"],function(l){class b{constructor(H){this.keyCache={},H&&this.replace(H)}replace(H){this._layerConfigs={},this._layers={},this.update(H,[])}update(H,Z){for(const de of H){this._layerConfigs[de.id]=de;const me=this._layers[de.id]=l.aC(de);me._featureFilter=l.a6(me.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(const de of Z)delete this.keyCache[de],delete this._layerConfigs[de],delete this._layers[de];this.familiesBySource={};const ie=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const de of ie){const me=de.map(Qe=>this._layers[Qe.id]),Fe=me[0];if(Fe.visibility==="none")continue;const Ie=Fe.source||"";let ye=this.familiesBySource[Ie];ye||(ye=this.familiesBySource[Ie]={});const Re=Fe.sourceLayer||"_geojsonTileLayer";let Ye=ye[Re];Ye||(Ye=ye[Re]=[]),Ye.push(me)}}}class w{constructor(H){const Z={},ie=[];for(const Ie in H){const ye=H[Ie],Re=Z[Ie]={};for(const Ye in ye){const Qe=ye[+Ye];if(!Qe||Qe.bitmap.width===0||Qe.bitmap.height===0)continue;const j={x:0,y:0,w:Qe.bitmap.width+2,h:Qe.bitmap.height+2};ie.push(j),Re[Ye]={rect:j,metrics:Qe.metrics}}}const{w:de,h:me}=l.p(ie),Fe=new l.q({width:de||1,height:me||1});for(const Ie in H){const ye=H[Ie];for(const Re in ye){const Ye=ye[+Re];if(!Ye||Ye.bitmap.width===0||Ye.bitmap.height===0)continue;const Qe=Z[Ie][Re].rect;l.q.copy(Ye.bitmap,Fe,{x:0,y:0},{x:Qe.x+1,y:Qe.y+1},Ye.bitmap)}}this.image=Fe,this.positions=Z}}l.bm("GlyphAtlas",w);class E{constructor(H){this.tileID=new l.O(H.tileID.overscaledZ,H.tileID.wrap,H.tileID.canonical.z,H.tileID.canonical.x,H.tileID.canonical.y),this.uid=H.uid,this.zoom=H.zoom,this.pixelRatio=H.pixelRatio,this.tileSize=H.tileSize,this.source=H.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=H.showCollisionBoxes,this.collectResourceTiming=!!H.collectResourceTiming,this.returnDependencies=!!H.returnDependencies,this.promoteId=H.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(H,Z,ie,de,me){this.status="parsing",this.data=H,this.collisionBoxArray=new l.a3;const Fe=new l.bn(Object.keys(H.layers).sort()),Ie=new l.bo(this.tileID,this.promoteId);Ie.bucketLayerIDs=[];const ye={},Re={featureIndex:Ie,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ie},Ye=Z.familiesBySource[this.source];for(const ze in Ye){const Ne=H.layers[ze];if(!Ne)continue;Ne.version===1&&l.w(`Vector tile source "${this.source}" layer "${ze}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ge=Fe.encode(ze),it=[];for(let mt=0;mt<Ne.length;mt++){const Ct=Ne.feature(mt),pt=Ie.getId(Ct,ze);it.push({feature:Ct,id:pt,index:mt,sourceLayerIndex:Ge})}for(const mt of Ye[ze]){const Ct=mt[0];Ct.source!==this.source&&l.w(`layer.source = ${Ct.source} does not equal this.source = ${this.source}`),Ct.minzoom&&this.zoom<Math.floor(Ct.minzoom)||Ct.maxzoom&&this.zoom>=Ct.maxzoom||Ct.visibility!=="none"&&(P(mt,this.zoom,ie),(ye[Ct.id]=Ct.createBucket({index:Ie.bucketLayerIDs.length,layers:mt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ge,sourceID:this.source})).populate(it,Re,this.tileID.canonical),Ie.bucketLayerIDs.push(mt.map(pt=>pt.id)))}}let Qe,j,re,ee;const J=l.aH(Re.glyphDependencies,ze=>Object.keys(ze).map(Number));this.inFlightDependencies.forEach(ze=>ze==null?void 0:ze.cancel()),this.inFlightDependencies=[];const ne=++this.dependencySentinel;Object.keys(J).length?this.inFlightDependencies.push(de.send("getGlyphs",{uid:this.uid,stacks:J,source:this.source,tileID:this.tileID,type:"glyphs"},(ze,Ne)=>{ne===this.dependencySentinel&&(Qe||(Qe=ze,j=Ne,Ze.call(this)))})):j={};const se=Object.keys(Re.iconDependencies);se.length?this.inFlightDependencies.push(de.send("getImages",{icons:se,source:this.source,tileID:this.tileID,type:"icons"},(ze,Ne)=>{ne===this.dependencySentinel&&(Qe||(Qe=ze,re=Ne,Ze.call(this)))})):re={};const Be=Object.keys(Re.patternDependencies);function Ze(){if(Qe)return me(Qe);if(j&&re&&ee){const ze=new w(j),Ne=new l.bp(re,ee);for(const Ge in ye){const it=ye[Ge];it instanceof l.a4?(P(it.layers,this.zoom,ie),l.bq({bucket:it,glyphMap:j,glyphPositions:ze.positions,imageMap:re,imagePositions:Ne.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):it.hasPattern&&(it instanceof l.br||it instanceof l.bs||it instanceof l.bt)&&(P(it.layers,this.zoom,ie),it.addFeatures(Re,this.tileID.canonical,Ne.patternPositions))}this.status="done",me(null,{buckets:Object.values(ye).filter(Ge=>!Ge.isEmpty()),featureIndex:Ie,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ze.image,imageAtlas:Ne,glyphMap:this.returnDependencies?j:null,iconMap:this.returnDependencies?re:null,glyphPositions:this.returnDependencies?ze.positions:null})}}Be.length?this.inFlightDependencies.push(de.send("getImages",{icons:Be,source:this.source,tileID:this.tileID,type:"patterns"},(ze,Ne)=>{ne===this.dependencySentinel&&(Qe||(Qe=ze,ee=Ne,Ze.call(this)))})):ee={},Ze.call(this)}}function P(he,H,Z){const ie=new l.a8(H);for(const de of he)de.recalculate(ie,Z)}function k(he,H){const Z=l.l(he.request,(ie,de,me,Fe)=>{if(ie)H(ie);else if(de)try{const Ie=new l.bw.VectorTile(new l.bv(de));H(null,{vectorTile:Ie,rawData:de,cacheControl:me,expires:Fe})}catch(Ie){const ye=new Uint8Array(de);let Re=`Unable to parse the tile at ${he.request.url}, `;Re+=ye[0]===31&&ye[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.messge}`,H(new Error(Re))}});return()=>{Z.cancel(),H()}}class R{constructor(H,Z,ie,de){this.actor=H,this.layerIndex=Z,this.availableImages=ie,this.loadVectorData=de||k,this.fetching={},this.loading={},this.loaded={}}loadTile(H,Z){const ie=H.uid;this.loading||(this.loading={});const de=!!(H&&H.request&&H.request.collectResourceTiming)&&new l.bu(H.request),me=this.loading[ie]=new E(H);me.abort=this.loadVectorData(H,(Fe,Ie)=>{if(delete this.loading[ie],Fe||!Ie)return me.status="done",this.loaded[ie]=me,Z(Fe);const ye=Ie.rawData,Re={};Ie.expires&&(Re.expires=Ie.expires),Ie.cacheControl&&(Re.cacheControl=Ie.cacheControl);const Ye={};if(de){const Qe=de.finish();Qe&&(Ye.resourceTiming=JSON.parse(JSON.stringify(Qe)))}me.vectorTile=Ie.vectorTile,me.parse(Ie.vectorTile,this.layerIndex,this.availableImages,this.actor,(Qe,j)=>{if(delete this.fetching[ie],Qe||!j)return Z(Qe);Z(null,l.e({rawTileData:ye.slice(0)},j,Re,Ye))}),this.loaded=this.loaded||{},this.loaded[ie]=me,this.fetching[ie]={rawTileData:ye,cacheControl:Re,resourceTiming:Ye}})}reloadTile(H,Z){const ie=this.loaded,de=H.uid;if(ie&&ie[de]){const me=ie[de];me.showCollisionBoxes=H.showCollisionBoxes,me.status==="parsing"?me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,(Fe,Ie)=>{if(Fe||!Ie)return Z(Fe,Ie);let ye;if(this.fetching[de]){const{rawTileData:Re,cacheControl:Ye,resourceTiming:Qe}=this.fetching[de];delete this.fetching[de],ye=l.e({rawTileData:Re.slice(0)},Ie,Ye,Qe)}else ye=Ie;Z(null,ye)}):me.status==="done"&&(me.vectorTile?me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,Z):Z())}}abortTile(H,Z){const ie=this.loading,de=H.uid;ie&&ie[de]&&ie[de].abort&&(ie[de].abort(),delete ie[de]),Z()}removeTile(H,Z){const ie=this.loaded,de=H.uid;ie&&ie[de]&&delete ie[de],Z()}}class z{constructor(){this.loaded={}}loadTile(H,Z){return l._(this,void 0,void 0,function*(){const{uid:ie,encoding:de,rawImageData:me,redFactor:Fe,greenFactor:Ie,blueFactor:ye,baseShift:Re}=H,Ye=me.width+2,Qe=me.height+2,j=l.a(me)?new l.R({width:Ye,height:Qe},yield l.bx(me,-1,-1,Ye,Qe)):me,re=new l.by(ie,j,de,Fe,Ie,ye,Re);this.loaded=this.loaded||{},this.loaded[ie]=re,Z(null,re)})}removeTile(H){const Z=this.loaded,ie=H.uid;Z&&Z[ie]&&delete Z[ie]}}function D(he,H){if(he.length!==0){G(he[0],H);for(var Z=1;Z<he.length;Z++)G(he[Z],!H)}}function G(he,H){for(var Z=0,ie=0,de=0,me=he.length,Fe=me-1;de<me;Fe=de++){var Ie=(he[de][0]-he[Fe][0])*(he[Fe][1]+he[de][1]),ye=Z+Ie;ie+=Math.abs(Z)>=Math.abs(Ie)?Z-ye+Ie:Ie-ye+Z,Z=ye}Z+ie>=0!=!!H&&he.reverse()}var B=l.bz(function he(H,Z){var ie,de=H&&H.type;if(de==="FeatureCollection")for(ie=0;ie<H.features.length;ie++)he(H.features[ie],Z);else if(de==="GeometryCollection")for(ie=0;ie<H.geometries.length;ie++)he(H.geometries[ie],Z);else if(de==="Feature")he(H.geometry,Z);else if(de==="Polygon")D(H.coordinates,Z);else if(de==="MultiPolygon")for(ie=0;ie<H.coordinates.length;ie++)D(H.coordinates[ie],Z);return H});const N=l.bw.VectorTileFeature.prototype.toGeoJSON;var W={exports:{}},Q=l.bA,_e=l.bw.VectorTileFeature,Ce=te;function te(he,H){this.options=H||{},this.features=he,this.length=he.length}function we(he,H){this.id=typeof he.id=="number"?he.id:void 0,this.type=he.type,this.rawGeometry=he.type===1?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=H||4096}te.prototype.feature=function(he){return new we(this.features[he],this.options.extent)},we.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var H=0;H<he.length;H++){for(var Z=he[H],ie=[],de=0;de<Z.length;de++)ie.push(new Q(Z[de][0],Z[de][1]));this.geometry.push(ie)}return this.geometry},we.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,H=1/0,Z=-1/0,ie=1/0,de=-1/0,me=0;me<he.length;me++)for(var Fe=he[me],Ie=0;Ie<Fe.length;Ie++){var ye=Fe[Ie];H=Math.min(H,ye.x),Z=Math.max(Z,ye.x),ie=Math.min(ie,ye.y),de=Math.max(de,ye.y)}return[H,ie,Z,de]},we.prototype.toGeoJSON=_e.prototype.toGeoJSON;var Pe=l.bB,ke=Ce;function $e(he){var H=new Pe;return function(Z,ie){for(var de in Z.layers)ie.writeMessage(3,Ue,Z.layers[de])}(he,H),H.finish()}function Ue(he,H){var Z;H.writeVarintField(15,he.version||1),H.writeStringField(1,he.name||""),H.writeVarintField(5,he.extent||4096);var ie={keys:[],values:[],keycache:{},valuecache:{}};for(Z=0;Z<he.length;Z++)ie.feature=he.feature(Z),H.writeMessage(2,at,ie);var de=ie.keys;for(Z=0;Z<de.length;Z++)H.writeStringField(3,de[Z]);var me=ie.values;for(Z=0;Z<me.length;Z++)H.writeMessage(4,Ke,me[Z])}function at(he,H){var Z=he.feature;Z.id!==void 0&&H.writeVarintField(1,Z.id),H.writeMessage(2,yt,he),H.writeVarintField(3,Z.type),H.writeMessage(4,Rt,Z)}function yt(he,H){var Z=he.feature,ie=he.keys,de=he.values,me=he.keycache,Fe=he.valuecache;for(var Ie in Z.properties){var ye=Z.properties[Ie],Re=me[Ie];if(ye!==null){Re===void 0&&(ie.push(Ie),me[Ie]=Re=ie.length-1),H.writeVarint(Re);var Ye=typeof ye;Ye!=="string"&&Ye!=="boolean"&&Ye!=="number"&&(ye=JSON.stringify(ye));var Qe=Ye+":"+ye,j=Fe[Qe];j===void 0&&(de.push(ye),Fe[Qe]=j=de.length-1),H.writeVarint(j)}}}function gt(he,H){return(H<<3)+(7&he)}function nt(he){return he<<1^he>>31}function Rt(he,H){for(var Z=he.loadGeometry(),ie=he.type,de=0,me=0,Fe=Z.length,Ie=0;Ie<Fe;Ie++){var ye=Z[Ie],Re=1;ie===1&&(Re=ye.length),H.writeVarint(gt(1,Re));for(var Ye=ie===3?ye.length-1:ye.length,Qe=0;Qe<Ye;Qe++){Qe===1&&ie!==1&&H.writeVarint(gt(2,Ye-1));var j=ye[Qe].x-de,re=ye[Qe].y-me;H.writeVarint(nt(j)),H.writeVarint(nt(re)),de+=j,me+=re}ie===3&&H.writeVarint(gt(7,1))}}function Ke(he,H){var Z=typeof he;Z==="string"?H.writeStringField(1,he):Z==="boolean"?H.writeBooleanField(7,he):Z==="number"&&(he%1!=0?H.writeDoubleField(3,he):he<0?H.writeSVarintField(6,he):H.writeVarintField(5,he))}W.exports=$e,W.exports.fromVectorTileJs=$e,W.exports.fromGeojsonVt=function(he,H){H=H||{};var Z={};for(var ie in he)Z[ie]=new ke(he[ie].features,H),Z[ie].name=ie,Z[ie].version=H.version,Z[ie].extent=H.extent;return $e({layers:Z})},W.exports.GeoJSONWrapper=ke;var dt=l.bz(W.exports);const Dt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},jt=Math.fround||(xe=new Float32Array(1),he=>(xe[0]=+he,xe[0]));var xe;const Te=3,be=5,Ee=6;class je{constructor(H){this.options=Object.assign(Object.create(Dt),H),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(H){const{log:Z,minZoom:ie,maxZoom:de}=this.options;Z&&console.time("total time");const me=`prepare ${H.length} points`;Z&&console.time(me),this.points=H;const Fe=[];for(let ye=0;ye<H.length;ye++){const Re=H[ye];if(!Re.geometry)continue;const[Ye,Qe]=Re.geometry.coordinates,j=jt(ft(Ye)),re=jt(ot(Qe));Fe.push(j,re,1/0,ye,-1,1),this.options.reduce&&Fe.push(0)}let Ie=this.trees[de+1]=this._createTree(Fe);Z&&console.timeEnd(me);for(let ye=de;ye>=ie;ye--){const Re=+Date.now();Ie=this.trees[ye]=this._createTree(this._cluster(Ie,ye)),Z&&console.log("z%d: %d clusters in %dms",ye,Ie.numItems,+Date.now()-Re)}return Z&&console.timeEnd("total time"),this}getClusters(H,Z){let ie=((H[0]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,H[1]));let me=H[2]===180?180:((H[2]+180)%360+360)%360-180;const Fe=Math.max(-90,Math.min(90,H[3]));if(H[2]-H[0]>=360)ie=-180,me=180;else if(ie>me){const Qe=this.getClusters([ie,de,180,Fe],Z),j=this.getClusters([-180,de,me,Fe],Z);return Qe.concat(j)}const Ie=this.trees[this._limitZoom(Z)],ye=Ie.range(ft(ie),ot(Fe),ft(me),ot(de)),Re=Ie.data,Ye=[];for(const Qe of ye){const j=this.stride*Qe;Ye.push(Re[j+be]>1?Je(Re,j,this.clusterProps):this.points[Re[j+Te]])}return Ye}getChildren(H){const Z=this._getOriginId(H),ie=this._getOriginZoom(H),de="No cluster with the specified id.",me=this.trees[ie];if(!me)throw new Error(de);const Fe=me.data;if(Z*this.stride>=Fe.length)throw new Error(de);const Ie=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),ye=me.within(Fe[Z*this.stride],Fe[Z*this.stride+1],Ie),Re=[];for(const Ye of ye){const Qe=Ye*this.stride;Fe[Qe+4]===H&&Re.push(Fe[Qe+be]>1?Je(Fe,Qe,this.clusterProps):this.points[Fe[Qe+Te]])}if(Re.length===0)throw new Error(de);return Re}getLeaves(H,Z,ie){const de=[];return this._appendLeaves(de,H,Z=Z||10,ie=ie||0,0),de}getTile(H,Z,ie){const de=this.trees[this._limitZoom(H)],me=Math.pow(2,H),{extent:Fe,radius:Ie}=this.options,ye=Ie/Fe,Re=(ie-ye)/me,Ye=(ie+1+ye)/me,Qe={features:[]};return this._addTileFeatures(de.range((Z-ye)/me,Re,(Z+1+ye)/me,Ye),de.data,Z,ie,me,Qe),Z===0&&this._addTileFeatures(de.range(1-ye/me,Re,1,Ye),de.data,me,ie,me,Qe),Z===me-1&&this._addTileFeatures(de.range(0,Re,ye/me,Ye),de.data,-1,ie,me,Qe),Qe.features.length?Qe:null}getClusterExpansionZoom(H){let Z=this._getOriginZoom(H)-1;for(;Z<=this.options.maxZoom;){const ie=this.getChildren(H);if(Z++,ie.length!==1)break;H=ie[0].properties.cluster_id}return Z}_appendLeaves(H,Z,ie,de,me){const Fe=this.getChildren(Z);for(const Ie of Fe){const ye=Ie.properties;if(ye&&ye.cluster?me+ye.point_count<=de?me+=ye.point_count:me=this._appendLeaves(H,ye.cluster_id,ie,de,me):me<de?me++:H.push(Ie),H.length===ie)break}return me}_createTree(H){const Z=new l.av(H.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ie=0;ie<H.length;ie+=this.stride)Z.add(H[ie],H[ie+1]);return Z.finish(),Z.data=H,Z}_addTileFeatures(H,Z,ie,de,me,Fe){for(const Ie of H){const ye=Ie*this.stride,Re=Z[ye+be]>1;let Ye,Qe,j;if(Re)Ye=lt(Z,ye,this.clusterProps),Qe=Z[ye],j=Z[ye+1];else{const J=this.points[Z[ye+Te]];Ye=J.properties;const[ne,se]=J.geometry.coordinates;Qe=ft(ne),j=ot(se)}const re={type:1,geometry:[[Math.round(this.options.extent*(Qe*me-ie)),Math.round(this.options.extent*(j*me-de))]],tags:Ye};let ee;ee=Re||this.options.generateId?Z[ye+Te]:this.points[Z[ye+Te]].id,ee!==void 0&&(re.id=ee),Fe.features.push(re)}}_limitZoom(H){return Math.max(this.options.minZoom,Math.min(Math.floor(+H),this.options.maxZoom+1))}_cluster(H,Z){const{radius:ie,extent:de,reduce:me,minPoints:Fe}=this.options,Ie=ie/(de*Math.pow(2,Z)),ye=H.data,Re=[],Ye=this.stride;for(let Qe=0;Qe<ye.length;Qe+=Ye){if(ye[Qe+2]<=Z)continue;ye[Qe+2]=Z;const j=ye[Qe],re=ye[Qe+1],ee=H.within(ye[Qe],ye[Qe+1],Ie),J=ye[Qe+be];let ne=J;for(const se of ee){const Be=se*Ye;ye[Be+2]>Z&&(ne+=ye[Be+be])}if(ne>J&&ne>=Fe){let se,Be=j*J,Ze=re*J,ze=-1;const Ne=((Qe/Ye|0)<<5)+(Z+1)+this.points.length;for(const Ge of ee){const it=Ge*Ye;if(ye[it+2]<=Z)continue;ye[it+2]=Z;const mt=ye[it+be];Be+=ye[it]*mt,Ze+=ye[it+1]*mt,ye[it+4]=Ne,me&&(se||(se=this._map(ye,Qe,!0),ze=this.clusterProps.length,this.clusterProps.push(se)),me(se,this._map(ye,it)))}ye[Qe+4]=Ne,Re.push(Be/ne,Ze/ne,1/0,Ne,-1,ne),me&&Re.push(ze)}else{for(let se=0;se<Ye;se++)Re.push(ye[Qe+se]);if(ne>1)for(const se of ee){const Be=se*Ye;if(!(ye[Be+2]<=Z)){ye[Be+2]=Z;for(let Ze=0;Ze<Ye;Ze++)Re.push(ye[Be+Ze])}}}}return Re}_getOriginId(H){return H-this.points.length>>5}_getOriginZoom(H){return(H-this.points.length)%32}_map(H,Z,ie){if(H[Z+be]>1){const Fe=this.clusterProps[H[Z+Ee]];return ie?Object.assign({},Fe):Fe}const de=this.points[H[Z+Te]].properties,me=this.options.map(de);return ie&&me===de?Object.assign({},me):me}}function Je(he,H,Z){return{type:"Feature",id:he[H+Te],properties:lt(he,H,Z),geometry:{type:"Point",coordinates:[(ie=he[H],360*(ie-.5)),er(he[H+1])]}};var ie}function lt(he,H,Z){const ie=he[H+be],de=ie>=1e4?`${Math.round(ie/1e3)}k`:ie>=1e3?Math.round(ie/100)/10+"k":ie,me=he[H+Ee],Fe=me===-1?{}:Object.assign({},Z[me]);return Object.assign(Fe,{cluster:!0,cluster_id:he[H+Te],point_count:ie,point_count_abbreviated:de})}function ft(he){return he/360+.5}function ot(he){const H=Math.sin(he*Math.PI/180),Z=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return Z<0?0:Z>1?1:Z}function er(he){const H=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(H))/Math.PI-90}function Zt(he,H,Z,ie){for(var de,me=ie,Fe=Z-H>>1,Ie=Z-H,ye=he[H],Re=he[H+1],Ye=he[Z],Qe=he[Z+1],j=H+3;j<Z;j+=3){var re=Yt(he[j],he[j+1],ye,Re,Ye,Qe);if(re>me)de=j,me=re;else if(re===me){var ee=Math.abs(j-Fe);ee<Ie&&(de=j,Ie=ee)}}me>ie&&(de-H>3&&Zt(he,H,de,ie),he[de+2]=me,Z-de>3&&Zt(he,de,Z,ie))}function Yt(he,H,Z,ie,de,me){var Fe=de-Z,Ie=me-ie;if(Fe!==0||Ie!==0){var ye=((he-Z)*Fe+(H-ie)*Ie)/(Fe*Fe+Ie*Ie);ye>1?(Z=de,ie=me):ye>0&&(Z+=Fe*ye,ie+=Ie*ye)}return(Fe=he-Z)*Fe+(Ie=H-ie)*Ie}function Xt(he,H,Z,ie){var de={id:he===void 0?null:he,type:H,geometry:Z,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(me){var Fe=me.geometry,Ie=me.type;if(Ie==="Point"||Ie==="MultiPoint"||Ie==="LineString")Gr(me,Fe);else if(Ie==="Polygon"||Ie==="MultiLineString")for(var ye=0;ye<Fe.length;ye++)Gr(me,Fe[ye]);else if(Ie==="MultiPolygon")for(ye=0;ye<Fe.length;ye++)for(var Re=0;Re<Fe[ye].length;Re++)Gr(me,Fe[ye][Re])}(de),de}function Gr(he,H){for(var Z=0;Z<H.length;Z+=3)he.minX=Math.min(he.minX,H[Z]),he.minY=Math.min(he.minY,H[Z+1]),he.maxX=Math.max(he.maxX,H[Z]),he.maxY=Math.max(he.maxY,H[Z+1])}function gr(he,H,Z,ie){if(H.geometry){var de=H.geometry.coordinates,me=H.geometry.type,Fe=Math.pow(Z.tolerance/((1<<Z.maxZoom)*Z.extent),2),Ie=[],ye=H.id;if(Z.promoteId?ye=H.properties[Z.promoteId]:Z.generateId&&(ye=ie||0),me==="Point")Lt(de,Ie);else if(me==="MultiPoint")for(var Re=0;Re<de.length;Re++)Lt(de[Re],Ie);else if(me==="LineString")hr(de,Ie,Fe,!1);else if(me==="MultiLineString"){if(Z.lineMetrics){for(Re=0;Re<de.length;Re++)hr(de[Re],Ie=[],Fe,!1),he.push(Xt(ye,"LineString",Ie,H.properties));return}Ur(de,Ie,Fe,!1)}else if(me==="Polygon")Ur(de,Ie,Fe,!0);else{if(me!=="MultiPolygon"){if(me==="GeometryCollection"){for(Re=0;Re<H.geometry.geometries.length;Re++)gr(he,{id:ye,geometry:H.geometry.geometries[Re],properties:H.properties},Z,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Re=0;Re<de.length;Re++){var Ye=[];Ur(de[Re],Ye,Fe,!0),Ie.push(Ye)}}he.push(Xt(ye,me,Ie,H.properties))}}function Lt(he,H){H.push(Xe(he[0])),H.push(kr(he[1])),H.push(0)}function hr(he,H,Z,ie){for(var de,me,Fe=0,Ie=0;Ie<he.length;Ie++){var ye=Xe(he[Ie][0]),Re=kr(he[Ie][1]);H.push(ye),H.push(Re),H.push(0),Ie>0&&(Fe+=ie?(de*Re-ye*me)/2:Math.sqrt(Math.pow(ye-de,2)+Math.pow(Re-me,2))),de=ye,me=Re}var Ye=H.length-3;H[2]=1,Zt(H,0,Ye,Z),H[Ye+2]=1,H.size=Math.abs(Fe),H.start=0,H.end=H.size}function Ur(he,H,Z,ie){for(var de=0;de<he.length;de++){var me=[];hr(he[de],me,Z,ie),H.push(me)}}function Xe(he){return he/360+.5}function kr(he){var H=Math.sin(he*Math.PI/180),Z=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return Z<0?0:Z>1?1:Z}function Rn(he,H,Z,ie,de,me,Fe,Ie){if(ie/=H,me>=(Z/=H)&&Fe<ie)return he;if(Fe<Z||me>=ie)return null;for(var ye=[],Re=0;Re<he.length;Re++){var Ye=he[Re],Qe=Ye.geometry,j=Ye.type,re=de===0?Ye.minX:Ye.minY,ee=de===0?Ye.maxX:Ye.maxY;if(re>=Z&&ee<ie)ye.push(Ye);else if(!(ee<Z||re>=ie)){var J=[];if(j==="Point"||j==="MultiPoint")yr(Qe,J,Z,ie,de);else if(j==="LineString")nr(Qe,J,Z,ie,de,!1,Ie.lineMetrics);else if(j==="MultiLineString")za(Qe,J,Z,ie,de,!1);else if(j==="Polygon")za(Qe,J,Z,ie,de,!0);else if(j==="MultiPolygon")for(var ne=0;ne<Qe.length;ne++){var se=[];za(Qe[ne],se,Z,ie,de,!0),se.length&&J.push(se)}if(J.length){if(Ie.lineMetrics&&j==="LineString"){for(ne=0;ne<J.length;ne++)ye.push(Xt(Ye.id,j,J[ne],Ye.tags));continue}j!=="LineString"&&j!=="MultiLineString"||(J.length===1?(j="LineString",J=J[0]):j="MultiLineString"),j!=="Point"&&j!=="MultiPoint"||(j=J.length===3?"Point":"MultiPoint"),ye.push(Xt(Ye.id,j,J,Ye.tags))}}}return ye.length?ye:null}function yr(he,H,Z,ie,de){for(var me=0;me<he.length;me+=3){var Fe=he[me+de];Fe>=Z&&Fe<=ie&&(H.push(he[me]),H.push(he[me+1]),H.push(he[me+2]))}}function nr(he,H,Z,ie,de,me,Fe){for(var Ie,ye,Re=ri(he),Ye=de===0?Ji:Rs,Qe=he.start,j=0;j<he.length-3;j+=3){var re=he[j],ee=he[j+1],J=he[j+2],ne=he[j+3],se=he[j+4],Be=de===0?re:ee,Ze=de===0?ne:se,ze=!1;Fe&&(Ie=Math.sqrt(Math.pow(re-ne,2)+Math.pow(ee-se,2))),Be<Z?Ze>Z&&(ye=Ye(Re,re,ee,ne,se,Z),Fe&&(Re.start=Qe+Ie*ye)):Be>ie?Ze<ie&&(ye=Ye(Re,re,ee,ne,se,ie),Fe&&(Re.start=Qe+Ie*ye)):Di(Re,re,ee,J),Ze<Z&&Be>=Z&&(ye=Ye(Re,re,ee,ne,se,Z),ze=!0),Ze>ie&&Be<=ie&&(ye=Ye(Re,re,ee,ne,se,ie),ze=!0),!me&&ze&&(Fe&&(Re.end=Qe+Ie*ye),H.push(Re),Re=ri(he)),Fe&&(Qe+=Ie)}var Ne=he.length-3;re=he[Ne],ee=he[Ne+1],J=he[Ne+2],(Be=de===0?re:ee)>=Z&&Be<=ie&&Di(Re,re,ee,J),Ne=Re.length-3,me&&Ne>=3&&(Re[Ne]!==Re[0]||Re[Ne+1]!==Re[1])&&Di(Re,Re[0],Re[1],Re[2]),Re.length&&H.push(Re)}function ri(he){var H=[];return H.size=he.size,H.start=he.start,H.end=he.end,H}function za(he,H,Z,ie,de,me){for(var Fe=0;Fe<he.length;Fe++)nr(he[Fe],H,Z,ie,de,me,!1)}function Di(he,H,Z,ie){he.push(H),he.push(Z),he.push(ie)}function Ji(he,H,Z,ie,de,me){var Fe=(me-H)/(ie-H);return he.push(me),he.push(Z+(de-Z)*Fe),he.push(1),Fe}function Rs(he,H,Z,ie,de,me){var Fe=(me-Z)/(de-Z);return he.push(H+(ie-H)*Fe),he.push(me),he.push(1),Fe}function pa(he,H){for(var Z=[],ie=0;ie<he.length;ie++){var de,me=he[ie],Fe=me.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")de=Oa(me.geometry,H);else if(Fe==="MultiLineString"||Fe==="Polygon"){de=[];for(var Ie=0;Ie<me.geometry.length;Ie++)de.push(Oa(me.geometry[Ie],H))}else if(Fe==="MultiPolygon")for(de=[],Ie=0;Ie<me.geometry.length;Ie++){for(var ye=[],Re=0;Re<me.geometry[Ie].length;Re++)ye.push(Oa(me.geometry[Ie][Re],H));de.push(ye)}Z.push(Xt(me.id,Fe,de,me.tags))}return Z}function Oa(he,H){var Z=[];Z.size=he.size,he.start!==void 0&&(Z.start=he.start,Z.end=he.end);for(var ie=0;ie<he.length;ie+=3)Z.push(he[ie]+H,he[ie+1],he[ie+2]);return Z}function xt(he,H){if(he.transformed)return he;var Z,ie,de,me=1<<he.z,Fe=he.x,Ie=he.y;for(Z=0;Z<he.features.length;Z++){var ye=he.features[Z],Re=ye.geometry,Ye=ye.type;if(ye.geometry=[],Ye===1)for(ie=0;ie<Re.length;ie+=2)ye.geometry.push(Li(Re[ie],Re[ie+1],H,me,Fe,Ie));else for(ie=0;ie<Re.length;ie++){var Qe=[];for(de=0;de<Re[ie].length;de+=2)Qe.push(Li(Re[ie][de],Re[ie][de+1],H,me,Fe,Ie));ye.geometry.push(Qe)}}return he.transformed=!0,he}function Li(he,H,Z,ie,de,me){return[Math.round(Z*(he*ie-de)),Math.round(Z*(H*ie-me))]}function Fr(he,H,Z,ie,de){for(var me=H===de.maxZoom?0:de.tolerance/((1<<H)*de.extent),Fe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Z,y:ie,z:H,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ie=0;Ie<he.length;Ie++){Fe.numFeatures++,Na(Fe,he[Ie],me,de);var ye=he[Ie].minX,Re=he[Ie].minY,Ye=he[Ie].maxX,Qe=he[Ie].maxY;ye<Fe.minX&&(Fe.minX=ye),Re<Fe.minY&&(Fe.minY=Re),Ye>Fe.maxX&&(Fe.maxX=Ye),Qe>Fe.maxY&&(Fe.maxY=Qe)}return Fe}function Na(he,H,Z,ie){var de=H.geometry,me=H.type,Fe=[];if(me==="Point"||me==="MultiPoint")for(var Ie=0;Ie<de.length;Ie+=3)Fe.push(de[Ie]),Fe.push(de[Ie+1]),he.numPoints++,he.numSimplified++;else if(me==="LineString")ma(Fe,de,he,Z,!1,!1);else if(me==="MultiLineString"||me==="Polygon")for(Ie=0;Ie<de.length;Ie++)ma(Fe,de[Ie],he,Z,me==="Polygon",Ie===0);else if(me==="MultiPolygon")for(var ye=0;ye<de.length;ye++){var Re=de[ye];for(Ie=0;Ie<Re.length;Ie++)ma(Fe,Re[Ie],he,Z,!0,Ie===0)}if(Fe.length){var Ye=H.tags||null;if(me==="LineString"&&ie.lineMetrics){for(var Qe in Ye={},H.tags)Ye[Qe]=H.tags[Qe];Ye.mapbox_clip_start=de.start/de.size,Ye.mapbox_clip_end=de.end/de.size}var j={geometry:Fe,type:me==="Polygon"||me==="MultiPolygon"?3:me==="LineString"||me==="MultiLineString"?2:1,tags:Ye};H.id!==null&&(j.id=H.id),he.features.push(j)}}function ma(he,H,Z,ie,de,me){var Fe=ie*ie;if(ie>0&&H.size<(de?Fe:ie))Z.numPoints+=H.length/3;else{for(var Ie=[],ye=0;ye<H.length;ye+=3)(ie===0||H[ye+2]>Fe)&&(Z.numSimplified++,Ie.push(H[ye]),Ie.push(H[ye+1])),Z.numPoints++;de&&function(Re,Ye){for(var Qe=0,j=0,re=Re.length,ee=re-2;j<re;ee=j,j+=2)Qe+=(Re[j]-Re[ee])*(Re[j+1]+Re[ee+1]);if(Qe>0===Ye)for(j=0,re=Re.length;j<re/2;j+=2){var J=Re[j],ne=Re[j+1];Re[j]=Re[re-2-j],Re[j+1]=Re[re-1-j],Re[re-2-j]=J,Re[re-1-j]=ne}}(Ie,me),he.push(Ie)}}function wt(he,H){var Z=(H=this.options=function(de,me){for(var Fe in me)de[Fe]=me[Fe];return de}(Object.create(this.options),H)).debug;if(Z&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");var ie=function(de,me){var Fe=[];if(de.type==="FeatureCollection")for(var Ie=0;Ie<de.features.length;Ie++)gr(Fe,de.features[Ie],me,Ie);else gr(Fe,de.type==="Feature"?de:{geometry:de},me);return Fe}(he,H);this.tiles={},this.tileCoords=[],Z&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ie=function(de,me){var Fe=me.buffer/me.extent,Ie=de,ye=Rn(de,1,-1-Fe,Fe,0,-1,2,me),Re=Rn(de,1,1-Fe,2+Fe,0,-1,2,me);return(ye||Re)&&(Ie=Rn(de,1,-Fe,1+Fe,0,-1,2,me)||[],ye&&(Ie=pa(ye,1).concat(Ie)),Re&&(Ie=Ie.concat(pa(Re,-1)))),Ie}(ie,H),ie.length&&this.splitTile(ie,0,0,0),Z&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tr(he,H,Z){return 32*((1<<he)*Z+H)+he}function Kt(he,H){return H?he.properties[H]:he.id}function Dn(he,H){if(he==null)return!0;if(he.type==="Feature")return Kt(he,H)!=null;if(he.type==="FeatureCollection"){const Z=new Set;for(const ie of he.features){const de=Kt(ie,H);if(de==null||Z.has(de))return!1;Z.add(de)}return!0}return!1}function Qi(he,H){const Z=new Map;if(he!=null)if(he.type==="Feature")Z.set(Kt(he,H),he);else for(const ie of he.features)Z.set(Kt(ie,H),ie);return Z}wt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},wt.prototype.splitTile=function(he,H,Z,ie,de,me,Fe){for(var Ie=[he,H,Z,ie],ye=this.options,Re=ye.debug;Ie.length;){ie=Ie.pop(),Z=Ie.pop(),H=Ie.pop(),he=Ie.pop();var Ye=1<<H,Qe=tr(H,Z,ie),j=this.tiles[Qe];if(!j&&(Re>1&&console.time("creation"),j=this.tiles[Qe]=Fr(he,H,Z,ie,ye),this.tileCoords.push({z:H,x:Z,y:ie}),Re)){Re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,Z,ie,j.numFeatures,j.numPoints,j.numSimplified),console.timeEnd("creation"));var re="z"+H;this.stats[re]=(this.stats[re]||0)+1,this.total++}if(j.source=he,de){if(H===ye.maxZoom||H===de)continue;var ee=1<<de-H;if(Z!==Math.floor(me/ee)||ie!==Math.floor(Fe/ee))continue}else if(H===ye.indexMaxZoom||j.numPoints<=ye.indexMaxPoints)continue;if(j.source=null,he.length!==0){Re>1&&console.time("clipping");var J,ne,se,Be,Ze,ze,Ne=.5*ye.buffer/ye.extent,Ge=.5-Ne,it=.5+Ne,mt=1+Ne;J=ne=se=Be=null,Ze=Rn(he,Ye,Z-Ne,Z+it,0,j.minX,j.maxX,ye),ze=Rn(he,Ye,Z+Ge,Z+mt,0,j.minX,j.maxX,ye),he=null,Ze&&(J=Rn(Ze,Ye,ie-Ne,ie+it,1,j.minY,j.maxY,ye),ne=Rn(Ze,Ye,ie+Ge,ie+mt,1,j.minY,j.maxY,ye),Ze=null),ze&&(se=Rn(ze,Ye,ie-Ne,ie+it,1,j.minY,j.maxY,ye),Be=Rn(ze,Ye,ie+Ge,ie+mt,1,j.minY,j.maxY,ye),ze=null),Re>1&&console.timeEnd("clipping"),Ie.push(J||[],H+1,2*Z,2*ie),Ie.push(ne||[],H+1,2*Z,2*ie+1),Ie.push(se||[],H+1,2*Z+1,2*ie),Ie.push(Be||[],H+1,2*Z+1,2*ie+1)}}},wt.prototype.getTile=function(he,H,Z){var ie=this.options,de=ie.extent,me=ie.debug;if(he<0||he>24)return null;var Fe=1<<he,Ie=tr(he,H=(H%Fe+Fe)%Fe,Z);if(this.tiles[Ie])return xt(this.tiles[Ie],de);me>1&&console.log("drilling down to z%d-%d-%d",he,H,Z);for(var ye,Re=he,Ye=H,Qe=Z;!ye&&Re>0;)Re--,Ye=Math.floor(Ye/2),Qe=Math.floor(Qe/2),ye=this.tiles[tr(Re,Ye,Qe)];return ye&&ye.source?(me>1&&console.log("found parent tile z%d-%d-%d",Re,Ye,Qe),me>1&&console.time("drilling down"),this.splitTile(ye.source,Re,Ye,Qe,he,H,Z),me>1&&console.timeEnd("drilling down"),this.tiles[Ie]?xt(this.tiles[Ie],de):null):null};class Qt extends R{constructor(H,Z,ie,de){super(H,Z,ie),this._dataUpdateable=new Map,this.loadGeoJSON=(me,Fe)=>{const{promoteId:Ie}=me;if(me.request)return l.f(me.request,(ye,Re,Ye,Qe)=>{this._dataUpdateable=Dn(Re,Ie)?Qi(Re,Ie):void 0,Fe(ye,Re,Ye,Qe)});if(typeof me.data=="string")try{const ye=JSON.parse(me.data);this._dataUpdateable=Dn(ye,Ie)?Qi(ye,Ie):void 0,Fe(null,ye)}catch{Fe(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`))}else me.dataDiff?this._dataUpdateable?(function(ye,Re,Ye){var Qe,j,re,ee;if(Re.removeAll&&ye.clear(),Re.remove)for(const J of Re.remove)ye.delete(J);if(Re.add)for(const J of Re.add){const ne=Kt(J,Ye);ne!=null&&ye.set(ne,J)}if(Re.update)for(const J of Re.update){let ne=ye.get(J.id);if(ne==null)continue;const se=!J.removeAllProperties&&(((Qe=J.removeProperties)===null||Qe===void 0?void 0:Qe.length)>0||((j=J.addOrUpdateProperties)===null||j===void 0?void 0:j.length)>0);if((J.newGeometry||J.removeAllProperties||se)&&(ne=Object.assign({},ne),ye.set(J.id,ne),se&&(ne.properties=Object.assign({},ne.properties))),J.newGeometry&&(ne.geometry=J.newGeometry),J.removeAllProperties)ne.properties={};else if(((re=J.removeProperties)===null||re===void 0?void 0:re.length)>0)for(const Be of J.removeProperties)Object.prototype.hasOwnProperty.call(ne.properties,Be)&&delete ne.properties[Be];if(((ee=J.addOrUpdateProperties)===null||ee===void 0?void 0:ee.length)>0)for(const{key:Be,value:Ze}of J.addOrUpdateProperties)ne.properties[Be]=Ze}}(this._dataUpdateable,me.dataDiff,Ie),Fe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Fe(new Error(`Cannot update existing geojson data in ${me.source}`)):Fe(new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,de&&(this.loadGeoJSON=de)}loadGeoJSONTile(H,Z){const ie=H.tileID.canonical;if(!this._geoJSONIndex)return Z(null,null);const de=this._geoJSONIndex.getTile(ie.z,ie.x,ie.y);if(!de)return Z(null,null);const me=new class{constructor(Ie){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=Ie.length,this._features=Ie}feature(Ie){return new class{constructor(ye){this._feature=ye,this.extent=l.N,this.type=ye.type,this.properties=ye.tags,"id"in ye&&!isNaN(ye.id)&&(this.id=parseInt(ye.id,10))}loadGeometry(){if(this._feature.type===1){const ye=[];for(const Re of this._feature.geometry)ye.push([new l.P(Re[0],Re[1])]);return ye}{const ye=[];for(const Re of this._feature.geometry){const Ye=[];for(const Qe of Re)Ye.push(new l.P(Qe[0],Qe[1]));ye.push(Ye)}return ye}}toGeoJSON(ye,Re,Ye){return N.call(this,ye,Re,Ye)}}(this._features[Ie])}}(de.features);let Fe=dt(me);Fe.byteOffset===0&&Fe.byteLength===Fe.buffer.byteLength||(Fe=new Uint8Array(Fe)),Z(null,{vectorTile:me,rawData:Fe.buffer})}loadData(H,Z){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const de=!!(H&&H.request&&H.request.collectResourceTiming)&&new l.bu(H.request);this._pendingCallback=Z,this._pendingRequest=this.loadGeoJSON(H,(me,Fe)=>{if(delete this._pendingCallback,delete this._pendingRequest,me||!Fe)return Z(me);if(typeof Fe!="object")return Z(new Error(`Input data given to '${H.source}' is not a valid GeoJSON object.`));{B(Fe,!0);try{if(H.filter){const ye=l.bC(H.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map(Ye=>`${Ye.key}: ${Ye.message}`).join(", "));Fe={type:"FeatureCollection",features:Fe.features.filter(Ye=>ye.value.evaluate({zoom:0},Ye))}}this._geoJSONIndex=H.cluster?new je(function({superclusterOptions:ye,clusterProperties:Re}){if(!Re||!ye)return ye;const Ye={},Qe={},j={accumulated:null,zoom:0},re={properties:null},ee=Object.keys(Re);for(const J of ee){const[ne,se]=Re[J],Be=l.bC(se),Ze=l.bC(typeof ne=="string"?[ne,["accumulated"],["get",J]]:ne);Ye[J]=Be.value,Qe[J]=Ze.value}return ye.map=J=>{re.properties=J;const ne={};for(const se of ee)ne[se]=Ye[se].evaluate(j,re);return ne},ye.reduce=(J,ne)=>{re.properties=ne;for(const se of ee)j.accumulated=J[se],J[se]=Qe[se].evaluate(j,re)},ye}(H)).load(Fe.features):function(ye,Re){return new wt(ye,Re)}(Fe,H.geojsonVtOptions)}catch(ye){return Z(ye)}this.loaded={};const Ie={};if(de){const ye=de.finish();ye&&(Ie.resourceTiming={},Ie.resourceTiming[H.source]=JSON.parse(JSON.stringify(ye)))}Z(null,Ie)}})}reloadTile(H,Z){const ie=this.loaded;return ie&&ie[H.uid]?super.reloadTile(H,Z):this.loadTile(H,Z)}removeSource(H,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Z()}getClusterExpansionZoom(H,Z){try{Z(null,this._geoJSONIndex.getClusterExpansionZoom(H.clusterId))}catch(ie){Z(ie)}}getClusterChildren(H,Z){try{Z(null,this._geoJSONIndex.getChildren(H.clusterId))}catch(ie){Z(ie)}}getClusterLeaves(H,Z){try{Z(null,this._geoJSONIndex.getLeaves(H.clusterId,H.limit,H.offset))}catch(ie){Z(ie)}}}class yi{constructor(H){this.self=H,this.actor=new l.C(H,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:R,geojson:Qt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Z,ie)=>{if(this.workerSourceTypes[Z])throw new Error(`Worker source with name "${Z}" already registered.`);this.workerSourceTypes[Z]=ie},this.self.registerRTLTextPlugin=Z=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=Z.applyArabicShaping,l.bD.processBidirectionalText=Z.processBidirectionalText,l.bD.processStyledBidirectionalText=Z.processStyledBidirectionalText}}setReferrer(H,Z){this.referrer=Z}setImages(H,Z,ie){this.availableImages[H]=Z;for(const de in this.workerSources[H]){const me=this.workerSources[H][de];for(const Fe in me)me[Fe].availableImages=Z}ie()}setLayers(H,Z,ie){this.getLayerIndex(H).replace(Z),ie()}updateLayers(H,Z,ie){this.getLayerIndex(H).update(Z.layers,Z.removedIds),ie()}loadTile(H,Z,ie){this.getWorkerSource(H,Z.type,Z.source).loadTile(Z,ie)}loadDEMTile(H,Z,ie){this.getDEMWorkerSource(H,Z.source).loadTile(Z,ie)}reloadTile(H,Z,ie){this.getWorkerSource(H,Z.type,Z.source).reloadTile(Z,ie)}abortTile(H,Z,ie){this.getWorkerSource(H,Z.type,Z.source).abortTile(Z,ie)}removeTile(H,Z,ie){this.getWorkerSource(H,Z.type,Z.source).removeTile(Z,ie)}removeDEMTile(H,Z){this.getDEMWorkerSource(H,Z.source).removeTile(Z)}removeSource(H,Z,ie){if(!this.workerSources[H]||!this.workerSources[H][Z.type]||!this.workerSources[H][Z.type][Z.source])return;const de=this.workerSources[H][Z.type][Z.source];delete this.workerSources[H][Z.type][Z.source],de.removeSource!==void 0?de.removeSource(Z,ie):ie()}loadWorkerSource(H,Z,ie){try{this.self.importScripts(Z.url),ie()}catch(de){ie(de.toString())}}syncRTLPluginState(H,Z,ie){try{l.bD.setState(Z);const de=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&de!=null){this.self.importScripts(de);const me=l.bD.isParsed();ie(me?void 0:new Error(`RTL Text Plugin failed to import scripts from ${de}`),me)}}catch(de){ie(de.toString())}}getAvailableImages(H){let Z=this.availableImages[H];return Z||(Z=[]),Z}getLayerIndex(H){let Z=this.layerIndexes[H];return Z||(Z=this.layerIndexes[H]=new b),Z}getWorkerSource(H,Z,ie){return this.workerSources[H]||(this.workerSources[H]={}),this.workerSources[H][Z]||(this.workerSources[H][Z]={}),this.workerSources[H][Z][ie]||(this.workerSources[H][Z][ie]=new this.workerSourceTypes[Z]({send:(de,me,Fe)=>{this.actor.send(de,me,Fe,H)}},this.getLayerIndex(H),this.getAvailableImages(H))),this.workerSources[H][Z][ie]}getDEMWorkerSource(H,Z){return this.demWorkerSources[H]||(this.demWorkerSources[H]={}),this.demWorkerSources[H][Z]||(this.demWorkerSources[H][Z]=new z),this.demWorkerSources[H][Z]}}return l.i()&&(self.worker=new yi(self)),yi}),h(["./shared"],function(l){var b="3.6.2";class w{static testProp(i){if(!w.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in w.docStyle)return i[u];return i[0]}static create(i,u,p){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),p&&p.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,u){i.style[w.transformProp]=u}static addEventListener(i,u,p,g={}){i.addEventListener(u,p,"passive"in g?g:g.capture)}static removeEventListener(i,u,p,g={}){i.removeEventListener(u,p,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,u){const p=i.getBoundingClientRect();return new l.P(u.clientX-p.left-i.clientLeft,u.clientY-p.top-i.clientTop)}static touchPos(i,u){const p=i.getBoundingClientRect(),g=[];for(let y=0;y<u.length;y++)g.push(new l.P(u[y].clientX-p.left-i.clientLeft,u[y].clientY-p.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const E={supported:!1,testSupport:function(_){!R&&k&&(z?D(_):P=_)}};let P,k,R=!1,z=!1;function D(_){const i=_.createTexture();_.bindTexture(_.TEXTURE_2D,i);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,k),_.isContextLost())return;E.supported=!0}catch{}_.deleteTexture(i),R=!0}var G,B;typeof document<"u"&&(k=document.createElement("img"),k.onload=function(){P&&D(P),P=null,z=!0},k.onerror=function(){R=!0,P=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let i,u,p,g;_.resetRequestQueue=()=>{i=[],u=0,p=0,g={}},_.addThrottleControl=L=>{const O=p++;return g[O]=L,O},_.removeThrottleControl=L=>{delete g[L],C()},_.getImage=(L,O,U=!0)=>{E.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*");const X={requestParameters:L,supportImageRefresh:U,callback:O,cancelled:!1,completed:!1,cancel:()=>{X.completed||X.cancelled||(X.cancelled=!0,X.innerRequest&&(X.innerRequest.cancel(),u--),C())}};return i.push(X),C(),X};const y=L=>{const{requestParameters:O,supportImageRefresh:U,callback:X}=L;return l.e(O,{type:"image"}),(U!==!1||l.i()||l.g(O.url)||O.headers&&!Object.keys(O.headers).reduce((ue,ce)=>ue&&ce==="accept",!0)?l.m:I)(O,(ue,ce,fe,oe)=>{T(L,X,ue,ce,fe,oe)})},T=(L,O,U,X,ue,ce)=>{U?O(U):X instanceof HTMLImageElement||l.a(X)?O(null,X):X&&((fe,oe)=>{typeof createImageBitmap=="function"?l.b(fe,oe):l.d(fe,oe)})(X,(fe,oe)=>{fe!=null?O(fe):oe!=null&&O(null,oe,{cacheControl:ue,expires:ce})}),L.cancelled||(L.completed=!0,u--,C())},C=()=>{const L=(()=>{const O=Object.keys(g);let U=!1;if(O.length>0){for(const X of O)if(U=g[X](),U)break}return U})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let O=u;O<L&&i.length>0;O++){const U=i.shift();if(U.cancelled){O--;continue}const X=y(U);u++,U.innerRequest=X}},I=(L,O)=>{const U=new Image,X=L.url;let ue=!1;const ce=L.credentials;return ce&&ce==="include"?U.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!l.s(X))&&(U.crossOrigin="anonymous"),U.fetchPriority="high",U.onload=()=>{O(null,U),U.onerror=U.onload=null},U.onerror=()=>{ue||O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),U.onerror=U.onload=null},U.src=X,{cancel:()=>{ue=!0,U.src=""}}}}(G||(G={})),G.resetRequestQueue(),function(_){_.Glyphs="Glyphs",_.Image="Image",_.Source="Source",_.SpriteImage="SpriteImage",_.SpriteJSON="SpriteJSON",_.Style="Style",_.Tile="Tile",_.Unknown="Unknown"}(B||(B={}));class N{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,p){const g=function(y){const T=y.match(W);if(!T)throw new Error(`Unable to parse URL "${y}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(i);return g.path+=`${u}${p}`,function(y){const T=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${T}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const W=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Q(_){var i=new l.A(3);return i[0]=_[0],i[1]=_[1],i[2]=_[2],i}var _e,Ce=function(_,i,u){return _[0]=i[0]-u[0],_[1]=i[1]-u[1],_[2]=i[2]-u[2],_};_e=new l.A(3),l.A!=Float32Array&&(_e[0]=0,_e[1]=0,_e[2]=0);var te=function(_){var i=_[0],u=_[1];return i*i+u*u};function we(_){const i=[];if(typeof _=="string")i.push({id:"default",url:_});else if(_&&_.length>0){const u=[];for(const{id:p,url:g}of _){const y=`${p}${g}`;u.indexOf(y)===-1&&(u.push(y),i.push({id:p,url:g}))}}return i}function Pe(_,i,u,p,g){if(p)return void _(p);if(g!==Object.values(i).length||g!==Object.values(u).length)return;const y={};for(const T in i){y[T]={};const C=l.h.getImageCanvasContext(u[T]),I=i[T];for(const L in I){const{width:O,height:U,x:X,y:ue,sdf:ce,pixelRatio:fe,stretchX:oe,stretchY:Me,content:Ve}=I[L];y[T][L]={data:null,pixelRatio:fe,sdf:ce,stretchX:oe,stretchY:Me,content:Ve,spriteData:{width:O,height:U,x:X,y:ue,context:C}}}}_(null,y)}(function(){var _=new l.A(2);l.A!=Float32Array&&(_[0]=0,_[1]=0)})();class ke{constructor(i,u,p,g){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,p){const{width:g,height:y}=i,T=!(this.size&&this.size[0]===g&&this.size[1]===y||p),{context:C}=this,{gl:I}=C;if(this.useMipmap=!!(u&&u.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!u||u.premultiply!==!1)),T)this.size=[g,y],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.a(i)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,i):I.texImage2D(I.TEXTURE_2D,0,this.format,g,y,0,this.format,I.UNSIGNED_BYTE,i.data);else{const{x:L,y:O}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.a(i)?I.texSubImage2D(I.TEXTURE_2D,0,L,O,I.RGBA,I.UNSIGNED_BYTE,i):I.texSubImage2D(I.TEXTURE_2D,0,L,O,g,y,I.RGBA,I.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(i,u,p){const{context:g}=this,{gl:y}=g;y.bindTexture(y.TEXTURE_2D,this.texture),p!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=y.LINEAR),i!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,p||i),this.filter=i),u!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,u),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function $e(_){const{userImage:i}=_;return!!(i&&i.render&&i.render())&&(_.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ue extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:p}of this.requestors)this._notify(u,p);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new l.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let p=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(const g of i){if(g[0]<p||g[1]<g[0]||u<g[1])return!1;p=g[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const p=u.spriteData,g=p&&p.width||u.data.width,y=p&&p.height||u.data.height;return!(i[0]<0||g<i[0]||i[1]<0||y<i[1]||i[2]<0||g<i[2]||i[3]<0||y<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,p=!0){const g=this.getImage(i);if(p&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let p=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const p={};for(const g of i){let y=this.getImage(g);y||(this.fire(new l.k("styleimagemissing",{id:g})),y=this.getImage(g)),y?p[g]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:l.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,p)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],p=this.getImage(i);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},y=new l.I(g,p);this.patterns[i]={bin:g,position:y}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ke(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const y in this.patterns)i.push(this.patterns[y].bin);const{w:u,h:p}=l.p(i),g=this.atlasImage;g.resize({width:u||1,height:p||1});for(const y in this.patterns){const{bin:T}=this.patterns[y],C=T.x+1,I=T.y+1,L=this.getImage(y).data,O=L.width,U=L.height;l.R.copy(L,g,{x:0,y:0},{x:C,y:I},{width:O,height:U}),l.R.copy(L,g,{x:0,y:U-1},{x:C,y:I-1},{width:O,height:1}),l.R.copy(L,g,{x:0,y:0},{x:C,y:I+U},{width:O,height:1}),l.R.copy(L,g,{x:O-1,y:0},{x:C-1,y:I},{width:1,height:U}),l.R.copy(L,g,{x:0,y:0},{x:C+O,y:I},{width:1,height:U})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||l.w(`Image with ID: "${u}" was not found`),$e(p)&&this.updateImage(u,p)}}}const at=1e20;function yt(_,i,u,p,g,y,T,C,I){for(let L=i;L<i+p;L++)gt(_,u*y+L,y,g,T,C,I);for(let L=u;L<u+g;L++)gt(_,L*y+i,1,p,T,C,I)}function gt(_,i,u,p,g,y,T){y[0]=0,T[0]=-at,T[1]=at,g[0]=_[i];for(let C=1,I=0,L=0;C<p;C++){g[C]=_[i+C*u];const O=C*C;do{const U=y[I];L=(g[C]-g[U]+O-U*U)/(C-U)/2}while(L<=T[I]&&--I>-1);I++,y[I]=C,T[I]=L,T[I+1]=at}for(let C=0,I=0;C<p;C++){for(;T[I+1]<C;)I++;const L=y[I],O=C-L;_[i+C*u]=g[L]+O*O}}class nt{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const p=[];for(const g in i)for(const y of i[g])p.push({stack:g,id:y});l.o(p,({stack:g,id:y},T)=>{let C=this.entries[g];C||(C=this.entries[g]={glyphs:{},requests:{},ranges:{}});let I=C.glyphs[y];if(I!==void 0)return void T(null,{stack:g,id:y,glyph:I});if(I=this._tinySDF(C,g,y),I)return C.glyphs[y]=I,void T(null,{stack:g,id:y,glyph:I});const L=Math.floor(y/256);if(256*L>65535)return void T(new Error("glyphs > 65535 not supported"));if(C.ranges[L])return void T(null,{stack:g,id:y,glyph:I});if(!this.url)return void T(new Error("glyphsUrl is not set"));let O=C.requests[L];O||(O=C.requests[L]=[],nt.loadGlyphRange(g,L,this.url,this.requestManager,(U,X)=>{if(X){for(const ue in X)this._doesCharSupportLocalGlyph(+ue)||(C.glyphs[+ue]=X[+ue]);C.ranges[L]=!0}for(const ue of O)ue(U,X);delete C.requests[L]})),O.push((U,X)=>{U?T(U):X&&T(null,{stack:g,id:y,glyph:X[y]||null})})},(g,y)=>{if(g)u(g);else if(y){const T={};for(const{stack:C,id:I,glyph:L}of y)(T[C]||(T[C]={}))[I]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics};u(null,T)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](i)||l.u["Hangul Syllables"](i)||l.u.Hiragana(i)||l.u.Katakana(i))}_tinySDF(i,u,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let y=i.tinySDF;if(!y){let C="400";/bold/i.test(u)?C="900":/medium/i.test(u)?C="500":/light/i.test(u)&&(C="200"),y=i.tinySDF=new nt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:C})}const T=y.draw(String.fromCharCode(p));return{id:p,bitmap:new l.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}nt.loadGlyphRange=function(_,i,u,p,g){const y=256*i,T=y+255,C=p.transformRequest(u.replace("{fontstack}",_).replace("{range}",`${y}-${T}`),B.Glyphs);l.l(C,(I,L)=>{if(I)g(I);else if(L){const O={};for(const U of l.n(L))O[U.id]=U;g(null,O)}})},nt.TinySDF=class{constructor({fontSize:_=24,buffer:i=3,radius:u=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:y="normal",fontStyle:T="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=u;const C=this.size=_+4*i,I=this._createCanvas(C),L=this.ctx=I.getContext("2d",{willReadFrequently:!0});L.font=`${T} ${y} ${_}px ${g}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(_){const i=document.createElement("canvas");return i.width=i.height=_,i}draw(_){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:y}=this.ctx.measureText(_),T=Math.ceil(u),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-g))),I=Math.min(this.size-this.buffer,T+Math.ceil(p)),L=C+2*this.buffer,O=I+2*this.buffer,U=Math.max(L*O,0),X=new Uint8ClampedArray(U),ue={data:X,width:L,height:O,glyphWidth:C,glyphHeight:I,glyphTop:T,glyphLeft:0,glyphAdvance:i};if(C===0||I===0)return ue;const{ctx:ce,buffer:fe,gridInner:oe,gridOuter:Me}=this;ce.clearRect(fe,fe,C,I),ce.fillText(_,fe,fe+T);const Ve=ce.getImageData(fe,fe,C,I);Me.fill(at,0,U),oe.fill(0,0,U);for(let ge=0;ge<I;ge++)for(let De=0;De<C;De++){const He=Ve.data[4*(ge*C+De)+3]/255;if(He===0)continue;const qe=(ge+fe)*L+De+fe;if(He===1)Me[qe]=0,oe[qe]=at;else{const tt=.5-He;Me[qe]=tt>0?tt*tt:0,oe[qe]=tt<0?tt*tt:0}}yt(Me,0,0,L,O,L,this.f,this.v,this.z),yt(oe,fe,fe,C,I,L,this.f,this.v,this.z);for(let ge=0;ge<U;ge++){const De=Math.sqrt(Me[ge])-Math.sqrt(oe[ge]);X[ge]=Math.round(255-255*(De/this.radius+this.cutoff))}return ue}};class Rt{constructor(){this.specification=l.v.light.position}possiblyEvaluate(i,u){return l.z(i.expression.evaluate(u))}interpolate(i,u,p){return{x:l.B.number(i.x,u.x,p),y:l.B.number(i.y,u.y,p),z:l.B.number(i.z,u.z,p)}}}let Ke;class dt extends l.E{constructor(i){super(),Ke=Ke||new l.r({anchor:new l.D(l.v.light.anchor),position:new Rt,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Ke),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(l.t,i,u))for(const p in i){const g=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&l.x(this,i.call(l.y,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class Dt{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const p=i.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,u)),this.dashEntry[p]}getDashRanges(i,u,p){const g=[];let y=i.length%2==1?-i[i.length-1]*p:0,T=i[0]*p,C=!0;g.push({left:y,right:T,isDash:C,zeroLength:i[0]===0});let I=i[0];for(let L=1;L<i.length;L++){C=!C;const O=i[L];y=I*p,I+=O,T=I*p,g.push({left:y,right:T,isDash:C,zeroLength:O===0})}return g}addRoundDash(i,u,p){const g=u/2;for(let y=-p;y<=p;y++){const T=this.width*(this.nextRow+p+y);let C=0,I=i[C];for(let L=0;L<this.width;L++){L/I.right>1&&(I=i[++C]);const O=Math.abs(L-I.left),U=Math.abs(L-I.right),X=Math.min(O,U);let ue;const ce=y/p*(g+1);if(I.isDash){const fe=g-Math.abs(ce);ue=Math.sqrt(X*X+fe*fe)}else ue=g-Math.sqrt(X*X+ce*ce);this.data[T+L]=Math.max(0,Math.min(255,ue+128))}}}addRegularDash(i){for(let C=i.length-1;C>=0;--C){const I=i[C],L=i[C+1];I.zeroLength?i.splice(C,1):L&&L.isDash===I.isDash&&(L.left=I.left,i.splice(C,1))}const u=i[0],p=i[i.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const g=this.width*this.nextRow;let y=0,T=i[y];for(let C=0;C<this.width;C++){C/T.right>1&&(T=i[++y]);const I=Math.abs(C-T.left),L=Math.abs(C-T.right),O=Math.min(I,L);this.data[g+C]=Math.max(0,Math.min(255,(T.isDash?O:-O)+128))}}addDash(i,u){const p=u?7:0,g=2*p+1;if(this.nextRow+g>this.height)return l.w("LineAtlas out of space"),null;let y=0;for(let C=0;C<i.length;C++)y+=i[C];if(y!==0){const C=this.width/y,I=this.getDashRanges(i,this.width,C);u?this.addRoundDash(I,C,p):this.addRegularDash(I)}const T={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:y};return this.nextRow+=g,this.dirty=!0,T}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class jt{constructor(i,u,p){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let y=0;y<g.length;y++){const T=new l.C(g[y],u,p);T.name=`Worker ${y}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,p){l.o(this.actors,(g,y)=>{g.send(i,u,y)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function xe(_,i,u){const p=function(g,y){if(g)return u(g);if(y){const T=l.F(l.e(y,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);y.vector_layers&&(T.vectorLayers=y.vector_layers,T.vectorLayerIds=T.vectorLayers.map(C=>C.id)),u(null,T)}};return _.url?l.f(i.transformRequest(_.url,B.Source),p):l.h.frame(()=>p(null,_))}class Te{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof l.L?new l.L(i.lng,i.lat):l.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof l.L?new l.L(i.lng,i.lat):l.L.convert(i),this}extend(i){const u=this._sw,p=this._ne;let g,y;if(i instanceof l.L)g=i,y=i;else{if(!(i instanceof Te))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Te.convert(i)):this.extend(l.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(l.L.convert(i)):this;if(g=i._sw,y=i._ne,!g||!y)return this}return u||p?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),p.lng=Math.max(y.lng,p.lng),p.lat=Math.max(y.lat,p.lat)):(this._sw=new l.L(g.lng,g.lat),this._ne=new l.L(y.lng,y.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:p}=l.L.convert(i);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(i){return i instanceof Te?i:i&&new Te(i)}static fromLngLat(i,u=0){const p=360*u/40075017,g=p/Math.cos(Math.PI/180*i.lat);return new Te(new l.L(i.lng-g,i.lat-p),new l.L(i.lng+g,i.lat+p))}}class be{constructor(i,u,p){this.bounds=Te.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),p=Math.floor(l.G(this.bounds.getWest())*u),g=Math.floor(l.H(this.bounds.getNorth())*u),y=Math.ceil(l.G(this.bounds.getEast())*u),T=Math.ceil(l.H(this.bounds.getSouth())*u);return i.x>=p&&i.x<y&&i.y>=g&&i.y<T}}class Ee extends l.E{constructor(i,u,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=xe(this._options,this.map._requestManager,(y,T)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),y?this.fire(new l.j(y)):T&&(l.e(this,T),T.bounds&&(this.tileBounds=new be(T.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,B.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function y(T,C){return delete i.request,i.aborted?u(null):T&&T.status!==404?u(T):(C&&C.resourceTiming&&(i.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&i.setExpiryData(C),i.loadVectorData(C,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,y.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,y.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class je extends l.E{constructor(i,u,p,g){super(),this.id=i,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=xe(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new l.j(i)):u&&(l.e(this,u),u.bounds&&(this.tileBounds=new be(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return l.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=G.getImage(this.map._requestManager.transformRequest(p,B.Tile),(g,y,T)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(y){this.map._refreshExpiredTiles&&T&&i.setExpiryData(T);const C=this.map.painter.context,I=C.gl;i.texture=this.map.painter.getTileTexture(y.width),i.texture?i.texture.update(y,{useMipmap:!0}):(i.texture=new ke(C,y,I.RGBA,{useMipmap:!0}),i.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),C.extTextureFilterAnisotropic&&I.texParameterf(I.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class Je extends je{constructor(i,u,p,g){super(i,u,p,g),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,B.Tile);function y(T,C){T&&(i.state="errored",u(T)),C&&(i.dem=C,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=G.getImage(g,(T,C,I)=>l._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(T)i.state="errored",u(T);else if(C){this.map._refreshExpiredTiles&&i.setExpiryData(I);const L=l.a(C)&&l.J()?C:yield function(U){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const X=U.width+2,ue=U.height+2;try{return new l.R({width:X,height:ue},yield l.M(U,-1,-1,X,ue))}catch{}}return l.h.getImageData(U,1)})}(C),O={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:L,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",O,y))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,p=Math.pow(2,u.z),g=(u.x-1+p)%p,y=u.x===0?i.wrap-1:i.wrap,T=(u.x+1+p)%p,C=u.x+1===p?i.wrap+1:i.wrap,I={};return I[new l.O(i.overscaledZ,y,u.z,g,u.y).key]={backfilled:!1},I[new l.O(i.overscaledZ,C,u.z,T,u.y).key]={backfilled:!1},u.y>0&&(I[new l.O(i.overscaledZ,y,u.z,g,u.y-1).key]={backfilled:!1},I[new l.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},I[new l.O(i.overscaledZ,C,u.z,T,u.y-1).key]={backfilled:!1}),u.y+1<p&&(I[new l.O(i.overscaledZ,y,u.z,g,u.y+1).key]={backfilled:!1},I[new l.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},I[new l.O(i.overscaledZ,C,u.z,T,u.y+1).key]={backfilled:!1}),I}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class lt extends l.E{constructor(i,u,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const y=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*y,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*y,extent:l.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.N,radius:(u.clusterRadius||50)*y,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:p},g),this}_updateWorkerData(i){const u=l.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),B.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let y=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(y=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new l.j(p));const T={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&l.e(T,{resourceTiming:y}),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,g,(y,T)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):y?u(y):(i.loadVectorData(T,this.map.painter,p==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var ft=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ot extends l.E{constructor(i,u,p,g){super(),this.load=(y,T)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=G.getImage(this.map._requestManager.transformRequest(this.url,B.Image),(C,I)=>{this._request=null,this._loaded=!0,C?this.fire(new l.j(C)):I&&(this.image=I,y&&(this.coordinates=y),T&&T(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const y=this.map.painter.context,T=y.gl;this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ke(y,this.image,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let C=!1;for(const I in this.tiles){const L=this.tiles[I];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,C=!0)}C&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(l.U.fromLngLat);this.tileID=function(g){let y=1/0,T=1/0,C=-1/0,I=-1/0;for(const X of g)y=Math.min(y,X.x),T=Math.min(T,X.y),C=Math.max(C,X.x),I=Math.max(I,X.y);const L=Math.max(C-y,I-T),O=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),U=Math.pow(2,O);return new l.W(O,Math.floor((y+C)/2*U),Math.floor((T+I)/2*U))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,l.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,l.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class er extends ot{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!1;const y=this.options;this.urls=[];for(const T of y.urls)this.urls.push(this.map._requestManager.transformRequest(T,B.Source).url);l.X(this.urls,(T,C)=>{this._loaded=!0,T?this.fire(new l.j(T)):C&&(this.video=C,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const y=this.map.painter.context,T=y.gl;this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE),T.texSubImage2D(T.TEXTURE_2D,0,0,0,T.RGBA,T.UNSIGNED_BYTE,this.video)):(this.texture=new ke(y,this.video,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let C=!1;for(const I in this.tiles){const L=this.tiles[I];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,C=!0)}C&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Zt extends ot{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const T=this.map.painter.context,C=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(y||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ke(T,this.canvas,C.RGBA,{premultiply:!0});let I=!1;for(const L in this.tiles){const O=this.tiles[L];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,I=!0)}I&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(T=>typeof T!="number"))||this.fire(new l.j(new l.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Yt={},Xt=_=>{switch(_){case"geojson":return lt;case"image":return ot;case"raster":return je;case"raster-dem":return Je;case"vector":return Ee;case"video":return er;case"canvas":return Zt}return Yt[_]};function Gr(_,i){const u=l.Z();return l.$(u,u,[1,1,0]),l.a0(u,u,[.5*_.width,.5*_.height,1]),l.a1(u,u,_.calculatePosMatrix(i.toUnwrapped()))}function gr(_,i,u,p,g,y){const T=function(U,X,ue){if(U)for(const ce of U){const fe=X[ce];if(fe&&fe.source===ue&&fe.type==="fill-extrusion")return!0}else for(const ce in X){const fe=X[ce];if(fe.source===ue&&fe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,_.id),C=y.maxPitchScaleFactor(),I=_.tilesIn(p,C,T);I.sort(Lt);const L=[];for(const U of I)L.push({wrappedTileID:U.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(i,u,_._state,U.queryGeometry,U.cameraQueryGeometry,U.scale,g,y,C,Gr(_.transform,U.tileID))});const O=function(U){const X={},ue={};for(const ce of U){const fe=ce.queryResults,oe=ce.wrappedTileID,Me=ue[oe]=ue[oe]||{};for(const Ve in fe){const ge=fe[Ve],De=Me[Ve]=Me[Ve]||{},He=X[Ve]=X[Ve]||[];for(const qe of ge)De[qe.featureIndex]||(De[qe.featureIndex]=!0,He.push(qe))}}return X}(L);for(const U in O)O[U].forEach(X=>{const ue=X.feature,ce=_.getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=ce});return O}function Lt(_,i){const u=_.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}class hr{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=l.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,y){const T={};if(!y)return T;for(const C of g){const I=C.layerIds.map(L=>y.getLayer(L)).filter(Boolean);if(I.length!==0){C.layers=I,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(L=>I.filter(O=>O.id===L)[0]));for(const L of I)T[L.id]=C}}return T}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const y=this.buckets[g];if(y instanceof l.a4){if(this.hasSymbolBuckets=!0,!p)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const y=this.buckets[g];if(y instanceof l.a4&&y.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const g in this.buckets){const y=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(y))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ke(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ke(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,p,g,y,T,C,I,L,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:y,scale:T,tileSize:this.tileSize,pixelPosMatrix:O,transform:I,params:C,queryPadding:this.queryPadding*L},i,u,p):{}}querySourceFeatures(i,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),y=u&&u.sourceLayer?u.sourceLayer:"",T=g._geojsonTileLayer||g[y];if(!T)return;const C=l.a6(u&&u.filter),{z:I,x:L,y:O}=this.tileID.canonical,U={z:I,x:L,y:O};for(let X=0;X<T.length;X++){const ue=T.feature(X);if(C.needGeometry){const oe=l.a7(ue,!0);if(!C.filter(new l.a8(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!C.filter(new l.a8(this.tileID.overscaledZ),ue))continue;const ce=p.getId(ue,y),fe=new l.a9(ue,I,L,O,ce);fe.tile=U,i.push(fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const p=l.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const y=this.expirationTime-u;y?this.expirationTime=p+Math.max(y,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const y=this.buckets[g],T=y.layers[0].sourceLayer||"_geojsonTileLayer",C=p[T],I=i[T];if(!C||!I||Object.keys(I).length===0)continue;y.update(I,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const L=u&&u.style&&u.style.getLayer(g);L&&(this.queryPadding=Math.max(this.queryPadding,L.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=l.h.now()+i}setDependencies(i,u){const p={};for(const g of u)p[g]=!0;this.dependencies[i]=p}hasDependency(i,u){for(const p of i){const g=this.dependencies[p];if(g){for(const y of u)if(g[y])return!0}}return!1}}class Ur{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const y={value:u,timeout:void 0};if(p!==void 0&&(y.timeout=setTimeout(()=>{this.remove(i,y)},p)),this.data[g].push(y),this.order.push(g),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const p=i.wrapped().key,g=u===void 0?0:this.data[p].indexOf(u),y=this.data[p][g];return this.data[p].splice(g,1),y.timeout&&clearTimeout(y.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(y.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const p in this.data)for(const g of this.data[p])i(g.value)||u.push(g);for(const p of u)this.remove(p.value.tileID,p)}}class Xe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},l.e(this.stateChanges[i][g],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const y in this.state[i])y!==g&&(this.deletedStates[i][y]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const y in this.state[i][g])p[y]||(this.deletedStates[i][g][y]=null)}else for(const y in p)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][y]===null&&delete this.deletedStates[i][g][y]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(p in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][p]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const p=String(u),g=l.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const y=this.deletedStates[i][u];if(y===null)return{};for(const T in y)delete g[T]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const y={};for(const T in this.stateChanges[g])this.state[g][T]||(this.state[g][T]={}),l.e(this.state[g][T],this.stateChanges[g][T]),y[T]=this.state[g][T];p[g]=y}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const y={};if(this.deletedStates[g]===null)for(const T in this.state[g])y[T]={},this.state[g][T]={};else for(const T in this.deletedStates[g]){if(this.deletedStates[g][T]===null)this.state[g][T]={};else for(const C of Object.keys(this.deletedStates[g][T]))delete this.state[g][T][C];y[T]=this.state[g][T]}p[g]=p[g]||{},l.e(p[g],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in i)i[g].setFeatureState(p,u)}}class kr extends l.E{constructor(i,u,p){super(),this.id=i,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,y,T,C)=>{const I=new(Xt(y.type))(g,y,T,C);if(I.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${I.id}`);return I})(i,u,p,this),this._tiles={},this._cache=new Ur(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Xe,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new l.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Rn).map(i=>i.key)}getRenderableIds(i){const u=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&u.push(this._tiles[p]);return i?u.sort((p,g)=>{const y=p.tileID,T=g.tileID,C=new l.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),I=new l.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-T.overscaledZ||I.y-C.y||I.x-C.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Rn).map(p=>p.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,i,u)))}_tileLoaded(i,u,p,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new l.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=l.h.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const y=u[g];if(i.neighboringTiles&&i.neighboringTiles[y]){const T=this.getTileByID(y);p(i,T),p(T,i)}}function p(g,y){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let T=y.tileID.canonical.x-g.tileID.canonical.x;const C=y.tileID.canonical.y-g.tileID.canonical.y,I=Math.pow(2,g.tileID.canonical.z),L=y.tileID.key;T===0&&C===0||Math.abs(C)>1||(Math.abs(T)>1&&(Math.abs(T+I)===1?T+=I:Math.abs(T-I)===1&&(T-=I)),y.dem&&g.dem&&(g.dem.backfillBorder(y.dem,T,C),g.neighboringTiles&&g.neighboringTiles[L]&&(g.neighboringTiles[L].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,g){for(const y in this._tiles){let T=this._tiles[y];if(g[y]||!T.hasData()||T.tileID.overscaledZ<=u||T.tileID.overscaledZ>p)continue;let C=T.tileID;for(;T&&T.tileID.overscaledZ>u+1;){const L=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[L.key],T&&T.hasData()&&(C=L)}let I=C;for(;I.overscaledZ>u;)if(I=I.scaledTo(I.overscaledZ-1),i[I.key]){g[C.key]=C;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){const g=i.scaledTo(p),y=this._getLoadedTile(g);if(y)return y}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(y)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const p={};for(const g in this._tiles){const y=this._tiles[g];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+u),p[y.tileID.key]=y}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new l.O(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(O=>this._source.hasTile(O)))):p=[];const g=i.coveringZoomLevel(this._source),y=Math.max(g-kr.maxOverzooming,this._source.minzoom),T=Math.max(g+kr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const O={};for(const U of p)if(U.canonical.z>this._source.minzoom){const X=U.scaledTo(U.canonical.z-1);O[X.key]=X;const ue=U.scaledTo(Math.max(this._source.minzoom,Math.min(U.canonical.z,5)));O[ue.key]=ue}p=p.concat(Object.values(O))}const C=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const I=this._updateRetainedTiles(p,g);if(yr(this._source.type)){const O={},U={},X=Object.keys(I),ue=l.h.now();for(const ce of X){const fe=I[ce],oe=this._tiles[ce];if(!oe||oe.fadeEndTime!==0&&oe.fadeEndTime<=ue)continue;const Me=this.findLoadedParent(fe,y);Me&&(this._addTile(Me.tileID),O[Me.tileID.key]=Me.tileID),U[ce]=fe}this._retainLoadedChildren(U,g,T,I);for(const ce in O)I[ce]||(this._coveredTiles[ce]=!0,I[ce]=O[ce]);if(u){const ce={},fe={};for(const oe of p)this._tiles[oe.key].hasData()?ce[oe.key]=oe:fe[oe.key]=oe;for(const oe in fe){const Me=fe[oe].children(this._source.maxzoom);this._tiles[Me[0].key]&&this._tiles[Me[1].key]&&this._tiles[Me[2].key]&&this._tiles[Me[3].key]&&(ce[Me[0].key]=I[Me[0].key]=Me[0],ce[Me[1].key]=I[Me[1].key]=Me[1],ce[Me[2].key]=I[Me[2].key]=Me[2],ce[Me[3].key]=I[Me[3].key]=Me[3],delete fe[oe])}for(const oe in fe){const Me=this.findLoadedParent(fe[oe],this._source.minzoom);if(Me){ce[Me.tileID.key]=I[Me.tileID.key]=Me.tileID;for(const Ve in ce)ce[Ve].isChildOf(Me.tileID)&&delete ce[Ve]}}for(const oe in this._tiles)ce[oe]||(this._coveredTiles[oe]=!0)}}for(const O in I)this._tiles[O].clearFadeHold();const L=l.ab(this._tiles,I);for(const O of L){const U=this._tiles[O];U.hasSymbolBuckets&&!U.holdingForFade()?U.setHoldDuration(this.map._fadeDuration):U.hasSymbolBuckets&&!U.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const p={},g={},y=Math.max(u-kr.maxOverzooming,this._source.minzoom),T=Math.max(u+kr.maxUnderzooming,this._source.minzoom),C={};for(const I of i){const L=this._addTile(I);p[I.key]=I,L.hasData()||u<this._source.maxzoom&&(C[I.key]=I)}this._retainLoadedChildren(C,u,T,p);for(const I of i){let L=this._tiles[I.key];if(L.hasData())continue;if(u+1>this._source.maxzoom){const U=I.children(this._source.maxzoom)[0],X=this.getTile(U);if(X&&X.hasData()){p[U.key]=U;continue}}else{const U=I.children(this._source.maxzoom);if(p[U[0].key]&&p[U[1].key]&&p[U[2].key]&&p[U[3].key])continue}let O=L.wasRequested();for(let U=I.overscaledZ-1;U>=y;--U){const X=I.scaledTo(U);if(g[X.key])break;if(g[X.key]=!0,L=this.getTile(X),!L&&O&&(L=this._addTile(X)),L){const ue=L.hasData();if((O||ue)&&(p[X.key]=X),O=L.wasRequested(),ue)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let p,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}u.push(g.key);const y=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(y),p)break;g=y}for(const y of u)this._loadedParentTiles[y]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const p=u;return u||(u=new hr(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,p||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,p){const g=[],y=this.transform;if(!y)return g;const T=p?y.getCameraQueryGeometry(i):i,C=i.map(ce=>y.pointCoordinate(ce,this.terrain)),I=T.map(ce=>y.pointCoordinate(ce,this.terrain)),L=this.getIds();let O=1/0,U=1/0,X=-1/0,ue=-1/0;for(const ce of I)O=Math.min(O,ce.x),U=Math.min(U,ce.y),X=Math.max(X,ce.x),ue=Math.max(ue,ce.y);for(let ce=0;ce<L.length;ce++){const fe=this._tiles[L[ce]];if(fe.holdingForFade())continue;const oe=fe.tileID,Me=Math.pow(2,y.zoom-fe.tileID.overscaledZ),Ve=u*fe.queryPadding*l.N/fe.tileSize/Me,ge=[oe.getTilePoint(new l.U(O,U)),oe.getTilePoint(new l.U(X,ue))];if(ge[0].x-Ve<l.N&&ge[0].y-Ve<l.N&&ge[1].x+Ve>=0&&ge[1].y+Ve>=0){const De=C.map(qe=>oe.getTilePoint(qe)),He=I.map(qe=>oe.getTilePoint(qe));g.push({tile:fe,tileID:oe,queryGeometry:De,cameraQueryGeometry:He,scale:Me})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(yr(this._source.type)){const i=l.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){const g=this._tiles[i];g&&g.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(const p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}}function Rn(_,i){const u=Math.abs(2*_.wrap)-+(_.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return _.overscaledZ-i.overscaledZ||p-u||i.canonical.y-_.canonical.y||i.canonical.x-_.canonical.x}function yr(_){return _==="raster"||_==="image"||_==="video"}kr.maxOverzooming=10,kr.maxUnderzooming=3;const nr="mapboxgl_preloaded_worker_pool";class ri{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<ri.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nr]}numActive(){return Object.keys(this.active).length}}const za=Math.floor(l.h.hardwareConcurrency/2);let Di;function Ji(){return Di||(Di=new ri),Di}ri.workerCount=l.ac(globalThis)?Math.max(Math.min(za,3),1):1;class Rs{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.ad(i,0,1);let u=1,p=this._distances[u];const g=i*this.paddedLength+this.padding;for(;p<g&&u<this._distances.length;)p=this._distances[++u];const y=u-1,T=this._distances[y],C=p-T,I=C>0?(g-T)/C:0;return this.points[y].mult(1-I).add(this.points[u].mult(I))}}function pa(_,i){let u=!0;return _==="always"||_!=="never"&&i!=="never"||(u=!1),u}class Oa{constructor(i,u,p){const g=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)g.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,g,y){this._forEachCell(u,p,g,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(y)}insertCircle(i,u,p,g){this._forEachCell(u-g,p-g,u+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(g)}_insertBoxCell(i,u,p,g,y,T){this.boxCells[y].push(T)}_insertCircleCell(i,u,p,g,y,T){this.circleCells[y].push(T)}_query(i,u,p,g,y,T,C){if(p<0||i>this.width||g<0||u>this.height)return[];const I=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=g){if(y)return[{key:null,x1:i,y1:u,x2:p,y2:g}];for(let L=0;L<this.boxKeys.length;L++)I.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const O=this.circles[3*L],U=this.circles[3*L+1],X=this.circles[3*L+2];I.push({key:this.circleKeys[L],x1:O-X,y1:U-X,x2:O+X,y2:U+X})}}else this._forEachCell(i,u,p,g,this._queryCell,I,{hitTest:y,overlapMode:T,seenUids:{box:{},circle:{}}},C);return I}query(i,u,p,g){return this._query(i,u,p,g,!1,null)}hitTest(i,u,p,g,y,T){return this._query(i,u,p,g,!0,y,T).length>0}hitTestCircle(i,u,p,g,y){const T=i-p,C=i+p,I=u-p,L=u+p;if(C<0||T>this.width||L<0||I>this.height)return!1;const O=[];return this._forEachCell(T,I,C,L,this._queryCellCircle,O,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},y),O.length>0}_queryCell(i,u,p,g,y,T,C,I){const{seenUids:L,hitTest:O,overlapMode:U}=C,X=this.boxCells[y];if(X!==null){const ce=this.bboxes;for(const fe of X)if(!L.box[fe]){L.box[fe]=!0;const oe=4*fe,Me=this.boxKeys[fe];if(i<=ce[oe+2]&&u<=ce[oe+3]&&p>=ce[oe+0]&&g>=ce[oe+1]&&(!I||I(Me))&&(!O||!pa(U,Me.overlapMode))&&(T.push({key:Me,x1:ce[oe],y1:ce[oe+1],x2:ce[oe+2],y2:ce[oe+3]}),O))return!0}}const ue=this.circleCells[y];if(ue!==null){const ce=this.circles;for(const fe of ue)if(!L.circle[fe]){L.circle[fe]=!0;const oe=3*fe,Me=this.circleKeys[fe];if(this._circleAndRectCollide(ce[oe],ce[oe+1],ce[oe+2],i,u,p,g)&&(!I||I(Me))&&(!O||!pa(U,Me.overlapMode))){const Ve=ce[oe],ge=ce[oe+1],De=ce[oe+2];if(T.push({key:Me,x1:Ve-De,y1:ge-De,x2:Ve+De,y2:ge+De}),O)return!0}}}return!1}_queryCellCircle(i,u,p,g,y,T,C,I){const{circle:L,seenUids:O,overlapMode:U}=C,X=this.boxCells[y];if(X!==null){const ce=this.bboxes;for(const fe of X)if(!O.box[fe]){O.box[fe]=!0;const oe=4*fe,Me=this.boxKeys[fe];if(this._circleAndRectCollide(L.x,L.y,L.radius,ce[oe+0],ce[oe+1],ce[oe+2],ce[oe+3])&&(!I||I(Me))&&!pa(U,Me.overlapMode))return T.push(!0),!0}}const ue=this.circleCells[y];if(ue!==null){const ce=this.circles;for(const fe of ue)if(!O.circle[fe]){O.circle[fe]=!0;const oe=3*fe,Me=this.circleKeys[fe];if(this._circlesCollide(ce[oe],ce[oe+1],ce[oe+2],L.x,L.y,L.radius)&&(!I||I(Me))&&!pa(U,Me.overlapMode))return T.push(!0),!0}}}_forEachCell(i,u,p,g,y,T,C,I){const L=this._convertToXCellCoord(i),O=this._convertToYCellCoord(u),U=this._convertToXCellCoord(p),X=this._convertToYCellCoord(g);for(let ue=L;ue<=U;ue++)for(let ce=O;ce<=X;ce++)if(y.call(this,i,u,p,g,this.xCellCount*ce+ue,T,C,I))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,g,y,T){const C=g-i,I=y-u,L=p+T;return L*L>C*C+I*I}_circleAndRectCollide(i,u,p,g,y,T,C){const I=(T-g)/2,L=Math.abs(i-(g+I));if(L>I+p)return!1;const O=(C-y)/2,U=Math.abs(u-(y+O));if(U>O+p)return!1;if(L<=I||U<=O)return!0;const X=L-I,ue=U-O;return X*X+ue*ue<=p*p}}function xt(_,i,u,p,g){const y=l.Z();return i?(l.a0(y,y,[1/g,1/g,1]),u||l.ae(y,y,p.angle)):l.a1(y,p.labelPlaneMatrix,_),y}function Li(_,i,u,p,g){if(i){const y=l.af(_);return l.a0(y,y,[g,g,1]),u||l.ae(y,y,-p.angle),y}return p.glCoordMatrix}function Fr(_,i,u){let p;u?(p=[_.x,_.y,u(_.x,_.y),1],l.ag(p,p,i)):(p=[_.x,_.y,0,1],de(p,p,i));const g=p[3];return{point:new l.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function Na(_,i){return .5+_/i*.5}function ma(_,i){const u=_[0]/_[3],p=_[1]/_[3];return u>=-i[0]&&u<=i[0]&&p>=-i[1]&&p<=i[1]}function wt(_,i,u,p,g,y,T,C,I,L){const O=p?_.textSizeData:_.iconSizeData,U=l.ah(O,u.transform.zoom),X=[256/u.width*2+1,256/u.height*2+1],ue=p?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;ue.clear();const ce=_.lineVertexArray,fe=p?_.text.placedSymbolArray:_.icon.placedSymbolArray,oe=u.transform.width/u.transform.height;let Me=!1;for(let Ve=0;Ve<fe.length;Ve++){const ge=fe.get(Ve);if(ge.hidden||ge.writingMode===l.ai.vertical&&!Me){ie(ge.numGlyphs,ue);continue}let De;if(Me=!1,L?(De=[ge.anchorX,ge.anchorY,L(ge.anchorX,ge.anchorY),1],l.ag(De,De,i)):(De=[ge.anchorX,ge.anchorY,0,1],de(De,De,i)),!ma(De,X)){ie(ge.numGlyphs,ue);continue}const He=Na(u.transform.cameraToCenterDistance,De[3]),qe=l.aj(O,U,ge),tt=T?qe/He:qe*He,ct=new l.P(ge.anchorX,ge.anchorY),st=Fr(ct,g,L).point,_t={projections:{},offsets:{}},Nt=Dn(ge,tt,!1,C,i,g,y,_.glyphOffsetArray,ce,ue,st,ct,_t,oe,I,L);Me=Nt.useVertical,(Nt.notEnoughRoom||Me||Nt.needsFlipping&&Dn(ge,tt,!0,C,i,g,y,_.glyphOffsetArray,ce,ue,st,ct,_t,oe,I,L).notEnoughRoom)&&ie(ge.numGlyphs,ue)}p?_.text.dynamicLayoutVertexBuffer.updateData(ue):_.icon.dynamicLayoutVertexBuffer.updateData(ue)}function tr(_,i,u,p,g,y,T,C,I,L,O,U,X){const ue=C.glyphStartIndex+C.numGlyphs,ce=C.lineStartIndex,fe=C.lineStartIndex+C.lineLength,oe=i.getoffsetX(C.glyphStartIndex),Me=i.getoffsetX(ue-1),Ve=H(_*oe,u,p,g,y,T,C.segment,ce,fe,I,L,O,U,X);if(!Ve)return null;const ge=H(_*Me,u,p,g,y,T,C.segment,ce,fe,I,L,O,U,X);return ge?{first:Ve,last:ge}:null}function Kt(_,i,u,p){return _===l.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*p?{useVertical:!0}:(_===l.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Dn(_,i,u,p,g,y,T,C,I,L,O,U,X,ue,ce,fe){const oe=i/24,Me=_.lineOffsetX*oe,Ve=_.lineOffsetY*oe;let ge;if(_.numGlyphs>1){const De=_.glyphStartIndex+_.numGlyphs,He=_.lineStartIndex,qe=_.lineStartIndex+_.lineLength,tt=tr(oe,C,Me,Ve,u,O,U,_,I,y,X,ce,fe);if(!tt)return{notEnoughRoom:!0};const ct=Fr(tt.first.point,T,fe).point,st=Fr(tt.last.point,T,fe).point;if(p&&!u){const _t=Kt(_.writingMode,ct,st,ue);if(_t)return _t}ge=[tt.first];for(let _t=_.glyphStartIndex+1;_t<De-1;_t++)ge.push(H(oe*C.getoffsetX(_t),Me,Ve,u,O,U,_.segment,He,qe,I,y,X,ce,fe));ge.push(tt.last)}else{if(p&&!u){const He=Fr(U,g,fe).point,qe=_.lineStartIndex+_.segment+1,tt=new l.P(I.getx(qe),I.gety(qe)),ct=Fr(tt,g,fe),st=ct.signedDistanceFromCamera>0?ct.point:Qi(U,tt,He,1,g,fe),_t=Kt(_.writingMode,He,st,ue);if(_t)return _t}const De=H(oe*C.getoffsetX(_.glyphStartIndex),Me,Ve,u,O,U,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,I,y,X,ce,fe);if(!De)return{notEnoughRoom:!0};ge=[De]}for(const De of ge)l.ak(L,De.point,De.angle);return{}}function Qi(_,i,u,p,g,y){const T=Fr(_.add(_.sub(i)._unit()),g,y).point,C=u.sub(T);return u.add(C._mult(p/C.mag()))}function Qt(_,i){const{projectionCache:u,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:y,distanceFromAnchor:T,getElevation:C,previousVertex:I,direction:L,absOffsetX:O}=i;if(u.projections[_])return u.projections[_];const U=new l.P(p.getx(_),p.gety(_)),X=Fr(U,g,C);if(X.signedDistanceFromCamera>0)return u.projections[_]=X.point,X.point;const ue=_-L;return Qi(T===0?y:new l.P(p.getx(ue),p.gety(ue)),U,I,O-T+1,g,C)}function yi(_,i,u){return _._unit()._perp()._mult(i*u)}function he(_,i,u,p,g,y,T,C){const{projectionCache:I,direction:L}=C;if(I.offsets[_])return I.offsets[_];const O=u.add(i);if(_+L<p||_+L>=g)return I.offsets[_]=O,O;const U=Qt(_+L,C),X=yi(U.sub(u),T,L),ue=u.add(X),ce=U.add(X);return I.offsets[_]=l.al(y,O,ue,ce)||O,I.offsets[_]}function H(_,i,u,p,g,y,T,C,I,L,O,U,X,ue){const ce=p?_-i:_+i;let fe=ce>0?1:-1,oe=0;p&&(fe*=-1,oe=Math.PI),fe<0&&(oe+=Math.PI);let Me,Ve,ge=fe>0?C+T:C+T+1,De=g,He=g,qe=0,tt=0;const ct=Math.abs(ce),st=[];let _t;for(;qe+tt<=ct;){if(ge+=fe,ge<C||ge>=I)return null;qe+=tt,He=De,Ve=Me;const Tt={projectionCache:U,lineVertexArray:L,labelPlaneMatrix:O,tileAnchorPoint:y,distanceFromAnchor:qe,getElevation:ue,previousVertex:He,direction:fe,absOffsetX:ct};if(De=Qt(ge,Tt),u===0)st.push(He),_t=De.sub(He);else{let qt;const Ut=De.sub(He);qt=Ut.mag()===0?yi(Qt(ge+fe,Tt).sub(De),u,fe):yi(Ut,u,fe),Ve||(Ve=He.add(qt)),Me=he(ge,qt,De,C,I,Ve,u,Tt),st.push(Ve),_t=Me.sub(Ve)}tt=_t.mag()}const Nt=_t._mult((ct-qe)/tt)._add(Ve||He),or=oe+Math.atan2(De.y-He.y,De.x-He.x);return st.push(Nt),{point:Nt,angle:X?or:0,path:st}}const Z=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ie(_,i){for(let u=0;u<_;u++){const p=i.length;i.resize(p+4),i.float32.set(Z,3*p)}}function de(_,i,u){const p=i[0],g=i[1];return _[0]=u[0]*p+u[4]*g+u[12],_[1]=u[1]*p+u[5]*g+u[13],_[3]=u[3]*p+u[7]*g+u[15],_}const me=100;class Fe{constructor(i,u=new Oa(i.width+200,i.height+200,25),p=new Oa(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+me,this.screenBottomBoundary=i.height+me,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,p,g,y,T){const C=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,T),I=p*C.perspectiveRatio,L=i.x1*I+C.point.x,O=i.y1*I+C.point.y,U=i.x2*I+C.point.x,X=i.y2*I+C.point.y;return!this.isInsideGrid(L,O,U,X)||u!=="always"&&this.grid.hitTest(L,O,U,X,u,y)||C.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[L,O,U,X],offscreen:this.isOffscreen(L,O,U,X)}}placeCollisionCircles(i,u,p,g,y,T,C,I,L,O,U,X,ue,ce){const fe=[],oe=new l.P(u.anchorX,u.anchorY),Me=Fr(oe,T,ce),Ve=Na(this.transform.cameraToCenterDistance,Me.signedDistanceFromCamera),ge=(O?y/Ve:y*Ve)/l.ap,De=Fr(oe,C,ce).point,He=tr(ge,g,u.lineOffsetX*ge,u.lineOffsetY*ge,!1,De,oe,u,p,C,{projections:{},offsets:{}},!1,ce);let qe=!1,tt=!1,ct=!0;if(He){const st=.5*X*Ve+ue,_t=new l.P(-100,-100),Nt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),or=new Rs,Tt=He.first,qt=He.last;let Ut=[];for(let ir=Tt.path.length-1;ir>=1;ir--)Ut.push(Tt.path[ir]);for(let ir=1;ir<qt.path.length;ir++)Ut.push(qt.path[ir]);const Tr=2.5*st;if(I){const ir=Ut.map(lr=>Fr(lr,I,ce));Ut=ir.some(lr=>lr.signedDistanceFromCamera<=0)?[]:ir.map(lr=>lr.point)}let sr=[];if(Ut.length>0){const ir=Ut[0].clone(),lr=Ut[0].clone();for(let sn=1;sn<Ut.length;sn++)ir.x=Math.min(ir.x,Ut[sn].x),ir.y=Math.min(ir.y,Ut[sn].y),lr.x=Math.max(lr.x,Ut[sn].x),lr.y=Math.max(lr.y,Ut[sn].y);sr=ir.x>=_t.x&&lr.x<=Nt.x&&ir.y>=_t.y&&lr.y<=Nt.y?[Ut]:lr.x<_t.x||ir.x>Nt.x||lr.y<_t.y||ir.y>Nt.y?[]:l.am([Ut],_t.x,_t.y,Nt.x,Nt.y)}for(const ir of sr){or.reset(ir,.25*st);let lr=0;lr=or.length<=.5*st?1:Math.ceil(or.paddedLength/Tr)+1;for(let sn=0;sn<lr;sn++){const Ir=sn/Math.max(lr-1,1),Un=or.lerp(Ir),Sn=Un.x+me,fn=Un.y+me;fe.push(Sn,fn,st,0);const Bi=Sn-st,Or=fn-st,Va=Sn+st,ja=fn+st;if(ct=ct&&this.isOffscreen(Bi,Or,Va,ja),tt=tt||this.isInsideGrid(Bi,Or,Va,ja),i!=="always"&&this.grid.hitTestCircle(Sn,fn,st,i,U)&&(qe=!0,!L))return{circles:[],offscreen:!1,collisionDetected:qe}}}}return{circles:!L&&qe||!tt||Ve<this.perspectiveRatioCutoff?[]:fe,offscreen:ct,collisionDetected:qe}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,g=1/0,y=-1/0,T=-1/0;for(const O of i){const U=new l.P(O.x+me,O.y+me);p=Math.min(p,U.x),g=Math.min(g,U.y),y=Math.max(y,U.x),T=Math.max(T,U.y),u.push(U)}const C=this.grid.query(p,g,y,T).concat(this.ignoredGrid.query(p,g,y,T)),I={},L={};for(const O of C){const U=O.key;if(I[U.bucketInstanceId]===void 0&&(I[U.bucketInstanceId]={}),I[U.bucketInstanceId][U.featureIndex])continue;const X=[new l.P(O.x1,O.y1),new l.P(O.x2,O.y1),new l.P(O.x2,O.y2),new l.P(O.x1,O.y2)];l.an(u,X)&&(I[U.bucketInstanceId][U.featureIndex]=!0,L[U.bucketInstanceId]===void 0&&(L[U.bucketInstanceId]=[]),L[U.bucketInstanceId].push(U.featureIndex))}return L}insertCollisionBox(i,u,p,g,y,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:y,collisionGroupID:T,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,g,y,T){const C=p?this.ignoredGrid:this.grid,I={bucketInstanceId:g,featureIndex:y,collisionGroupID:T,overlapMode:u};for(let L=0;L<i.length;L+=4)C.insertCircle(I,i[L],i[L+1],i[L+2])}projectAndGetPerspectiveRatio(i,u,p,g){let y;return g?(y=[u,p,g(u,p),1],l.ag(y,y,i)):(y=[u,p,0,1],de(y,y,i)),{point:new l.P((y[0]/y[3]+1)/2*this.transform.width+me,(-y[1]/y[3]+1)/2*this.transform.height+me),perspectiveRatio:.5+this.transform.cameraToCenterDistance/y[3]*.5}}isOffscreen(i,u,p,g){return p<me||i>=this.screenRightBoundary||g<me||u>this.screenBottomBoundary}isInsideGrid(i,u,p,g){return p>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=l.ao([]);return l.$(i,i,[-100,-100,0]),i}}function Ie(_,i,u){return i*(l.N/(_.tileSize*Math.pow(2,u-_.tileID.overscaledZ)))}class ye{constructor(i,u,p,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Re{constructor(i,u,p,g,y){this.text=new ye(i?i.text:null,u,p,y),this.icon=new ye(i?i.icon:null,u,g,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ye{constructor(i,u,p){this.text=i,this.icon=u,this.skipFade=p}}class Qe{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class j{constructor(i,u,p,g,y){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=y}}class re{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function ee(_,i,u,p,g){const{horizontalAlign:y,verticalAlign:T}=l.au(_);return new l.P(-(y-.5)*i+p[0]*g,-(T-.5)*u+p[1]*g)}function J(_,i,u,p,g,y){const{x1:T,x2:C,y1:I,y2:L,anchorPointX:O,anchorPointY:U}=_,X=new l.P(i,u);return p&&X._rotate(g?y:-y),{x1:T+X.x,y1:I+X.y,x2:C+X.x,y2:L+X.y,anchorPointX:O,anchorPointY:U}}class ne{constructor(i,u,p,g,y){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new Fe(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new re(g),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,p,g){const y=p.getBucket(u),T=p.latestFeatureIndex;if(!y||!T||u.id!==y.layerIds[0])return;const C=p.collisionBoxArray,I=y.layers[0].layout,L=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),O=p.tileSize/l.N,U=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),X=I.get("text-pitch-alignment")==="map",ue=I.get("text-rotation-alignment")==="map",ce=Ie(p,1,this.transform.zoom),fe=xt(U,X,ue,this.transform,ce);let oe=null;if(X){const Ve=Li(U,X,ue,this.transform,ce);oe=l.a1([],this.transform.labelPlaneMatrix,Ve)}this.retainedQueryData[y.bucketInstanceId]=new j(y.bucketInstanceId,T,y.sourceLayerIndex,y.index,p.tileID);const Me={bucket:y,layout:I,posMatrix:U,textLabelPlaneMatrix:fe,labelToScreenMatrix:oe,scale:L,textPixelRatio:O,holdingForFade:p.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:l.ah(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(g)for(const Ve of y.sortKeyRanges){const{sortKey:ge,symbolInstanceStart:De,symbolInstanceEnd:He}=Ve;i.push({sortKey:ge,symbolInstanceStart:De,symbolInstanceEnd:He,parameters:Me})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Me})}attemptAnchorPlacement(i,u,p,g,y,T,C,I,L,O,U,X,ue,ce,fe,oe){const Me=l.aq[i.textAnchor],Ve=[i.textOffset0,i.textOffset1],ge=ee(Me,p,g,Ve,y),De=this.collisionIndex.placeCollisionBox(J(u,ge.x,ge.y,T,C,this.transform.angle),U,I,L,O.predicate,oe);if((!fe||this.collisionIndex.placeCollisionBox(J(fe,ge.x,ge.y,T,C,this.transform.angle),U,I,L,O.predicate,oe).box.length!==0)&&De.box.length>0){let He;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(He=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Ve,width:p,height:g,anchor:Me,textBoxScale:y,prevAnchor:He},this.markUsedJustification(ue,Me,X,ce),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,ce,X),this.placedOrientations[X.crossTileID]=ce),{shift:ge,placedGlyphBoxes:De}}}placeLayerBucketPart(i,u,p){const{bucket:g,layout:y,posMatrix:T,textLabelPlaneMatrix:C,labelToScreenMatrix:I,textPixelRatio:L,holdingForFade:O,collisionBoxArray:U,partiallyEvaluatedTextSize:X,collisionGroup:ue}=i.parameters,ce=y.get("text-optional"),fe=y.get("icon-optional"),oe=l.ar(y,"text-overlap","text-allow-overlap"),Me=oe==="always",Ve=l.ar(y,"icon-overlap","icon-allow-overlap"),ge=Ve==="always",De=y.get("text-rotation-alignment")==="map",He=y.get("text-pitch-alignment")==="map",qe=y.get("icon-text-fit")!=="none",tt=y.get("symbol-z-order")==="viewport-y",ct=Me&&(ge||!g.hasIconData()||fe),st=ge&&(Me||!g.hasTextData()||ce);!g.collisionArrays&&U&&g.deserializeCollisionBoxes(U);const _t=this.retainedQueryData[g.bucketInstanceId].tileID,Nt=this.terrain?(Tt,qt)=>this.terrain.getElevation(_t,Tt,qt):null,or=(Tt,qt)=>{var Ut,Tr;if(u[Tt.crossTileID])return;if(O)return void(this.placements[Tt.crossTileID]=new Ye(!1,!1,!1));let sr=!1,ir=!1,lr=!0,sn=null,Ir={box:null,offscreen:null},Un={box:null},Sn=null,fn=null,Bi=null,Or=0,Va=0,ja=0;qt.textFeatureIndex?Or=qt.textFeatureIndex:Tt.useRuntimeCollisionCircles&&(Or=Tt.featureIndex),qt.verticalTextFeatureIndex&&(Va=qt.verticalTextFeatureIndex);const Us=qt.textBox;if(Us){const Hn=on=>{let Tn=l.ai.horizontal;if(g.allowVerticalPlacement&&!on&&this.prevPlacement){const wi=this.prevPlacement.placedOrientations[Tt.crossTileID];wi&&(this.placedOrientations[Tt.crossTileID]=wi,Tn=wi,this.markUsedOrientation(g,Tn,Tt))}return Tn},Vn=(on,Tn)=>{if(g.allowVerticalPlacement&&Tt.numVerticalGlyphVertices>0&&qt.verticalTextBox){for(const wi of g.writingModes)if(wi===l.ai.vertical?(Ir=Tn(),Un=Ir):Ir=on(),Ir&&Ir.box&&Ir.box.length)break}else Ir=on()},ii=Tt.textAnchorOffsetStartIndex,uo=Tt.textAnchorOffsetEndIndex;if(uo===ii){const on=(Tn,wi)=>{const ln=this.collisionIndex.placeCollisionBox(Tn,oe,L,T,ue.predicate,Nt);return ln&&ln.box&&ln.box.length&&(this.markUsedOrientation(g,wi,Tt),this.placedOrientations[Tt.crossTileID]=wi),ln};Vn(()=>on(Us,l.ai.horizontal),()=>{const Tn=qt.verticalTextBox;return g.allowVerticalPlacement&&Tt.numVerticalGlyphVertices>0&&Tn?on(Tn,l.ai.vertical):{box:null,offscreen:null}}),Hn(Ir&&Ir.box&&Ir.box.length)}else{let on=l.aq[(Tr=(Ut=this.prevPlacement)===null||Ut===void 0?void 0:Ut.variableOffsets[Tt.crossTileID])===null||Tr===void 0?void 0:Tr.anchor];const Tn=(ln,ho,mu)=>{const Wp=ln.x2-ln.x1,Hp=ln.y2-ln.y1,Qg=Tt.textBoxScale,gf=qe&&Ve==="never"?ho:null;let $a={box:[],offscreen:!1},fo=oe==="never"?1:2,Ga="never";on&&fo++;for(let ia=0;ia<fo;ia++){for(let Wa=ii;Wa<uo;Wa++){const _f=g.textAnchorOffsets.get(Wa);if(on&&_f.textAnchor!==on)continue;const cs=this.attemptAnchorPlacement(_f,ln,Wp,Hp,Qg,De,He,L,T,ue,Ga,Tt,g,mu,gf,Nt);if(cs&&($a=cs.placedGlyphBoxes,$a&&$a.box&&$a.box.length))return sr=!0,sn=cs.shift,$a}on?on=null:Ga=oe}return $a};Vn(()=>Tn(Us,qt.iconBox,l.ai.horizontal),()=>{const ln=qt.verticalTextBox;return g.allowVerticalPlacement&&!(Ir&&Ir.box&&Ir.box.length)&&Tt.numVerticalGlyphVertices>0&&ln?Tn(ln,qt.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),Ir&&(sr=Ir.box,lr=Ir.offscreen);const wi=Hn(Ir&&Ir.box);if(!sr&&this.prevPlacement){const ln=this.prevPlacement.variableOffsets[Tt.crossTileID];ln&&(this.variableOffsets[Tt.crossTileID]=ln,this.markUsedJustification(g,ln.anchor,Tt,wi))}}}if(Sn=Ir,sr=Sn&&Sn.box&&Sn.box.length>0,lr=Sn&&Sn.offscreen,Tt.useRuntimeCollisionCircles){const Hn=g.text.placedSymbolArray.get(Tt.centerJustifiedTextSymbolIndex),Vn=l.aj(g.textSizeData,X,Hn),ii=y.get("text-padding");fn=this.collisionIndex.placeCollisionCircles(oe,Hn,g.lineVertexArray,g.glyphOffsetArray,Vn,T,C,I,p,He,ue.predicate,Tt.collisionCircleDiameter,ii,Nt),fn.circles.length&&fn.collisionDetected&&!p&&l.w("Collisions detected, but collision boxes are not shown"),sr=Me||fn.circles.length>0&&!fn.collisionDetected,lr=lr&&fn.offscreen}if(qt.iconFeatureIndex&&(ja=qt.iconFeatureIndex),qt.iconBox){const Hn=Vn=>{const ii=qe&&sn?J(Vn,sn.x,sn.y,De,He,this.transform.angle):Vn;return this.collisionIndex.placeCollisionBox(ii,Ve,L,T,ue.predicate,Nt)};Un&&Un.box&&Un.box.length&&qt.verticalIconBox?(Bi=Hn(qt.verticalIconBox),ir=Bi.box.length>0):(Bi=Hn(qt.iconBox),ir=Bi.box.length>0),lr=lr&&Bi.offscreen}const co=ce||Tt.numHorizontalGlyphVertices===0&&Tt.numVerticalGlyphVertices===0,Yo=fe||Tt.numIconVertices===0;if(co||Yo?Yo?co||(ir=ir&&sr):sr=ir&&sr:ir=sr=ir&&sr,sr&&Sn&&Sn.box&&this.collisionIndex.insertCollisionBox(Sn.box,oe,y.get("text-ignore-placement"),g.bucketInstanceId,Un&&Un.box&&Va?Va:Or,ue.ID),ir&&Bi&&this.collisionIndex.insertCollisionBox(Bi.box,Ve,y.get("icon-ignore-placement"),g.bucketInstanceId,ja,ue.ID),fn&&(sr&&this.collisionIndex.insertCollisionCircles(fn.circles,oe,y.get("text-ignore-placement"),g.bucketInstanceId,Or,ue.ID),p)){const Hn=g.bucketInstanceId;let Vn=this.collisionCircleArrays[Hn];Vn===void 0&&(Vn=this.collisionCircleArrays[Hn]=new Qe);for(let ii=0;ii<fn.circles.length;ii+=4)Vn.circles.push(fn.circles[ii+0]),Vn.circles.push(fn.circles[ii+1]),Vn.circles.push(fn.circles[ii+2]),Vn.circles.push(fn.collisionDetected?1:0)}if(Tt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Tt.crossTileID]=new Ye(sr||ct,ir||st,lr||g.justReloaded),u[Tt.crossTileID]=!0};if(tt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Tt=g.getSortedSymbolIndexes(this.transform.angle);for(let qt=Tt.length-1;qt>=0;--qt){const Ut=Tt[qt];or(g.symbolInstances.get(Ut),g.collisionArrays[Ut])}}else for(let Tt=i.symbolInstanceStart;Tt<i.symbolInstanceEnd;Tt++)or(g.symbolInstances.get(Tt),g.collisionArrays[Tt]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const Tt=this.collisionCircleArrays[g.bucketInstanceId];l.as(Tt.invProjMatrix,T),Tt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,p,g){let y;y=g===l.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.at(u)];const T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const C of T)C>=0&&(i.text.placedSymbolArray.get(C).crossTileID=y>=0&&C!==y?0:p.crossTileID)}markUsedOrientation(i,u,p){const g=u===l.ai.horizontal||u===l.ai.horizontalOnly?u:0,y=u===l.ai.vertical?u:0,T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const C of T)i.text.placedSymbolArray.get(C).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,y=u?u.opacities:{},T=u?u.variableOffsets:{},C=u?u.placedOrientations:{};for(const I in this.placements){const L=this.placements[I],O=y[I];O?(this.opacities[I]=new Re(O,g,L.text,L.icon),p=p||L.text!==O.text.placed||L.icon!==O.icon.placed):(this.opacities[I]=new Re(null,g,L.text,L.icon,L.skipFade),p=p||L.text||L.icon)}for(const I in y){const L=y[I];if(!this.opacities[I]){const O=new Re(L,g,!1,!1);O.isHidden()||(this.opacities[I]=O,p=p||L.text.placed||L.icon.placed)}}for(const I in T)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=T[I]);for(const I in C)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=C[I]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const p={};for(const g of u){const y=g.getBucket(i);y&&g.latestFeatureIndex&&i.id===y.layerIds[0]&&this.updateBucketOpacities(y,p,g.collisionBoxArray)}}updateBucketOpacities(i,u,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],y=g.layout,T=new Re(null,0,!1,!1,!0),C=y.get("text-allow-overlap"),I=y.get("icon-allow-overlap"),L=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),O=y.get("text-rotation-alignment")==="map",U=y.get("text-pitch-alignment")==="map",X=y.get("icon-text-fit")!=="none",ue=new Re(null,0,C&&(I||!i.hasIconData()||y.get("icon-optional")),I&&(C||!i.hasTextData()||y.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const ce=(fe,oe,Me)=>{for(let Ve=0;Ve<oe/4;Ve++)fe.opacityVertexArray.emplaceBack(Me);fe.hasVisibleVertices=fe.hasVisibleVertices||Me!==pt};for(let fe=0;fe<i.symbolInstances.length;fe++){const oe=i.symbolInstances.get(fe),{numHorizontalGlyphVertices:Me,numVerticalGlyphVertices:Ve,crossTileID:ge}=oe;let De=this.opacities[ge];u[ge]?De=T:De||(De=ue,this.opacities[ge]=De),u[ge]=!0;const He=oe.numIconVertices>0,qe=this.placedOrientations[oe.crossTileID],tt=qe===l.ai.vertical,ct=qe===l.ai.horizontal||qe===l.ai.horizontalOnly;if(Me>0||Ve>0){const st=Ct(De.text);ce(i.text,Me,tt?pt:st),ce(i.text,Ve,ct?pt:st);const _t=De.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(Tt=>{Tt>=0&&(i.text.placedSymbolArray.get(Tt).hidden=_t||tt?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=_t||ct?1:0);const Nt=this.variableOffsets[oe.crossTileID];Nt&&this.markUsedJustification(i,Nt.anchor,oe,qe);const or=this.placedOrientations[oe.crossTileID];or&&(this.markUsedJustification(i,"left",oe,or),this.markUsedOrientation(i,or,oe))}if(He){const st=Ct(De.icon),_t=!(X&&oe.verticalPlacedIconSymbolIndex&&tt);oe.placedIconSymbolIndex>=0&&(ce(i.icon,oe.numIconVertices,_t?st:pt),i.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=De.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(ce(i.icon,oe.numVerticalIconVertices,_t?pt:st),i.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=De.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const st=i.collisionArrays[fe];if(st){let _t=new l.P(0,0);if(st.textBox||st.verticalTextBox){let or=!0;if(L){const Tt=this.variableOffsets[ge];Tt?(_t=ee(Tt.anchor,Tt.width,Tt.height,Tt.textOffset,Tt.textBoxScale),O&&_t._rotate(U?this.transform.angle:-this.transform.angle)):or=!1}st.textBox&&se(i.textCollisionBox.collisionVertexArray,De.text.placed,!or||tt,_t.x,_t.y),st.verticalTextBox&&se(i.textCollisionBox.collisionVertexArray,De.text.placed,!or||ct,_t.x,_t.y)}const Nt=!!(!ct&&st.verticalIconBox);st.iconBox&&se(i.iconCollisionBox.collisionVertexArray,De.icon.placed,Nt,X?_t.x:0,X?_t.y:0),st.verticalIconBox&&se(i.iconCollisionBox.collisionVertexArray,De.icon.placed,!Nt,X?_t.x:0,X?_t.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const fe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=fe.invProjMatrix,i.placementViewportMatrix=fe.viewportMatrix,i.collisionCircleArray=fe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function se(_,i,u,p,g){_.emplaceBack(i?1:0,u?1:0,p||0,g||0),_.emplaceBack(i?1:0,u?1:0,p||0,g||0),_.emplaceBack(i?1:0,u?1:0,p||0,g||0),_.emplaceBack(i?1:0,u?1:0,p||0,g||0)}const Be=Math.pow(2,25),Ze=Math.pow(2,24),ze=Math.pow(2,17),Ne=Math.pow(2,16),Ge=Math.pow(2,9),it=Math.pow(2,8),mt=Math.pow(2,1);function Ct(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const i=_.placed?1:0,u=Math.floor(127*_.opacity);return u*Be+i*Ze+u*ze+i*Ne+u*Ge+i*it+u*mt+i}const pt=0;class zt{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,p,g,y){const T=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(T,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((C,I)=>C.sortKey-I.sortKey));this._currentPartIndex<T.length;)if(u.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,y())return!0;return!1}}class Jt{constructor(i,u,p,g,y,T,C,I){this.placement=new ne(i,u,T,C,I),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p){const g=l.h.now(),y=()=>!this._forceFullPlacement&&l.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const T=u[i[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=C)&&(!T.maxzoom||T.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new zt(T)),this._inProgressLayer.continuePlacement(p[T.source],this.placement,this._showCollisionBoxes,T,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Sr=512/l.N/2;class Vr{constructor(i,u,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let y=0;y<u.length;y++){const T=u.get(y),C=T.key,I=g.get(C);I?I.push(T):g.set(C,[T])}for(const[y,T]of g){const C={positions:T.map(I=>({x:Math.floor(I.anchorX*Sr),y:Math.floor(I.anchorY*Sr)})),crossTileIDs:T.map(I=>I.crossTileID)};if(C.positions.length>128){const I=new l.av(C.positions.length,16,Uint16Array);for(const{x:L,y:O}of C.positions)I.add(L,O);I.finish(),delete C.positions,C.index=I}this._symbolsByKey[y]=C}}getScaledCoordinates(i,u){const{x:p,y:g,z:y}=this.tileID.canonical,{x:T,y:C,z:I}=u.canonical,L=Sr/Math.pow(2,I-y),O=(C*l.N+i.anchorY)*L,U=g*l.N*Sr;return{x:Math.floor((T*l.N+i.anchorX)*L-p*l.N*Sr),y:Math.floor(O-U)}}findMatches(i,u,p){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let y=0;y<i.length;y++){const T=i.get(y);if(T.crossTileID)continue;const C=this._symbolsByKey[T.key];if(!C)continue;const I=this.getScaledCoordinates(T,u);if(C.index){const L=C.index.range(I.x-g,I.y-g,I.x+g,I.y+g).sort();for(const O of L){const U=C.crossTileIDs[O];if(!p[U]){p[U]=!0,T.crossTileID=U;break}}}else if(C.positions)for(let L=0;L<C.positions.length;L++){const O=C.positions[L],U=C.crossTileIDs[L];if(Math.abs(O.x-I.x)<=g&&Math.abs(O.y-I.y)<=g&&!p[U]){p[U]=!0,T.crossTileID=U;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class rr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class is{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const p in this.indexes){const g=this.indexes[p],y={};for(const T in g){const C=g[T];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+u),y[C.tileID.key]=C}this.indexes[p]=y}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let y=0;y<u.symbolInstances.length;y++)u.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const y in this.indexes){const T=this.indexes[y];if(Number(y)>i.overscaledZ)for(const C in T){const I=T[C];I.tileID.isChildOf(i)&&I.findMatches(u.symbolInstances,i,g)}else{const C=T[i.scaledTo(Number(y)).key];C&&C.findMatches(u.symbolInstances,i,g)}}for(let y=0;y<u.symbolInstances.length;y++){const T=u.symbolInstances.get(y);T.crossTileID||(T.crossTileID=p.generate(),g[T.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Vr(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const p of u.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let u=!1;for(const p in this.indexes){const g=this.indexes[p];for(const y in g)i[g[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[y]),delete g[y],u=!0)}return u}}class Ba{constructor(){this.layerIndexes={},this.crossTileIDs=new rr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new is);let y=!1;const T={};g.handleWrapJump(p);for(const C of u){const I=C.getBucket(i);I&&i.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(C.tileID,I,this.crossTileIDs)&&(y=!0),T[I.bucketInstanceId]=!0)}return g.removeStaleBuckets(T)&&(y=!0),y}pruneUnusedLayers(i){const u={};i.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const nn=(_,i)=>l.x(_,i&&i.filter(u=>u.identifier!=="source.canvas")),un=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Bl=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),an=l.aw();class Bn extends l.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new jt(Ji(),this,i._getMapId()),this.imageManager=new Ue,this.imageManager.setEventedParent(this),this.glyphManager=new nt(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Dt(256,512),this.crossTileSymbolIndex=new Ba,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const p=this;this._rtlTextPluginCallback=Bn.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(y,T)=>{if(l.aA(y),T&&T.every(C=>C))for(const C in p.sourceCaches){const I=p.sourceCaches[C].getSource().type;I!=="vector"&&I!=="geojson"||p.sourceCaches[C].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const y=this.sourceCaches[g.sourceId];if(!y)return;const T=y.getSource();if(T&&T.vectorLayerIds)for(const C in this._layers){const I=this._layers[C];I.source===T.id&&this._validateLayer(I)}})}loadURL(i,u={},p){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(i,B.Style);this._request=l.f(g,(y,T)=>{this._request=null,y?this.fire(new l.j(y)):T&&this._load(T,u,p)})}loadJSON(i,u={},p){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,p)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(an,{validate:!1})}_load(i,u,p){var g;const y=u.transformStyle?u.transformStyle(p,i):i;if(!u.validate||!nn(this,l.y(y))){this._loaded=!0,this.stylesheet=y;for(const T in y.sources)this.addSource(T,y.sources[T],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new dt(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const i=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const p=l.aC(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(i,u=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,y,T,C){const I=we(g),L=I.length,O=T>1?"@2x":"",U={},X={},ue={};for(const{id:ce,url:fe}of I){const oe=y.transformRequest(y.normalizeSpriteURL(fe,O,".json"),B.SpriteJSON),Me=`${ce}_${oe.url}`;U[Me]=l.f(oe,(De,He)=>{delete U[Me],X[ce]=He,Pe(C,X,ue,De,L)});const Ve=y.transformRequest(y.normalizeSpriteURL(fe,O,".png"),B.SpriteImage),ge=`${ce}_${Ve.url}`;U[ge]=G.getImage(Ve,(De,He)=>{delete U[ge],ue[ce]=He,Pe(C,X,ue,De,L)})}return{cancel(){for(const ce of Object.values(U))ce.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,y)=>{if(this._spriteRequest=null,g)this.fire(new l.j(g));else if(y)for(const T in y){this._spritesImagesIds[T]=[];const C=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(I=>!(I in y)):[];for(const I of C)this.imageManager.removeImage(I),this._changedImages[I]=!0;for(const I in y[T]){const L=T==="default"?I:`${T}:${I}`;this._spritesImagesIds[T].push(L),L in this.imageManager.images?this.imageManager.updateImage(L,y[T][I],!1):this.imageManager.addImage(L,y[T][I]),u&&(this._changedImages[L]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const p=i.sourceLayer;if(!p)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new l.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const p=[];for(const g of i)u[g]&&p.push(u[g]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const g=this._layers[p];g.type!=="custom"&&(i[p]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(g.length||y.length)&&this._updateWorkerLayers(g,y);for(const T in this._updatedSources){const C=this._updatedSources[T];if(C==="reload")this._reloadSource(T);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const y=this.sourceCaches[g];p[g]=y.used,y.used=!1}for(const g of this._order){const y=this._layers[g];y.recalculate(i,this._availableImages),!y.isHidden(i.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const g in p){const y=this.sourceCaches[g];p[g]!==y.used&&y.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const p=this.serialize();if(i=u.transformStyle?u.transformStyle(p,i):i,nn(this,l.y(i)))return!1;(i=l.aD(i)).layers=l.aB(i.layers);const g=l.aE(p,i).filter(T=>!(T.command in Bl));if(g.length===0)return!1;const y=g.filter(T=>!(T.command in un));if(y.length>0)throw new Error(`Unimplemented: ${y.map(T=>T.command).join(", ")}.`);for(const T of g)T.command!=="setTransition"&&this[T.command].apply(this,T.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.y.source,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new kr(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new l.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,p={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new l.j(new Error(`Layer "${g}" already exists on this map.`)));let y;if(i.type==="custom"){if(nn(this,l.aF(i)))return;y=l.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=l.aD(i),i=l.e(i,{source:g})),this._validate(l.y.layer,`layers.${g}`,i,{arrayIndex:-1},p))return;y=l.aC(i),this._validateLayer(y),y.setEventedParent(this,{layer:{id:g}})}const T=u?this._order.indexOf(u):this._order.length;if(u&&T===-1)this.fire(new l.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(T,0,g),this._layerOrderChanged=!0,this._layers[g]=y,this._removedLayers[g]&&y.source&&y.type!=="custom"){const C=this._removedLayers[g];delete this._removedLayers[g],C.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const p=this._order.indexOf(i);this._order.splice(p,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new l.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,p){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===p||(u!=null&&(g.minzoom=u),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,p={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!l.aG(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.y.filter,`layers.${g.id}.filter`,u,null,p)||(g.filter=l.aD(u),this._updateLayer(g)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,p,g={}){this._checkLoaded();const y=this.getLayer(i);y?l.aG(y.getLayoutProperty(u),p)||(y.setLayoutProperty(u,p,g),this._updateLayer(y)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const p=this.getLayer(i);if(p)return p.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,p,g={}){this._checkLoaded();const y=this.getLayer(i);y?l.aG(y.getPaintProperty(u),p)||(y.setPaintProperty(u,p,g)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const p=i.source,g=i.sourceLayer,y=this.sourceCaches[p];if(y===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const T=y.getSource().type;T==="geojson"&&g?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||g?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(g,i.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const p=i.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const y=g.getSource().type,T=y==="vector"?i.sourceLayer:void 0;y!=="vector"||T?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(T,i.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,p=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,i.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=l.aH(this.sourceCaches,y=>y.serialize()),u=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return l.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:u,terrain:p},y=>y!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=T=>this._layers[T].type==="fill-extrusion",p={},g=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(u(C)){p[C]=T;for(const I of i){const L=I[C];if(L)for(const O of L)g.push(O)}}}g.sort((T,C)=>C.intersectionZ-T.intersectionZ);const y=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(u(C))for(let I=g.length-1;I>=0;I--){const L=g[I].feature;if(p[L.layer.id]<T)break;y.push(L),g.pop()}else for(const I of i){const L=I[C];if(L)for(const O of L)y.push(O.feature)}}return y}queryRenderedFeatures(i,u,p){u&&u.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const C of u.layers){const I=this._layers[C];if(!I)return this.fire(new l.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];g[I.source]=!0}}const y=[];u.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const C in this.sourceCaches)u.layers&&!g[C]||y.push(gr(this.sourceCaches[C],this._layers,T,i,u,p));return this.placement&&y.push(function(C,I,L,O,U,X,ue){const ce={},fe=X.queryRenderedSymbols(O),oe=[];for(const Me of Object.keys(fe).map(Number))oe.push(ue[Me]);oe.sort(Lt);for(const Me of oe){const Ve=Me.featureIndex.lookupSymbolFeatures(fe[Me.bucketInstanceId],I,Me.bucketIndex,Me.sourceLayerIndex,U.filter,U.layers,U.availableImages,C);for(const ge in Ve){const De=ce[ge]=ce[ge]||[],He=Ve[ge];He.sort((qe,tt)=>{const ct=Me.featureSortOrder;if(ct){const st=ct.indexOf(qe.featureIndex);return ct.indexOf(tt.featureIndex)-st}return tt.featureIndex-qe.featureIndex});for(const qe of He)De.push(qe)}}for(const Me in ce)ce[Me].forEach(Ve=>{const ge=Ve.feature,De=L[C[Me].source].getFeatureState(ge.layer["source-layer"],ge.id);ge.source=ge.layer.source,ge.layer["source-layer"]&&(ge.sourceLayer=ge.layer["source-layer"]),ge.state=De});return ce}(this._layers,T,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(i,u){u&&u.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[i];return p?function(g,y){const T=g.getRenderableIds().map(L=>g.getTileByID(L)),C=[],I={};for(let L=0;L<T.length;L++){const O=T[L],U=O.tileID.canonical.key;I[U]||(I[U]=!0,O.querySourceFeatures(C,y))}return C}(p,u):[]}addSourceType(i,u,p){return Xt(i)?p(new Error(`A source type called "${i}" already exists.`)):(((g,y)=>{Yt[g]=y})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const T in i)if(!l.aG(i[T],p[T])){g=!0;break}if(!g)return;const y={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(y)}_validate(i,u,p,g,y={}){return(!y||y.validate!==!1)&&nn(this,i.call(l.y,l.e({key:u,style:this.serialize(),value:p,styleSpec:l.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,p,g,y=!1){let T=!1,C=!1;const I={};for(const L of this._order){const O=this._layers[L];if(O.type!=="symbol")continue;if(!I[O.source]){const X=this.sourceCaches[O.source];I[O.source]=X.getRenderableIds(!0).map(ue=>X.getTileByID(ue)).sort((ue,ce)=>ce.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(ce.tileID)?-1:1))}const U=this.crossTileSymbolIndex.addLayer(O,I[O.source],i.center.lng);T=T||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),i.zoom))&&(this.pauseablePlacement=new Jt(i,this.map.terrain,this._order,y,u,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),C=!0),T&&this.pauseablePlacement.placement.setStale()),C||T)for(const L of this._order){const O=this._layers[L];O.type==="symbol"&&this.placement.updateLayerOpacities(O,I[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,p){this.imageManager.getImages(u.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,p){this.glyphManager.getGlyphs(u.stacks,p);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,p){return l.m(u,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(l.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,p={},g){this._checkLoaded();const y=[{id:i,url:u}],T=[...we(this.stylesheet.sprite),...y];this._validate(l.y.sprite,"sprite",T,null,p)||(this.stylesheet.sprite=T,this._loadSprite(y,!0,g))}removeSprite(i){this._checkLoaded();const u=we(this.stylesheet.sprite);if(u.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return we(this.stylesheet.sprite)}setSprite(i,u={},p){this._checkLoaded(),i&&this._validate(l.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}Bn.registerForPluginStateChange=l.aK;var jc=l.Q([{name:"a_pos",type:"Int16",components:2}]),Uo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Wr={prelude:xr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:xr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:xr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:xr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:xr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:xr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:xr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:xr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:xr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:xr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:xr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:xr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:xr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:xr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:xr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:xr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:xr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:xr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:xr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:xr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:xr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:xr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:xr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:xr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Uo),terrainDepth:xr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Uo),terrainCoords:xr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Uo)};function xr(_,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),g=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=y?y.concat(g):g,C={};return{fragmentSource:_=_.replace(u,(I,L,O,U,X)=>(C[X]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${O} ${U} ${X};
#else
uniform ${O} ${U} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${O} ${U} ${X} = u_${X};
#endif
`)),vertexSource:i=i.replace(u,(I,L,O,U,X)=>{const ue=U==="float"?"vec2":"vec4",ce=X.match(/color/)?"color":ue;return C[X]?L==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${O} ${ue} a_${X};
varying ${O} ${U} ${X};
#else
uniform ${O} ${U} u_${X};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${O} ${U} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ce}(a_${X}, u_${X}_t);
#else
    ${O} ${U} ${X} = u_${X};
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${O} ${ue} a_${X};
#else
uniform ${O} ${U} u_${X};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${O} ${U} ${X} = a_${X};
#else
    ${O} ${U} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${O} ${U} ${X} = unpack_mix_${ce}(a_${X}, u_${X}_t);
#else
    ${O} ${U} ${X} = u_${X};
#endif
`}),staticAttributes:p,staticUniforms:T}}class to{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,p,g,y,T,C,I,L){this.context=i;let O=this.boundPaintVertexBuffers.length!==g.length;for(let U=0;!O&&U<g.length;U++)this.boundPaintVertexBuffers[U]!==g[U]&&(O=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||O||this.boundIndexBuffer!==y||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==I||this.boundDynamicVertexBuffer3!==L?this.freshBind(u,p,g,y,T,C,I,L):(i.bindVertexArray.set(this.vao),C&&C.bind(),y&&y.dynamicDraw&&y.bind(),I&&I.bind(),L&&L.bind())}freshBind(i,u,p,g,y,T,C,I){const L=i.numAttributes,O=this.context,U=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=I,u.enableAttributes(U,i);for(const X of p)X.enableAttributes(U,i);T&&T.enableAttributes(U,i),C&&C.enableAttributes(U,i),I&&I.enableAttributes(U,i),u.bind(),u.setVertexAttribPointers(U,i,y);for(const X of p)X.bind(),X.setVertexAttribPointers(U,i,y);T&&(T.bind(),T.setVertexAttribPointers(U,i,y)),g&&g.bind(),C&&(C.bind(),C.setVertexAttribPointers(U,i,y)),I&&(I.bind(),I.setVertexAttribPointers(U,i,y)),O.currentNumAttributes=L}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Kr(_){const i=[];for(let u=0;u<_.length;u++){if(_[u]===null)continue;const p=_[u].split(" ");i.push(p.pop())}return i}class $c{constructor(i,u,p,g,y,T){const C=i.gl;this.program=C.createProgram();const I=Kr(u.staticAttributes),L=p?p.getBinderAttributes():[],O=I.concat(L),U=Wr.prelude.staticUniforms?Kr(Wr.prelude.staticUniforms):[],X=u.staticUniforms?Kr(u.staticUniforms):[],ue=p?p.getBinderUniforms():[],ce=U.concat(X).concat(ue),fe=[];for(const qe of ce)fe.indexOf(qe)<0&&fe.push(qe);const oe=p?p.defines():[];y&&oe.push("#define OVERDRAW_INSPECTOR;"),T&&oe.push("#define TERRAIN3D;");const Me=oe.concat(Wr.prelude.fragmentSource,u.fragmentSource).join(`
`),Ve=oe.concat(Wr.prelude.vertexSource,u.vertexSource).join(`
`),ge=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(ge,Me),C.compileShader(ge),!C.getShaderParameter(ge,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(ge)}`);C.attachShader(this.program,ge);const De=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(De,Ve),C.compileShader(De),!C.getShaderParameter(De,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(De)}`);C.attachShader(this.program,De),this.attributes={};const He={};this.numAttributes=O.length;for(let qe=0;qe<this.numAttributes;qe++)O[qe]&&(C.bindAttribLocation(this.program,qe,O[qe]),this.attributes[O[qe]]=qe);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(De),C.deleteShader(ge);for(let qe=0;qe<fe.length;qe++){const tt=fe[qe];if(tt&&!He[tt]){const ct=C.getUniformLocation(this.program,tt);ct&&(He[tt]=ct)}}this.fixedUniforms=g(i,He),this.terrainUniforms=((qe,tt)=>({u_depth:new l.aL(qe,tt.u_depth),u_terrain:new l.aL(qe,tt.u_terrain),u_terrain_dim:new l.aM(qe,tt.u_terrain_dim),u_terrain_matrix:new l.aN(qe,tt.u_terrain_matrix),u_terrain_unpack:new l.aO(qe,tt.u_terrain_unpack),u_terrain_exaggeration:new l.aM(qe,tt.u_terrain_exaggeration)}))(i,He),this.binderUniforms=p?p.getUniforms(i,He):[]}draw(i,u,p,g,y,T,C,I,L,O,U,X,ue,ce,fe,oe,Me,Ve){const ge=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(g),i.setColorMode(y),i.setCullFace(T),I){i.activeTexture.set(ge.TEXTURE2),ge.bindTexture(ge.TEXTURE_2D,I.depthTexture),i.activeTexture.set(ge.TEXTURE3),ge.bindTexture(ge.TEXTURE_2D,I.texture);for(const He in this.terrainUniforms)this.terrainUniforms[He].set(I[He])}for(const He in this.fixedUniforms)this.fixedUniforms[He].set(C[He]);fe&&fe.setUniforms(i,this.binderUniforms,ue,{zoom:ce});let De=0;switch(u){case ge.LINES:De=2;break;case ge.TRIANGLES:De=3;break;case ge.LINE_STRIP:De=1}for(const He of X.get()){const qe=He.vaos||(He.vaos={});(qe[L]||(qe[L]=new to)).bind(i,this,O,fe?fe.getPaintVertexBuffers():[],U,He.vertexOffset,oe,Me,Ve),ge.drawElements(u,He.primitiveLength*De,ge.UNSIGNED_SHORT,He.primitiveOffset*De*2)}}}function ea(_,i,u){const p=1/Ie(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),y=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,T=y*(u.tileID.canonical.x+u.tileID.wrap*g),C=y*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[T>>16,C>>16],u_pixel_coord_lower:[65535&T,65535&C]}}const Ih=(_,i,u,p)=>{const g=i.style.light,y=g.properties.get("position"),T=[y.x,y.y,y.z],C=function(){var L=new l.A(9);return l.A!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[5]=0,L[6]=0,L[7]=0),L[0]=1,L[4]=1,L[8]=1,L}();g.properties.get("anchor")==="viewport"&&function(L,O){var U=Math.sin(O),X=Math.cos(O);L[0]=X,L[1]=U,L[2]=0,L[3]=-U,L[4]=X,L[5]=0,L[6]=0,L[7]=0,L[8]=1}(C,-i.transform.angle),function(L,O,U){var X=O[0],ue=O[1],ce=O[2];L[0]=X*U[0]+ue*U[3]+ce*U[6],L[1]=X*U[1]+ue*U[4]+ce*U[7],L[2]=X*U[2]+ue*U[5]+ce*U[8]}(T,T,C);const I=g.properties.get("color");return{u_matrix:_,u_lightpos:T,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+u,u_opacity:p}},Ds=(_,i,u,p,g,y,T)=>l.e(Ih(_,i,u,p),ea(y,i,T),{u_height_factor:-Math.pow(2,g.overscaledZ)/T.tileSize/8}),lp=_=>({u_matrix:_}),Ph=(_,i,u,p)=>l.e(lp(_),ea(u,i,p)),Gc=(_,i)=>({u_matrix:_,u_world:i}),Wc=(_,i,u,p,g)=>l.e(Ph(_,i,u,p),{u_world:g}),Ls=(_,i,u,p)=>{const g=_.transform;let y,T;if(p.paint.get("circle-pitch-alignment")==="map"){const C=Ie(u,1,g.zoom);y=!0,T=[C,C]}else y=!1,T=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(i.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:T}},Mh=(_,i,u)=>{const p=Ie(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),y=u.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*g),i.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:y}},Ul=(_,i,u=1)=>({u_matrix:_,u_color:i,u_overlay:0,u_overlay_scale:u}),cp=_=>({u_matrix:_}),Ng=(_,i,u,p)=>({u_matrix:_,u_extrude_scale:Ie(i,1,u),u_intensity:p});function Rh(_,i){const u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new l.U(0,p/u).toLngLat().lat,new l.U(0,(p+1)/u).toLngLat().lat]}const Dh=(_,i,u,p)=>{const g=_.transform;return{u_matrix:Hc(_,i,u,p),u_ratio:1/Ie(i,1,g.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},up=(_,i,u,p,g)=>l.e(Dh(_,i,u,g),{u_image:0,u_image_height:p}),Bg=(_,i,u,p,g)=>{const y=_.transform,T=fp(i,y);return{u_matrix:Hc(_,i,u,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Ie(i,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[T,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},hp=(_,i,u,p,g,y)=>{const T=_.lineAtlas,C=fp(i,_.transform),I=u.layout.get("line-cap")==="round",L=T.getDash(p.from,I),O=T.getDash(p.to,I),U=L.width*g.fromScale,X=O.width*g.toScale;return l.e(Dh(_,i,u,y),{u_patternscale_a:[C/U,-L.height/2],u_patternscale_b:[C/X,-O.height/2],u_sdfgamma:T.width/(256*Math.min(U,X)*_.pixelRatio)/2,u_image:0,u_tex_y_a:L.y,u_tex_y_b:O.y,u_mix:g.t})};function fp(_,i){return 1/Ie(_,1,i.tileZoom)}function Hc(_,i,u,p){return _.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const dp=(_,i,u,p,g)=>{return{u_matrix:_,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(T=g.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(y=g.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:pp(g.paint.get("raster-hue-rotate"))};var y,T};function pp(_){_*=Math.PI/180;const i=Math.sin(_),u=Math.cos(_);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const Lh=(_,i,u,p,g,y,T,C,I,L)=>{const O=g.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:O.cameraToCenterDistance,u_pitch:O.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:O.width/O.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:y,u_label_plane_matrix:T,u_coord_matrix:C,u_is_text:+I,u_pitch_with_map:+p,u_texsize:L,u_texture:0}},Fh=(_,i,u,p,g,y,T,C,I,L,O)=>{const U=g.transform;return l.e(Lh(_,i,u,p,g,y,T,C,I,L),{u_gamma_scale:p?Math.cos(U._pitch)*U.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:1})},ro=(_,i,u,p,g,y,T,C,I,L)=>l.e(Fh(_,i,u,p,g,y,T,C,!0,I),{u_texsize_icon:L,u_texture_icon:1}),qc=(_,i,u)=>({u_matrix:_,u_opacity:i,u_color:u}),ta=(_,i,u,p,g,y)=>l.e(function(T,C,I,L){const O=I.imageManager.getPattern(T.from.toString()),U=I.imageManager.getPattern(T.to.toString()),{width:X,height:ue}=I.imageManager.getPixelSize(),ce=Math.pow(2,L.tileID.overscaledZ),fe=L.tileSize*Math.pow(2,I.transform.tileZoom)/ce,oe=fe*(L.tileID.canonical.x+L.tileID.wrap*ce),Me=fe*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[X,ue],u_mix:C.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/Ie(L,1,I.transform.tileZoom),u_pixel_coord_upper:[oe>>16,Me>>16],u_pixel_coord_lower:[65535&oe,65535&Me]}}(p,y,u,g),{u_matrix:_,u_opacity:i}),Zc={fillExtrusion:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_lightpos:new l.aP(_,i.u_lightpos),u_lightintensity:new l.aM(_,i.u_lightintensity),u_lightcolor:new l.aP(_,i.u_lightcolor),u_vertical_gradient:new l.aM(_,i.u_vertical_gradient),u_opacity:new l.aM(_,i.u_opacity)}),fillExtrusionPattern:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_lightpos:new l.aP(_,i.u_lightpos),u_lightintensity:new l.aM(_,i.u_lightintensity),u_lightcolor:new l.aP(_,i.u_lightcolor),u_vertical_gradient:new l.aM(_,i.u_vertical_gradient),u_height_factor:new l.aM(_,i.u_height_factor),u_image:new l.aL(_,i.u_image),u_texsize:new l.aQ(_,i.u_texsize),u_pixel_coord_upper:new l.aQ(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(_,i.u_pixel_coord_lower),u_scale:new l.aP(_,i.u_scale),u_fade:new l.aM(_,i.u_fade),u_opacity:new l.aM(_,i.u_opacity)}),fill:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix)}),fillPattern:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_image:new l.aL(_,i.u_image),u_texsize:new l.aQ(_,i.u_texsize),u_pixel_coord_upper:new l.aQ(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(_,i.u_pixel_coord_lower),u_scale:new l.aP(_,i.u_scale),u_fade:new l.aM(_,i.u_fade)}),fillOutline:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_world:new l.aQ(_,i.u_world)}),fillOutlinePattern:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_world:new l.aQ(_,i.u_world),u_image:new l.aL(_,i.u_image),u_texsize:new l.aQ(_,i.u_texsize),u_pixel_coord_upper:new l.aQ(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(_,i.u_pixel_coord_lower),u_scale:new l.aP(_,i.u_scale),u_fade:new l.aM(_,i.u_fade)}),circle:(_,i)=>({u_camera_to_center_distance:new l.aM(_,i.u_camera_to_center_distance),u_scale_with_map:new l.aL(_,i.u_scale_with_map),u_pitch_with_map:new l.aL(_,i.u_pitch_with_map),u_extrude_scale:new l.aQ(_,i.u_extrude_scale),u_device_pixel_ratio:new l.aM(_,i.u_device_pixel_ratio),u_matrix:new l.aN(_,i.u_matrix)}),collisionBox:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_camera_to_center_distance:new l.aM(_,i.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(_,i.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(_,i.u_extrude_scale),u_overscale_factor:new l.aM(_,i.u_overscale_factor)}),collisionCircle:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_inv_matrix:new l.aN(_,i.u_inv_matrix),u_camera_to_center_distance:new l.aM(_,i.u_camera_to_center_distance),u_viewport_size:new l.aQ(_,i.u_viewport_size)}),debug:(_,i)=>({u_color:new l.aR(_,i.u_color),u_matrix:new l.aN(_,i.u_matrix),u_overlay:new l.aL(_,i.u_overlay),u_overlay_scale:new l.aM(_,i.u_overlay_scale)}),clippingMask:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix)}),heatmap:(_,i)=>({u_extrude_scale:new l.aM(_,i.u_extrude_scale),u_intensity:new l.aM(_,i.u_intensity),u_matrix:new l.aN(_,i.u_matrix)}),heatmapTexture:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_world:new l.aQ(_,i.u_world),u_image:new l.aL(_,i.u_image),u_color_ramp:new l.aL(_,i.u_color_ramp),u_opacity:new l.aM(_,i.u_opacity)}),hillshade:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_image:new l.aL(_,i.u_image),u_latrange:new l.aQ(_,i.u_latrange),u_light:new l.aQ(_,i.u_light),u_shadow:new l.aR(_,i.u_shadow),u_highlight:new l.aR(_,i.u_highlight),u_accent:new l.aR(_,i.u_accent)}),hillshadePrepare:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_image:new l.aL(_,i.u_image),u_dimension:new l.aQ(_,i.u_dimension),u_zoom:new l.aM(_,i.u_zoom),u_unpack:new l.aO(_,i.u_unpack)}),line:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_ratio:new l.aM(_,i.u_ratio),u_device_pixel_ratio:new l.aM(_,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(_,i.u_units_to_pixels)}),lineGradient:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_ratio:new l.aM(_,i.u_ratio),u_device_pixel_ratio:new l.aM(_,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(_,i.u_units_to_pixels),u_image:new l.aL(_,i.u_image),u_image_height:new l.aM(_,i.u_image_height)}),linePattern:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_texsize:new l.aQ(_,i.u_texsize),u_ratio:new l.aM(_,i.u_ratio),u_device_pixel_ratio:new l.aM(_,i.u_device_pixel_ratio),u_image:new l.aL(_,i.u_image),u_units_to_pixels:new l.aQ(_,i.u_units_to_pixels),u_scale:new l.aP(_,i.u_scale),u_fade:new l.aM(_,i.u_fade)}),lineSDF:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_ratio:new l.aM(_,i.u_ratio),u_device_pixel_ratio:new l.aM(_,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(_,i.u_units_to_pixels),u_patternscale_a:new l.aQ(_,i.u_patternscale_a),u_patternscale_b:new l.aQ(_,i.u_patternscale_b),u_sdfgamma:new l.aM(_,i.u_sdfgamma),u_image:new l.aL(_,i.u_image),u_tex_y_a:new l.aM(_,i.u_tex_y_a),u_tex_y_b:new l.aM(_,i.u_tex_y_b),u_mix:new l.aM(_,i.u_mix)}),raster:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_tl_parent:new l.aQ(_,i.u_tl_parent),u_scale_parent:new l.aM(_,i.u_scale_parent),u_buffer_scale:new l.aM(_,i.u_buffer_scale),u_fade_t:new l.aM(_,i.u_fade_t),u_opacity:new l.aM(_,i.u_opacity),u_image0:new l.aL(_,i.u_image0),u_image1:new l.aL(_,i.u_image1),u_brightness_low:new l.aM(_,i.u_brightness_low),u_brightness_high:new l.aM(_,i.u_brightness_high),u_saturation_factor:new l.aM(_,i.u_saturation_factor),u_contrast_factor:new l.aM(_,i.u_contrast_factor),u_spin_weights:new l.aP(_,i.u_spin_weights)}),symbolIcon:(_,i)=>({u_is_size_zoom_constant:new l.aL(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(_,i.u_is_size_feature_constant),u_size_t:new l.aM(_,i.u_size_t),u_size:new l.aM(_,i.u_size),u_camera_to_center_distance:new l.aM(_,i.u_camera_to_center_distance),u_pitch:new l.aM(_,i.u_pitch),u_rotate_symbol:new l.aL(_,i.u_rotate_symbol),u_aspect_ratio:new l.aM(_,i.u_aspect_ratio),u_fade_change:new l.aM(_,i.u_fade_change),u_matrix:new l.aN(_,i.u_matrix),u_label_plane_matrix:new l.aN(_,i.u_label_plane_matrix),u_coord_matrix:new l.aN(_,i.u_coord_matrix),u_is_text:new l.aL(_,i.u_is_text),u_pitch_with_map:new l.aL(_,i.u_pitch_with_map),u_texsize:new l.aQ(_,i.u_texsize),u_texture:new l.aL(_,i.u_texture)}),symbolSDF:(_,i)=>({u_is_size_zoom_constant:new l.aL(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(_,i.u_is_size_feature_constant),u_size_t:new l.aM(_,i.u_size_t),u_size:new l.aM(_,i.u_size),u_camera_to_center_distance:new l.aM(_,i.u_camera_to_center_distance),u_pitch:new l.aM(_,i.u_pitch),u_rotate_symbol:new l.aL(_,i.u_rotate_symbol),u_aspect_ratio:new l.aM(_,i.u_aspect_ratio),u_fade_change:new l.aM(_,i.u_fade_change),u_matrix:new l.aN(_,i.u_matrix),u_label_plane_matrix:new l.aN(_,i.u_label_plane_matrix),u_coord_matrix:new l.aN(_,i.u_coord_matrix),u_is_text:new l.aL(_,i.u_is_text),u_pitch_with_map:new l.aL(_,i.u_pitch_with_map),u_texsize:new l.aQ(_,i.u_texsize),u_texture:new l.aL(_,i.u_texture),u_gamma_scale:new l.aM(_,i.u_gamma_scale),u_device_pixel_ratio:new l.aM(_,i.u_device_pixel_ratio),u_is_halo:new l.aL(_,i.u_is_halo)}),symbolTextAndIcon:(_,i)=>({u_is_size_zoom_constant:new l.aL(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(_,i.u_is_size_feature_constant),u_size_t:new l.aM(_,i.u_size_t),u_size:new l.aM(_,i.u_size),u_camera_to_center_distance:new l.aM(_,i.u_camera_to_center_distance),u_pitch:new l.aM(_,i.u_pitch),u_rotate_symbol:new l.aL(_,i.u_rotate_symbol),u_aspect_ratio:new l.aM(_,i.u_aspect_ratio),u_fade_change:new l.aM(_,i.u_fade_change),u_matrix:new l.aN(_,i.u_matrix),u_label_plane_matrix:new l.aN(_,i.u_label_plane_matrix),u_coord_matrix:new l.aN(_,i.u_coord_matrix),u_is_text:new l.aL(_,i.u_is_text),u_pitch_with_map:new l.aL(_,i.u_pitch_with_map),u_texsize:new l.aQ(_,i.u_texsize),u_texsize_icon:new l.aQ(_,i.u_texsize_icon),u_texture:new l.aL(_,i.u_texture),u_texture_icon:new l.aL(_,i.u_texture_icon),u_gamma_scale:new l.aM(_,i.u_gamma_scale),u_device_pixel_ratio:new l.aM(_,i.u_device_pixel_ratio),u_is_halo:new l.aL(_,i.u_is_halo)}),background:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_opacity:new l.aM(_,i.u_opacity),u_color:new l.aR(_,i.u_color)}),backgroundPattern:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_opacity:new l.aM(_,i.u_opacity),u_image:new l.aL(_,i.u_image),u_pattern_tl_a:new l.aQ(_,i.u_pattern_tl_a),u_pattern_br_a:new l.aQ(_,i.u_pattern_br_a),u_pattern_tl_b:new l.aQ(_,i.u_pattern_tl_b),u_pattern_br_b:new l.aQ(_,i.u_pattern_br_b),u_texsize:new l.aQ(_,i.u_texsize),u_mix:new l.aM(_,i.u_mix),u_pattern_size_a:new l.aQ(_,i.u_pattern_size_a),u_pattern_size_b:new l.aQ(_,i.u_pattern_size_b),u_scale_a:new l.aM(_,i.u_scale_a),u_scale_b:new l.aM(_,i.u_scale_b),u_pixel_coord_upper:new l.aQ(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(_,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(_,i.u_tile_units_to_pixels)}),terrain:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_texture:new l.aL(_,i.u_texture),u_ele_delta:new l.aM(_,i.u_ele_delta)}),terrainDepth:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_ele_delta:new l.aM(_,i.u_ele_delta)}),terrainCoords:(_,i)=>({u_matrix:new l.aN(_,i.u_matrix),u_texture:new l.aL(_,i.u_texture),u_terrain_coords_id:new l.aM(_,i.u_terrain_coords_id),u_ele_delta:new l.aM(_,i.u_ele_delta)})};class Xc{constructor(i,u,p){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Vl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Kc{constructor(i,u,p,g){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const y=i.gl;this.buffer=y.createBuffer(),i.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){const g=u.attributes[this.attributes[p].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,p){for(let g=0;g<this.attributes.length;g++){const y=this.attributes[g],T=u.attributes[y.name];T!==void 0&&i.vertexAttribPointer(T,y.components,i[Vl[y.type]],!1,this.itemSize,y.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Vo=new WeakMap;function Fs(_){var i;if(Vo.has(_))return Vo.get(_);{const u=(i=_.getParameter(_.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Vo.set(_,u),u}}class fr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Yc extends fr{getDefault(){return l.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Fi extends fr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class zi extends fr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class zh extends fr{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Jc extends fr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Qc extends fr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Oh extends fr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Nh extends fr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class eu extends fr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Bh extends fr{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Uh extends fr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class tu extends fr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class mp extends fr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class gp extends fr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class jo extends fr{getDefault(){return l.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Ug extends fr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Vg extends fr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class jg extends fr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class $g extends fr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Gg extends fr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Wg extends fr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Vh extends fr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class ru extends fr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class jh extends fr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class $h extends fr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class $o extends fr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class _p extends fr{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class yp extends fr{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const p=this.gl;Fs(p)?p.bindVertexArray(i):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Gh extends fr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class no extends fr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class xp extends fr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class zs extends fr{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Go extends zs{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class vp extends zs{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Wh extends zs{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class vr{constructor(i,u,p,g,y){this.context=i,this.width=u,this.height=p;const T=i.gl,C=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Go(i,C),g)this.depthAttachment=y?new Wh(i,C):new vp(i,C);else if(y)throw new Error("Stencil cannot be setted without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class Hr{constructor(i,u,p){this.blendFunction=i,this.blendColor=u,this.mask=p}}Hr.Replace=[1,0],Hr.disabled=new Hr(Hr.Replace,l.aT.transparent,[!1,!1,!1,!1]),Hr.unblended=new Hr(Hr.Replace,l.aT.transparent,[!0,!0,!0,!0]),Hr.alphaBlended=new Hr([1,771],l.aT.transparent,[!0,!0,!0,!0]);class Hg{constructor(i){var u,p;if(this.gl=i,this.clearColor=new Yc(this),this.clearDepth=new Fi(this),this.clearStencil=new zi(this),this.colorMask=new zh(this),this.depthMask=new Jc(this),this.stencilMask=new Qc(this),this.stencilFunc=new Oh(this),this.stencilOp=new Nh(this),this.stencilTest=new eu(this),this.depthRange=new Bh(this),this.depthTest=new Uh(this),this.depthFunc=new tu(this),this.blend=new mp(this),this.blendFunc=new gp(this),this.blendColor=new jo(this),this.blendEquation=new Ug(this),this.cullFace=new Vg(this),this.cullFaceSide=new jg(this),this.frontFace=new $g(this),this.program=new Gg(this),this.activeTexture=new Wg(this),this.viewport=new Vh(this),this.bindFramebuffer=new ru(this),this.bindRenderbuffer=new jh(this),this.bindTexture=new $h(this),this.bindVertexBuffer=new $o(this),this.bindElementBuffer=new _p(this),this.bindVertexArray=new yp(this),this.pixelStoreUnpack=new Gh(this),this.pixelStoreUnpackPremultiplyAlpha=new no(this),this.pixelStoreUnpackFlipY=new xp(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Fs(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new Xc(this,i,u)}createVertexBuffer(i,u,p){return new Kc(this,i,u,p)}createRenderbuffer(i,u,p){const g=this.gl,y=g.createRenderbuffer();return this.bindRenderbuffer.set(y),g.renderbufferStorage(g.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),y}createFramebuffer(i,u,p,g){return new vr(this,i,u,p,g)}clear({color:i,depth:u,stencil:p}){const g=this.gl;let y=0;i&&(y|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(y|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(y|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(y)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){l.aG(i.blendFunction,Hr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Fs(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return Fs(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class dr{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}dr.ReadOnly=!1,dr.ReadWrite=!0,dr.disabled=new dr(519,dr.ReadOnly,[0,1]);const io=7680;class qr{constructor(i,u,p,g,y,T){this.test=i,this.ref=u,this.mask=p,this.fail=g,this.depthFail=y,this.pass=T}}qr.disabled=new qr({func:519,mask:0},0,0,io,io,io);class jr{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}let jl;function wp(_,i,u,p,g,y,T){const C=_.context,I=C.gl,L=_.useProgram("collisionBox"),O=[];let U=0,X=0;for(let ge=0;ge<p.length;ge++){const De=p[ge],He=i.getTile(De),qe=He.getBucket(u);if(!qe)continue;let tt=De.posMatrix;g[0]===0&&g[1]===0||(tt=_.translatePosMatrix(De.posMatrix,He,g,y));const ct=T?qe.textCollisionBox:qe.iconCollisionBox,st=qe.collisionCircleArray;if(st.length>0){const _t=l.Z(),Nt=tt;l.aU(_t,qe.placementInvProjMatrix,_.transform.glCoordMatrix),l.aU(_t,_t,qe.placementViewportMatrix),O.push({circleArray:st,circleOffset:X,transform:Nt,invTransform:_t,coord:De}),U+=st.length/4,X=U}ct&&L.draw(C,I.LINES,dr.disabled,qr.disabled,_.colorModeForRenderPass(),jr.disabled,Mh(tt,_.transform,He),_.style.map.terrain&&_.style.map.terrain.getTerrainData(De),u.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,null,_.transform.zoom,null,null,ct.collisionVertexBuffer)}if(!T||!O.length)return;const ue=_.useProgram("collisionCircle"),ce=new l.aV;ce.resize(4*U),ce._trim();let fe=0;for(const ge of O)for(let De=0;De<ge.circleArray.length/4;De++){const He=4*De,qe=ge.circleArray[He+0],tt=ge.circleArray[He+1],ct=ge.circleArray[He+2],st=ge.circleArray[He+3];ce.emplace(fe++,qe,tt,ct,st,0),ce.emplace(fe++,qe,tt,ct,st,1),ce.emplace(fe++,qe,tt,ct,st,2),ce.emplace(fe++,qe,tt,ct,st,3)}(!jl||jl.length<2*U)&&(jl=function(ge){const De=2*ge,He=new l.aX;He.resize(De),He._trim();for(let qe=0;qe<De;qe++){const tt=6*qe;He.uint16[tt+0]=4*qe+0,He.uint16[tt+1]=4*qe+1,He.uint16[tt+2]=4*qe+2,He.uint16[tt+3]=4*qe+2,He.uint16[tt+4]=4*qe+3,He.uint16[tt+5]=4*qe+0}return He}(U));const oe=C.createIndexBuffer(jl,!0),Me=C.createVertexBuffer(ce,l.aW.members,!0);for(const ge of O){const De={u_matrix:ge.transform,u_inv_matrix:ge.invTransform,u_camera_to_center_distance:(Ve=_.transform).cameraToCenterDistance,u_viewport_size:[Ve.width,Ve.height]};ue.draw(C,I.TRIANGLES,dr.disabled,qr.disabled,_.colorModeForRenderPass(),jr.disabled,De,_.style.map.terrain&&_.style.map.terrain.getTerrainData(ge.coord),u.id,Me,oe,l.S.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,_.transform.zoom,null,null,null)}var Ve;Me.destroy(),oe.destroy()}jr.disabled=new jr(!1,1029,2305),jr.backCCW=new jr(!0,1029,2305);const Hh=l.ao(new Float32Array(16));function nu(_,i,u,p,g,y){const{horizontalAlign:T,verticalAlign:C}=l.au(_);return new l.P((-(T-.5)*i/g+p[0])*y,(-(C-.5)*u/g+p[1])*y)}function iu(_,i,u,p,g,y,T,C,I,L,O){const U=_.text.placedSymbolArray,X=_.text.dynamicLayoutVertexArray,ue=_.icon.dynamicLayoutVertexArray,ce={};X.clear();for(let fe=0;fe<U.length;fe++){const oe=U.get(fe),Me=oe.hidden||!oe.crossTileID||_.allowVerticalPlacement&&!oe.placedOrientation?null:p[oe.crossTileID];if(Me){const Ve=new l.P(oe.anchorX,oe.anchorY),ge=Fr(Ve,u?T:y,O),De=Na(g.cameraToCenterDistance,ge.signedDistanceFromCamera);let He=l.aj(_.textSizeData,I,oe)*De/l.ap;u&&(He*=_.tilePixelRatio/C);const{width:qe,height:tt,anchor:ct,textOffset:st,textBoxScale:_t}=Me,Nt=nu(ct,qe,tt,st,_t,He),or=u?Fr(Ve.add(Nt),y,O).point:ge.point.add(i?Nt.rotate(-g.angle):Nt),Tt=_.allowVerticalPlacement&&oe.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let qt=0;qt<oe.numGlyphs;qt++)l.ak(X,or,Tt);L&&oe.associatedIconIndex>=0&&(ce[oe.associatedIconIndex]={shiftedAnchor:or,angle:Tt})}else ie(oe.numGlyphs,X)}if(L){ue.clear();const fe=_.icon.placedSymbolArray;for(let oe=0;oe<fe.length;oe++){const Me=fe.get(oe);if(Me.hidden)ie(Me.numGlyphs,ue);else{const Ve=ce[oe];if(Ve)for(let ge=0;ge<Me.numGlyphs;ge++)l.ak(ue,Ve.shiftedAnchor,Ve.angle);else ie(Me.numGlyphs,ue)}}_.icon.dynamicLayoutVertexBuffer.updateData(ue)}_.text.dynamicLayoutVertexBuffer.updateData(X)}function qh(_,i,u){return u.iconsInText&&i?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function au(_,i,u,p,g,y,T,C,I,L,O,U){const X=_.context,ue=X.gl,ce=_.transform,fe=C==="map",oe=I==="map",Me=C!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ve=fe&&!oe&&!Me,ge=!u.layout.get("symbol-sort-key").isConstant();let De=!1;const He=_.depthModeForSublayer(0,dr.ReadOnly),qe=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),tt=[];for(const ct of p){const st=i.getTile(ct),_t=st.getBucket(u);if(!_t)continue;const Nt=g?_t.text:_t.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;const or=Nt.programConfigurations.get(u.id),Tt=g||_t.sdfIcons,qt=g?_t.textSizeData:_t.iconSizeData,Ut=oe||ce.pitch!==0,Tr=_.useProgram(qh(Tt,g,_t),or),sr=l.ah(qt,ce.zoom),ir=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ct);let lr,sn,Ir,Un,Sn=[0,0],fn=null;if(g)sn=st.glyphAtlasTexture,Ir=ue.LINEAR,lr=st.glyphAtlasTexture.size,_t.iconsInText&&(Sn=st.imageAtlasTexture.size,fn=st.imageAtlasTexture,Un=Ut||_.options.rotating||_.options.zooming||qt.kind==="composite"||qt.kind==="camera"?ue.LINEAR:ue.NEAREST);else{const on=u.layout.get("icon-size").constantOr(0)!==1||_t.iconsNeedLinear;sn=st.imageAtlasTexture,Ir=Tt||_.options.rotating||_.options.zooming||on||Ut?ue.LINEAR:ue.NEAREST,lr=st.imageAtlasTexture.size}const Bi=Ie(st,1,_.transform.zoom),Or=xt(ct.posMatrix,oe,fe,_.transform,Bi),Va=Li(ct.posMatrix,oe,fe,_.transform,Bi),ja=qe&&_t.hasTextData(),Us=u.layout.get("icon-text-fit")!=="none"&&ja&&_t.hasIconData();if(Me){const on=_.style.map.terrain?(wi,ln)=>_.style.map.terrain.getElevation(ct,wi,ln):null,Tn=u.layout.get("text-rotation-alignment")==="map";wt(_t,ct.posMatrix,_,g,Or,Va,oe,L,Tn,on)}const co=_.translatePosMatrix(ct.posMatrix,st,y,T),Yo=Me||g&&qe||Us?Hh:Or,Hn=_.translatePosMatrix(Va,st,y,T,!0),Vn=Tt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ii;ii=Tt?_t.iconsInText?ro(qt.kind,sr,Ve,oe,_,co,Yo,Hn,lr,Sn):Fh(qt.kind,sr,Ve,oe,_,co,Yo,Hn,g,lr):Lh(qt.kind,sr,Ve,oe,_,co,Yo,Hn,g,lr);const uo={program:Tr,buffers:Nt,uniformValues:ii,atlasTexture:sn,atlasTextureIcon:fn,atlasInterpolation:Ir,atlasInterpolationIcon:Un,isSDF:Tt,hasHalo:Vn};if(ge&&_t.canOverlap){De=!0;const on=Nt.segments.get();for(const Tn of on)tt.push({segments:new l.S([Tn]),sortKey:Tn.sortKey,state:uo,terrainData:ir})}else tt.push({segments:Nt.segments,sortKey:0,state:uo,terrainData:ir})}De&&tt.sort((ct,st)=>ct.sortKey-st.sortKey);for(const ct of tt){const st=ct.state;if(X.activeTexture.set(ue.TEXTURE0),st.atlasTexture.bind(st.atlasInterpolation,ue.CLAMP_TO_EDGE),st.atlasTextureIcon&&(X.activeTexture.set(ue.TEXTURE1),st.atlasTextureIcon&&st.atlasTextureIcon.bind(st.atlasInterpolationIcon,ue.CLAMP_TO_EDGE)),st.isSDF){const _t=st.uniformValues;st.hasHalo&&(_t.u_is_halo=1,Zh(st.buffers,ct.segments,u,_,st.program,He,O,U,_t,ct.terrainData)),_t.u_is_halo=0}Zh(st.buffers,ct.segments,u,_,st.program,He,O,U,st.uniformValues,ct.terrainData)}}function Zh(_,i,u,p,g,y,T,C,I,L){const O=p.context;g.draw(O,O.gl.TRIANGLES,y,T,C,jr.disabled,I,L,u.id,_.layoutVertexBuffer,_.indexBuffer,i,u.paint,p.transform.zoom,_.programConfigurations.get(u.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function $l(_,i,u,p,g){if(!u||!p||!p.imageAtlas)return;const y=p.imageAtlas.patternPositions;let T=y[u.to.toString()],C=y[u.from.toString()];if(!T&&C&&(T=C),!C&&T&&(C=T),!T||!C){const I=g.getPaintProperty(i);T=y[I],C=y[I]}T&&C&&_.setConstantPatternPositions(T,C)}function Gl(_,i,u,p,g,y,T){const C=_.context.gl,I="fill-pattern",L=u.paint.get(I),O=L&&L.constantOr(1),U=u.getCrossfadeParameters();let X,ue,ce,fe,oe;T?(ue=O&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=C.LINES):(ue=O?"fillPattern":"fill",X=C.TRIANGLES);const Me=L.constantOr(null);for(const Ve of p){const ge=i.getTile(Ve);if(O&&!ge.patternsLoaded())continue;const De=ge.getBucket(u);if(!De)continue;const He=De.programConfigurations.get(u.id),qe=_.useProgram(ue,He),tt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ve);O&&(_.context.activeTexture.set(C.TEXTURE0),ge.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),He.updatePaintBuffers(U)),$l(He,I,Me,ge,u);const ct=tt?Ve:null,st=_.translatePosMatrix(ct?ct.posMatrix:Ve.posMatrix,ge,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(T){fe=De.indexBuffer2,oe=De.segments2;const _t=[C.drawingBufferWidth,C.drawingBufferHeight];ce=ue==="fillOutlinePattern"&&O?Wc(st,_,U,ge,_t):Gc(st,_t)}else fe=De.indexBuffer,oe=De.segments,ce=O?Ph(st,_,U,ge):lp(st);qe.draw(_.context,X,g,_.stencilModeForClipping(Ve),y,jr.disabled,ce,tt,u.id,De.layoutVertexBuffer,fe,oe,u.paint,_.transform.zoom,He)}}function Wl(_,i,u,p,g,y,T){const C=_.context,I=C.gl,L="fill-extrusion-pattern",O=u.paint.get(L),U=O.constantOr(1),X=u.getCrossfadeParameters(),ue=u.paint.get("fill-extrusion-opacity"),ce=O.constantOr(null);for(const fe of p){const oe=i.getTile(fe),Me=oe.getBucket(u);if(!Me)continue;const Ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(fe),ge=Me.programConfigurations.get(u.id),De=_.useProgram(U?"fillExtrusionPattern":"fillExtrusion",ge);U&&(_.context.activeTexture.set(I.TEXTURE0),oe.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ge.updatePaintBuffers(X)),$l(ge,L,ce,oe,u);const He=_.translatePosMatrix(fe.posMatrix,oe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),qe=u.paint.get("fill-extrusion-vertical-gradient"),tt=U?Ds(He,_,qe,ue,fe,X,oe):Ih(He,_,qe,ue);De.draw(C,C.gl.TRIANGLES,g,y,T,jr.backCCW,tt,Ve,u.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,u.paint,_.transform.zoom,ge,_.style.map.terrain&&Me.centroidVertexBuffer)}}function qg(_,i,u,p,g,y,T){const C=_.context,I=C.gl,L=u.fbo;if(!L)return;const O=_.useProgram("hillshade"),U=_.style.map.terrain&&_.style.map.terrain.getTerrainData(i);C.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,L.colorAttachment.get()),O.draw(C,I.TRIANGLES,g,y,T,jr.disabled,((X,ue,ce,fe)=>{const oe=ce.paint.get("hillshade-shadow-color"),Me=ce.paint.get("hillshade-highlight-color"),Ve=ce.paint.get("hillshade-accent-color");let ge=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(ge-=X.transform.angle);const De=!X.options.moving;return{u_matrix:fe?fe.posMatrix:X.transform.calculatePosMatrix(ue.tileID.toUnwrapped(),De),u_image:0,u_latrange:Rh(0,ue.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),ge],u_shadow:oe,u_highlight:Me,u_accent:Ve}})(_,u,p,U?i:null),U,p.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function Xh(_,i,u,p,g,y){const T=_.context,C=T.gl,I=i.dem;if(I&&I.data){const L=I.dim,O=I.stride,U=I.getPixels();if(T.activeTexture.set(C.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||_.getTileTexture(O),i.demTexture){const ue=i.demTexture;ue.update(U,{premultiply:!1}),ue.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else i.demTexture=new ke(T,U,C.RGBA,{premultiply:!1}),i.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);T.activeTexture.set(C.TEXTURE0);let X=i.fbo;if(!X){const ue=new ke(T,{width:L,height:L,data:null},C.RGBA);ue.bind(C.LINEAR,C.CLAMP_TO_EDGE),X=i.fbo=T.createFramebuffer(L,L,!0,!1),X.colorAttachment.set(ue.texture)}T.bindFramebuffer.set(X.framebuffer),T.viewport.set([0,0,L,L]),_.useProgram("hillshadePrepare").draw(T,C.TRIANGLES,p,g,y,jr.disabled,((ue,ce)=>{const fe=ce.stride,oe=l.Z();return l.aS(oe,0,l.N,-l.N,0,0,1),l.$(oe,oe,[0,-l.N,0]),{u_matrix:oe,u_image:1,u_dimension:[fe,fe],u_zoom:ue.overscaledZ,u_unpack:ce.getUnpackVector()}})(i.tileID,I),null,u.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Zg(_,i,u,p,g,y){const T=p.paint.get("raster-fade-duration");if(!y&&T>0){const C=l.h.now(),I=(C-_.timeAdded)/T,L=i?(C-i.timeAdded)/T:-1,O=u.getSource(),U=g.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),X=!i||Math.abs(i.tileID.overscaledZ-U)>Math.abs(_.tileID.overscaledZ-U),ue=X&&_.refreshedUponExpiration?1:l.ad(X?I:1-L,0,1);return _.refreshedUponExpiration&&I>=1&&(_.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ue}:{opacity:ue,mix:0}}return{opacity:1,mix:0}}const bp=new l.aT(1,0,0,1),su=new l.aT(0,1,0,1),Kh=new l.aT(0,0,1,1),Sp=new l.aT(1,0,1,1),Tp=new l.aT(0,1,1,1);function Hl(_,i,u,p){lu(_,0,i+u/2,_.transform.width,u,p)}function ou(_,i,u,p){lu(_,i-u/2,0,u,_.transform.height,p)}function lu(_,i,u,p,g,y){const T=_.context,C=T.gl;C.enable(C.SCISSOR_TEST),C.scissor(i*_.pixelRatio,u*_.pixelRatio,p*_.pixelRatio,g*_.pixelRatio),T.clear({color:y}),C.disable(C.SCISSOR_TEST)}function Ep(_,i,u){const p=_.context,g=p.gl,y=u.posMatrix,T=_.useProgram("debug"),C=dr.disabled,I=qr.disabled,L=_.colorModeForRenderPass(),O="$debug",U=_.style.map.terrain&&_.style.map.terrain.getTerrainData(u);p.activeTexture.set(g.TEXTURE0);const X=i.getTileByID(u.key).latestRawTileData,ue=Math.floor((X&&X.byteLength||0)/1024),ce=i.getTile(u).tileSize,fe=512/Math.min(ce,512)*(u.overscaledZ/_.transform.zoom)*.5;let oe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(oe+=` => ${u.overscaledZ}`),function(Me,Ve){Me.initDebugOverlayCanvas();const ge=Me.debugOverlayCanvas,De=Me.context.gl,He=Me.debugOverlayCanvas.getContext("2d");He.clearRect(0,0,ge.width,ge.height),He.shadowColor="white",He.shadowBlur=2,He.lineWidth=1.5,He.strokeStyle="white",He.textBaseline="top",He.font="bold 36px Open Sans, sans-serif",He.fillText(Ve,5,5),He.strokeText(Ve,5,5),Me.debugOverlayTexture.update(ge),Me.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)}(_,`${oe} ${ue}kB`),T.draw(p,g.TRIANGLES,C,I,Hr.alphaBlended,jr.disabled,Ul(y,l.aT.transparent,fe),null,O,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),T.draw(p,g.LINE_STRIP,C,I,L,jr.disabled,Ul(y,l.aT.red),U,O,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Yr(_,i,u){const p=_.context,g=p.gl,y=_.colorModeForRenderPass(),T=new dr(g.LEQUAL,dr.ReadWrite,_.depthRangeFor3D),C=_.useProgram("terrain"),I=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,_.width,_.height]);for(const L of u){const O=_.renderToTexture.getTexture(L),U=i.getTerrainData(L.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,O.texture);const X={u_matrix:_.transform.calculatePosMatrix(L.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(_.transform.zoom)};C.draw(p,g.TRIANGLES,T,qr.disabled,y,jr.backCCW,X,U,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}}class ao{constructor(i,u){this.context=new Hg(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=kr.maxUnderzooming+kr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ba}resize(i,u,p){if(this.width=Math.floor(i*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new l.a_;u.emplaceBack(0,0),u.emplaceBack(l.N,0),u.emplaceBack(0,l.N),u.emplaceBack(l.N,l.N),this.tileExtentBuffer=i.createVertexBuffer(u,jc.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const p=new l.a_;p.emplaceBack(0,0),p.emplaceBack(l.N,0),p.emplaceBack(0,l.N),p.emplaceBack(l.N,l.N),this.debugBuffer=i.createVertexBuffer(p,jc.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const g=new l.V;g.emplaceBack(0,0,0,0),g.emplaceBack(l.N,0,l.N,0),g.emplaceBack(0,l.N,0,l.N),g.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,ft.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const y=new l.a_;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(y,jc.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const T=new l.a$;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(T);const C=new l.b0;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(C);const I=this.context.gl;this.stencilClearMode=new qr({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=l.Z();l.aS(p,0,this.width,this.height,0,0,1),l.a0(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,dr.disabled,this.stencilClearMode,Hr.disabled,jr.disabled,cp(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const p=this.context,g=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(Hr.disabled),p.setDepthMode(dr.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of u){const C=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,I=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);y.draw(p,g.TRIANGLES,dr.disabled,new qr({func:g.ALWAYS,mask:0},C,255,g.KEEP,g.KEEP,g.REPLACE),Hr.disabled,jr.disabled,cp(T.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new qr({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new qr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,p=i.sort((T,C)=>C.overscaledZ-T.overscaledZ),g=p[p.length-1].overscaledZ,y=p[0].overscaledZ-g+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const T={};for(let C=0;C<y;C++)T[C+g]=new qr({func:u.GEQUAL,mask:255},C+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=y,[T,p]}return[{[g]:qr.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Hr([i.CONSTANT_COLOR,i.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Hr.unblended:Hr.alphaBlended}depthModeForSublayer(i,u,p){if(!this.opaquePassEnabledForLayer())return dr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new dr(p||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,y={},T={},C={};for(const I in g){const L=g[I];L.used&&L.prepare(this.context),y[I]=L.getVisibleCoordinates(),T[I]=y[I].slice().reverse(),C[I]=L.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<p.length;I++)if(this.style._layers[p[I]].is3D()){this.opaquePassCutoff=I;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const I=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||I.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(L,O){const U=L.context,X=U.gl,ue=Hr.unblended,ce=new dr(X.LEQUAL,dr.ReadWrite,[0,1]),fe=O.getTerrainMesh(),oe=O.sourceCache.getRenderableTiles(),Me=L.useProgram("terrainDepth");U.bindFramebuffer.set(O.getFramebuffer("depth").framebuffer),U.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),U.clear({color:l.aT.transparent,depth:1});for(const Ve of oe){const ge=O.getTerrainData(Ve.tileID),De={u_matrix:L.transform.calculatePosMatrix(Ve.tileID.toUnwrapped()),u_ele_delta:O.getMeshFrameDelta(L.transform.zoom)};Me.draw(U,X.TRIANGLES,ce,qr.disabled,ue,jr.backCCW,De,ge,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments)}U.bindFramebuffer.set(null),U.viewport.set([0,0,L.width,L.height])}(this,this.style.map.terrain),function(L,O){const U=L.context,X=U.gl,ue=Hr.unblended,ce=new dr(X.LEQUAL,dr.ReadWrite,[0,1]),fe=O.getTerrainMesh(),oe=O.getCoordsTexture(),Me=O.sourceCache.getRenderableTiles(),Ve=L.useProgram("terrainCoords");U.bindFramebuffer.set(O.getFramebuffer("coords").framebuffer),U.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),U.clear({color:l.aT.transparent,depth:1}),O.coordsIndex=[];for(const ge of Me){const De=O.getTerrainData(ge.tileID);U.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,oe.texture);const He={u_matrix:L.transform.calculatePosMatrix(ge.tileID.toUnwrapped()),u_terrain_coords_id:(255-O.coordsIndex.length)/255,u_texture:0,u_ele_delta:O.getMeshFrameDelta(L.transform.zoom)};Ve.draw(U,X.TRIANGLES,ce,qr.disabled,ue,jr.backCCW,He,De,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments),O.coordsIndex.push(ge.tileID.key)}U.bindFramebuffer.set(null),U.viewport.set([0,0,L.width,L.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const I of p){const L=this.style._layers[I];if(!L.hasOffscreenPass()||L.isHidden(this.transform.zoom))continue;const O=T[L.source];(L.type==="custom"||O.length)&&this.renderLayer(this,g[L.source],L,O)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[p[this.currentLayer]],L=g[I.source],O=y[I.source];this._renderTileClippingMasks(I,O),this.renderLayer(this,L,I,O)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const I=this.style._layers[p[this.currentLayer]],L=g[I.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(I))continue;const O=(I.type==="symbol"?C:T)[I.source];this._renderTileClippingMasks(I,y[I.source]),this.renderLayer(this,L,I,O)}if(this.options.showTileBoundaries){const I=function(L,O){let U=null;const X=Object.values(L._layers).flatMap(oe=>oe.source&&!oe.isHidden(O)?[L.sourceCaches[oe.source]]:[]),ue=X.filter(oe=>oe.getSource().type==="vector"),ce=X.filter(oe=>oe.getSource().type!=="vector"),fe=oe=>{(!U||U.getSource().maxzoom<oe.getSource().maxzoom)&&(U=oe)};return ue.forEach(oe=>fe(oe)),U||ce.forEach(oe=>fe(oe)),U}(this.style,this.transform.zoom);I&&function(L,O,U){for(let X=0;X<U.length;X++)Ep(L,O,U[X])}(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const L=I.transform.padding;Hl(I,I.transform.height-(L.top||0),3,bp),Hl(I,L.bottom||0,3,su),ou(I,L.left||0,3,Kh),ou(I,I.transform.width-(L.right||0),3,Sp);const O=I.transform.centerPoint;(function(U,X,ue,ce){lu(U,X-1,ue-10,2,20,ce),lu(U,X-10,ue-1,20,2,ce)})(I,O.x,I.transform.height-O.y,Tp)}(this),this.context.setDefault()}renderLayer(i,u,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(y,T,C,I,L){if(y.renderPass!=="translucent")return;const O=qr.disabled,U=y.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,ue,ce,fe,oe,Me,Ve){const ge=ue.transform,De=oe==="map",He=Me==="map";for(const qe of X){const tt=fe.getTile(qe),ct=tt.getBucket(ce);if(!ct||!ct.text||!ct.text.segments.get().length)continue;const st=l.ah(ct.textSizeData,ge.zoom),_t=Ie(tt,1,ue.transform.zoom),Nt=xt(qe.posMatrix,He,De,ue.transform,_t),or=ce.layout.get("icon-text-fit")!=="none"&&ct.hasIconData();if(st){const Tt=Math.pow(2,ge.zoom-tt.tileID.overscaledZ);iu(ct,De,He,Ve,ge,Nt,qe.posMatrix,Tt,st,or,ue.style.map.terrain?(qt,Ut)=>ue.style.map.terrain.getElevation(qe,qt,Ut):null)}}}(I,y,C,T,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),L),C.paint.get("icon-opacity").constantOr(1)!==0&&au(y,T,C,I,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),O,U),C.paint.get("text-opacity").constantOr(1)!==0&&au(y,T,C,I,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),O,U),T.map.showCollisionBoxes&&(wp(y,T,C,I,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),!0),wp(y,T,C,I,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),!1))})(i,u,p,g,this.style.placement.variableOffsets);break;case"circle":(function(y,T,C,I){if(y.renderPass!=="translucent")return;const L=C.paint.get("circle-opacity"),O=C.paint.get("circle-stroke-width"),U=C.paint.get("circle-stroke-opacity"),X=!C.layout.get("circle-sort-key").isConstant();if(L.constantOr(1)===0&&(O.constantOr(1)===0||U.constantOr(1)===0))return;const ue=y.context,ce=ue.gl,fe=y.depthModeForSublayer(0,dr.ReadOnly),oe=qr.disabled,Me=y.colorModeForRenderPass(),Ve=[];for(let ge=0;ge<I.length;ge++){const De=I[ge],He=T.getTile(De),qe=He.getBucket(C);if(!qe)continue;const tt=qe.programConfigurations.get(C.id),ct=y.useProgram("circle",tt),st=qe.layoutVertexBuffer,_t=qe.indexBuffer,Nt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(De),or={programConfiguration:tt,program:ct,layoutVertexBuffer:st,indexBuffer:_t,uniformValues:Ls(y,De,He,C),terrainData:Nt};if(X){const Tt=qe.segments.get();for(const qt of Tt)Ve.push({segments:new l.S([qt]),sortKey:qt.sortKey,state:or})}else Ve.push({segments:qe.segments,sortKey:0,state:or})}X&&Ve.sort((ge,De)=>ge.sortKey-De.sortKey);for(const ge of Ve){const{programConfiguration:De,program:He,layoutVertexBuffer:qe,indexBuffer:tt,uniformValues:ct,terrainData:st}=ge.state;He.draw(ue,ce.TRIANGLES,fe,oe,Me,jr.disabled,ct,st,C.id,qe,tt,ge.segments,C.paint,y.transform.zoom,De)}})(i,u,p,g);break;case"heatmap":(function(y,T,C,I){if(C.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const L=y.context,O=L.gl,U=qr.disabled,X=new Hr([O.ONE,O.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(ue,ce,fe){const oe=ue.gl;ue.activeTexture.set(oe.TEXTURE1),ue.viewport.set([0,0,ce.width/4,ce.height/4]);let Me=fe.heatmapFbo;if(Me)oe.bindTexture(oe.TEXTURE_2D,Me.colorAttachment.get()),ue.bindFramebuffer.set(Me.framebuffer);else{const Ve=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,Ve),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),Me=fe.heatmapFbo=ue.createFramebuffer(ce.width/4,ce.height/4,!1,!1),function(ge,De,He,qe){var tt,ct;const st=ge.gl,_t=(tt=ge.HALF_FLOAT)!==null&&tt!==void 0?tt:st.UNSIGNED_BYTE,Nt=(ct=ge.RGBA16F)!==null&&ct!==void 0?ct:st.RGBA;st.texImage2D(st.TEXTURE_2D,0,Nt,De.width/4,De.height/4,0,st.RGBA,_t,null),qe.colorAttachment.set(He)}(ue,ce,Ve,Me)}})(L,y,C),L.clear({color:l.aT.transparent});for(let ue=0;ue<I.length;ue++){const ce=I[ue];if(T.hasRenderableParent(ce))continue;const fe=T.getTile(ce),oe=fe.getBucket(C);if(!oe)continue;const Me=oe.programConfigurations.get(C.id),Ve=y.useProgram("heatmap",Me),{zoom:ge}=y.transform;Ve.draw(L,O.TRIANGLES,dr.disabled,U,X,jr.disabled,Ng(ce.posMatrix,fe,ge,C.paint.get("heatmap-intensity")),null,C.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,C.paint,y.transform.zoom,Me)}L.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(L,O){const U=L.context,X=U.gl,ue=O.heatmapFbo;if(!ue)return;U.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ue.colorAttachment.get()),U.activeTexture.set(X.TEXTURE1);let ce=O.colorRampTexture;ce||(ce=O.colorRampTexture=new ke(U,O.colorRamp,X.RGBA)),ce.bind(X.LINEAR,X.CLAMP_TO_EDGE),L.useProgram("heatmapTexture").draw(U,X.TRIANGLES,dr.disabled,qr.disabled,L.colorModeForRenderPass(),jr.disabled,((fe,oe,Me,Ve)=>{const ge=l.Z();l.aS(ge,0,fe.width,fe.height,0,0,1);const De=fe.context.gl;return{u_matrix:ge,u_world:[De.drawingBufferWidth,De.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:oe.paint.get("heatmap-opacity")}})(L,O),null,O.id,L.viewportBuffer,L.quadTriangleIndexBuffer,L.viewportSegments,O.paint,L.transform.zoom)}(y,C))})(i,u,p,g);break;case"line":(function(y,T,C,I){if(y.renderPass!=="translucent")return;const L=C.paint.get("line-opacity"),O=C.paint.get("line-width");if(L.constantOr(1)===0||O.constantOr(1)===0)return;const U=y.depthModeForSublayer(0,dr.ReadOnly),X=y.colorModeForRenderPass(),ue=C.paint.get("line-dasharray"),ce=C.paint.get("line-pattern"),fe=ce.constantOr(1),oe=C.paint.get("line-gradient"),Me=C.getCrossfadeParameters(),Ve=fe?"linePattern":ue?"lineSDF":oe?"lineGradient":"line",ge=y.context,De=ge.gl;let He=!0;for(const qe of I){const tt=T.getTile(qe);if(fe&&!tt.patternsLoaded())continue;const ct=tt.getBucket(C);if(!ct)continue;const st=ct.programConfigurations.get(C.id),_t=y.context.program.get(),Nt=y.useProgram(Ve,st),or=He||Nt.program!==_t,Tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(qe),qt=ce.constantOr(null);if(qt&&tt.imageAtlas){const sr=tt.imageAtlas,ir=sr.patternPositions[qt.to.toString()],lr=sr.patternPositions[qt.from.toString()];ir&&lr&&st.setConstantPatternPositions(ir,lr)}const Ut=Tt?qe:null,Tr=fe?Bg(y,tt,C,Me,Ut):ue?hp(y,tt,C,ue,Me,Ut):oe?up(y,tt,C,ct.lineClipsArray.length,Ut):Dh(y,tt,C,Ut);if(fe)ge.activeTexture.set(De.TEXTURE0),tt.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),st.updatePaintBuffers(Me);else if(ue&&(or||y.lineAtlas.dirty))ge.activeTexture.set(De.TEXTURE0),y.lineAtlas.bind(ge);else if(oe){const sr=ct.gradients[C.id];let ir=sr.texture;if(C.gradientVersion!==sr.version){let lr=256;if(C.stepInterpolant){const sn=T.getSource().maxzoom,Ir=qe.canonical.z===sn?Math.ceil(1<<y.transform.maxZoom-qe.canonical.z):1;lr=l.ad(l.aY(ct.maxLineLength/l.N*1024*Ir),256,ge.maxTextureSize)}sr.gradient=l.aZ({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:lr,image:sr.gradient||void 0,clips:ct.lineClipsArray}),sr.texture?sr.texture.update(sr.gradient):sr.texture=new ke(ge,sr.gradient,De.RGBA),sr.version=C.gradientVersion,ir=sr.texture}ge.activeTexture.set(De.TEXTURE0),ir.bind(C.stepInterpolant?De.NEAREST:De.LINEAR,De.CLAMP_TO_EDGE)}Nt.draw(ge,De.TRIANGLES,U,y.stencilModeForClipping(qe),X,jr.disabled,Tr,Tt,C.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,C.paint,y.transform.zoom,st,ct.layoutVertexBuffer2),He=!1}})(i,u,p,g);break;case"fill":(function(y,T,C,I){const L=C.paint.get("fill-color"),O=C.paint.get("fill-opacity");if(O.constantOr(1)===0)return;const U=y.colorModeForRenderPass(),X=C.paint.get("fill-pattern"),ue=y.opaquePassEnabledForLayer()&&!X.constantOr(1)&&L.constantOr(l.aT.transparent).a===1&&O.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===ue){const ce=y.depthModeForSublayer(1,y.renderPass==="opaque"?dr.ReadWrite:dr.ReadOnly);Gl(y,T,C,I,ce,U,!1)}if(y.renderPass==="translucent"&&C.paint.get("fill-antialias")){const ce=y.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,dr.ReadOnly);Gl(y,T,C,I,ce,U,!0)}})(i,u,p,g);break;case"fill-extrusion":(function(y,T,C,I){const L=C.paint.get("fill-extrusion-opacity");if(L!==0&&y.renderPass==="translucent"){const O=new dr(y.context.gl.LEQUAL,dr.ReadWrite,y.depthRangeFor3D);if(L!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))Wl(y,T,C,I,O,qr.disabled,Hr.disabled),Wl(y,T,C,I,O,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const U=y.colorModeForRenderPass();Wl(y,T,C,I,O,qr.disabled,U)}}})(i,u,p,g);break;case"hillshade":(function(y,T,C,I){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const L=y.context,O=y.depthModeForSublayer(0,dr.ReadOnly),U=y.colorModeForRenderPass(),[X,ue]=y.renderPass==="translucent"?y.stencilConfigForOverlap(I):[{},I];for(const ce of ue){const fe=T.getTile(ce);fe.needsHillshadePrepare!==void 0&&fe.needsHillshadePrepare&&y.renderPass==="offscreen"?Xh(y,fe,C,O,qr.disabled,U):y.renderPass==="translucent"&&qg(y,ce,fe,C,O,X[ce.overscaledZ],U)}L.viewport.set([0,0,y.width,y.height])})(i,u,p,g);break;case"raster":(function(y,T,C,I){if(y.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!I.length)return;const L=y.context,O=L.gl,U=T.getSource(),X=y.useProgram("raster"),ue=y.colorModeForRenderPass(),[ce,fe]=U instanceof ot?[{},I]:y.stencilConfigForOverlap(I),oe=fe[fe.length-1].overscaledZ,Me=!y.options.moving;for(const Ve of fe){const ge=y.depthModeForSublayer(Ve.overscaledZ-oe,C.paint.get("raster-opacity")===1?dr.ReadWrite:dr.ReadOnly,O.LESS),De=T.getTile(Ve);De.registerFadeDuration(C.paint.get("raster-fade-duration"));const He=T.findLoadedParent(Ve,0),qe=Zg(De,He,T,C,y.transform,y.style.map.terrain);let tt,ct;const st=C.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;L.activeTexture.set(O.TEXTURE0),De.texture.bind(st,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),L.activeTexture.set(O.TEXTURE1),He?(He.texture.bind(st,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),tt=Math.pow(2,He.tileID.overscaledZ-De.tileID.overscaledZ),ct=[De.tileID.canonical.x*tt%1,De.tileID.canonical.y*tt%1]):De.texture.bind(st,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST);const _t=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ve),Nt=_t?Ve:null,or=Nt?Nt.posMatrix:y.transform.calculatePosMatrix(Ve.toUnwrapped(),Me),Tt=dp(or,ct||[0,0],tt||1,qe,C);U instanceof ot?X.draw(L,O.TRIANGLES,ge,qr.disabled,ue,jr.disabled,Tt,_t,C.id,U.boundsBuffer,y.quadTriangleIndexBuffer,U.boundsSegments):X.draw(L,O.TRIANGLES,ge,ce[Ve.overscaledZ],ue,jr.disabled,Tt,_t,C.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(i,u,p,g);break;case"background":(function(y,T,C,I){const L=C.paint.get("background-color"),O=C.paint.get("background-opacity");if(O===0)return;const U=y.context,X=U.gl,ue=y.transform,ce=ue.tileSize,fe=C.paint.get("background-pattern");if(y.isPatternMissing(fe))return;const oe=!fe&&L.a===1&&O===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==oe)return;const Me=qr.disabled,Ve=y.depthModeForSublayer(0,oe==="opaque"?dr.ReadWrite:dr.ReadOnly),ge=y.colorModeForRenderPass(),De=y.useProgram(fe?"backgroundPattern":"background"),He=I||ue.coveringTiles({tileSize:ce,terrain:y.style.map.terrain});fe&&(U.activeTexture.set(X.TEXTURE0),y.imageManager.bind(y.context));const qe=C.getCrossfadeParameters();for(const tt of He){const ct=I?tt.posMatrix:y.transform.calculatePosMatrix(tt.toUnwrapped()),st=fe?ta(ct,O,y,fe,{tileID:tt,tileSize:ce},qe):qc(ct,O,L),_t=y.style.map.terrain&&y.style.map.terrain.getTerrainData(tt);De.draw(U,X.TRIANGLES,Ve,Me,ge,jr.disabled,st,_t,C.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(i,0,p,g);break;case"custom":(function(y,T,C){const I=y.context,L=C.implementation;if(y.renderPass==="offscreen"){const O=L.prerender;O&&(y.setCustomLayerDefaults(),I.setColorMode(y.colorModeForRenderPass()),O.call(L,I.gl,y.transform.customLayerMatrix()),I.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),I.setColorMode(y.colorModeForRenderPass()),I.setStencilMode(qr.disabled);const O=L.renderingMode==="3d"?new dr(y.context.gl.LEQUAL,dr.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,dr.ReadOnly);I.setDepthMode(O),L.render(I.gl,y.transform.customLayerMatrix()),I.setDirty(),y.setBaseState(),I.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,u,p,g,y){if(!p[0]&&!p[1])return i;const T=y?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(T){const L=Math.sin(T),O=Math.cos(T);p=[p[0]*O-p[1]*L,p[0]*L+p[1]*O]}const C=[y?p[0]:Ie(u,p[0],this.transform.zoom),y?p[1]:Ie(u,p[1],this.transform.zoom),0],I=new Float32Array(16);return l.$(I,i,C),I}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!u||!p}useProgram(i,u){this.cache=this.cache||{};const p=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new $c(this.context,Wr[i],u,Zc[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ke(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class xi{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,p){const g=Math.pow(2,p),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const I=1/(C=l.ag([],C,i))[3]/u*g;return l.b3(C,C,[I,I,1/C[3],I])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const I=function(X,ue){var ce=ue[0],fe=ue[1],oe=ue[2],Me=ce*ce+fe*fe+oe*oe;return Me>0&&(Me=1/Math.sqrt(Me)),X[0]=ue[0]*Me,X[1]=ue[1]*Me,X[2]=ue[2]*Me,X}([],function(X,ue,ce){var fe=ue[0],oe=ue[1],Me=ue[2],Ve=ce[0],ge=ce[1],De=ce[2];return X[0]=oe*De-Me*ge,X[1]=Me*Ve-fe*De,X[2]=fe*ge-oe*Ve,X}([],Ce([],y[C[0]],y[C[1]]),Ce([],y[C[2]],y[C[1]]))),L=-((O=I)[0]*(U=y[C[1]])[0]+O[1]*U[1]+O[2]*U[2]);var O,U;return I.concat(L)});return new xi(y,T)}}class Wo{constructor(i,u){this.min=i,this.max=u,this.center=function(p,g,y){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,y){return p[0]=g[0]+y[0],p[1]=g[1]+y[1],p[2]=g[2]+y[2],p}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],p=Q(this.min),g=Q(this.max);for(let y=0;y<u.length;y++)p[y]=u[y]?this.min[y]:this.center[y],g[y]=u[y]?this.center[y]:this.max[y];return g[2]=this.max[2],new Wo(p,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<i.planes.length;g++){const y=i.planes[g];let T=0;for(let C=0;C<u.length;C++)l.b4(y,u[C])>=0&&T++;if(T===0)return 0;T!==u.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let y=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let C=0;C<i.points.length;C++){const I=i.points[C][g]-this.min[g];y=Math.min(y,I),T=Math.max(T,I)}if(T<0||y>this.max[g]-this.min[g])return 0}return 1}}class ql{constructor(i=0,u=0,p=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=g}interpolate(i,u,p){return u.top!=null&&i.top!=null&&(this.top=l.B.number(i.top,u.top,p)),u.bottom!=null&&i.bottom!=null&&(this.bottom=l.B.number(i.bottom,u.bottom,p)),u.left!=null&&i.left!=null&&(this.left=l.B.number(i.left,u.left,p)),u.right!=null&&i.right!=null&&(this.right=l.B.number(i.right,u.right,p)),this}getCenter(i,u){const p=l.ad((this.left+i-this.right)/2,0,i),g=l.ad((this.top+u-this.bottom)/2,0,u);return new l.P(p,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new ql(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class cu{constructor(i,u,p,g,y){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=y===void 0||!!y,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ql,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new cu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-l.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new l.A(4);return l.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,y){var T=g[0],C=g[1],I=g[2],L=g[3],O=Math.sin(y),U=Math.cos(y);p[0]=T*U+I*O,p[1]=C*U+L*O,p[2]=T*-O+I*U,p[3]=C*-O+L*U}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=l.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new l.b6(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new l.P(0,0)),g=this.pointCoordinate(new l.P(this.width,0)),y=this.pointCoordinate(new l.P(this.width,this.height)),T=this.pointCoordinate(new l.P(0,this.height)),C=Math.floor(Math.min(p.x,g.x,y.x,T.x)),I=Math.floor(Math.max(p.x,g.x,y.x,T.x)),L=1;for(let O=C-L;O<=I+L;O++)O!==0&&u.push(new l.b6(O,i))}return u}coveringTiles(i){var u,p;let g=this.coveringZoomLevel(i);const y=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),C=l.U.fromLngLat(this.center),I=Math.pow(2,g),L=[I*T.x,I*T.y,0],O=[I*C.x,I*C.y,0],U=xi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let X=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=g);const ue=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,ce=ge=>({aabb:new Wo([ge*I,0,0],[(ge+1)*I,I,0]),zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),fe=[],oe=[],Me=g,Ve=i.reparseOverscaled?y:g;if(this._renderWorldCopies)for(let ge=1;ge<=3;ge++)fe.push(ce(-ge)),fe.push(ce(ge));for(fe.push(ce(0));fe.length>0;){const ge=fe.pop(),De=ge.x,He=ge.y;let qe=ge.fullyVisible;if(!qe){const Nt=ge.aabb.intersects(U);if(Nt===0)continue;qe=Nt===2}const tt=i.terrain?L:O,ct=ge.aabb.distanceX(tt),st=ge.aabb.distanceY(tt),_t=Math.max(Math.abs(ct),Math.abs(st));if(ge.zoom===Me||_t>ue+(1<<Me-ge.zoom)-2&&ge.zoom>=X){const Nt=Me-ge.zoom,or=L[0]-.5-(De<<Nt),Tt=L[1]-.5-(He<<Nt);oe.push({tileID:new l.O(ge.zoom===Me?Ve:ge.zoom,ge.wrap,ge.zoom,De,He),distanceSq:te([O[0]-.5-De,O[1]-.5-He]),tileDistanceToCamera:Math.sqrt(or*or+Tt*Tt)})}else for(let Nt=0;Nt<4;Nt++){const or=(De<<1)+Nt%2,Tt=(He<<1)+(Nt>>1),qt=ge.zoom+1;let Ut=ge.aabb.quadrant(Nt);if(i.terrain){const Tr=new l.O(qt,ge.wrap,qt,or,Tt),sr=i.terrain.getMinMaxElevation(Tr),ir=(u=sr.minElevation)!==null&&u!==void 0?u:this.elevation,lr=(p=sr.maxElevation)!==null&&p!==void 0?p:this.elevation;Ut=new Wo([Ut.min[0],Ut.min[1],ir],[Ut.max[0],Ut.max[1],lr])}fe.push({aabb:Ut,zoom:qt,x:or,y:Tt,wrap:ge.wrap,fullyVisible:qe})}}return oe.sort((ge,De)=>ge.distanceSq-De.distanceSq).map(ge=>ge.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=l.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(i.lng)*this.worldSize,l.H(u)*this.worldSize)}unproject(i){return new l.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),p=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),y=l.U.fromLngLat(g.lngLat,g.altitude),T=l.U.fromLngLat(u,p),C=y.x-T.x,I=y.y-T.y,L=y.z-T.z,O=Math.sqrt(C*C+I*I+L*L),U=this.scaleZoom(this.cameraToCenterDistance/O/this.tileSize);this._elevation=p,this._center=u,this.zoom=U}setLocationAtPoint(i,u){const p=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(i),T=new l.U(y.x-(p.x-g.x),y.y-(p.y-g.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return l.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const X=u.pointCoordinate(i);if(X!=null)return X}const p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];l.ag(p,p,this.pixelMatrixInverse),l.ag(g,g,this.pixelMatrixInverse);const y=p[3],T=g[3],C=p[1]/y,I=g[1]/T,L=p[2]/y,O=g[2]/T,U=L===O?0:(0-L)/(O-L);return new l.U(l.B.number(p[0]/y,g[0]/T,U)/this.worldSize,l.B.number(C,I,U)/this.worldSize)}coordinatePoint(i,u=0,p=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,u,1];return l.ag(g,g,p),new l.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Te().extend(this.pointLocation(new l.P(0,i))).extend(this.pointLocation(new l.P(this.width,i))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Te([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const p=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const y=i.canonical,T=this.worldSize/this.zoomScale(y.z),C=y.x+Math.pow(2,y.z)*i.wrap,I=l.ao(new Float64Array(16));return l.$(I,I,[C*T,y.y*T,0]),l.a0(I,I,[T/l.N,T/l.N,1]),l.a1(I,u?this.alignedProjMatrix:this.projMatrix,I),g[p]=new Float32Array(I),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,p,g,y=-90,T=90,C=-180,I=180;const L=this.size,O=this._unmodified;if(this.latRange){const ue=this.latRange;y=l.H(ue[1])*this.worldSize,T=l.H(ue[0])*this.worldSize,i=T-y<L.y?L.y/(T-y):0}if(this.lngRange){const ue=this.lngRange;C=l.b5(l.G(ue[0])*this.worldSize,0,this.worldSize),I=l.b5(l.G(ue[1])*this.worldSize,0,this.worldSize),I<C&&(I+=this.worldSize),u=I-C<L.x?L.x/(I-C):0}const U=this.point,X=Math.max(u||0,i||0);if(X)return this.center=this.unproject(new l.P(u?(I+C)/2:U.x,i?(T+y)/2:U.y)),this.zoom+=this.scaleZoom(X),this._unmodified=O,void(this._constraining=!1);if(this.latRange){const ue=U.y,ce=L.y/2;ue-ce<y&&(g=y+ce),ue+ce>T&&(g=T-ce)}if(this.lngRange){const ue=(C+I)/2,ce=l.b5(U.x,ue-this.worldSize/2,ue+this.worldSize/2),fe=L.x/2;ce-fe<C&&(p=C+fe),ce+fe>I&&(p=I-fe)}p===void 0&&g===void 0||(this.center=this.unproject(new l.P(p!==void 0?p:U.x,g!==void 0?g:U.y)).wrap()),this._unmodified=O,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let g=l.ao(new Float64Array(16));l.a0(g,g,[this.width/2,-this.height/2,1]),l.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=l.ao(new Float64Array(16)),l.a0(g,g,[1,-1,1]),l.$(g,g,[-1,-1,0]),l.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this._minEleveationForCurrentTile),C=y-T*this._pixelPerMeter/Math.cos(this._pitch),I=T<0?C:y,L=Math.PI/2+this._pitch,O=this._fov*(.5+i.y/this.height),U=Math.sin(O)*I/Math.sin(l.ad(Math.PI-L-O,.01,Math.PI-.01)),X=this.getHorizon(),ue=2*Math.atan(X/this.cameraToCenterDistance)*(.5+i.y/(2*X)),ce=Math.sin(ue)*I/Math.sin(l.ad(Math.PI-L-ue,.01,Math.PI-.01)),fe=Math.min(U,ce),oe=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+I),Me=this.height/50;g=new Float64Array(16),l.b8(g,this._fov,this.width/this.height,Me,oe),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,l.a0(g,g,[1,-1,1]),l.$(g,g,[0,0,-this.cameraToCenterDistance]),l.b9(g,g,this._pitch),l.ae(g,g,this.angle),l.$(g,g,[-u,-p,0]),this.mercatorMatrix=l.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),l.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,g),l.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=l.as([],g),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Ve=this.width%2/2,ge=this.height%2/2,De=Math.cos(this.angle),He=Math.sin(this.angle),qe=u-Math.round(u)+De*Ve+He*ge,tt=p-Math.round(p)+De*ge+He*Ve,ct=new Float64Array(g);if(l.$(ct,ct,[qe>.5?qe-1:qe,tt>.5?tt-1:tt,0]),this.alignedProjMatrix=ct,g=l.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let p=u.x,g=u.y,y=u.x,T=u.y;for(const C of i)p=Math.min(p,C.x),g=Math.min(g,C.y),y=Math.max(y,C.x),T=Math.max(T,C.y);return[new l.P(p,g),new l.P(y,g),new l.P(y,T),new l.P(p,T),new l.P(p,g)]}}}function so(_,i){let u,p=!1,g=null,y=null;const T=()=>{g=null,p&&(_.apply(y,u),g=setTimeout(T,i),p=!1)};return(...C)=>(p=!0,y=this,u=C,g||T(),g)}class Zl{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=so(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,g),T=Math.round(u.lng*y)/y,C=Math.round(u.lat*y)/y,I=this._map.getBearing(),L=this._map.getPitch();let O="";if(O+=i?`/${T}/${C}/${p}`:`${p}/${C}/${T}`,(I||L)&&(O+="/"+Math.round(10*I)/10),L&&(O+=`/${Math.round(L)}`),this._hashName){const U=this._hashName;let X=!1;const ue=window.location.hash.slice(1).split("&").map(ce=>{const fe=ce.split("=")[0];return fe===U?(X=!0,`${fe}=${O}`):ce}).filter(ce=>ce);return X||ue.push(`${U}=${O}`),`#${ue.join("&")}`}return`#${O}`}}const Ho={linearity:.3,easing:l.ba(0,0,.3,1)},Cp=l.e({deceleration:2500,maxSpeed:1400},Ho),Ap=l.e({deceleration:20,maxSpeed:1400},Ho),kp=l.e({deceleration:1e3,maxSpeed:360},Ho),Ip=l.e({deceleration:1e3,maxSpeed:90},Ho);class Pp{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=l.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)u.zoom+=y.zoomDelta||0,u.bearing+=y.bearingDelta||0,u.pitch+=y.pitchDelta||0,y.panDelta&&u.pan._add(y.panDelta),y.around&&(u.around=y.around),y.pinchAround&&(u.pinchAround=y.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const y=Xl(u.pan.mag(),p,l.e({},Cp,i||{}));g.offset=u.pan.mult(y.amount/u.pan.mag()),g.center=this._map.transform.center,Ua(g,y)}if(u.zoom){const y=Xl(u.zoom,p,Ap);g.zoom=this._map.transform.zoom+y.amount,Ua(g,y)}if(u.bearing){const y=Xl(u.bearing,p,kp);g.bearing=this._map.transform.bearing+l.ad(y.amount,-179,179),Ua(g,y)}if(u.pitch){const y=Xl(u.pitch,p,Ip);g.pitch=this._map.transform.pitch+y.amount,Ua(g,y)}if(g.zoom||g.bearing){const y=u.pinchAround===void 0?u.around:u.pinchAround;g.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),l.e(g,{noMoveStart:!0})}}function Ua(_,i){(!_.duration||_.duration<i.duration)&&(_.duration=i.duration,_.easing=i.easing)}function Xl(_,i,u){const{maxSpeed:p,linearity:g,deceleration:y}=u,T=l.ad(_*g/(i/1e3),-p,p),C=Math.abs(T)/(y*g);return{easing:u.easing,duration:1e3*C,amount:T*(C/2)}}class Oi extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,g={}){const y=w.mousePos(u.getCanvasContainer(),p),T=u.unproject(y);super(i,l.e({point:y,lngLat:T,originalEvent:p},g)),this._defaultPrevented=!1,this.target=u}}class Kl extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){const g=i==="touchend"?p.changedTouches:p.touches,y=w.touchPos(u.getCanvasContainer(),g),T=y.map(I=>u.unproject(I)),C=y.reduce((I,L,O,U)=>I.add(L.div(U.length)),new l.P(0,0));super(i,{points:y,point:C,lngLats:T,lngLat:u.unproject(C),originalEvent:p}),this._defaultPrevented=!1}}class Mp extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Rp{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Mp(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new Oi(i.type,this._map,i))}mouseup(i){this._map.fire(new Oi(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Oi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Oi(i.type,this._map,i))}mouseover(i){this._map.fire(new Oi(i.type,this._map,i))}mouseout(i){this._map.fire(new Oi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Kl(i.type,this._map,i))}touchmove(i){this._map.fire(new Kl(i.type,this._map,i))}touchend(i){this._map.fire(new Kl(i.type,this._map,i))}touchcancel(i){this._map.fire(new Kl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Dp{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Oi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Oi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Oi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Os{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(l.P.convert(i),this._map.terrain)}}class Lp{constructor(i,u){this._map=i,this._tr=new Os(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const y=Math.min(g.x,p.x),T=Math.max(g.x,p.x),C=Math.min(g.y,p.y),I=Math.max(g.y,p.y);w.setTransform(this._box,`translate(${y}px,${C}px)`),this._box.style.width=T-y+"px",this._box.style.height=I-C+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const p=this._startPos,g=u;if(this.reset(),w.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:i})),{cameraAnimation:y=>y.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new l.k(i,{originalEvent:u}))}}function ra(_,i){if(_.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${i.length}`);const u={};for(let p=0;p<_.length;p++)u[_[p].identifier]=i[p];return u}class as{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const y=new l.P(0,0);for(const T of g)y._add(T);return y.div(g.length)}(u),this.touches=ra(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;const g=ra(p,u);for(const y in this.touches){const T=g[y];(!T||T.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class uu{constructor(i){this.singleTap=new as(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){const g=this.singleTap.touchend(i,u,p);if(g){const y=i.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(g)<30;if(y&&T||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class ss{constructor(i){this._tr=new Os(i),this._zoomIn=new uu({numTouches:1,numTaps:2}),this._zoomOut=new uu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){const g=this._zoomIn.touchend(i,u,p),y=this._zoomOut.touchend(i,u,p),T=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(g)},{originalEvent:i})}):y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(y)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class os{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=u.length?u[0]:u;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&w.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Xg={0:1,2:2};class Yh{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=w.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,p){const g=Xg[p];return u.buttons===void 0||(u.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return w.mouseButton(i)===this._eventButton}}class Fp{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const hu=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=function(i){i.preventDefault()}},qo=({enable:_,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const p=new Yh({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new os({clickTolerance:i,move:(g,y)=>({bearingDelta:(y.x-g.x)*u}),moveStateManager:p,enable:_,assignEvents:hu})},ls=({enable:_,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new Yh({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new os({clickTolerance:i,move:(g,y)=>({pitchDelta:(y.y-g.y)*u}),moveStateManager:p,enable:_,assignEvents:hu})};class Ft{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,p)}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);const g=ra(p,u),y=new l.P(0,0),T=new l.P(0,0);let C=0;for(const L in g){const O=g[L],U=this._touches[L];U&&(y._add(O),T._add(O.sub(U)),C++,g[L]=O)}if(this._touches=g,C<this._minTouches||!T.mag())return;const I=T.div(C);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(C),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){if(!this._firstTwoTouches)return;i.preventDefault();const[g,y]=this._firstTwoTouches,T=Ns(p,u,g),C=Ns(p,u,y);if(!T||!C)return;const I=this._aroundCenter?null:T.add(C).div(2);return this._move([T,C],I,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;const[g,y]=this._firstTwoTouches,T=Ns(p,u,g),C=Ns(p,u,y);T&&C||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ns(_,i,u){for(let p=0;p<_.length;p++)if(_[p].identifier===u)return i[p]}function Zo(_,i){return Math.log(_/i)/Math.LN2}class zp extends fu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Zo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zo(this._distance,p),pinchAround:u}}}function It(_,i){return 180*_.angleWith(i)/Math.PI}class Jh extends fu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:It(this._vector,p),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,p=It(i,this._startVector);return Math.abs(p)<u}}function Qh(_){return Math.abs(_.y)>Math.abs(_.x)}class Kg extends fu{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,p){super.touchstart(i,u,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,Qh(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),y=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,y,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,p){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,y=u.mag()>=2;if(!g&&!y)return;if(!g||!y)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=i.y>0==u.y>0;return Qh(i)&&Qh(u)&&T}}const ef={panStep:100,bearingStep:15,pitchStep:10};class Op{constructor(i){this._tr=new Os(i);const u=ef;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,g=0,y=0,T=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),y=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),y=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),T=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:C=>{const I=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:Np,zoom:u?Math.round(I.zoom)+u*(i.shiftKey?2:1):I.zoom,bearing:I.bearing+p*this._bearingStep,pitch:I.pitch+g*this._pitchStep,offset:[-y*this._panStep,-T*this._panStep],center:I.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Np(_){return _*(2-_)}const Bp=4.000244140625;class Yg{constructor(i,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new Os(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=l.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Bp==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,i),p=this._tr;this._around=l.L.convert(this._aroundCenter?p.center:p.unproject(u)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>Bp?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&I!==0&&(I=1/I);const L=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(L*I))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,g=this._easing;let y,T=!1;if(this._type==="wheel"&&p&&g){const C=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),I=g(C);y=l.B.number(p,u,I),C<1?this._frameId||(this._frameId=!0):T=!0}else y=u,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:y-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=l.bb;if(this._prevEase){const p=this._prevEase,g=(l.h.now()-p.start)/p.duration,y=p.easing(g+.01)-p.easing(g),T=.27/Math.sqrt(y*y+1e-4)*.01,C=Math.sqrt(.0729-T*T);u=l.ba(T,C,.25,1)}return this._prevEase={start:l.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class tf{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class rf{constructor(i){this._tr=new Os(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nf{constructor(){this._tap=new uu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,p){if(!this._swipePoint)if(this._tapTime){const g=u[0],y=i.timeStamp-this._tapTime<500,T=this._tapPoint.dist(g)<30;y&&T?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,u,p)}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=u[0],y=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(i,u,p);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class af{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class vi{constructor(i,u,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Bs{constructor(i,u,p,g){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Yl=_=>_.zoom||_.drag||_.pitch||_.rotate;class sf extends l.k{}function Jl(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class of{constructor(i,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,y)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=g.type==="renderFrame"?void 0:g,C={needsRenderFrame:!1},I={},L={},O=g.touches,U=O?this._getMapTouches(O):void 0,X=U?w.touchPos(this._el,U):w.mousePos(this._el,g);for(const{handlerName:fe,handler:oe,allowed:Me}of this._handlers){if(!oe.isEnabled())continue;let Ve;this._blockedByActive(L,Me,fe)?oe.reset():oe[y||g.type]&&(Ve=oe[y||g.type](g,X,U),this.mergeHandlerResult(C,I,Ve,fe,T),Ve&&Ve.needsRenderFrame&&this._triggerRenderFrame()),(Ve||oe.isActive())&&(L[fe]=oe)}const ue={};for(const fe in this._previousActiveHandlers)L[fe]||(ue[fe]=T);this._previousActiveHandlers=L,(Object.keys(ue).length||Jl(C))&&(this._changes.push([C,I,ue]),this._triggerRenderFrame()),(Object.keys(L).length||Jl(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=C;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Pp(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,y,T]of this._listeners)w.addEventListener(g,y,g===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[i,u,p]of this._listeners)w.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Rp(u,i));const g=u.boxZoom=new Lp(u,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const y=new ss(u),T=new rf(u);u.doubleClickZoom=new tf(T,y),this._add("tapZoom",y),this._add("clickZoom",T),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const C=new nf;this._add("tapDragZoom",C);const I=u.touchPitch=new Kg(u);this._add("touchPitch",I),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const L=qo(i),O=ls(i);u.dragRotate=new vi(i,L,O),this._add("mouseRotate",L,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const U=(({enable:Me,clickTolerance:Ve})=>{const ge=new Yh({checkCorrectEvent:De=>w.mouseButton(De)===0&&!De.ctrlKey});return new os({clickTolerance:Ve,move:(De,He)=>({around:He,panDelta:He.sub(De)}),activateOnStart:!0,moveStateManager:ge,enable:Me,assignEvents:hu})})(i),X=new Ft(i,u);u.dragPan=new af(p,U,X),this._add("mousePan",U),this._add("touchPan",X,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const ue=new Jh,ce=new zp;u.touchZoomRotate=new Bs(p,ce,ue,C),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const fe=u.scrollZoom=new Yg(u,()=>this._triggerRenderFrame());this._add("scrollZoom",fe,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const oe=u.keyboard=new Op(u);this._add("keyboard",oe),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Dp(u))}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Yl(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,p){for(const g in i)if(g!==p&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const p of i)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(i,u,p,g,y){if(!p)return;l.e(i,p);const T={handlerName:g,originalEvent:p.originalEvent||y};p.zoomDelta!==void 0&&(u.zoom=T),p.panDelta!==void 0&&(u.drag=T),p.pitchDelta!==void 0&&(u.pitch=T),p.bearingDelta!==void 0&&(u.rotate=T)}_applyChanges(){const i={},u={},p={};for(const[g,y,T]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new l.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),l.e(u,y),l.e(p,T);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){const g=this._map,y=g._getTransformForUpdate(),T=g.terrain;if(!(Jl(i)||T&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:C,zoomDelta:I,bearingDelta:L,pitchDelta:O,around:U,pinchAround:X}=i;X!==void 0&&(U=X),g._stop(!0),U=U||g.transform.centerPoint;const ue=y.pointLocation(C?U.sub(C):U);L&&(y.bearing+=L),O&&(y.pitch+=O),I&&(y.zoom+=I),T?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(C)):y.setLocationAtPoint(ue,U):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(ue,U),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,y.recalculateZoom(g.terrain)})):y.setLocationAtPoint(ue,U),g._applyUpdatedTransform(y),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){const g=Yl(this._eventsInProgress),y=Yl(i),T={};for(const O in i){const{originalEvent:U}=i[O];this._eventsInProgress[O]||(T[`${O}start`]=U),this._eventsInProgress[O]=i[O]}!g&&y&&this._fireEvent("movestart",y.originalEvent);for(const O in T)this._fireEvent(O,T[O]);y&&this._fireEvent("move",y.originalEvent);for(const O in i){const{originalEvent:U}=i[O];this._fireEvent(O,U)}const C={};let I;for(const O in this._eventsInProgress){const{handlerName:U,originalEvent:X}=this._eventsInProgress[O];this._handlersById[U].isActive()||(delete this._eventsInProgress[O],I=u[U]||X,C[`${O}end`]=I)}for(const O in C)this._fireEvent(O,C[O]);const L=Yl(this._eventsInProgress);if(p&&(g||y)&&!L){this._updatingCamera=!0;const O=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!O||!O.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:I})),U(this._map.getBearing())&&this._map.resetNorth()):(U(O.bearing||this._map.getBearing())&&(O.bearing=0),O.freezeElevation=!0,this._map.easeTo(O,{originalEvent:I})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new l.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new sf("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Up extends l.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const p=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,p){return i=l.P.convert(i).mult(-1),this.panTo(this.transform.center,l.e({offset:i},u),p)}panTo(i,u,p){return this.easeTo(l.e({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(l.e({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(l.e({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,l.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=Te.convert(i);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,u)}_cameraForBoxAndBearing(i,u,p,g){const y={top:0,bottom:0,right:0,left:0};if(typeof(g=l.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const He=g.padding;g.padding={top:He,bottom:He,right:He,left:He}}g.padding=l.e(y,g.padding);const T=this.transform,C=T.padding,I=T.project(l.L.convert(i)),L=T.project(l.L.convert(u)),O=I.rotate(-p*Math.PI/180),U=L.rotate(-p*Math.PI/180),X=new l.P(Math.max(O.x,U.x),Math.max(O.y,U.y)),ue=new l.P(Math.min(O.x,U.x),Math.min(O.y,U.y)),ce=X.sub(ue),fe=(T.width-(C.left+C.right+g.padding.left+g.padding.right))/ce.x,oe=(T.height-(C.top+C.bottom+g.padding.top+g.padding.bottom))/ce.y;if(oe<0||fe<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Me=Math.min(T.scaleZoom(T.scale*Math.min(fe,oe)),g.maxZoom),Ve=l.P.convert(g.offset),ge=new l.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),De=Ve.add(ge).mult(T.scale/T.zoomScale(Me));return{center:T.unproject(I.add(L).div(2).sub(De)),zoom:Me,bearing:p}}fitBounds(i,u,p){return this._fitInternal(this.cameraForBounds(i,u),u,p)}fitScreenCoordinates(i,u,p,g,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(i)),this.transform.pointLocation(l.P.convert(u)),p,g),g,y)}_fitInternal(i,u,p){return i?(delete(u=l.e(i,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(i,u){this.stop();const p=this._getTransformForUpdate();let g=!1,y=!1,T=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(g=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=l.L.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(y=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(T=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),g&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),y&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),T&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(i,u,p,g=0){const y=l.U.fromLngLat(i,u),T=l.U.fromLngLat(p,g),C=T.x-y.x,I=T.y-y.y,L=T.z-y.z,O=Math.hypot(C,I,L);if(O===0)throw new Error("Can't calculate camera options with same From and To");const U=Math.hypot(C,I),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/O/this.transform.tileSize),ue=180*Math.atan2(C,-I)/Math.PI;let ce=180*Math.acos(U/O)/Math.PI;return ce=L<0?90-ce:90+ce,{center:T.toLngLat(),zoom:X,pitch:ce,bearing:ue}}easeTo(i,u){this._stop(!1,i.easeId),((i=l.e({offset:[0,0],duration:500,easing:l.bb},i)).animate===!1||!i.essential&&l.h.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),y=this.getBearing(),T=this.getPitch(),C=this.getPadding(),I="zoom"in i?+i.zoom:g,L="bearing"in i?this._normalizeBearing(i.bearing,y):y,O="pitch"in i?+i.pitch:T,U="padding"in i?i.padding:p.padding,X=l.P.convert(i.offset);let ue=p.centerPoint.add(X);const ce=p.pointLocation(ue),fe=l.L.convert(i.center||ce);this._normalizeCenter(fe);const oe=p.project(ce),Me=p.project(fe).sub(oe),Ve=p.zoomScale(I-g);let ge,De;i.around&&(ge=l.L.convert(i.around),De=p.locationPoint(ge));const He={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||I!==g,this._rotating=this._rotating||y!==L,this._pitching=this._pitching||O!==T,this._padding=!p.isPaddingEqual(U),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,He),this.terrain&&this._prepareElevation(fe),this._ease(qe=>{if(this._zooming&&(p.zoom=l.B.number(g,I,qe)),this._rotating&&(p.bearing=l.B.number(y,L,qe)),this._pitching&&(p.pitch=l.B.number(T,O,qe)),this._padding&&(p.interpolatePadding(C,U,qe),ue=p.centerPoint.add(X)),this.terrain&&!i.freezeElevation&&this._updateElevation(qe),ge)p.setLocationAtPoint(ge,De);else{const tt=p.zoomScale(p.zoom-g),ct=I>g?Math.min(2,Ve):Math.max(.5,Ve),st=Math.pow(ct,1-qe),_t=p.unproject(oe.add(Me.mult(qe*st)).mult(tt));p.setLocationAtPoint(p.renderWorldCopies?_t.wrap():_t,ue)}this._applyUpdatedTransform(p),this._fireMoveEvents(u)},qe=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,qe)},i),this}_prepareEase(i,u,p={}){this._moving=!0,u||p.moving||this.fire(new l.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new l.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new l.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new l.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(u-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:p,zoom:g,pitch:y,bearing:T,elevation:C}=this.transformCameraUpdate(u);p&&(u.center=p),g!==void 0&&(u.zoom=g),y!==void 0&&(u.pitch=y),T!==void 0&&(u.bearing=T),C!==void 0&&(u.elevation=C),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new l.k("move",i)),this._zooming&&this.fire(new l.k("zoom",i)),this._rotating&&this.fire(new l.k("rotate",i)),this._pitching&&this.fire(new l.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,g=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new l.k("zoomend",i)),g&&this.fire(new l.k("rotateend",i)),y&&this.fire(new l.k("pitchend",i)),this.fire(new l.k("moveend",i))}flyTo(i,u){if(!i.essential&&l.h.prefersReducedMotion){const Ut=l.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ut,u)}this.stop(),i=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},i);const p=this._getTransformForUpdate(),g=this.getZoom(),y=this.getBearing(),T=this.getPitch(),C=this.getPadding(),I="zoom"in i?l.ad(+i.zoom,p.minZoom,p.maxZoom):g,L="bearing"in i?this._normalizeBearing(i.bearing,y):y,O="pitch"in i?+i.pitch:T,U="padding"in i?i.padding:p.padding,X=p.zoomScale(I-g),ue=l.P.convert(i.offset);let ce=p.centerPoint.add(ue);const fe=p.pointLocation(ce),oe=l.L.convert(i.center||fe);this._normalizeCenter(oe);const Me=p.project(fe),Ve=p.project(oe).sub(Me);let ge=i.curve;const De=Math.max(p.width,p.height),He=De/X,qe=Ve.mag();if("minZoom"in i){const Ut=l.ad(Math.min(i.minZoom,g,I),p.minZoom,p.maxZoom),Tr=De/p.zoomScale(Ut-g);ge=Math.sqrt(Tr/qe*2)}const tt=ge*ge;function ct(Ut){const Tr=(He*He-De*De+(Ut?-1:1)*tt*tt*qe*qe)/(2*(Ut?He:De)*tt*qe);return Math.log(Math.sqrt(Tr*Tr+1)-Tr)}function st(Ut){return(Math.exp(Ut)-Math.exp(-Ut))/2}function _t(Ut){return(Math.exp(Ut)+Math.exp(-Ut))/2}const Nt=ct(!1);let or=function(Ut){return _t(Nt)/_t(Nt+ge*Ut)},Tt=function(Ut){return De*((_t(Nt)*(st(Tr=Nt+ge*Ut)/_t(Tr))-st(Nt))/tt)/qe;var Tr},qt=(ct(!0)-Nt)/ge;if(Math.abs(qe)<1e-6||!isFinite(qt)){if(Math.abs(De-He)<1e-6)return this.easeTo(i,u);const Ut=He<De?-1:1;qt=Math.abs(Math.log(He/De))/ge,Tt=function(){return 0},or=function(Tr){return Math.exp(Ut*ge*Tr)}}return i.duration="duration"in i?+i.duration:1e3*qt/("screenSpeed"in i?+i.screenSpeed/ge:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=y!==L,this._pitching=O!==T,this._padding=!p.isPaddingEqual(U),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(oe),this._ease(Ut=>{const Tr=Ut*qt,sr=1/or(Tr);p.zoom=Ut===1?I:g+p.scaleZoom(sr),this._rotating&&(p.bearing=l.B.number(y,L,Ut)),this._pitching&&(p.pitch=l.B.number(T,O,Ut)),this._padding&&(p.interpolatePadding(C,U,Ut),ce=p.centerPoint.add(ue)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ut);const ir=Ut===1?oe:p.unproject(Me.add(Ve.mult(Tt(Tr))).mult(sr));p.setLocationAtPoint(p.renderWorldCopies?ir.wrap():ir,ce),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,u,p){p.animate===!1||p.duration===0?(i(1),u()):(this._easeStart=l.h.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=l.b5(i,-180,180);const p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=i.lng-u.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Ni{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const p=this._map._getUIString(`AttributionControl.${u}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const y=u[g];if(y.used||y.usedForTerrain){const T=y.getSource();T.attribution&&i.indexOf(T.attribution)<0&&i.push(T.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,y)=>g.length-y.length),i=i.filter((g,y)=>{for(let T=y+1;T<i.length;T++)if(i[T].indexOf(g)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class zr{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class du{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const g of p)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const lf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Vp=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class jp extends l.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const p={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),l.aS(g.posMatrix,0,l.N,0,l.N,0,1),this._tiles[g.key]=new hr(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(i){for(const u in this._tiles){const p=this._tiles[u];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(i.canonical)){const y=i.clone();y.posMatrix=new Float64Array(16),l.aS(y.posMatrix,0,l.N,0,l.N,0,1),u[p]=y}else if(g.canonical.isChildOf(i.canonical)){const y=i.clone();y.posMatrix=new Float64Array(16);const T=g.canonical.z-i.canonical.z,C=g.canonical.x-(g.canonical.x>>T<<T),I=g.canonical.y-(g.canonical.y>>T<<T),L=l.N>>T;l.aS(y.posMatrix,0,L,0,L,0,1),l.$(y.posMatrix,y.posMatrix,[-C*L,-I*L,0]),u[p]=y}else if(i.canonical.isChildOf(g.canonical)){const y=i.clone();y.posMatrix=new Float64Array(16);const T=i.canonical.z-g.canonical.z,C=i.canonical.x-(i.canonical.x>>T<<T),I=i.canonical.y-(i.canonical.y>>T<<T),L=l.N>>T;l.aS(y.posMatrix,0,l.N,0,l.N,0,1),l.$(y.posMatrix,y.posMatrix,[C*L,I*L,0]),l.a0(y.posMatrix,y.posMatrix,[1/2**T,1/2**T,0]),u[p]=y}}return u}getSourceTile(i,u){const p=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!y||!y.dem)&&u)for(;g>=p.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(i.scaledTo(g--).key);return y}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class $p{constructor(i,u,p){this.painter=i,this.sourceCache=new jp(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,p,g=l.N){var y;if(!(u>=0&&u<g&&p>=0&&p<g))return 0;const T=this.getTerrainData(i),C=(y=T.tile)===null||y===void 0?void 0:y.dem;if(!C)return 0;const I=function(ce,fe,oe){var Me=fe[0],Ve=fe[1];return ce[0]=oe[0]*Me+oe[4]*Ve+oe[12],ce[1]=oe[1]*Me+oe[5]*Ve+oe[13],ce}([],[u/g*l.N,p/g*l.N],T.u_terrain_matrix),L=[I[0]*C.dim,I[1]*C.dim],O=Math.floor(L[0]),U=Math.floor(L[1]),X=L[0]-O,ue=L[1]-U;return C.get(O,U)*(1-X)*(1-ue)+C.get(O+1,U)*X*(1-ue)+C.get(O,U+1)*(1-X)*ue+C.get(O+1,U+1)*X*ue}getElevationForLngLatZoom(i,u){const{tileID:p,mercatorX:g,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(p,g%l.N,y%l.N,l.N)}getElevation(i,u,p,g=l.N){return this.getDEMElevation(i,u,p,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,y=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ke(g,y,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ke(g,new l.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new ke(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let y=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?y=i.canonical.z-g:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=i.canonical.x-(i.canonical.x>>y<<y),C=i.canonical.y-(i.canonical.y>>y<<y),I=l.bc(new Float64Array(16),[1/(l.N<<y),1/(l.N<<y),0]);l.$(I,I,[T*l.N,C*l.N,0]),this._demMatrixCache[i.key]={matrix:I,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,p=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ke(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ke(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,T=0;y<this._coordsTextureSize;y++)for(let C=0;C<this._coordsTextureSize;C++,T+=4)u[T+0]=255&C,u[T+1]=255&y,u[T+2]=C>>8<<4|y>>8,u[T+3]=0;const p=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new ke(i,p,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const u=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const y=u[0]+(u[2]>>4<<8),T=u[1]+((15&u[2])<<8),C=this.coordsIndex[255-u[3]],I=C&&this.sourceCache.getTileByID(C);if(!I)return null;const L=this._coordsTextureSize,O=(1<<I.tileID.canonical.z)*L;return new l.U(this._allowMercatorOverflow(i,(I.tileID.canonical.x*L+y)/O),(I.tileID.canonical.y*L+T)/O,this.getElevation(I.tileID,y,T,L))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new l.bd,p=new l.b0,g=this.meshSize,y=l.N/g,T=g*g;for(let U=0;U<=g;U++)for(let X=0;X<=g;X++)u.emplaceBack(X*y,U*y,0);for(let U=0;U<T;U+=g+1)for(let X=0;X<g;X++)p.emplaceBack(X+U,g+X+U+1,g+X+U+2),p.emplaceBack(X+U,g+X+U+2,X+U+1);const C=u.length,I=C+2*(g+1);for(const U of[0,1])for(let X=0;X<=g;X++)for(const ue of[0,1])u.emplaceBack(X*y,U*l.N,ue);for(let U=0;U<2*g;U+=2)p.emplaceBack(I+U,I+U+1,I+U+3),p.emplaceBack(I+U,I+U+3,I+U+2),p.emplaceBack(C+U,C+U+3,C+U+1),p.emplaceBack(C+U,C+U+2,C+U+3);const L=u.length,O=L+2*(g+1);for(const U of[0,1])for(let X=0;X<=g;X++)for(const ue of[0,1])u.emplaceBack(U*l.N,X*y,ue);for(let U=0;U<2*g;U+=2)p.emplaceBack(L+U,L+U+1,L+U+3),p.emplaceBack(L+U,L+U+3,L+U+2),p.emplaceBack(O+U,O+U+3,O+U+1),p.emplaceBack(O+U,O+U+2,O+U+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(u,Vp.members),segments:l.S.simpleSegment(0,0,u.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*l.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,u){const p=l.U.fromLngLat(i.wrap()),g=(1<<u)*l.N,y=p.x*g,T=p.y*g,C=Math.floor(y/l.N),I=Math.floor(T/l.N);return{tileID:new l.O(u,0,u,C,I),mercatorX:y,mercatorY:T}}_allowMercatorOverflow(i,u){const p=i.x<this.painter.width/2;let g=l.bf(u);const y=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(y)<0||!p&&Math.sign(g)<0&&Math.sign(y)>0?(g=360*Math.sign(y)+g,l.G(g)):u}}class Jg{constructor(i,u,p){this._context=i,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new ke(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:i,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const ni={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class pu{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new Jg(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const g=i.sourceCaches[p].getVisibleCoordinates();for(const y of g){const T=this.terrain.sourceCache.getTerrainCoords(y);for(const C in T)this._coordsDescendingInv[p][C]||(this._coordsDescendingInv[p][C]=[]),this._coordsDescendingInv[p][C].push(T[C])}}this._coordsDescendingInvStr={};for(const p of i._order){const g=i._layers[p],y=g.source;if(ni[g.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const T in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][T]=this._coordsDescendingInv[y][T].map(C=>C.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[g][p.tileID.key];y&&y!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(ni[u]&&(this._prevType&&ni[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(ni[this._prevType]||ni[u]&&g){this._prevType=u;const y=this._stacks.length-1,T=this._stacks[y]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(Yr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[y]){const L=this.pool.getObjectForId(C.rtt[y].id);if(L.stamp===C.rtt[y].stamp){this.pool.useObject(L);continue}}const I=this.pool.getOrCreateFreeObject();this.pool.useObject(I),this.pool.stampObject(I),C.rtt[y]={id:I.id,stamp:I.stamp},p.context.bindFramebuffer.set(I.fbo.framebuffer),p.context.clear({color:l.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let L=0;L<T.length;L++){const O=p.style._layers[T[L]],U=O.source?this._coordsDescendingInv[O.source][C.tileID.key]:[C.tileID];p.context.viewport.set([0,0,I.fbo.width,I.fbo.height]),p._renderTileClippingMasks(O,U),p.renderLayer(p,p.style.sourceCaches[O.source],O,U),O.source&&(C.rttCoords[O.source]=this._coordsDescendingInvStr[O.source][C.tileID.key])}}return Yr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ni[u]}return!1}}const $t=b,Ht={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Ql=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},cf={showCompass:!0,showZoom:!0,visualizePitch:!1};class uf{constructor(i,u,p=!1){this.mousedown=T=>{this.startMouse(l.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),w.mousePos(this.element,T)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,w.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),y=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=qo({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:C,bearingDegreesPerPixelMoved:I=.8})=>{const L=new Fp;return new os({clickTolerance:C,move:(O,U)=>({bearingDelta:(U.x-O.x)*I}),moveStateManager:L,enable:T,assignEvents:Ql})})({clickTolerance:g,enable:!0}),this.map=i,p&&(this.mousePitch=ls({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:C,pitchDegreesPerPixelMoved:I=-.5})=>{const L=new Fp;return new os({clickTolerance:C,move:(O,U)=>({pitchDelta:(U.y-O.y)*I}),moveStateManager:L,enable:T,assignEvents:Ql})})({clickTolerance:y,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),w.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),w.disableDrag()}moveMouse(i,u){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(i,u)||{};y&&p.setPitch(p.getPitch()+y)}}moveTouch(i,u){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(i,u)||{};y&&p.setPitch(p.getPitch()+y)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let hn;function hf(_,i,u){if(_=new l.L(_.lng,_.lat),i){const p=new l.L(_.lng-360,_.lat),g=new l.L(_.lng+360,_.lat),y=u.locationPoint(_).distSqr(i);u.locationPoint(p).distSqr(i)<y?_=p:u.locationPoint(g).distSqr(i)<y&&(_=g)}for(;Math.abs(_.lng-u.center.lng)>180;){const p=u.locationPoint(_);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;_.lng>u.center.lng?_.lng-=360:_.lng+=360}return _}const na={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gp(_,i,u){const p=_.classList;for(const g in na)p.remove(`maplibregl-${u}-anchor-${g}`);p.add(`maplibregl-${u}-anchor-${i}`)}class oo extends l.E{constructor(i){if(super(),this._onKeyPress=u=>{const p=u.code,g=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=hf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${na[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const T=this._map.unproject(this._pos),C=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=T.distanceTo(this._lngLat)>20*C?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=l.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const y=w.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const T=w.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Me of I){const Ve=w.createNS("http://www.w3.org/2000/svg","ellipse");Ve.setAttributeNS(null,"opacity","0.04"),Ve.setAttributeNS(null,"cx","10.5"),Ve.setAttributeNS(null,"cy","5.80029008"),Ve.setAttributeNS(null,"rx",Me.rx),Ve.setAttributeNS(null,"ry",Me.ry),C.appendChild(Ve)}const L=w.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const O=w.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(O);const U=w.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"fill","#000000");const X=w.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),U.appendChild(X);const ue=w.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ue.setAttributeNS(null,"fill","#FFFFFF");const ce=w.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const fe=w.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#000000"),fe.setAttributeNS(null,"opacity","0.25"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962");const oe=w.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#FFFFFF"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962"),ce.appendChild(fe),ce.appendChild(oe),T.appendChild(C),T.appendChild(L),T.appendChild(U),T.appendChild(ue),T.appendChild(ce),u.appendChild(T),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Gp(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=l.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Jr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Zr=0,Xo=!1;const ec={maxWidth:100,unit:"metric"};function tc(_,i,u){const p=u&&u.maxWidth||100,g=_._container.clientHeight/2,y=_.unproject([0,g]),T=_.unproject([p,g]),C=y.distanceTo(T);if(u&&u.unit==="imperial"){const I=3.2808*C;I>5280?lo(i,p,I/5280,_._getUIString("ScaleControl.Miles")):lo(i,p,I,_._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?lo(i,p,C/1852,_._getUIString("ScaleControl.NauticalMiles")):C>=1e3?lo(i,p,C/1e3,_._getUIString("ScaleControl.Kilometers")):lo(i,p,C,_._getUIString("ScaleControl.Meters"))}function lo(_,i,u,p){const g=function(y){const T=Math.pow(10,`${Math.floor(y)}`.length-1);let C=y/T;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(I){const L=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*L)/L}(C),T*C}(u);_.style.width=i*(g/u)+"px",_.innerHTML=`${g}&nbsp;${p}`}const ff={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},df=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ko(_){if(_){if(typeof _=="number"){const i=Math.round(Math.abs(_)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,_),"top-left":new l.P(i,i),"top-right":new l.P(-i,i),bottom:new l.P(0,-_),"bottom-left":new l.P(i,-i),"bottom-right":new l.P(-i,-i),left:new l.P(_,0),right:new l.P(-_,0)}}if(_ instanceof l.P||Array.isArray(_)){const i=l.P.convert(_);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.P.convert(_.center||[0,0]),top:l.P.convert(_.top||[0,0]),"top-left":l.P.convert(_["top-left"]||[0,0]),"top-right":l.P.convert(_["top-right"]||[0,0]),bottom:l.P.convert(_.bottom||[0,0]),"bottom-left":l.P.convert(_["bottom-left"]||[0,0]),"bottom-right":l.P.convert(_["bottom-right"]||[0,0]),left:l.P.convert(_.left||[0,0]),right:l.P.convert(_.right||[0,0])}}return Ko(new l.P(0,0))}const pf={extend:(_,...i)=>l.e(_,...i),run(_){_()},logToElement(_,i=!1,u="log"){const p=window.document.getElementById(u);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${_}`)}},mf=b;class wr{static get version(){return mf}static get workerCount(){return ri.workerCount}static set workerCount(i){ri.workerCount=i}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){l.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(i){l.c.WORKER_URL=i}static addProtocol(i,u){l.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete l.c.REGISTERED_PROTOCOLS[i]}}return wr.Map=class extends Up{constructor(_){if(l.bg.mark(l.bh.create),(_=l.e({},Ht,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new cu(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),{bearingSnap:_.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=_.interactive,this._cooperativeGestures=_.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=_.maxTileCacheSize,this._maxTileCacheZoomLevels=_.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._renderTaskQueue=new du,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},lf,_.locale),this._clickTolerance=_.clickTolerance,this._overridePixelRatio=_.pixelRatio,this._maxCanvasSize=_.maxCanvasSize,this.transformCameraUpdate=_.transformCameraUpdate,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new N(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=so(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?u(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new of(this,_),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=_.hash&&new Zl(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,l.e({},_.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new Ni({customAttribution:_.customAttribution})),_.maplibreLogo&&this.addControl(new zr,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new l.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new l.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new l.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(_,i){if(i===void 0&&(i=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=_.onAdd(this);this._controls.push(_);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(_);return i>-1&&this._controls.splice(i,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,i,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,i,u,p)}resize(_){var i;const u=this._containerDimensions(),p=u[0],g=u[1],y=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,y),this.painter.resize(p,g,y),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const I=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,I),this.painter.resize(p,g,I)}this.transform.resize(p,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,g);const T=!this._moving;return T&&(this.stop(),this.fire(new l.k("movestart",_)).fire(new l.k("move",_))),this.fire(new l.k("resize",_)),T&&this.fire(new l.k("moveend",_)),this}_getClampedPixelRatio(_,i){const{0:u,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),y=_*g,T=i*g;return Math.min(y>u?u/y:1,T>p?p/T:1)*g}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Te.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(_){return this._cooperativeGestures=_,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(_){return this.transform.locationPoint(l.L.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(l.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,i,u){if(_==="mouseenter"||_==="mouseover"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:y=>{const T=this.getLayer(i)?this.queryRenderedFeatures(y.point,{layers:[i]}):[];T.length?p||(p=!0,u.call(this,new Oi(_,this,y.originalEvent,{features:T}))):p=!1},mouseout:()=>{p=!1}}}}if(_==="mouseleave"||_==="mouseout"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:T=>{(this.getLayer(i)?this.queryRenderedFeatures(T.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,u.call(this,new Oi(_,this,T.originalEvent)))},mouseout:T=>{p&&(p=!1,u.call(this,new Oi(_,this,T.originalEvent)))}}}}{const p=g=>{const y=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];y.length&&(g.features=y,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[_]:p}}}}on(_,i,u){if(u===void 0)return super.on(_,i);const p=this._createDelegatedListener(_,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(_,i,u){if(u===void 0)return super.once(_,i);const p=this._createDelegatedListener(_,i,u);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(_,i,u){return u===void 0?super.off(_,i):(this._delegatedListeners&&this._delegatedListeners[_]&&(p=>{const g=this._delegatedListeners[_];for(let y=0;y<g.length;y++){const T=g[y];if(T.layer===i&&T.listener===u){for(const C in T.delegates)this.off(C,T.delegates[C]);return g.splice(y,1),this}}})(),this)}queryRenderedFeatures(_,i){if(!this.style)return[];let u;const p=_ instanceof l.P||Array.isArray(_),g=p?_:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:_)||{},g instanceof l.P||typeof g[0]=="number")u=[l.P.convert(g)];else{const y=l.P.convert(g[0]),T=l.P.convert(g[1]);u=[y,new l.P(T.x,y.y),T,new l.P(y.x,T.y),y]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(_,i){return this.style.querySourceFeatures(_,i)}setStyle(_,i){return(i=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(_,i))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const i=this._locale[_];if(i==null)throw new Error(`Missing UI string '${_}'`);return i}_updateStyle(_,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Bn(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,i,u):this.style.loadJSON(_,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Bn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,i){if(typeof _=="string"){const u=this._requestManager.transformRequest(_,B.Style);l.f(u,(p,g)=>{p?this.fire(new l.j(p)):g&&this._updateDiff(g,i)})}else typeof _=="object"&&this._updateDiff(_,i)}_updateDiff(_,i){try{this.style.setState(_,i)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(_,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(_,i){return this._lazyInitEmptyStyle(),this.style.addSource(_,i),this._update(!0)}isSourceLoaded(_){const i=this.style&&this.style.sourceCaches[_];if(i!==void 0)return i.loaded();this.fire(new l.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const i=this.style.sourceCaches[_.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===_.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new $p(this.painter,i,_),this.painter.renderToTexture=new pu(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==_.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:_})),this}getTerrain(){var _,i;return(i=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const i in _){const u=_[i]._tiles;for(const p in u){const g=u[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(_,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(_,i,u)}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,i,u={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:y,stretchY:T,content:C}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||l.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:I,height:L,data:O}=i,U=i;return this.style.addImage(_,{data:new l.R({width:I,height:L},new Uint8Array(O)),pixelRatio:p,stretchX:y,stretchY:T,content:C,sdf:g,version:0,userImage:U}),U.onAdd&&U.onAdd(this,_),this}}{const{width:I,height:L,data:O}=l.h.getImageData(i);this.style.addImage(_,{data:new l.R({width:I,height:L},O),pixelRatio:p,stretchX:y,stretchY:T,content:C,sdf:g,version:0})}}updateImage(_,i){const u=this.style.getImage(_);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||l.a(i)?l.h.getImageData(i):i,{width:g,height:y,data:T}=p;if(g===void 0||y===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||y!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(i instanceof HTMLImageElement||l.a(i));return u.data.replace(T,C),this.style.updateImage(_,u),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,i){G.getImage(this._requestManager.transformRequest(_,B.Image),i)}listImages(){return this.style.listImages()}addLayer(_,i){return this._lazyInitEmptyStyle(),this.style.addLayer(_,i),this._update(!0)}moveLayer(_,i){return this.style.moveLayer(_,i),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,i,u){return this.style.setLayerZoomRange(_,i,u),this._update(!0)}setFilter(_,i,u={}){return this.style.setFilter(_,i,u),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,i,u,p={}){return this.style.setPaintProperty(_,i,u,p),this._update(!0)}getPaintProperty(_,i){return this.style.getPaintProperty(_,i)}setLayoutProperty(_,i,u,p={}){return this.style.setLayoutProperty(_,i,u,p),this._update(!0)}getLayoutProperty(_,i){return this.style.getLayoutProperty(_,i)}setGlyphs(_,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,i,u,p=>{p||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,i,u=>{u||this._update(!0)}),this}setLight(_,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(_,i){return this.style.setFeatureState(_,i),this._update()}removeFeatureState(_,i){return this.style.removeFeatureState(_,i),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,i=0;return this._container&&(_=this._container.clientWidth||400,i=this._container.clientHeight||300),[_,i]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container",_);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const g=this._controlContainer=w.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{y[T]=w.create("div",`maplibregl-ctrl-${T} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let _=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${_}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(_,i,u){this._canvas.width=Math.floor(u*_),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:_},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!u){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new ao(u,this.transform),E.testSupport(u)}_onCooperativeGesture(_,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,y=l.h.now();this.style.zoomHistory.update(g,y);const T=new l.a8(g,{now:y,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=T.crossFadingFactor();C===1&&C===this._crossFadingFactor||(u=!0,this._crossFadingFactor=C),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(_=>{l.bg.frame(_),this._frame=null,this._render(_)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return $t}getCameraTargetElevation(){return this.transform.elevation}},wr.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);i.title=p,i.setAttribute("aria-label",p)},this.options=l.e({},cf,_),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new uf(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,i){const u=w.create("button",_,this._container);return u.type="button",u.addEventListener("click",i),u}},wr.GeolocateControl=class extends l.E{constructor(_){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new l.L(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,g=this._map.getBearing(),y=l.e({bearing:g},this.options.fitBoundsOptions),T=Te.fromLngLat(u,p);this._map.fitBounds(T,y,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new l.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Xo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new oo({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},Jr,_)}onAdd(_){return this._map=_,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){hn===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{hn=p.state!=="denied",i(hn)}).catch(()=>{hn=!!window.navigator.geolocation,i(hn)}):(hn=!!window.navigator.geolocation,i(hn)):i(hn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Zr=0,Xo=!1}_isOutOfMapMaxBounds(_){const i=this._map.getMaxBounds(),u=_.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),i=_.getSouthEast(),u=_.getNorthEast(),p=i.distanceTo(u),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Zr--,Xo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Zr++,Zr>1?(_={maximumAge:6e5,timeout:0},Xo=!0):(_=this.options.positionOptions,Xo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},wr.AttributionControl=Ni,wr.LogoControl=zr,wr.ScaleControl=class{constructor(_){this._onMove=()=>{tc(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,tc(this._map,this._container,this.options)},this.options=l.e({},ec,_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},wr.FullscreenControl=class extends l.E{constructor(_={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},wr.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=_}onAdd(_){return this._map=_,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},wr.Popup=class extends l.E{constructor(_){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=hf(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let p=this.options.anchor;const g=Ko(this.options.offset);if(!p){const T=this._container.offsetWidth,C=this._container.offsetHeight;let I;I=u.y+g.bottom.y<C?["top"]:u.y>this._map.transform.height-C?["bottom"]:[],u.x<T/2?I.push("left"):u.x>this._map.transform.width-T/2&&I.push("right"),p=I.length===0?"bottom":I.join("-")}const y=u.add(g[p]).round();w.setTransform(this._container,`${na[p]} translate(${y.x}px,${y.y}px)`),Gp(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(ff),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=l.L.convert(_),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const i=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=_;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){this._container&&this._container.classList.add(_)}removeClassName(_){this._container&&this._container.classList.remove(_)}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(df);_&&_.focus()}},wr.Marker=oo,wr.Style=Bn,wr.LngLat=l.L,wr.LngLatBounds=Te,wr.Point=l.P,wr.MercatorCoordinate=l.U,wr.Evented=l.E,wr.AJAXError=l.bi,wr.config=l.c,wr.CanvasSource=Zt,wr.GeoJSONSource=lt,wr.ImageSource=ot,wr.RasterDEMTileSource=Je,wr.RasterTileSource=je,wr.VectorTileSource=Ee,wr.VideoSource=er,wr.setRTLTextPlugin=l.bj,wr.getRTLTextPluginStatus=l.bk,wr.prewarm=function(){Ji().acquire(nr)},wr.clearPrewarmedResources=function(){const _=Di;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(nr),Di=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},pf.extend(wr,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),wr});var d=o;return d})})(AC);var IC=AC.exports;const ED=Vx(IC),PC=US({__proto__:null,default:ED},[IC]),CD="modulepreload",AD=function(e){return"/"+e},Ab={},kD=function(t,r,a){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),l=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=Promise.allSettled(r.map(b=>{if(b=AD(b),b in Ab)return;Ab[b]=!0;const w=b.endsWith(".css"),E=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${E}`))return;const P=document.createElement("link");if(P.rel=w?"stylesheet":CD,w||(P.as="script"),P.crossOrigin="",P.href=b,l&&P.setAttribute("nonce",l),document.head.appendChild(P),w)return new Promise((k,R)=>{P.addEventListener("load",k),P.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${b}`)))})}))}function h(d){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=d,window.dispatchEvent(l),!l.defaultPrevented)throw d}return o.then(d=>{for(const l of d||[])l.status==="rejected"&&h(l.reason);return t().catch(h)})},ID=ae.createContext(null);function PD(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,o=Array.isArray(t)?t[0]:t?t.x:0,h=Array.isArray(t)?t[1]:t?t.y:0;return r===o&&a===h}function So(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!So(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(const o of r)if(!t.hasOwnProperty(o)||!So(e[o],t[o]))return!1;return!0}return!1}function MD(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function kb(e,t){if(!e.getProjection)return;const r=e.getProjection(),a=t.getProjection();So(r,a)||t.setProjection(r)}function Ib(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Pb(e,t){const r=t.viewState||t;let a=!1;if("zoom"in r){const o=e.zoom;e.zoom=r.zoom,a=a||o!==e.zoom}if("bearing"in r){const o=e.bearing;e.bearing=r.bearing,a=a||o!==e.bearing}if("pitch"in r){const o=e.pitch;e.pitch=r.pitch,a=a||o!==e.pitch}if(r.padding&&!e.isPaddingEqual(r.padding)&&(a=!0,e.padding=r.padding),"longitude"in r&&"latitude"in r){const o=e.center;e.center=new o.constructor(r.longitude,r.latitude),a=a||o!==e.center}return a}const RD=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Mb(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const r=e.layers.map(a=>{let o=null;"interactive"in a&&(o=Object.assign({},a),delete o.interactive);const h=t[a.ref];if(h){o=o||Object.assign({},a),delete o.ref;for(const d of RD)d in h&&(o[d]=h[d])}return o||a});return{...e,layers:r}}var Rb={};const Db={version:8,sources:{},layers:[]},Lb={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},wy={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Fb={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},DD=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],LD=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class ph{constructor(t,r,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=o=>{const h=this.props[Fb[o.type]];h?h(o):o.type==="error"&&console.error(o.error)},this._onPointerEvent=o=>{(o.type==="mousemove"||o.type==="mouseout")&&this._updateHover(o);const h=this.props[Lb[o.type]];h&&(this.props.interactiveLayerIds&&o.type!=="mouseover"&&o.type!=="mouseout"&&(o.features=this._hoveredFeatures||this._queryRenderedFeatures(o.point)),h(o),delete o.features)},this._onCameraEvent=o=>{if(!this._internalUpdate){const h=this.props[wy[o.type]];h&&h(o)}o.type in this._deferredEvents&&(this._deferredEvents[o.type]=!1)},this._MapClass=t,this.props=r,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const a=this._updateSettings(t,r);a&&this._createShadowTransform(this._map);const o=this._updateSize(t),h=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(a||o||h&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const a=ph.savedMaps.pop();if(!a)return null;const o=a.map,h=o.getContainer();for(r.className=h.className;h.childNodes.length>0;)r.appendChild(h.childNodes[0]);o._container=r;const d=o._resizeObserver;d&&(d.disconnect(),d.observe(r)),a.setProps({...t,styleDiffing:!1}),o.resize();const{initialViewState:l}=t;return l&&(l.bounds?o.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):a._updateViewState(l,!1)),o.isStyleLoaded()?o.fire("load"):o.once("styledata",()=>o.fire("load")),o._update(),a}_initialize(t){const{props:r}=this,{mapStyle:a=Db}=r,o={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||FD()||null,container:t,style:Mb(a)},h=o.initialViewState||o.viewState||o;if(Object.assign(o,{center:[h.longitude||0,h.latitude||0],zoom:h.zoom||0,pitch:h.pitch||0,bearing:h.bearing||0}),r.gl){const E=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=E,r.gl)}const d=new this._MapClass(o);h.padding&&d.setPadding(h.padding),r.cursor&&(d.getCanvas().style.cursor=r.cursor),this._createShadowTransform(d);const l=d._render;d._render=E=>{this._inRender=!0,l.call(d,E),this._inRender=!1};const b=d._renderTaskQueue.run;d._renderTaskQueue.run=E=>{b.call(d._renderTaskQueue,E),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const w=d.fire;d.fire=this._fireEvent.bind(this,w),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>{this._updateStyleComponents(this.props,{}),kb(d.transform,this._renderTransform)}),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const E in Lb)d.on(E,this._onPointerEvent);for(const E in wy)d.on(E,this._onCameraEvent);for(const E in Fb)d.on(E,this._onEvent);this._map=d}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),ph.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=MD(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const a=this._map;if(r.width!==a.transform.width||r.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const a=this._map,o=this._renderTransform,{zoom:h,pitch:d,bearing:l}=o,b=a.isMoving();b&&(o.cameraElevationReference="sea");const w=Pb(o,{...Ib(a.transform),...t});if(b&&(o.cameraElevationReference="ground"),w&&r){const E=this._deferredEvents;E.move=!0,E.zoom||(E.zoom=h!==o.zoom),E.rotate||(E.rotate=l!==o.bearing),E.pitch||(E.pitch=d!==o.pitch)}return b||Pb(a.transform,t),w}_updateSettings(t,r){const a=this._map;let o=!1;for(const h of DD)if(h in t&&!So(t[h],r[h])){o=!0;const d=a[`set${h[0].toUpperCase()}${h.slice(1)}`];d==null||d.call(a,t[h])}return o}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:a=Db,styleDiffing:o=!0}=t,h={diff:o};return"localIdeographFontFamily"in t&&(h.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Mb(a),h),!0}return!1}_updateStyleComponents(t,r){const a=this._map;let o=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!So(t.light,r.light)&&(o=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!So(t.fog,r.fog)&&(o=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!So(t.terrain,r.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(o=!0,a.setTerrain(t.terrain))),o}_updateHandlers(t,r){var a,o;const h=this._map;let d=!1;for(const l of LD){const b=(a=t[l])!==null&&a!==void 0?a:!0,w=(o=r[l])!==null&&o!==void 0?o:!0;So(b,w)||(d=!0,b?h[l].enable(b):h[l].disable())}return d}_queryRenderedFeatures(t){const r=this._map,a=r.transform,{interactiveLayerIds:o=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:o.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=a}}_updateHover(t){var r;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const h=t.type,d=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&d&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!d&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=h}else this._hoveredFeatures=null}_fireEvent(t,r,a){const o=this._map,h=o.transform,d=typeof r=="string"?r:r.type;return d==="move"&&this._updateViewState(this.props,!1),d in wy&&(typeof r=="object"&&(r.viewState=Ib(h)),this._map.isMoving())?(o.transform=this._renderTransform,t.call(o,r,a),o.transform=h,o):(t.call(o,r,a),o)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{kb(this._renderTransform,r),t.transform=r}}}ph.savedMaps=[];function FD(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||Rb.MapboxAccessToken}catch{}try{e=e||Rb.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const zD=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function OD(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const o=t.transform;t.transform=e.transform;const h=t.project(a);return t.transform=o,h},unproject:a=>{const o=t.transform;t.transform=e.transform;const h=t.unproject(a);return t.transform=o,h},queryTerrainElevation:(a,o)=>{const h=t.transform;t.transform=e.transform;const d=t.queryTerrainElevation(a,o);return t.transform=h,d},queryRenderedFeatures:(a,o)=>{const h=t.transform;t.transform=e.transform;const d=t.queryRenderedFeatures(a,o);return t.transform=h,d}};for(const a of ND(t))!(a in r)&&!zD.includes(a)&&(r[a]=t[a].bind(t));return r}function ND(e){const t=new Set;let r=e;for(;r;){for(const a of Object.getOwnPropertyNames(r))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);r=Object.getPrototypeOf(r)}return Array.from(t)}const BD=typeof document<"u"?ae.useLayoutEffect:ae.useEffect,UD=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function VD(e,t){for(const a of UD)a in t&&(e[a]=t[a]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,a=>{a&&console.error(a)},!0)}const xg=ae.createContext(null);function jD(e,t,r){const a=ae.useContext(ID),[o,h]=ae.useState(null),d=ae.useRef(),{current:l}=ae.useRef({mapLib:null,map:null});ae.useEffect(()=>{const E=e.mapLib;let P=!0,k;return Promise.resolve(E||r).then(R=>{if(!P)return;if(!R)throw new Error("Invalid mapLib");const z="Map"in R?R:R.default;if(!z.Map)throw new Error("Invalid mapLib");if(VD(z,e),!z.supported||z.supported(e))e.reuseMaps&&(k=ph.reuse(e,d.current)),k||(k=new ph(z.Map,e,d.current)),l.map=OD(k),l.mapLib=z,h(k),a==null||a.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(R=>{const{onError:z}=e;z?z({type:"error",target:null,originalEvent:null,error:R}):console.error(R)}),()=>{P=!1,k&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?k.recycle():k.destroy())}},[]),BD(()=>{o&&o.setProps(e)}),ae.useImperativeHandle(t,()=>l.map,[o]);const b=ae.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return ae.createElement("div",{id:e.id,ref:d,style:b},o&&ae.createElement(xg.Provider,{value:l},ae.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const $D=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Fc(e,t){if(!e||!t)return;const r=e.style;for(const a in t){const o=t[a];Number.isFinite(o)&&!$D.test(a)?r[a]=`${o}px`:r[a]=o}}function GD(e,t){const{map:r,mapLib:a}=ae.useContext(xg),o=ae.useRef({props:e});o.current.props=e;const h=ae.useMemo(()=>{let D=!1;ae.Children.forEach(e.children,N=>{N&&(D=!0)});const G={...e,element:D?document.createElement("div"):null},B=new a.Marker(G);return B.setLngLat([e.longitude,e.latitude]),B.getElement().addEventListener("click",N=>{var W,Q;(Q=(W=o.current.props).onClick)===null||Q===void 0||Q.call(W,{type:"click",target:B,originalEvent:N})}),B.on("dragstart",N=>{var W,Q;const _e=N;_e.lngLat=h.getLngLat(),(Q=(W=o.current.props).onDragStart)===null||Q===void 0||Q.call(W,_e)}),B.on("drag",N=>{var W,Q;const _e=N;_e.lngLat=h.getLngLat(),(Q=(W=o.current.props).onDrag)===null||Q===void 0||Q.call(W,_e)}),B.on("dragend",N=>{var W,Q;const _e=N;_e.lngLat=h.getLngLat(),(Q=(W=o.current.props).onDragEnd)===null||Q===void 0||Q.call(W,_e)}),B},[]);ae.useEffect(()=>(h.addTo(r.getMap()),()=>{h.remove()}),[]);const{longitude:d,latitude:l,offset:b,style:w,draggable:E=!1,popup:P=null,rotation:k=0,rotationAlignment:R="auto",pitchAlignment:z="auto"}=e;return ae.useEffect(()=>{Fc(h.getElement(),w)},[w]),ae.useImperativeHandle(t,()=>h,[]),(h.getLngLat().lng!==d||h.getLngLat().lat!==l)&&h.setLngLat([d,l]),b&&!PD(h.getOffset(),b)&&h.setOffset(b),h.isDraggable()!==E&&h.setDraggable(E),h.getRotation()!==k&&h.setRotation(k),h.getRotationAlignment()!==R&&h.setRotationAlignment(R),h.getPitchAlignment()!==z&&h.setPitchAlignment(z),h.getPopup()!==P&&h.setPopup(P),wh.createPortal(e.children,h.getElement())}const WD=ae.memo(ae.forwardRef(GD));function zb(e){return new Set(e?e.trim().split(/\s+/):[])}function HD(e,t){const{map:r,mapLib:a}=ae.useContext(xg),o=ae.useMemo(()=>document.createElement("div"),[]),h=ae.useRef({props:e});h.current.props=e;const d=ae.useMemo(()=>{const l={...e},b=new a.Popup(l);return b.setLngLat([e.longitude,e.latitude]),b.once("open",w=>{var E,P;(P=(E=h.current.props).onOpen)===null||P===void 0||P.call(E,w)}),b},[]);if(ae.useEffect(()=>{const l=b=>{var w,E;(E=(w=h.current.props).onClose)===null||E===void 0||E.call(w,b)};return d.on("close",l),d.setDOMContent(o).addTo(r.getMap()),()=>{d.off("close",l),d.isOpen()&&d.remove()}},[]),ae.useEffect(()=>{Fc(d.getElement(),e.style)},[e.style]),ae.useImperativeHandle(t,()=>d,[]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!So(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const l=zb(d.options.className),b=zb(e.className);for(const w of l)b.has(w)||d.removeClassName(w);for(const w of b)l.has(w)||d.addClassName(w);d.options.className=e.className}return wh.createPortal(e.children,o)}ae.memo(ae.forwardRef(HD));function Xd(e,t,r,a){const o=ae.useContext(xg),h=ae.useMemo(()=>e(o),[]);return ae.useEffect(()=>{const d=t,l=null,b=typeof t=="function"?t:null,{map:w}=o;return w.hasControl(h)||(w.addControl(h,d==null?void 0:d.position),l&&l(o)),()=>{b&&b(o),w.hasControl(h)&&w.removeControl(h)}},[]),h}function qD(e){const t=Xd(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return ae.useEffect(()=>{Fc(t._container,e.style)},[e.style]),null}ae.memo(qD);function ZD(e){const t=Xd(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return ae.useEffect(()=>{Fc(t._controlContainer,e.style)},[e.style]),null}ae.memo(ZD);function XD(e,t){const r=ae.useRef({props:e}),a=Xd(({mapLib:o})=>{const h=new o.GeolocateControl(e),d=h._setupUI;return h._setupUI=l=>{h._container.hasChildNodes()||d(l)},h.on("geolocate",l=>{var b,w;(w=(b=r.current.props).onGeolocate)===null||w===void 0||w.call(b,l)}),h.on("error",l=>{var b,w;(w=(b=r.current.props).onError)===null||w===void 0||w.call(b,l)}),h.on("outofmaxbounds",l=>{var b,w;(w=(b=r.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,l)}),h.on("trackuserlocationstart",l=>{var b,w;(w=(b=r.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,l)}),h.on("trackuserlocationend",l=>{var b,w;(w=(b=r.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,l)}),h},{position:e.position});return r.current.props=e,ae.useImperativeHandle(t,()=>a,[]),ae.useEffect(()=>{Fc(a._container,e.style)},[e.style]),null}ae.memo(ae.forwardRef(XD));function KD(e){const t=Xd(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return ae.useEffect(()=>{Fc(t._container,e.style)},[e.style]),null}const YD=ae.memo(KD);function JD(e){const t=Xd(({mapLib:h})=>new h.ScaleControl(e),{position:e.position}),r=ae.useRef(e),a=r.current;r.current=e;const{style:o}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),ae.useEffect(()=>{Fc(t._container,o)},[o]),null}ae.memo(JD);const QD=kD(()=>Promise.resolve().then(()=>PC),void 0),eL=ae.forwardRef(function(t,r){return jD(t,r,QD)}),tL=WD,rL=YD,kc="http://r48-vgeohub01.zsniigg.local:3333",Is="gdx2",rm="field",nL={type:"vector",tiles:[`${kc}/${rm}/{z}/{x}/{y}`],minzoom:0,maxzoom:22},iL={id:`${Is}.${rm}`,type:"fill",source:`${Is}.${rm}`,"source-layer":rm,paint:{"fill-color":"#693502","fill-opacity":.2}},th="lu",Ob={type:"vector",tiles:[`${kc}/${th}/{z}/{x}/{y}`],minzoom:0,maxzoom:22},aL={id:`${Is}.${th}`,type:"fill",source:`${Is}.${th}`,"source-layer":th,paint:{"fill-color":"#0a0171","fill-opacity":.2}},sL={id:"lu-labels",type:"symbol",source:`${Is}.${th}`,"source-layer":th,layout:{"text-field":["get","name_rus"],"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto"}},nm="sta",oL={type:"vector",tiles:[`${kc}/${nm}/{z}/{x}/{y}`],minzoom:0,maxzoom:22},lL={id:`${Is}.${nm}`,type:"fill",source:`${Is}.${nm}`,"source-layer":nm,paint:{"fill-color":"#EFCDB8","fill-outline-color":"#CD9575","fill-opacity":.6}},im="stl",cL={type:"vector",tiles:[`${kc}/${im}/{z}/{x}/{y}`],minzoom:0,maxzoom:22},uL={id:`${Is}.${im}`,source:`${Is}.${im}`,"source-layer":im,type:"line",paint:{"line-color":"#198EC8"}},am="stp",hL={type:"vector",tiles:[`${kc}/${am}/{z}/{x}/{y}`],minzoom:0,maxzoom:22},fL={id:`${Is}.${am}`,source:`${Is}.${am}`,"source-layer":am,type:"circle",paint:{"circle-color":"blue","circle-radius":4}},R0={field:{source:nL,layer:iL},lu:{source:Ob,layer:aL},lu_labels:{source:Ob,layer:sL},sta:{source:oL,layer:lL},stl:{source:cL,layer:uL},stp:{source:hL,layer:fL}};function dL({styleUrl:e,visibleLayers:t,layers:r,onFeaturesHover:a,enableHover:o,infoMode:h,onClick:d,marker:l}){const b=["stp","stl","sta"],w=ae.useRef(null),[E,P]=ae.useState(!1),[k,R]=ae.useState({longitude:77,latitude:76,zoom:2,bearing:0,pitch:0}),z=ae.useCallback(N=>{R(N.viewState)},[]),D=ae.useCallback(N=>{var te;if(!E)return;const W=(te=w.current)==null?void 0:te.getMap();if(!W)return;let Q=b;h==="points"?Q=["stp"]:h==="lines"?Q=["stl"]:h==="polygons"&&(Q=["sta"]);const _e=Q.filter(we=>t.has(we)).map(we=>`gdx2.${we}`);if(_e.length===0){o&&a([]),W.getCanvas().style.cursor="";return}const Ce=W.queryRenderedFeatures(N.point,{layers:_e});o&&a(Ce),W.getCanvas().style.cursor=Ce.length>0?"pointer":""},[E,a,t,o,h]),G=ae.useCallback(N=>{var Ce;if(!E)return;const W=(Ce=w.current)==null?void 0:Ce.getMap();if(!W)return;const Q=b.filter(te=>t.has(te)).map(te=>`gdx2.${te}`),_e=W.queryRenderedFeatures(N.point,{layers:Q});d(_e,{lng:N.lngLat.lng,lat:N.lngLat.lat})},[E,t,d]),B=ae.useCallback(()=>{var Q;if(!E)return;const N=(Q=w.current)==null?void 0:Q.getMap();if(!N)return;console.log("Adding layers",t),r.forEach(_e=>{const Ce=R0[_e.name];if(!Ce)return;const te=Ce.layer.source,we=Ce.layer.id;if(t.has(_e.name)){if(N.getSource(te)||(console.log("Adding source",te),N.addSource(te,Ce.source)),N.getLayer(we)||(console.log("Adding layer",we),N.addLayer(Ce.layer),N.triggerRepaint()),_e.name==="lu"){const Pe=R0.lu_labels,ke=Pe.layer.id;N.getLayer(ke)||(console.log("Adding layer",ke),N.addLayer(Pe.layer),N.triggerRepaint())}}else{if(N.getLayer(we)&&(console.log("Removing layer",we),N.removeLayer(we)),_e.name==="lu"){const ke=R0.lu_labels.layer.id;N.getLayer(ke)&&(console.log("Removing layer",ke),N.removeLayer(ke))}N.getSource(te)&&Object.values(R0).filter($e=>$e.layer.source===te).filter($e=>N.getLayer($e.layer.id)).length===0&&N.removeSource(te)}})},[E,t,r]);return ae.useEffect(()=>{B()},[B,e]),Se.jsx("div",{className:"relative w-full rounded-md border overflow-hidden",style:{height:"100%"},children:Se.jsxs(eL,{ref:w,mapLib:PC,reuseMaps:!0,mapStyle:e,...k,style:{width:"100%",height:"100%"},onLoad:()=>P(!0),onStyleLoad:()=>B(),onMove:z,onMouseMove:D,onClick:G,children:[Se.jsx(rL,{visualizePitch:!0,position:"top-right"}),l&&Se.jsx(tL,{longitude:l.lng,latitude:l.lat,children:Se.jsx("div",{style:{color:"red",fontSize:"24px"},children:""})})]})})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Lm={};Lm.version="0.18.5";var MC=1252,pL=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],RC=function(e){pL.indexOf(e)!=-1&&(MC=e)};function mL(){RC(1252)}var Ld=function(e){RC(e)};function gL(){Ld(1200),mL()}var D0=function(t){return String.fromCharCode(t)},Nb=function(t){return String.fromCharCode(t)},Fm,ml="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Fd(e){for(var t="",r=0,a=0,o=0,h=0,d=0,l=0,b=0,w=0;w<e.length;)r=e.charCodeAt(w++),h=r>>2,a=e.charCodeAt(w++),d=(r&3)<<4|a>>4,o=e.charCodeAt(w++),l=(a&15)<<2|o>>6,b=o&63,isNaN(a)?l=b=64:isNaN(o)&&(b=64),t+=ml.charAt(h)+ml.charAt(d)+ml.charAt(l)+ml.charAt(b);return t}function Lo(e){var t="",r=0,a=0,o=0,h=0,d=0,l=0,b=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var w=0;w<e.length;)h=ml.indexOf(e.charAt(w++)),d=ml.indexOf(e.charAt(w++)),r=h<<2|d>>4,t+=String.fromCharCode(r),l=ml.indexOf(e.charAt(w++)),a=(d&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),b=ml.indexOf(e.charAt(w++)),o=(l&3)<<6|b,b!==64&&(t+=String.fromCharCode(o));return t}var Ar=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Bo=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Ic(e){return Ar?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function Bb(e){return Ar?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var bs=function(t){return Ar?Bo(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function vg(e){if(typeof ArrayBuffer>"u")return bs(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function Kd(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function _L(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var fi=Ar?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Bo(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),o=0;for(t=0,r=0;t<e.length;r+=o,++t)if(o=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(h){return Array.isArray(h)?h:[].slice.call(h)}))};function yL(e){for(var t=[],r=0,a=e.length+250,o=Ic(e.length+255),h=0;h<e.length;++h){var d=e.charCodeAt(h);if(d<128)o[r++]=d;else if(d<2048)o[r++]=192|d>>6&31,o[r++]=128|d&63;else if(d>=55296&&d<57344){d=(d&1023)+64;var l=e.charCodeAt(++h)&1023;o[r++]=240|d>>8&7,o[r++]=128|d>>2&63,o[r++]=128|l>>6&15|(d&3)<<4,o[r++]=128|l&63}else o[r++]=224|d>>12&15,o[r++]=128|d>>6&63,o[r++]=128|d&63;r>a&&(t.push(o.slice(0,r)),r=0,o=Ic(65535),a=65530)}return t.push(o.slice(0,r)),fi(t)}var ld=/\u0000/g,L0=/[\u0001-\u0006]/g;function rh(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ss(e,t){var r=""+e;return r.length>=t?r:vn("0",t-r.length)+r}function $v(e,t){var r=""+e;return r.length>=t?r:vn(" ",t-r.length)+r}function zm(e,t){var r=""+e;return r.length>=t?r:r+vn(" ",t-r.length)}function xL(e,t){var r=""+Math.round(e);return r.length>=t?r:vn("0",t-r.length)+r}function vL(e,t){var r=""+e;return r.length>=t?r:vn("0",t-r.length)+r}var Ub=Math.pow(2,32);function ku(e,t){if(e>Ub||e<-Ub)return xL(e,t);var r=Math.round(e);return vL(r,t)}function Om(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var Vb=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],by=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function wL(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var bn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},jb={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},bL={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Nm(e,t,r){for(var a=e<0?-1:1,o=e*a,h=0,d=1,l=0,b=1,w=0,E=0,P=Math.floor(o);w<t&&(P=Math.floor(o),l=P*d+h,E=P*w+b,!(o-P<5e-8));)o=1/(o-P),h=d,d=l,b=w,w=E;if(E>t&&(w>t?(E=b,l=h):(E=w,l=d)),!r)return[0,a*l,E];var k=Math.floor(a*l/E);return[k,a*l-k*E,E]}function F0(e,t,r){if(e>2958465||e<0)return null;var a=e|0,o=Math.floor(86400*(e-a)),h=0,d=[],l={D:a,T:o,u:86400*(e-a)-o,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++o==86400&&(l.T=o=0,++a,++l.D)),a===60)d=r?[1317,10,29]:[1900,2,29],h=3;else if(a===0)d=r?[1317,8,29]:[1900,1,0],h=6;else{a>60&&--a;var b=new Date(1900,0,1);b.setDate(b.getDate()+a-1),d=[b.getFullYear(),b.getMonth()+1,b.getDate()],h=b.getDay(),a<60&&(h=(h+6)%7),r&&(h=IL(b,d))}return l.y=d[0],l.m=d[1],l.d=d[2],l.S=o%60,o=Math.floor(o/60),l.M=o%60,o=Math.floor(o/60),l.H=o,l.q=h,l}var DC=new Date(1899,11,31,0,0,0),SL=DC.getTime(),TL=new Date(1900,2,1,0,0,0);function LC(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=TL&&(r+=24*60*60*1e3),(r-(SL+(e.getTimezoneOffset()-DC.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Gv(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function EL(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function CL(e){var t=e<0?12:11,r=Gv(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function AL(e){var t=Gv(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function kL(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=CL(e):t===10?r=e.toFixed(10).substr(0,12):r=AL(e),Gv(EL(r.toUpperCase()))}function Ix(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):kL(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Il(14,LC(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function IL(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function PL(e,t,r,a){var o="",h=0,d=0,l=r.y,b,w=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:b=l%100,w=2;break;default:b=l%1e4,w=4;break}break;case 109:switch(t.length){case 1:case 2:b=r.m,w=t.length;break;case 3:return by[r.m-1][1];case 5:return by[r.m-1][0];default:return by[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:b=r.d,w=t.length;break;case 3:return Vb[r.q][0];default:return Vb[r.q][1]}break;case 104:switch(t.length){case 1:case 2:b=1+(r.H+11)%12,w=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:b=r.H,w=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:b=r.M,w=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ss(r.S,t.length):(a>=2?d=a===3?1e3:100:d=a===1?10:1,h=Math.round(d*(r.S+r.u)),h>=60*d&&(h=0),t==="s"?h===0?"0":""+h/d:(o=Ss(h,2+a),t==="ss"?o.substr(0,2):"."+o.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":b=r.D*24+r.H;break;case"[m]":case"[mm]":b=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":b=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}w=t.length===3?1:2;break;case 101:b=l,w=1;break}var E=w>0?Ss(b,w):"";return E}function gl(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var FC=/%/g;function ML(e,t,r){var a=t.replace(FC,""),o=t.length-a.length;return Ao(e,a,r*Math.pow(10,2*o))+vn("%",o)}function RL(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Ao(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function zC(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+zC(e,-t);var o=e.indexOf(".");o===-1&&(o=e.indexOf("E"));var h=Math.floor(Math.log(t)*Math.LOG10E)%o;if(h<0&&(h+=o),r=(t/Math.pow(10,h)).toPrecision(a+1+(o+h)%o),r.indexOf("e")===-1){var d=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(d-r.length+h):r+="E+"+(d-h);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,o)+"."+r.substr(2+o),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,b,w,E){return b+w+E.substr(0,(o+h)%o)+"."+E.substr(h)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var OC=/# (\?+)( ?)\/( ?)(\d+)/;function DL(e,t,r){var a=parseInt(e[4],10),o=Math.round(t*a),h=Math.floor(o/a),d=o-h*a,l=a;return r+(h===0?"":""+h)+" "+(d===0?vn(" ",e[1].length+1+e[4].length):$v(d,e[1].length)+e[2]+"/"+e[3]+Ss(l,e[4].length))}function LL(e,t,r){return r+(t===0?"":""+t)+vn(" ",e[1].length+2+e[4].length)}var NC=/^#*0*\.([0#]+)/,BC=/\).*[0#]/,UC=/\(###\) ###\\?-####/;function Wi(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function $b(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function Gb(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function FL(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function zL(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Za(e,t,r){if(e.charCodeAt(0)===40&&!t.match(BC)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Za("n",a,r):"("+Za("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return RL(e,t,r);if(t.indexOf("%")!==-1)return ML(e,t,r);if(t.indexOf("E")!==-1)return zC(t,r);if(t.charCodeAt(0)===36)return"$"+Za(e,t.substr(t.charAt(1)==" "?2:1),r);var o,h,d,l,b=Math.abs(r),w=r<0?"-":"";if(t.match(/^00+$/))return w+ku(b,t.length);if(t.match(/^[#?]+$/))return o=ku(r,0),o==="0"&&(o=""),o.length>t.length?o:Wi(t.substr(0,t.length-o.length))+o;if(h=t.match(OC))return DL(h,b,w);if(t.match(/^#+0+$/))return w+ku(b,t.length-t.indexOf("0"));if(h=t.match(NC))return o=$b(r,h[1].length).replace(/^([^\.]+)$/,"$1."+Wi(h[1])).replace(/\.$/,"."+Wi(h[1])).replace(/\.(\d*)$/,function(z,D){return"."+D+vn("0",Wi(h[1]).length-D.length)}),t.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),h=t.match(/^(0*)\.(#*)$/))return w+$b(b,h[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,h[1].length?"0.":".");if(h=t.match(/^#{1,3},##0(\.?)$/))return w+gl(ku(b,0));if(h=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Za(e,t,-r):gl(""+(Math.floor(r)+FL(r,h[1].length)))+"."+Ss(Gb(r,h[1].length),h[1].length);if(h=t.match(/^#,#*,#0/))return Za(e,t.replace(/^#,#*,/,""),r);if(h=t.match(/^([0#]+)(\\?-([0#]+))+$/))return o=rh(Za(e,t.replace(/[\\-]/g,""),r)),d=0,rh(rh(t.replace(/\\/g,"")).replace(/[0#]/g,function(z){return d<o.length?o.charAt(d++):z==="0"?"0":""}));if(t.match(UC))return o=Za(e,"##########",r),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var E="";if(h=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(h[4].length,7),l=Nm(b,Math.pow(10,d)-1,!1),o=""+w,E=Ao("n",h[1],l[1]),E.charAt(E.length-1)==" "&&(E=E.substr(0,E.length-1)+"0"),o+=E+h[2]+"/"+h[3],E=zm(l[2],d),E.length<h[4].length&&(E=Wi(h[4].substr(h[4].length-E.length))+E),o+=E,o;if(h=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(h[1].length,h[4].length),7),l=Nm(b,Math.pow(10,d)-1,!0),w+(l[0]||(l[1]?"":"0"))+" "+(l[1]?$v(l[1],d)+h[2]+"/"+h[3]+zm(l[2],d):vn(" ",2*d+1+h[2].length+h[3].length));if(h=t.match(/^[#0?]+$/))return o=ku(r,0),t.length<=o.length?o:Wi(t.substr(0,t.length-o.length))+o;if(h=t.match(/^([#0?]+)\.([#0]+)$/)){o=""+r.toFixed(Math.min(h[2].length,10)).replace(/([^0])0+$/,"$1"),d=o.indexOf(".");var P=t.indexOf(".")-d,k=t.length-o.length-P;return Wi(t.substr(0,P)+o+t.substr(t.length-k))}if(h=t.match(/^00,000\.([#0]*0)$/))return d=Gb(r,h[1].length),r<0?"-"+Za(e,t,-r):gl(zL(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(z){return"00,"+(z.length<3?Ss(0,3-z.length):"")+z})+"."+Ss(d,h[1].length);switch(t){case"###,##0.00":return Za(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var R=gl(ku(b,0));return R!=="0"?w+R:"";case"###,###.00":return Za(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Za(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function OL(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Ao(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function NL(e,t,r){var a=t.replace(FC,""),o=t.length-a.length;return Ao(e,a,r*Math.pow(10,2*o))+vn("%",o)}function VC(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+VC(e,-t);var o=e.indexOf(".");o===-1&&(o=e.indexOf("E"));var h=Math.floor(Math.log(t)*Math.LOG10E)%o;if(h<0&&(h+=o),r=(t/Math.pow(10,h)).toPrecision(a+1+(o+h)%o),!r.match(/[Ee]/)){var d=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(d-r.length+h):r+="E+"+(d-h),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,b,w,E){return b+w+E.substr(0,(o+h)%o)+"."+E.substr(h)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Gs(e,t,r){if(e.charCodeAt(0)===40&&!t.match(BC)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Gs("n",a,r):"("+Gs("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return OL(e,t,r);if(t.indexOf("%")!==-1)return NL(e,t,r);if(t.indexOf("E")!==-1)return VC(t,r);if(t.charCodeAt(0)===36)return"$"+Gs(e,t.substr(t.charAt(1)==" "?2:1),r);var o,h,d,l,b=Math.abs(r),w=r<0?"-":"";if(t.match(/^00+$/))return w+Ss(b,t.length);if(t.match(/^[#?]+$/))return o=""+r,r===0&&(o=""),o.length>t.length?o:Wi(t.substr(0,t.length-o.length))+o;if(h=t.match(OC))return LL(h,b,w);if(t.match(/^#+0+$/))return w+Ss(b,t.length-t.indexOf("0"));if(h=t.match(NC))return o=(""+r).replace(/^([^\.]+)$/,"$1."+Wi(h[1])).replace(/\.$/,"."+Wi(h[1])),o=o.replace(/\.(\d*)$/,function(z,D){return"."+D+vn("0",Wi(h[1]).length-D.length)}),t.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),h=t.match(/^(0*)\.(#*)$/))return w+(""+b).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,h[1].length?"0.":".");if(h=t.match(/^#{1,3},##0(\.?)$/))return w+gl(""+b);if(h=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Gs(e,t,-r):gl(""+r)+"."+vn("0",h[1].length);if(h=t.match(/^#,#*,#0/))return Gs(e,t.replace(/^#,#*,/,""),r);if(h=t.match(/^([0#]+)(\\?-([0#]+))+$/))return o=rh(Gs(e,t.replace(/[\\-]/g,""),r)),d=0,rh(rh(t.replace(/\\/g,"")).replace(/[0#]/g,function(z){return d<o.length?o.charAt(d++):z==="0"?"0":""}));if(t.match(UC))return o=Gs(e,"##########",r),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var E="";if(h=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(h[4].length,7),l=Nm(b,Math.pow(10,d)-1,!1),o=""+w,E=Ao("n",h[1],l[1]),E.charAt(E.length-1)==" "&&(E=E.substr(0,E.length-1)+"0"),o+=E+h[2]+"/"+h[3],E=zm(l[2],d),E.length<h[4].length&&(E=Wi(h[4].substr(h[4].length-E.length))+E),o+=E,o;if(h=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(h[1].length,h[4].length),7),l=Nm(b,Math.pow(10,d)-1,!0),w+(l[0]||(l[1]?"":"0"))+" "+(l[1]?$v(l[1],d)+h[2]+"/"+h[3]+zm(l[2],d):vn(" ",2*d+1+h[2].length+h[3].length));if(h=t.match(/^[#0?]+$/))return o=""+r,t.length<=o.length?o:Wi(t.substr(0,t.length-o.length))+o;if(h=t.match(/^([#0]+)\.([#0]+)$/)){o=""+r.toFixed(Math.min(h[2].length,10)).replace(/([^0])0+$/,"$1"),d=o.indexOf(".");var P=t.indexOf(".")-d,k=t.length-o.length-P;return Wi(t.substr(0,P)+o+t.substr(t.length-k))}if(h=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Gs(e,t,-r):gl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(z){return"00,"+(z.length<3?Ss(0,3-z.length):"")+z})+"."+Ss(0,h[1].length);switch(t){case"###,###":case"##,###":case"#,###":var R=gl(""+b);return R!=="0"?w+R:"";default:if(t.match(/\.[0#?]*$/))return Gs(e,t.slice(0,t.lastIndexOf(".")),r)+Wi(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Ao(e,t,r){return(r|0)===r?Gs(e,t,r):Za(e,t,r)}function BL(e){for(var t=[],r=!1,a=0,o=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(o,a-o),o=a+1}if(t[t.length]=e.substr(o),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var jC=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function $C(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":Om(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(jC))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function UL(e,t,r,a){for(var o=[],h="",d=0,l="",b="t",w,E,P,k="H";d<e.length;)switch(l=e.charAt(d)){case"G":if(!Om(e,d))throw new Error("unrecognized character "+l+" in "+e);o[o.length]={t:"G",v:"General"},d+=7;break;case'"':for(h="";(P=e.charCodeAt(++d))!==34&&d<e.length;)h+=String.fromCharCode(P);o[o.length]={t:"t",v:h},++d;break;case"\\":var R=e.charAt(++d),z=R==="("||R===")"?R:"t";o[o.length]={t:z,v:R},++d;break;case"_":o[o.length]={t:"t",v:" "},d+=2;break;case"@":o[o.length]={t:"T",v:t},++d;break;case"B":case"b":if(e.charAt(d+1)==="1"||e.charAt(d+1)==="2"){if(w==null&&(w=F0(t,r,e.charAt(d+1)==="2"),w==null))return"";o[o.length]={t:"X",v:e.substr(d,2)},b=l,d+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||w==null&&(w=F0(t,r),w==null))return"";for(h=l;++d<e.length&&e.charAt(d).toLowerCase()===l;)h+=l;l==="m"&&b.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=k),o[o.length]={t:l,v:h},b=l;break;case"A":case"a":case"":var D={t:l,v:l};if(w==null&&(w=F0(t,r)),e.substr(d,3).toUpperCase()==="A/P"?(w!=null&&(D.v=w.H>=12?"P":"A"),D.t="T",k="h",d+=3):e.substr(d,5).toUpperCase()==="AM/PM"?(w!=null&&(D.v=w.H>=12?"PM":"AM"),D.t="T",d+=5,k="h"):e.substr(d,5).toUpperCase()==="/"?(w!=null&&(D.v=w.H>=12?"":""),D.t="T",d+=5,k="h"):(D.t="t",++d),w==null&&D.t==="T")return"";o[o.length]=D,b=l;break;case"[":for(h=l;e.charAt(d++)!=="]"&&d<e.length;)h+=e.charAt(d);if(h.slice(-1)!=="]")throw'unterminated "[" block: |'+h+"|";if(h.match(jC)){if(w==null&&(w=F0(t,r),w==null))return"";o[o.length]={t:"Z",v:h.toLowerCase()},b=h.charAt(1)}else h.indexOf("$")>-1&&(h=(h.match(/\$([^-\[\]]*)/)||[])[1]||"$",$C(e)||(o[o.length]={t:"t",v:h}));break;case".":if(w!=null){for(h=l;++d<e.length&&(l=e.charAt(d))==="0";)h+=l;o[o.length]={t:"s",v:h};break}case"0":case"#":for(h=l;++d<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(d))>-1;)h+=l;o[o.length]={t:"n",v:h};break;case"?":for(h=l;e.charAt(++d)===l;)h+=l;o[o.length]={t:l,v:h},b=l;break;case"*":++d,(e.charAt(d)==" "||e.charAt(d)=="*")&&++d;break;case"(":case")":o[o.length]={t:a===1?"t":l,v:l},++d;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(h=l;d<e.length&&"0123456789".indexOf(e.charAt(++d))>-1;)h+=e.charAt(d);o[o.length]={t:"D",v:h};break;case" ":o[o.length]={t:l,v:l},++d;break;case"$":o[o.length]={t:"t",v:"$"},++d;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);o[o.length]={t:"t",v:l},++d;break}var G=0,B=0,N;for(d=o.length-1,b="t";d>=0;--d)switch(o[d].t){case"h":case"H":o[d].t=k,b="h",G<1&&(G=1);break;case"s":(N=o[d].v.match(/\.0+$/))&&(B=Math.max(B,N[0].length-1)),G<3&&(G=3);case"d":case"y":case"M":case"e":b=o[d].t;break;case"m":b==="s"&&(o[d].t="M",G<2&&(G=2));break;case"X":break;case"Z":G<1&&o[d].v.match(/[Hh]/)&&(G=1),G<2&&o[d].v.match(/[Mm]/)&&(G=2),G<3&&o[d].v.match(/[Ss]/)&&(G=3)}switch(G){case 0:break;case 1:w.u>=.5&&(w.u=0,++w.S),w.S>=60&&(w.S=0,++w.M),w.M>=60&&(w.M=0,++w.H);break;case 2:w.u>=.5&&(w.u=0,++w.S),w.S>=60&&(w.S=0,++w.M);break}var W="",Q;for(d=0;d<o.length;++d)switch(o[d].t){case"t":case"T":case" ":case"D":break;case"X":o[d].v="",o[d].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[d].v=PL(o[d].t.charCodeAt(0),o[d].v,w,B),o[d].t="t";break;case"n":case"?":for(Q=d+1;o[Q]!=null&&((l=o[Q].t)==="?"||l==="D"||(l===" "||l==="t")&&o[Q+1]!=null&&(o[Q+1].t==="?"||o[Q+1].t==="t"&&o[Q+1].v==="/")||o[d].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(o[Q].v==="/"||o[Q].v===" "&&o[Q+1]!=null&&o[Q+1].t=="?"));)o[d].v+=o[Q].v,o[Q]={v:"",t:";"},++Q;W+=o[d].v,d=Q-1;break;case"G":o[d].t="t",o[d].v=Ix(t,r);break}var _e="",Ce,te;if(W.length>0){W.charCodeAt(0)==40?(Ce=t<0&&W.charCodeAt(0)===45?-t:t,te=Ao("n",W,Ce)):(Ce=t<0&&a>1?-t:t,te=Ao("n",W,Ce),Ce<0&&o[0]&&o[0].t=="t"&&(te=te.substr(1),o[0].v="-"+o[0].v)),Q=te.length-1;var we=o.length;for(d=0;d<o.length;++d)if(o[d]!=null&&o[d].t!="t"&&o[d].v.indexOf(".")>-1){we=d;break}var Pe=o.length;if(we===o.length&&te.indexOf("E")===-1){for(d=o.length-1;d>=0;--d)o[d]==null||"n?".indexOf(o[d].t)===-1||(Q>=o[d].v.length-1?(Q-=o[d].v.length,o[d].v=te.substr(Q+1,o[d].v.length)):Q<0?o[d].v="":(o[d].v=te.substr(0,Q+1),Q=-1),o[d].t="t",Pe=d);Q>=0&&Pe<o.length&&(o[Pe].v=te.substr(0,Q+1)+o[Pe].v)}else if(we!==o.length&&te.indexOf("E")===-1){for(Q=te.indexOf(".")-1,d=we;d>=0;--d)if(!(o[d]==null||"n?".indexOf(o[d].t)===-1)){for(E=o[d].v.indexOf(".")>-1&&d===we?o[d].v.indexOf(".")-1:o[d].v.length-1,_e=o[d].v.substr(E+1);E>=0;--E)Q>=0&&(o[d].v.charAt(E)==="0"||o[d].v.charAt(E)==="#")&&(_e=te.charAt(Q--)+_e);o[d].v=_e,o[d].t="t",Pe=d}for(Q>=0&&Pe<o.length&&(o[Pe].v=te.substr(0,Q+1)+o[Pe].v),Q=te.indexOf(".")+1,d=we;d<o.length;++d)if(!(o[d]==null||"n?(".indexOf(o[d].t)===-1&&d!==we)){for(E=o[d].v.indexOf(".")>-1&&d===we?o[d].v.indexOf(".")+1:0,_e=o[d].v.substr(0,E);E<o[d].v.length;++E)Q<te.length&&(_e+=te.charAt(Q++));o[d].v=_e,o[d].t="t",Pe=d}}}for(d=0;d<o.length;++d)o[d]!=null&&"n?".indexOf(o[d].t)>-1&&(Ce=a>1&&t<0&&d>0&&o[d-1].v==="-"?-t:t,o[d].v=Ao(o[d].t,o[d].v,Ce),o[d].t="t");var ke="";for(d=0;d!==o.length;++d)o[d]!=null&&(ke+=o[d].v);return ke}var Wb=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Hb(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function VL(e,t){var r=BL(e),a=r.length,o=r[a-1].indexOf("@");if(a<4&&o>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||o>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=o>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=o>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=o>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var h=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,h];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var d=r[0].match(Wb),l=r[1].match(Wb);return Hb(t,d)?[a,r[0]]:Hb(t,l)?[a,r[1]]:[a,r[d!=null&&l!=null?2:1]]}return[a,h]}function Il(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:bn)[e],a==null&&(a=r.table&&r.table[jb[e]]||bn[jb[e]]),a==null&&(a=bL[e]||"General");break}if(Om(a,0))return Ix(t,r);t instanceof Date&&(t=LC(t,r.date1904));var o=VL(a,t);if(Om(o[1]))return Ix(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return UL(o[1],t,r,o[0])}function GC(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(bn[r]==null){t<0&&(t=r);continue}if(bn[r]==e){t=r;break}}t<0&&(t=391)}return bn[t]=e,t}function wg(e){for(var t=0;t!=392;++t)e[t]!==void 0&&GC(e[t],t)}function bg(){bn=wL()}var WC=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function jL(e){var t=typeof e=="number"?bn[e]:e;return t=t.replace(WC,"(\\d+)"),new RegExp("^"+t+"$")}function $L(e,t,r){var a=-1,o=-1,h=-1,d=-1,l=-1,b=-1;(t.match(WC)||[]).forEach(function(P,k){var R=parseInt(r[k+1],10);switch(P.toLowerCase().charAt(0)){case"y":a=R;break;case"d":h=R;break;case"h":d=R;break;case"s":b=R;break;case"m":d>=0?l=R:o=R;break}}),b>=0&&l==-1&&o>=0&&(l=o,o=-1);var w=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(o>=1?o:1)).slice(-2)+"-"+("00"+(h>=1?h:1)).slice(-2);w.length==7&&(w="0"+w),w.length==8&&(w="20"+w);var E=("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(b>=0?b:0)).slice(-2);return d==-1&&l==-1&&b==-1?w:a==-1&&o==-1&&h==-1?E:w+"T"+E}var GL=function(){var e={};e.version="1.2.0";function t(){for(var te=0,we=new Array(256),Pe=0;Pe!=256;++Pe)te=Pe,te=te&1?-306674912^te>>>1:te>>>1,te=te&1?-306674912^te>>>1:te>>>1,te=te&1?-306674912^te>>>1:te>>>1,te=te&1?-306674912^te>>>1:te>>>1,te=te&1?-306674912^te>>>1:te>>>1,te=te&1?-306674912^te>>>1:te>>>1,te=te&1?-306674912^te>>>1:te>>>1,te=te&1?-306674912^te>>>1:te>>>1,we[Pe]=te;return typeof Int32Array<"u"?new Int32Array(we):we}var r=t();function a(te){var we=0,Pe=0,ke=0,$e=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ke=0;ke!=256;++ke)$e[ke]=te[ke];for(ke=0;ke!=256;++ke)for(Pe=te[ke],we=256+ke;we<4096;we+=256)Pe=$e[we]=Pe>>>8^te[Pe&255];var Ue=[];for(ke=1;ke!=16;++ke)Ue[ke-1]=typeof Int32Array<"u"?$e.subarray(ke*256,ke*256+256):$e.slice(ke*256,ke*256+256);return Ue}var o=a(r),h=o[0],d=o[1],l=o[2],b=o[3],w=o[4],E=o[5],P=o[6],k=o[7],R=o[8],z=o[9],D=o[10],G=o[11],B=o[12],N=o[13],W=o[14];function Q(te,we){for(var Pe=we^-1,ke=0,$e=te.length;ke<$e;)Pe=Pe>>>8^r[(Pe^te.charCodeAt(ke++))&255];return~Pe}function _e(te,we){for(var Pe=we^-1,ke=te.length-15,$e=0;$e<ke;)Pe=W[te[$e++]^Pe&255]^N[te[$e++]^Pe>>8&255]^B[te[$e++]^Pe>>16&255]^G[te[$e++]^Pe>>>24]^D[te[$e++]]^z[te[$e++]]^R[te[$e++]]^k[te[$e++]]^P[te[$e++]]^E[te[$e++]]^w[te[$e++]]^b[te[$e++]]^l[te[$e++]]^d[te[$e++]]^h[te[$e++]]^r[te[$e++]];for(ke+=15;$e<ke;)Pe=Pe>>>8^r[(Pe^te[$e++])&255];return~Pe}function Ce(te,we){for(var Pe=we^-1,ke=0,$e=te.length,Ue=0,at=0;ke<$e;)Ue=te.charCodeAt(ke++),Ue<128?Pe=Pe>>>8^r[(Pe^Ue)&255]:Ue<2048?(Pe=Pe>>>8^r[(Pe^(192|Ue>>6&31))&255],Pe=Pe>>>8^r[(Pe^(128|Ue&63))&255]):Ue>=55296&&Ue<57344?(Ue=(Ue&1023)+64,at=te.charCodeAt(ke++)&1023,Pe=Pe>>>8^r[(Pe^(240|Ue>>8&7))&255],Pe=Pe>>>8^r[(Pe^(128|Ue>>2&63))&255],Pe=Pe>>>8^r[(Pe^(128|at>>6&15|(Ue&3)<<4))&255],Pe=Pe>>>8^r[(Pe^(128|at&63))&255]):(Pe=Pe>>>8^r[(Pe^(224|Ue>>12&15))&255],Pe=Pe>>>8^r[(Pe^(128|Ue>>6&63))&255],Pe=Pe>>>8^r[(Pe^(128|Ue&63))&255]);return~Pe}return e.table=r,e.bstr=Q,e.buf=_e,e.str=Ce,e}(),Br=function(){var t={};t.version="1.2.1";function r(j,re){for(var ee=j.split("/"),J=re.split("/"),ne=0,se=0,Be=Math.min(ee.length,J.length);ne<Be;++ne){if(se=ee[ne].length-J[ne].length)return se;if(ee[ne]!=J[ne])return ee[ne]<J[ne]?-1:1}return ee.length-J.length}function a(j){if(j.charAt(j.length-1)=="/")return j.slice(0,-1).indexOf("/")===-1?j:a(j.slice(0,-1));var re=j.lastIndexOf("/");return re===-1?j:j.slice(0,re+1)}function o(j){if(j.charAt(j.length-1)=="/")return o(j.slice(0,-1));var re=j.lastIndexOf("/");return re===-1?j:j.slice(re+1)}function h(j,re){typeof re=="string"&&(re=new Date(re));var ee=re.getHours();ee=ee<<6|re.getMinutes(),ee=ee<<5|re.getSeconds()>>>1,j.write_shift(2,ee);var J=re.getFullYear()-1980;J=J<<4|re.getMonth()+1,J=J<<5|re.getDate(),j.write_shift(2,J)}function d(j){var re=j.read_shift(2)&65535,ee=j.read_shift(2)&65535,J=new Date,ne=ee&31;ee>>>=5;var se=ee&15;ee>>>=4,J.setMilliseconds(0),J.setFullYear(ee+1980),J.setMonth(se-1),J.setDate(ne);var Be=re&31;re>>>=5;var Ze=re&63;return re>>>=6,J.setHours(re),J.setMinutes(Ze),J.setSeconds(Be<<1),J}function l(j){Sa(j,0);for(var re={},ee=0;j.l<=j.length-4;){var J=j.read_shift(2),ne=j.read_shift(2),se=j.l+ne,Be={};switch(J){case 21589:ee=j.read_shift(1),ee&1&&(Be.mtime=j.read_shift(4)),ne>5&&(ee&2&&(Be.atime=j.read_shift(4)),ee&4&&(Be.ctime=j.read_shift(4))),Be.mtime&&(Be.mt=new Date(Be.mtime*1e3));break}j.l=se,re[J]=Be}return re}var b;function w(){return b||(b={})}function E(j,re){if(j[0]==80&&j[1]==75)return Dn(j,re);if((j[0]|32)==109&&(j[1]|32)==105)return me(j,re);if(j.length<512)throw new Error("CFB file size "+j.length+" < 512");var ee=3,J=512,ne=0,se=0,Be=0,Ze=0,ze=0,Ne=[],Ge=j.slice(0,512);Sa(Ge,0);var it=P(Ge);switch(ee=it[0],ee){case 3:J=512;break;case 4:J=4096;break;case 0:if(it[1]==0)return Dn(j,re);default:throw new Error("Major Version: Expected 3 or 4 saw "+ee)}J!==512&&(Ge=j.slice(0,J),Sa(Ge,28));var mt=j.slice(0,J);k(Ge,ee);var Ct=Ge.read_shift(4,"i");if(ee===3&&Ct!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ct);Ge.l+=4,Be=Ge.read_shift(4,"i"),Ge.l+=4,Ge.chk("00100000","Mini Stream Cutoff Size: "),Ze=Ge.read_shift(4,"i"),ne=Ge.read_shift(4,"i"),ze=Ge.read_shift(4,"i"),se=Ge.read_shift(4,"i");for(var pt=-1,zt=0;zt<109&&(pt=Ge.read_shift(4,"i"),!(pt<0));++zt)Ne[zt]=pt;var Jt=R(j,J);G(ze,se,Jt,J,Ne);var Sr=N(Jt,Be,Ne,J);Sr[Be].name="!Directory",ne>0&&Ze!==at&&(Sr[Ze].name="!MiniFAT"),Sr[Ne[0]].name="!FAT",Sr.fat_addrs=Ne,Sr.ssz=J;var Vr={},rr=[],is=[],Ba=[];W(Be,Sr,Jt,rr,ne,Vr,is,Ze),z(is,Ba,rr),rr.shift();var nn={FileIndex:is,FullPaths:Ba};return re&&re.raw&&(nn.raw={header:mt,sectors:Jt}),nn}function P(j){if(j[j.l]==80&&j[j.l+1]==75)return[0,0];j.chk(yt,"Header Signature: "),j.l+=16;var re=j.read_shift(2,"u");return[j.read_shift(2,"u"),re]}function k(j,re){var ee=9;switch(j.l+=2,ee=j.read_shift(2)){case 9:if(re!=3)throw new Error("Sector Shift: Expected 9 saw "+ee);break;case 12:if(re!=4)throw new Error("Sector Shift: Expected 12 saw "+ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ee)}j.chk("0600","Mini Sector Shift: "),j.chk("000000000000","Reserved: ")}function R(j,re){for(var ee=Math.ceil(j.length/re)-1,J=[],ne=1;ne<ee;++ne)J[ne-1]=j.slice(ne*re,(ne+1)*re);return J[ee-1]=j.slice(ee*re),J}function z(j,re,ee){for(var J=0,ne=0,se=0,Be=0,Ze=0,ze=ee.length,Ne=[],Ge=[];J<ze;++J)Ne[J]=Ge[J]=J,re[J]=ee[J];for(;Ze<Ge.length;++Ze)J=Ge[Ze],ne=j[J].L,se=j[J].R,Be=j[J].C,Ne[J]===J&&(ne!==-1&&Ne[ne]!==ne&&(Ne[J]=Ne[ne]),se!==-1&&Ne[se]!==se&&(Ne[J]=Ne[se])),Be!==-1&&(Ne[Be]=J),ne!==-1&&J!=Ne[J]&&(Ne[ne]=Ne[J],Ge.lastIndexOf(ne)<Ze&&Ge.push(ne)),se!==-1&&J!=Ne[J]&&(Ne[se]=Ne[J],Ge.lastIndexOf(se)<Ze&&Ge.push(se));for(J=1;J<ze;++J)Ne[J]===J&&(se!==-1&&Ne[se]!==se?Ne[J]=Ne[se]:ne!==-1&&Ne[ne]!==ne&&(Ne[J]=Ne[ne]));for(J=1;J<ze;++J)if(j[J].type!==0){if(Ze=J,Ze!=Ne[Ze])do Ze=Ne[Ze],re[J]=re[Ze]+"/"+re[J];while(Ze!==0&&Ne[Ze]!==-1&&Ze!=Ne[Ze]);Ne[J]=-1}for(re[0]+="/",J=1;J<ze;++J)j[J].type!==2&&(re[J]+="/")}function D(j,re,ee){for(var J=j.start,ne=j.size,se=[],Be=J;ee&&ne>0&&Be>=0;)se.push(re.slice(Be*Ue,Be*Ue+Ue)),ne-=Ue,Be=fc(ee,Be*4);return se.length===0?et(0):fi(se).slice(0,j.size)}function G(j,re,ee,J,ne){var se=at;if(j===at){if(re!==0)throw new Error("DIFAT chain shorter than expected")}else if(j!==-1){var Be=ee[j],Ze=(J>>>2)-1;if(!Be)return;for(var ze=0;ze<Ze&&(se=fc(Be,ze*4))!==at;++ze)ne.push(se);G(fc(Be,J-4),re-1,ee,J,ne)}}function B(j,re,ee,J,ne){var se=[],Be=[];ne||(ne=[]);var Ze=J-1,ze=0,Ne=0;for(ze=re;ze>=0;){ne[ze]=!0,se[se.length]=ze,Be.push(j[ze]);var Ge=ee[Math.floor(ze*4/J)];if(Ne=ze*4&Ze,J<4+Ne)throw new Error("FAT boundary crossed: "+ze+" 4 "+J);if(!j[Ge])break;ze=fc(j[Ge],Ne)}return{nodes:se,data:eS([Be])}}function N(j,re,ee,J){var ne=j.length,se=[],Be=[],Ze=[],ze=[],Ne=J-1,Ge=0,it=0,mt=0,Ct=0;for(Ge=0;Ge<ne;++Ge)if(Ze=[],mt=Ge+re,mt>=ne&&(mt-=ne),!Be[mt]){ze=[];var pt=[];for(it=mt;it>=0;){pt[it]=!0,Be[it]=!0,Ze[Ze.length]=it,ze.push(j[it]);var zt=ee[Math.floor(it*4/J)];if(Ct=it*4&Ne,J<4+Ct)throw new Error("FAT boundary crossed: "+it+" 4 "+J);if(!j[zt]||(it=fc(j[zt],Ct),pt[it]))break}se[mt]={nodes:Ze,data:eS([ze])}}return se}function W(j,re,ee,J,ne,se,Be,Ze){for(var ze=0,Ne=J.length?2:0,Ge=re[j].data,it=0,mt=0,Ct;it<Ge.length;it+=128){var pt=Ge.slice(it,it+128);Sa(pt,64),mt=pt.read_shift(2),Ct=Xv(pt,0,mt-Ne),J.push(Ct);var zt={name:Ct,type:pt.read_shift(1),color:pt.read_shift(1),L:pt.read_shift(4,"i"),R:pt.read_shift(4,"i"),C:pt.read_shift(4,"i"),clsid:pt.read_shift(16),state:pt.read_shift(4,"i"),start:0,size:0},Jt=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);Jt!==0&&(zt.ct=Q(pt,pt.l-8));var Sr=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);Sr!==0&&(zt.mt=Q(pt,pt.l-8)),zt.start=pt.read_shift(4,"i"),zt.size=pt.read_shift(4,"i"),zt.size<0&&zt.start<0&&(zt.size=zt.type=0,zt.start=at,zt.name=""),zt.type===5?(ze=zt.start,ne>0&&ze!==at&&(re[ze].name="!StreamData")):zt.size>=4096?(zt.storage="fat",re[zt.start]===void 0&&(re[zt.start]=B(ee,zt.start,re.fat_addrs,re.ssz)),re[zt.start].name=zt.name,zt.content=re[zt.start].data.slice(0,zt.size)):(zt.storage="minifat",zt.size<0?zt.size=0:ze!==at&&zt.start!==at&&re[ze]&&(zt.content=D(zt,re[ze].data,(re[Ze]||{}).data))),zt.content&&Sa(zt.content,0),se[Ct]=zt,Be.push(zt)}}function Q(j,re){return new Date((Ca(j,re+4)/1e7*Math.pow(2,32)+Ca(j,re)/1e7-11644473600)*1e3)}function _e(j,re){return w(),E(b.readFileSync(j),re)}function Ce(j,re){var ee=re&&re.type;switch(ee||Ar&&Buffer.isBuffer(j)&&(ee="buffer"),ee||"base64"){case"file":return _e(j,re);case"base64":return E(bs(Lo(j)),re);case"binary":return E(bs(j),re)}return E(j,re)}function te(j,re){var ee=re||{},J=ee.root||"Root Entry";if(j.FullPaths||(j.FullPaths=[]),j.FileIndex||(j.FileIndex=[]),j.FullPaths.length!==j.FileIndex.length)throw new Error("inconsistent CFB structure");j.FullPaths.length===0&&(j.FullPaths[0]=J+"/",j.FileIndex[0]={name:J,type:5}),ee.CLSID&&(j.FileIndex[0].clsid=ee.CLSID),we(j)}function we(j){var re="Sh33tJ5";if(!Br.find(j,"/"+re)){var ee=et(4);ee[0]=55,ee[1]=ee[3]=50,ee[2]=54,j.FileIndex.push({name:re,type:2,content:ee,size:4,L:69,R:69,C:69}),j.FullPaths.push(j.FullPaths[0]+re),Pe(j)}}function Pe(j,re){te(j);for(var ee=!1,J=!1,ne=j.FullPaths.length-1;ne>=0;--ne){var se=j.FileIndex[ne];switch(se.type){case 0:J?ee=!0:(j.FileIndex.pop(),j.FullPaths.pop());break;case 1:case 2:case 5:J=!0,isNaN(se.R*se.L*se.C)&&(ee=!0),se.R>-1&&se.L>-1&&se.R==se.L&&(ee=!0);break;default:ee=!0;break}}if(!(!ee&&!re)){var Be=new Date(1987,1,19),Ze=0,ze=Object.create?Object.create(null):{},Ne=[];for(ne=0;ne<j.FullPaths.length;++ne)ze[j.FullPaths[ne]]=!0,j.FileIndex[ne].type!==0&&Ne.push([j.FullPaths[ne],j.FileIndex[ne]]);for(ne=0;ne<Ne.length;++ne){var Ge=a(Ne[ne][0]);J=ze[Ge],J||(Ne.push([Ge,{name:o(Ge).replace("/",""),type:1,clsid:nt,ct:Be,mt:Be,content:null}]),ze[Ge]=!0)}for(Ne.sort(function(Ct,pt){return r(Ct[0],pt[0])}),j.FullPaths=[],j.FileIndex=[],ne=0;ne<Ne.length;++ne)j.FullPaths[ne]=Ne[ne][0],j.FileIndex[ne]=Ne[ne][1];for(ne=0;ne<Ne.length;++ne){var it=j.FileIndex[ne],mt=j.FullPaths[ne];if(it.name=o(mt).replace("/",""),it.L=it.R=it.C=-(it.color=1),it.size=it.content?it.content.length:0,it.start=0,it.clsid=it.clsid||nt,ne===0)it.C=Ne.length>1?1:-1,it.size=0,it.type=5;else if(mt.slice(-1)=="/"){for(Ze=ne+1;Ze<Ne.length&&a(j.FullPaths[Ze])!=mt;++Ze);for(it.C=Ze>=Ne.length?-1:Ze,Ze=ne+1;Ze<Ne.length&&a(j.FullPaths[Ze])!=a(mt);++Ze);it.R=Ze>=Ne.length?-1:Ze,it.type=1}else a(j.FullPaths[ne+1]||"")==a(mt)&&(it.R=ne+1),it.type=2}}}function ke(j,re){var ee=re||{};if(ee.fileType=="mad")return Fe(j,ee);switch(Pe(j),ee.fileType){case"zip":return Qt(j,ee)}var J=function(Ct){for(var pt=0,zt=0,Jt=0;Jt<Ct.FileIndex.length;++Jt){var Sr=Ct.FileIndex[Jt];if(Sr.content){var Vr=Sr.content.length;Vr>0&&(Vr<4096?pt+=Vr+63>>6:zt+=Vr+511>>9)}}for(var rr=Ct.FullPaths.length+3>>2,is=pt+7>>3,Ba=pt+127>>7,nn=is+zt+rr+Ba,un=nn+127>>7,Bl=un<=109?0:Math.ceil((un-109)/127);nn+un+Bl+127>>7>un;)Bl=++un<=109?0:Math.ceil((un-109)/127);var an=[1,Bl,un,Ba,rr,zt,pt,0];return Ct.FileIndex[0].size=pt<<6,an[7]=(Ct.FileIndex[0].start=an[0]+an[1]+an[2]+an[3]+an[4]+an[5])+(an[6]+7>>3),an}(j),ne=et(J[7]<<9),se=0,Be=0;{for(se=0;se<8;++se)ne.write_shift(1,gt[se]);for(se=0;se<8;++se)ne.write_shift(2,0);for(ne.write_shift(2,62),ne.write_shift(2,3),ne.write_shift(2,65534),ne.write_shift(2,9),ne.write_shift(2,6),se=0;se<3;++se)ne.write_shift(2,0);for(ne.write_shift(4,0),ne.write_shift(4,J[2]),ne.write_shift(4,J[0]+J[1]+J[2]+J[3]-1),ne.write_shift(4,0),ne.write_shift(4,4096),ne.write_shift(4,J[3]?J[0]+J[1]+J[2]-1:at),ne.write_shift(4,J[3]),ne.write_shift(-4,J[1]?J[0]-1:at),ne.write_shift(4,J[1]),se=0;se<109;++se)ne.write_shift(-4,se<J[2]?J[1]+se:-1)}if(J[1])for(Be=0;Be<J[1];++Be){for(;se<236+Be*127;++se)ne.write_shift(-4,se<J[2]?J[1]+se:-1);ne.write_shift(-4,Be===J[1]-1?at:Be+1)}var Ze=function(Ct){for(Be+=Ct;se<Be-1;++se)ne.write_shift(-4,se+1);Ct&&(++se,ne.write_shift(-4,at))};for(Be=se=0,Be+=J[1];se<Be;++se)ne.write_shift(-4,Rt.DIFSECT);for(Be+=J[2];se<Be;++se)ne.write_shift(-4,Rt.FATSECT);Ze(J[3]),Ze(J[4]);for(var ze=0,Ne=0,Ge=j.FileIndex[0];ze<j.FileIndex.length;++ze)Ge=j.FileIndex[ze],Ge.content&&(Ne=Ge.content.length,!(Ne<4096)&&(Ge.start=Be,Ze(Ne+511>>9)));for(Ze(J[6]+7>>3);ne.l&511;)ne.write_shift(-4,Rt.ENDOFCHAIN);for(Be=se=0,ze=0;ze<j.FileIndex.length;++ze)Ge=j.FileIndex[ze],Ge.content&&(Ne=Ge.content.length,!(!Ne||Ne>=4096)&&(Ge.start=Be,Ze(Ne+63>>6)));for(;ne.l&511;)ne.write_shift(-4,Rt.ENDOFCHAIN);for(se=0;se<J[4]<<2;++se){var it=j.FullPaths[se];if(!it||it.length===0){for(ze=0;ze<17;++ze)ne.write_shift(4,0);for(ze=0;ze<3;++ze)ne.write_shift(4,-1);for(ze=0;ze<12;++ze)ne.write_shift(4,0);continue}Ge=j.FileIndex[se],se===0&&(Ge.start=Ge.size?Ge.start-1:at);var mt=se===0&&ee.root||Ge.name;if(Ne=2*(mt.length+1),ne.write_shift(64,mt,"utf16le"),ne.write_shift(2,Ne),ne.write_shift(1,Ge.type),ne.write_shift(1,Ge.color),ne.write_shift(-4,Ge.L),ne.write_shift(-4,Ge.R),ne.write_shift(-4,Ge.C),Ge.clsid)ne.write_shift(16,Ge.clsid,"hex");else for(ze=0;ze<4;++ze)ne.write_shift(4,0);ne.write_shift(4,Ge.state||0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,Ge.start),ne.write_shift(4,Ge.size),ne.write_shift(4,0)}for(se=1;se<j.FileIndex.length;++se)if(Ge=j.FileIndex[se],Ge.size>=4096)if(ne.l=Ge.start+1<<9,Ar&&Buffer.isBuffer(Ge.content))Ge.content.copy(ne,ne.l,0,Ge.size),ne.l+=Ge.size+511&-512;else{for(ze=0;ze<Ge.size;++ze)ne.write_shift(1,Ge.content[ze]);for(;ze&511;++ze)ne.write_shift(1,0)}for(se=1;se<j.FileIndex.length;++se)if(Ge=j.FileIndex[se],Ge.size>0&&Ge.size<4096)if(Ar&&Buffer.isBuffer(Ge.content))Ge.content.copy(ne,ne.l,0,Ge.size),ne.l+=Ge.size+63&-64;else{for(ze=0;ze<Ge.size;++ze)ne.write_shift(1,Ge.content[ze]);for(;ze&63;++ze)ne.write_shift(1,0)}if(Ar)ne.l=ne.length;else for(;ne.l<ne.length;)ne.write_shift(1,0);return ne}function $e(j,re){var ee=j.FullPaths.map(function(ze){return ze.toUpperCase()}),J=ee.map(function(ze){var Ne=ze.split("/");return Ne[Ne.length-(ze.slice(-1)=="/"?2:1)]}),ne=!1;re.charCodeAt(0)===47?(ne=!0,re=ee[0].slice(0,-1)+re):ne=re.indexOf("/")!==-1;var se=re.toUpperCase(),Be=ne===!0?ee.indexOf(se):J.indexOf(se);if(Be!==-1)return j.FileIndex[Be];var Ze=!se.match(L0);for(se=se.replace(ld,""),Ze&&(se=se.replace(L0,"!")),Be=0;Be<ee.length;++Be)if((Ze?ee[Be].replace(L0,"!"):ee[Be]).replace(ld,"")==se||(Ze?J[Be].replace(L0,"!"):J[Be]).replace(ld,"")==se)return j.FileIndex[Be];return null}var Ue=64,at=-2,yt="d0cf11e0a1b11ae1",gt=[208,207,17,224,161,177,26,225],nt="00000000000000000000000000000000",Rt={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:at,FREESECT:-1,HEADER_SIGNATURE:yt,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:nt,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ke(j,re,ee){w();var J=ke(j,ee);b.writeFileSync(re,J)}function dt(j){for(var re=new Array(j.length),ee=0;ee<j.length;++ee)re[ee]=String.fromCharCode(j[ee]);return re.join("")}function Dt(j,re){var ee=ke(j,re);switch(re&&re.type||"buffer"){case"file":return w(),b.writeFileSync(re.filename,ee),ee;case"binary":return typeof ee=="string"?ee:dt(ee);case"base64":return Fd(typeof ee=="string"?ee:dt(ee));case"buffer":if(Ar)return Buffer.isBuffer(ee)?ee:Bo(ee);case"array":return typeof ee=="string"?bs(ee):ee}return ee}var jt;function xe(j){try{var re=j.InflateRaw,ee=new re;if(ee._processChunk(new Uint8Array([3,0]),ee._finishFlushFlag),ee.bytesRead)jt=j;else throw new Error("zlib does not expose bytesRead")}catch(J){console.error("cannot use native zlib: "+(J.message||J))}}function Te(j,re){if(!jt)return tr(j,re);var ee=jt.InflateRaw,J=new ee,ne=J._processChunk(j.slice(j.l),J._finishFlushFlag);return j.l+=J.bytesRead,ne}function be(j){return jt?jt.deflateRawSync(j):pa(j)}var Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],je=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Je=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function lt(j){var re=(j<<1|j<<11)&139536|(j<<5|j<<15)&558144;return(re>>16|re>>8|re)&255}for(var ft=typeof Uint8Array<"u",ot=ft?new Uint8Array(256):[],er=0;er<256;++er)ot[er]=lt(er);function Zt(j,re){var ee=ot[j&255];return re<=8?ee>>>8-re:(ee=ee<<8|ot[j>>8&255],re<=16?ee>>>16-re:(ee=ee<<8|ot[j>>16&255],ee>>>24-re))}function Yt(j,re){var ee=re&7,J=re>>>3;return(j[J]|(ee<=6?0:j[J+1]<<8))>>>ee&3}function Xt(j,re){var ee=re&7,J=re>>>3;return(j[J]|(ee<=5?0:j[J+1]<<8))>>>ee&7}function Gr(j,re){var ee=re&7,J=re>>>3;return(j[J]|(ee<=4?0:j[J+1]<<8))>>>ee&15}function gr(j,re){var ee=re&7,J=re>>>3;return(j[J]|(ee<=3?0:j[J+1]<<8))>>>ee&31}function Lt(j,re){var ee=re&7,J=re>>>3;return(j[J]|(ee<=1?0:j[J+1]<<8))>>>ee&127}function hr(j,re,ee){var J=re&7,ne=re>>>3,se=(1<<ee)-1,Be=j[ne]>>>J;return ee<8-J||(Be|=j[ne+1]<<8-J,ee<16-J)||(Be|=j[ne+2]<<16-J,ee<24-J)||(Be|=j[ne+3]<<24-J),Be&se}function Ur(j,re,ee){var J=re&7,ne=re>>>3;return J<=5?j[ne]|=(ee&7)<<J:(j[ne]|=ee<<J&255,j[ne+1]=(ee&7)>>8-J),re+3}function Xe(j,re,ee){var J=re&7,ne=re>>>3;return ee=(ee&1)<<J,j[ne]|=ee,re+1}function kr(j,re,ee){var J=re&7,ne=re>>>3;return ee<<=J,j[ne]|=ee&255,ee>>>=8,j[ne+1]=ee,re+8}function Rn(j,re,ee){var J=re&7,ne=re>>>3;return ee<<=J,j[ne]|=ee&255,ee>>>=8,j[ne+1]=ee&255,j[ne+2]=ee>>>8,re+16}function yr(j,re){var ee=j.length,J=2*ee>re?2*ee:re+5,ne=0;if(ee>=re)return j;if(Ar){var se=Bb(J);if(j.copy)j.copy(se);else for(;ne<j.length;++ne)se[ne]=j[ne];return se}else if(ft){var Be=new Uint8Array(J);if(Be.set)Be.set(j);else for(;ne<ee;++ne)Be[ne]=j[ne];return Be}return j.length=J,j}function nr(j){for(var re=new Array(j),ee=0;ee<j;++ee)re[ee]=0;return re}function ri(j,re,ee){var J=1,ne=0,se=0,Be=0,Ze=0,ze=j.length,Ne=ft?new Uint16Array(32):nr(32);for(se=0;se<32;++se)Ne[se]=0;for(se=ze;se<ee;++se)j[se]=0;ze=j.length;var Ge=ft?new Uint16Array(ze):nr(ze);for(se=0;se<ze;++se)Ne[ne=j[se]]++,J<ne&&(J=ne),Ge[se]=0;for(Ne[0]=0,se=1;se<=J;++se)Ne[se+16]=Ze=Ze+Ne[se-1]<<1;for(se=0;se<ze;++se)Ze=j[se],Ze!=0&&(Ge[se]=Ne[Ze+16]++);var it=0;for(se=0;se<ze;++se)if(it=j[se],it!=0)for(Ze=Zt(Ge[se],J)>>J-it,Be=(1<<J+4-it)-1;Be>=0;--Be)re[Ze|Be<<it]=it&15|se<<4;return J}var za=ft?new Uint16Array(512):nr(512),Di=ft?new Uint16Array(32):nr(32);if(!ft){for(var Ji=0;Ji<512;++Ji)za[Ji]=0;for(Ji=0;Ji<32;++Ji)Di[Ji]=0}(function(){for(var j=[],re=0;re<32;re++)j.push(5);ri(j,Di,32);var ee=[];for(re=0;re<=143;re++)ee.push(8);for(;re<=255;re++)ee.push(9);for(;re<=279;re++)ee.push(7);for(;re<=287;re++)ee.push(8);ri(ee,za,288)})();var Rs=function(){for(var re=ft?new Uint8Array(32768):[],ee=0,J=0;ee<Je.length-1;++ee)for(;J<Je[ee+1];++J)re[J]=ee;for(;J<32768;++J)re[J]=29;var ne=ft?new Uint8Array(259):[];for(ee=0,J=0;ee<je.length-1;++ee)for(;J<je[ee+1];++J)ne[J]=ee;function se(Ze,ze){for(var Ne=0;Ne<Ze.length;){var Ge=Math.min(65535,Ze.length-Ne),it=Ne+Ge==Ze.length;for(ze.write_shift(1,+it),ze.write_shift(2,Ge),ze.write_shift(2,~Ge&65535);Ge-- >0;)ze[ze.l++]=Ze[Ne++]}return ze.l}function Be(Ze,ze){for(var Ne=0,Ge=0,it=ft?new Uint16Array(32768):[];Ge<Ze.length;){var mt=Math.min(65535,Ze.length-Ge);if(mt<10){for(Ne=Ur(ze,Ne,+(Ge+mt==Ze.length)),Ne&7&&(Ne+=8-(Ne&7)),ze.l=Ne/8|0,ze.write_shift(2,mt),ze.write_shift(2,~mt&65535);mt-- >0;)ze[ze.l++]=Ze[Ge++];Ne=ze.l*8;continue}Ne=Ur(ze,Ne,+(Ge+mt==Ze.length)+2);for(var Ct=0;mt-- >0;){var pt=Ze[Ge];Ct=(Ct<<5^pt)&32767;var zt=-1,Jt=0;if((zt=it[Ct])&&(zt|=Ge&-32768,zt>Ge&&(zt-=32768),zt<Ge))for(;Ze[zt+Jt]==Ze[Ge+Jt]&&Jt<250;)++Jt;if(Jt>2){pt=ne[Jt],pt<=22?Ne=kr(ze,Ne,ot[pt+1]>>1)-1:(kr(ze,Ne,3),Ne+=5,kr(ze,Ne,ot[pt-23]>>5),Ne+=3);var Sr=pt<8?0:pt-4>>2;Sr>0&&(Rn(ze,Ne,Jt-je[pt]),Ne+=Sr),pt=re[Ge-zt],Ne=kr(ze,Ne,ot[pt]>>3),Ne-=3;var Vr=pt<4?0:pt-2>>1;Vr>0&&(Rn(ze,Ne,Ge-zt-Je[pt]),Ne+=Vr);for(var rr=0;rr<Jt;++rr)it[Ct]=Ge&32767,Ct=(Ct<<5^Ze[Ge])&32767,++Ge;mt-=Jt-1}else pt<=143?pt=pt+48:Ne=Xe(ze,Ne,1),Ne=kr(ze,Ne,ot[pt]),it[Ct]=Ge&32767,++Ge}Ne=kr(ze,Ne,0)-1}return ze.l=(Ne+7)/8|0,ze.l}return function(ze,Ne){return ze.length<8?se(ze,Ne):Be(ze,Ne)}}();function pa(j){var re=et(50+Math.floor(j.length*1.1)),ee=Rs(j,re);return re.slice(0,ee)}var Oa=ft?new Uint16Array(32768):nr(32768),xt=ft?new Uint16Array(32768):nr(32768),Li=ft?new Uint16Array(128):nr(128),Fr=1,Na=1;function ma(j,re){var ee=gr(j,re)+257;re+=5;var J=gr(j,re)+1;re+=5;var ne=Gr(j,re)+4;re+=4;for(var se=0,Be=ft?new Uint8Array(19):nr(19),Ze=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ze=1,Ne=ft?new Uint8Array(8):nr(8),Ge=ft?new Uint8Array(8):nr(8),it=Be.length,mt=0;mt<ne;++mt)Be[Ee[mt]]=se=Xt(j,re),ze<se&&(ze=se),Ne[se]++,re+=3;var Ct=0;for(Ne[0]=0,mt=1;mt<=ze;++mt)Ge[mt]=Ct=Ct+Ne[mt-1]<<1;for(mt=0;mt<it;++mt)(Ct=Be[mt])!=0&&(Ze[mt]=Ge[Ct]++);var pt=0;for(mt=0;mt<it;++mt)if(pt=Be[mt],pt!=0){Ct=ot[Ze[mt]]>>8-pt;for(var zt=(1<<7-pt)-1;zt>=0;--zt)Li[Ct|zt<<pt]=pt&7|mt<<3}var Jt=[];for(ze=1;Jt.length<ee+J;)switch(Ct=Li[Lt(j,re)],re+=Ct&7,Ct>>>=3){case 16:for(se=3+Yt(j,re),re+=2,Ct=Jt[Jt.length-1];se-- >0;)Jt.push(Ct);break;case 17:for(se=3+Xt(j,re),re+=3;se-- >0;)Jt.push(0);break;case 18:for(se=11+Lt(j,re),re+=7;se-- >0;)Jt.push(0);break;default:Jt.push(Ct),ze<Ct&&(ze=Ct);break}var Sr=Jt.slice(0,ee),Vr=Jt.slice(ee);for(mt=ee;mt<286;++mt)Sr[mt]=0;for(mt=J;mt<30;++mt)Vr[mt]=0;return Fr=ri(Sr,Oa,286),Na=ri(Vr,xt,30),re}function wt(j,re){if(j[0]==3&&!(j[1]&3))return[Ic(re),2];for(var ee=0,J=0,ne=Bb(re||1<<18),se=0,Be=ne.length>>>0,Ze=0,ze=0;!(J&1);){if(J=Xt(j,ee),ee+=3,J>>>1)J>>1==1?(Ze=9,ze=5):(ee=ma(j,ee),Ze=Fr,ze=Na);else{ee&7&&(ee+=8-(ee&7));var Ne=j[ee>>>3]|j[(ee>>>3)+1]<<8;if(ee+=32,Ne>0)for(!re&&Be<se+Ne&&(ne=yr(ne,se+Ne),Be=ne.length);Ne-- >0;)ne[se++]=j[ee>>>3],ee+=8;continue}for(;;){!re&&Be<se+32767&&(ne=yr(ne,se+32767),Be=ne.length);var Ge=hr(j,ee,Ze),it=J>>>1==1?za[Ge]:Oa[Ge];if(ee+=it&15,it>>>=4,!(it>>>8&255))ne[se++]=it;else{if(it==256)break;it-=257;var mt=it<8?0:it-4>>2;mt>5&&(mt=0);var Ct=se+je[it];mt>0&&(Ct+=hr(j,ee,mt),ee+=mt),Ge=hr(j,ee,ze),it=J>>>1==1?Di[Ge]:xt[Ge],ee+=it&15,it>>>=4;var pt=it<4?0:it-2>>1,zt=Je[it];for(pt>0&&(zt+=hr(j,ee,pt),ee+=pt),!re&&Be<Ct&&(ne=yr(ne,Ct+100),Be=ne.length);se<Ct;)ne[se]=ne[se-zt],++se}}}return re?[ne,ee+7>>>3]:[ne.slice(0,se),ee+7>>>3]}function tr(j,re){var ee=j.slice(j.l||0),J=wt(ee,re);return j.l+=J[1],J[0]}function Kt(j,re){if(j)typeof console<"u"&&console.error(re);else throw new Error(re)}function Dn(j,re){var ee=j;Sa(ee,0);var J=[],ne=[],se={FileIndex:J,FullPaths:ne};te(se,{root:re.root});for(var Be=ee.length-4;(ee[Be]!=80||ee[Be+1]!=75||ee[Be+2]!=5||ee[Be+3]!=6)&&Be>=0;)--Be;ee.l=Be+4,ee.l+=4;var Ze=ee.read_shift(2);ee.l+=6;var ze=ee.read_shift(4);for(ee.l=ze,Be=0;Be<Ze;++Be){ee.l+=20;var Ne=ee.read_shift(4),Ge=ee.read_shift(4),it=ee.read_shift(2),mt=ee.read_shift(2),Ct=ee.read_shift(2);ee.l+=8;var pt=ee.read_shift(4),zt=l(ee.slice(ee.l+it,ee.l+it+mt));ee.l+=it+mt+Ct;var Jt=ee.l;ee.l=pt+4,Qi(ee,Ne,Ge,se,zt),ee.l=Jt}return se}function Qi(j,re,ee,J,ne){j.l+=2;var se=j.read_shift(2),Be=j.read_shift(2),Ze=d(j);if(se&8257)throw new Error("Unsupported ZIP encryption");for(var ze=j.read_shift(4),Ne=j.read_shift(4),Ge=j.read_shift(4),it=j.read_shift(2),mt=j.read_shift(2),Ct="",pt=0;pt<it;++pt)Ct+=String.fromCharCode(j[j.l++]);if(mt){var zt=l(j.slice(j.l,j.l+mt));(zt[21589]||{}).mt&&(Ze=zt[21589].mt),((ne||{})[21589]||{}).mt&&(Ze=ne[21589].mt)}j.l+=mt;var Jt=j.slice(j.l,j.l+Ne);switch(Be){case 8:Jt=Te(j,Ge);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Be)}var Sr=!1;se&8&&(ze=j.read_shift(4),ze==134695760&&(ze=j.read_shift(4),Sr=!0),Ne=j.read_shift(4),Ge=j.read_shift(4)),Ne!=re&&Kt(Sr,"Bad compressed size: "+re+" != "+Ne),Ge!=ee&&Kt(Sr,"Bad uncompressed size: "+ee+" != "+Ge),ye(J,Ct,Jt,{unsafe:!0,mt:Ze})}function Qt(j,re){var ee=re||{},J=[],ne=[],se=et(1),Be=ee.compression?8:0,Ze=0,ze=0,Ne=0,Ge=0,it=0,mt=j.FullPaths[0],Ct=mt,pt=j.FileIndex[0],zt=[],Jt=0;for(ze=1;ze<j.FullPaths.length;++ze)if(Ct=j.FullPaths[ze].slice(mt.length),pt=j.FileIndex[ze],!(!pt.size||!pt.content||Ct=="Sh33tJ5")){var Sr=Ge,Vr=et(Ct.length);for(Ne=0;Ne<Ct.length;++Ne)Vr.write_shift(1,Ct.charCodeAt(Ne)&127);Vr=Vr.slice(0,Vr.l),zt[it]=GL.buf(pt.content,0);var rr=pt.content;Be==8&&(rr=be(rr)),se=et(30),se.write_shift(4,67324752),se.write_shift(2,20),se.write_shift(2,Ze),se.write_shift(2,Be),pt.mt?h(se,pt.mt):se.write_shift(4,0),se.write_shift(-4,zt[it]),se.write_shift(4,rr.length),se.write_shift(4,pt.content.length),se.write_shift(2,Vr.length),se.write_shift(2,0),Ge+=se.length,J.push(se),Ge+=Vr.length,J.push(Vr),Ge+=rr.length,J.push(rr),se=et(46),se.write_shift(4,33639248),se.write_shift(2,0),se.write_shift(2,20),se.write_shift(2,Ze),se.write_shift(2,Be),se.write_shift(4,0),se.write_shift(-4,zt[it]),se.write_shift(4,rr.length),se.write_shift(4,pt.content.length),se.write_shift(2,Vr.length),se.write_shift(2,0),se.write_shift(2,0),se.write_shift(2,0),se.write_shift(2,0),se.write_shift(4,0),se.write_shift(4,Sr),Jt+=se.l,ne.push(se),Jt+=Vr.length,ne.push(Vr),++it}return se=et(22),se.write_shift(4,101010256),se.write_shift(2,0),se.write_shift(2,0),se.write_shift(2,it),se.write_shift(2,it),se.write_shift(4,Jt),se.write_shift(4,Ge),se.write_shift(2,0),fi([fi(J),fi(ne),se])}var yi={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function he(j,re){if(j.ctype)return j.ctype;var ee=j.name||"",J=ee.match(/\.([^\.]+)$/);return J&&yi[J[1]]||re&&(J=(ee=re).match(/[\.\\]([^\.\\])+$/),J&&yi[J[1]])?yi[J[1]]:"application/octet-stream"}function H(j){for(var re=Fd(j),ee=[],J=0;J<re.length;J+=76)ee.push(re.slice(J,J+76));return ee.join(`\r
`)+`\r
`}function Z(j){var re=j.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ne){var Ge=Ne.charCodeAt(0).toString(16).toUpperCase();return"="+(Ge.length==1?"0"+Ge:Ge)});re=re.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),re.charAt(0)==`
`&&(re="=0D"+re.slice(1)),re=re.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ee=[],J=re.split(`\r
`),ne=0;ne<J.length;++ne){var se=J[ne];if(se.length==0){ee.push("");continue}for(var Be=0;Be<se.length;){var Ze=76,ze=se.slice(Be,Be+Ze);ze.charAt(Ze-1)=="="?Ze--:ze.charAt(Ze-2)=="="?Ze-=2:ze.charAt(Ze-3)=="="&&(Ze-=3),ze=se.slice(Be,Be+Ze),Be+=Ze,Be<se.length&&(ze+="="),ee.push(ze)}}return ee.join(`\r
`)}function ie(j){for(var re=[],ee=0;ee<j.length;++ee){for(var J=j[ee];ee<=j.length&&J.charAt(J.length-1)=="=";)J=J.slice(0,J.length-1)+j[++ee];re.push(J)}for(var ne=0;ne<re.length;++ne)re[ne]=re[ne].replace(/[=][0-9A-Fa-f]{2}/g,function(se){return String.fromCharCode(parseInt(se.slice(1),16))});return bs(re.join(`\r
`))}function de(j,re,ee){for(var J="",ne="",se="",Be,Ze=0;Ze<10;++Ze){var ze=re[Ze];if(!ze||ze.match(/^\s*$/))break;var Ne=ze.match(/^(.*?):\s*([^\s].*)$/);if(Ne)switch(Ne[1].toLowerCase()){case"content-location":J=Ne[2].trim();break;case"content-type":se=Ne[2].trim();break;case"content-transfer-encoding":ne=Ne[2].trim();break}}switch(++Ze,ne.toLowerCase()){case"base64":Be=bs(Lo(re.slice(Ze).join("")));break;case"quoted-printable":Be=ie(re.slice(Ze));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ne)}var Ge=ye(j,J.slice(ee.length),Be,{unsafe:!0});se&&(Ge.ctype=se)}function me(j,re){if(dt(j.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ee=re&&re.root||"",J=(Ar&&Buffer.isBuffer(j)?j.toString("binary"):dt(j)).split(`\r
`),ne=0,se="";for(ne=0;ne<J.length;++ne)if(se=J[ne],!!/^Content-Location:/i.test(se)&&(se=se.slice(se.indexOf("file")),ee||(ee=se.slice(0,se.lastIndexOf("/")+1)),se.slice(0,ee.length)!=ee))for(;ee.length>0&&(ee=ee.slice(0,ee.length-1),ee=ee.slice(0,ee.lastIndexOf("/")+1),se.slice(0,ee.length)!=ee););var Be=(J[1]||"").match(/boundary="(.*?)"/);if(!Be)throw new Error("MAD cannot find boundary");var Ze="--"+(Be[1]||""),ze=[],Ne=[],Ge={FileIndex:ze,FullPaths:Ne};te(Ge);var it,mt=0;for(ne=0;ne<J.length;++ne){var Ct=J[ne];Ct!==Ze&&Ct!==Ze+"--"||(mt++&&de(Ge,J.slice(it,ne),ee),it=ne)}return Ge}function Fe(j,re){var ee=re||{},J=ee.boundary||"SheetJS";J="------="+J;for(var ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+J.slice(2)+'"',"","",""],se=j.FullPaths[0],Be=se,Ze=j.FileIndex[0],ze=1;ze<j.FullPaths.length;++ze)if(Be=j.FullPaths[ze].slice(se.length),Ze=j.FileIndex[ze],!(!Ze.size||!Ze.content||Be=="Sh33tJ5")){Be=Be.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Jt){return"_x"+Jt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Jt){return"_u"+Jt.charCodeAt(0).toString(16)+"_"});for(var Ne=Ze.content,Ge=Ar&&Buffer.isBuffer(Ne)?Ne.toString("binary"):dt(Ne),it=0,mt=Math.min(1024,Ge.length),Ct=0,pt=0;pt<=mt;++pt)(Ct=Ge.charCodeAt(pt))>=32&&Ct<128&&++it;var zt=it>=mt*4/5;ne.push(J),ne.push("Content-Location: "+(ee.root||"file:///C:/SheetJS/")+Be),ne.push("Content-Transfer-Encoding: "+(zt?"quoted-printable":"base64")),ne.push("Content-Type: "+he(Ze,Be)),ne.push(""),ne.push(zt?Z(Ge):H(Ge))}return ne.push(J+`--\r
`),ne.join(`\r
`)}function Ie(j){var re={};return te(re,j),re}function ye(j,re,ee,J){var ne=J&&J.unsafe;ne||te(j);var se=!ne&&Br.find(j,re);if(!se){var Be=j.FullPaths[0];re.slice(0,Be.length)==Be?Be=re:(Be.slice(-1)!="/"&&(Be+="/"),Be=(Be+re).replace("//","/")),se={name:o(re),type:2},j.FileIndex.push(se),j.FullPaths.push(Be),ne||Br.utils.cfb_gc(j)}return se.content=ee,se.size=ee?ee.length:0,J&&(J.CLSID&&(se.clsid=J.CLSID),J.mt&&(se.mt=J.mt),J.ct&&(se.ct=J.ct)),se}function Re(j,re){te(j);var ee=Br.find(j,re);if(ee){for(var J=0;J<j.FileIndex.length;++J)if(j.FileIndex[J]==ee)return j.FileIndex.splice(J,1),j.FullPaths.splice(J,1),!0}return!1}function Ye(j,re,ee){te(j);var J=Br.find(j,re);if(J){for(var ne=0;ne<j.FileIndex.length;++ne)if(j.FileIndex[ne]==J)return j.FileIndex[ne].name=o(ee),j.FullPaths[ne]=ee,!0}return!1}function Qe(j){Pe(j,!0)}return t.find=$e,t.read=Ce,t.parse=E,t.write=Dt,t.writeFile=Ke,t.utils={cfb_new:Ie,cfb_add:ye,cfb_del:Re,cfb_mov:Ye,cfb_gc:Qe,ReadShift:ud,CheckField:cA,prep_blob:Sa,bconcat:fi,use_zlib:xe,_deflateRaw:pa,_inflateRaw:tr,consts:Rt},t}();function WL(e){return typeof e=="string"?vg(e):Array.isArray(e)?_L(e):e}function Yd(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=vg(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Od(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var o=new Blob([WL(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(o,e);if(typeof saveAs<"u")return saveAs(o,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var h=URL.createObjectURL(o);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(h)},6e4),chrome.downloads.download({url:h,filename:e,saveAs:!0});var d=document.createElement("a");if(d.download!=null)return d.download=e,d.href=h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(h)},6e4),h}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Kd(t)),l.write(t),l.close(),t}catch(b){if(!b.message||!b.message.match(/onstruct/))throw b}throw new Error("cannot save file "+e)}function _i(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function qb(e,t){for(var r=[],a=_i(e),o=0;o!==a.length;++o)r[e[a[o]][t]]==null&&(r[e[a[o]][t]]=a[o]);return r}function Wv(e){for(var t=[],r=_i(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function Sg(e){for(var t=[],r=_i(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function HL(e){for(var t=[],r=_i(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var Bm=new Date(1899,11,30,0,0,0);function fa(e,t){var r=e.getTime(),a=Bm.getTime()+(e.getTimezoneOffset()-Bm.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var HC=new Date,qL=Bm.getTime()+(HC.getTimezoneOffset()-Bm.getTimezoneOffset())*6e4,Zb=HC.getTimezoneOffset();function qC(e){var t=new Date;return t.setTime(e*24*60*60*1e3+qL),t.getTimezoneOffset()!==Zb&&t.setTime(t.getTime()+(t.getTimezoneOffset()-Zb)*6e4),t}var Xb=new Date("2017-02-19T19:06:09.000Z"),ZC=isNaN(Xb.getFullYear())?new Date("2/19/17"):Xb,ZL=ZC.getFullYear()==2017;function Zi(e,t){var r=new Date(e);if(ZL)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(ZC.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var o=e.match(/\d+/g)||["2017","2","19","0","0","0"],h=new Date(+o[0],+o[1]-1,+o[2],+o[3]||0,+o[4]||0,+o[5]||0);return e.indexOf("Z")>-1&&(h=new Date(h.getTime()-h.getTimezoneOffset()*60*1e3)),h}function Tg(e,t){if(Ar&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(h){return r[h]||h})}catch{}for(var a=[],o=0;o!=e.length;++o)a.push(String.fromCharCode(e[o]));return a.join("")}function da(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=da(e[r]));return t}function vn(e,t){for(var r="";r.length<t;)r+=e;return r}function ko(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(o,h){return r=-r,h}),!isNaN(t=Number(a)))?t/r:t}var XL=["january","february","march","april","may","june","july","august","september","october","november","december"];function zd(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),o=t.getMonth(),h=t.getDate();if(isNaN(h))return r;var d=e.toLowerCase();if(d.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(d=d.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),d.length>3&&XL.indexOf(d)==-1)return r}else if(d.match(/[a-z]/))return r;return a<0||a>8099?r:(o>0||h>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function pr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return Ar?a=Bo(r):a=yL(r),Br.utils.cfb_add(e,t,a)}Br.utils.cfb_add(e,t,r)}else e.file(t,r)}function Hv(){return Br.utils.cfb_new()}var Nn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,KL={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},qv=Wv(KL),Zv=/[&<>'"]/g,YL=/[\u0000-\u0008\u000b-\u001f]/g;function Rr(e){var t=e+"";return t.replace(Zv,function(r){return qv[r]}).replace(YL,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Kb(e){return Rr(e).replace(/ /g,"_x0020_")}var XC=/[\u0000-\u001f]/g;function JL(e){var t=e+"";return t.replace(Zv,function(r){return qv[r]}).replace(/\n/g,"<br/>").replace(XC,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function QL(e){var t=e+"";return t.replace(Zv,function(r){return qv[r]}).replace(XC,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function eF(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function tF(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Sy(e){for(var t="",r=0,a=0,o=0,h=0,d=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(o=e.charCodeAt(r++),a>191&&a<224){d=(a&31)<<6,d|=o&63,t+=String.fromCharCode(d);continue}if(h=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(o&63)<<6|h&63);continue}d=e.charCodeAt(r++),l=((a&7)<<18|(o&63)<<12|(h&63)<<6|d&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function Yb(e){var t=Ic(2*e.length),r,a,o=1,h=0,d=0,l;for(a=0;a<e.length;a+=o)o=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),o=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),o=3):(o=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,d=55296+(r>>>10&1023),r=56320+(r&1023)),d!==0&&(t[h++]=d&255,t[h++]=d>>>8,d=0),t[h++]=r%256,t[h++]=r>>>8;return t.slice(0,h).toString("ucs2")}function Jb(e){return Bo(e,"binary").toString("utf8")}var z0="foo bar baz",cd=Ar&&(Jb(z0)==Sy(z0)&&Jb||Yb(z0)==Sy(z0)&&Yb)||Sy,Od=Ar?function(e){return Bo(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,o=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,o=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(o>>18&7))),t.push(String.fromCharCode(144+(o>>12&63))),t.push(String.fromCharCode(128+(o>>6&63))),t.push(String.fromCharCode(128+(o&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},rF=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),o=0;o<e.length;++o)a=a.replace(e[o][0],e[o][1]);return a}}(),KC=/(^\s|\s$|\n)/;function di(e,t){return"<"+e+(t.match(KC)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Nd(e){return _i(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function kt(e,t,r){return"<"+e+(r!=null?Nd(r):"")+(t!=null?(t.match(KC)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Px(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function nF(e,t){switch(typeof e){case"string":var r=kt("vt:lpwstr",Rr(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return kt((e|0)==e?"vt:i4":"vt:r8",Rr(String(e)));case"boolean":return kt("vt:bool",e?"true":"false")}if(e instanceof Date)return kt("vt:filetime",Px(e));throw new Error("Unable to serialize "+e)}var Yn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Sh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ea={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function iF(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),o=e[t+6]&15,h=5;h>=0;--h)o=o*256+e[t+h];return a==2047?o==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,o+=Math.pow(2,52)),r*Math.pow(2,a-52)*o)}function aF(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,o=0,h=0,d=a?-t:t;isFinite(d)?d==0?o=h=0:(o=Math.floor(Math.log(d)/Math.LN2),h=d*Math.pow(2,52-o),o<=-1023&&(!isFinite(h)||h<Math.pow(2,52))?o=-1022:(h-=Math.pow(2,52),o+=1023)):(o=2047,h=isNaN(t)?26985:0);for(var l=0;l<=5;++l,h/=256)e[r+l]=h&255;e[r+6]=(o&15)<<4|h&15,e[r+7]=o>>4|a}var Qb=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var o=0,h=e[0][a].length;o<h;o+=r)t.push.apply(t,e[0][a].slice(o,o+r));return t},eS=Ar?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Bo(t)})):Qb(e)}:Qb,tS=function(e,t,r){for(var a=[],o=t;o<r;o+=2)a.push(String.fromCharCode(Jf(e,o)));return a.join("").replace(ld,"")},Xv=Ar?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(ld,""):tS(e,t,r)}:tS,rS=function(e,t,r){for(var a=[],o=t;o<t+r;++o)a.push(("0"+e[o].toString(16)).slice(-2));return a.join("")},YC=Ar?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):rS(e,t,r)}:rS,nS=function(e,t,r){for(var a=[],o=t;o<r;o++)a.push(String.fromCharCode(Ru(e,o)));return a.join("")},Jd=Ar?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):nS(t,r,a)}:nS,JC=function(e,t){var r=Ca(e,t);return r>0?Jd(e,t+4,t+4+r-1):""},QC=JC,eA=function(e,t){var r=Ca(e,t);return r>0?Jd(e,t+4,t+4+r-1):""},tA=eA,rA=function(e,t){var r=2*Ca(e,t);return r>0?Jd(e,t+4,t+4+r-1):""},nA=rA,iA=function(t,r){var a=Ca(t,r);return a>0?Xv(t,r+4,r+4+a):""},aA=iA,sA=function(e,t){var r=Ca(e,t);return r>0?Jd(e,t+4,t+4+r):""},oA=sA,lA=function(e,t){return iF(e,t)},Um=lA,Kv=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Ar&&(QC=function(t,r){if(!Buffer.isBuffer(t))return JC(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},tA=function(t,r){if(!Buffer.isBuffer(t))return eA(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},nA=function(t,r){if(!Buffer.isBuffer(t))return rA(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},aA=function(t,r){if(!Buffer.isBuffer(t))return iA(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},oA=function(t,r){if(!Buffer.isBuffer(t))return sA(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},Um=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):lA(t,r)},Kv=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Ru=function(e,t){return e[t]},Jf=function(e,t){return e[t+1]*256+e[t]},sF=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ca=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},fc=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},oF=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function ud(e,t){var r="",a,o,h=[],d,l,b,w;switch(t){case"dbcs":if(w=this.l,Ar&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(b=0;b<e;++b)r+=String.fromCharCode(Jf(this,w)),w+=2;e*=2;break;case"utf8":r=Jd(this,this.l,this.l+e);break;case"utf16le":e*=2,r=Xv(this,this.l,this.l+e);break;case"wstr":return ud.call(this,e,"dbcs");case"lpstr-ansi":r=QC(this,this.l),e=4+Ca(this,this.l);break;case"lpstr-cp":r=tA(this,this.l),e=4+Ca(this,this.l);break;case"lpwstr":r=nA(this,this.l),e=4+2*Ca(this,this.l);break;case"lpp4":e=4+Ca(this,this.l),r=aA(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ca(this,this.l),r=oA(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(d=Ru(this,this.l+e++))!==0;)h.push(D0(d));r=h.join("");break;case"_wstr":for(e=0,r="";(d=Jf(this,this.l+e))!==0;)h.push(D0(d)),e+=2;e+=2,r=h.join("");break;case"dbcs-cont":for(r="",w=this.l,b=0;b<e;++b){if(this.lens&&this.lens.indexOf(w)!==-1)return d=Ru(this,w),this.l=w+1,l=ud.call(this,e-b,d?"dbcs-cont":"sbcs-cont"),h.join("")+l;h.push(D0(Jf(this,w))),w+=2}r=h.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",w=this.l,b=0;b!=e;++b){if(this.lens&&this.lens.indexOf(w)!==-1)return d=Ru(this,w),this.l=w+1,l=ud.call(this,e-b,d?"dbcs-cont":"sbcs-cont"),h.join("")+l;h.push(D0(Ru(this,w))),w+=1}r=h.join("");break;default:switch(e){case 1:return a=Ru(this,this.l),this.l++,a;case 2:return a=(t==="i"?sF:Jf)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(a=(e>0?fc:oF)(this,this.l),this.l+=4,a):(o=Ca(this,this.l),this.l+=4,o);case 8:case-8:if(t==="f")return e==8?o=Um(this,this.l):o=Um([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,o;e=8;case 16:r=YC(this,this.l,e);break}}return this.l+=e,r}var lF=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},cF=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},uF=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function hF(e,t,r){var a=0,o=0;if(r==="dbcs"){for(o=0;o!=t.length;++o)uF(this,t.charCodeAt(o),this.l+2*o);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),o=0;o!=t.length;++o)this[this.l+o]=t.charCodeAt(o)&255;a=t.length}else if(r==="hex"){for(;o<e;++o)this[this.l++]=parseInt(t.slice(2*o,2*o+2),16)||0;return this}else if(r==="utf16le"){var h=Math.min(this.l+e,this.length);for(o=0;o<Math.min(t.length,e);++o){var d=t.charCodeAt(o);this[this.l++]=d&255,this[this.l++]=d>>8}for(;this.l<h;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,lF(this,t,this.l);break;case 8:if(a=8,r==="f"){aF(this,t,this.l);break}case 16:break;case-4:a=4,cF(this,t,this.l);break}return this.l+=a,this}function cA(e,t){var r=YC(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Sa(e,t){e.l=t,e.read_shift=ud,e.chk=cA,e.write_shift=hF}function Js(e,t){e.l+=t}function et(e){var t=Ic(e);return Sa(t,0),t}function ha(){var e=[],t=Ar?256:2048,r=function(w){var E=et(w);return Sa(E,0),E},a=r(t),o=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},h=function(w){return a&&w<a.length-a.l?a:(o(),a=r(Math.max(w+1,t)))},d=function(){return o(),fi(e)},l=function(w){o(),a=w,a.l==null&&(a.l=a.length),h(t)};return{next:h,push:l,end:d,_bufs:e}}function ht(e,t,r,a){var o=+t,h;if(!isNaN(o)){a||(a=i8[o].p||(r||[]).length||0),h=1+(o>=128?1:0)+1,a>=128&&++h,a>=16384&&++h,a>=2097152&&++h;var d=e.next(h);o<=127?d.write_shift(1,o):(d.write_shift(1,(o&127)+128),d.write_shift(1,o>>7));for(var l=0;l!=4;++l)if(a>=128)d.write_shift(1,(a&127)+128),a>>=7;else{d.write_shift(1,a);break}a>0&&Kv(r)&&e.push(r)}}function hd(e,t,r){var a=da(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function iS(e,t,r){var a=da(e);return a.s=hd(a.s,t.s,r),a.e=hd(a.e,t.s,r),a}function fd(e,t){if(e.cRel&&e.c<0)for(e=da(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=da(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Lr(e);return!e.cRel&&e.cRel!=null&&(r=pF(r)),!e.rRel&&e.rRel!=null&&(r=fF(r)),r}function Ty(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Pi(e.s.c)+":"+(e.e.cRel?"":"$")+Pi(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+mi(e.s.r)+":"+(e.e.rRel?"":"$")+mi(e.e.r):fd(e.s,t.biff)+":"+fd(e.e,t.biff)}function Yv(e){return parseInt(dF(e),10)-1}function mi(e){return""+(e+1)}function fF(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function dF(e){return e.replace(/\$(\d+)$/,"$1")}function Jv(e){for(var t=mF(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function Pi(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function pF(e){return e.replace(/^([A-Z])/,"$$$1")}function mF(e){return e.replace(/^\$([A-Z])/,"$1")}function gF(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Jn(e){for(var t=0,r=0,a=0;a<e.length;++a){var o=e.charCodeAt(a);o>=48&&o<=57?t=10*t+(o-48):o>=65&&o<=90&&(r=26*r+(o-64))}return{c:r-1,r:t-1}}function Lr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Ra(e){var t=e.indexOf(":");return t==-1?{s:Jn(e),e:Jn(e)}:{s:Jn(e.slice(0,t)),e:Jn(e.slice(t+1))}}function On(e,t){return typeof t>"u"||typeof t=="number"?On(e.s,e.e):(typeof e!="string"&&(e=Lr(e)),typeof t!="string"&&(t=Lr(t)),e==t?e:e+":"+t)}function rn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,o=0,h=e.length;for(r=0;a<h&&!((o=e.charCodeAt(a)-64)<1||o>26);++a)r=26*r+o;for(t.s.c=--r,r=0;a<h&&!((o=e.charCodeAt(a)-48)<0||o>9);++a)r=10*r+o;if(t.s.r=--r,a===h||o!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=h&&!((o=e.charCodeAt(a)-64)<1||o>26);++a)r=26*r+o;for(t.e.c=--r,r=0;a!=h&&!((o=e.charCodeAt(a)-48)<0||o>9);++a)r=10*r+o;return t.e.r=--r,t}function aS(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Il(e.z,r?fa(t):t)}catch{}try{return e.w=Il((e.XF||{}).numFmtId||(r?14:0),r?fa(t):t)}catch{return""+t}}function Fo(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Qd[e.v]||e.v:t==null?aS(e,e.v):aS(e,t))}function zc(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function uA(e,t,r){var a=r||{},o=e?Array.isArray(e):a.dense,h=e||(o?[]:{}),d=0,l=0;if(h&&a.origin!=null){if(typeof a.origin=="number")d=a.origin;else{var b=typeof a.origin=="string"?Jn(a.origin):a.origin;d=b.r,l=b.c}h["!ref"]||(h["!ref"]="A1:A1")}var w={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(h["!ref"]){var E=rn(h["!ref"]);w.s.c=E.s.c,w.s.r=E.s.r,w.e.c=Math.max(w.e.c,E.e.c),w.e.r=Math.max(w.e.r,E.e.r),d==-1&&(w.e.r=d=E.e.r+1)}for(var P=0;P!=t.length;++P)if(t[P]){if(!Array.isArray(t[P]))throw new Error("aoa_to_sheet expects an array of arrays");for(var k=0;k!=t[P].length;++k)if(!(typeof t[P][k]>"u")){var R={v:t[P][k]},z=d+P,D=l+k;if(w.s.r>z&&(w.s.r=z),w.s.c>D&&(w.s.c=D),w.e.r<z&&(w.e.r=z),w.e.c<D&&(w.e.c=D),t[P][k]&&typeof t[P][k]=="object"&&!Array.isArray(t[P][k])&&!(t[P][k]instanceof Date))R=t[P][k];else if(Array.isArray(R.v)&&(R.f=t[P][k][1],R.v=R.v[0]),R.v===null)if(R.f)R.t="n";else if(a.nullError)R.t="e",R.v=0;else if(a.sheetStubs)R.t="z";else continue;else typeof R.v=="number"?R.t="n":typeof R.v=="boolean"?R.t="b":R.v instanceof Date?(R.z=a.dateNF||bn[14],a.cellDates?(R.t="d",R.w=Il(R.z,fa(R.v))):(R.t="n",R.v=fa(R.v),R.w=Il(R.z,R.v))):R.t="s";if(o)h[z]||(h[z]=[]),h[z][D]&&h[z][D].z&&(R.z=h[z][D].z),h[z][D]=R;else{var G=Lr({c:D,r:z});h[G]&&h[G].z&&(R.z=h[G].z),h[G]=R}}}return w.s.c<1e7&&(h["!ref"]=On(w)),h}function Th(e,t){return uA(null,e,t)}function _F(e){return e.read_shift(4,"i")}function As(e,t){return t||(t=et(4)),t.write_shift(4,e),t}function Mi(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Qn(e,t){var r=!1;return t==null&&(r=!0,t=et(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function yF(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function xF(e,t){return t||(t=et(4)),t.write_shift(2,0),t.write_shift(2,0),t}function Qv(e,t){var r=e.l,a=e.read_shift(1),o=Mi(e),h=[],d={t:o,h:o};if(a&1){for(var l=e.read_shift(4),b=0;b!=l;++b)h.push(yF(e));d.r=h}else d.r=[{ich:0,ifnt:0}];return e.l=r+t,d}function vF(e,t){var r=!1;return t==null&&(r=!0,t=et(15+4*e.t.length)),t.write_shift(1,0),Qn(e.t,t),r?t.slice(0,t.l):t}var wF=Qv;function bF(e,t){var r=!1;return t==null&&(r=!0,t=et(23+4*e.t.length)),t.write_shift(1,1),Qn(e.t,t),t.write_shift(4,1),xF({},t),r?t.slice(0,t.l):t}function ns(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Oc(e,t){return t==null&&(t=et(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Nc(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Bc(e,t){return t==null&&(t=et(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var SF=Mi,hA=Qn;function e1(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Vm(e,t){var r=!1;return t==null&&(r=!0,t=et(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var TF=Mi,Mx=e1,t1=Vm;function fA(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var o=a===0?Um([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):fc(t,0)>>2;return r?o/100:o}function dA(e,t){t==null&&(t=et(4));var r=0,a=0,o=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:o==(o|0)&&o>=-536870912&&o<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?o:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function pA(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function EF(e,t){return t||(t=et(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Uc=pA,Eh=EF;function Ch(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Pc(e,t){return(t||et(8)).write_shift(8,e,"f")}function CF(e){var t={},r=e.read_shift(1),a=r>>>1,o=e.read_shift(1),h=e.read_shift(2,"i"),d=e.read_shift(1),l=e.read_shift(1),b=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=o;var w=FF[o];w&&(t.rgb=gS(w));break;case 2:t.rgb=gS([d,l,b]);break;case 3:t.theme=o;break}return h!=0&&(t.tint=h>0?h/32767:h/32768),t}function jm(e,t){if(t||(t=et(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function AF(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function kF(e,t){t||(t=et(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var mA=2,va=3,O0=11,$m=19,N0=64,IF=65,PF=71,MF=4108,RF=4126,hi=80,sS={1:{n:"CodePage",t:mA},2:{n:"Category",t:hi},3:{n:"PresentationFormat",t:hi},4:{n:"ByteCount",t:va},5:{n:"LineCount",t:va},6:{n:"ParagraphCount",t:va},7:{n:"SlideCount",t:va},8:{n:"NoteCount",t:va},9:{n:"HiddenCount",t:va},10:{n:"MultimediaClipCount",t:va},11:{n:"ScaleCrop",t:O0},12:{n:"HeadingPairs",t:MF},13:{n:"TitlesOfParts",t:RF},14:{n:"Manager",t:hi},15:{n:"Company",t:hi},16:{n:"LinksUpToDate",t:O0},17:{n:"CharacterCount",t:va},19:{n:"SharedDoc",t:O0},22:{n:"HyperlinksChanged",t:O0},23:{n:"AppVersion",t:va,p:"version"},24:{n:"DigSig",t:IF},26:{n:"ContentType",t:hi},27:{n:"ContentStatus",t:hi},28:{n:"Language",t:hi},29:{n:"Version",t:hi},255:{},2147483648:{n:"Locale",t:$m},2147483651:{n:"Behavior",t:$m},1919054434:{}},oS={1:{n:"CodePage",t:mA},2:{n:"Title",t:hi},3:{n:"Subject",t:hi},4:{n:"Author",t:hi},5:{n:"Keywords",t:hi},6:{n:"Comments",t:hi},7:{n:"Template",t:hi},8:{n:"LastAuthor",t:hi},9:{n:"RevNumber",t:hi},10:{n:"EditTime",t:N0},11:{n:"LastPrinted",t:N0},12:{n:"CreatedDate",t:N0},13:{n:"ModifiedDate",t:N0},14:{n:"PageCount",t:va},15:{n:"WordCount",t:va},16:{n:"CharCount",t:va},17:{n:"Thumbnail",t:PF},18:{n:"Application",t:hi},19:{n:"DocSecurity",t:va},255:{},2147483648:{n:"Locale",t:$m},2147483651:{n:"Behavior",t:$m},1919054434:{}};function DF(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var LF=DF([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),FF=da(LF),Qd={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},zF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},B0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function gA(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function _A(e,t){var r=HL(zF),a=[],o;a[a.length]=Nn,a[a.length]=kt("Types",null,{xmlns:Yn.CT,"xmlns:xsd":Yn.xsd,"xmlns:xsi":Yn.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(b){return kt("Default",null,{Extension:b[0],ContentType:b[1]})}));var h=function(b){e[b]&&e[b].length>0&&(o=e[b][0],a[a.length]=kt("Override",null,{PartName:(o[0]=="/"?"":"/")+o,ContentType:B0[b][t.bookType]||B0[b].xlsx}))},d=function(b){(e[b]||[]).forEach(function(w){a[a.length]=kt("Override",null,{PartName:(w[0]=="/"?"":"/")+w,ContentType:B0[b][t.bookType]||B0[b].xlsx})})},l=function(b){(e[b]||[]).forEach(function(w){a[a.length]=kt("Override",null,{PartName:(w[0]=="/"?"":"/")+w,ContentType:r[b][0]})})};return h("workbooks"),d("sheets"),d("charts"),l("themes"),["strs","styles"].forEach(h),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),d("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var Er={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function yA(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function nh(e){var t=[Nn,kt("Relationships",null,{xmlns:Yn.RELS})];return _i(e["!id"]).forEach(function(r){t[t.length]=kt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Mr(e,t,r,a,o,h){if(o||(o={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,o.Id="rId"+t,o.Type=a,o.Target=r,[Er.HLINK,Er.XPATH,Er.XMISS].indexOf(o.Type)>-1&&(o.TargetMode="External"),e["!id"][o.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][o.Id]=o,e[("/"+o.Target).replace("//","/")]=o,t}function OF(e){var t=[Nn];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function lS(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function NF(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function BF(e){var t=[Nn];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(lS(e[r][0],e[r][1])),t.push(NF("",e[r][0]));return t.push(lS("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function xA(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Lm.version+"</meta:generator></office:meta></office:document-meta>"}var vc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Ey(e,t,r,a,o){o[e]!=null||t==null||t===""||(o[e]=t,t=Rr(t),a[a.length]=r?kt(e,t,r):di(e,t))}function vA(e,t){var r=t||{},a=[Nn,kt("cp:coreProperties",null,{"xmlns:cp":Yn.CORE_PROPS,"xmlns:dc":Yn.dc,"xmlns:dcterms":Yn.dcterms,"xmlns:dcmitype":Yn.dcmitype,"xmlns:xsi":Yn.xsi})],o={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&Ey("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:Px(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,o),e.ModifiedDate!=null&&Ey("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:Px(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,o));for(var h=0;h!=vc.length;++h){var d=vc[h],l=r.Props&&r.Props[d[1]]!=null?r.Props[d[1]]:e?e[d[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Ey(d[0],l,null,a,o)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var ih=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],wA=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function bA(e){var t=[],r=kt;return e||(e={}),e.Application="SheetJS",t[t.length]=Nn,t[t.length]=kt("Properties",null,{xmlns:Yn.EXT_PROPS,"xmlns:vt":Yn.vt}),ih.forEach(function(a){if(e[a[1]]!==void 0){var o;switch(a[2]){case"string":o=Rr(String(e[a[1]]));break;case"bool":o=e[a[1]]?"true":"false";break}o!==void 0&&(t[t.length]=r(a[0],o))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+Rr(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function SA(e){var t=[Nn,kt("Properties",null,{xmlns:Yn.CUST_PROPS,"xmlns:vt":Yn.vt})];if(!e)return t.join("");var r=1;return _i(e).forEach(function(o){++r,t[t.length]=kt("property",nF(e[o]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Rr(o)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var cS={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function UF(e,t){var r=[];return _i(cS).map(function(a){for(var o=0;o<vc.length;++o)if(vc[o][1]==a)return vc[o];for(o=0;o<ih.length;++o)if(ih[o][1]==a)return ih[o];throw a}).forEach(function(a){if(e[a[1]]!=null){var o=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":o=new Date(o).toISOString().replace(/\.\d*Z/,"Z");break}typeof o=="number"?o=String(o):o===!0||o===!1?o=o?"1":"0":o instanceof Date&&(o=new Date(o).toISOString().replace(/\.\d*Z/,"")),r.push(di(cS[a[1]]||a[1],o))}}),kt("DocumentProperties",r.join(""),{xmlns:Ea.o})}function VF(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",o=[];return e&&_i(e).forEach(function(h){if(Object.prototype.hasOwnProperty.call(e,h)){for(var d=0;d<vc.length;++d)if(h==vc[d][1])return;for(d=0;d<ih.length;++d)if(h==ih[d][1])return;for(d=0;d<r.length;++d)if(h==r[d])return;var l=e[h],b="string";typeof l=="number"?(b="float",l=String(l)):l===!0||l===!1?(b="boolean",l=l?"1":"0"):l=String(l),o.push(kt(Kb(h),l,{"dt:dt":b}))}}),t&&_i(t).forEach(function(h){if(Object.prototype.hasOwnProperty.call(t,h)&&!(e&&Object.prototype.hasOwnProperty.call(e,h))){var d=t[h],l="string";typeof d=="number"?(l="float",d=String(d)):d===!0||d===!1?(l="boolean",d=d?"1":"0"):d instanceof Date?(l="dateTime.tz",d=d.toISOString()):d=String(d),o.push(kt(Kb(h),d,{"dt:dt":l}))}}),"<"+a+' xmlns="'+Ea.o+'">'+o.join("")+"</"+a+">"}function jF(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),o=(r-a)/Math.pow(2,32);a*=1e7,o*=1e7;var h=a/Math.pow(2,32)|0;h>0&&(a=a%Math.pow(2,32),o+=h);var d=et(8);return d.write_shift(4,a),d.write_shift(4,o),d}function uS(e,t){var r=et(4),a=et(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=et(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=jF(t);break;case 31:case 80:for(a=et(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return fi([r,a])}var TA=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function $F(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function hS(e,t,r){var a=et(8),o=[],h=[],d=8,l=0,b=et(8),w=et(8);if(b.write_shift(4,2),b.write_shift(4,1200),w.write_shift(4,1),h.push(b),o.push(w),d+=8+b.length,!t){w=et(8),w.write_shift(4,0),o.unshift(w);var E=[et(4)];for(E[0].write_shift(4,e.length),l=0;l<e.length;++l){var P=e[l][0];for(b=et(8+2*(P.length+1)+(P.length%2?0:2)),b.write_shift(4,l+2),b.write_shift(4,P.length+1),b.write_shift(0,P,"dbcs");b.l!=b.length;)b.write_shift(1,0);E.push(b)}b=fi(E),h.unshift(b),d+=8+b.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(TA.indexOf(e[l][0])>-1||wA.indexOf(e[l][0])>-1)&&e[l][1]!=null){var k=e[l][1],R=0;if(t){R=+t[e[l][0]];var z=r[R];if(z.p=="version"&&typeof k=="string"){var D=k.split(".");k=(+D[0]<<16)+(+D[1]||0)}b=uS(z.t,k)}else{var G=$F(k);G==-1&&(G=31,k=String(k)),b=uS(G,k)}h.push(b),w=et(8),w.write_shift(4,t?R:2+l),o.push(w),d+=8+b.length}var B=8*(h.length+1);for(l=0;l<h.length;++l)o[l].write_shift(4,B),B+=h[l].length;return a.write_shift(4,d),a.write_shift(4,h.length),fi([a].concat(o).concat(h))}function fS(e,t,r,a,o,h){var d=et(o?68:48),l=[d];d.write_shift(2,65534),d.write_shift(2,0),d.write_shift(4,842412599),d.write_shift(16,Br.utils.consts.HEADER_CLSID,"hex"),d.write_shift(4,o?2:1),d.write_shift(16,t,"hex"),d.write_shift(4,o?68:48);var b=hS(e,r,a);if(l.push(b),o){var w=hS(o,null,null);d.write_shift(16,h,"hex"),d.write_shift(4,68+b.length),l.push(w)}return fi(l)}function GF(e,t){t||(t=et(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function WF(e,t){return e.read_shift(t)===1}function Hi(e,t){return t||(t=et(2)),t.write_shift(2,+!!e),t}function EA(e){return e.read_shift(2,"u")}function Xa(e,t){return t||(t=et(2)),t.write_shift(2,e),t}function CA(e,t,r){return r||(r=et(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function AA(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),o="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var h=e.read_shift(1);h&&(o="dbcs-cont")}else r.biff==12&&(o="wstr");r.biff>=2&&r.biff<=5&&(o="cpstr");var d=a?e.read_shift(a,o):"";return d}function HF(e){var t=e.t||"",r=et(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=et(2*t.length);a.write_shift(2*t.length,t,"utf16le");var o=[r,a];return fi(o)}function qF(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var o=e.read_shift(1);return o===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function ZF(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):qF(e,a,r)}function XF(e,t,r){if(r.biff>5)return ZF(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function kA(e,t,r){return r||(r=et(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function dS(e,t){t||(t=et(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function KF(e){var t=et(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var o=a.indexOf("#"),h=o>-1?31:23;switch(a.charAt(0)){case"#":h=28;break;case".":h&=-3;break}t.write_shift(4,2),t.write_shift(4,h);var d=[8,6815827,6619237,4849780,83];for(r=0;r<d.length;++r)t.write_shift(4,d[r]);if(h==28)a=a.slice(1),dS(a,t);else if(h&2){for(d="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<d.length;++r)t.write_shift(1,parseInt(d[r],16));var l=o>-1?a.slice(0,o):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),h&8&&dS(o>-1?a.slice(o+1):"",t)}else{for(d="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<d.length;++r)t.write_shift(1,parseInt(d[r],16));for(var b=0;a.slice(b*3,b*3+3)=="../"||a.slice(b*3,b*3+3)=="..\\";)++b;for(t.write_shift(2,b),t.write_shift(4,a.length-3*b+1),r=0;r<a.length-3*b;++r)t.write_shift(1,a.charCodeAt(r+3*b)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Mc(e,t,r,a){return a||(a=et(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function YF(e,t,r){var a=r.biff>8?4:2,o=e.read_shift(a),h=e.read_shift(a,"i"),d=e.read_shift(a,"i");return[o,h,d]}function JF(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),o=e.read_shift(2);return{s:{c:a,r:t},e:{c:o,r}}}function IA(e,t){return t||(t=et(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function r1(e,t,r){var a=1536,o=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,o=8;break;case"biff4":a=4,o=6;break;case"biff3":a=3,o=6;break;case"biff2":a=2,o=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var h=et(o);return h.write_shift(2,a),h.write_shift(2,t),o>4&&h.write_shift(2,29282),o>6&&h.write_shift(2,1997),o>8&&(h.write_shift(2,49161),h.write_shift(2,1),h.write_shift(2,1798),h.write_shift(2,0)),h}function QF(e,t){var r=!t||t.biff==8,a=et(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function e5(e,t){var r=!t||t.biff>=8?2:1,a=et(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var o=a.slice(0,a.l);return o.l=a.l,o}function t5(e,t){var r=et(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],o=0;o<e.length;++o)a[o]=HF(e[o]);var h=fi([r].concat(a));return h.parts=[r.length].concat(a.map(function(d){return d.length})),h}function r5(){var e=et(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function n5(e){var t=et(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function i5(e,t){var r=e.name||"Arial",a=t&&t.biff==5,o=a?15+r.length:16+2*r.length,h=et(o);return h.write_shift(2,e.sz*20),h.write_shift(4,0),h.write_shift(2,400),h.write_shift(4,0),h.write_shift(2,0),h.write_shift(1,r.length),a||h.write_shift(1,1),h.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),h}function a5(e,t,r,a){var o=et(10);return Mc(e,t,a,o),o.write_shift(4,r),o}function s5(e,t,r,a,o){var h=!o||o.biff==8,d=et(8+ +h+(1+h)*r.length);return Mc(e,t,a,d),d.write_shift(2,r.length),h&&d.write_shift(1,1),d.write_shift((1+h)*r.length,r,h?"utf16le":"sbcs"),d}function o5(e,t,r,a){var o=r&&r.biff==5;a||(a=et(o?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(o?1:2,t.length),o||a.write_shift(1,1),a.write_shift((o?1:2)*t.length,t,o?"sbcs":"utf16le");var h=a.length>a.l?a.slice(0,a.l):a;return h.l==null&&(h.l=h.length),h}function l5(e,t){var r=t.biff==8||!t.biff?4:2,a=et(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function pS(e,t,r,a){var o=r&&r.biff==5;a||(a=et(o?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var h=0;return e.numFmtId>0&&o&&(h|=1024),a.write_shift(4,h),a.write_shift(4,0),o||a.write_shift(4,0),a.write_shift(2,0),a}function c5(e){var t=et(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function u5(e,t,r,a,o,h){var d=et(8);return Mc(e,t,a,d),CA(r,h,d),d}function h5(e,t,r,a){var o=et(14);return Mc(e,t,a,o),Pc(r,o),o}function f5(e,t,r){if(r.biff<8)return d5(e,t,r);for(var a=[],o=e.l+t,h=e.read_shift(r.biff>8?4:2);h--!==0;)a.push(YF(e,r.biff>8?12:6,r));if(e.l!=o)throw new Error("Bad ExternSheet: "+e.l+" != "+o);return a}function d5(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=AA(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function p5(e){var t=et(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)IA(e[r],t);return t}function m5(e){var t=et(24),r=Jn(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),o=0;o<16;++o)t.write_shift(1,parseInt(a[o],16));return fi([t,KF(e[1])])}function g5(e){var t=e[1].Tooltip,r=et(10+2*(t.length+1));r.write_shift(2,2048);var a=Jn(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var o=0;o<t.length;++o)r.write_shift(2,t.charCodeAt(o));return r.write_shift(2,0),r}function _5(e){return e||(e=et(4)),e.write_shift(2,1),e.write_shift(2,1),e}function y5(e,t,r){if(!r.cellStyles)return Js(e,t);var a=r&&r.biff>=12?4:2,o=e.read_shift(a),h=e.read_shift(a),d=e.read_shift(a),l=e.read_shift(a),b=e.read_shift(2);a==2&&(e.l+=2);var w={s:o,e:h,w:d,ixfe:l,flags:b};return(r.biff>=5||!r.biff)&&(w.level=b>>8&7),w}function x5(e,t){var r=et(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function v5(e){for(var t=et(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function w5(e,t,r){var a=et(15);return tp(a,e,t),a.write_shift(8,r,"f"),a}function b5(e,t,r){var a=et(9);return tp(a,e,t),a.write_shift(2,r),a}var S5=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Wv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,b){var w=[],E=Ic(1);switch(b.type){case"base64":E=bs(Lo(l));break;case"binary":E=bs(l);break;case"buffer":case"array":E=l;break}Sa(E,0);var P=E.read_shift(1),k=!!(P&136),R=!1,z=!1;switch(P){case 2:break;case 3:break;case 48:R=!0,k=!0;break;case 49:R=!0,k=!0;break;case 131:break;case 139:break;case 140:z=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+P.toString(16))}var D=0,G=521;P==2&&(D=E.read_shift(2)),E.l+=3,P!=2&&(D=E.read_shift(4)),D>1048576&&(D=1e6),P!=2&&(G=E.read_shift(2));var B=E.read_shift(2),N=b.codepage||1252;P!=2&&(E.l+=16,E.read_shift(1),E[E.l]!==0&&(N=e[E[E.l]]),E.l+=1,E.l+=2),z&&(E.l+=36);for(var W=[],Q={},_e=Math.min(E.length,P==2?521:G-10-(R?264:0)),Ce=z?32:11;E.l<_e&&E[E.l]!=13;)switch(Q={},Q.name=Fm.utils.decode(N,E.slice(E.l,E.l+Ce)).replace(/[\u0000\r\n].*$/g,""),E.l+=Ce,Q.type=String.fromCharCode(E.read_shift(1)),P!=2&&!z&&(Q.offset=E.read_shift(4)),Q.len=E.read_shift(1),P==2&&(Q.offset=E.read_shift(2)),Q.dec=E.read_shift(1),Q.name.length&&W.push(Q),P!=2&&(E.l+=z?13:14),Q.type){case"B":(!R||Q.len!=8)&&b.WTF&&console.log("Skipping "+Q.name+":"+Q.type);break;case"G":case"P":b.WTF&&console.log("Skipping "+Q.name+":"+Q.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+Q.type)}if(E[E.l]!==13&&(E.l=G-1),E.read_shift(1)!==13)throw new Error("DBF Terminator not found "+E.l+" "+E[E.l]);E.l=G;var te=0,we=0;for(w[0]=[],we=0;we!=W.length;++we)w[0][we]=W[we].name;for(;D-- >0;){if(E[E.l]===42){E.l+=B;continue}for(++E.l,w[++te]=[],we=0,we=0;we!=W.length;++we){var Pe=E.slice(E.l,E.l+W[we].len);E.l+=W[we].len,Sa(Pe,0);var ke=Fm.utils.decode(N,Pe);switch(W[we].type){case"C":ke.trim().length&&(w[te][we]=ke.replace(/\s+$/,""));break;case"D":ke.length===8?w[te][we]=new Date(+ke.slice(0,4),+ke.slice(4,6)-1,+ke.slice(6,8)):w[te][we]=ke;break;case"F":w[te][we]=parseFloat(ke.trim());break;case"+":case"I":w[te][we]=z?Pe.read_shift(-4,"i")^2147483648:Pe.read_shift(4,"i");break;case"L":switch(ke.trim().toUpperCase()){case"Y":case"T":w[te][we]=!0;break;case"N":case"F":w[te][we]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ke+"|")}break;case"M":if(!k)throw new Error("DBF Unexpected MEMO for type "+P.toString(16));w[te][we]="##MEMO##"+(z?parseInt(ke.trim(),10):Pe.read_shift(4));break;case"N":ke=ke.replace(/\u0000/g,"").trim(),ke&&ke!="."&&(w[te][we]=+ke||0);break;case"@":w[te][we]=new Date(Pe.read_shift(-8,"f")-621356832e5);break;case"T":w[te][we]=new Date((Pe.read_shift(4)-2440588)*864e5+Pe.read_shift(4));break;case"Y":w[te][we]=Pe.read_shift(4,"i")/1e4+Pe.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":w[te][we]=-Pe.read_shift(-8,"f");break;case"B":if(R&&W[we].len==8){w[te][we]=Pe.read_shift(8,"f");break}case"G":case"P":Pe.l+=W[we].len;break;case"0":if(W[we].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+W[we].type)}}}if(P!=2&&E.l<E.length&&E[E.l++]!=26)throw new Error("DBF EOF Marker missing "+(E.l-1)+" of "+E.length+" "+E[E.l-1].toString(16));return b&&b.sheetRows&&(w=w.slice(0,b.sheetRows)),b.DBF=W,w}function a(l,b){var w=b||{};w.dateNF||(w.dateNF="yyyymmdd");var E=Th(r(l,w),w);return E["!cols"]=w.DBF.map(function(P){return{wch:P.len,DBF:P}}),delete w.DBF,E}function o(l,b){try{return zc(a(l,b),b)}catch(w){if(b&&b.WTF)throw w}return{SheetNames:[],Sheets:{}}}var h={B:8,C:250,L:1,D:8,"?":0,"":0};function d(l,b){var w=b||{};if(+w.codepage>=0&&Ld(+w.codepage),w.type=="string")throw new Error("Cannot write DBF to JS string");var E=ha(),P=Zm(l,{header:1,raw:!0,cellDates:!0}),k=P[0],R=P.slice(1),z=l["!cols"]||[],D=0,G=0,B=0,N=1;for(D=0;D<k.length;++D){if(((z[D]||{}).DBF||{}).name){k[D]=z[D].DBF.name,++B;continue}if(k[D]!=null){if(++B,typeof k[D]=="number"&&(k[D]=k[D].toString(10)),typeof k[D]!="string")throw new Error("DBF Invalid column name "+k[D]+" |"+typeof k[D]+"|");if(k.indexOf(k[D])!==D){for(G=0;G<1024;++G)if(k.indexOf(k[D]+"_"+G)==-1){k[D]+="_"+G;break}}}}var W=rn(l["!ref"]),Q=[],_e=[],Ce=[];for(D=0;D<=W.e.c-W.s.c;++D){var te="",we="",Pe=0,ke=[];for(G=0;G<R.length;++G)R[G][D]!=null&&ke.push(R[G][D]);if(ke.length==0||k[D]==null){Q[D]="?";continue}for(G=0;G<ke.length;++G){switch(typeof ke[G]){case"number":we="B";break;case"string":we="C";break;case"boolean":we="L";break;case"object":we=ke[G]instanceof Date?"D":"C";break;default:we="C"}Pe=Math.max(Pe,String(ke[G]).length),te=te&&te!=we?"C":we}Pe>250&&(Pe=250),we=((z[D]||{}).DBF||{}).type,we=="C"&&z[D].DBF.len>Pe&&(Pe=z[D].DBF.len),te=="B"&&we=="N"&&(te="N",Ce[D]=z[D].DBF.dec,Pe=z[D].DBF.len),_e[D]=te=="C"||we=="N"?Pe:h[te]||0,N+=_e[D],Q[D]=te}var $e=E.next(32);for($e.write_shift(4,318902576),$e.write_shift(4,R.length),$e.write_shift(2,296+32*B),$e.write_shift(2,N),D=0;D<4;++D)$e.write_shift(4,0);for($e.write_shift(4,0|(+t[MC]||3)<<8),D=0,G=0;D<k.length;++D)if(k[D]!=null){var Ue=E.next(32),at=(k[D].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);Ue.write_shift(1,at,"sbcs"),Ue.write_shift(1,Q[D]=="?"?"C":Q[D],"sbcs"),Ue.write_shift(4,G),Ue.write_shift(1,_e[D]||h[Q[D]]||0),Ue.write_shift(1,Ce[D]||0),Ue.write_shift(1,2),Ue.write_shift(4,0),Ue.write_shift(1,0),Ue.write_shift(4,0),Ue.write_shift(4,0),G+=_e[D]||h[Q[D]]||0}var yt=E.next(264);for(yt.write_shift(4,13),D=0;D<65;++D)yt.write_shift(4,0);for(D=0;D<R.length;++D){var gt=E.next(N);for(gt.write_shift(1,0),G=0;G<k.length;++G)if(k[G]!=null)switch(Q[G]){case"L":gt.write_shift(1,R[D][G]==null?63:R[D][G]?84:70);break;case"B":gt.write_shift(8,R[D][G]||0,"f");break;case"N":var nt="0";for(typeof R[D][G]=="number"&&(nt=R[D][G].toFixed(Ce[G]||0)),B=0;B<_e[G]-nt.length;++B)gt.write_shift(1,32);gt.write_shift(1,nt,"sbcs");break;case"D":R[D][G]?(gt.write_shift(4,("0000"+R[D][G].getFullYear()).slice(-4),"sbcs"),gt.write_shift(2,("00"+(R[D][G].getMonth()+1)).slice(-2),"sbcs"),gt.write_shift(2,("00"+R[D][G].getDate()).slice(-2),"sbcs")):gt.write_shift(8,"00000000","sbcs");break;case"C":var Rt=String(R[D][G]!=null?R[D][G]:"").slice(0,_e[G]);for(gt.write_shift(1,Rt,"sbcs"),B=0;B<_e[G]-Rt.length;++B)gt.write_shift(1,32);break}}return E.next(1).write_shift(1,26),E.end()}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),T5=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+_i(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(k,R){var z=e[R];return typeof z=="number"?Nb(z):z},a=function(k,R,z){var D=R.charCodeAt(0)-32<<4|z.charCodeAt(0)-48;return D==59?k:Nb(D)};e["|"]=254;function o(k,R){switch(R.type){case"base64":return h(Lo(k),R);case"binary":return h(k,R);case"buffer":return h(Ar&&Buffer.isBuffer(k)?k.toString("binary"):Kd(k),R);case"array":return h(Tg(k),R)}throw new Error("Unrecognized type "+R.type)}function h(k,R){var z=k.split(/[\n\r]+/),D=-1,G=-1,B=0,N=0,W=[],Q=[],_e=null,Ce={},te=[],we=[],Pe=[],ke=0,$e;for(+R.codepage>=0&&Ld(+R.codepage);B!==z.length;++B){ke=0;var Ue=z[B].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),at=Ue.replace(/;;/g,"\0").split(";").map(function(Ee){return Ee.replace(/\u0000/g,";")}),yt=at[0],gt;if(Ue.length>0)switch(yt){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":at[1].charAt(0)=="P"&&Q.push(Ue.slice(3).replace(/;;/g,";"));break;case"C":var nt=!1,Rt=!1,Ke=!1,dt=!1,Dt=-1,jt=-1;for(N=1;N<at.length;++N)switch(at[N].charAt(0)){case"A":break;case"X":G=parseInt(at[N].slice(1))-1,Rt=!0;break;case"Y":for(D=parseInt(at[N].slice(1))-1,Rt||(G=0),$e=W.length;$e<=D;++$e)W[$e]=[];break;case"K":gt=at[N].slice(1),gt.charAt(0)==='"'?gt=gt.slice(1,gt.length-1):gt==="TRUE"?gt=!0:gt==="FALSE"?gt=!1:isNaN(ko(gt))?isNaN(zd(gt).getDate())||(gt=Zi(gt)):(gt=ko(gt),_e!==null&&$C(_e)&&(gt=qC(gt))),nt=!0;break;case"E":dt=!0;var xe=bz(at[N].slice(1),{r:D,c:G});W[D][G]=[W[D][G],xe];break;case"S":Ke=!0,W[D][G]=[W[D][G],"S5S"];break;case"G":break;case"R":Dt=parseInt(at[N].slice(1))-1;break;case"C":jt=parseInt(at[N].slice(1))-1;break;default:if(R&&R.WTF)throw new Error("SYLK bad record "+Ue)}if(nt&&(W[D][G]&&W[D][G].length==2?W[D][G][0]=gt:W[D][G]=gt,_e=null),Ke){if(dt)throw new Error("SYLK shared formula cannot have own formula");var Te=Dt>-1&&W[Dt][jt];if(!Te||!Te[1])throw new Error("SYLK shared formula cannot find base");W[D][G][1]=Sz(Te[1],{r:D-Dt,c:G-jt})}break;case"F":var be=0;for(N=1;N<at.length;++N)switch(at[N].charAt(0)){case"X":G=parseInt(at[N].slice(1))-1,++be;break;case"Y":for(D=parseInt(at[N].slice(1))-1,$e=W.length;$e<=D;++$e)W[$e]=[];break;case"M":ke=parseInt(at[N].slice(1))/20;break;case"F":break;case"G":break;case"P":_e=Q[parseInt(at[N].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(Pe=at[N].slice(1).split(" "),$e=parseInt(Pe[0],10);$e<=parseInt(Pe[1],10);++$e)ke=parseInt(Pe[2],10),we[$e-1]=ke===0?{hidden:!0}:{wch:ke},n1(we[$e-1]);break;case"C":G=parseInt(at[N].slice(1))-1,we[G]||(we[G]={});break;case"R":D=parseInt(at[N].slice(1))-1,te[D]||(te[D]={}),ke>0?(te[D].hpt=ke,te[D].hpx=LA(ke)):ke===0&&(te[D].hidden=!0);break;default:if(R&&R.WTF)throw new Error("SYLK bad record "+Ue)}be<1&&(_e=null);break;default:if(R&&R.WTF)throw new Error("SYLK bad record "+Ue)}}return te.length>0&&(Ce["!rows"]=te),we.length>0&&(Ce["!cols"]=we),R&&R.sheetRows&&(W=W.slice(0,R.sheetRows)),[W,Ce]}function d(k,R){var z=o(k,R),D=z[0],G=z[1],B=Th(D,R);return _i(G).forEach(function(N){B[N]=G[N]}),B}function l(k,R){return zc(d(k,R),R)}function b(k,R,z,D){var G="C;Y"+(z+1)+";X"+(D+1)+";K";switch(k.t){case"n":G+=k.v||0,k.f&&!k.F&&(G+=";E"+a1(k.f,{r:z,c:D}));break;case"b":G+=k.v?"TRUE":"FALSE";break;case"e":G+=k.w||k.v;break;case"d":G+='"'+(k.w||k.v)+'"';break;case"s":G+='"'+k.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return G}function w(k,R){R.forEach(function(z,D){var G="F;W"+(D+1)+" "+(D+1)+" ";z.hidden?G+="0":(typeof z.width=="number"&&!z.wpx&&(z.wpx=Gm(z.width)),typeof z.wpx=="number"&&!z.wch&&(z.wch=Wm(z.wpx)),typeof z.wch=="number"&&(G+=Math.round(z.wch))),G.charAt(G.length-1)!=" "&&k.push(G)})}function E(k,R){R.forEach(function(z,D){var G="F;";z.hidden?G+="M0;":z.hpt?G+="M"+20*z.hpt+";":z.hpx&&(G+="M"+20*Hm(z.hpx)+";"),G.length>2&&k.push(G+"R"+(D+1))})}function P(k,R){var z=["ID;PWXL;N;E"],D=[],G=rn(k["!ref"]),B,N=Array.isArray(k),W=`\r
`;z.push("P;PGeneral"),z.push("F;P0;DG0G8;M255"),k["!cols"]&&w(z,k["!cols"]),k["!rows"]&&E(z,k["!rows"]),z.push("B;Y"+(G.e.r-G.s.r+1)+";X"+(G.e.c-G.s.c+1)+";D"+[G.s.c,G.s.r,G.e.c,G.e.r].join(" "));for(var Q=G.s.r;Q<=G.e.r;++Q)for(var _e=G.s.c;_e<=G.e.c;++_e){var Ce=Lr({r:Q,c:_e});B=N?(k[Q]||[])[_e]:k[Ce],!(!B||B.v==null&&(!B.f||B.F))&&D.push(b(B,k,Q,_e))}return z.join(W)+W+D.join(W)+W+"E"+W}return{to_workbook:l,to_sheet:d,from_sheet:P}}(),E5=function(){function e(h,d){switch(d.type){case"base64":return t(Lo(h),d);case"binary":return t(h,d);case"buffer":return t(Ar&&Buffer.isBuffer(h)?h.toString("binary"):Kd(h),d);case"array":return t(Tg(h),d)}throw new Error("Unrecognized type "+d.type)}function t(h,d){for(var l=h.split(`
`),b=-1,w=-1,E=0,P=[];E!==l.length;++E){if(l[E].trim()==="BOT"){P[++b]=[],w=0;continue}if(!(b<0)){var k=l[E].trim().split(","),R=k[0],z=k[1];++E;for(var D=l[E]||"";(D.match(/["]/g)||[]).length&1&&E<l.length-1;)D+=`
`+l[++E];switch(D=D.trim(),+R){case-1:if(D==="BOT"){P[++b]=[],w=0;continue}else if(D!=="EOD")throw new Error("Unrecognized DIF special command "+D);break;case 0:D==="TRUE"?P[b][w]=!0:D==="FALSE"?P[b][w]=!1:isNaN(ko(z))?isNaN(zd(z).getDate())?P[b][w]=z:P[b][w]=Zi(z):P[b][w]=ko(z),++w;break;case 1:D=D.slice(1,D.length-1),D=D.replace(/""/g,'"'),D&&D.match(/^=".*"$/)&&(D=D.slice(2,-1)),P[b][w++]=D!==""?D:null;break}if(D==="EOD")break}}return d&&d.sheetRows&&(P=P.slice(0,d.sheetRows)),P}function r(h,d){return Th(e(h,d),d)}function a(h,d){return zc(r(h,d),d)}var o=function(){var h=function(b,w,E,P,k){b.push(w),b.push(E+","+P),b.push('"'+k.replace(/"/g,'""')+'"')},d=function(b,w,E,P){b.push(w+","+E),b.push(w==1?'"'+P.replace(/"/g,'""')+'"':P)};return function(b){var w=[],E=rn(b["!ref"]),P,k=Array.isArray(b);h(w,"TABLE",0,1,"sheetjs"),h(w,"VECTORS",0,E.e.r-E.s.r+1,""),h(w,"TUPLES",0,E.e.c-E.s.c+1,""),h(w,"DATA",0,0,"");for(var R=E.s.r;R<=E.e.r;++R){d(w,-1,0,"BOT");for(var z=E.s.c;z<=E.e.c;++z){var D=Lr({r:R,c:z});if(P=k?(b[R]||[])[z]:b[D],!P){d(w,1,0,"");continue}switch(P.t){case"n":var G=P.w;!G&&P.v!=null&&(G=P.v),G==null?P.f&&!P.F?d(w,1,0,"="+P.f):d(w,1,0,""):d(w,0,G,"V");break;case"b":d(w,0,P.v?1:0,P.v?"TRUE":"FALSE");break;case"s":d(w,1,0,isNaN(P.v)?P.v:'="'+P.v+'"');break;case"d":P.w||(P.w=Il(P.z||bn[14],fa(Zi(P.v)))),d(w,0,P.w,"V");break;default:d(w,1,0,"")}}}d(w,-1,0,"EOD");var B=`\r
`,N=w.join(B);return N}}();return{to_workbook:a,to_sheet:r,from_sheet:o}}(),PA=function(){function e(P){return P.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(P){return P.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(P,k){for(var R=P.split(`
`),z=-1,D=-1,G=0,B=[];G!==R.length;++G){var N=R[G].trim().split(":");if(N[0]==="cell"){var W=Jn(N[1]);if(B.length<=W.r)for(z=B.length;z<=W.r;++z)B[z]||(B[z]=[]);switch(z=W.r,D=W.c,N[2]){case"t":B[z][D]=e(N[3]);break;case"v":B[z][D]=+N[3];break;case"vtf":var Q=N[N.length-1];case"vtc":switch(N[3]){case"nl":B[z][D]=!!+N[4];break;default:B[z][D]=+N[4];break}N[2]=="vtf"&&(B[z][D]=[B[z][D],Q])}}}return k&&k.sheetRows&&(B=B.slice(0,k.sheetRows)),B}function a(P,k){return Th(r(P,k),k)}function o(P,k){return zc(a(P,k),k)}var h=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),d=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),b="--SocialCalcSpreadsheetControlSave--";function w(P){if(!P||!P["!ref"])return"";for(var k=[],R=[],z,D="",G=Ra(P["!ref"]),B=Array.isArray(P),N=G.s.r;N<=G.e.r;++N)for(var W=G.s.c;W<=G.e.c;++W)if(D=Lr({r:N,c:W}),z=B?(P[N]||[])[W]:P[D],!(!z||z.v==null||z.t==="z")){switch(R=["cell",D,"t"],z.t){case"s":case"str":R.push(t(z.v));break;case"n":z.f?(R[2]="vtf",R[3]="n",R[4]=z.v,R[5]=t(z.f)):(R[2]="v",R[3]=z.v);break;case"b":R[2]="vt"+(z.f?"f":"c"),R[3]="nl",R[4]=z.v?"1":"0",R[5]=t(z.f||(z.v?"TRUE":"FALSE"));break;case"d":var Q=fa(Zi(z.v));R[2]="vtc",R[3]="nd",R[4]=""+Q,R[5]=z.w||Il(z.z||bn[14],Q);break;case"e":continue}k.push(R.join(":"))}return k.push("sheet:c:"+(G.e.c-G.s.c+1)+":r:"+(G.e.r-G.s.r+1)+":tvf:1"),k.push("valueformat:1:text-wiki"),k.join(`
`)}function E(P){return[h,d,l,d,w(P),b].join(`
`)}return{to_workbook:o,to_sheet:a,from_sheet:E}}(),C5=function(){function e(E,P,k,R,z){z.raw?P[k][R]=E:E===""||(E==="TRUE"?P[k][R]=!0:E==="FALSE"?P[k][R]=!1:isNaN(ko(E))?isNaN(zd(E).getDate())?P[k][R]=E:P[k][R]=Zi(E):P[k][R]=ko(E))}function t(E,P){var k=P||{},R=[];if(!E||E.length===0)return R;for(var z=E.split(/[\r\n]/),D=z.length-1;D>=0&&z[D].length===0;)--D;for(var G=10,B=0,N=0;N<=D;++N)B=z[N].indexOf(" "),B==-1?B=z[N].length:B++,G=Math.max(G,B);for(N=0;N<=D;++N){R[N]=[];var W=0;for(e(z[N].slice(0,G).trim(),R,N,W,k),W=1;W<=(z[N].length-G)/10+1;++W)e(z[N].slice(G+(W-1)*10,G+W*10).trim(),R,N,W,k)}return k.sheetRows&&(R=R.slice(0,k.sheetRows)),R}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function o(E){for(var P={},k=!1,R=0,z=0;R<E.length;++R)(z=E.charCodeAt(R))==34?k=!k:!k&&z in r&&(P[z]=(P[z]||0)+1);z=[];for(R in P)Object.prototype.hasOwnProperty.call(P,R)&&z.push([P[R],R]);if(!z.length){P=a;for(R in P)Object.prototype.hasOwnProperty.call(P,R)&&z.push([P[R],R])}return z.sort(function(D,G){return D[0]-G[0]||a[D[1]]-a[G[1]]}),r[z.pop()[1]]||44}function h(E,P){var k=P||{},R="",z=k.dense?[]:{},D={s:{c:0,r:0},e:{c:0,r:0}};E.slice(0,4)=="sep="?E.charCodeAt(5)==13&&E.charCodeAt(6)==10?(R=E.charAt(4),E=E.slice(7)):E.charCodeAt(5)==13||E.charCodeAt(5)==10?(R=E.charAt(4),E=E.slice(6)):R=o(E.slice(0,1024)):k&&k.FS?R=k.FS:R=o(E.slice(0,1024));var G=0,B=0,N=0,W=0,Q=0,_e=R.charCodeAt(0),Ce=!1,te=0,we=E.charCodeAt(0);E=E.replace(/\r\n/mg,`
`);var Pe=k.dateNF!=null?jL(k.dateNF):null;function ke(){var $e=E.slice(W,Q),Ue={};if($e.charAt(0)=='"'&&$e.charAt($e.length-1)=='"'&&($e=$e.slice(1,-1).replace(/""/g,'"')),$e.length===0)Ue.t="z";else if(k.raw)Ue.t="s",Ue.v=$e;else if($e.trim().length===0)Ue.t="s",Ue.v=$e;else if($e.charCodeAt(0)==61)$e.charCodeAt(1)==34&&$e.charCodeAt($e.length-1)==34?(Ue.t="s",Ue.v=$e.slice(2,-1).replace(/""/g,'"')):Tz($e)?(Ue.t="n",Ue.f=$e.slice(1)):(Ue.t="s",Ue.v=$e);else if($e=="TRUE")Ue.t="b",Ue.v=!0;else if($e=="FALSE")Ue.t="b",Ue.v=!1;else if(!isNaN(N=ko($e)))Ue.t="n",k.cellText!==!1&&(Ue.w=$e),Ue.v=N;else if(!isNaN(zd($e).getDate())||Pe&&$e.match(Pe)){Ue.z=k.dateNF||bn[14];var at=0;Pe&&$e.match(Pe)&&($e=$L($e,k.dateNF,$e.match(Pe)||[]),at=1),k.cellDates?(Ue.t="d",Ue.v=Zi($e,at)):(Ue.t="n",Ue.v=fa(Zi($e,at))),k.cellText!==!1&&(Ue.w=Il(Ue.z,Ue.v instanceof Date?fa(Ue.v):Ue.v)),k.cellNF||delete Ue.z}else Ue.t="s",Ue.v=$e;if(Ue.t=="z"||(k.dense?(z[G]||(z[G]=[]),z[G][B]=Ue):z[Lr({c:B,r:G})]=Ue),W=Q+1,we=E.charCodeAt(W),D.e.c<B&&(D.e.c=B),D.e.r<G&&(D.e.r=G),te==_e)++B;else if(B=0,++G,k.sheetRows&&k.sheetRows<=G)return!0}e:for(;Q<E.length;++Q)switch(te=E.charCodeAt(Q)){case 34:we===34&&(Ce=!Ce);break;case _e:case 10:case 13:if(!Ce&&ke())break e;break}return Q-W>0&&ke(),z["!ref"]=On(D),z}function d(E,P){return!(P&&P.PRN)||P.FS||E.slice(0,4)=="sep="||E.indexOf("	")>=0||E.indexOf(",")>=0||E.indexOf(";")>=0?h(E,P):Th(t(E,P),P)}function l(E,P){var k="",R=P.type=="string"?[0,0,0,0]:N8(E,P);switch(P.type){case"base64":k=Lo(E);break;case"binary":k=E;break;case"buffer":P.codepage==65001?k=E.toString("utf8"):P.codepage&&typeof Fm<"u"||(k=Ar&&Buffer.isBuffer(E)?E.toString("binary"):Kd(E));break;case"array":k=Tg(E);break;case"string":k=E;break;default:throw new Error("Unrecognized type "+P.type)}return R[0]==239&&R[1]==187&&R[2]==191?k=cd(k.slice(3)):P.type!="string"&&P.type!="buffer"&&P.codepage==65001?k=cd(k):P.type=="binary"&&typeof Fm<"u",k.slice(0,19)=="socialcalc:version:"?PA.to_sheet(P.type=="string"?k:cd(k),P):d(k,P)}function b(E,P){return zc(l(E,P),P)}function w(E){for(var P=[],k=rn(E["!ref"]),R,z=Array.isArray(E),D=k.s.r;D<=k.e.r;++D){for(var G=[],B=k.s.c;B<=k.e.c;++B){var N=Lr({r:D,c:B});if(R=z?(E[D]||[])[B]:E[N],!R||R.v==null){G.push("          ");continue}for(var W=(R.w||(Fo(R),R.w)||"").slice(0,10);W.length<10;)W+=" ";G.push(W+(B===0?" ":""))}P.push(G.join(""))}return P.join(`
`)}return{to_workbook:b,to_sheet:l,from_sheet:w}}(),mS=function(){function e(xe,Te,be){if(xe){Sa(xe,xe.l||0);for(var Ee=be.Enum||Dt;xe.l<xe.length;){var je=xe.read_shift(2),Je=Ee[je]||Ee[65535],lt=xe.read_shift(2),ft=xe.l+lt,ot=Je.f&&Je.f(xe,lt,be);if(xe.l=ft,Te(ot,Je,je))return}}}function t(xe,Te){switch(Te.type){case"base64":return r(bs(Lo(xe)),Te);case"binary":return r(bs(xe),Te);case"buffer":case"array":return r(xe,Te)}throw"Unsupported type "+Te.type}function r(xe,Te){if(!xe)return xe;var be=Te||{},Ee=be.dense?[]:{},je="Sheet1",Je="",lt=0,ft={},ot=[],er=[],Zt={s:{r:0,c:0},e:{r:0,c:0}},Yt=be.sheetRows||0;if(xe[2]==0&&(xe[3]==8||xe[3]==9)&&xe.length>=16&&xe[14]==5&&xe[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(xe[2]==2)be.Enum=Dt,e(xe,function(Lt,hr,Ur){switch(Ur){case 0:be.vers=Lt,Lt>=4096&&(be.qpro=!0);break;case 6:Zt=Lt;break;case 204:Lt&&(Je=Lt);break;case 222:Je=Lt;break;case 15:case 51:be.qpro||(Lt[1].v=Lt[1].v.slice(1));case 13:case 14:case 16:Ur==14&&(Lt[2]&112)==112&&(Lt[2]&15)>1&&(Lt[2]&15)<15&&(Lt[1].z=be.dateNF||bn[14],be.cellDates&&(Lt[1].t="d",Lt[1].v=qC(Lt[1].v))),be.qpro&&Lt[3]>lt&&(Ee["!ref"]=On(Zt),ft[je]=Ee,ot.push(je),Ee=be.dense?[]:{},Zt={s:{r:0,c:0},e:{r:0,c:0}},lt=Lt[3],je=Je||"Sheet"+(lt+1),Je="");var Xe=be.dense?(Ee[Lt[0].r]||[])[Lt[0].c]:Ee[Lr(Lt[0])];if(Xe){Xe.t=Lt[1].t,Xe.v=Lt[1].v,Lt[1].z!=null&&(Xe.z=Lt[1].z),Lt[1].f!=null&&(Xe.f=Lt[1].f);break}be.dense?(Ee[Lt[0].r]||(Ee[Lt[0].r]=[]),Ee[Lt[0].r][Lt[0].c]=Lt[1]):Ee[Lr(Lt[0])]=Lt[1];break}},be);else if(xe[2]==26||xe[2]==14)be.Enum=jt,xe[2]==14&&(be.qpro=!0,xe.l=0),e(xe,function(Lt,hr,Ur){switch(Ur){case 204:je=Lt;break;case 22:Lt[1].v=Lt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Lt[3]>lt&&(Ee["!ref"]=On(Zt),ft[je]=Ee,ot.push(je),Ee=be.dense?[]:{},Zt={s:{r:0,c:0},e:{r:0,c:0}},lt=Lt[3],je="Sheet"+(lt+1)),Yt>0&&Lt[0].r>=Yt)break;be.dense?(Ee[Lt[0].r]||(Ee[Lt[0].r]=[]),Ee[Lt[0].r][Lt[0].c]=Lt[1]):Ee[Lr(Lt[0])]=Lt[1],Zt.e.c<Lt[0].c&&(Zt.e.c=Lt[0].c),Zt.e.r<Lt[0].r&&(Zt.e.r=Lt[0].r);break;case 27:Lt[14e3]&&(er[Lt[14e3][0]]=Lt[14e3][1]);break;case 1537:er[Lt[0]]=Lt[1],Lt[0]==lt&&(je=Lt[1]);break}},be);else throw new Error("Unrecognized LOTUS BOF "+xe[2]);if(Ee["!ref"]=On(Zt),ft[Je||je]=Ee,ot.push(Je||je),!er.length)return{SheetNames:ot,Sheets:ft};for(var Xt={},Gr=[],gr=0;gr<er.length;++gr)ft[ot[gr]]?(Gr.push(er[gr]||ot[gr]),Xt[er[gr]]=ft[er[gr]]||ft[ot[gr]]):(Gr.push(er[gr]),Xt[er[gr]]={"!ref":"A1"});return{SheetNames:Gr,Sheets:Xt}}function a(xe,Te){var be=Te||{};if(+be.codepage>=0&&Ld(+be.codepage),be.type=="string")throw new Error("Cannot write WK1 to JS string");var Ee=ha(),je=rn(xe["!ref"]),Je=Array.isArray(xe),lt=[];Mt(Ee,0,h(1030)),Mt(Ee,6,b(je));for(var ft=Math.min(je.e.r,8191),ot=je.s.r;ot<=ft;++ot)for(var er=mi(ot),Zt=je.s.c;Zt<=je.e.c;++Zt){ot===je.s.r&&(lt[Zt]=Pi(Zt));var Yt=lt[Zt]+er,Xt=Je?(xe[ot]||[])[Zt]:xe[Yt];if(!(!Xt||Xt.t=="z"))if(Xt.t=="n")(Xt.v|0)==Xt.v&&Xt.v>=-32768&&Xt.v<=32767?Mt(Ee,13,R(ot,Zt,Xt.v)):Mt(Ee,14,D(ot,Zt,Xt.v));else{var Gr=Fo(Xt);Mt(Ee,15,P(ot,Zt,Gr.slice(0,239)))}}return Mt(Ee,1),Ee.end()}function o(xe,Te){var be=Te||{};if(+be.codepage>=0&&Ld(+be.codepage),be.type=="string")throw new Error("Cannot write WK3 to JS string");var Ee=ha();Mt(Ee,0,d(xe));for(var je=0,Je=0;je<xe.SheetNames.length;++je)(xe.Sheets[xe.SheetNames[je]]||{})["!ref"]&&Mt(Ee,27,dt(xe.SheetNames[je],Je++));var lt=0;for(je=0;je<xe.SheetNames.length;++je){var ft=xe.Sheets[xe.SheetNames[je]];if(!(!ft||!ft["!ref"])){for(var ot=rn(ft["!ref"]),er=Array.isArray(ft),Zt=[],Yt=Math.min(ot.e.r,8191),Xt=ot.s.r;Xt<=Yt;++Xt)for(var Gr=mi(Xt),gr=ot.s.c;gr<=ot.e.c;++gr){Xt===ot.s.r&&(Zt[gr]=Pi(gr));var Lt=Zt[gr]+Gr,hr=er?(ft[Xt]||[])[gr]:ft[Lt];if(!(!hr||hr.t=="z"))if(hr.t=="n")Mt(Ee,23,ke(Xt,gr,lt,hr.v));else{var Ur=Fo(hr);Mt(Ee,22,te(Xt,gr,lt,Ur.slice(0,239)))}}++lt}}return Mt(Ee,1),Ee.end()}function h(xe){var Te=et(2);return Te.write_shift(2,xe),Te}function d(xe){var Te=et(26);Te.write_shift(2,4096),Te.write_shift(2,4),Te.write_shift(4,0);for(var be=0,Ee=0,je=0,Je=0;Je<xe.SheetNames.length;++Je){var lt=xe.SheetNames[Je],ft=xe.Sheets[lt];if(!(!ft||!ft["!ref"])){++je;var ot=Ra(ft["!ref"]);be<ot.e.r&&(be=ot.e.r),Ee<ot.e.c&&(Ee=ot.e.c)}}return be>8191&&(be=8191),Te.write_shift(2,be),Te.write_shift(1,je),Te.write_shift(1,Ee),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(1,1),Te.write_shift(1,2),Te.write_shift(4,0),Te.write_shift(4,0),Te}function l(xe,Te,be){var Ee={s:{c:0,r:0},e:{c:0,r:0}};return Te==8&&be.qpro?(Ee.s.c=xe.read_shift(1),xe.l++,Ee.s.r=xe.read_shift(2),Ee.e.c=xe.read_shift(1),xe.l++,Ee.e.r=xe.read_shift(2),Ee):(Ee.s.c=xe.read_shift(2),Ee.s.r=xe.read_shift(2),Te==12&&be.qpro&&(xe.l+=2),Ee.e.c=xe.read_shift(2),Ee.e.r=xe.read_shift(2),Te==12&&be.qpro&&(xe.l+=2),Ee.s.c==65535&&(Ee.s.c=Ee.e.c=Ee.s.r=Ee.e.r=0),Ee)}function b(xe){var Te=et(8);return Te.write_shift(2,xe.s.c),Te.write_shift(2,xe.s.r),Te.write_shift(2,xe.e.c),Te.write_shift(2,xe.e.r),Te}function w(xe,Te,be){var Ee=[{c:0,r:0},{t:"n",v:0},0,0];return be.qpro&&be.vers!=20768?(Ee[0].c=xe.read_shift(1),Ee[3]=xe.read_shift(1),Ee[0].r=xe.read_shift(2),xe.l+=2):(Ee[2]=xe.read_shift(1),Ee[0].c=xe.read_shift(2),Ee[0].r=xe.read_shift(2)),Ee}function E(xe,Te,be){var Ee=xe.l+Te,je=w(xe,Te,be);if(je[1].t="s",be.vers==20768){xe.l++;var Je=xe.read_shift(1);return je[1].v=xe.read_shift(Je,"utf8"),je}return be.qpro&&xe.l++,je[1].v=xe.read_shift(Ee-xe.l,"cstr"),je}function P(xe,Te,be){var Ee=et(7+be.length);Ee.write_shift(1,255),Ee.write_shift(2,Te),Ee.write_shift(2,xe),Ee.write_shift(1,39);for(var je=0;je<Ee.length;++je){var Je=be.charCodeAt(je);Ee.write_shift(1,Je>=128?95:Je)}return Ee.write_shift(1,0),Ee}function k(xe,Te,be){var Ee=w(xe,Te,be);return Ee[1].v=xe.read_shift(2,"i"),Ee}function R(xe,Te,be){var Ee=et(7);return Ee.write_shift(1,255),Ee.write_shift(2,Te),Ee.write_shift(2,xe),Ee.write_shift(2,be,"i"),Ee}function z(xe,Te,be){var Ee=w(xe,Te,be);return Ee[1].v=xe.read_shift(8,"f"),Ee}function D(xe,Te,be){var Ee=et(13);return Ee.write_shift(1,255),Ee.write_shift(2,Te),Ee.write_shift(2,xe),Ee.write_shift(8,be,"f"),Ee}function G(xe,Te,be){var Ee=xe.l+Te,je=w(xe,Te,be);if(je[1].v=xe.read_shift(8,"f"),be.qpro)xe.l=Ee;else{var Je=xe.read_shift(2);Q(xe.slice(xe.l,xe.l+Je),je),xe.l+=Je}return je}function B(xe,Te,be){var Ee=Te&32768;return Te&=-32769,Te=(Ee?xe:0)+(Te>=8192?Te-16384:Te),(Ee?"":"$")+(be?Pi(Te):mi(Te))}var N={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},W=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function Q(xe,Te){Sa(xe,0);for(var be=[],Ee=0,je="",Je="",lt="",ft="";xe.l<xe.length;){var ot=xe[xe.l++];switch(ot){case 0:be.push(xe.read_shift(8,"f"));break;case 1:Je=B(Te[0].c,xe.read_shift(2),!0),je=B(Te[0].r,xe.read_shift(2),!1),be.push(Je+je);break;case 2:{var er=B(Te[0].c,xe.read_shift(2),!0),Zt=B(Te[0].r,xe.read_shift(2),!1);Je=B(Te[0].c,xe.read_shift(2),!0),je=B(Te[0].r,xe.read_shift(2),!1),be.push(er+Zt+":"+Je+je)}break;case 3:if(xe.l<xe.length){console.error("WK1 premature formula end");return}break;case 4:be.push("("+be.pop()+")");break;case 5:be.push(xe.read_shift(2));break;case 6:{for(var Yt="";ot=xe[xe.l++];)Yt+=String.fromCharCode(ot);be.push('"'+Yt.replace(/"/g,'""')+'"')}break;case 8:be.push("-"+be.pop());break;case 23:be.push("+"+be.pop());break;case 22:be.push("NOT("+be.pop()+")");break;case 20:case 21:ft=be.pop(),lt=be.pop(),be.push(["AND","OR"][ot-20]+"("+lt+","+ft+")");break;default:if(ot<32&&W[ot])ft=be.pop(),lt=be.pop(),be.push(lt+W[ot]+ft);else if(N[ot]){if(Ee=N[ot][1],Ee==69&&(Ee=xe[xe.l++]),Ee>be.length){console.error("WK1 bad formula parse 0x"+ot.toString(16)+":|"+be.join("|")+"|");return}var Xt=be.slice(-Ee);be.length-=Ee,be.push(N[ot][0]+"("+Xt.join(",")+")")}else return ot<=7?console.error("WK1 invalid opcode "+ot.toString(16)):ot<=24?console.error("WK1 unsupported op "+ot.toString(16)):ot<=30?console.error("WK1 invalid opcode "+ot.toString(16)):ot<=115?console.error("WK1 unsupported function opcode "+ot.toString(16)):console.error("WK1 unrecognized opcode "+ot.toString(16))}}be.length==1?Te[1].f=""+be[0]:console.error("WK1 bad formula parse |"+be.join("|")+"|")}function _e(xe){var Te=[{c:0,r:0},{t:"n",v:0},0];return Te[0].r=xe.read_shift(2),Te[3]=xe[xe.l++],Te[0].c=xe[xe.l++],Te}function Ce(xe,Te){var be=_e(xe);return be[1].t="s",be[1].v=xe.read_shift(Te-4,"cstr"),be}function te(xe,Te,be,Ee){var je=et(6+Ee.length);je.write_shift(2,xe),je.write_shift(1,be),je.write_shift(1,Te),je.write_shift(1,39);for(var Je=0;Je<Ee.length;++Je){var lt=Ee.charCodeAt(Je);je.write_shift(1,lt>=128?95:lt)}return je.write_shift(1,0),je}function we(xe,Te){var be=_e(xe);be[1].v=xe.read_shift(2);var Ee=be[1].v>>1;if(be[1].v&1)switch(Ee&7){case 0:Ee=(Ee>>3)*5e3;break;case 1:Ee=(Ee>>3)*500;break;case 2:Ee=(Ee>>3)/20;break;case 3:Ee=(Ee>>3)/200;break;case 4:Ee=(Ee>>3)/2e3;break;case 5:Ee=(Ee>>3)/2e4;break;case 6:Ee=(Ee>>3)/16;break;case 7:Ee=(Ee>>3)/64;break}return be[1].v=Ee,be}function Pe(xe,Te){var be=_e(xe),Ee=xe.read_shift(4),je=xe.read_shift(4),Je=xe.read_shift(2);if(Je==65535)return Ee===0&&je===3221225472?(be[1].t="e",be[1].v=15):Ee===0&&je===3489660928?(be[1].t="e",be[1].v=42):be[1].v=0,be;var lt=Je&32768;return Je=(Je&32767)-16446,be[1].v=(1-lt*2)*(je*Math.pow(2,Je+32)+Ee*Math.pow(2,Je)),be}function ke(xe,Te,be,Ee){var je=et(14);if(je.write_shift(2,xe),je.write_shift(1,be),je.write_shift(1,Te),Ee==0)return je.write_shift(4,0),je.write_shift(4,0),je.write_shift(2,65535),je;var Je=0,lt=0,ft=0,ot=0;return Ee<0&&(Je=1,Ee=-Ee),lt=Math.log2(Ee)|0,Ee/=Math.pow(2,lt-31),ot=Ee>>>0,ot&2147483648||(Ee/=2,++lt,ot=Ee>>>0),Ee-=ot,ot|=2147483648,ot>>>=0,Ee*=Math.pow(2,32),ft=Ee>>>0,je.write_shift(4,ft),je.write_shift(4,ot),lt+=16383+(Je?32768:0),je.write_shift(2,lt),je}function $e(xe,Te){var be=Pe(xe);return xe.l+=Te-14,be}function Ue(xe,Te){var be=_e(xe),Ee=xe.read_shift(4);return be[1].v=Ee>>6,be}function at(xe,Te){var be=_e(xe),Ee=xe.read_shift(8,"f");return be[1].v=Ee,be}function yt(xe,Te){var be=at(xe);return xe.l+=Te-10,be}function gt(xe,Te){return xe[xe.l+Te-1]==0?xe.read_shift(Te,"cstr"):""}function nt(xe,Te){var be=xe[xe.l++];be>Te-1&&(be=Te-1);for(var Ee="";Ee.length<be;)Ee+=String.fromCharCode(xe[xe.l++]);return Ee}function Rt(xe,Te,be){if(!(!be.qpro||Te<21)){var Ee=xe.read_shift(1);xe.l+=17,xe.l+=1,xe.l+=2;var je=xe.read_shift(Te-21,"cstr");return[Ee,je]}}function Ke(xe,Te){for(var be={},Ee=xe.l+Te;xe.l<Ee;){var je=xe.read_shift(2);if(je==14e3){for(be[je]=[0,""],be[je][0]=xe.read_shift(2);xe[xe.l];)be[je][1]+=String.fromCharCode(xe[xe.l]),xe.l++;xe.l++}}return be}function dt(xe,Te){var be=et(5+xe.length);be.write_shift(2,14e3),be.write_shift(2,Te);for(var Ee=0;Ee<xe.length;++Ee){var je=xe.charCodeAt(Ee);be[be.l++]=je>127?95:je}return be[be.l++]=0,be}var Dt={0:{n:"BOF",f:EA},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:k},14:{n:"NUMBER",f:z},15:{n:"LABEL",f:E},16:{n:"FORMULA",f:G},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:E},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:gt},222:{n:"SHEETNAMELP",f:nt},65535:{n:""}},jt={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:Ce},23:{n:"NUMBER17",f:Pe},24:{n:"NUMBER18",f:we},25:{n:"FORMULA19",f:$e},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ke},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:Ue},38:{n:"??"},39:{n:"NUMBER27",f:at},40:{n:"FORMULA28",f:yt},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:gt},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Rt},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:o,to_workbook:t}}(),A5=/^\s|\s$|[\t\n\r]/;function MA(e,t){if(!t.bookSST)return"";var r=[Nn];r[r.length]=kt("sst",null,{xmlns:Sh[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var o=e[a],h="<si>";o.r?h+=o.r:(h+="<t",o.t||(o.t=""),o.t.match(A5)&&(h+=' xml:space="preserve"'),h+=">"+Rr(o.t)+"</t>"),h+="</si>",r[r.length]=h}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function k5(e){return[e.read_shift(4),e.read_shift(4)]}function I5(e,t){return t||(t=et(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var P5=vF;function M5(e){var t=ha();ht(t,159,I5(e));for(var r=0;r<e.length;++r)ht(t,19,P5(e[r]));return ht(t,160),t.end()}function R5(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function RA(e){var t=0,r,a=R5(e),o=a.length+1,h,d,l,b,w;for(r=Ic(o),r[0]=a.length,h=1;h!=o;++h)r[h]=a[h-1];for(h=o-1;h>=0;--h)d=r[h],l=t&16384?1:0,b=t<<1&32767,w=l|b,t=w^d;return t^52811}var D5=function(){function e(o,h){switch(h.type){case"base64":return t(Lo(o),h);case"binary":return t(o,h);case"buffer":return t(Ar&&Buffer.isBuffer(o)?o.toString("binary"):Kd(o),h);case"array":return t(Tg(o),h)}throw new Error("Unrecognized type "+h.type)}function t(o,h){var d=h||{},l=d.dense?[]:{},b=o.match(/\\trowd.*?\\row\b/g);if(!b.length)throw new Error("RTF missing table");var w={s:{c:0,r:0},e:{c:0,r:b.length-1}};return b.forEach(function(E,P){Array.isArray(l)&&(l[P]=[]);for(var k=/\\\w+\b/g,R=0,z,D=-1;z=k.exec(E);){switch(z[0]){case"\\cell":var G=E.slice(R,k.lastIndex-z[0].length);if(G[0]==" "&&(G=G.slice(1)),++D,G.length){var B={v:G,t:"s"};Array.isArray(l)?l[P][D]=B:l[Lr({r:P,c:D})]=B}break}R=k.lastIndex}D>w.e.c&&(w.e.c=D)}),l["!ref"]=On(w),l}function r(o,h){return zc(e(o,h),h)}function a(o){for(var h=["{\\rtf1\\ansi"],d=rn(o["!ref"]),l,b=Array.isArray(o),w=d.s.r;w<=d.e.r;++w){h.push("\\trowd\\trautofit1");for(var E=d.s.c;E<=d.e.c;++E)h.push("\\cellx"+(E+1));for(h.push("\\pard\\intbl"),E=d.s.c;E<=d.e.c;++E){var P=Lr({r:w,c:E});l=b?(o[w]||[])[E]:o[P],!(!l||l.v==null&&(!l.f||l.F))&&(h.push(" "+(l.w||(Fo(l),l.w))),h.push("\\cell"))}h.push("\\pard\\intbl\\row")}return h.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}}();function gS(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var L5=6,Io=L5;function Gm(e){return Math.floor((e+Math.round(128/Io)/256)*Io)}function Wm(e){return Math.floor((e-5)/Io*100+.5)/100}function Rx(e){return Math.round((e*Io+5)/Io*256)/256}function n1(e){e.width?(e.wpx=Gm(e.width),e.wch=Wm(e.wpx),e.MDW=Io):e.wpx?(e.wch=Wm(e.wpx),e.width=Rx(e.wch),e.MDW=Io):typeof e.wch=="number"&&(e.width=Rx(e.wch),e.wpx=Gm(e.width),e.MDW=Io),e.customWidth&&delete e.customWidth}var F5=96,DA=F5;function Hm(e){return e*96/DA}function LA(e){return e*DA/96}function z5(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=kt("numFmt",null,{numFmtId:a,formatCode:Rr(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=kt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function O5(e){var t=[];return t[t.length]=kt("cellXfs",null),e.forEach(function(r){t[t.length]=kt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=kt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function FA(e,t){var r=[Nn,kt("styleSheet",null,{xmlns:Sh[0],"xmlns:vt":Yn.vt})],a;return e.SSF&&(a=z5(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=O5(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function N5(e,t){var r=e.read_shift(2),a=Mi(e);return[r,a]}function B5(e,t,r){r||(r=et(6+4*t.length)),r.write_shift(2,e),Qn(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function U5(e,t,r){var a={};a.sz=e.read_shift(2)/20;var o=AF(e);o.fItalic&&(a.italic=1),o.fCondense&&(a.condense=1),o.fExtend&&(a.extend=1),o.fShadow&&(a.shadow=1),o.fOutline&&(a.outline=1),o.fStrikeout&&(a.strike=1);var h=e.read_shift(2);switch(h===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var d=e.read_shift(1);d!=0&&(a.underline=d);var l=e.read_shift(1);l>0&&(a.family=l);var b=e.read_shift(1);switch(b>0&&(a.charset=b),e.l++,a.color=CF(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Mi(e),a}function V5(e,t){t||(t=et(25+4*32)),t.write_shift(2,e.sz*20),kF(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),jm(e.color,t);var a=0;return a=2,t.write_shift(1,a),Qn(e.name,t),t.length>t.l?t.slice(0,t.l):t}var j5=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Cy,$5=Js;function _S(e,t){t||(t=et(4*3+8*7+16*1)),Cy||(Cy=Wv(j5));var r=Cy[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(jm({auto:1},t),jm({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function G5(e,t){var r=e.l+t,a=e.read_shift(2),o=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:o}}function zA(e,t,r){r||(r=et(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Wf(e,t){return t||(t=et(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var W5=Js;function H5(e,t){return t||(t=et(51)),t.write_shift(1,0),Wf(null,t),Wf(null,t),Wf(null,t),Wf(null,t),Wf(null,t),t.length>t.l?t.slice(0,t.l):t}function q5(e,t){return t||(t=et(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Vm(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Z5(e,t,r){var a=et(2052);return a.write_shift(4,e),Vm(t,a),Vm(r,a),a.length>a.l?a.slice(0,a.l):a}function X5(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)t[o]!=null&&++r}),r!=0&&(ht(e,615,As(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)t[o]!=null&&ht(e,44,B5(o,t[o]))}),ht(e,616))}}function K5(e){var t=1;ht(e,611,As(t)),ht(e,43,V5({sz:12,color:{theme:1},name:"Calibri",family:2})),ht(e,612)}function Y5(e){var t=2;ht(e,603,As(t)),ht(e,45,_S({patternType:"none"})),ht(e,45,_S({patternType:"gray125"})),ht(e,604)}function J5(e){var t=1;ht(e,613,As(t)),ht(e,46,H5()),ht(e,614)}function Q5(e){var t=1;ht(e,626,As(t)),ht(e,47,zA({numFmtId:0},65535)),ht(e,627)}function ez(e,t){ht(e,617,As(t.length)),t.forEach(function(r){ht(e,47,zA(r,0))}),ht(e,618)}function tz(e){var t=1;ht(e,619,As(t)),ht(e,48,q5({xfId:0,name:"Normal"})),ht(e,620)}function rz(e){var t=0;ht(e,505,As(t)),ht(e,506)}function nz(e){var t=0;ht(e,508,Z5(t,"TableStyleMedium9","PivotStyleMedium4")),ht(e,509)}function iz(e,t){var r=ha();return ht(r,278),X5(r,e.SSF),K5(r),Y5(r),J5(r),Q5(r),ez(r,t.cellXfs),tz(r),rz(r),nz(r),ht(r,279),r.end()}function OA(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Nn];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function az(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Mi(e)}}function sz(e){var t=et(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Qn(e.name,t),t.slice(0,t.l)}function oz(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function lz(e){var t=et(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function cz(e,t){var r=et(8+2*t.length);return r.write_shift(4,e),Qn(t,r),r.slice(0,r.l)}function uz(e){return e.l+=4,e.read_shift(4)!=0}function hz(e,t){var r=et(8);return r.write_shift(4,e),r.write_shift(4,1),r}function fz(){var e=ha();return ht(e,332),ht(e,334,As(1)),ht(e,335,sz({name:"XLDAPR",version:12e4,flags:3496657072})),ht(e,336),ht(e,339,cz(1,"XLDAPR")),ht(e,52),ht(e,35,As(514)),ht(e,4096,As(0)),ht(e,4097,Xa(1)),ht(e,36),ht(e,53),ht(e,340),ht(e,337,hz(1)),ht(e,51,lz([[1,0]])),ht(e,338),ht(e,333),e.end()}function NA(){var e=[Nn];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function dz(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Lr(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}var Hu=1024;function BA(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),o=[kt("xml",null,{"xmlns:v":Ea.v,"xmlns:o":Ea.o,"xmlns:x":Ea.x,"xmlns:mv":Ea.mv}).replace(/\/>/,">"),kt("o:shapelayout",kt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),kt("v:shapetype",[kt("v:stroke",null,{joinstyle:"miter"}),kt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];Hu<e*1e3;)Hu+=1e3;return t.forEach(function(h){var d=Jn(h[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var b=l.type=="gradient"?kt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,w=kt("v:fill",b,l),E={on:"t",obscured:"t"};++Hu,o=o.concat(["<v:shape"+Nd({id:"_x0000_s"+Hu,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(h[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",w,kt("v:shadow",null,E),kt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",di("x:Anchor",[d.c+1,0,d.r+1,0,d.c+3,20,d.r+5,20].join(",")),di("x:AutoFill","False"),di("x:Row",String(d.r)),di("x:Column",String(d.c)),h[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),o.push("</xml>"),o.join("")}function UA(e){var t=[Nn,kt("comments",null,{xmlns:Sh[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(o){var h=Rr(o.a);r.indexOf(h)==-1&&(r.push(h),t.push("<author>"+h+"</author>")),o.T&&o.ID&&r.indexOf("tc="+o.ID)==-1&&(r.push("tc="+o.ID),t.push("<author>tc="+o.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var o=0,h=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?o=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(b){b.a&&(o=r.indexOf(Rr(b.a))),h.push(b.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+o+'"><text>'),h.length<=1)t.push(di("t",Rr(h[0]||"")));else{for(var d=`Comment:
    `+h[0]+`
`,l=1;l<h.length;++l)d+=`Reply:
    `+h[l]+`
`;t.push(di("t",Rr(d)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function pz(e,t,r){var a=[Nn,kt("ThreadedComments",null,{xmlns:Yn.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(o){var h="";(o[1]||[]).forEach(function(d,l){if(!d.T){delete d.ID;return}d.a&&t.indexOf(d.a)==-1&&t.push(d.a);var b={ref:o[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?h=b.id:b.parentId=h,d.ID=b.id,d.a&&(b.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(d.a)).slice(-12)+"}"),a.push(kt("threadedComment",di("text",d.t||""),b))})}),a.push("</ThreadedComments>"),a.join("")}function mz(e){var t=[Nn,kt("personList",null,{xmlns:Yn.TCMNT,"xmlns:x":Sh[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(kt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function gz(e){var t={};t.iauthor=e.read_shift(4);var r=Uc(e);return t.rfx=r.s,t.ref=Lr(r.s),e.l+=16,t}function _z(e,t){return t==null&&(t=et(36)),t.write_shift(4,e[1].iauthor),Eh(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var yz=Mi;function xz(e){return Qn(e.slice(0,54))}function vz(e){var t=ha(),r=[];return ht(t,628),ht(t,630),e.forEach(function(a){a[1].forEach(function(o){r.indexOf(o.a)>-1||(r.push(o.a.slice(0,54)),ht(t,632,xz(o.a)))})}),ht(t,631),ht(t,633),e.forEach(function(a){a[1].forEach(function(o){o.iauthor=r.indexOf(o.a);var h={s:Jn(a[0]),e:Jn(a[0])};ht(t,635,_z([h,o])),o.t&&o.t.length>0&&ht(t,637,bF(o)),ht(t,636),delete o.iauthor})}),ht(t,634),ht(t,629),t.end()}function wz(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var o=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");o.slice(-1)!=="/"&&Br.utils.cfb_add(e,o,t.FileIndex[a].content)}})}var VA=["xlsb","xlsm","xlam","biff8","xla"],bz=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,o,h,d){var l=!1,b=!1;h.length==0?b=!0:h.charAt(0)=="["&&(b=!0,h=h.slice(1,-1)),d.length==0?l=!0:d.charAt(0)=="["&&(l=!0,d=d.slice(1,-1));var w=h.length>0?parseInt(h,10)|0:0,E=d.length>0?parseInt(d,10)|0:0;return l?E+=t.c:--E,b?w+=t.r:--w,o+(l?"":"$")+Pi(E)+(b?"":"$")+mi(w)}return function(o,h){return t=h,o.replace(e,r)}}(),i1=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a1=function(){return function(t,r){return t.replace(i1,function(a,o,h,d,l,b){var w=Jv(d)-(h?0:r.c),E=Yv(b)-(l?0:r.r),P=E==0?"":l?E+1:"["+E+"]",k=w==0?"":h?w+1:"["+w+"]";return o+"R"+P+"C"+k})}}();function Sz(e,t){return e.replace(i1,function(r,a,o,h,d,l){return a+(o=="$"?o+h:Pi(Jv(h)+t.c))+(d=="$"?d+l:mi(Yv(l)+t.r))})}function Tz(e){return e.length!=1}function Ln(e){e.l+=1}function Pl(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function jA(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return $A(e);r.biff==12&&(a=4)}var o=e.read_shift(a),h=e.read_shift(a),d=Pl(e),l=Pl(e);return{s:{r:o,c:d[0],cRel:d[1],rRel:d[2]},e:{r:h,c:l[0],cRel:l[1],rRel:l[2]}}}function $A(e){var t=Pl(e),r=Pl(e),a=e.read_shift(1),o=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:o,cRel:r[1],rRel:r[2]}}}function Ez(e,t,r){if(r.biff<8)return $A(e);var a=e.read_shift(r.biff==12?4:2),o=e.read_shift(r.biff==12?4:2),h=Pl(e),d=Pl(e);return{s:{r:a,c:h[0],cRel:h[1],rRel:h[2]},e:{r:o,c:d[0],cRel:d[1],rRel:d[2]}}}function GA(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Cz(e);var a=e.read_shift(r&&r.biff==12?4:2),o=Pl(e);return{r:a,c:o[0],cRel:o[1],rRel:o[2]}}function Cz(e){var t=Pl(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Az(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function kz(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return Iz(e);var o=e.read_shift(a>=12?4:2),h=e.read_shift(2),d=(h&16384)>>14,l=(h&32768)>>15;if(h&=16383,l==1)for(;o>524287;)o-=1048576;if(d==1)for(;h>8191;)h=h-16384;return{r:o,c:h,cRel:d,rRel:l}}function Iz(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,o=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),o==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:o,rRel:a}}function Pz(e,t,r){var a=(e[e.l++]&96)>>5,o=jA(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,o]}function Mz(e,t,r){var a=(e[e.l++]&96)>>5,o=e.read_shift(2,"i"),h=8;if(r)switch(r.biff){case 5:e.l+=12,h=6;break;case 12:h=12;break}var d=jA(e,h,r);return[a,o,d]}function Rz(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function Dz(e,t,r){var a=(e[e.l++]&96)>>5,o=e.read_shift(2),h=8;if(r)switch(r.biff){case 5:e.l+=12,h=6;break;case 12:h=12;break}return e.l+=h,[a,o]}function Lz(e,t,r){var a=(e[e.l++]&96)>>5,o=Ez(e,t-1,r);return[a,o]}function Fz(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function yS(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function zz(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),o=[],h=0;h<=a;++h)o.push(e.read_shift(r&&r.biff==2?1:2));return o}function Oz(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Nz(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Bz(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Uz(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function WA(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Vz(e){return e.read_shift(2),WA(e)}function jz(e){return e.read_shift(2),WA(e)}function $z(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var o=GA(e,0,r);return[a,o]}function Gz(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var o=kz(e,0,r);return[a,o]}function Wz(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var o=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var h=GA(e,0,r);return[a,o,h]}function Hz(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var o=e.read_shift(r&&r.biff<=3?1:2);return[HO[o],ZA[o],a]}function qz(e,t,r){var a=e[e.l++],o=e.read_shift(1),h=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:Zz(e);return[o,(h[0]===0?ZA:WO)[h[1]]]}function Zz(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Xz(e,t,r){e.l+=r&&r.biff==2?3:4}function Kz(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),o=e.read_shift(r&&r.biff==2?1:2);return[a,o]}function Yz(e){return e.l++,Qd[e.read_shift(1)]}function Jz(e){return e.l++,e.read_shift(2)}function Qz(e){return e.l++,e.read_shift(1)!==0}function eO(e){return e.l++,Ch(e)}function tO(e,t,r){return e.l++,AA(e,t-1,r)}function rO(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=WF(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Qd[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Ch(e);break;case 2:r[1]=XF(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function nO(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),o=[],h=0;h!=a;++h)o.push((r.biff==12?Uc:JF)(e));return o}function iO(e,t,r){var a=0,o=0;r.biff==12?(a=e.read_shift(4),o=e.read_shift(4)):(o=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--o==0&&(o=256));for(var h=0,d=[];h!=a&&(d[h]=[]);++h)for(var l=0;l!=o;++l)d[h][l]=rO(e,r.biff);return d}function aO(e,t,r){var a=e.read_shift(1)>>>5&3,o=!r||r.biff>=8?4:2,h=e.read_shift(o);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,h]}function sO(e,t,r){if(r.biff==5)return oO(e);var a=e.read_shift(1)>>>5&3,o=e.read_shift(2),h=e.read_shift(4);return[a,o,h]}function oO(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function lO(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var o=e.read_shift(r&&r.biff==2?1:2);return[a,o]}function cO(e,t,r){var a=e.read_shift(1)>>>5&3,o=e.read_shift(r&&r.biff==2?1:2);return[a,o]}function uO(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function hO(e,t,r){var a=(e[e.l++]&96)>>5,o=e.read_shift(2),h=4;if(r)switch(r.biff){case 5:h=15;break;case 12:h=6;break}return e.l+=h,[a,o]}var fO=Js,dO=Js,pO=Js;function ep(e,t,r){return e.l+=2,[Az(e)]}function s1(e){return e.l+=6,[]}var mO=ep,gO=s1,_O=s1,yO=ep;function HA(e){return e.l+=2,[EA(e),e.read_shift(2)&1]}var xO=ep,vO=HA,wO=s1,bO=ep,SO=ep,TO=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function EO(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),o=e.read_shift(2),h=e.read_shift(2),d=TO[r>>2&31];return{ixti:t,coltype:r&3,rt:d,idx:a,c:o,C:h}}function CO(e){return e.l+=2,[e.read_shift(4)]}function AO(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function kO(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function IO(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function PO(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function MO(e){return e.l+=4,[0,0]}var xS={1:{n:"PtgExp",f:Kz},2:{n:"PtgTbl",f:pO},3:{n:"PtgAdd",f:Ln},4:{n:"PtgSub",f:Ln},5:{n:"PtgMul",f:Ln},6:{n:"PtgDiv",f:Ln},7:{n:"PtgPower",f:Ln},8:{n:"PtgConcat",f:Ln},9:{n:"PtgLt",f:Ln},10:{n:"PtgLe",f:Ln},11:{n:"PtgEq",f:Ln},12:{n:"PtgGe",f:Ln},13:{n:"PtgGt",f:Ln},14:{n:"PtgNe",f:Ln},15:{n:"PtgIsect",f:Ln},16:{n:"PtgUnion",f:Ln},17:{n:"PtgRange",f:Ln},18:{n:"PtgUplus",f:Ln},19:{n:"PtgUminus",f:Ln},20:{n:"PtgPercent",f:Ln},21:{n:"PtgParen",f:Ln},22:{n:"PtgMissArg",f:Ln},23:{n:"PtgStr",f:tO},26:{n:"PtgSheet",f:AO},27:{n:"PtgEndSheet",f:kO},28:{n:"PtgErr",f:Yz},29:{n:"PtgBool",f:Qz},30:{n:"PtgInt",f:Jz},31:{n:"PtgNum",f:eO},32:{n:"PtgArray",f:Fz},33:{n:"PtgFunc",f:Hz},34:{n:"PtgFuncVar",f:qz},35:{n:"PtgName",f:aO},36:{n:"PtgRef",f:$z},37:{n:"PtgArea",f:Pz},38:{n:"PtgMemArea",f:lO},39:{n:"PtgMemErr",f:fO},40:{n:"PtgMemNoMem",f:dO},41:{n:"PtgMemFunc",f:cO},42:{n:"PtgRefErr",f:uO},43:{n:"PtgAreaErr",f:Rz},44:{n:"PtgRefN",f:Gz},45:{n:"PtgAreaN",f:Lz},46:{n:"PtgMemAreaN",f:IO},47:{n:"PtgMemNoMemN",f:PO},57:{n:"PtgNameX",f:sO},58:{n:"PtgRef3d",f:Wz},59:{n:"PtgArea3d",f:Mz},60:{n:"PtgRefErr3d",f:hO},61:{n:"PtgAreaErr3d",f:Dz},255:{}},RO={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},DO={1:{n:"PtgElfLel",f:HA},2:{n:"PtgElfRw",f:bO},3:{n:"PtgElfCol",f:mO},6:{n:"PtgElfRwV",f:SO},7:{n:"PtgElfColV",f:yO},10:{n:"PtgElfRadical",f:xO},11:{n:"PtgElfRadicalS",f:wO},13:{n:"PtgElfColS",f:gO},15:{n:"PtgElfColSV",f:_O},16:{n:"PtgElfRadicalLel",f:vO},25:{n:"PtgList",f:EO},29:{n:"PtgSxName",f:CO},255:{}},LO={0:{n:"PtgAttrNoop",f:MO},1:{n:"PtgAttrSemi",f:Uz},2:{n:"PtgAttrIf",f:Nz},4:{n:"PtgAttrChoose",f:zz},8:{n:"PtgAttrGoto",f:Oz},16:{n:"PtgAttrSum",f:Xz},32:{n:"PtgAttrBaxcel",f:yS},33:{n:"PtgAttrBaxcel",f:yS},64:{n:"PtgAttrSpace",f:Vz},65:{n:"PtgAttrSpaceSemi",f:jz},128:{n:"PtgAttrIfError",f:Bz},255:{}};function FO(e,t,r,a){if(a.biff<8)return Js(e,t);for(var o=e.l+t,h=[],d=0;d!==r.length;++d)switch(r[d][0]){case"PtgArray":r[d][1]=iO(e,0,a),h.push(r[d][1]);break;case"PtgMemArea":r[d][2]=nO(e,r[d][1],a),h.push(r[d][2]);break;case"PtgExp":a&&a.biff==12&&(r[d][1][1]=e.read_shift(4),h.push(r[d][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[d][0]}return t=o-e.l,t!==0&&h.push(Js(e,t)),h}function zO(e,t,r){for(var a=e.l+t,o,h,d=[];a!=e.l;)t=a-e.l,h=e[e.l],o=xS[h]||xS[RO[h]],(h===24||h===25)&&(o=(h===24?DO:LO)[e[e.l+1]]),!o||!o.f?Js(e,t):d.push([o.n,o.f(e,t,r)]);return d}function OO(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],o=[],h=0;h<a.length;++h){var d=a[h];if(d)switch(d[0]){case 2:o.push('"'+d[1].replace(/"/g,'""')+'"');break;default:o.push(d[1])}else o.push("")}t.push(o.join(","))}return t.join(";")}var NO={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function BO(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function qA(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var o="";if(r.biff>8)switch(e[a[0]][0]){case 357:return o=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?o:o+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return o=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?o:o+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(h){return h.Name}).join(";;");default:return e[a[0]][0][3]?(o=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?o:o+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function vS(e,t,r){var a=qA(e,t,r);return a=="#REF"?a:BO(a,r)}function mh(e,t,r,a,o){var h=o&&o.biff||8,d={s:{c:0,r:0}},l=[],b,w,E,P=0,k=0,R,z="";if(!e[0]||!e[0][0])return"";for(var D=-1,G="",B=0,N=e[0].length;B<N;++B){var W=e[0][B];switch(W[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(b=l.pop(),w=l.pop(),D>=0){switch(e[0][D][1][0]){case 0:G=vn(" ",e[0][D][1][1]);break;case 1:G=vn("\r",e[0][D][1][1]);break;default:if(G="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][D][1][0])}w=w+G,D=-1}l.push(w+NO[W[0]]+b);break;case"PtgIsect":b=l.pop(),w=l.pop(),l.push(w+" "+b);break;case"PtgUnion":b=l.pop(),w=l.pop(),l.push(w+","+b);break;case"PtgRange":b=l.pop(),w=l.pop(),l.push(w+":"+b);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":E=hd(W[1][1],d,o),l.push(fd(E,h));break;case"PtgRefN":E=r?hd(W[1][1],r,o):W[1][1],l.push(fd(E,h));break;case"PtgRef3d":P=W[1][1],E=hd(W[1][2],d,o),z=vS(a,P,o),l.push(z+"!"+fd(E,h));break;case"PtgFunc":case"PtgFuncVar":var Q=W[1][0],_e=W[1][1];Q||(Q=0),Q&=127;var Ce=Q==0?[]:l.slice(-Q);l.length-=Q,_e==="User"&&(_e=Ce.shift()),l.push(_e+"("+Ce.join(",")+")");break;case"PtgBool":l.push(W[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(W[1]);break;case"PtgNum":l.push(String(W[1]));break;case"PtgStr":l.push('"'+W[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(W[1]);break;case"PtgAreaN":R=iS(W[1][1],r?{s:r}:d,o),l.push(Ty(R,o));break;case"PtgArea":R=iS(W[1][1],d,o),l.push(Ty(R,o));break;case"PtgArea3d":P=W[1][1],R=W[1][2],z=vS(a,P,o),l.push(z+"!"+Ty(R,o));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":k=W[1][2];var te=(a.names||[])[k-1]||(a[0]||[])[k],we=te?te.Name:"SH33TJSNAME"+String(k);we&&we.slice(0,6)=="_xlfn."&&!o.xlfn&&(we=we.slice(6)),l.push(we);break;case"PtgNameX":var Pe=W[1][1];k=W[1][2];var ke;if(o.biff<=5)Pe<0&&(Pe=-Pe),a[Pe]&&(ke=a[Pe][k]);else{var $e="";if(((a[Pe]||[])[0]||[])[0]==14849||(((a[Pe]||[])[0]||[])[0]==1025?a[Pe][k]&&a[Pe][k].itab>0&&($e=a.SheetNames[a[Pe][k].itab-1]+"!"):$e=a.SheetNames[k-1]+"!"),a[Pe]&&a[Pe][k])$e+=a[Pe][k].Name;else if(a[0]&&a[0][k])$e+=a[0][k].Name;else{var Ue=(qA(a,Pe,o)||"").split(";;");Ue[k-1]?$e=Ue[k-1]:$e+="SH33TJSERRX"}l.push($e);break}ke||(ke={Name:"SH33TJSERRY"}),l.push(ke.Name);break;case"PtgParen":var at="(",yt=")";if(D>=0){switch(G="",e[0][D][1][0]){case 2:at=vn(" ",e[0][D][1][1])+at;break;case 3:at=vn("\r",e[0][D][1][1])+at;break;case 4:yt=vn(" ",e[0][D][1][1])+yt;break;case 5:yt=vn("\r",e[0][D][1][1])+yt;break;default:if(o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][D][1][0])}D=-1}l.push(at+l.pop()+yt);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":E={c:W[1][1],r:W[1][0]};var gt={c:r.c,r:r.r};if(a.sharedf[Lr(E)]){var nt=a.sharedf[Lr(E)];l.push(mh(nt,d,gt,a,o))}else{var Rt=!1;for(b=0;b!=a.arrayf.length;++b)if(w=a.arrayf[b],!(E.c<w[0].s.c||E.c>w[0].e.c)&&!(E.r<w[0].s.r||E.r>w[0].e.r)){l.push(mh(w[1],d,gt,a,o)),Rt=!0;break}Rt||l.push(W[1])}break;case"PtgArray":l.push("{"+OO(W[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":D=B;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+W[1].idx+"[#"+W[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(W));default:throw new Error("Unrecognized Formula Token: "+String(W))}var Ke=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(o.biff!=3&&D>=0&&Ke.indexOf(e[0][B][0])==-1){W=e[0][D];var dt=!0;switch(W[1][0]){case 4:dt=!1;case 0:G=vn(" ",W[1][1]);break;case 5:dt=!1;case 1:G=vn("\r",W[1][1]);break;default:if(G="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+W[1][0])}l.push((dt?G:"")+l.pop()+(dt?"":G)),D=-1}}if(l.length>1&&o.WTF)throw new Error("bad formula stack");return l[0]}function UO(e){if(e==null){var t=et(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Pc(e);return Pc(0)}function VO(e,t,r,a,o){var h=Mc(t,r,o),d=UO(e.v),l=et(6),b=33;l.write_shift(2,b),l.write_shift(4,0);for(var w=et(e.bf.length),E=0;E<e.bf.length;++E)w[E]=e.bf[E];var P=fi([h,d,l,w]);return P}function Eg(e,t,r){var a=e.read_shift(4),o=zO(e,a,r),h=e.read_shift(4),d=h>0?FO(e,h,o,r):null;return[o,d]}var jO=Eg,Cg=Eg,$O=Eg,GO=Eg,WO={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},ZA={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},HO={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function qO(e){var t="of:="+e.replace(i1,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function ZO(e){return e.replace(/\./,"!")}var dd=typeof Map<"u";function o1(e,t,r){var a=0,o=e.length;if(r){if(dd?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var h=dd?r.get(t):r[t];a<h.length;++a)if(e[h[a]].t===t)return e.Count++,h[a]}}else for(;a<o;++a)if(e[a].t===t)return e.Count++,a;return e[o]={t},e.Count++,e.Unique++,r&&(dd?(r.has(t)||r.set(t,[]),r.get(t).push(o)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(o))),o}function Ag(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(Io=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=Wm(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=Rx(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function XA(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Nl(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],o=60,h=e.length;if(a==null&&r.ssf){for(;o<392;++o)if(r.ssf[o]==null){GC(t.z,o),r.ssf[o]=t.z,r.revssf[t.z]=a=o;break}}for(o=0;o!=h;++o)if(e[o].numFmtId===a)return o;return e[h]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},h}function XO(e,t,r){if(e&&e["!ref"]){var a=rn(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function KO(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+On(e[r])+'"/>';return t+"</mergeCells>"}function YO(e,t,r,a,o){var h=!1,d={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var b=t.SheetNames[r];try{t.Workbook&&(b=t.Workbook.Sheets[r].CodeName||b)}catch{}h=!0,d.codeName=Od(Rr(b))}if(e&&e["!outline"]){var w={summaryBelow:1,summaryRight:1};e["!outline"].above&&(w.summaryBelow=0),e["!outline"].left&&(w.summaryRight=0),l=(l||"")+kt("outlinePr",null,w)}!h&&!l||(o[o.length]=kt("sheetPr",l,d))}var JO=["objects","scenarios","selectLockedCells","selectUnlockedCells"],QO=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function e6(e){var t={sheet:1};return JO.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),QO.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=RA(e.password).toString(16).toUpperCase()),kt("sheetProtection",null,t)}function t6(e){return XA(e),kt("pageMargins",null,e)}function r6(e,t){for(var r=["<cols>"],a,o=0;o!=t.length;++o)(a=t[o])&&(r[r.length]=kt("col",null,Ag(o,a)));return r[r.length]="</cols>",r.join("")}function n6(e,t,r,a){var o=typeof e.ref=="string"?e.ref:On(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var h=r.Workbook.Names,d=Ra(o);d.s.r==d.e.r&&(d.e.r=Ra(t["!ref"]).e.r,o=On(d));for(var l=0;l<h.length;++l){var b=h[l];if(b.Name=="_xlnm._FilterDatabase"&&b.Sheet==a){b.Ref="'"+r.SheetNames[a]+"'!"+o;break}}return l==h.length&&h.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+o}),kt("autoFilter",null,{ref:o})}function i6(e,t,r,a){var o={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(o.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),kt("sheetViews",kt("sheetView",null,o),{})}function a6(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var o="",h=e.t,d=e.v;if(e.t!=="z")switch(e.t){case"b":o=e.v?"1":"0";break;case"n":o=""+e.v;break;case"e":o=Qd[e.v];break;case"d":a&&a.cellDates?o=Zi(e.v,-1).toISOString():(e=da(e),e.t="n",o=""+(e.v=fa(Zi(e.v)))),typeof e.z>"u"&&(e.z=bn[14]);break;default:o=e.v;break}var l=di("v",Rr(o)),b={r:t},w=Nl(a.cellXfs,e,a);switch(w!==0&&(b.s=w),e.t){case"n":break;case"d":b.t="d";break;case"b":b.t="b";break;case"e":b.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=di("v",""+o1(a.Strings,e.v,a.revStrings)),b.t="s";break}b.t="str";break}if(e.t!=h&&(e.t=h,e.v=d),typeof e.f=="string"&&e.f){var E=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=kt("f",Rr(e.f),E)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(b.cm=1),kt("c",l,b)}function s6(e,t,r,a){var o=[],h=[],d=rn(e["!ref"]),l="",b,w="",E=[],P=0,k=0,R=e["!rows"],z=Array.isArray(e),D={r:w},G,B=-1;for(k=d.s.c;k<=d.e.c;++k)E[k]=Pi(k);for(P=d.s.r;P<=d.e.r;++P){for(h=[],w=mi(P),k=d.s.c;k<=d.e.c;++k){b=E[k]+w;var N=z?(e[P]||[])[k]:e[b];N!==void 0&&(l=a6(N,b,e,t))!=null&&h.push(l)}(h.length>0||R&&R[P])&&(D={r:w},R&&R[P]&&(G=R[P],G.hidden&&(D.hidden=1),B=-1,G.hpx?B=Hm(G.hpx):G.hpt&&(B=G.hpt),B>-1&&(D.ht=B,D.customHeight=1),G.level&&(D.outlineLevel=G.level)),o[o.length]=kt("row",h.join(""),D))}if(R)for(;P<R.length;++P)R&&R[P]&&(D={r:P+1},G=R[P],G.hidden&&(D.hidden=1),B=-1,G.hpx?B=Hm(G.hpx):G.hpt&&(B=G.hpt),B>-1&&(D.ht=B,D.customHeight=1),G.level&&(D.outlineLevel=G.level),o[o.length]=kt("row","",D));return o.join("")}function KA(e,t,r,a){var o=[Nn,kt("worksheet",null,{xmlns:Sh[0],"xmlns:r":Yn.r})],h=r.SheetNames[e],d=0,l="",b=r.Sheets[h];b==null&&(b={});var w=b["!ref"]||"A1",E=rn(w);if(E.e.c>16383||E.e.r>1048575){if(t.WTF)throw new Error("Range "+w+" exceeds format limit A1:XFD1048576");E.e.c=Math.min(E.e.c,16383),E.e.r=Math.min(E.e.c,1048575),w=On(E)}a||(a={}),b["!comments"]=[];var P=[];YO(b,r,e,t,o),o[o.length]=kt("dimension",null,{ref:w}),o[o.length]=i6(b,t,e,r),t.sheetFormat&&(o[o.length]=kt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),b["!cols"]!=null&&b["!cols"].length>0&&(o[o.length]=r6(b,b["!cols"])),o[d=o.length]="<sheetData/>",b["!links"]=[],b["!ref"]!=null&&(l=s6(b,t),l.length>0&&(o[o.length]=l)),o.length>d+1&&(o[o.length]="</sheetData>",o[d]=o[d].replace("/>",">")),b["!protect"]&&(o[o.length]=e6(b["!protect"])),b["!autofilter"]!=null&&(o[o.length]=n6(b["!autofilter"],b,r,e)),b["!merges"]!=null&&b["!merges"].length>0&&(o[o.length]=KO(b["!merges"]));var k=-1,R,z=-1;return b["!links"].length>0&&(o[o.length]="<hyperlinks>",b["!links"].forEach(function(D){D[1].Target&&(R={ref:D[0]},D[1].Target.charAt(0)!="#"&&(z=Mr(a,-1,Rr(D[1].Target).replace(/#.*$/,""),Er.HLINK),R["r:id"]="rId"+z),(k=D[1].Target.indexOf("#"))>-1&&(R.location=Rr(D[1].Target.slice(k+1))),D[1].Tooltip&&(R.tooltip=Rr(D[1].Tooltip)),o[o.length]=kt("hyperlink",null,R))}),o[o.length]="</hyperlinks>"),delete b["!links"],b["!margins"]!=null&&(o[o.length]=t6(b["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(o[o.length]=di("ignoredErrors",kt("ignoredError",null,{numberStoredAsText:1,sqref:w}))),P.length>0&&(z=Mr(a,-1,"../drawings/drawing"+(e+1)+".xml",Er.DRAW),o[o.length]=kt("drawing",null,{"r:id":"rId"+z}),b["!drawing"]=P),b["!comments"].length>0&&(z=Mr(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Er.VML),o[o.length]=kt("legacyDrawing",null,{"r:id":"rId"+z}),b["!legacy"]=z),o.length>1&&(o[o.length]="</worksheet>",o[1]=o[1].replace("/>",">")),o.join("")}function o6(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var o=e.read_shift(2);e.l+=1;var h=e.read_shift(1);return e.l=a,h&7&&(r.level=h&7),h&16&&(r.hidden=!0),h&32&&(r.hpt=o/20),r}function l6(e,t,r){var a=et(145),o=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var h=320;o.hpx?h=Hm(o.hpx)*20:o.hpt&&(h=o.hpt*20),a.write_shift(2,h),a.write_shift(1,0);var d=0;o.level&&(d|=o.level),o.hidden&&(d|=16),(o.hpx||o.hpt)&&(d|=32),a.write_shift(1,d),a.write_shift(1,0);var l=0,b=a.l;a.l+=4;for(var w={r:e,c:0},E=0;E<16;++E)if(!(t.s.c>E+1<<10||t.e.c<E<<10)){for(var P=-1,k=-1,R=E<<10;R<E+1<<10;++R){w.c=R;var z=Array.isArray(r)?(r[w.r]||[])[w.c]:r[Lr(w)];z&&(P<0&&(P=R),k=R)}P<0||(++l,a.write_shift(4,P),a.write_shift(4,k))}var D=a.l;return a.l=b,a.write_shift(4,l),a.l=D,a.length>a.l?a.slice(0,a.l):a}function c6(e,t,r,a){var o=l6(a,r,t);(o.length>17||(t["!rows"]||[])[a])&&ht(e,0,o)}var u6=Uc,h6=Eh;function f6(){}function d6(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=SF(e),r}function p6(e,t,r){r==null&&(r=et(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var o=1;o<3;++o)r.write_shift(1,0);return jm({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),hA(e,r),r.slice(0,r.l)}function m6(e){var t=ns(e);return[t]}function g6(e,t,r){return r==null&&(r=et(8)),Oc(t,r)}function _6(e){var t=Nc(e);return[t]}function y6(e,t,r){return r==null&&(r=et(4)),Bc(t,r)}function x6(e){var t=ns(e),r=e.read_shift(1);return[t,r,"b"]}function v6(e,t,r){return r==null&&(r=et(9)),Oc(t,r),r.write_shift(1,e.v?1:0),r}function w6(e){var t=Nc(e),r=e.read_shift(1);return[t,r,"b"]}function b6(e,t,r){return r==null&&(r=et(5)),Bc(t,r),r.write_shift(1,e.v?1:0),r}function S6(e){var t=ns(e),r=e.read_shift(1);return[t,r,"e"]}function T6(e,t,r){return r==null&&(r=et(9)),Oc(t,r),r.write_shift(1,e.v),r}function E6(e){var t=Nc(e),r=e.read_shift(1);return[t,r,"e"]}function C6(e,t,r){return r==null&&(r=et(8)),Bc(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function A6(e){var t=ns(e),r=e.read_shift(4);return[t,r,"s"]}function k6(e,t,r){return r==null&&(r=et(12)),Oc(t,r),r.write_shift(4,t.v),r}function I6(e){var t=Nc(e),r=e.read_shift(4);return[t,r,"s"]}function P6(e,t,r){return r==null&&(r=et(8)),Bc(t,r),r.write_shift(4,t.v),r}function M6(e){var t=ns(e),r=Ch(e);return[t,r,"n"]}function R6(e,t,r){return r==null&&(r=et(16)),Oc(t,r),Pc(e.v,r),r}function D6(e){var t=Nc(e),r=Ch(e);return[t,r,"n"]}function L6(e,t,r){return r==null&&(r=et(12)),Bc(t,r),Pc(e.v,r),r}function F6(e){var t=ns(e),r=fA(e);return[t,r,"n"]}function z6(e,t,r){return r==null&&(r=et(12)),Oc(t,r),dA(e.v,r),r}function O6(e){var t=Nc(e),r=fA(e);return[t,r,"n"]}function N6(e,t,r){return r==null&&(r=et(8)),Bc(t,r),dA(e.v,r),r}function B6(e){var t=ns(e),r=Qv(e);return[t,r,"is"]}function U6(e){var t=ns(e),r=Mi(e);return[t,r,"str"]}function V6(e,t,r){return r==null&&(r=et(12+4*e.v.length)),Oc(t,r),Qn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function j6(e){var t=Nc(e),r=Mi(e);return[t,r,"str"]}function $6(e,t,r){return r==null&&(r=et(8+4*e.v.length)),Bc(t,r),Qn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function G6(e,t,r){var a=e.l+t,o=ns(e);o.r=r["!row"];var h=e.read_shift(1),d=[o,h,"b"];if(r.cellFormula){e.l+=2;var l=Cg(e,a-e.l,r);d[3]=mh(l,null,o,r.supbooks,r)}else e.l=a;return d}function W6(e,t,r){var a=e.l+t,o=ns(e);o.r=r["!row"];var h=e.read_shift(1),d=[o,h,"e"];if(r.cellFormula){e.l+=2;var l=Cg(e,a-e.l,r);d[3]=mh(l,null,o,r.supbooks,r)}else e.l=a;return d}function H6(e,t,r){var a=e.l+t,o=ns(e);o.r=r["!row"];var h=Ch(e),d=[o,h,"n"];if(r.cellFormula){e.l+=2;var l=Cg(e,a-e.l,r);d[3]=mh(l,null,o,r.supbooks,r)}else e.l=a;return d}function q6(e,t,r){var a=e.l+t,o=ns(e);o.r=r["!row"];var h=Mi(e),d=[o,h,"str"];if(r.cellFormula){e.l+=2;var l=Cg(e,a-e.l,r);d[3]=mh(l,null,o,r.supbooks,r)}else e.l=a;return d}var Z6=Uc,X6=Eh;function K6(e,t){return t==null&&(t=et(4)),t.write_shift(4,e),t}function Y6(e,t){var r=e.l+t,a=Uc(e),o=e1(e),h=Mi(e),d=Mi(e),l=Mi(e);e.l=r;var b={rfx:a,relId:o,loc:h,display:l};return d&&(b.Tooltip=d),b}function J6(e,t){var r=et(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Eh({s:Jn(e[0]),e:Jn(e[0])},r),t1("rId"+t,r);var a=e[1].Target.indexOf("#"),o=a==-1?"":e[1].Target.slice(a+1);return Qn(o||"",r),Qn(e[1].Tooltip||"",r),Qn("",r),r.slice(0,r.l)}function Q6(){}function eN(e,t,r){var a=e.l+t,o=pA(e),h=e.read_shift(1),d=[o];if(d[2]=h,r.cellFormula){var l=jO(e,a-e.l,r);d[1]=l}else e.l=a;return d}function tN(e,t,r){var a=e.l+t,o=Uc(e),h=[o];if(r.cellFormula){var d=GO(e,a-e.l,r);h[1]=d,e.l=a}else e.l=a;return h}function rN(e,t,r){r==null&&(r=et(18));var a=Ag(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var o=0;return t.hidden&&(o|=1),typeof a.width=="number"&&(o|=2),t.level&&(o|=t.level<<8),r.write_shift(2,o),r}var YA=["left","right","top","bottom","header","footer"];function nN(e){var t={};return YA.forEach(function(r){t[r]=Ch(e)}),t}function iN(e,t){return t==null&&(t=et(6*8)),XA(e),YA.forEach(function(r){Pc(e[r],t)}),t}function aN(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function sN(e,t,r){r==null&&(r=et(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function oN(e){var t=et(24);return t.write_shift(4,4),t.write_shift(4,1),Eh(e,t),t}function lN(e,t){return t==null&&(t=et(16*4+2)),t.write_shift(2,e.password?RA(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function cN(){}function uN(){}function hN(e,t,r,a,o,h,d){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=da(t),t.z=t.z||bn[14],t.v=fa(Zi(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var b={r,c:a};switch(b.s=Nl(o.cellXfs,t,o),t.l&&h["!links"].push([Lr(b),t.l]),t.c&&h["!comments"].push([Lr(b),t.c]),t.t){case"s":case"str":return o.bookSST?(l=o1(o.Strings,t.v,o.revStrings),b.t="s",b.v=l,d?ht(e,18,P6(t,b)):ht(e,7,k6(t,b))):(b.t="str",d?ht(e,17,$6(t,b)):ht(e,6,V6(t,b))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?d?ht(e,13,N6(t,b)):ht(e,2,z6(t,b)):d?ht(e,16,L6(t,b)):ht(e,5,R6(t,b)),!0;case"b":return b.t="b",d?ht(e,15,b6(t,b)):ht(e,4,v6(t,b)),!0;case"e":return b.t="e",d?ht(e,14,C6(t,b)):ht(e,3,T6(t,b)),!0}return d?ht(e,12,y6(t,b)):ht(e,1,g6(t,b)),!0}function fN(e,t,r,a){var o=rn(t["!ref"]||"A1"),h,d="",l=[];ht(e,145);var b=Array.isArray(t),w=o.e.r;t["!rows"]&&(w=Math.max(o.e.r,t["!rows"].length-1));for(var E=o.s.r;E<=w;++E){d=mi(E),c6(e,t,o,E);var P=!1;if(E<=o.e.r)for(var k=o.s.c;k<=o.e.c;++k){E===o.s.r&&(l[k]=Pi(k)),h=l[k]+d;var R=b?(t[E]||[])[k]:t[h];if(!R){P=!1;continue}P=hN(e,R,E,k,a,t,P)}}ht(e,146)}function dN(e,t){!t||!t["!merges"]||(ht(e,177,K6(t["!merges"].length)),t["!merges"].forEach(function(r){ht(e,176,X6(r))}),ht(e,178))}function pN(e,t){!t||!t["!cols"]||(ht(e,390),t["!cols"].forEach(function(r,a){r&&ht(e,60,rN(a,r))}),ht(e,391))}function mN(e,t){!t||!t["!ref"]||(ht(e,648),ht(e,649,oN(rn(t["!ref"]))),ht(e,650))}function gN(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var o=Mr(r,-1,a[1].Target.replace(/#.*$/,""),Er.HLINK);ht(e,494,J6(a,o))}}),delete t["!links"]}function _N(e,t,r,a){if(t["!comments"].length>0){var o=Mr(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Er.VML);ht(e,551,t1("rId"+o)),t["!legacy"]=o}}function yN(e,t,r,a){if(t["!autofilter"]){var o=t["!autofilter"],h=typeof o.ref=="string"?o.ref:On(o.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var d=r.Workbook.Names,l=Ra(h);l.s.r==l.e.r&&(l.e.r=Ra(t["!ref"]).e.r,h=On(l));for(var b=0;b<d.length;++b){var w=d[b];if(w.Name=="_xlnm._FilterDatabase"&&w.Sheet==a){w.Ref="'"+r.SheetNames[a]+"'!"+h;break}}b==d.length&&d.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+h}),ht(e,161,Eh(rn(h))),ht(e,162)}}function xN(e,t,r){ht(e,133),ht(e,137,sN(t,r)),ht(e,138),ht(e,134)}function vN(e,t){t["!protect"]&&ht(e,535,lN(t["!protect"]))}function wN(e,t,r,a){var o=ha(),h=r.SheetNames[e],d=r.Sheets[h]||{},l=h;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var b=rn(d["!ref"]||"A1");if(b.e.c>16383||b.e.r>1048575){if(t.WTF)throw new Error("Range "+(d["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");b.e.c=Math.min(b.e.c,16383),b.e.r=Math.min(b.e.c,1048575)}return d["!links"]=[],d["!comments"]=[],ht(o,129),(r.vbaraw||d["!outline"])&&ht(o,147,p6(l,d["!outline"])),ht(o,148,h6(b)),xN(o,d,r.Workbook),pN(o,d),fN(o,d,e,t),vN(o,d),yN(o,d,r,e),dN(o,d),gN(o,d,a),d["!margins"]&&ht(o,476,iN(d["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&mN(o,d),_N(o,d,e,a),ht(o,130),o.end()}function bN(e,t){e.l+=10;var r=Mi(e);return{name:r}}var SN=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function TN(e){return!e.Workbook||!e.Workbook.WBProps?"false":tF(e.Workbook.WBProps.date1904)?"true":"false"}var EN="][*?/\\".split("");function JA(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return EN.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function CN(e,t,r){e.forEach(function(a,o){JA(a);for(var h=0;h<o;++h)if(a==e[h])throw new Error("Duplicate Sheet Name: "+a);if(r){var d=t&&t[o]&&t[o].CodeName||a;if(d.charCodeAt(0)==95&&d.length>22)throw new Error("Bad Code Name: Worksheet"+d)}})}function AN(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];CN(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)XO(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function QA(e){var t=[Nn];t[t.length]=kt("workbook",null,{xmlns:Sh[0],"xmlns:r":Yn.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(SN.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=kt("workbookPr",null,a);var o=e.Workbook&&e.Workbook.Sheets||[],h=0;if(o&&o[0]&&o[0].Hidden){for(t[t.length]="<bookViews>",h=0;h!=e.SheetNames.length&&!(!o[h]||!o[h].Hidden);++h);h==e.SheetNames.length&&(h=0),t[t.length]='<workbookView firstSheet="'+h+'" activeTab="'+h+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",h=0;h!=e.SheetNames.length;++h){var d={name:Rr(e.SheetNames[h].slice(0,31))};if(d.sheetId=""+(h+1),d["r:id"]="rId"+(h+1),o[h])switch(o[h].Hidden){case 1:d.state="hidden";break;case 2:d.state="veryHidden";break}t[t.length]=kt("sheet",null,d)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var b={name:l.Name};l.Comment&&(b.comment=l.Comment),l.Sheet!=null&&(b.localSheetId=""+l.Sheet),l.Hidden&&(b.hidden="1"),l.Ref&&(t[t.length]=kt("definedName",Rr(l.Ref),b))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function kN(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Mx(e),r.name=Mi(e),r}function IN(e,t){return t||(t=et(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),t1(e.strRelID,t),Qn(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function PN(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var o=t>8?Mi(e):"";return o.length>0&&(r.CodeName=o),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function MN(e,t){t||(t=et(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),hA(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function RN(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var o=e.read_shift(4),h=TF(e),d=$O(e,0,r),l=e1(e);e.l=a;var b={Name:h,Ptg:d};return o<268435455&&(b.Sheet=o),l&&(b.Comment=l),b}function DN(e,t){ht(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,o={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};ht(e,156,IN(o))}ht(e,144)}function LN(e,t){t||(t=et(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Qn("SheetJS",t),Qn(Lm.version,t),Qn(Lm.version,t),Qn("7262",t),t.length>t.l?t.slice(0,t.l):t}function FN(e,t){t||(t=et(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function zN(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,o=-1,h=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&o==-1?o=a:r[a].Hidden==1&&h==-1&&(h=a);h>o||(ht(e,135),ht(e,158,FN(o)),ht(e,136))}}function ON(e,t){var r=ha();return ht(r,131),ht(r,128,LN()),ht(r,153,MN(e.Workbook&&e.Workbook.WBProps||null)),zN(r,e),DN(r,e),ht(r,132),r.end()}function NN(e,t,r){return(t.slice(-4)===".bin"?ON:QA)(e)}function BN(e,t,r,a,o){return(t.slice(-4)===".bin"?wN:KA)(e,r,a,o)}function UN(e,t,r){return(t.slice(-4)===".bin"?iz:FA)(e,r)}function VN(e,t,r){return(t.slice(-4)===".bin"?M5:MA)(e,r)}function jN(e,t,r){return(t.slice(-4)===".bin"?vz:UA)(e)}function $N(e){return(e.slice(-4)===".bin"?fz:NA)()}function GN(e,t){var r=[];return e.Props&&r.push(UF(e.Props,t)),e.Custprops&&r.push(VF(e.Props,e.Custprops)),r.join("")}function WN(){return""}function HN(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,o){var h=[];h.push(kt("NumberFormat",null,{"ss:Format":Rr(bn[a.numFmtId])}));var d={"ss:ID":"s"+(21+o)};r.push(kt("Style",h.join(""),d))}),kt("Styles",r.join(""))}function ek(e){return kt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+a1(e.Ref,{r:0,c:0})})}function qN(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var o=t[a];o.Sheet==null&&(o.Name.match(/^_xlfn\./)||r.push(ek(o)))}return kt("Names",r.join(""))}function ZN(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var o=a.Workbook.Names,h=[],d=0;d<o.length;++d){var l=o[d];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||h.push(ek(l)))}return h.join("")}function XN(e,t,r,a){if(!e)return"";var o=[];if(e["!margins"]&&(o.push("<PageSetup>"),e["!margins"].header&&o.push(kt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&o.push(kt("Footer",null,{"x:Margin":e["!margins"].footer})),o.push(kt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),o.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)o.push(kt("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var h=0;h<r&&!(a.Workbook.Sheets[h]&&!a.Workbook.Sheets[h].Hidden);++h);h==r&&o.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&o.push("<DisplayRightToLeft/>"),e["!protect"]&&(o.push(di("ProtectContents","True")),e["!protect"].objects&&o.push(di("ProtectObjects","True")),e["!protect"].scenarios&&o.push(di("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?o.push(di("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&o.push(di("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(d){e["!protect"][d[0]]&&o.push("<"+d[1]+"/>")})),o.length==0?"":kt("WorksheetOptions",o.join(""),{xmlns:Ea.x})}function KN(e){return e.map(function(t){var r=eF(t.t||""),a=kt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return kt("Comment",a,{"ss:Author":t.a})}).join("")}function YN(e,t,r,a,o,h,d){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Rr(a1(e.f,d))),e.F&&e.F.slice(0,t.length)==t){var b=Jn(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(b.r==d.r?"":"["+(b.r-d.r)+"]")+"C"+(b.c==d.c?"":"["+(b.c-d.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Rr(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Rr(e.l.Tooltip))),r["!merges"])for(var w=r["!merges"],E=0;E!=w.length;++E)w[E].s.c!=d.c||w[E].s.r!=d.r||(w[E].e.c>w[E].s.c&&(l["ss:MergeAcross"]=w[E].e.c-w[E].s.c),w[E].e.r>w[E].s.r&&(l["ss:MergeDown"]=w[E].e.r-w[E].s.r));var P="",k="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":P="Number",k=String(e.v);break;case"b":P="Boolean",k=e.v?"1":"0";break;case"e":P="Error",k=Qd[e.v];break;case"d":P="DateTime",k=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||bn[14]);break;case"s":P="String",k=QL(e.v||"");break}var R=Nl(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+R),l["ss:Index"]=d.c+1;var z=e.v!=null?k:"",D=e.t=="z"?"":'<Data ss:Type="'+P+'">'+z+"</Data>";return(e.c||[]).length>0&&(D+=KN(e.c)),kt("Cell",D,l)}function JN(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=LA(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function QN(e,t,r,a){if(!e["!ref"])return"";var o=rn(e["!ref"]),h=e["!merges"]||[],d=0,l=[];e["!cols"]&&e["!cols"].forEach(function(G,B){n1(G);var N=!!G.width,W=Ag(B,G),Q={"ss:Index":B+1};N&&(Q["ss:Width"]=Gm(W.width)),G.hidden&&(Q["ss:Hidden"]="1"),l.push(kt("Column",null,Q))});for(var b=Array.isArray(e),w=o.s.r;w<=o.e.r;++w){for(var E=[JN(w,(e["!rows"]||[])[w])],P=o.s.c;P<=o.e.c;++P){var k=!1;for(d=0;d!=h.length;++d)if(!(h[d].s.c>P)&&!(h[d].s.r>w)&&!(h[d].e.c<P)&&!(h[d].e.r<w)){(h[d].s.c!=P||h[d].s.r!=w)&&(k=!0);break}if(!k){var R={r:w,c:P},z=Lr(R),D=b?(e[w]||[])[P]:e[z];E.push(YN(D,z,e,t,r,a,R))}}E.push("</Row>"),E.length>2&&l.push(E.join(""))}return l.join("")}function e8(e,t,r){var a=[],o=r.SheetNames[e],h=r.Sheets[o],d=h?ZN(h,t,e,r):"";return d.length>0&&a.push("<Names>"+d+"</Names>"),d=h?QN(h,t,e,r):"",d.length>0&&a.push("<Table>"+d+"</Table>"),a.push(XN(h,t,e,r)),a.join("")}function t8(e,t){t||(t={}),e.SSF||(e.SSF=da(bn)),e.SSF&&(bg(),wg(e.SSF),t.revssf=Sg(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Nl(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(GN(e,t)),r.push(WN()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(kt("Worksheet",e8(a,t,e),{"ss:Name":Rr(e.SheetNames[a])}));return r[2]=HN(e,t),r[3]=qN(e),Nn+kt("Workbook",r.join(""),{xmlns:Ea.ss,"xmlns:o":Ea.o,"xmlns:x":Ea.x,"xmlns:ss":Ea.ss,"xmlns:dt":Ea.dt,"xmlns:html":Ea.html})}var Ay={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function r8(e,t){var r=[],a=[],o=[],h=0,d,l=qb(sS,"n"),b=qb(oS,"n");if(e.Props)for(d=_i(e.Props),h=0;h<d.length;++h)(Object.prototype.hasOwnProperty.call(l,d[h])?r:Object.prototype.hasOwnProperty.call(b,d[h])?a:o).push([d[h],e.Props[d[h]]]);if(e.Custprops)for(d=_i(e.Custprops),h=0;h<d.length;++h)Object.prototype.hasOwnProperty.call(e.Props||{},d[h])||(Object.prototype.hasOwnProperty.call(l,d[h])?r:Object.prototype.hasOwnProperty.call(b,d[h])?a:o).push([d[h],e.Custprops[d[h]]]);var w=[];for(h=0;h<o.length;++h)TA.indexOf(o[h][0])>-1||wA.indexOf(o[h][0])>-1||o[h][1]!=null&&w.push(o[h]);a.length&&Br.utils.cfb_add(t,"/SummaryInformation",fS(a,Ay.SI,b,oS)),(r.length||w.length)&&Br.utils.cfb_add(t,"/DocumentSummaryInformation",fS(r,Ay.DSI,l,sS,w.length?w:null,Ay.UDI))}function n8(e,t){var r=t||{},a=Br.utils.cfb_new({root:"R"}),o="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":o="/Workbook",r.biff=8;break;case"biff5":o="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Br.utils.cfb_add(a,o,tk(e,r)),r.biff==8&&(e.Props||e.Custprops)&&r8(e,a),r.biff==8&&e.vbaraw&&wz(a,Br.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var i8={0:{f:o6},1:{f:m6},2:{f:F6},3:{f:S6},4:{f:x6},5:{f:M6},6:{f:U6},7:{f:A6},8:{f:q6},9:{f:H6},10:{f:G6},11:{f:W6},12:{f:_6},13:{f:O6},14:{f:E6},15:{f:w6},16:{f:D6},17:{f:j6},18:{f:I6},19:{f:Qv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:RN},40:{},42:{},43:{f:U5},44:{f:N5},45:{f:$5},46:{f:W5},47:{f:G5},48:{},49:{f:_F},50:{},51:{f:oz},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:y5},62:{f:B6},63:{f:dz},64:{f:cN},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Js,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:aN},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:d6},148:{f:u6,p:16},151:{f:Q6},152:{},153:{f:PN},154:{},155:{},156:{f:kN},157:{},158:{},159:{T:1,f:k5},160:{T:-1},161:{T:1,f:Uc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Z6},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:az},336:{T:-1},337:{f:uz,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Mx},357:{},358:{},359:{},360:{T:1},361:{},362:{f:f5},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:eN},427:{f:tN},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:nN},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:f6},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Y6},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Mx},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:yz},633:{T:1},634:{T:-1},635:{T:1,f:gz},636:{T:-1},637:{f:wF},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:bN},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:uN},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Mt(e,t,r,a){var o=t;if(!isNaN(o)){var h=a||(r||[]).length||0,d=e.next(4);d.write_shift(2,o),d.write_shift(2,h),h>0&&Kv(r)&&e.push(r)}}function a8(e,t,r,a){var o=(r||[]).length||0;if(o<=8224)return Mt(e,t,r,o);var h=t;if(!isNaN(h)){for(var d=r.parts||[],l=0,b=0,w=0;w+(d[l]||8224)<=8224;)w+=d[l]||8224,l++;var E=e.next(4);for(E.write_shift(2,h),E.write_shift(2,w),e.push(r.slice(b,b+w)),b+=w;b<o;){for(E=e.next(4),E.write_shift(2,60),w=0;w+(d[l]||8224)<=8224;)w+=d[l]||8224,l++;E.write_shift(2,w),e.push(r.slice(b,b+w)),b+=w}}}function tp(e,t,r){return e||(e=et(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function s8(e,t,r,a){var o=et(9);return tp(o,e,t),CA(r,a||"b",o),o}function o8(e,t,r){var a=et(8+2*r.length);return tp(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function l8(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var o=t.t=="d"?fa(Zi(t.v)):t.v;o==(o|0)&&o>=0&&o<65536?Mt(e,2,b5(r,a,o)):Mt(e,3,w5(r,a,o));return;case"b":case"e":Mt(e,5,s8(r,a,t.v,t.t));return;case"s":case"str":Mt(e,4,o8(r,a,(t.v||"").slice(0,255)));return}Mt(e,1,tp(null,r,a))}function c8(e,t,r,a){var o=Array.isArray(t),h=rn(t["!ref"]||"A1"),d,l="",b=[];if(h.e.c>255||h.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,16383),d=On(h)}for(var w=h.s.r;w<=h.e.r;++w){l=mi(w);for(var E=h.s.c;E<=h.e.c;++E){w===h.s.r&&(b[E]=Pi(E)),d=b[E]+l;var P=o?(t[w]||[])[E]:t[d];P&&l8(e,P,w,E)}}}function u8(e,t){for(var r=t||{},a=ha(),o=0,h=0;h<e.SheetNames.length;++h)e.SheetNames[h]==r.sheet&&(o=h);if(o==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Mt(a,r.biff==4?1033:r.biff==3?521:9,r1(e,16,r)),c8(a,e.Sheets[e.SheetNames[o]],o,r),Mt(a,10),a.end()}function h8(e,t,r){Mt(e,49,i5({sz:12,name:"Arial"},r))}function f8(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)t[o]!=null&&Mt(e,1054,o5(o,t[o],r))})}function d8(e,t){var r=et(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Mt(e,2151,r),r=et(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),IA(rn(t["!ref"]||"A1"),r),r.write_shift(4,4),Mt(e,2152,r)}function p8(e,t){for(var r=0;r<16;++r)Mt(e,224,pS({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){Mt(e,224,pS(a,0,t))})}function m8(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];Mt(e,440,m5(a)),a[1].Tooltip&&Mt(e,2048,g5(a))}delete t["!links"]}function g8(e,t){if(t){var r=0;t.forEach(function(a,o){++r<=256&&a&&Mt(e,125,x5(Ag(o,a),o))})}}function _8(e,t,r,a,o){var h=16+Nl(o.cellXfs,t,o);if(t.v==null&&!t.bf){Mt(e,513,Mc(r,a,h));return}if(t.bf)Mt(e,6,VO(t,r,a,o,h));else switch(t.t){case"d":case"n":var d=t.t=="d"?fa(Zi(t.v)):t.v;Mt(e,515,h5(r,a,d,h));break;case"b":case"e":Mt(e,517,u5(r,a,t.v,h,o,t.t));break;case"s":case"str":if(o.bookSST){var l=o1(o.Strings,t.v,o.revStrings);Mt(e,253,a5(r,a,l,h))}else Mt(e,516,s5(r,a,(t.v||"").slice(0,255),h,o));break;default:Mt(e,513,Mc(r,a,h))}}function y8(e,t,r){var a=ha(),o=r.SheetNames[e],h=r.Sheets[o]||{},d=(r||{}).Workbook||{},l=(d.Sheets||[])[e]||{},b=Array.isArray(h),w=t.biff==8,E,P="",k=[],R=rn(h["!ref"]||"A1"),z=w?65536:16384;if(R.e.c>255||R.e.r>=z){if(t.WTF)throw new Error("Range "+(h["!ref"]||"A1")+" exceeds format limit A1:IV16384");R.e.c=Math.min(R.e.c,255),R.e.r=Math.min(R.e.c,z-1)}Mt(a,2057,r1(r,16,t)),Mt(a,13,Xa(1)),Mt(a,12,Xa(100)),Mt(a,15,Hi(!0)),Mt(a,17,Hi(!1)),Mt(a,16,Pc(.001)),Mt(a,95,Hi(!0)),Mt(a,42,Hi(!1)),Mt(a,43,Hi(!1)),Mt(a,130,Xa(1)),Mt(a,128,c5()),Mt(a,131,Hi(!1)),Mt(a,132,Hi(!1)),w&&g8(a,h["!cols"]),Mt(a,512,l5(R,t)),w&&(h["!links"]=[]);for(var D=R.s.r;D<=R.e.r;++D){P=mi(D);for(var G=R.s.c;G<=R.e.c;++G){D===R.s.r&&(k[G]=Pi(G)),E=k[G]+P;var B=b?(h[D]||[])[G]:h[E];B&&(_8(a,B,D,G,t),w&&B.l&&h["!links"].push([E,B.l]))}}var N=l.CodeName||l.name||o;return w&&Mt(a,574,n5((d.Views||[])[0])),w&&(h["!merges"]||[]).length&&Mt(a,229,p5(h["!merges"])),w&&m8(a,h),Mt(a,442,kA(N)),w&&d8(a,h),Mt(a,10),a.end()}function x8(e,t,r){var a=ha(),o=(e||{}).Workbook||{},h=o.Sheets||[],d=o.WBProps||{},l=r.biff==8,b=r.biff==5;if(Mt(a,2057,r1(e,5,r)),r.bookType=="xla"&&Mt(a,135),Mt(a,225,l?Xa(1200):null),Mt(a,193,GF(2)),b&&Mt(a,191),b&&Mt(a,192),Mt(a,226),Mt(a,92,QF("SheetJS",r)),Mt(a,66,Xa(l?1200:1252)),l&&Mt(a,353,Xa(0)),l&&Mt(a,448),Mt(a,317,v5(e.SheetNames.length)),l&&e.vbaraw&&Mt(a,211),l&&e.vbaraw){var w=d.CodeName||"ThisWorkbook";Mt(a,442,kA(w))}Mt(a,156,Xa(17)),Mt(a,25,Hi(!1)),Mt(a,18,Hi(!1)),Mt(a,19,Xa(0)),l&&Mt(a,431,Hi(!1)),l&&Mt(a,444,Xa(0)),Mt(a,61,r5()),Mt(a,64,Hi(!1)),Mt(a,141,Xa(0)),Mt(a,34,Hi(TN(e)=="true")),Mt(a,14,Hi(!0)),l&&Mt(a,439,Hi(!1)),Mt(a,218,Xa(0)),h8(a,e,r),f8(a,e.SSF,r),p8(a,r),l&&Mt(a,352,Hi(!1));var E=a.end(),P=ha();l&&Mt(P,140,_5()),l&&r.Strings&&a8(P,252,t5(r.Strings)),Mt(P,10);var k=P.end(),R=ha(),z=0,D=0;for(D=0;D<e.SheetNames.length;++D)z+=(l?12:11)+(l?2:1)*e.SheetNames[D].length;var G=E.length+z+k.length;for(D=0;D<e.SheetNames.length;++D){var B=h[D]||{};Mt(R,133,e5({pos:G,hs:B.Hidden||0,dt:0,name:e.SheetNames[D]},r)),G+=t[D].length}var N=R.end();if(z!=N.length)throw new Error("BS8 "+z+" != "+N.length);var W=[];return E.length&&W.push(E),N.length&&W.push(N),k.length&&W.push(k),fi(W)}function v8(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=da(bn)),e&&e.SSF&&(bg(),wg(e.SSF),r.revssf=Sg(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,l1(r),r.cellXfs=[],Nl(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var o=0;o<e.SheetNames.length;++o)a[a.length]=y8(o,r,e);return a.unshift(x8(e,a,r)),fi(a)}function tk(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var o=Ra(a["!ref"]);o.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var h=t||{};switch(h.biff||2){case 8:case 5:return v8(e,t);case 4:case 3:case 2:return u8(e,t)}throw new Error("invalid type "+h.bookType+" for BIFF")}function w8(e,t,r,a){for(var o=e["!merges"]||[],h=[],d=t.s.c;d<=t.e.c;++d){for(var l=0,b=0,w=0;w<o.length;++w)if(!(o[w].s.r>r||o[w].s.c>d)&&!(o[w].e.r<r||o[w].e.c<d)){if(o[w].s.r<r||o[w].s.c<d){l=-1;break}l=o[w].e.r-o[w].s.r+1,b=o[w].e.c-o[w].s.c+1;break}if(!(l<0)){var E=Lr({r,c:d}),P=a.dense?(e[r]||[])[d]:e[E],k=P&&P.v!=null&&(P.h||JL(P.w||(Fo(P),P.w)||""))||"",R={};l>1&&(R.rowspan=l),b>1&&(R.colspan=b),a.editable?k='<span contenteditable="true">'+k+"</span>":P&&(R["data-t"]=P&&P.t||"z",P.v!=null&&(R["data-v"]=P.v),P.z!=null&&(R["data-z"]=P.z),P.l&&(P.l.Target||"#").charAt(0)!="#"&&(k='<a href="'+P.l.Target+'">'+k+"</a>")),R.id=(a.id||"sjs")+"-"+E,h.push(kt("td",k,R))}}var z="<tr>";return z+h.join("")+"</tr>"}var b8='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',S8="</body></html>";function T8(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function rk(e,t){var r=t||{},a=r.header!=null?r.header:b8,o=r.footer!=null?r.footer:S8,h=[a],d=Ra(e["!ref"]);r.dense=Array.isArray(e),h.push(T8(e,d,r));for(var l=d.s.r;l<=d.e.r;++l)h.push(w8(e,d,l,r));return h.push("</table>"+o),h.join("")}function nk(e,t,r){var a=r||{},o=0,h=0;if(a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var d=typeof a.origin=="string"?Jn(a.origin):a.origin;o=d.r,h=d.c}var l=t.getElementsByTagName("tr"),b=Math.min(a.sheetRows||1e7,l.length),w={s:{r:0,c:0},e:{r:o,c:h}};if(e["!ref"]){var E=Ra(e["!ref"]);w.s.r=Math.min(w.s.r,E.s.r),w.s.c=Math.min(w.s.c,E.s.c),w.e.r=Math.max(w.e.r,E.e.r),w.e.c=Math.max(w.e.c,E.e.c),o==-1&&(w.e.r=o=E.e.r+1)}var P=[],k=0,R=e["!rows"]||(e["!rows"]=[]),z=0,D=0,G=0,B=0,N=0,W=0;for(e["!cols"]||(e["!cols"]=[]);z<l.length&&D<b;++z){var Q=l[z];if(wS(Q)){if(a.display)continue;R[D]={hidden:!0}}var _e=Q.children;for(G=B=0;G<_e.length;++G){var Ce=_e[G];if(!(a.display&&wS(Ce))){var te=Ce.hasAttribute("data-v")?Ce.getAttribute("data-v"):Ce.hasAttribute("v")?Ce.getAttribute("v"):rF(Ce.innerHTML),we=Ce.getAttribute("data-z")||Ce.getAttribute("z");for(k=0;k<P.length;++k){var Pe=P[k];Pe.s.c==B+h&&Pe.s.r<D+o&&D+o<=Pe.e.r&&(B=Pe.e.c+1-h,k=-1)}W=+Ce.getAttribute("colspan")||1,((N=+Ce.getAttribute("rowspan")||1)>1||W>1)&&P.push({s:{r:D+o,c:B+h},e:{r:D+o+(N||1)-1,c:B+h+(W||1)-1}});var ke={t:"s",v:te},$e=Ce.getAttribute("data-t")||Ce.getAttribute("t")||"";te!=null&&(te.length==0?ke.t=$e||"z":a.raw||te.trim().length==0||$e=="s"||(te==="TRUE"?ke={t:"b",v:!0}:te==="FALSE"?ke={t:"b",v:!1}:isNaN(ko(te))?isNaN(zd(te).getDate())||(ke={t:"d",v:Zi(te)},a.cellDates||(ke={t:"n",v:fa(ke.v)}),ke.z=a.dateNF||bn[14]):ke={t:"n",v:ko(te)})),ke.z===void 0&&we!=null&&(ke.z=we);var Ue="",at=Ce.getElementsByTagName("A");if(at&&at.length)for(var yt=0;yt<at.length&&!(at[yt].hasAttribute("href")&&(Ue=at[yt].getAttribute("href"),Ue.charAt(0)!="#"));++yt);Ue&&Ue.charAt(0)!="#"&&(ke.l={Target:Ue}),a.dense?(e[D+o]||(e[D+o]=[]),e[D+o][B+h]=ke):e[Lr({c:B+h,r:D+o})]=ke,w.e.c<B+h&&(w.e.c=B+h),B+=W}}++D}return P.length&&(e["!merges"]=(e["!merges"]||[]).concat(P)),w.e.r=Math.max(w.e.r,D-1+o),e["!ref"]=On(w),D>=b&&(e["!fullref"]=On((w.e.r=l.length-z+D-1+o,w))),e}function ik(e,t){var r=t||{},a=r.dense?[]:{};return nk(a,e,t)}function E8(e,t){return zc(ik(e,t),t)}function wS(e){var t="",r=C8(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function C8(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var A8=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Nd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Nn+t}}(),bS=function(){var e=function(h){return Rr(h).replace(/  +/g,function(d){return'<text:s text:c="'+d.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(h,d,l){var b=[];b.push('      <table:table table:name="'+Rr(d.SheetNames[l])+`" table:style-name="ta1">
`);var w=0,E=0,P=Ra(h["!ref"]||"A1"),k=h["!merges"]||[],R=0,z=Array.isArray(h);if(h["!cols"])for(E=0;E<=P.e.c;++E)b.push("        <table:table-column"+(h["!cols"][E]?' table:style-name="co'+h["!cols"][E].ods+'"':"")+`></table:table-column>
`);var D="",G=h["!rows"]||[];for(w=0;w<P.s.r;++w)D=G[w]?' table:style-name="ro'+G[w].ods+'"':"",b.push("        <table:table-row"+D+`></table:table-row>
`);for(;w<=P.e.r;++w){for(D=G[w]?' table:style-name="ro'+G[w].ods+'"':"",b.push("        <table:table-row"+D+`>
`),E=0;E<P.s.c;++E)b.push(t);for(;E<=P.e.c;++E){var B=!1,N={},W="";for(R=0;R!=k.length;++R)if(!(k[R].s.c>E)&&!(k[R].s.r>w)&&!(k[R].e.c<E)&&!(k[R].e.r<w)){(k[R].s.c!=E||k[R].s.r!=w)&&(B=!0),N["table:number-columns-spanned"]=k[R].e.c-k[R].s.c+1,N["table:number-rows-spanned"]=k[R].e.r-k[R].s.r+1;break}if(B){b.push(r);continue}var Q=Lr({r:w,c:E}),_e=z?(h[w]||[])[E]:h[Q];if(_e&&_e.f&&(N["table:formula"]=Rr(qO(_e.f)),_e.F&&_e.F.slice(0,Q.length)==Q)){var Ce=Ra(_e.F);N["table:number-matrix-columns-spanned"]=Ce.e.c-Ce.s.c+1,N["table:number-matrix-rows-spanned"]=Ce.e.r-Ce.s.r+1}if(!_e){b.push(t);continue}switch(_e.t){case"b":W=_e.v?"TRUE":"FALSE",N["office:value-type"]="boolean",N["office:boolean-value"]=_e.v?"true":"false";break;case"n":W=_e.w||String(_e.v||0),N["office:value-type"]="float",N["office:value"]=_e.v||0;break;case"s":case"str":W=_e.v==null?"":_e.v,N["office:value-type"]="string";break;case"d":W=_e.w||Zi(_e.v).toISOString(),N["office:value-type"]="date",N["office:date-value"]=Zi(_e.v).toISOString(),N["table:style-name"]="ce1";break;default:b.push(t);continue}var te=e(W);if(_e.l&&_e.l.Target){var we=_e.l.Target;we=we.charAt(0)=="#"?"#"+ZO(we.slice(1)):we,we.charAt(0)!="#"&&!we.match(/^\w+:/)&&(we="../"+we),te=kt("text:a",te,{"xlink:href":we.replace(/&/g,"&amp;")})}b.push("          "+kt("table:table-cell",kt("text:p",te,{}),N)+`
`)}b.push(`        </table:table-row>
`)}return b.push(`      </table:table>
`),b.join("")},o=function(h,d){h.push(` <office:automatic-styles>
`),h.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),h.push(`   <number:month number:style="long"/>
`),h.push(`   <number:text>/</number:text>
`),h.push(`   <number:day number:style="long"/>
`),h.push(`   <number:text>/</number:text>
`),h.push(`   <number:year/>
`),h.push(`  </number:date-style>
`);var l=0;d.SheetNames.map(function(w){return d.Sheets[w]}).forEach(function(w){if(w&&w["!cols"]){for(var E=0;E<w["!cols"].length;++E)if(w["!cols"][E]){var P=w["!cols"][E];if(P.width==null&&P.wpx==null&&P.wch==null)continue;n1(P),P.ods=l;var k=w["!cols"][E].wpx+"px";h.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),h.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+k+`"/>
`),h.push(`  </style:style>
`),++l}}});var b=0;d.SheetNames.map(function(w){return d.Sheets[w]}).forEach(function(w){if(w&&w["!rows"]){for(var E=0;E<w["!rows"].length;++E)if(w["!rows"][E]){w["!rows"][E].ods=b;var P=w["!rows"][E].hpx+"px";h.push('  <style:style style:name="ro'+b+`" style:family="table-row">
`),h.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+P+`"/>
`),h.push(`  </style:style>
`),++b}}}),h.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),h.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),h.push(`  </style:style>
`),h.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),h.push(` </office:automatic-styles>
`)};return function(d,l){var b=[Nn],w=Nd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),E=Nd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(b.push("<office:document"+w+E+`>
`),b.push(xA().replace(/office:document-meta/g,"office:meta"))):b.push("<office:document-content"+w+`>
`),o(b,d),b.push(`  <office:body>
`),b.push(`    <office:spreadsheet>
`);for(var P=0;P!=d.SheetNames.length;++P)b.push(a(d.Sheets[d.SheetNames[P]],d,P));return b.push(`    </office:spreadsheet>
`),b.push(`  </office:body>
`),l.bookType=="fods"?b.push("</office:document>"):b.push("</office:document-content>"),b.join("")}}();function ak(e,t){if(t.bookType=="fods")return bS(e,t);var r=Hv(),a="",o=[],h=[];return a="mimetype",pr(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",pr(r,a,bS(e,t)),o.push([a,"text/xml"]),h.push([a,"ContentFile"]),a="styles.xml",pr(r,a,A8(e,t)),o.push([a,"text/xml"]),h.push([a,"StylesFile"]),a="meta.xml",pr(r,a,Nn+xA()),o.push([a,"text/xml"]),h.push([a,"MetadataFile"]),a="manifest.rdf",pr(r,a,BF(h)),o.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",pr(r,a,OF(o)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function qm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function k8(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):bs(Od(e))}function I8(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Ml(e){var t=e.reduce(function(o,h){return o+h.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(o){r.set(o,a),a+=o.length}),r}function P8(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,o=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var h=0;o>=1;++h,o/=256)e[t+h]=o&255;e[t+15]|=r>=0?0:128}function Bd(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function Pr(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ah(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function $n(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],o=Bd(e,r),h=o&7;o=Math.floor(o/8);var d=0,l;if(o==0)break;switch(h){case 0:{for(var b=r[0];e[r[0]++]>=128;);l=e.slice(b,r[0])}break;case 5:d=4,l=e.slice(r[0],r[0]+d),r[0]+=d;break;case 1:d=8,l=e.slice(r[0],r[0]+d),r[0]+=d;break;case 2:d=Bd(e,r),l=e.slice(r[0],r[0]+d),r[0]+=d;break;case 3:case 4:default:throw new Error("PB Type ".concat(h," for Field ").concat(o," at offset ").concat(a))}var w={data:l,type:h};t[o]==null?t[o]=[w]:t[o].push(w)}return t}function ci(e){var t=[];return e.forEach(function(r,a){r.forEach(function(o){o.data&&(t.push(Pr(a*8+o.type)),o.type==2&&t.push(Pr(o.data.length)),t.push(o.data))})}),Ml(t)}function ms(e){for(var t,r=[],a=[0];a[0]<e.length;){var o=Bd(e,a),h=$n(e.slice(a[0],a[0]+o));a[0]+=o;var d={id:ah(h[1][0].data),messages:[]};h[2].forEach(function(l){var b=$n(l.data),w=ah(b[3][0].data);d.messages.push({meta:b,data:e.slice(a[0],a[0]+w)}),a[0]+=w}),(t=h[3])!=null&&t[0]&&(d.merge=ah(h[3][0].data)>>>0>0),r.push(d)}return r}function Iu(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:Pr(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:Pr(+!!r.merge),type:0}]);var o=[];r.messages.forEach(function(d){o.push(d.data),d.meta[3]=[{type:0,data:Pr(d.data.length)}],a[2].push({data:ci(d.meta),type:2})});var h=ci(a);t.push(Pr(h.length)),t.push(h),o.forEach(function(d){return t.push(d)})}),Ml(t)}function M8(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=Bd(t,r),o=[];r[0]<t.length;){var h=t[r[0]]&3;if(h==0){var d=t[r[0]++]>>2;if(d<60)++d;else{var l=d-59;d=t[r[0]],l>1&&(d|=t[r[0]+1]<<8),l>2&&(d|=t[r[0]+2]<<16),l>3&&(d|=t[r[0]+3]<<24),d>>>=0,d++,r[0]+=l}o.push(t.slice(r[0],r[0]+d)),r[0]+=d;continue}else{var b=0,w=0;if(h==1?(w=(t[r[0]]>>2&7)+4,b=(t[r[0]++]&224)<<3,b|=t[r[0]++]):(w=(t[r[0]++]>>2)+1,h==2?(b=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(b=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),o=[Ml(o)],b==0)throw new Error("Invalid offset 0");if(b>o[0].length)throw new Error("Invalid offset beyond length");if(w>=b)for(o.push(o[0].slice(-b)),w-=b;w>=o[o.length-1].length;)o.push(o[o.length-1]),w-=o[o.length-1].length;o.push(o[0].slice(-b,-b+w))}}var E=Ml(o);if(E.length!=a)throw new Error("Unexpected length: ".concat(E.length," != ").concat(a));return E}function gs(e){for(var t=[],r=0;r<e.length;){var a=e[r++],o=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(M8(a,e.slice(r,r+o))),r+=o}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Ml(t)}function Pu(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),o=new Uint8Array(4);t.push(o);var h=Pr(a),d=h.length;t.push(h),a<=60?(d++,t.push(new Uint8Array([a-1<<2]))):a<=256?(d+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(d+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(d+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(d+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),d+=a,o[0]=0,o[1]=d&255,o[2]=d>>8&255,o[3]=d>>16&255,r+=a}return Ml(t)}function ky(e,t){var r=new Uint8Array(32),a=qm(r),o=12,h=0;switch(r[0]=5,e.t){case"n":r[1]=2,P8(r,o,e.v),h|=1,o+=16;break;case"b":r[1]=6,a.setFloat64(o,e.v?1:0,!0),h|=2,o+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(o,t.indexOf(e.v),!0),h|=8,o+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,h,!0),r.slice(0,o)}function Iy(e,t){var r=new Uint8Array(32),a=qm(r),o=12,h=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(o,e.v,!0),h|=32,o+=8;break;case"b":r[2]=6,a.setFloat64(o,e.v?1:0,!0),h|=32,o+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(o,t.indexOf(e.v),!0),h|=16,o+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,h,!0),r.slice(0,o)}function ol(e){var t=$n(e);return Bd(t[1][0].data)}function R8(e,t,r){var a,o,h,d;if(!((a=e[6])!=null&&a[0])||!((o=e[7])!=null&&o[0]))throw"Mutation only works on post-BNC storages!";var l=((d=(h=e[8])==null?void 0:h[0])==null?void 0:d.data)&&ah(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var b=0,w=qm(e[7][0].data),E=0,P=[],k=qm(e[4][0].data),R=0,z=[],D=0;D<t.length;++D){if(t[D]==null){w.setUint16(D*2,65535,!0),k.setUint16(D*2,65535);continue}w.setUint16(D*2,E,!0),k.setUint16(D*2,R,!0);var G,B;switch(typeof t[D]){case"string":G=ky({t:"s",v:t[D]},r),B=Iy({t:"s",v:t[D]},r);break;case"number":G=ky({t:"n",v:t[D]},r),B=Iy({t:"n",v:t[D]},r);break;case"boolean":G=ky({t:"b",v:t[D]},r),B=Iy({t:"b",v:t[D]},r);break;default:throw new Error("Unsupported value "+t[D])}P.push(G),E+=G.length,z.push(B),R+=B.length,++b}for(e[2][0].data=Pr(b);D<e[7][0].data.length/2;++D)w.setUint16(D*2,65535,!0),k.setUint16(D*2,65535,!0);return e[6][0].data=Ml(P),e[3][0].data=Ml(z),b}function D8(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=Ra(r["!ref"]);a.s.r=a.s.c=0;var o=!1;a.e.c>9&&(o=!0,a.e.c=9),a.e.r>49&&(o=!0,a.e.r=49),o&&console.error("The Numbers writer is currently limited to ".concat(On(a)));var h=Zm(r,{range:a,header:1}),d=["~Sh33tJ5~"];h.forEach(function(Te){return Te.forEach(function(be){typeof be=="string"&&d.push(be)})});var l={},b=[],w=Br.read(t.numbers,{type:"base64"});w.FileIndex.map(function(Te,be){return[Te,w.FullPaths[be]]}).forEach(function(Te){var be=Te[0],Ee=Te[1];if(be.type==2&&be.name.match(/\.iwa/)){var je=be.content,Je=gs(je),lt=ms(Je);lt.forEach(function(ft){b.push(ft.id),l[ft.id]={deps:[],location:Ee,type:ah(ft.messages[0].meta[1][0].data)}})}}),b.sort(function(Te,be){return Te-be});var E=b.filter(function(Te){return Te>1}).map(function(Te){return[Te,Pr(Te)]});w.FileIndex.map(function(Te,be){return[Te,w.FullPaths[be]]}).forEach(function(Te){var be=Te[0];if(Te[1],!!be.name.match(/\.iwa/)){var Ee=ms(gs(be.content));Ee.forEach(function(je){je.messages.forEach(function(Je){E.forEach(function(lt){je.messages.some(function(ft){return ah(ft.meta[1][0].data)!=11006&&I8(ft.data,lt[1])})&&l[lt[0]].deps.push(je.id)})})})}});for(var P=Br.find(w,l[1].location),k=ms(gs(P.content)),R,z=0;z<k.length;++z){var D=k[z];D.id==1&&(R=D)}var G=ol($n(R.messages[0].data)[1][0].data);for(P=Br.find(w,l[G].location),k=ms(gs(P.content)),z=0;z<k.length;++z)D=k[z],D.id==G&&(R=D);for(G=ol($n(R.messages[0].data)[2][0].data),P=Br.find(w,l[G].location),k=ms(gs(P.content)),z=0;z<k.length;++z)D=k[z],D.id==G&&(R=D);for(G=ol($n(R.messages[0].data)[2][0].data),P=Br.find(w,l[G].location),k=ms(gs(P.content)),z=0;z<k.length;++z)D=k[z],D.id==G&&(R=D);var B=$n(R.messages[0].data);{B[6][0].data=Pr(a.e.r+1),B[7][0].data=Pr(a.e.c+1);var N=ol(B[46][0].data),W=Br.find(w,l[N].location),Q=ms(gs(W.content));{for(var _e=0;_e<Q.length&&Q[_e].id!=N;++_e);if(Q[_e].id!=N)throw"Bad ColumnRowUIDMapArchive";var Ce=$n(Q[_e].messages[0].data);Ce[1]=[],Ce[2]=[],Ce[3]=[];for(var te=0;te<=a.e.c;++te){var we=[];we[1]=we[2]=[{type:0,data:Pr(te+420690)}],Ce[1].push({type:2,data:ci(we)}),Ce[2].push({type:0,data:Pr(te)}),Ce[3].push({type:0,data:Pr(te)})}Ce[4]=[],Ce[5]=[],Ce[6]=[];for(var Pe=0;Pe<=a.e.r;++Pe)we=[],we[1]=we[2]=[{type:0,data:Pr(Pe+726270)}],Ce[4].push({type:2,data:ci(we)}),Ce[5].push({type:0,data:Pr(Pe)}),Ce[6].push({type:0,data:Pr(Pe)});Q[_e].messages[0].data=ci(Ce)}W.content=Pu(Iu(Q)),W.size=W.content.length,delete B[46];var ke=$n(B[4][0].data);{ke[7][0].data=Pr(a.e.r+1);var $e=$n(ke[1][0].data),Ue=ol($e[2][0].data);W=Br.find(w,l[Ue].location),Q=ms(gs(W.content));{if(Q[0].id!=Ue)throw"Bad HeaderStorageBucket";var at=$n(Q[0].messages[0].data);for(Pe=0;Pe<h.length;++Pe){var yt=$n(at[2][0].data);yt[1][0].data=Pr(Pe),yt[4][0].data=Pr(h[Pe].length),at[2][Pe]={type:at[2][0].type,data:ci(yt)}}Q[0].messages[0].data=ci(at)}W.content=Pu(Iu(Q)),W.size=W.content.length;var gt=ol(ke[2][0].data);W=Br.find(w,l[gt].location),Q=ms(gs(W.content));{if(Q[0].id!=gt)throw"Bad HeaderStorageBucket";for(at=$n(Q[0].messages[0].data),te=0;te<=a.e.c;++te)yt=$n(at[2][0].data),yt[1][0].data=Pr(te),yt[4][0].data=Pr(a.e.r+1),at[2][te]={type:at[2][0].type,data:ci(yt)};Q[0].messages[0].data=ci(at)}W.content=Pu(Iu(Q)),W.size=W.content.length;var nt=ol(ke[4][0].data);(function(){for(var Te=Br.find(w,l[nt].location),be=ms(gs(Te.content)),Ee,je=0;je<be.length;++je){var Je=be[je];Je.id==nt&&(Ee=Je)}var lt=$n(Ee.messages[0].data);{lt[3]=[];var ft=[];d.forEach(function(Zt,Yt){ft[1]=[{type:0,data:Pr(Yt)}],ft[2]=[{type:0,data:Pr(1)}],ft[3]=[{type:2,data:k8(Zt)}],lt[3].push({type:2,data:ci(ft)})})}Ee.messages[0].data=ci(lt);var ot=Iu(be),er=Pu(ot);Te.content=er,Te.size=Te.content.length})();var Rt=$n(ke[3][0].data);{var Ke=Rt[1][0];delete Rt[2];var dt=$n(Ke.data);{var Dt=ol(dt[2][0].data);(function(){for(var Te=Br.find(w,l[Dt].location),be=ms(gs(Te.content)),Ee,je=0;je<be.length;++je){var Je=be[je];Je.id==Dt&&(Ee=Je)}var lt=$n(Ee.messages[0].data);{delete lt[6],delete Rt[7];var ft=new Uint8Array(lt[5][0].data);lt[5]=[];for(var ot=0,er=0;er<=a.e.r;++er){var Zt=$n(ft);ot+=R8(Zt,h[er],d),Zt[1][0].data=Pr(er),lt[5].push({data:ci(Zt),type:2})}lt[1]=[{type:0,data:Pr(a.e.c+1)}],lt[2]=[{type:0,data:Pr(a.e.r+1)}],lt[3]=[{type:0,data:Pr(ot)}],lt[4]=[{type:0,data:Pr(a.e.r+1)}]}Ee.messages[0].data=ci(lt);var Yt=Iu(be),Xt=Pu(Yt);Te.content=Xt,Te.size=Te.content.length})()}Ke.data=ci(dt)}ke[3][0].data=ci(Rt)}B[4][0].data=ci(ke)}R.messages[0].data=ci(B);var jt=Iu(k),xe=Pu(jt);return P.content=xe,P.size=P.content.length,w}function L8(e){return function(r){for(var a=0;a!=e.length;++a){var o=e[a];r[o[0]]===void 0&&(r[o[0]]=o[1]),o[2]==="n"&&(r[o[0]]=Number(r[o[0]]))}}}function l1(e){L8([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function F8(e,t){return t.bookType=="ods"?ak(e,t):t.bookType=="numbers"?D8(e,t):t.bookType=="xlsb"?z8(e,t):O8(e,t)}function z8(e,t){Hu=1024,e&&!e.SSF&&(e.SSF=da(bn)),e&&e.SSF&&(bg(),wg(e.SSF),t.revssf=Sg(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,dd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=VA.indexOf(t.bookType)>-1,o=gA();l1(t=t||{});var h=Hv(),d="",l=0;if(t.cellXfs=[],Nl(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),d="docProps/core.xml",pr(h,d,vA(e.Props,t)),o.coreprops.push(d),Mr(t.rels,2,d,Er.CORE_PROPS),d="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var b=[],w=0;w<e.SheetNames.length;++w)(e.Workbook.Sheets[w]||{}).Hidden!=2&&b.push(e.SheetNames[w]);e.Props.SheetNames=b}for(e.Props.Worksheets=e.Props.SheetNames.length,pr(h,d,bA(e.Props)),o.extprops.push(d),Mr(t.rels,3,d,Er.EXT_PROPS),e.Custprops!==e.Props&&_i(e.Custprops||{}).length>0&&(d="docProps/custom.xml",pr(h,d,SA(e.Custprops)),o.custprops.push(d),Mr(t.rels,4,d,Er.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var E={"!id":{}},P=e.Sheets[e.SheetNames[l-1]],k=(P||{})["!type"]||"sheet";switch(k){case"chart":default:d="xl/worksheets/sheet"+l+"."+r,pr(h,d,BN(l-1,d,t,e,E)),o.sheets.push(d),Mr(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Er.WS[0])}if(P){var R=P["!comments"],z=!1,D="";R&&R.length>0&&(D="xl/comments"+l+"."+r,pr(h,D,jN(R,D)),o.comments.push(D),Mr(E,-1,"../comments"+l+"."+r,Er.CMNT),z=!0),P["!legacy"]&&z&&pr(h,"xl/drawings/vmlDrawing"+l+".vml",BA(l,P["!comments"])),delete P["!comments"],delete P["!legacy"]}E["!id"].rId1&&pr(h,yA(d),nh(E))}return t.Strings!=null&&t.Strings.length>0&&(d="xl/sharedStrings."+r,pr(h,d,VN(t.Strings,d,t)),o.strs.push(d),Mr(t.wbrels,-1,"sharedStrings."+r,Er.SST)),d="xl/workbook."+r,pr(h,d,NN(e,d)),o.workbooks.push(d),Mr(t.rels,1,d,Er.WB),d="xl/theme/theme1.xml",pr(h,d,OA(e.Themes,t)),o.themes.push(d),Mr(t.wbrels,-1,"theme/theme1.xml",Er.THEME),d="xl/styles."+r,pr(h,d,UN(e,d,t)),o.styles.push(d),Mr(t.wbrels,-1,"styles."+r,Er.STY),e.vbaraw&&a&&(d="xl/vbaProject.bin",pr(h,d,e.vbaraw),o.vba.push(d),Mr(t.wbrels,-1,"vbaProject.bin",Er.VBA)),d="xl/metadata."+r,pr(h,d,$N(d)),o.metadata.push(d),Mr(t.wbrels,-1,"metadata."+r,Er.XLMETA),pr(h,"[Content_Types].xml",_A(o,t)),pr(h,"_rels/.rels",nh(t.rels)),pr(h,"xl/_rels/workbook."+r+".rels",nh(t.wbrels)),delete t.revssf,delete t.ssf,h}function O8(e,t){Hu=1024,e&&!e.SSF&&(e.SSF=da(bn)),e&&e.SSF&&(bg(),wg(e.SSF),t.revssf=Sg(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,dd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=VA.indexOf(t.bookType)>-1,o=gA();l1(t=t||{});var h=Hv(),d="",l=0;if(t.cellXfs=[],Nl(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),d="docProps/core.xml",pr(h,d,vA(e.Props,t)),o.coreprops.push(d),Mr(t.rels,2,d,Er.CORE_PROPS),d="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var b=[],w=0;w<e.SheetNames.length;++w)(e.Workbook.Sheets[w]||{}).Hidden!=2&&b.push(e.SheetNames[w]);e.Props.SheetNames=b}e.Props.Worksheets=e.Props.SheetNames.length,pr(h,d,bA(e.Props)),o.extprops.push(d),Mr(t.rels,3,d,Er.EXT_PROPS),e.Custprops!==e.Props&&_i(e.Custprops||{}).length>0&&(d="docProps/custom.xml",pr(h,d,SA(e.Custprops)),o.custprops.push(d),Mr(t.rels,4,d,Er.CUST_PROPS));var E=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var P={"!id":{}},k=e.Sheets[e.SheetNames[l-1]],R=(k||{})["!type"]||"sheet";switch(R){case"chart":default:d="xl/worksheets/sheet"+l+"."+r,pr(h,d,KA(l-1,t,e,P)),o.sheets.push(d),Mr(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Er.WS[0])}if(k){var z=k["!comments"],D=!1,G="";if(z&&z.length>0){var B=!1;z.forEach(function(N){N[1].forEach(function(W){W.T==!0&&(B=!0)})}),B&&(G="xl/threadedComments/threadedComment"+l+"."+r,pr(h,G,pz(z,E,t)),o.threadedcomments.push(G),Mr(P,-1,"../threadedComments/threadedComment"+l+"."+r,Er.TCMNT)),G="xl/comments"+l+"."+r,pr(h,G,UA(z)),o.comments.push(G),Mr(P,-1,"../comments"+l+"."+r,Er.CMNT),D=!0}k["!legacy"]&&D&&pr(h,"xl/drawings/vmlDrawing"+l+".vml",BA(l,k["!comments"])),delete k["!comments"],delete k["!legacy"]}P["!id"].rId1&&pr(h,yA(d),nh(P))}return t.Strings!=null&&t.Strings.length>0&&(d="xl/sharedStrings."+r,pr(h,d,MA(t.Strings,t)),o.strs.push(d),Mr(t.wbrels,-1,"sharedStrings."+r,Er.SST)),d="xl/workbook."+r,pr(h,d,QA(e)),o.workbooks.push(d),Mr(t.rels,1,d,Er.WB),d="xl/theme/theme1.xml",pr(h,d,OA(e.Themes,t)),o.themes.push(d),Mr(t.wbrels,-1,"theme/theme1.xml",Er.THEME),d="xl/styles."+r,pr(h,d,FA(e,t)),o.styles.push(d),Mr(t.wbrels,-1,"styles."+r,Er.STY),e.vbaraw&&a&&(d="xl/vbaProject.bin",pr(h,d,e.vbaraw),o.vba.push(d),Mr(t.wbrels,-1,"vbaProject.bin",Er.VBA)),d="xl/metadata."+r,pr(h,d,NA()),o.metadata.push(d),Mr(t.wbrels,-1,"metadata."+r,Er.XLMETA),E.length>1&&(d="xl/persons/person.xml",pr(h,d,mz(E)),o.people.push(d),Mr(t.wbrels,-1,"persons/person.xml",Er.PEOPLE)),pr(h,"[Content_Types].xml",_A(o,t)),pr(h,"_rels/.rels",nh(t.rels)),pr(h,"xl/_rels/workbook."+r+".rels",nh(t.wbrels)),delete t.revssf,delete t.ssf,h}function N8(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Lo(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function sk(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Yd(t.file,Br.write(e,{type:Ar?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Br.write(e,t)}function B8(e,t){var r=da(t||{}),a=F8(e,r);return U8(a,r)}function U8(e,t){var r={},a=Ar?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var o=e.FullPaths?Br.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof o=="string"){if(t.type=="binary"||t.type=="base64")return o;o=new Uint8Array(vg(o))}return t.password&&typeof encrypt_agile<"u"?sk(encrypt_agile(o,t.password),t):t.type==="file"?Yd(t.file,o):t.type=="string"?cd(o):o}function V8(e,t){var r=t||{},a=n8(e,r);return sk(a,r)}function Ws(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return Fd(Od(a));case"binary":return Od(a);case"string":return e;case"file":return Yd(t.file,a,"utf8");case"buffer":return Ar?Bo(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):Ws(a,{type:"binary"}).split("").map(function(o){return o.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function j8(e,t){switch(t.type){case"base64":return Fd(e);case"binary":return e;case"string":return e;case"file":return Yd(t.file,e,"binary");case"buffer":return Ar?Bo(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function U0(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?Fd(r):t.type=="string"?cd(r):r;case"file":return Yd(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function ok(e,t){gL(),AN(e);var r=da(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=ok(e,r);return r.type="array",vg(a)}var o=0;if(r.sheet&&(typeof r.sheet=="number"?o=r.sheet:o=e.SheetNames.indexOf(r.sheet),!e.SheetNames[o]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ws(t8(e,r),r);case"slk":case"sylk":return Ws(T5.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"htm":case"html":return Ws(rk(e.Sheets[e.SheetNames[o]],r),r);case"txt":return j8(lk(e.Sheets[e.SheetNames[o]],r),r);case"csv":return Ws(c1(e.Sheets[e.SheetNames[o]],r),r,"\uFEFF");case"dif":return Ws(E5.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"dbf":return U0(S5.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"prn":return Ws(C5.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"rtf":return Ws(D5.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"eth":return Ws(PA.from_sheet(e.Sheets[e.SheetNames[o]],r),r);case"fods":return Ws(ak(e,r),r);case"wk1":return U0(mS.sheet_to_wk1(e.Sheets[e.SheetNames[o]],r),r);case"wk3":return U0(mS.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),U0(tk(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),V8(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return B8(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function $8(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function G8(e,t,r){var a={};return a.type="file",a.file=t,$8(a),ok(e,a)}function W8(e,t,r,a,o,h,d,l){var b=mi(r),w=l.defval,E=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),P=!0,k=o===1?[]:{};if(o!==1)if(Object.defineProperty)try{Object.defineProperty(k,"__rowNum__",{value:r,enumerable:!1})}catch{k.__rowNum__=r}else k.__rowNum__=r;if(!d||e[r])for(var R=t.s.c;R<=t.e.c;++R){var z=d?e[r][R]:e[a[R]+b];if(z===void 0||z.t===void 0){if(w===void 0)continue;h[R]!=null&&(k[h[R]]=w);continue}var D=z.v;switch(z.t){case"z":if(D==null)break;continue;case"e":D=D==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+z.t)}if(h[R]!=null){if(D==null)if(z.t=="e"&&D===null)k[h[R]]=null;else if(w!==void 0)k[h[R]]=w;else if(E&&D===null)k[h[R]]=null;else continue;else k[h[R]]=E&&(z.t!=="n"||z.t==="n"&&l.rawNumbers!==!1)?D:Fo(z,D,l);D!=null&&(P=!1)}}return{row:k,isempty:P}}function Zm(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,o=1,h=[],d=0,l="",b={s:{r:0,c:0},e:{r:0,c:0}},w=t||{},E=w.range!=null?w.range:e["!ref"];switch(w.header===1?a=1:w.header==="A"?a=2:Array.isArray(w.header)?a=3:w.header==null&&(a=0),typeof E){case"string":b=rn(E);break;case"number":b=rn(e["!ref"]),b.s.r=E;break;default:b=E}a>0&&(o=0);var P=mi(b.s.r),k=[],R=[],z=0,D=0,G=Array.isArray(e),B=b.s.r,N=0,W={};G&&!e[B]&&(e[B]=[]);var Q=w.skipHidden&&e["!cols"]||[],_e=w.skipHidden&&e["!rows"]||[];for(N=b.s.c;N<=b.e.c;++N)if(!(Q[N]||{}).hidden)switch(k[N]=Pi(N),r=G?e[B][N]:e[k[N]+P],a){case 1:h[N]=N-b.s.c;break;case 2:h[N]=k[N];break;case 3:h[N]=w.header[N-b.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=d=Fo(r,null,w),D=W[d]||0,!D)W[d]=1;else{do l=d+"_"+D++;while(W[l]);W[d]=D,W[l]=1}h[N]=l}for(B=b.s.r+o;B<=b.e.r;++B)if(!(_e[B]||{}).hidden){var Ce=W8(e,b,B,k,a,h,G,w);(Ce.isempty===!1||(a===1?w.blankrows!==!1:w.blankrows))&&(R[z++]=Ce.row)}return R.length=z,R}var SS=/"/g;function H8(e,t,r,a,o,h,d,l){for(var b=!0,w=[],E="",P=mi(r),k=t.s.c;k<=t.e.c;++k)if(a[k]){var R=l.dense?(e[r]||[])[k]:e[a[k]+P];if(R==null)E="";else if(R.v!=null){b=!1,E=""+(l.rawNumbers&&R.t=="n"?R.v:Fo(R,null,l));for(var z=0,D=0;z!==E.length;++z)if((D=E.charCodeAt(z))===o||D===h||D===34||l.forceQuotes){E='"'+E.replace(SS,'""')+'"';break}E=="ID"&&(E='"ID"')}else R.f!=null&&!R.F?(b=!1,E="="+R.f,E.indexOf(",")>=0&&(E='"'+E.replace(SS,'""')+'"')):E="";w.push(E)}return l.blankrows===!1&&b?null:w.join(d)}function c1(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var o=rn(e["!ref"]),h=a.FS!==void 0?a.FS:",",d=h.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,b=l.charCodeAt(0),w=new RegExp((h=="|"?"\\|":h)+"+$"),E="",P=[];a.dense=Array.isArray(e);for(var k=a.skipHidden&&e["!cols"]||[],R=a.skipHidden&&e["!rows"]||[],z=o.s.c;z<=o.e.c;++z)(k[z]||{}).hidden||(P[z]=Pi(z));for(var D=0,G=o.s.r;G<=o.e.r;++G)(R[G]||{}).hidden||(E=H8(e,o,G,P,d,b,h,a),E!=null&&(a.strip&&(E=E.replace(w,"")),(E||a.blankrows!==!1)&&r.push((D++?l:"")+E)));return delete a.dense,r.join("")}function lk(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=c1(e,t);return r}function q8(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var o=rn(e["!ref"]),h="",d=[],l,b=[],w=Array.isArray(e);for(l=o.s.c;l<=o.e.c;++l)d[l]=Pi(l);for(var E=o.s.r;E<=o.e.r;++E)for(h=mi(E),l=o.s.c;l<=o.e.c;++l)if(t=d[l]+h,r=w?(e[E]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}b[b.length]=t+"="+a}return b}function ck(e,t,r){var a=r||{},o=+!a.skipHeader,h=e||{},d=0,l=0;if(h&&a.origin!=null)if(typeof a.origin=="number")d=a.origin;else{var b=typeof a.origin=="string"?Jn(a.origin):a.origin;d=b.r,l=b.c}var w,E={s:{c:0,r:0},e:{c:l,r:d+t.length-1+o}};if(h["!ref"]){var P=rn(h["!ref"]);E.e.c=Math.max(E.e.c,P.e.c),E.e.r=Math.max(E.e.r,P.e.r),d==-1&&(d=P.e.r+1,E.e.r=d+t.length-1+o)}else d==-1&&(d=0,E.e.r=t.length-1+o);var k=a.header||[],R=0;t.forEach(function(D,G){_i(D).forEach(function(B){(R=k.indexOf(B))==-1&&(k[R=k.length]=B);var N=D[B],W="z",Q="",_e=Lr({c:l+R,r:d+G+o});w=Ud(h,_e),N&&typeof N=="object"&&!(N instanceof Date)?h[_e]=N:(typeof N=="number"?W="n":typeof N=="boolean"?W="b":typeof N=="string"?W="s":N instanceof Date?(W="d",a.cellDates||(W="n",N=fa(N)),Q=a.dateNF||bn[14]):N===null&&a.nullError&&(W="e",N=0),w?(w.t=W,w.v=N,delete w.w,delete w.R,Q&&(w.z=Q)):h[_e]=w={t:W,v:N},Q&&(w.z=Q))})}),E.e.c=Math.max(E.e.c,l+k.length-1);var z=mi(d);if(o)for(R=0;R<k.length;++R)h[Pi(R+l)+z]={t:"s",v:k[R]};return h["!ref"]=On(E),h}function Z8(e,t){return ck(null,e,t)}function Ud(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=Jn(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Ud(e,Lr(t)):Ud(e,Lr({r:t,c:r||0}))}function X8(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function K8(){return{SheetNames:[],Sheets:{}}}function Y8(e,t,r,a){var o=1;if(!r)for(;o<=65535&&e.SheetNames.indexOf(r="Sheet"+o)!=-1;++o,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var h=r.match(/(^.*?)(\d+)$/);o=h&&+h[2]||0;var d=h&&h[1]||r;for(++o;o<=65535&&e.SheetNames.indexOf(r=d+o)!=-1;++o);}if(JA(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function J8(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=X8(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function Q8(e,t){return e.z=t,e}function uk(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function eB(e,t,r){return uk(e,"#"+t,r)}function tB(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function rB(e,t,r,a){for(var o=typeof t!="string"?t:rn(t),h=typeof t=="string"?t:On(t),d=o.s.r;d<=o.e.r;++d)for(var l=o.s.c;l<=o.e.c;++l){var b=Ud(e,d,l);b.t="n",b.F=h,delete b.v,d==o.s.r&&l==o.s.c&&(b.f=r,a&&(b.D=!0))}return e}var lc={encode_col:Pi,encode_row:mi,encode_cell:Lr,encode_range:On,decode_col:Jv,decode_row:Yv,split_cell:gF,decode_cell:Jn,decode_range:Ra,format_cell:Fo,sheet_add_aoa:uA,sheet_add_json:ck,sheet_add_dom:nk,aoa_to_sheet:Th,json_to_sheet:Z8,table_to_sheet:ik,table_to_book:E8,sheet_to_csv:c1,sheet_to_txt:lk,sheet_to_json:Zm,sheet_to_html:rk,sheet_to_formulae:q8,sheet_to_row_object_array:Zm,sheet_get_cell:Ud,book_new:K8,book_append_sheet:Y8,book_set_sheet_visibility:J8,cell_set_number_format:Q8,cell_set_hyperlink:uk,cell_set_internal_link:eB,cell_add_comment:tB,sheet_set_array_formula:rB,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function Fn(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function Vc(e,t=[]){let r=[];function a(h,d){const l=ae.createContext(d),b=r.length;r=[...r,d];const w=P=>{var B;const{scope:k,children:R,...z}=P,D=((B=k==null?void 0:k[e])==null?void 0:B[b])||l,G=ae.useMemo(()=>z,Object.values(z));return Se.jsx(D.Provider,{value:G,children:R})};w.displayName=h+"Provider";function E(P,k){var D;const R=((D=k==null?void 0:k[e])==null?void 0:D[b])||l,z=ae.useContext(R);if(z)return z;if(d!==void 0)return d;throw new Error(`\`${P}\` must be used within \`${h}\``)}return[w,E]}const o=()=>{const h=r.map(d=>ae.createContext(d));return function(l){const b=(l==null?void 0:l[e])||h;return ae.useMemo(()=>({[`__scope${e}`]:{...l,[e]:b}}),[l,b])}};return o.scopeName=e,[a,nB(o,...t)]}function nB(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const a=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(h){const d=a.reduce((l,{useScope:b,scopeName:w})=>{const P=b(h)[`__scope${w}`];return{...l,...P}},{});return ae.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return r.scopeName=t.scopeName,r}var iB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ti=iB.reduce((e,t)=>{const r=Dm(`Primitive.${t}`),a=ae.forwardRef((o,h)=>{const{asChild:d,...l}=o,b=d?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Se.jsx(b,{...l,ref:h})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function aB(e,t){e&&wh.flushSync(()=>e.dispatchEvent(t))}function rp(e){const t=ae.useRef(e);return ae.useEffect(()=>{t.current=e}),ae.useMemo(()=>(...r)=>{var a;return(a=t.current)==null?void 0:a.call(t,...r)},[])}function sB(e,t=globalThis==null?void 0:globalThis.document){const r=rp(e);ae.useEffect(()=>{const a=o=>{o.key==="Escape"&&r(o)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[r,t])}var oB="DismissableLayer",Dx="dismissableLayer.update",lB="dismissableLayer.pointerDownOutside",cB="dismissableLayer.focusOutside",TS,hk=ae.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fk=ae.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h,onInteractOutside:d,onDismiss:l,...b}=e,w=ae.useContext(hk),[E,P]=ae.useState(null),k=(E==null?void 0:E.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,R]=ae.useState({}),z=Xi(t,te=>P(te)),D=Array.from(w.layers),[G]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),B=D.indexOf(G),N=E?D.indexOf(E):-1,W=w.layersWithOutsidePointerEventsDisabled.size>0,Q=N>=B,_e=fB(te=>{const we=te.target,Pe=[...w.branches].some(ke=>ke.contains(we));!Q||Pe||(o==null||o(te),d==null||d(te),te.defaultPrevented||l==null||l())},k),Ce=dB(te=>{const we=te.target;[...w.branches].some(ke=>ke.contains(we))||(h==null||h(te),d==null||d(te),te.defaultPrevented||l==null||l())},k);return sB(te=>{N===w.layers.size-1&&(a==null||a(te),!te.defaultPrevented&&l&&(te.preventDefault(),l()))},k),ae.useEffect(()=>{if(E)return r&&(w.layersWithOutsidePointerEventsDisabled.size===0&&(TS=k.body.style.pointerEvents,k.body.style.pointerEvents="none"),w.layersWithOutsidePointerEventsDisabled.add(E)),w.layers.add(E),ES(),()=>{r&&w.layersWithOutsidePointerEventsDisabled.size===1&&(k.body.style.pointerEvents=TS)}},[E,k,r,w]),ae.useEffect(()=>()=>{E&&(w.layers.delete(E),w.layersWithOutsidePointerEventsDisabled.delete(E),ES())},[E,w]),ae.useEffect(()=>{const te=()=>R({});return document.addEventListener(Dx,te),()=>document.removeEventListener(Dx,te)},[]),Se.jsx(ti.div,{...b,ref:z,style:{pointerEvents:W?Q?"auto":"none":void 0,...e.style},onFocusCapture:Fn(e.onFocusCapture,Ce.onFocusCapture),onBlurCapture:Fn(e.onBlurCapture,Ce.onBlurCapture),onPointerDownCapture:Fn(e.onPointerDownCapture,_e.onPointerDownCapture)})});fk.displayName=oB;var uB="DismissableLayerBranch",hB=ae.forwardRef((e,t)=>{const r=ae.useContext(hk),a=ae.useRef(null),o=Xi(t,a);return ae.useEffect(()=>{const h=a.current;if(h)return r.branches.add(h),()=>{r.branches.delete(h)}},[r.branches]),Se.jsx(ti.div,{...e,ref:o})});hB.displayName=uB;function fB(e,t=globalThis==null?void 0:globalThis.document){const r=rp(e),a=ae.useRef(!1),o=ae.useRef(()=>{});return ae.useEffect(()=>{const h=l=>{if(l.target&&!a.current){let b=function(){dk(lB,r,w,{discrete:!0})};const w={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=b,t.addEventListener("click",o.current,{once:!0})):b()}else t.removeEventListener("click",o.current);a.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",h)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",h),t.removeEventListener("click",o.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function dB(e,t=globalThis==null?void 0:globalThis.document){const r=rp(e),a=ae.useRef(!1);return ae.useEffect(()=>{const o=h=>{h.target&&!a.current&&dk(cB,r,{originalEvent:h},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function ES(){const e=new CustomEvent(Dx);document.dispatchEvent(e)}function dk(e,t,r,{discrete:a}){const o=r.originalEvent.target,h=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),a?aB(o,h):o.dispatchEvent(h)}var Rl=globalThis!=null&&globalThis.document?ae.useLayoutEffect:()=>{},pB=Hx[" useId ".trim().toString()]||(()=>{}),mB=0;function pk(e){const[t,r]=ae.useState(pB());return Rl(()=>{r(a=>a??String(mB++))},[e]),t?`radix-${t}`:""}const gB=["top","right","bottom","left"],Dl=Math.min,Aa=Math.max,Xm=Math.round,V0=Math.floor,Ys=e=>({x:e,y:e}),_B={left:"right",right:"left",bottom:"top",top:"bottom"},yB={start:"end",end:"start"};function Lx(e,t,r){return Aa(e,Dl(t,r))}function zo(e,t){return typeof e=="function"?e(t):e}function Oo(e){return e.split("-")[0]}function Ah(e){return e.split("-")[1]}function u1(e){return e==="x"?"y":"x"}function h1(e){return e==="y"?"height":"width"}const xB=new Set(["top","bottom"]);function Zs(e){return xB.has(Oo(e))?"y":"x"}function f1(e){return u1(Zs(e))}function vB(e,t,r){r===void 0&&(r=!1);const a=Ah(e),o=f1(e),h=h1(o);let d=o==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[h]>t.floating[h]&&(d=Km(d)),[d,Km(d)]}function wB(e){const t=Km(e);return[Fx(e),t,Fx(t)]}function Fx(e){return e.replace(/start|end/g,t=>yB[t])}const CS=["left","right"],AS=["right","left"],bB=["top","bottom"],SB=["bottom","top"];function TB(e,t,r){switch(e){case"top":case"bottom":return r?t?AS:CS:t?CS:AS;case"left":case"right":return t?bB:SB;default:return[]}}function EB(e,t,r,a){const o=Ah(e);let h=TB(Oo(e),r==="start",a);return o&&(h=h.map(d=>d+"-"+o),t&&(h=h.concat(h.map(Fx)))),h}function Km(e){return e.replace(/left|right|bottom|top/g,t=>_B[t])}function CB(e){return{top:0,right:0,bottom:0,left:0,...e}}function mk(e){return typeof e!="number"?CB(e):{top:e,right:e,bottom:e,left:e}}function Ym(e){const{x:t,y:r,width:a,height:o}=e;return{width:a,height:o,top:r,left:t,right:t+a,bottom:r+o,x:t,y:r}}function kS(e,t,r){let{reference:a,floating:o}=e;const h=Zs(t),d=f1(t),l=h1(d),b=Oo(t),w=h==="y",E=a.x+a.width/2-o.width/2,P=a.y+a.height/2-o.height/2,k=a[l]/2-o[l]/2;let R;switch(b){case"top":R={x:E,y:a.y-o.height};break;case"bottom":R={x:E,y:a.y+a.height};break;case"right":R={x:a.x+a.width,y:P};break;case"left":R={x:a.x-o.width,y:P};break;default:R={x:a.x,y:a.y}}switch(Ah(t)){case"start":R[d]-=k*(r&&w?-1:1);break;case"end":R[d]+=k*(r&&w?-1:1);break}return R}const AB=async(e,t,r)=>{const{placement:a="bottom",strategy:o="absolute",middleware:h=[],platform:d}=r,l=h.filter(Boolean),b=await(d.isRTL==null?void 0:d.isRTL(t));let w=await d.getElementRects({reference:e,floating:t,strategy:o}),{x:E,y:P}=kS(w,a,b),k=a,R={},z=0;for(let D=0;D<l.length;D++){const{name:G,fn:B}=l[D],{x:N,y:W,data:Q,reset:_e}=await B({x:E,y:P,initialPlacement:a,placement:k,strategy:o,middlewareData:R,rects:w,platform:d,elements:{reference:e,floating:t}});E=N??E,P=W??P,R={...R,[G]:{...R[G],...Q}},_e&&z<=50&&(z++,typeof _e=="object"&&(_e.placement&&(k=_e.placement),_e.rects&&(w=_e.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:o}):_e.rects),{x:E,y:P}=kS(w,k,b)),D=-1)}return{x:E,y:P,placement:k,strategy:o,middlewareData:R}};async function Vd(e,t){var r;t===void 0&&(t={});const{x:a,y:o,platform:h,rects:d,elements:l,strategy:b}=e,{boundary:w="clippingAncestors",rootBoundary:E="viewport",elementContext:P="floating",altBoundary:k=!1,padding:R=0}=zo(t,e),z=mk(R),G=l[k?P==="floating"?"reference":"floating":P],B=Ym(await h.getClippingRect({element:(r=await(h.isElement==null?void 0:h.isElement(G)))==null||r?G:G.contextElement||await(h.getDocumentElement==null?void 0:h.getDocumentElement(l.floating)),boundary:w,rootBoundary:E,strategy:b})),N=P==="floating"?{x:a,y:o,width:d.floating.width,height:d.floating.height}:d.reference,W=await(h.getOffsetParent==null?void 0:h.getOffsetParent(l.floating)),Q=await(h.isElement==null?void 0:h.isElement(W))?await(h.getScale==null?void 0:h.getScale(W))||{x:1,y:1}:{x:1,y:1},_e=Ym(h.convertOffsetParentRelativeRectToViewportRelativeRect?await h.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:N,offsetParent:W,strategy:b}):N);return{top:(B.top-_e.top+z.top)/Q.y,bottom:(_e.bottom-B.bottom+z.bottom)/Q.y,left:(B.left-_e.left+z.left)/Q.x,right:(_e.right-B.right+z.right)/Q.x}}const kB=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:a,placement:o,rects:h,platform:d,elements:l,middlewareData:b}=t,{element:w,padding:E=0}=zo(e,t)||{};if(w==null)return{};const P=mk(E),k={x:r,y:a},R=f1(o),z=h1(R),D=await d.getDimensions(w),G=R==="y",B=G?"top":"left",N=G?"bottom":"right",W=G?"clientHeight":"clientWidth",Q=h.reference[z]+h.reference[R]-k[R]-h.floating[z],_e=k[R]-h.reference[R],Ce=await(d.getOffsetParent==null?void 0:d.getOffsetParent(w));let te=Ce?Ce[W]:0;(!te||!await(d.isElement==null?void 0:d.isElement(Ce)))&&(te=l.floating[W]||h.floating[z]);const we=Q/2-_e/2,Pe=te/2-D[z]/2-1,ke=Dl(P[B],Pe),$e=Dl(P[N],Pe),Ue=ke,at=te-D[z]-$e,yt=te/2-D[z]/2+we,gt=Lx(Ue,yt,at),nt=!b.arrow&&Ah(o)!=null&&yt!==gt&&h.reference[z]/2-(yt<Ue?ke:$e)-D[z]/2<0,Rt=nt?yt<Ue?yt-Ue:yt-at:0;return{[R]:k[R]+Rt,data:{[R]:gt,centerOffset:yt-gt-Rt,...nt&&{alignmentOffset:Rt}},reset:nt}}}),IB=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,a;const{placement:o,middlewareData:h,rects:d,initialPlacement:l,platform:b,elements:w}=t,{mainAxis:E=!0,crossAxis:P=!0,fallbackPlacements:k,fallbackStrategy:R="bestFit",fallbackAxisSideDirection:z="none",flipAlignment:D=!0,...G}=zo(e,t);if((r=h.arrow)!=null&&r.alignmentOffset)return{};const B=Oo(o),N=Zs(l),W=Oo(l)===l,Q=await(b.isRTL==null?void 0:b.isRTL(w.floating)),_e=k||(W||!D?[Km(l)]:wB(l)),Ce=z!=="none";!k&&Ce&&_e.push(...EB(l,D,z,Q));const te=[l,..._e],we=await Vd(t,G),Pe=[];let ke=((a=h.flip)==null?void 0:a.overflows)||[];if(E&&Pe.push(we[B]),P){const yt=vB(o,d,Q);Pe.push(we[yt[0]],we[yt[1]])}if(ke=[...ke,{placement:o,overflows:Pe}],!Pe.every(yt=>yt<=0)){var $e,Ue;const yt=((($e=h.flip)==null?void 0:$e.index)||0)+1,gt=te[yt];if(gt&&(!(P==="alignment"?N!==Zs(gt):!1)||ke.every(Ke=>Zs(Ke.placement)===N?Ke.overflows[0]>0:!0)))return{data:{index:yt,overflows:ke},reset:{placement:gt}};let nt=(Ue=ke.filter(Rt=>Rt.overflows[0]<=0).sort((Rt,Ke)=>Rt.overflows[1]-Ke.overflows[1])[0])==null?void 0:Ue.placement;if(!nt)switch(R){case"bestFit":{var at;const Rt=(at=ke.filter(Ke=>{if(Ce){const dt=Zs(Ke.placement);return dt===N||dt==="y"}return!0}).map(Ke=>[Ke.placement,Ke.overflows.filter(dt=>dt>0).reduce((dt,Dt)=>dt+Dt,0)]).sort((Ke,dt)=>Ke[1]-dt[1])[0])==null?void 0:at[0];Rt&&(nt=Rt);break}case"initialPlacement":nt=l;break}if(o!==nt)return{reset:{placement:nt}}}return{}}}};function IS(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function PS(e){return gB.some(t=>e[t]>=0)}const PB=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:a="referenceHidden",...o}=zo(e,t);switch(a){case"referenceHidden":{const h=await Vd(t,{...o,elementContext:"reference"}),d=IS(h,r.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:PS(d)}}}case"escaped":{const h=await Vd(t,{...o,altBoundary:!0}),d=IS(h,r.floating);return{data:{escapedOffsets:d,escaped:PS(d)}}}default:return{}}}}},gk=new Set(["left","top"]);async function MB(e,t){const{placement:r,platform:a,elements:o}=e,h=await(a.isRTL==null?void 0:a.isRTL(o.floating)),d=Oo(r),l=Ah(r),b=Zs(r)==="y",w=gk.has(d)?-1:1,E=h&&b?-1:1,P=zo(t,e);let{mainAxis:k,crossAxis:R,alignmentAxis:z}=typeof P=="number"?{mainAxis:P,crossAxis:0,alignmentAxis:null}:{mainAxis:P.mainAxis||0,crossAxis:P.crossAxis||0,alignmentAxis:P.alignmentAxis};return l&&typeof z=="number"&&(R=l==="end"?z*-1:z),b?{x:R*E,y:k*w}:{x:k*w,y:R*E}}const RB=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,a;const{x:o,y:h,placement:d,middlewareData:l}=t,b=await MB(t,e);return d===((r=l.offset)==null?void 0:r.placement)&&(a=l.arrow)!=null&&a.alignmentOffset?{}:{x:o+b.x,y:h+b.y,data:{...b,placement:d}}}}},DB=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:a,placement:o}=t,{mainAxis:h=!0,crossAxis:d=!1,limiter:l={fn:G=>{let{x:B,y:N}=G;return{x:B,y:N}}},...b}=zo(e,t),w={x:r,y:a},E=await Vd(t,b),P=Zs(Oo(o)),k=u1(P);let R=w[k],z=w[P];if(h){const G=k==="y"?"top":"left",B=k==="y"?"bottom":"right",N=R+E[G],W=R-E[B];R=Lx(N,R,W)}if(d){const G=P==="y"?"top":"left",B=P==="y"?"bottom":"right",N=z+E[G],W=z-E[B];z=Lx(N,z,W)}const D=l.fn({...t,[k]:R,[P]:z});return{...D,data:{x:D.x-r,y:D.y-a,enabled:{[k]:h,[P]:d}}}}}},LB=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:a,placement:o,rects:h,middlewareData:d}=t,{offset:l=0,mainAxis:b=!0,crossAxis:w=!0}=zo(e,t),E={x:r,y:a},P=Zs(o),k=u1(P);let R=E[k],z=E[P];const D=zo(l,t),G=typeof D=="number"?{mainAxis:D,crossAxis:0}:{mainAxis:0,crossAxis:0,...D};if(b){const W=k==="y"?"height":"width",Q=h.reference[k]-h.floating[W]+G.mainAxis,_e=h.reference[k]+h.reference[W]-G.mainAxis;R<Q?R=Q:R>_e&&(R=_e)}if(w){var B,N;const W=k==="y"?"width":"height",Q=gk.has(Oo(o)),_e=h.reference[P]-h.floating[W]+(Q&&((B=d.offset)==null?void 0:B[P])||0)+(Q?0:G.crossAxis),Ce=h.reference[P]+h.reference[W]+(Q?0:((N=d.offset)==null?void 0:N[P])||0)-(Q?G.crossAxis:0);z<_e?z=_e:z>Ce&&(z=Ce)}return{[k]:R,[P]:z}}}},FB=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,a;const{placement:o,rects:h,platform:d,elements:l}=t,{apply:b=()=>{},...w}=zo(e,t),E=await Vd(t,w),P=Oo(o),k=Ah(o),R=Zs(o)==="y",{width:z,height:D}=h.floating;let G,B;P==="top"||P==="bottom"?(G=P,B=k===(await(d.isRTL==null?void 0:d.isRTL(l.floating))?"start":"end")?"left":"right"):(B=P,G=k==="end"?"top":"bottom");const N=D-E.top-E.bottom,W=z-E.left-E.right,Q=Dl(D-E[G],N),_e=Dl(z-E[B],W),Ce=!t.middlewareData.shift;let te=Q,we=_e;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(we=W),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(te=N),Ce&&!k){const ke=Aa(E.left,0),$e=Aa(E.right,0),Ue=Aa(E.top,0),at=Aa(E.bottom,0);R?we=z-2*(ke!==0||$e!==0?ke+$e:Aa(E.left,E.right)):te=D-2*(Ue!==0||at!==0?Ue+at:Aa(E.top,E.bottom))}await b({...t,availableWidth:we,availableHeight:te});const Pe=await d.getDimensions(l.floating);return z!==Pe.width||D!==Pe.height?{reset:{rects:!0}}:{}}}};function kg(){return typeof window<"u"}function kh(e){return _k(e)?(e.nodeName||"").toLowerCase():"#document"}function Pa(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function eo(e){var t;return(t=(_k(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function _k(e){return kg()?e instanceof Node||e instanceof Pa(e).Node:!1}function Ps(e){return kg()?e instanceof Element||e instanceof Pa(e).Element:!1}function Qs(e){return kg()?e instanceof HTMLElement||e instanceof Pa(e).HTMLElement:!1}function MS(e){return!kg()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Pa(e).ShadowRoot}const zB=new Set(["inline","contents"]);function np(e){const{overflow:t,overflowX:r,overflowY:a,display:o}=Ms(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!zB.has(o)}const OB=new Set(["table","td","th"]);function NB(e){return OB.has(kh(e))}const BB=[":popover-open",":modal"];function Ig(e){return BB.some(t=>{try{return e.matches(t)}catch{return!1}})}const UB=["transform","translate","scale","rotate","perspective"],VB=["transform","translate","scale","rotate","perspective","filter"],jB=["paint","layout","strict","content"];function d1(e){const t=p1(),r=Ps(e)?Ms(e):e;return UB.some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||VB.some(a=>(r.willChange||"").includes(a))||jB.some(a=>(r.contain||"").includes(a))}function $B(e){let t=Ll(e);for(;Qs(t)&&!gh(t);){if(d1(t))return t;if(Ig(t))return null;t=Ll(t)}return null}function p1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const GB=new Set(["html","body","#document"]);function gh(e){return GB.has(kh(e))}function Ms(e){return Pa(e).getComputedStyle(e)}function Pg(e){return Ps(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ll(e){if(kh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||MS(e)&&e.host||eo(e);return MS(t)?t.host:t}function yk(e){const t=Ll(e);return gh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Qs(t)&&np(t)?t:yk(t)}function jd(e,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const o=yk(e),h=o===((a=e.ownerDocument)==null?void 0:a.body),d=Pa(o);if(h){const l=zx(d);return t.concat(d,d.visualViewport||[],np(o)?o:[],l&&r?jd(l):[])}return t.concat(o,jd(o,[],r))}function zx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function xk(e){const t=Ms(e);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const o=Qs(e),h=o?e.offsetWidth:r,d=o?e.offsetHeight:a,l=Xm(r)!==h||Xm(a)!==d;return l&&(r=h,a=d),{width:r,height:a,$:l}}function m1(e){return Ps(e)?e:e.contextElement}function sh(e){const t=m1(e);if(!Qs(t))return Ys(1);const r=t.getBoundingClientRect(),{width:a,height:o,$:h}=xk(t);let d=(h?Xm(r.width):r.width)/a,l=(h?Xm(r.height):r.height)/o;return(!d||!Number.isFinite(d))&&(d=1),(!l||!Number.isFinite(l))&&(l=1),{x:d,y:l}}const WB=Ys(0);function vk(e){const t=Pa(e);return!p1()||!t.visualViewport?WB:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function HB(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Pa(e)?!1:t}function Rc(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),h=m1(e);let d=Ys(1);t&&(a?Ps(a)&&(d=sh(a)):d=sh(e));const l=HB(h,r,a)?vk(h):Ys(0);let b=(o.left+l.x)/d.x,w=(o.top+l.y)/d.y,E=o.width/d.x,P=o.height/d.y;if(h){const k=Pa(h),R=a&&Ps(a)?Pa(a):a;let z=k,D=zx(z);for(;D&&a&&R!==z;){const G=sh(D),B=D.getBoundingClientRect(),N=Ms(D),W=B.left+(D.clientLeft+parseFloat(N.paddingLeft))*G.x,Q=B.top+(D.clientTop+parseFloat(N.paddingTop))*G.y;b*=G.x,w*=G.y,E*=G.x,P*=G.y,b+=W,w+=Q,z=Pa(D),D=zx(z)}}return Ym({width:E,height:P,x:b,y:w})}function Mg(e,t){const r=Pg(e).scrollLeft;return t?t.left+r:Rc(eo(e)).left+r}function wk(e,t){const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-Mg(e,r),o=r.top+t.scrollTop;return{x:a,y:o}}function qB(e){let{elements:t,rect:r,offsetParent:a,strategy:o}=e;const h=o==="fixed",d=eo(a),l=t?Ig(t.floating):!1;if(a===d||l&&h)return r;let b={scrollLeft:0,scrollTop:0},w=Ys(1);const E=Ys(0),P=Qs(a);if((P||!P&&!h)&&((kh(a)!=="body"||np(d))&&(b=Pg(a)),Qs(a))){const R=Rc(a);w=sh(a),E.x=R.x+a.clientLeft,E.y=R.y+a.clientTop}const k=d&&!P&&!h?wk(d,b):Ys(0);return{width:r.width*w.x,height:r.height*w.y,x:r.x*w.x-b.scrollLeft*w.x+E.x+k.x,y:r.y*w.y-b.scrollTop*w.y+E.y+k.y}}function ZB(e){return Array.from(e.getClientRects())}function XB(e){const t=eo(e),r=Pg(e),a=e.ownerDocument.body,o=Aa(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),h=Aa(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let d=-r.scrollLeft+Mg(e);const l=-r.scrollTop;return Ms(a).direction==="rtl"&&(d+=Aa(t.clientWidth,a.clientWidth)-o),{width:o,height:h,x:d,y:l}}const RS=25;function KB(e,t){const r=Pa(e),a=eo(e),o=r.visualViewport;let h=a.clientWidth,d=a.clientHeight,l=0,b=0;if(o){h=o.width,d=o.height;const E=p1();(!E||E&&t==="fixed")&&(l=o.offsetLeft,b=o.offsetTop)}const w=Mg(a);if(w<=0){const E=a.ownerDocument,P=E.body,k=getComputedStyle(P),R=E.compatMode==="CSS1Compat"&&parseFloat(k.marginLeft)+parseFloat(k.marginRight)||0,z=Math.abs(a.clientWidth-P.clientWidth-R);z<=RS&&(h-=z)}else w<=RS&&(h+=w);return{width:h,height:d,x:l,y:b}}const YB=new Set(["absolute","fixed"]);function JB(e,t){const r=Rc(e,!0,t==="fixed"),a=r.top+e.clientTop,o=r.left+e.clientLeft,h=Qs(e)?sh(e):Ys(1),d=e.clientWidth*h.x,l=e.clientHeight*h.y,b=o*h.x,w=a*h.y;return{width:d,height:l,x:b,y:w}}function DS(e,t,r){let a;if(t==="viewport")a=KB(e,r);else if(t==="document")a=XB(eo(e));else if(Ps(t))a=JB(t,r);else{const o=vk(e);a={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Ym(a)}function bk(e,t){const r=Ll(e);return r===t||!Ps(r)||gh(r)?!1:Ms(r).position==="fixed"||bk(r,t)}function QB(e,t){const r=t.get(e);if(r)return r;let a=jd(e,[],!1).filter(l=>Ps(l)&&kh(l)!=="body"),o=null;const h=Ms(e).position==="fixed";let d=h?Ll(e):e;for(;Ps(d)&&!gh(d);){const l=Ms(d),b=d1(d);!b&&l.position==="fixed"&&(o=null),(h?!b&&!o:!b&&l.position==="static"&&!!o&&YB.has(o.position)||np(d)&&!b&&bk(e,d))?a=a.filter(E=>E!==d):o=l,d=Ll(d)}return t.set(e,a),a}function e9(e){let{element:t,boundary:r,rootBoundary:a,strategy:o}=e;const d=[...r==="clippingAncestors"?Ig(t)?[]:QB(t,this._c):[].concat(r),a],l=d[0],b=d.reduce((w,E)=>{const P=DS(t,E,o);return w.top=Aa(P.top,w.top),w.right=Dl(P.right,w.right),w.bottom=Dl(P.bottom,w.bottom),w.left=Aa(P.left,w.left),w},DS(t,l,o));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}}function t9(e){const{width:t,height:r}=xk(e);return{width:t,height:r}}function r9(e,t,r){const a=Qs(t),o=eo(t),h=r==="fixed",d=Rc(e,!0,h,t);let l={scrollLeft:0,scrollTop:0};const b=Ys(0);function w(){b.x=Mg(o)}if(a||!a&&!h)if((kh(t)!=="body"||np(o))&&(l=Pg(t)),a){const R=Rc(t,!0,h,t);b.x=R.x+t.clientLeft,b.y=R.y+t.clientTop}else o&&w();h&&!a&&o&&w();const E=o&&!a&&!h?wk(o,l):Ys(0),P=d.left+l.scrollLeft-b.x-E.x,k=d.top+l.scrollTop-b.y-E.y;return{x:P,y:k,width:d.width,height:d.height}}function Py(e){return Ms(e).position==="static"}function LS(e,t){if(!Qs(e)||Ms(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return eo(e)===r&&(r=r.ownerDocument.body),r}function Sk(e,t){const r=Pa(e);if(Ig(e))return r;if(!Qs(e)){let o=Ll(e);for(;o&&!gh(o);){if(Ps(o)&&!Py(o))return o;o=Ll(o)}return r}let a=LS(e,t);for(;a&&NB(a)&&Py(a);)a=LS(a,t);return a&&gh(a)&&Py(a)&&!d1(a)?r:a||$B(e)||r}const n9=async function(e){const t=this.getOffsetParent||Sk,r=this.getDimensions,a=await r(e.floating);return{reference:r9(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function i9(e){return Ms(e).direction==="rtl"}const a9={convertOffsetParentRelativeRectToViewportRelativeRect:qB,getDocumentElement:eo,getClippingRect:e9,getOffsetParent:Sk,getElementRects:n9,getClientRects:ZB,getDimensions:t9,getScale:sh,isElement:Ps,isRTL:i9};function Tk(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function s9(e,t){let r=null,a;const o=eo(e);function h(){var l;clearTimeout(a),(l=r)==null||l.disconnect(),r=null}function d(l,b){l===void 0&&(l=!1),b===void 0&&(b=1),h();const w=e.getBoundingClientRect(),{left:E,top:P,width:k,height:R}=w;if(l||t(),!k||!R)return;const z=V0(P),D=V0(o.clientWidth-(E+k)),G=V0(o.clientHeight-(P+R)),B=V0(E),W={rootMargin:-z+"px "+-D+"px "+-G+"px "+-B+"px",threshold:Aa(0,Dl(1,b))||1};let Q=!0;function _e(Ce){const te=Ce[0].intersectionRatio;if(te!==b){if(!Q)return d();te?d(!1,te):a=setTimeout(()=>{d(!1,1e-7)},1e3)}te===1&&!Tk(w,e.getBoundingClientRect())&&d(),Q=!1}try{r=new IntersectionObserver(_e,{...W,root:o.ownerDocument})}catch{r=new IntersectionObserver(_e,W)}r.observe(e)}return d(!0),h}function o9(e,t,r,a){a===void 0&&(a={});const{ancestorScroll:o=!0,ancestorResize:h=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:b=!1}=a,w=m1(e),E=o||h?[...w?jd(w):[],...jd(t)]:[];E.forEach(B=>{o&&B.addEventListener("scroll",r,{passive:!0}),h&&B.addEventListener("resize",r)});const P=w&&l?s9(w,r):null;let k=-1,R=null;d&&(R=new ResizeObserver(B=>{let[N]=B;N&&N.target===w&&R&&(R.unobserve(t),cancelAnimationFrame(k),k=requestAnimationFrame(()=>{var W;(W=R)==null||W.observe(t)})),r()}),w&&!b&&R.observe(w),R.observe(t));let z,D=b?Rc(e):null;b&&G();function G(){const B=Rc(e);D&&!Tk(D,B)&&r(),D=B,z=requestAnimationFrame(G)}return r(),()=>{var B;E.forEach(N=>{o&&N.removeEventListener("scroll",r),h&&N.removeEventListener("resize",r)}),P==null||P(),(B=R)==null||B.disconnect(),R=null,b&&cancelAnimationFrame(z)}}const l9=RB,c9=DB,u9=IB,h9=FB,f9=PB,FS=kB,d9=LB,p9=(e,t,r)=>{const a=new Map,o={platform:a9,...r},h={...o.platform,_c:a};return AB(e,t,{...o,platform:h})};var m9=typeof document<"u",g9=function(){},sm=m9?ae.useLayoutEffect:g9;function Jm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,a,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!Jm(e[a],t[a]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,o[a]))return!1;for(a=r;a--!==0;){const h=o[a];if(!(h==="_owner"&&e.$$typeof)&&!Jm(e[h],t[h]))return!1}return!0}return e!==e&&t!==t}function Ek(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function zS(e,t){const r=Ek(e);return Math.round(t*r)/r}function My(e){const t=ae.useRef(e);return sm(()=>{t.current=e}),t}function _9(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:o,elements:{reference:h,floating:d}={},transform:l=!0,whileElementsMounted:b,open:w}=e,[E,P]=ae.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[k,R]=ae.useState(a);Jm(k,a)||R(a);const[z,D]=ae.useState(null),[G,B]=ae.useState(null),N=ae.useCallback(Ke=>{Ke!==Ce.current&&(Ce.current=Ke,D(Ke))},[]),W=ae.useCallback(Ke=>{Ke!==te.current&&(te.current=Ke,B(Ke))},[]),Q=h||z,_e=d||G,Ce=ae.useRef(null),te=ae.useRef(null),we=ae.useRef(E),Pe=b!=null,ke=My(b),$e=My(o),Ue=My(w),at=ae.useCallback(()=>{if(!Ce.current||!te.current)return;const Ke={placement:t,strategy:r,middleware:k};$e.current&&(Ke.platform=$e.current),p9(Ce.current,te.current,Ke).then(dt=>{const Dt={...dt,isPositioned:Ue.current!==!1};yt.current&&!Jm(we.current,Dt)&&(we.current=Dt,wh.flushSync(()=>{P(Dt)}))})},[k,t,r,$e,Ue]);sm(()=>{w===!1&&we.current.isPositioned&&(we.current.isPositioned=!1,P(Ke=>({...Ke,isPositioned:!1})))},[w]);const yt=ae.useRef(!1);sm(()=>(yt.current=!0,()=>{yt.current=!1}),[]),sm(()=>{if(Q&&(Ce.current=Q),_e&&(te.current=_e),Q&&_e){if(ke.current)return ke.current(Q,_e,at);at()}},[Q,_e,at,ke,Pe]);const gt=ae.useMemo(()=>({reference:Ce,floating:te,setReference:N,setFloating:W}),[N,W]),nt=ae.useMemo(()=>({reference:Q,floating:_e}),[Q,_e]),Rt=ae.useMemo(()=>{const Ke={position:r,left:0,top:0};if(!nt.floating)return Ke;const dt=zS(nt.floating,E.x),Dt=zS(nt.floating,E.y);return l?{...Ke,transform:"translate("+dt+"px, "+Dt+"px)",...Ek(nt.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:dt,top:Dt}},[r,l,nt.floating,E.x,E.y]);return ae.useMemo(()=>({...E,update:at,refs:gt,elements:nt,floatingStyles:Rt}),[E,at,gt,nt,Rt])}const y9=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:a,padding:o}=typeof e=="function"?e(r):e;return a&&t(a)?a.current!=null?FS({element:a.current,padding:o}).fn(r):{}:a?FS({element:a,padding:o}).fn(r):{}}}},x9=(e,t)=>({...l9(e),options:[e,t]}),v9=(e,t)=>({...c9(e),options:[e,t]}),w9=(e,t)=>({...d9(e),options:[e,t]}),b9=(e,t)=>({...u9(e),options:[e,t]}),S9=(e,t)=>({...h9(e),options:[e,t]}),T9=(e,t)=>({...f9(e),options:[e,t]}),E9=(e,t)=>({...y9(e),options:[e,t]});var C9="Arrow",Ck=ae.forwardRef((e,t)=>{const{children:r,width:a=10,height:o=5,...h}=e;return Se.jsx(ti.svg,{...h,ref:t,width:a,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:Se.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ck.displayName=C9;var A9=Ck;function g1(e){const[t,r]=ae.useState(void 0);return Rl(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const h=o[0];let d,l;if("borderBoxSize"in h){const b=h.borderBoxSize,w=Array.isArray(b)?b[0]:b;d=w.inlineSize,l=w.blockSize}else d=e.offsetWidth,l=e.offsetHeight;r({width:d,height:l})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else r(void 0)},[e]),t}var _1="Popper",[Ak,kk]=Vc(_1),[k9,Ik]=Ak(_1),Pk=e=>{const{__scopePopper:t,children:r}=e,[a,o]=ae.useState(null);return Se.jsx(k9,{scope:t,anchor:a,onAnchorChange:o,children:r})};Pk.displayName=_1;var Mk="PopperAnchor",Rk=ae.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:a,...o}=e,h=Ik(Mk,r),d=ae.useRef(null),l=Xi(t,d),b=ae.useRef(null);return ae.useEffect(()=>{const w=b.current;b.current=(a==null?void 0:a.current)||d.current,w!==b.current&&h.onAnchorChange(b.current)}),a?null:Se.jsx(ti.div,{...o,ref:l})});Rk.displayName=Mk;var y1="PopperContent",[I9,P9]=Ak(y1),Dk=ae.forwardRef((e,t)=>{var Je,lt,ft,ot,er,Zt;const{__scopePopper:r,side:a="bottom",sideOffset:o=0,align:h="center",alignOffset:d=0,arrowPadding:l=0,avoidCollisions:b=!0,collisionBoundary:w=[],collisionPadding:E=0,sticky:P="partial",hideWhenDetached:k=!1,updatePositionStrategy:R="optimized",onPlaced:z,...D}=e,G=Ik(y1,r),[B,N]=ae.useState(null),W=Xi(t,Yt=>N(Yt)),[Q,_e]=ae.useState(null),Ce=g1(Q),te=(Ce==null?void 0:Ce.width)??0,we=(Ce==null?void 0:Ce.height)??0,Pe=a+(h!=="center"?"-"+h:""),ke=typeof E=="number"?E:{top:0,right:0,bottom:0,left:0,...E},$e=Array.isArray(w)?w:[w],Ue=$e.length>0,at={padding:ke,boundary:$e.filter(R9),altBoundary:Ue},{refs:yt,floatingStyles:gt,placement:nt,isPositioned:Rt,middlewareData:Ke}=_9({strategy:"fixed",placement:Pe,whileElementsMounted:(...Yt)=>o9(...Yt,{animationFrame:R==="always"}),elements:{reference:G.anchor},middleware:[x9({mainAxis:o+we,alignmentAxis:d}),b&&v9({mainAxis:!0,crossAxis:!1,limiter:P==="partial"?w9():void 0,...at}),b&&b9({...at}),S9({...at,apply:({elements:Yt,rects:Xt,availableWidth:Gr,availableHeight:gr})=>{const{width:Lt,height:hr}=Xt.reference,Ur=Yt.floating.style;Ur.setProperty("--radix-popper-available-width",`${Gr}px`),Ur.setProperty("--radix-popper-available-height",`${gr}px`),Ur.setProperty("--radix-popper-anchor-width",`${Lt}px`),Ur.setProperty("--radix-popper-anchor-height",`${hr}px`)}}),Q&&E9({element:Q,padding:l}),D9({arrowWidth:te,arrowHeight:we}),k&&T9({strategy:"referenceHidden",...at})]}),[dt,Dt]=zk(nt),jt=rp(z);Rl(()=>{Rt&&(jt==null||jt())},[Rt,jt]);const xe=(Je=Ke.arrow)==null?void 0:Je.x,Te=(lt=Ke.arrow)==null?void 0:lt.y,be=((ft=Ke.arrow)==null?void 0:ft.centerOffset)!==0,[Ee,je]=ae.useState();return Rl(()=>{B&&je(window.getComputedStyle(B).zIndex)},[B]),Se.jsx("div",{ref:yt.setFloating,"data-radix-popper-content-wrapper":"",style:{...gt,transform:Rt?gt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[(ot=Ke.transformOrigin)==null?void 0:ot.x,(er=Ke.transformOrigin)==null?void 0:er.y].join(" "),...((Zt=Ke.hide)==null?void 0:Zt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Se.jsx(I9,{scope:r,placedSide:dt,onArrowChange:_e,arrowX:xe,arrowY:Te,shouldHideArrow:be,children:Se.jsx(ti.div,{"data-side":dt,"data-align":Dt,...D,ref:W,style:{...D.style,animation:Rt?void 0:"none"}})})})});Dk.displayName=y1;var Lk="PopperArrow",M9={top:"bottom",right:"left",bottom:"top",left:"right"},Fk=ae.forwardRef(function(t,r){const{__scopePopper:a,...o}=t,h=P9(Lk,a),d=M9[h.placedSide];return Se.jsx("span",{ref:h.onArrowChange,style:{position:"absolute",left:h.arrowX,top:h.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[h.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[h.placedSide],visibility:h.shouldHideArrow?"hidden":void 0},children:Se.jsx(A9,{...o,ref:r,style:{...o.style,display:"block"}})})});Fk.displayName=Lk;function R9(e){return e!==null}var D9=e=>({name:"transformOrigin",options:e,fn(t){var G,B,N;const{placement:r,rects:a,middlewareData:o}=t,d=((G=o.arrow)==null?void 0:G.centerOffset)!==0,l=d?0:e.arrowWidth,b=d?0:e.arrowHeight,[w,E]=zk(r),P={start:"0%",center:"50%",end:"100%"}[E],k=(((B=o.arrow)==null?void 0:B.x)??0)+l/2,R=(((N=o.arrow)==null?void 0:N.y)??0)+b/2;let z="",D="";return w==="bottom"?(z=d?P:`${k}px`,D=`${-b}px`):w==="top"?(z=d?P:`${k}px`,D=`${a.floating.height+b}px`):w==="right"?(z=`${-b}px`,D=d?P:`${R}px`):w==="left"&&(z=`${a.floating.width+b}px`,D=d?P:`${R}px`),{data:{x:z,y:D}}}});function zk(e){const[t,r="center"]=e.split("-");return[t,r]}var L9=Pk,F9=Rk,z9=Dk,O9=Fk,N9="Portal",Ok=ae.forwardRef((e,t)=>{var l;const{container:r,...a}=e,[o,h]=ae.useState(!1);Rl(()=>h(!0),[]);const d=r||o&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return d?XM.createPortal(Se.jsx(ti.div,{...a,ref:t}),d):null});Ok.displayName=N9;function B9(e,t){return ae.useReducer((r,a)=>t[r][a]??r,e)}var ip=e=>{const{present:t,children:r}=e,a=U9(t),o=typeof r=="function"?r({present:a.isPresent}):ae.Children.only(r),h=Xi(a.ref,V9(o));return typeof r=="function"||a.isPresent?ae.cloneElement(o,{ref:h}):null};ip.displayName="Presence";function U9(e){const[t,r]=ae.useState(),a=ae.useRef(null),o=ae.useRef(e),h=ae.useRef("none"),d=e?"mounted":"unmounted",[l,b]=B9(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ae.useEffect(()=>{const w=j0(a.current);h.current=l==="mounted"?w:"none"},[l]),Rl(()=>{const w=a.current,E=o.current;if(E!==e){const k=h.current,R=j0(w);e?b("MOUNT"):R==="none"||(w==null?void 0:w.display)==="none"?b("UNMOUNT"):b(E&&k!==R?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,b]),Rl(()=>{if(t){let w;const E=t.ownerDocument.defaultView??window,P=R=>{const D=j0(a.current).includes(CSS.escape(R.animationName));if(R.target===t&&D&&(b("ANIMATION_END"),!o.current)){const G=t.style.animationFillMode;t.style.animationFillMode="forwards",w=E.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=G)})}},k=R=>{R.target===t&&(h.current=j0(a.current))};return t.addEventListener("animationstart",k),t.addEventListener("animationcancel",P),t.addEventListener("animationend",P),()=>{E.clearTimeout(w),t.removeEventListener("animationstart",k),t.removeEventListener("animationcancel",P),t.removeEventListener("animationend",P)}}else b("ANIMATION_END")},[t,b]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:ae.useCallback(w=>{a.current=w?getComputedStyle(w):null,r(w)},[])}}function j0(e){return(e==null?void 0:e.animationName)||"none"}function V9(e){var a,o;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var j9=Hx[" useInsertionEffect ".trim().toString()]||Rl;function Rg({prop:e,defaultProp:t,onChange:r=()=>{},caller:a}){const[o,h,d]=$9({defaultProp:t,onChange:r}),l=e!==void 0,b=l?e:o;{const E=ae.useRef(e!==void 0);ae.useEffect(()=>{const P=E.current;P!==l&&console.warn(`${a} is changing from ${P?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),E.current=l},[l,a])}const w=ae.useCallback(E=>{var P;if(l){const k=G9(E)?E(e):E;k!==e&&((P=d.current)==null||P.call(d,k))}else h(E)},[l,e,h,d]);return[b,w]}function $9({defaultProp:e,onChange:t}){const[r,a]=ae.useState(e),o=ae.useRef(r),h=ae.useRef(t);return j9(()=>{h.current=t},[t]),ae.useEffect(()=>{var d;o.current!==r&&((d=h.current)==null||d.call(h,r),o.current=r)},[r,o]),[r,a,h]}function G9(e){return typeof e=="function"}var W9=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),H9="VisuallyHidden",Nk=ae.forwardRef((e,t)=>Se.jsx(ti.span,{...e,ref:t,style:{...W9,...e.style}}));Nk.displayName=H9;var q9=Nk,[Dg]=Vc("Tooltip",[kk]),Lg=kk(),Bk="TooltipProvider",Z9=700,Ox="tooltip.open",[X9,x1]=Dg(Bk),Uk=e=>{const{__scopeTooltip:t,delayDuration:r=Z9,skipDelayDuration:a=300,disableHoverableContent:o=!1,children:h}=e,d=ae.useRef(!0),l=ae.useRef(!1),b=ae.useRef(0);return ae.useEffect(()=>{const w=b.current;return()=>window.clearTimeout(w)},[]),Se.jsx(X9,{scope:t,isOpenDelayedRef:d,delayDuration:r,onOpen:ae.useCallback(()=>{window.clearTimeout(b.current),d.current=!1},[]),onClose:ae.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>d.current=!0,a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:ae.useCallback(w=>{l.current=w},[]),disableHoverableContent:o,children:h})};Uk.displayName=Bk;var $d="Tooltip",[K9,ap]=Dg($d),Vk=e=>{const{__scopeTooltip:t,children:r,open:a,defaultOpen:o,onOpenChange:h,disableHoverableContent:d,delayDuration:l}=e,b=x1($d,e.__scopeTooltip),w=Lg(t),[E,P]=ae.useState(null),k=pk(),R=ae.useRef(0),z=d??b.disableHoverableContent,D=l??b.delayDuration,G=ae.useRef(!1),[B,N]=Rg({prop:a,defaultProp:o??!1,onChange:te=>{te?(b.onOpen(),document.dispatchEvent(new CustomEvent(Ox))):b.onClose(),h==null||h(te)},caller:$d}),W=ae.useMemo(()=>B?G.current?"delayed-open":"instant-open":"closed",[B]),Q=ae.useCallback(()=>{window.clearTimeout(R.current),R.current=0,G.current=!1,N(!0)},[N]),_e=ae.useCallback(()=>{window.clearTimeout(R.current),R.current=0,N(!1)},[N]),Ce=ae.useCallback(()=>{window.clearTimeout(R.current),R.current=window.setTimeout(()=>{G.current=!0,N(!0),R.current=0},D)},[D,N]);return ae.useEffect(()=>()=>{R.current&&(window.clearTimeout(R.current),R.current=0)},[]),Se.jsx(L9,{...w,children:Se.jsx(K9,{scope:t,contentId:k,open:B,stateAttribute:W,trigger:E,onTriggerChange:P,onTriggerEnter:ae.useCallback(()=>{b.isOpenDelayedRef.current?Ce():Q()},[b.isOpenDelayedRef,Ce,Q]),onTriggerLeave:ae.useCallback(()=>{z?_e():(window.clearTimeout(R.current),R.current=0)},[_e,z]),onOpen:Q,onClose:_e,disableHoverableContent:z,children:r})})};Vk.displayName=$d;var Nx="TooltipTrigger",jk=ae.forwardRef((e,t)=>{const{__scopeTooltip:r,...a}=e,o=ap(Nx,r),h=x1(Nx,r),d=Lg(r),l=ae.useRef(null),b=Xi(t,l,o.onTriggerChange),w=ae.useRef(!1),E=ae.useRef(!1),P=ae.useCallback(()=>w.current=!1,[]);return ae.useEffect(()=>()=>document.removeEventListener("pointerup",P),[P]),Se.jsx(F9,{asChild:!0,...d,children:Se.jsx(ti.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...a,ref:b,onPointerMove:Fn(e.onPointerMove,k=>{k.pointerType!=="touch"&&!E.current&&!h.isPointerInTransitRef.current&&(o.onTriggerEnter(),E.current=!0)}),onPointerLeave:Fn(e.onPointerLeave,()=>{o.onTriggerLeave(),E.current=!1}),onPointerDown:Fn(e.onPointerDown,()=>{o.open&&o.onClose(),w.current=!0,document.addEventListener("pointerup",P,{once:!0})}),onFocus:Fn(e.onFocus,()=>{w.current||o.onOpen()}),onBlur:Fn(e.onBlur,o.onClose),onClick:Fn(e.onClick,o.onClose)})})});jk.displayName=Nx;var v1="TooltipPortal",[Y9,J9]=Dg(v1,{forceMount:void 0}),$k=e=>{const{__scopeTooltip:t,forceMount:r,children:a,container:o}=e,h=ap(v1,t);return Se.jsx(Y9,{scope:t,forceMount:r,children:Se.jsx(ip,{present:r||h.open,children:Se.jsx(Ok,{asChild:!0,container:o,children:a})})})};$k.displayName=v1;var _h="TooltipContent",Gk=ae.forwardRef((e,t)=>{const r=J9(_h,e.__scopeTooltip),{forceMount:a=r.forceMount,side:o="top",...h}=e,d=ap(_h,e.__scopeTooltip);return Se.jsx(ip,{present:a||d.open,children:d.disableHoverableContent?Se.jsx(Wk,{side:o,...h,ref:t}):Se.jsx(Q9,{side:o,...h,ref:t})})}),Q9=ae.forwardRef((e,t)=>{const r=ap(_h,e.__scopeTooltip),a=x1(_h,e.__scopeTooltip),o=ae.useRef(null),h=Xi(t,o),[d,l]=ae.useState(null),{trigger:b,onClose:w}=r,E=o.current,{onPointerInTransitChange:P}=a,k=ae.useCallback(()=>{l(null),P(!1)},[P]),R=ae.useCallback((z,D)=>{const G=z.currentTarget,B={x:z.clientX,y:z.clientY},N=i7(B,G.getBoundingClientRect()),W=a7(B,N),Q=s7(D.getBoundingClientRect()),_e=l7([...W,...Q]);l(_e),P(!0)},[P]);return ae.useEffect(()=>()=>k(),[k]),ae.useEffect(()=>{if(b&&E){const z=G=>R(G,E),D=G=>R(G,b);return b.addEventListener("pointerleave",z),E.addEventListener("pointerleave",D),()=>{b.removeEventListener("pointerleave",z),E.removeEventListener("pointerleave",D)}}},[b,E,R,k]),ae.useEffect(()=>{if(d){const z=D=>{const G=D.target,B={x:D.clientX,y:D.clientY},N=(b==null?void 0:b.contains(G))||(E==null?void 0:E.contains(G)),W=!o7(B,d);N?k():W&&(k(),w())};return document.addEventListener("pointermove",z),()=>document.removeEventListener("pointermove",z)}},[b,E,d,w,k]),Se.jsx(Wk,{...e,ref:h})}),[e7,t7]=Dg($d,{isInside:!1}),r7=ER("TooltipContent"),Wk=ae.forwardRef((e,t)=>{const{__scopeTooltip:r,children:a,"aria-label":o,onEscapeKeyDown:h,onPointerDownOutside:d,...l}=e,b=ap(_h,r),w=Lg(r),{onClose:E}=b;return ae.useEffect(()=>(document.addEventListener(Ox,E),()=>document.removeEventListener(Ox,E)),[E]),ae.useEffect(()=>{if(b.trigger){const P=k=>{const R=k.target;R!=null&&R.contains(b.trigger)&&E()};return window.addEventListener("scroll",P,{capture:!0}),()=>window.removeEventListener("scroll",P,{capture:!0})}},[b.trigger,E]),Se.jsx(fk,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:h,onPointerDownOutside:d,onFocusOutside:P=>P.preventDefault(),onDismiss:E,children:Se.jsxs(z9,{"data-state":b.stateAttribute,...w,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Se.jsx(r7,{children:a}),Se.jsx(e7,{scope:r,isInside:!0,children:Se.jsx(q9,{id:b.contentId,role:"tooltip",children:o||a})})]})})});Gk.displayName=_h;var Hk="TooltipArrow",n7=ae.forwardRef((e,t)=>{const{__scopeTooltip:r,...a}=e,o=Lg(r);return t7(Hk,r).isInside?null:Se.jsx(O9,{...o,...a,ref:t})});n7.displayName=Hk;function i7(e,t){const r=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),h=Math.abs(t.left-e.x);switch(Math.min(r,a,o,h)){case h:return"left";case o:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function a7(e,t,r=5){const a=[];switch(t){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return a}function s7(e){const{top:t,right:r,bottom:a,left:o}=e;return[{x:o,y:t},{x:r,y:t},{x:r,y:a},{x:o,y:a}]}function o7(e,t){const{x:r,y:a}=e;let o=!1;for(let h=0,d=t.length-1;h<t.length;d=h++){const l=t[h],b=t[d],w=l.x,E=l.y,P=b.x,k=b.y;E>a!=k>a&&r<(P-w)*(a-E)/(k-E)+w&&(o=!o)}return o}function l7(e){const t=e.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),c7(t)}function c7(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const o=e[a];for(;t.length>=2;){const h=t[t.length-1],d=t[t.length-2];if((h.x-d.x)*(o.y-d.y)>=(h.y-d.y)*(o.x-d.x))t.pop();else break}t.push(o)}t.pop();const r=[];for(let a=e.length-1;a>=0;a--){const o=e[a];for(;r.length>=2;){const h=r[r.length-1],d=r[r.length-2];if((h.x-d.x)*(o.y-d.y)>=(h.y-d.y)*(o.x-d.x))r.pop();else break}r.push(o)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var u7=Uk,h7=Vk,f7=jk,d7=$k,qk=Gk;const El=u7,vs=h7,ws=f7,Ja=ae.forwardRef(({className:e,sideOffset:t=4,...r},a)=>Se.jsx(d7,{children:Se.jsx(qk,{ref:a,sideOffset:t,className:Ac("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r})}));Ja.displayName=qk.displayName;const OS=({feature:e,index:t})=>{const r=e.properties||{},a=[{label:"",key:"avts"},{label:"",key:"name_otch"},{label:"",key:"org_isp"},{label:" ",key:"god_nach"},{label:" ",key:"god_end"},{label:"",key:"method"},{label:"",key:"nom_1000"},{label:"",key:"scale"},{label:"",key:"tgf"},{label:".  ",key:"in_n_rosg"},{label:".  ",key:"in_n_tgf"},{label:" ",key:"n_uk_rosg"},{label:" ",key:"n_uk_tgf"},{label:"",key:"web_uk_id"},{label:"",key:"vid_iz"},{label:"",key:"id"}];return Se.jsxs("div",{className:"overflow-x-auto mb-6",children:[Se.jsxs("h3",{className:"font-medium mb-2 dark:text-slate-200",children:[" ",t+1]}),Se.jsxs("table",{className:"min-w-full border-collapse mb-4",children:[Se.jsx("thead",{children:Se.jsxs("tr",{children:[Se.jsx("th",{className:"border border-gray-300 p-2 dark:bg-slate-800 dark:text-slate-200",children:""}),Se.jsx("th",{className:"border border-gray-300 p-2 dark:bg-slate-800 dark:text-slate-200",children:""})]})}),Se.jsx("tbody",{children:a.map((o,h)=>Se.jsxs("tr",{className:h%2===0?"bg-white dark:bg-slate-800":"bg-gray-50 dark:bg-slate-700",children:[Se.jsx("td",{className:"border border-gray-300 p-2 dark:text-slate-200",children:o.label}),Se.jsx("td",{className:"border border-gray-300 p-2 dark:text-slate-200",children:r[o.key]||"-"})]},o.key))})]})]})};function NS(e){if(e.length===0)return;const t=lc.book_new(),r={avts:"",name_otch:"",org_isp:"",god_nach:" ",god_end:" ",method:"",nom_1000:"",scale:"",tgf:"",in_n_rosg:".  ",in_n_tgf:".  ",n_uk_rosg:" ",n_uk_tgf:" ",web_uk_id:"",vid_iz:"",id:"",name_otch1:" ()"},a=Array.from(new Set(e.flatMap(E=>Object.keys(E.properties)))),o=e.reduce((E,P)=>{const k=P.layer.id.split(".")[1];return E[k]||(E[k]=[]),E[k].push(P),E},{});Object.entries(o).forEach(([E,P])=>{const k=E==="stp"?"":E==="stl"?"":"",z=[a.map(G=>r[G]||G),...P.map(G=>a.map(B=>G.properties[B]||""))],D=lc.aoa_to_sheet(z);lc.book_append_sheet(t,D,k)});const d=[[...a.map(E=>r[E]||E),""],...e.map(E=>[...a.map(P=>E.properties[P]||""),E.layer.id.split(".")[1]==="stp"?"":E.layer.id.split(".")[1]==="stl"?"":""])],l=lc.aoa_to_sheet(d);lc.book_append_sheet(t,l,"");const b=[[" ",""],...a.map(E=>[E,r[E]||""])],w=lc.aoa_to_sheet(b);lc.book_append_sheet(t,w,""),G8(t,"export.xlsx")}function p7({hoveredFeatures:e,clickedFeatures:t,children:r,showFeatureTable:a,onToggleFeatureTable:o,activeInfoMode:h,onSetActiveInfoMode:d,showMarkerInfo:l,onToggleMarkerInfo:b}){const w=h!==null||l&&t.length>0;return Se.jsxs(Vv,{direction:"horizontal",children:[Se.jsx(xc,{minSize:40,defaultSize:40,children:r}),Se.jsx(Dd,{className:"w-1 bg-border"}),Se.jsx(xc,{minSize:0,defaultSize:w?20:0,className:"bg-background",children:Se.jsxs("div",{className:"h-full overflow-auto flex flex-col",children:[l&&Se.jsxs("div",{className:"flex-1 flex flex-col",children:[Se.jsxs("div",{className:"sticky top-0 bg-background z-10 pb-3",children:[Se.jsx("h3",{className:"text-sm font-medium mb-3 bg-blue-100 p-2 rounded",children:"  "}),Se.jsx("div",{className:"flex gap-2 px-3",children:Se.jsx(El,{children:Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:"outline",size:"sm",onClick:()=>NS(t),className:"h-8",disabled:t.length===0,children:Se.jsx(Cb,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"top",children:Se.jsx("p",{children:"  Excel"})})]})})})]}),Se.jsx("div",{className:"flex-1 overflow-auto px-3 pb-3",children:t.length>0?t.map((E,P)=>Se.jsx(OS,{feature:E,index:P},`clicked-${P}`)):Se.jsx("p",{className:"text-muted-foreground",children:"        "})})]}),h&&Se.jsxs("div",{className:"flex-1 flex flex-col",children:[Se.jsxs("div",{className:"sticky top-0 bg-background z-10 pb-3",children:[Se.jsxs("h3",{className:"text-sm font-medium mb-3 bg-gray-100 p-2 rounded",children:["   - ",h==="points"?"":h==="lines"?"":""]}),Se.jsx("div",{className:"flex gap-2 px-3",children:Se.jsx(El,{children:Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:"outline",size:"sm",onClick:()=>NS(e),className:"h-8",disabled:e.length===0,children:Se.jsx(Cb,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"top",children:Se.jsx("p",{children:"  Excel"})})]})})})]}),Se.jsx("div",{className:"flex-1 overflow-auto px-3 pb-3",children:e.length>0?e.map((E,P)=>Se.jsx(OS,{feature:E,index:P},`hovered-${P}`)):Se.jsx("p",{className:"text-muted-foreground",children:"       "})})]})]})}),Se.jsx(Dd,{className:"w-1 bg-border"}),Se.jsx(xc,{minSize:4,maxSize:4,defaultSize:4,className:"bg-background border-l border-border",children:Se.jsx("div",{className:"h-full flex flex-col items-center justify-start gap-2 p-2",children:Se.jsxs(El,{children:[Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:h==="points"?"default":"outline",size:"icon",onClick:()=>d(h==="points"?null:"points"),className:"w-10 h-10",children:Se.jsx(_D,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"left",children:Se.jsx("p",{children:"   - "})})]}),Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:h==="lines"?"default":"outline",size:"icon",onClick:()=>d(h==="lines"?null:"lines"),className:"w-10 h-10",children:Se.jsx(xD,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"left",children:Se.jsx("p",{children:"   - "})})]}),Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:h==="polygons"?"default":"outline",size:"icon",onClick:()=>d(h==="polygons"?null:"polygons"),className:"w-10 h-10",children:Se.jsx(vD,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"left",children:Se.jsx("p",{children:"   - "})})]}),Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:l?"default":"outline",size:"icon",onClick:()=>b(!l),className:"w-10 h-10",children:Se.jsx(dD,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"left",children:Se.jsx("p",{children:"  "})})]})]})})})]},w?"show":"hide")}function m7(){return Se.jsx(El,{children:Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:"outline",size:"icon",className:"w-10 h-10",children:Se.jsx(pD,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"right",children:Se.jsx("p",{children:"Home"})})]})})}function g7({onClick:e,isActive:t}){return Se.jsx(El,{children:Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:t?"default":"outline",size:"icon",className:"w-10 h-10",onClick:e,children:Se.jsx(mD,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"right",children:Se.jsx("p",{children:""})})]})})}function _7({onClick:e,isActive:t}){return Se.jsx(El,{children:Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:t?"default":"outline",size:"icon",className:"w-10 h-10",onClick:e,children:Se.jsx(gD,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"right",children:Se.jsx("p",{children:" "})})]})})}function y7({onClick:e,isActive:t}){return Se.jsx(El,{children:Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:t?"default":"outline",size:"icon",className:"w-10 h-10",onClick:e,children:Se.jsx(bD,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"right",children:Se.jsx("p",{children:""})})]})})}function x7(){return Se.jsx(El,{children:Se.jsxs(vs,{children:[Se.jsx(ws,{asChild:!0,children:Se.jsx(Ta,{variant:"outline",size:"icon",className:"w-10 h-10",children:Se.jsx(SD,{className:"w-4 h-4"})})}),Se.jsx(Ja,{side:"right",children:Se.jsx("p",{children:"User"})})]})})}function v7({onLayersClick:e,onBaseMapsClick:t,onAttributesClick:r,isLayersActive:a,isBaseMapsActive:o,isAttributesActive:h}){return Se.jsxs("div",{className:"flex flex-col items-center justify-start gap-2 p-2 bg-background border-r border-border",children:[Se.jsx(m7,{}),Se.jsx(g7,{onClick:e,isActive:a}),Se.jsx(_7,{onClick:t,isActive:o}),Se.jsx(y7,{onClick:r,isActive:h}),Se.jsx(x7,{})]})}function w7(){return Se.jsxs("div",{className:"bg-background border-t border-border p-4",children:[Se.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),Se.jsx("p",{className:"text-sm text-muted-foreground",children:"     ."})]})}var b7="Label",Zk=ae.forwardRef((e,t)=>Se.jsx(ti.label,{...e,ref:t,onMouseDown:r=>{var o;r.target.closest("button, input, select, textarea")||((o=e.onMouseDown)==null||o.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Zk.displayName=b7;var Xk=Zk;const Bx=ae.forwardRef(({className:e,...t},r)=>Se.jsx(Xk,{ref:r,className:Ac("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));Bx.displayName=Xk.displayName;function S7(e){const t=e+"CollectionProvider",[r,a]=Vc(t),[o,h]=r(t,{collectionRef:{current:null},itemMap:new Map}),d=D=>{const{scope:G,children:B}=D,N=xo.useRef(null),W=xo.useRef(new Map).current;return Se.jsx(o,{scope:G,itemMap:W,collectionRef:N,children:B})};d.displayName=t;const l=e+"CollectionSlot",b=Dm(l),w=xo.forwardRef((D,G)=>{const{scope:B,children:N}=D,W=h(l,B),Q=Xi(G,W.collectionRef);return Se.jsx(b,{ref:Q,children:N})});w.displayName=l;const E=e+"CollectionItemSlot",P="data-radix-collection-item",k=Dm(E),R=xo.forwardRef((D,G)=>{const{scope:B,children:N,...W}=D,Q=xo.useRef(null),_e=Xi(G,Q),Ce=h(E,B);return xo.useEffect(()=>(Ce.itemMap.set(Q,{ref:Q,...W}),()=>void Ce.itemMap.delete(Q))),Se.jsx(k,{[P]:"",ref:_e,children:N})});R.displayName=E;function z(D){const G=h(e+"CollectionConsumer",D);return xo.useCallback(()=>{const N=G.collectionRef.current;if(!N)return[];const W=Array.from(N.querySelectorAll(`[${P}]`));return Array.from(G.itemMap.values()).sort((Ce,te)=>W.indexOf(Ce.ref.current)-W.indexOf(te.ref.current))},[G.collectionRef,G.itemMap])}return[{Provider:d,Slot:w,ItemSlot:R},z,a]}var T7=ae.createContext(void 0);function Kk(e){const t=ae.useContext(T7);return e||t||"ltr"}var Ry="rovingFocusGroup.onEntryFocus",E7={bubbles:!1,cancelable:!0},sp="RovingFocusGroup",[Ux,Yk,C7]=S7(sp),[A7,Jk]=Vc(sp,[C7]),[k7,I7]=A7(sp),Qk=ae.forwardRef((e,t)=>Se.jsx(Ux.Provider,{scope:e.__scopeRovingFocusGroup,children:Se.jsx(Ux.Slot,{scope:e.__scopeRovingFocusGroup,children:Se.jsx(P7,{...e,ref:t})})}));Qk.displayName=sp;var P7=ae.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:o=!1,dir:h,currentTabStopId:d,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:b,onEntryFocus:w,preventScrollOnEntryFocus:E=!1,...P}=e,k=ae.useRef(null),R=Xi(t,k),z=Kk(h),[D,G]=Rg({prop:d,defaultProp:l??null,onChange:b,caller:sp}),[B,N]=ae.useState(!1),W=rp(w),Q=Yk(r),_e=ae.useRef(!1),[Ce,te]=ae.useState(0);return ae.useEffect(()=>{const we=k.current;if(we)return we.addEventListener(Ry,W),()=>we.removeEventListener(Ry,W)},[W]),Se.jsx(k7,{scope:r,orientation:a,dir:z,loop:o,currentTabStopId:D,onItemFocus:ae.useCallback(we=>G(we),[G]),onItemShiftTab:ae.useCallback(()=>N(!0),[]),onFocusableItemAdd:ae.useCallback(()=>te(we=>we+1),[]),onFocusableItemRemove:ae.useCallback(()=>te(we=>we-1),[]),children:Se.jsx(ti.div,{tabIndex:B||Ce===0?-1:0,"data-orientation":a,...P,ref:R,style:{outline:"none",...e.style},onMouseDown:Fn(e.onMouseDown,()=>{_e.current=!0}),onFocus:Fn(e.onFocus,we=>{const Pe=!_e.current;if(we.target===we.currentTarget&&Pe&&!B){const ke=new CustomEvent(Ry,E7);if(we.currentTarget.dispatchEvent(ke),!ke.defaultPrevented){const $e=Q().filter(nt=>nt.focusable),Ue=$e.find(nt=>nt.active),at=$e.find(nt=>nt.id===D),gt=[Ue,at,...$e].filter(Boolean).map(nt=>nt.ref.current);r4(gt,E)}}_e.current=!1}),onBlur:Fn(e.onBlur,()=>N(!1))})})}),e4="RovingFocusGroupItem",t4=ae.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:o=!1,tabStopId:h,children:d,...l}=e,b=pk(),w=h||b,E=I7(e4,r),P=E.currentTabStopId===w,k=Yk(r),{onFocusableItemAdd:R,onFocusableItemRemove:z,currentTabStopId:D}=E;return ae.useEffect(()=>{if(a)return R(),()=>z()},[a,R,z]),Se.jsx(Ux.ItemSlot,{scope:r,id:w,focusable:a,active:o,children:Se.jsx(ti.span,{tabIndex:P?0:-1,"data-orientation":E.orientation,...l,ref:t,onMouseDown:Fn(e.onMouseDown,G=>{a?E.onItemFocus(w):G.preventDefault()}),onFocus:Fn(e.onFocus,()=>E.onItemFocus(w)),onKeyDown:Fn(e.onKeyDown,G=>{if(G.key==="Tab"&&G.shiftKey){E.onItemShiftTab();return}if(G.target!==G.currentTarget)return;const B=D7(G,E.orientation,E.dir);if(B!==void 0){if(G.metaKey||G.ctrlKey||G.altKey||G.shiftKey)return;G.preventDefault();let W=k().filter(Q=>Q.focusable).map(Q=>Q.ref.current);if(B==="last")W.reverse();else if(B==="prev"||B==="next"){B==="prev"&&W.reverse();const Q=W.indexOf(G.currentTarget);W=E.loop?L7(W,Q+1):W.slice(Q+1)}setTimeout(()=>r4(W))}}),children:typeof d=="function"?d({isCurrentTabStop:P,hasTabStop:D!=null}):d})})});t4.displayName=e4;var M7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function R7(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function D7(e,t,r){const a=R7(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return M7[a]}function r4(e,t=!1){const r=document.activeElement;for(const a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}function L7(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var F7=Qk,z7=t4;function n4(e){const t=ae.useRef({value:e,previous:e});return ae.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var w1="Radio",[O7,i4]=Vc(w1),[N7,B7]=O7(w1),a4=ae.forwardRef((e,t)=>{const{__scopeRadio:r,name:a,checked:o=!1,required:h,disabled:d,value:l="on",onCheck:b,form:w,...E}=e,[P,k]=ae.useState(null),R=Xi(t,G=>k(G)),z=ae.useRef(!1),D=P?w||!!P.closest("form"):!0;return Se.jsxs(N7,{scope:r,checked:o,disabled:d,children:[Se.jsx(ti.button,{type:"button",role:"radio","aria-checked":o,"data-state":c4(o),"data-disabled":d?"":void 0,disabled:d,value:l,...E,ref:R,onClick:Fn(e.onClick,G=>{o||b==null||b(),D&&(z.current=G.isPropagationStopped(),z.current||G.stopPropagation())})}),D&&Se.jsx(l4,{control:P,bubbles:!z.current,name:a,value:l,checked:o,required:h,disabled:d,form:w,style:{transform:"translateX(-100%)"}})]})});a4.displayName=w1;var s4="RadioIndicator",o4=ae.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:a,...o}=e,h=B7(s4,r);return Se.jsx(ip,{present:a||h.checked,children:Se.jsx(ti.span,{"data-state":c4(h.checked),"data-disabled":h.disabled?"":void 0,...o,ref:t})})});o4.displayName=s4;var U7="RadioBubbleInput",l4=ae.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:a=!0,...o},h)=>{const d=ae.useRef(null),l=Xi(d,h),b=n4(r),w=g1(t);return ae.useEffect(()=>{const E=d.current;if(!E)return;const P=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(P,"checked").set;if(b!==r&&R){const z=new Event("click",{bubbles:a});R.call(E,r),E.dispatchEvent(z)}},[b,r,a]),Se.jsx(ti.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:l,style:{...o.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});l4.displayName=U7;function c4(e){return e?"checked":"unchecked"}var V7=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Fg="RadioGroup",[j7]=Vc(Fg,[Jk,i4]),u4=Jk(),h4=i4(),[$7,G7]=j7(Fg),f4=ae.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:a,defaultValue:o,value:h,required:d=!1,disabled:l=!1,orientation:b,dir:w,loop:E=!0,onValueChange:P,...k}=e,R=u4(r),z=Kk(w),[D,G]=Rg({prop:h,defaultProp:o??null,onChange:P,caller:Fg});return Se.jsx($7,{scope:r,name:a,required:d,disabled:l,value:D,onValueChange:G,children:Se.jsx(F7,{asChild:!0,...R,orientation:b,dir:z,loop:E,children:Se.jsx(ti.div,{role:"radiogroup","aria-required":d,"aria-orientation":b,"data-disabled":l?"":void 0,dir:z,...k,ref:t})})})});f4.displayName=Fg;var d4="RadioGroupItem",p4=ae.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:a,...o}=e,h=G7(d4,r),d=h.disabled||a,l=u4(r),b=h4(r),w=ae.useRef(null),E=Xi(t,w),P=h.value===o.value,k=ae.useRef(!1);return ae.useEffect(()=>{const R=D=>{V7.includes(D.key)&&(k.current=!0)},z=()=>k.current=!1;return document.addEventListener("keydown",R),document.addEventListener("keyup",z),()=>{document.removeEventListener("keydown",R),document.removeEventListener("keyup",z)}},[]),Se.jsx(z7,{asChild:!0,...l,focusable:!d,active:P,children:Se.jsx(a4,{disabled:d,required:h.required,checked:P,...b,...o,name:h.name,ref:E,onCheck:()=>h.onValueChange(o.value),onKeyDown:Fn(R=>{R.key==="Enter"&&R.preventDefault()}),onFocus:Fn(o.onFocus,()=>{var R;k.current&&((R=w.current)==null||R.click())})})})});p4.displayName=d4;var W7="RadioGroupIndicator",m4=ae.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...a}=e,o=h4(r);return Se.jsx(o4,{...o,...a,ref:t})});m4.displayName=W7;var g4=f4,_4=p4,H7=m4;const y4=ae.forwardRef(({className:e,...t},r)=>Se.jsx(g4,{className:Ac("grid gap-2",e),...t,ref:r}));y4.displayName=g4.displayName;const x4=ae.forwardRef(({className:e,...t},r)=>Se.jsx(_4,{ref:r,className:Ac("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus:ring-2 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:Se.jsx(H7,{className:"flex items-center justify-center",children:Se.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-primary"})})}));x4.displayName=_4.displayName;var zg="Checkbox",[q7]=Vc(zg),[Z7,b1]=q7(zg);function X7(e){const{__scopeCheckbox:t,checked:r,children:a,defaultChecked:o,disabled:h,form:d,name:l,onCheckedChange:b,required:w,value:E="on",internal_do_not_use_render:P}=e,[k,R]=Rg({prop:r,defaultProp:o??!1,onChange:b,caller:zg}),[z,D]=ae.useState(null),[G,B]=ae.useState(null),N=ae.useRef(!1),W=z?!!d||!!z.closest("form"):!0,Q={checked:k,disabled:h,setChecked:R,control:z,setControl:D,name:l,form:d,value:E,hasConsumerStoppedPropagationRef:N,required:w,defaultChecked:Cl(o)?!1:o,isFormControl:W,bubbleInput:G,setBubbleInput:B};return Se.jsx(Z7,{scope:t,...Q,children:K7(P)?P(Q):a})}var v4="CheckboxTrigger",w4=ae.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...a},o)=>{const{control:h,value:d,disabled:l,checked:b,required:w,setControl:E,setChecked:P,hasConsumerStoppedPropagationRef:k,isFormControl:R,bubbleInput:z}=b1(v4,e),D=Xi(o,E),G=ae.useRef(b);return ae.useEffect(()=>{const B=h==null?void 0:h.form;if(B){const N=()=>P(G.current);return B.addEventListener("reset",N),()=>B.removeEventListener("reset",N)}},[h,P]),Se.jsx(ti.button,{type:"button",role:"checkbox","aria-checked":Cl(b)?"mixed":b,"aria-required":w,"data-state":C4(b),"data-disabled":l?"":void 0,disabled:l,value:d,...a,ref:D,onKeyDown:Fn(t,B=>{B.key==="Enter"&&B.preventDefault()}),onClick:Fn(r,B=>{P(N=>Cl(N)?!0:!N),z&&R&&(k.current=B.isPropagationStopped(),k.current||B.stopPropagation())})})});w4.displayName=v4;var S1=ae.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:a,checked:o,defaultChecked:h,required:d,disabled:l,value:b,onCheckedChange:w,form:E,...P}=e;return Se.jsx(X7,{__scopeCheckbox:r,checked:o,defaultChecked:h,disabled:l,required:d,onCheckedChange:w,name:a,form:E,value:b,internal_do_not_use_render:({isFormControl:k})=>Se.jsxs(Se.Fragment,{children:[Se.jsx(w4,{...P,ref:t,__scopeCheckbox:r}),k&&Se.jsx(E4,{__scopeCheckbox:r})]})})});S1.displayName=zg;var b4="CheckboxIndicator",S4=ae.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:a,...o}=e,h=b1(b4,r);return Se.jsx(ip,{present:a||Cl(h.checked)||h.checked===!0,children:Se.jsx(ti.span,{"data-state":C4(h.checked),"data-disabled":h.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});S4.displayName=b4;var T4="CheckboxBubbleInput",E4=ae.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:a,hasConsumerStoppedPropagationRef:o,checked:h,defaultChecked:d,required:l,disabled:b,name:w,value:E,form:P,bubbleInput:k,setBubbleInput:R}=b1(T4,e),z=Xi(r,R),D=n4(h),G=g1(a);ae.useEffect(()=>{const N=k;if(!N)return;const W=window.HTMLInputElement.prototype,_e=Object.getOwnPropertyDescriptor(W,"checked").set,Ce=!o.current;if(D!==h&&_e){const te=new Event("click",{bubbles:Ce});N.indeterminate=Cl(h),_e.call(N,Cl(h)?!1:h),N.dispatchEvent(te)}},[k,D,h,o]);const B=ae.useRef(Cl(h)?!1:h);return Se.jsx(ti.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??B.current,required:l,disabled:b,name:w,value:E,form:P,...t,tabIndex:-1,ref:z,style:{...t.style,...G,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});E4.displayName=T4;function K7(e){return typeof e=="function"}function Cl(e){return e==="indeterminate"}function C4(e){return Cl(e)?"indeterminate":e?"checked":"unchecked"}const A4=ae.forwardRef(({className:e,...t},r)=>Se.jsx(S1,{ref:r,className:Ac("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:Se.jsx(S4,{className:Ac("flex items-center justify-center text-current"),children:Se.jsx(fD,{className:"h-4 w-4"})})}));A4.displayName=S1.displayName;const k4="https://tiles.basemaps.cartocdn.com/gl/positron-gl-style/style.json",Y7="https://tiles.basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",J7="https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json";function op(e,t){return{version:8,sources:{"raster-tiles":{type:"raster",tiles:e,tileSize:256,attribution:t}},layers:[{id:"raster-tiles",type:"raster",source:"raster-tiles"}]}}const Q7=["mt0","mt1","mt2","mt3"],Og=e=>Q7.map(t=>`https://${t}.google.com/vt/lyrs=${e}&x={x}&y={y}&z={z}`),eU=op(Og("m")," Google"),tU=op(Og("s")," Google"),rU=op(Og("y")," Google"),nU=op(Og("t")," Google"),iU=[{key:"light",label:"Light (Positron)",url:k4},{key:"dark",label:"Dark Matter",url:Y7},{key:"voyager",label:"Voyager",url:J7},{key:"g-road",label:"Google Road",url:eU},{key:"g-sat",label:"Google Satellite",url:tU},{key:"g-hybrid",label:"Google Hybrid",url:rU},{key:"g-terrain",label:"Google Terrain",url:nU}],aU={category:[{name:"OpenStreetMap",image:"osm",tms:[{name:"osm",title:"",description:'   OpenStreetMap.<br/><a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>',type:"xyz",url:"https://tile.openstreetmap.org/{LEVEL}/{ROW}/{COL}.png",level:{min:0,max:19}}]},{name:"2GIS",image:"2gis",tms:[{name:"two_gis",title:"",description:'    2GIS    ,    . ,        ,     .<br/><a href="https://law.2gis.ru/licensing-agreement/">2GIS<\\a>',type:"xyz",url:"http://tile[0123].maps.2gis.com/tiles?x={ROW}&y={COL}&z={LEVEL}",level:{min:0,max:18}}]},{name:"Bing",image:"bing",tms:[{name:"bing_map_ru",title:" ()",description:'  Bing    .     ,    , ,    .<br/><a href="https://www.microsoft.com/servicesagreement/">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=ru-RU&it=G,VE,BX,L,LA&shading=hill&og=1631&n=z",level:{min:1,max:21}},{name:"bing_map_en",title:" ()",description:'  Bing       .     ,    , ,    .<br/><a href="https://www.microsoft.com/servicesagreement/">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=en-US&it=G,VE,BX,L,LA&shading=hill&og=1631&n=z",level:{min:1,max:21}},{name:"bing_satellite",title:"",description:'  Bing.<br/><a href="https://www.microsoft.com/servicesagreement/">Microsoft<\\a>',type:"quadkey",url:"http://ecn.t[0123].tiles.virtualearth.net/tiles/a{QUADKEY}.jpeg?g=11363",level:{min:1,max:19}},{name:"bing_hybrid_ru",title:" ()",description:'  Bing,            Bing.<br/><a href="https://www.microsoft.com/servicesagreement/">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=ru-RU&it=A,G,L&og=1631&n=z",level:{min:1,max:19}},{name:"bing_hybrid_en",title:" ()",description:'  Bing   ,            Bing.<br/><a href="https://www.microsoft.com/servicesagreement/">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=en-US&it=A,G,L&og=1631&n=z",level:{min:1,max:19}},{name:"bing_roads",title:"",description:'  Bing     .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?it=Z,G&shading=hill&og=1631&n=z",level:{min:1,max:21}},{name:"bing_names_ru",title:" ()",description:'     Bing   .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=ru-RU&it=Z,L&shading=hill&og=1631&n=z",level:{min:1,max:21}},{name:"bing_names_en",title:" ()",description:'     Bing      .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?mkt=en-US&it=Z,L&shading=hill&og=1631&n=z",level:{min:1,max:21}},{name:"bing_canvas_light",title:" ",description:'      Bing  .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?it=G&cstl=WL&og=1631&n=z",level:{min:1,max:21}},{name:"bing_canvas_gray",title:" ",description:'      Bing  .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?it=G&cstl=CG&og=1631&n=z",level:{min:1,max:21}},{name:"bing_canvas_black",title:" ",description:'      Bing  .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ak.dynamic.t[0123].tiles.virtualearth.net/comp/ch/{QUADKEY}?it=G&cstl=WD&og=1631&n=z",level:{min:1,max:21}},{name:"bing_traffic",title:"",description:' Bing   .<br/><a href="https://www.microsoft.com/servicesagreement">Microsoft<\\a>',type:"quadkey",url:"http://ecn.t[0123].tiles.virtualearth.net/dp/content?p=tf&a={QUADKEY}&n=z",level:{min:7,max:21},liveTime:60}]},{name:"Here",image:"here",tms:[{name:"here_terrain_en1",title:" ()",description:'  HERRE       .<br/><a href="https://legal.here.com/terms">HERE<\\a>',type:"xyz",url:"https://maps.hereapi.com/v3/base/mc/{LEVEL}/{ROW}/{COL}/jpeg?apiKey=ULcxipCuamEAS6NsNntuAMM84LddvMOlXH0BsE2RfaU&lang=en&style=satellite.day&size=256"}]},{name:"TomTom",image:"tomtom",tms:[{name:"tomtom_traffic",title:"",description:' TomTom   .<br/><a href="https://www.tomtom.com/legal">TomTom<\\a>',type:"xyz",url:"https://d.api.tomtom.com/traffic/map/4/tile/flow/relative/{LEVEL}/{ROW}/{COL}.png?key=sATA9OwG11zrMKQcCxR3eSEjj2n8Jsrg",level:{min:6,max:22},liveTime:60}]},{name:"Waze",image:"waze",tms:[{name:"waze_map",description:'  Waze.<br/><a href="https://www.waze.com/legal/tos">Waze<\\a>',title:"",type:"xyz",url:"https://worldtiles1.waze.com/tiles/{LEVEL}/{ROW}/{COL}.png"}]},{name:"Digimap",image:"digimap",tms:[{name:"digimap",description:'  ,    ,           .         RuMap    ,    .<br/><a href="https://rumap.ru/rules.html"> -<\\a>',title:"",type:"xyz",url:"https://tile.digimap.ru/rumap/{LEVEL}/{ROW}/{COL}.png?guid=DDC7AEA4-1BDA-1019-A30D-1CD07F74BEED"}]},{name:"",image:"yandex",tms:[{name:"yandex_map_ru",title:"  ()",description:'  .<br/><a href="https://yandex.ru/legal/maps_termsofuse"><\\a>',type:"xyz",url:"https://core-renderer-tiles.maps.yandex.net/tiles?l=map&lang=ru_RU&x={ROW}&y={COL}&z={LEVEL}",level:{min:0,max:20},cs:'CoordSys Earth Projection 10, 104, "m", 0  Bounds (-20037508.3429, -20037508.3429) (20037508.3429, 20037508.3429)'},{name:"yandex_streetmap_en",title:"  ()",description:'    .<br/><a href="https://yandex.ru/legal/maps_termsofuse"><\\a>',type:"xyz",url:"https://core-renderer-tiles.maps.yandex.net/tiles?l=map&lang=en_US&x={ROW}&y={COL}&z={LEVEL}",level:{min:0,max:20},cs:'CoordSys Earth Projection 10, 104, "m", 0  Bounds (-20037508.3429, -20037508.3429) (20037508.3429, 20037508.3429)'},{name:"yandex_satellite",title:"",description:'  .        .<br/><a href="https://yandex.ru/legal/maps_termsofuse"><\\a>',type:"xyz",url:"https://core-sat.maps.yandex.net/tiles?l=sat&x={ROW}&y={COL}&z={LEVEL}&scale=1",level:{min:0,max:20},cs:'CoordSys Earth Projection 10, 104, "m", 0  Bounds (-20037508.3429, -20037508.3429) (20037508.3429, 20037508.3429)'},{name:"yandex_schema_and_names_ru",title:"   ()",description:'    ,   ,      .<br/><a href="https://yandex.ru/legal/maps_termsofuse"><\\a>',type:"xyz",url:"https://core-renderer-tiles.maps.yandex.net/tiles?l=skl&lang=ru_RU&x={ROW}&y={COL}&z={LEVEL}&scale=1",level:{min:0,max:20},cs:'CoordSys Earth Projection 10, 104, "m", 0  Bounds (-20037508.3429, -20037508.3429) (20037508.3429, 20037508.3429)'},{name:"yandex_schema_and_names_en",title:"   ()",description:'      ,   ,      .<br/><a href="https://yandex.ru/legal/maps_termsofuse"><\\a>',type:"xyz",url:"https://core-renderer-tiles.maps.yandex.net/tiles?l=skl&lang=en_US&x={ROW}&y={COL}&z={LEVEL}&scale=1",level:{min:0,max:20},cs:'CoordSys Earth Projection 10, 104, "m", 0  Bounds (-20037508.3429, -20037508.3429) (20037508.3429, 20037508.3429)'}]}]},Dy={services:aU};function sU(e){const t=e.match(/\[(.+?)\]/);return t?t[1].split("").map(a=>e.replace(t[0],a)):[e]}function oU(e){return e.replace(/\{LEVEL\}/g,"{z}").replace(/\{ROW\}/g,"{x}").replace(/\{COL\}/g,"{y}")}function lU(){var t;const e=[];try{const r=((t=Dy==null?void 0:Dy.services)==null?void 0:t.category)??[];for(const a of r)for(const o of a.tms??[]){if(o.type!=="xyz"||!o.url)continue;const h=sU(oU(String(o.url))),d=op(h,o.title??a.name);e.push({key:o.name,label:`${a.name}: ${o.title??o.name}`,url:d})}}catch{}return e}const BS=[{key:"none",label:"  ",url:null},...iU,...lU()];function cU(){const[e,t]=ae.useState("osm"),[r,a]=ae.useState(!1),[o,h]=ae.useState(!1),[d,l]=ae.useState(!1),[b,w]=ae.useState([]),[E,P]=ae.useState(new Set),[k,R]=ae.useState([]),[z,D]=ae.useState([]),[G,B]=ae.useState(null),[N,W]=ae.useState(!1),[Q,_e]=ae.useState(null),[Ce,te]=ae.useState(!1),[we,Pe]=ae.useState("light");ae.useEffect(()=>{fetch(`${kc}/catalog`).then(nt=>nt.json()).then(nt=>{const Rt=nt.tiles||{},Ke={"gdx2.stp.geom":" - ","gdx2.stl.geom":" - ","gdx2.sta.geom":" - ","gdx2.lu.geom":" ","gdx2.field.geom":""},dt=["field","lu","sta","stl","stp"],Dt=Object.keys(Rt).map(xe=>({name:xe,title:Ke[Rt[xe].description]||Rt[xe].description||xe,description:Rt[xe].description||xe,type:"xyz",url:`${kc}/${xe}/{z}/{x}/{y}`,level:{min:0,max:22}})).sort((xe,Te)=>dt.indexOf(xe.name)-dt.indexOf(Te.name));w(Dt);const jt=new Set(Dt.map(xe=>xe.name));P(jt)}).catch(nt=>console.error("Failed to fetch layers:",nt))},[]);const ke=ae.useMemo(()=>{const nt=BS.find(Rt=>Rt.key===e);return nt?nt.url:k4},[e]),$e=()=>{h(nt=>!nt)},Ue=()=>{a(nt=>!nt)},at=()=>{l(nt=>!nt)},yt=(nt,Rt)=>{P(Ke=>{const dt=new Set(Ke);return Rt?dt.add(nt):dt.delete(nt),dt})},gt=nt=>{t(nt),a(!1)};return Se.jsxs("div",{className:`min-h-screen bg-background text-foreground relative ${we}`,children:[Se.jsx(TD,{theme:we,onThemeChange:Pe}),Se.jsxs("main",{className:"absolute top-14 left-0 right-0 bottom-0",children:[Se.jsx("div",{className:"absolute left-0 top-0 bottom-0 z-10",children:Se.jsx(v7,{onLayersClick:$e,onBaseMapsClick:Ue,onAttributesClick:at,isLayersActive:o,isBaseMapsActive:r,isAttributesActive:d})}),o&&Se.jsxs("div",{className:"absolute left-16 top-0 bottom-0 z-20 bg-background border-r border-border p-3 w-64",children:[Se.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),Se.jsx("div",{className:"space-y-2",children:b.map(nt=>Se.jsxs("div",{className:"flex items-center gap-2",children:[Se.jsx(A4,{id:`layer-${nt.name}`,checked:E.has(nt.name),onCheckedChange:Rt=>yt(nt.name,Rt)}),Se.jsx(Bx,{htmlFor:`layer-${nt.name}`,children:nt.title})]},nt.name))})]}),r&&Se.jsxs("div",{className:"absolute left-16 top-0 bottom-0 z-20 bg-background border-r border-border p-3 w-64",children:[Se.jsx("h3",{className:"text-lg font-semibold mb-3",children:" "}),Se.jsx(y4,{value:e,onValueChange:gt,children:Se.jsx("div",{className:"space-y-2",children:BS.map(nt=>Se.jsxs("div",{className:"flex items-center gap-2",children:[Se.jsx(x4,{id:`popup-basemap-${nt.key}`,value:nt.key}),Se.jsx(Bx,{htmlFor:`popup-basemap-${nt.key}`,children:nt.label})]},nt.key))})})]}),Se.jsx("div",{className:`absolute top-0 right-0 bottom-0 ${r||o?"left-80":"left-16"}`,children:Se.jsxs(Vv,{direction:"vertical",children:[Se.jsx(xc,{defaultSize:d?60:80,minSize:30,children:Se.jsx(p7,{hoveredFeatures:k,clickedFeatures:z,showFeatureTable:N,onToggleFeatureTable:W,activeInfoMode:Q,onSetActiveInfoMode:nt=>{_e(nt),nt&&te(!1)},showMarkerInfo:Ce,onToggleMarkerInfo:nt=>{te(nt),nt&&_e(null)},children:Se.jsx(dL,{styleUrl:ke,visibleLayers:E,layers:b,onFeaturesHover:R,enableHover:Q!==null,infoMode:Q,onClick:(nt,Rt)=>{D(nt),B(Rt)},marker:G})})}),Se.jsx(Dd,{className:"h-2 bg-border"}),Se.jsx(xc,{defaultSize:d?30:10,minSize:5,maxSize:50,children:Se.jsx(w7,{})}),Se.jsx(Dd,{className:"h-2 bg-border"}),Se.jsx(xc,{defaultSize:10,minSize:5,maxSize:15,children:Se.jsx("div",{className:"bg-muted border-t border-border flex items-center justify-center h-full",children:Se.jsx("div",{className:"w-1/2 flex items-center justify-center",children:Se.jsx("p",{className:"text-sm text-muted-foreground",children:"Bottom Panel"})})})})]},d?"active":"inactive")})]})]})}Ly.createRoot(document.getElementById("root")).render(Se.jsx(xo.StrictMode,{children:Se.jsx(cU,{})}));
